"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const httpServer = require("http-server");
const openPort = require("openport");
const utils_1 = require("./utils");
const path = require("path");
const opn = require("opn");
/**
 * @export
 * @param {string} dataPath Filename of data generated for graph
 * @param {string} [contextPath=__dirname] Path to be passed in when function is not consumed by bundle-buddy cli process
 */
function launchServer(dataPath, contextPath = __dirname) {
    openPort.find((err, port) => {
        if (err != null) {
            console.log(err);
            process.exit(1);
        }
        httpServer
            .createServer({
            root: path.join(contextPath, utils_1.VIZ_PATH)
        })
            .listen(port, "0.0.0.0", () => {
            console.log(`Server running on port ${port}`);
            console.log(`Press Control+C to Quit`);
            opn(`http://localhost:${port}?file=${dataPath}`);
        });
    });
}
exports.launchServer = launchServer;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VydmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic2VydmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxVQUFVLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBQzFDLE1BQU0sUUFBUSxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNyQyxtQ0FBbUM7QUFDbkMsNkJBQTZCO0FBQzdCLDJCQUEyQjtBQUUzQjs7OztHQUlHO0FBQ0gsc0JBQ0UsUUFBZ0IsRUFDaEIsY0FBc0IsU0FBUztJQUUvQixRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBVSxFQUFFLElBQVk7UUFDckMsRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDaEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNqQixPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2xCLENBQUM7UUFDRCxVQUFVO2FBQ1AsWUFBWSxDQUFDO1lBQ1osSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLGdCQUFRLENBQUM7U0FDdkMsQ0FBQzthQUNELE1BQU0sQ0FBQyxJQUFJLEVBQUUsU0FBUyxFQUFFO1lBQ3ZCLE9BQU8sQ0FBQyxHQUFHLENBQUMsMEJBQTBCLElBQUksRUFBRSxDQUFDLENBQUM7WUFDOUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO1lBQ3ZDLEdBQUcsQ0FBQyxvQkFBb0IsSUFBSSxTQUFTLFFBQVEsRUFBRSxDQUFDLENBQUM7UUFDbkQsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUM7QUFuQkQsb0NBbUJDIn0=