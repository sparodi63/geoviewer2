webpackJsonp([3,11],{59:function(e,t,a){e.exports={default:a(60),__esModule:!0}},60:function(e,t,a){a(73),e.exports=a(10).Object.keys},66:function(e,t,a){var r=a(30),n=a(10),s=a(18);e.exports=function(e,t){var a=(n.Object||{})[e]||Object[e],c={};c[e]=t(a),r(r.S+r.F*s(function(){a(1)}),"Object",c)}},73:function(e,t,a){var r=a(51),n=a(22);a(66)("keys",function(){return function(e){return n(r(e))}})},159:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(59),s=r(n),c=a(28),o=(r(c),a(25)),i=r(o),u=a(29),l=(r(u),a(12)),f=(r(l),a(26)),d=r(f),h=a(1),p=r(h);p.default.use(d.default),p.default.use(i.default),t.default={data:function(){return{results:[],address:[],recordsCache:{},layers:null,cachedLayers:[],propertyName:null,loading:!1,marker:null}},mounted:function(){var e=this;this.layers=GV.config.getButtonOption("search","layers"),this.propertyName=GV.config.getButtonOption("search","propertyName"),GV.app.map.eachLayer(function(t){e.layers.forEach(function(a){e.cacheLayer(t,a)})}),GV.eventBus.$on("layer-loaded-json",function(t){e.layers.forEach(function(a){e.cacheLayer(t,a)})})},methods:{cacheLayer:function(e,t){var a=this;e.name!==t||this.isLayerCached(e.name)||e instanceof L.LayerGroup&&(e.eachLayer(function(e){var t=e.getLatLng();t.layer=e,a.recordsCache[e.feature.properties[a.propertyName]]=t}),this.cachedLayers.push(e.name))},isLayerCached:function(e){return this.cachedLayers&&this.cachedLayers.find(function(t){return t===e})},search:function(e){var t=this;if(this.results=[],!(e.length<4)){var a=this.filterData(e,this.recordsCache);(0,s.default)(a).length>0?(0,s.default)(a).forEach(function(e,r){t.results.push({label:e,value:e,location:a[e]})}):this.results=[]}},filterData:function(e,t){if(e=e.replace(/[.*+?^${}()|[\]\\]/g,""),""===e)return[];var a={};return(0,s.default)(t).filter(function(t){return new RegExp(e,"i").test(t)}).forEach(function(e){a[e]=t[e]}),a},onChange:function(e){var t=this.results.find(function(t){return t.value===e});t?(t.type="circle",t.zoomLevel=16,this.marker=GV.app.map.addMarker(t)):this.marker&&GV.app.map.removeLayer(this.marker)}}}},252:function(e,t,a){t=e.exports=a(2)(),t.push([e.id,".gv-search{height:32px;z-index:800}.el-select,.gv-search{width:250px}","",{version:3,sources:["/./src/Components/Search.vue"],names:[],mappings:"AACA,WACE,YAAa,AAEb,WAAa,CACd,AACD,sBAHE,WAAa,CAKd",file:"Search.vue",sourcesContent:["\n.gv-search {\r\n  height: 32px;\r\n  width: 250px;\r\n  z-index: 800;\n}\n.el-select {\r\n  width: 250px;\n}\r\n"],sourceRoot:"webpack://"}])},299:function(e,t,a){var r=a(252);"string"==typeof r&&(r=[[e.id,r,""]]);a(3)(r,{});r.locals&&(e.exports=r.locals)},326:function(e,t,a){var r,n;a(299),r=a(159);var s=a(340);n=r=r||{},"object"!=typeof r.default&&"function"!=typeof r.default||(n=r=r.default),"function"==typeof n&&(n=n.options),n.render=s.render,n.staticRenderFns=s.staticRenderFns,e.exports=r},340:function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"gv-search",attrs:{id:"gv-search"}},[e._c("el-select",{attrs:{filterable:"",clearable:"",remote:"",size:"mini",placeholder:"Ricerca Scuola..","remote-method":e.search,loading:e.loading,"loading-text":"Caricamento... ","no-match-text":"Nessuna scuola trovata","no-data-text":"Nessuna scuola trovata"},on:{change:e.onChange},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}},e._l(e.results,function(t){return e._c("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)},staticRenderFns:[]}}});
//# sourceMappingURL=3.js.map