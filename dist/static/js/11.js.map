{"version":3,"sources":["webpack:///static/js/11.js","webpack:///MeasureOL.vue","webpack:///./~/babel-runtime/core-js/object/define-property.js","webpack:///./~/babel-runtime/helpers/defineProperty.js","webpack:///./~/core-js/library/fn/object/define-property.js","webpack:///./~/core-js/library/modules/es6.object.define-property.js","webpack:///./src/components/MeasureOL.vue?44b9","webpack:///./src/components/MeasureOL.vue?c363","webpack:///./src/components/MeasureOL.vue","webpack:///./src/components/MeasureOL.vue?4d0a"],"names":["webpackJsonp","303","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_defineProperty2","_defineProperty3","_button","_base","_button3","_button4","_vue","_vue2","use","name","data","_ref","options","GV","config","getToolOptions","title","pointClass","lineClass","areaClass","layer","type","sketch","helpTooltipElement","helpTooltip","measureTooltipElement","measureTooltip","continuePolygonMsg","continueLineMsg","ol","style","Style","fill","Fill","color","stroke","Stroke","width","image","Circle","radius","methods","pointerMoveHandler","evt","dragging","helpMsg","this","geom","getGeometry","Polygon","LineString","innerHTML","setPosition","coordinate","classList","remove","addInteraction","_this","draw","interaction","Draw","source","getSource","app","map","createMeasureTooltip","createHelpTooltip","listener","on","feature","tooltipCoord","target","output","formatArea","getInteriorPoint","getCoordinates","formatLength","getLastCoordinate","Point","printPointToolTip","className","setOffset","Observable","unByKey","coords","_this2","fetch","join","then","response","json","console","log","wgs84","points","gb","etrf89","elevation","html","parentNode","removeChild","document","createElement","Overlay","element","offset","positioning","stopEvent","insertFirst","addOverlay","line","length","sphere","getLength","Math","round","polygon","area","getArea","measure","setButtonClass","clear","getOverlays","removeInteraction","getElementById","mounted","_this3","eventBus","$on","ev","Vector","zIndex","addLayer","402","407","_defineProperty","key","enumerable","configurable","writable","413","$Object","it","desc","450","$export","S","F","f","465","push","id","version","sources","names","mappings","file","sourcesContent","sourceRoot","556","content","locals","746","__vue_exports__","__vue_options__","__vue_template__","render","staticRenderFns","796","_vm","$createElement","_c","staticClass","attrs","divId","noClose","_v","size","click","$event"],"mappings":"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","file":"static/js/11.js","sourcesContent":["webpackJsonp([11,37],{\n\n/***/ 303:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _defineProperty2 = __webpack_require__(407);\n\t\n\tvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\t\n\tvar _button = __webpack_require__(9);\n\t\n\tvar _button2 = _interopRequireDefault(_button);\n\t\n\tvar _base = __webpack_require__(5);\n\t\n\tvar _base2 = _interopRequireDefault(_base);\n\t\n\tvar _button3 = __webpack_require__(8);\n\t\n\tvar _button4 = _interopRequireDefault(_button3);\n\t\n\tvar _vue = __webpack_require__(1);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_vue2.default.use(_button4.default);\n\t\n\texports.default = {\n\t  name: 'gv-measure-panel',\n\t  data: function data() {\n\t    var _ref;\n\t\n\t    var options = GV.config.getToolOptions('gv-measure-button');\n\t\n\t    return _ref = {\n\t      options: options,\n\t      title: options.title || 'Misurazioni',\n\t      pointClass: 'el-button--default el-button--mini el-button gv-color-scheme fg-measure',\n\t      lineClass: 'el-button--default el-button--mini el-button gv-color-scheme fg-measure-line',\n\t      areaClass: 'el-button--default el-button--mini el-button gv-color-scheme fg-measure-area',\n\t      layer: null,\n\t      type: null,\n\t      sketch: null,\n\t      helpTooltipElement: null,\n\t      helpTooltip: null,\n\t      measureTooltipElement: null,\n\t      measureTooltip: null,\n\t      continuePolygonMsg: 'Click per continuare il disegno del poligono',\n\t      continueLineMsg: 'Click per continuare il disegno della linea'\n\t    }, (0, _defineProperty3.default)(_ref, 'measureTooltip', null), (0, _defineProperty3.default)(_ref, 'draw', null), (0, _defineProperty3.default)(_ref, 'style', new ol.style.Style({\n\t      fill: new ol.style.Fill({\n\t        color: 'rgba(255, 255, 255, 0.2)'\n\t      }),\n\t      stroke: new ol.style.Stroke({\n\t        color: '#ffcc33',\n\t        width: 2\n\t      }),\n\t      image: new ol.style.Circle({\n\t        radius: 7,\n\t        fill: new ol.style.Fill({\n\t          color: '#ffcc33'\n\t        })\n\t      })\n\t    })), _ref;\n\t  },\n\t\n\t  methods: {\n\t    pointerMoveHandler: function pointerMoveHandler(evt) {\n\t      if (evt.dragging) {\n\t        return;\n\t      }\n\t      var helpMsg = 'Click per disegnare';\n\t      if (this.sketch) {\n\t        var geom = this.sketch.getGeometry();\n\t        if (geom instanceof ol.geom.Polygon) {\n\t          helpMsg = this.continuePolygonMsg;\n\t        } else if (geom instanceof ol.geom.LineString) {\n\t          helpMsg = this.continueLineMsg;\n\t        }\n\t      }\n\t      this.helpTooltipElement.innerHTML = helpMsg;\n\t      this.helpTooltip.setPosition(evt.coordinate);\n\t      this.helpTooltipElement.classList.remove('hidden');\n\t    },\n\t    addInteraction: function addInteraction(type) {\n\t      var _this = this;\n\t\n\t      this.draw = new ol.interaction.Draw({\n\t        source: this.layer.getSource(),\n\t        type: type,\n\t        style: this.style\n\t      });\n\t      GV.app.map.addInteraction(this.draw);\n\t\n\t      this.createMeasureTooltip();\n\t      this.createHelpTooltip();\n\t\n\t      var listener = void 0;\n\t      this.draw.on('drawstart', function (evt) {\n\t        _this.sketch = evt.feature;\n\t        var tooltipCoord = evt.coordinate;\n\t        listener = _this.sketch.getGeometry().on('change', function (evt) {\n\t          var geom = evt.target;\n\t          var output = void 0;\n\t          if (geom instanceof ol.geom.Polygon) {\n\t            output = _this.formatArea(geom);\n\t            tooltipCoord = geom.getInteriorPoint().getCoordinates();\n\t          } else if (geom instanceof ol.geom.LineString) {\n\t            output = _this.formatLength(geom);\n\t            tooltipCoord = geom.getLastCoordinate();\n\t          }\n\t          _this.measureTooltipElement.innerHTML = output;\n\t          _this.measureTooltip.setPosition(tooltipCoord);\n\t        });\n\t      });\n\t\n\t      this.draw.on('drawend', function (evt) {\n\t        var geom = _this.sketch.getGeometry();\n\t        if (geom instanceof ol.geom.Point) {\n\t          _this.printPointToolTip(geom.getCoordinates(), listener);\n\t        } else {\n\t          _this.measureTooltipElement.className = 'ol-tooltip ol-tooltip-static';\n\t          _this.measureTooltip.setOffset([0, -7]);\n\t          _this.sketch = null;\n\t\n\t          _this.measureTooltipElement = null;\n\t          _this.createMeasureTooltip();\n\t          ol.Observable.unByKey(listener);\n\t        }\n\t      });\n\t    },\n\t    printPointToolTip: function printPointToolTip(coords, listener) {\n\t      var _this2 = this;\n\t\n\t      this.measureTooltipElement.innerHTML = 'Trasformazione coordinate.<br>Attendere...';\n\t      this.measureTooltip.setPosition(coords);\n\t      fetch('http://srvcarto.regione.liguria.it/geoservices/REST/coordinate/measure/' + coords.join(',')).then(function (response) {\n\t        return response.json();\n\t      }).then(function (data) {\n\t        console.log(data);\n\t        var wgs84 = data.points['4326'];\n\t        var gb = data.points['3003'];\n\t        var etrf89 = data.points['25832'];\n\t        var elevation = data.elevation;\n\t        var html = '\\n              <table width=\"90%\">\\n              <tr><td>WGS84</td><td>' + wgs84 + '</td></tr>\\n              <tr><td>GAUSS-BOAGA</td> <td>' + gb + '</td></tr>\\n              <tr><td>ETRS89/UTM32N</td> <td>' + etrf89 + '</td></tr> \\n\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0<tr><td>QUOTA\\xA0(s.l.m.)</td>\\xA0<td>' + elevation + '</td>\\n              </tr></table>          \\n          ';\n\t\n\t        _this2.measureTooltipElement.innerHTML = html;\n\t        _this2.measureTooltip.setPosition(coords);\n\t        _this2.measureTooltipElement.className = 'ol-tooltip ol-tooltip-static';\n\t        _this2.measureTooltip.setOffset([0, -12]);\n\t        _this2.sketch = null;\n\t        _this2.measureTooltipElement = null;\n\t        _this2.createMeasureTooltip();\n\t        ol.Observable.unByKey(listener);\n\t      });\n\t    },\n\t    createMeasureTooltip: function createMeasureTooltip() {\n\t      if (this.measureTooltipElement) {\n\t        this.measureTooltipElement.parentNode.removeChild(this.measureTooltipElement);\n\t      }\n\t      this.measureTooltipElement = document.createElement('div');\n\t      this.measureTooltipElement.className = 'ol-tooltip ol-tooltip-measure';\n\t      this.measureTooltip = new ol.Overlay({\n\t        element: this.measureTooltipElement,\n\t        offset: [0, -15],\n\t        positioning: 'bottom-center',\n\t        stopEvent: false,\n\t        insertFirst: false\n\t      });\n\t      GV.app.map.addOverlay(this.measureTooltip);\n\t    },\n\t    createHelpTooltip: function createHelpTooltip() {\n\t      if (this.helpTooltipElement) {\n\t        this.helpTooltipElement.parentNode.removeChild(this.helpTooltipElement);\n\t      }\n\t      this.helpTooltipElement = document.createElement('div');\n\t      this.helpTooltipElement.className = 'ol-tooltip hidden';\n\t      this.helpTooltip = new ol.Overlay({\n\t        element: this.helpTooltipElement,\n\t        offset: [15, 0],\n\t        positioning: 'center-left'\n\t      });\n\t      GV.app.map.addOverlay(this.helpTooltip);\n\t    },\n\t    formatLength: function formatLength(line) {\n\t      var length = ol.sphere.getLength(line);\n\t      var output = void 0;\n\t      if (length > 100) {\n\t        output = Math.round(length / 1000 * 100) / 100 + ' ' + 'km';\n\t      } else {\n\t        output = Math.round(length * 100) / 100 + ' ' + 'm';\n\t      }\n\t      return output;\n\t    },\n\t    formatArea: function formatArea(polygon) {\n\t      var area = ol.sphere.getArea(polygon);\n\t      var output = void 0;\n\t      if (area > 10000) {\n\t        output = Math.round(area / 1000000 * 100) / 100 + ' ' + 'km<sup>2</sup>';\n\t      } else {\n\t        output = Math.round(area * 100) / 100 + ' ' + 'm<sup>2</sup>';\n\t      }\n\t      return output;\n\t    },\n\t    measure: function measure(type) {\n\t      this.type = type;\n\t      this.setButtonClass(null);\n\t      this.setButtonClass(type);\n\t\n\t      this.layer.getSource().clear(true);\n\t      GV.app.map.getOverlays().clear();\n\t\n\t      GV.app.map.on('pointermove', this.pointerMoveHandler);\n\t      if (this.draw) GV.app.map.removeInteraction(this.draw);\n\t      this.addInteraction(type);\n\t    },\n\t    setButtonClass: function setButtonClass(type) {\n\t      document.getElementById('gv-measure-point').className = this.pointClass;\n\t      document.getElementById('gv-measure-line').className = this.lineClass;\n\t      document.getElementById('gv-measure-area').className = this.areaClass;\n\t      switch (type) {\n\t        case 'Point':\n\t          document.getElementById('gv-measure-point').className = this.pointClass + ' gv-button-selected';\n\t          break;\n\t        case 'LineString':\n\t          document.getElementById('gv-measure-line').className = this.lineClass + ' gv-button-selected';\n\t          break;\n\t        case 'Polygon':\n\t          document.getElementById('gv-measure-area').className = this.areaClass + ' gv-button-selected';\n\t          break;\n\t      }\n\t    },\n\t    clear: function clear() {\n\t      this.layer.getSource().clear(true);\n\t      GV.app.map.getOverlays().clear();\n\t      GV.app.map.removeInteraction(this.draw);\n\t      this.setButtonClass(null);\n\t    }\n\t  },\n\t  mounted: function mounted() {\n\t    var _this3 = this;\n\t\n\t    GV.eventBus.$on('gv-control-measure-activate', function (ev) {\n\t      console.log('gv-control-measure-activate');\n\t    });\n\t    GV.eventBus.$on('gv-control-measure-deactivate', function (ev) {\n\t      console.log('gv-control-measure-deactivate');\n\t      _this3.clear();\n\t    });\n\t    this.layer = new ol.layer.Vector({\n\t      source: new ol.source.Vector(),\n\t      style: this.style,\n\t      zIndex: 800\n\t    });\n\t    GV.app.map.addLayer(this.layer);\n\t  }\n\t};\n\n/***/ }),\n\n/***/ 402:\n/***/ (function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(413), __esModule: true };\n\n/***/ }),\n\n/***/ 407:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\t\n\tvar _defineProperty = __webpack_require__(402);\n\t\n\tvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = function (obj, key, value) {\n\t  if (key in obj) {\n\t    (0, _defineProperty2.default)(obj, key, {\n\t      value: value,\n\t      enumerable: true,\n\t      configurable: true,\n\t      writable: true\n\t    });\n\t  } else {\n\t    obj[key] = value;\n\t  }\n\t\n\t  return obj;\n\t};\n\n/***/ }),\n\n/***/ 413:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(450);\n\tvar $Object = __webpack_require__(25).Object;\n\tmodule.exports = function defineProperty(it, key, desc){\n\t  return $Object.defineProperty(it, key, desc);\n\t};\n\n/***/ }),\n\n/***/ 450:\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar $export = __webpack_require__(49);\n\t// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n\t$export($export.S + $export.F * !__webpack_require__(48), 'Object', {defineProperty: __webpack_require__(50).f});\n\n/***/ }),\n\n/***/ 465:\n/***/ (function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(2)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \".gv-measure-panel{position:absolute;width:150px;left:0;top:0;margin-left:10px;margin-top:50px;z-index:800}.gv-measure-panel-body{position:absolute;padding:10px;overflow-y:auto;width:130px;height:25px}.ol-tooltip{position:relative;background:rgba(0,0,0,.5);border-radius:4px;color:#fff;padding:4px 8px;opacity:.7;white-space:nowrap;font-size:12px}.ol-tooltip-measure{opacity:1;font-weight:700}.ol-tooltip-static{background-color:#fc3;color:#000;border:1px solid #fff}.ol-tooltip-measure:before,.ol-tooltip-static:before{border-top:6px solid rgba(0,0,0,.5);border-right:6px solid transparent;border-left:6px solid transparent;content:'';position:absolute;bottom:-6px;margin-left:-7px;left:50%}.ol-tooltip-static:before{border-top-color:#fc3}\", \"\", {\"version\":3,\"sources\":[\"/./src/components/MeasureOL.vue\"],\"names\":[],\"mappings\":\"AACA,kBACE,kBAAmB,AACnB,YAAa,AACb,OAAU,AACV,MAAS,AACT,iBAAkB,AAClB,gBAAiB,AACjB,WAAa,CACd,AACD,uBACE,kBAAmB,AACnB,aAAc,AACd,gBAAiB,AACjB,YAAa,AACb,WAAa,CACd,AACD,YACE,kBAAmB,AACnB,0BAA+B,AAC/B,kBAAmB,AACnB,WAAa,AACb,gBAAiB,AACjB,WAAa,AACb,mBAAoB,AACpB,cAAgB,CACjB,AACD,oBACE,UAAW,AACX,eAAkB,CACnB,AACD,mBACE,sBAA0B,AAC1B,WAAa,AACb,qBAAwB,CACzB,AACD,qDAEE,oCAAyC,AACzC,mCAAoC,AACpC,kCAAmC,AACnC,WAAY,AACZ,kBAAmB,AACnB,YAAa,AACb,iBAAkB,AAClB,QAAU,CACX,AACD,0BACE,qBAA0B,CAC3B\",\"file\":\"MeasureOL.vue\",\"sourcesContent\":[\"\\n.gv-measure-panel {\\r\\n  position: absolute;\\r\\n  width: 150px;\\r\\n  left: 0px;\\r\\n  top: 0px;\\r\\n  margin-left: 10px;\\r\\n  margin-top: 50px;\\r\\n  z-index: 800;\\n}\\n.gv-measure-panel-body {\\r\\n  position: absolute;\\r\\n  padding: 10px;\\r\\n  overflow-y: auto;\\r\\n  width: 130px;\\r\\n  height: 25px;\\n}\\n.ol-tooltip {\\r\\n  position: relative;\\r\\n  background: rgba(0, 0, 0, 0.5);\\r\\n  border-radius: 4px;\\r\\n  color: white;\\r\\n  padding: 4px 8px;\\r\\n  opacity: 0.7;\\r\\n  white-space: nowrap;\\r\\n  font-size: 12px;\\n}\\n.ol-tooltip-measure {\\r\\n  opacity: 1;\\r\\n  font-weight: bold;\\n}\\n.ol-tooltip-static {\\r\\n  background-color: #ffcc33;\\r\\n  color: black;\\r\\n  border: 1px solid white;\\n}\\n.ol-tooltip-measure:before,\\r\\n.ol-tooltip-static:before {\\r\\n  border-top: 6px solid rgba(0, 0, 0, 0.5);\\r\\n  border-right: 6px solid transparent;\\r\\n  border-left: 6px solid transparent;\\r\\n  content: '';\\r\\n  position: absolute;\\r\\n  bottom: -6px;\\r\\n  margin-left: -7px;\\r\\n  left: 50%;\\n}\\n.ol-tooltip-static:before {\\r\\n  border-top-color: #ffcc33;\\n}\\r\\n\"],\"sourceRoot\":\"webpack://\"}]);\n\t\n\t// exports\n\n\n/***/ }),\n\n/***/ 556:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(465);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(3)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!./../../node_modules/css-loader/index.js?sourceMap!./../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-143396ba!./../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./MeasureOL.vue\", function() {\n\t\t\t\tvar newContent = require(\"!!./../../node_modules/css-loader/index.js?sourceMap!./../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-143396ba!./../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./MeasureOL.vue\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ }),\n\n/***/ 746:\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __vue_exports__, __vue_options__\n\tvar __vue_styles__ = {}\n\t\n\t/* styles */\n\t__webpack_require__(556)\n\t\n\t/* script */\n\t__vue_exports__ = __webpack_require__(303)\n\t\n\t/* template */\n\tvar __vue_template__ = __webpack_require__(796)\n\t__vue_options__ = __vue_exports__ = __vue_exports__ || {}\n\tif (\n\t  typeof __vue_exports__.default === \"object\" ||\n\t  typeof __vue_exports__.default === \"function\"\n\t) {\n\t__vue_options__ = __vue_exports__ = __vue_exports__.default\n\t}\n\tif (typeof __vue_options__ === \"function\") {\n\t  __vue_options__ = __vue_options__.options\n\t}\n\t\n\t__vue_options__.render = __vue_template__.render\n\t__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\t\n\tmodule.exports = __vue_exports__\n\n\n/***/ }),\n\n/***/ 796:\n/***/ (function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;\n\t  return _vm._c('div', {\n\t    staticClass: \"gv-measure-panel\",\n\t    attrs: {\n\t      \"id\": \"gv-measure-panel\"\n\t    }\n\t  }, [_vm._c('gv-title', {\n\t    attrs: {\n\t      \"title\": _vm.title,\n\t      \"divId\": 'gv-measure-panel',\n\t      \"noClose\": true\n\t    }\n\t  }), _vm._v(\" \"), _vm._c('div', {\n\t    staticClass: \"gv-measure-panel-body gv-inverted-color-scheme\"\n\t  }, [_vm._c('el-button', {\n\t    staticClass: \"gv-color-scheme fg-measure\",\n\t    attrs: {\n\t      \"id\": \"gv-measure-point\",\n\t      \"title\": \"Misure Puntuali (Coordinate)\",\n\t      \"size\": \"mini\"\n\t    },\n\t    on: {\n\t      \"click\": function($event) {\n\t        _vm.measure('Point')\n\t      }\n\t    }\n\t  }), _vm._v(\" \"), _vm._c('el-button', {\n\t    staticClass: \"gv-color-scheme fg-measure-line\",\n\t    attrs: {\n\t      \"id\": \"gv-measure-line\",\n\t      \"title\": \"Misure Lineari\",\n\t      \"size\": \"mini\"\n\t    },\n\t    on: {\n\t      \"click\": function($event) {\n\t        _vm.measure('LineString')\n\t      }\n\t    }\n\t  }), _vm._v(\" \"), _vm._c('el-button', {\n\t    staticClass: \"gv-color-scheme fg-measure-area\",\n\t    attrs: {\n\t      \"id\": \"gv-measure-area\",\n\t      \"title\": \"Misure Areali\",\n\t      \"size\": \"mini\"\n\t    },\n\t    on: {\n\t      \"click\": function($event) {\n\t        _vm.measure('Polygon')\n\t      }\n\t    }\n\t  })], 1)], 1)\n\t},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/11.js","<template>\r\n  <div id=\"gv-measure-panel\" class=\"gv-measure-panel\">\r\n    <gv-title :title=\"title\" :divId=\"'gv-measure-panel'\" :noClose=\"true\"></gv-title>\r\n    <div class=\"gv-measure-panel-body gv-inverted-color-scheme\">\r\n      <el-button\r\n        id=\"gv-measure-point\"\r\n        title=\"Misure Puntuali (Coordinate)\"\r\n        @click=\"measure('Point')\"\r\n        class=\"gv-color-scheme fg-measure\"\r\n        size=\"mini\"\r\n      />\r\n      <el-button\r\n        id=\"gv-measure-line\"\r\n        title=\"Misure Lineari\"\r\n        @click=\"measure('LineString')\"\r\n        class=\"gv-color-scheme fg-measure-line\"\r\n        size=\"mini\"\r\n      />\r\n      <el-button\r\n        id=\"gv-measure-area\"\r\n        title=\"Misure Areali\"\r\n        @click=\"measure('Polygon')\"\r\n        class=\"gv-color-scheme fg-measure-area\"\r\n        size=\"mini\"\r\n      />\r\n      <!-- <el-button\r\n        id=\"gv-measure-clear\"\r\n        title=\"Pulisci\"\r\n        @click=\"clear\"\r\n        class=\"el-button--default el-button--mini el-button gv-color-scheme el-icon-delete\"\r\n        size=\"mini\"\r\n      /> -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from 'vue';\r\n\r\nimport { Button } from 'element-ui';\r\nVue.use(Button);\r\n\r\nexport default {\r\n  name: 'gv-measure-panel',\r\n  data() {\r\n    const options = GV.config.getToolOptions('gv-measure-button');\r\n\r\n    return {\r\n      options: options,\r\n      title: options.title || 'Misurazioni',\r\n      pointClass: 'el-button--default el-button--mini el-button gv-color-scheme fg-measure',\r\n      lineClass: 'el-button--default el-button--mini el-button gv-color-scheme fg-measure-line',\r\n      areaClass: 'el-button--default el-button--mini el-button gv-color-scheme fg-measure-area',\r\n      layer: null,\r\n      type: null,\r\n      sketch: null,\r\n      helpTooltipElement: null,\r\n      helpTooltip: null,\r\n      measureTooltipElement: null,\r\n      measureTooltip: null,\r\n      continuePolygonMsg: 'Click per continuare il disegno del poligono',\r\n      continueLineMsg: 'Click per continuare il disegno della linea',\r\n      measureTooltip: null,\r\n      draw: null,\r\n      style: new ol.style.Style({\r\n        fill: new ol.style.Fill({\r\n          color: 'rgba(255, 255, 255, 0.2)',\r\n        }),\r\n        stroke: new ol.style.Stroke({\r\n          color: '#ffcc33',\r\n          width: 2,\r\n        }),\r\n        image: new ol.style.Circle({\r\n          radius: 7,\r\n          fill: new ol.style.Fill({\r\n            color: '#ffcc33',\r\n          }),\r\n        }),\r\n      }),\r\n    };\r\n  },\r\n  methods: {\r\n    pointerMoveHandler(evt) {\r\n      if (evt.dragging) {\r\n        return;\r\n      }\r\n      let helpMsg = 'Click per disegnare';\r\n      if (this.sketch) {\r\n        const geom = this.sketch.getGeometry();\r\n        if (geom instanceof ol.geom.Polygon) {\r\n          helpMsg = this.continuePolygonMsg;\r\n        } else if (geom instanceof ol.geom.LineString) {\r\n          helpMsg = this.continueLineMsg;\r\n        }\r\n      }\r\n      this.helpTooltipElement.innerHTML = helpMsg;\r\n      this.helpTooltip.setPosition(evt.coordinate);\r\n      this.helpTooltipElement.classList.remove('hidden');\r\n    },\r\n    addInteraction(type) {\r\n      this.draw = new ol.interaction.Draw({\r\n        source: this.layer.getSource(),\r\n        type: type,\r\n        style: this.style,\r\n      });\r\n      GV.app.map.addInteraction(this.draw);\r\n\r\n      this.createMeasureTooltip();\r\n      this.createHelpTooltip();\r\n\r\n      let listener;\r\n      this.draw.on('drawstart', evt => {\r\n        this.sketch = evt.feature;\r\n        let tooltipCoord = evt.coordinate;\r\n        listener = this.sketch.getGeometry().on('change', evt => {\r\n          const geom = evt.target;\r\n          let output;\r\n          if (geom instanceof ol.geom.Polygon) {\r\n            output = this.formatArea(geom);\r\n            tooltipCoord = geom.getInteriorPoint().getCoordinates();\r\n          } else if (geom instanceof ol.geom.LineString) {\r\n            output = this.formatLength(geom);\r\n            tooltipCoord = geom.getLastCoordinate();\r\n          }\r\n          this.measureTooltipElement.innerHTML = output;\r\n          this.measureTooltip.setPosition(tooltipCoord);\r\n        });\r\n      });\r\n\r\n      this.draw.on('drawend', evt => {\r\n        const geom = this.sketch.getGeometry();\r\n        if (geom instanceof ol.geom.Point) {\r\n          this.printPointToolTip(geom.getCoordinates(), listener);\r\n        } else {\r\n          this.measureTooltipElement.className = 'ol-tooltip ol-tooltip-static';\r\n          this.measureTooltip.setOffset([0, -7]);\r\n          this.sketch = null;\r\n          // unset tooltip so that a new one can be created\r\n          this.measureTooltipElement = null;\r\n          this.createMeasureTooltip();\r\n          ol.Observable.unByKey(listener);\r\n        }\r\n      });\r\n    },\r\n    printPointToolTip(coords, listener) {\r\n      this.measureTooltipElement.innerHTML = 'Trasformazione coordinate.<br>Attendere...';\r\n      this.measureTooltip.setPosition(coords);\r\n      fetch(\r\n        `http://srvcarto.regione.liguria.it/geoservices/REST/coordinate/measure/${coords.join(',')}`\r\n      )\r\n        .then(response => response.json())\r\n        .then(data => {\r\n          console.log(data);\r\n          const wgs84 = data.points['4326'];\r\n          const gb = data.points['3003'];\r\n          const etrf89 = data.points['25832'];\r\n          const elevation = data.elevation;\r\n          const html = `\r\n              <table width=\"90%\">\r\n              <tr><td>WGS84</td><td>${wgs84}</td></tr>\r\n              <tr><td>GAUSS-BOAGA</td> <td>${gb}</td></tr>\r\n              <tr><td>ETRS89/UTM32N</td> <td>${etrf89}</td></tr> \r\n              <tr><td>QUOTA (s.l.m.)</td> <td>${elevation}</td>\r\n              </tr></table>          \r\n          `;\r\n          // <tr><td>QUOTA</td> <td>44</td>\r\n          this.measureTooltipElement.innerHTML = html;\r\n          this.measureTooltip.setPosition(coords);\r\n          this.measureTooltipElement.className = 'ol-tooltip ol-tooltip-static';\r\n          this.measureTooltip.setOffset([0, -12]);\r\n          this.sketch = null;\r\n          this.measureTooltipElement = null;\r\n          this.createMeasureTooltip();\r\n          ol.Observable.unByKey(listener);\r\n        });\r\n    },\r\n    createMeasureTooltip() {\r\n      if (this.measureTooltipElement) {\r\n        this.measureTooltipElement.parentNode.removeChild(this.measureTooltipElement);\r\n      }\r\n      this.measureTooltipElement = document.createElement('div');\r\n      this.measureTooltipElement.className = 'ol-tooltip ol-tooltip-measure';\r\n      this.measureTooltip = new ol.Overlay({\r\n        element: this.measureTooltipElement,\r\n        offset: [0, -15],\r\n        positioning: 'bottom-center',\r\n        stopEvent: false,\r\n        insertFirst: false,\r\n      });\r\n      GV.app.map.addOverlay(this.measureTooltip);\r\n    },\r\n    createHelpTooltip() {\r\n      if (this.helpTooltipElement) {\r\n        this.helpTooltipElement.parentNode.removeChild(this.helpTooltipElement);\r\n      }\r\n      this.helpTooltipElement = document.createElement('div');\r\n      this.helpTooltipElement.className = 'ol-tooltip hidden';\r\n      this.helpTooltip = new ol.Overlay({\r\n        element: this.helpTooltipElement,\r\n        offset: [15, 0],\r\n        positioning: 'center-left',\r\n      });\r\n      GV.app.map.addOverlay(this.helpTooltip);\r\n    },\r\n    formatLength(line) {\r\n      const length = ol.sphere.getLength(line);\r\n      let output;\r\n      if (length > 100) {\r\n        output = Math.round((length / 1000) * 100) / 100 + ' ' + 'km';\r\n      } else {\r\n        output = Math.round(length * 100) / 100 + ' ' + 'm';\r\n      }\r\n      return output;\r\n    },\r\n    formatArea(polygon) {\r\n      const area = ol.sphere.getArea(polygon);\r\n      let output;\r\n      if (area > 10000) {\r\n        output = Math.round((area / 1000000) * 100) / 100 + ' ' + 'km<sup>2</sup>';\r\n      } else {\r\n        output = Math.round(area * 100) / 100 + ' ' + 'm<sup>2</sup>';\r\n      }\r\n      return output;\r\n    },\r\n    measure(type) {\r\n      this.type = type;\r\n      this.setButtonClass(null);\r\n      this.setButtonClass(type);\r\n\r\n      this.layer.getSource().clear(true);\r\n      GV.app.map.getOverlays().clear();\r\n\r\n      GV.app.map.on('pointermove', this.pointerMoveHandler);\r\n      if (this.draw) GV.app.map.removeInteraction(this.draw);\r\n      this.addInteraction(type);\r\n    },\r\n    setButtonClass(type) {\r\n      document.getElementById('gv-measure-point').className = this.pointClass;\r\n      document.getElementById('gv-measure-line').className = this.lineClass;\r\n      document.getElementById('gv-measure-area').className = this.areaClass;\r\n      switch (type) {\r\n        case 'Point':\r\n          document.getElementById('gv-measure-point').className =\r\n            this.pointClass + ' gv-button-selected';\r\n          break;\r\n        case 'LineString':\r\n          document.getElementById('gv-measure-line').className =\r\n            this.lineClass + ' gv-button-selected';\r\n          break;\r\n        case 'Polygon':\r\n          document.getElementById('gv-measure-area').className =\r\n            this.areaClass + ' gv-button-selected';\r\n          break;\r\n      }\r\n    },\r\n    clear() {\r\n      this.layer.getSource().clear(true);\r\n      GV.app.map.getOverlays().clear();\r\n      GV.app.map.removeInteraction(this.draw);\r\n      this.setButtonClass(null);\r\n    },\r\n  },\r\n  mounted: function() {\r\n    GV.eventBus.$on('gv-control-measure-activate', ev => {\r\n      console.log('gv-control-measure-activate');\r\n    });\r\n    GV.eventBus.$on('gv-control-measure-deactivate', ev => {\r\n      console.log('gv-control-measure-deactivate');\r\n      this.clear();\r\n    });\r\n    this.layer = new ol.layer.Vector({\r\n      source: new ol.source.Vector(),\r\n      style: this.style,\r\n      zIndex: 800,\r\n    });\r\n    GV.app.map.addLayer(this.layer);\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.gv-measure-panel {\r\n  position: absolute;\r\n  width: 150px;\r\n  left: 0px;\r\n  top: 0px;\r\n  margin-left: 10px;\r\n  margin-top: 50px;\r\n  z-index: 800;\r\n}\r\n\r\n.gv-measure-panel-body {\r\n  position: absolute;\r\n  padding: 10px;\r\n  overflow-y: auto;\r\n  width: 130px;\r\n  height: 25px;\r\n}\r\n\r\n.ol-tooltip {\r\n  position: relative;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  border-radius: 4px;\r\n  color: white;\r\n  padding: 4px 8px;\r\n  opacity: 0.7;\r\n  white-space: nowrap;\r\n  font-size: 12px;\r\n}\r\n.ol-tooltip-measure {\r\n  opacity: 1;\r\n  font-weight: bold;\r\n}\r\n.ol-tooltip-static {\r\n  background-color: #ffcc33;\r\n  color: black;\r\n  border: 1px solid white;\r\n}\r\n.ol-tooltip-measure:before,\r\n.ol-tooltip-static:before {\r\n  border-top: 6px solid rgba(0, 0, 0, 0.5);\r\n  border-right: 6px solid transparent;\r\n  border-left: 6px solid transparent;\r\n  content: '';\r\n  position: absolute;\r\n  bottom: -6px;\r\n  margin-left: -7px;\r\n  left: 50%;\r\n}\r\n.ol-tooltip-static:before {\r\n  border-top-color: #ffcc33;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// MeasureOL.vue?76849985","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/core-js/object/define-property.js\n// module id = 402\n// module chunks = 11","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (obj, key, value) {\n  if (key in obj) {\n    (0, _defineProperty2.default)(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/helpers/defineProperty.js\n// module id = 407\n// module chunks = 11","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc){\n  return $Object.defineProperty(it, key, desc);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/fn/object/define-property.js\n// module id = 413\n// module chunks = 11","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', {defineProperty: require('./_object-dp').f});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/es6.object.define-property.js\n// module id = 450\n// module chunks = 11","exports = module.exports = require(\"./../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".gv-measure-panel{position:absolute;width:150px;left:0;top:0;margin-left:10px;margin-top:50px;z-index:800}.gv-measure-panel-body{position:absolute;padding:10px;overflow-y:auto;width:130px;height:25px}.ol-tooltip{position:relative;background:rgba(0,0,0,.5);border-radius:4px;color:#fff;padding:4px 8px;opacity:.7;white-space:nowrap;font-size:12px}.ol-tooltip-measure{opacity:1;font-weight:700}.ol-tooltip-static{background-color:#fc3;color:#000;border:1px solid #fff}.ol-tooltip-measure:before,.ol-tooltip-static:before{border-top:6px solid rgba(0,0,0,.5);border-right:6px solid transparent;border-left:6px solid transparent;content:'';position:absolute;bottom:-6px;margin-left:-7px;left:50%}.ol-tooltip-static:before{border-top-color:#fc3}\", \"\", {\"version\":3,\"sources\":[\"/./src/components/MeasureOL.vue\"],\"names\":[],\"mappings\":\"AACA,kBACE,kBAAmB,AACnB,YAAa,AACb,OAAU,AACV,MAAS,AACT,iBAAkB,AAClB,gBAAiB,AACjB,WAAa,CACd,AACD,uBACE,kBAAmB,AACnB,aAAc,AACd,gBAAiB,AACjB,YAAa,AACb,WAAa,CACd,AACD,YACE,kBAAmB,AACnB,0BAA+B,AAC/B,kBAAmB,AACnB,WAAa,AACb,gBAAiB,AACjB,WAAa,AACb,mBAAoB,AACpB,cAAgB,CACjB,AACD,oBACE,UAAW,AACX,eAAkB,CACnB,AACD,mBACE,sBAA0B,AAC1B,WAAa,AACb,qBAAwB,CACzB,AACD,qDAEE,oCAAyC,AACzC,mCAAoC,AACpC,kCAAmC,AACnC,WAAY,AACZ,kBAAmB,AACnB,YAAa,AACb,iBAAkB,AAClB,QAAU,CACX,AACD,0BACE,qBAA0B,CAC3B\",\"file\":\"MeasureOL.vue\",\"sourcesContent\":[\"\\n.gv-measure-panel {\\r\\n  position: absolute;\\r\\n  width: 150px;\\r\\n  left: 0px;\\r\\n  top: 0px;\\r\\n  margin-left: 10px;\\r\\n  margin-top: 50px;\\r\\n  z-index: 800;\\n}\\n.gv-measure-panel-body {\\r\\n  position: absolute;\\r\\n  padding: 10px;\\r\\n  overflow-y: auto;\\r\\n  width: 130px;\\r\\n  height: 25px;\\n}\\n.ol-tooltip {\\r\\n  position: relative;\\r\\n  background: rgba(0, 0, 0, 0.5);\\r\\n  border-radius: 4px;\\r\\n  color: white;\\r\\n  padding: 4px 8px;\\r\\n  opacity: 0.7;\\r\\n  white-space: nowrap;\\r\\n  font-size: 12px;\\n}\\n.ol-tooltip-measure {\\r\\n  opacity: 1;\\r\\n  font-weight: bold;\\n}\\n.ol-tooltip-static {\\r\\n  background-color: #ffcc33;\\r\\n  color: black;\\r\\n  border: 1px solid white;\\n}\\n.ol-tooltip-measure:before,\\r\\n.ol-tooltip-static:before {\\r\\n  border-top: 6px solid rgba(0, 0, 0, 0.5);\\r\\n  border-right: 6px solid transparent;\\r\\n  border-left: 6px solid transparent;\\r\\n  content: '';\\r\\n  position: absolute;\\r\\n  bottom: -6px;\\r\\n  margin-left: -7px;\\r\\n  left: 50%;\\n}\\n.ol-tooltip-static:before {\\r\\n  border-top-color: #ffcc33;\\n}\\r\\n\"],\"sourceRoot\":\"webpack://\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?sourceMap!./~/vue-loader/lib/style-rewriter.js?id=data-v-143396ba!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/MeasureOL.vue\n// module id = 465\n// module chunks = 11","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../node_modules/css-loader/index.js?sourceMap!./../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-143396ba!./../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./MeasureOL.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../node_modules/vue-style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../node_modules/css-loader/index.js?sourceMap!./../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-143396ba!./../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./MeasureOL.vue\", function() {\n\t\t\tvar newContent = require(\"!!./../../node_modules/css-loader/index.js?sourceMap!./../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-143396ba!./../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./MeasureOL.vue\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"extract\":true,\"remove\":true}!./~/vue-style-loader!./~/css-loader?sourceMap!./~/vue-loader/lib/style-rewriter.js?id=data-v-143396ba!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/MeasureOL.vue\n// module id = 556\n// module chunks = 11","var __vue_exports__, __vue_options__\nvar __vue_styles__ = {}\n\n/* styles */\nrequire(\"!!./../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!vue-loader/lib/style-rewriter?id=data-v-143396ba!vue-loader/lib/selector?type=styles&index=0!./MeasureOL.vue\")\n\n/* script */\n__vue_exports__ = require(\"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./MeasureOL.vue\")\n\n/* template */\nvar __vue_template__ = require(\"!!vue-loader/lib/template-compiler?id=data-v-143396ba!vue-loader/lib/selector?type=template&index=0!./MeasureOL.vue\")\n__vue_options__ = __vue_exports__ = __vue_exports__ || {}\nif (\n  typeof __vue_exports__.default === \"object\" ||\n  typeof __vue_exports__.default === \"function\"\n) {\n__vue_options__ = __vue_exports__ = __vue_exports__.default\n}\nif (typeof __vue_options__ === \"function\") {\n  __vue_options__ = __vue_options__.options\n}\n\n__vue_options__.render = __vue_template__.render\n__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\nmodule.exports = __vue_exports__\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/MeasureOL.vue\n// module id = 746\n// module chunks = 11","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;\n  return _vm._c('div', {\n    staticClass: \"gv-measure-panel\",\n    attrs: {\n      \"id\": \"gv-measure-panel\"\n    }\n  }, [_vm._c('gv-title', {\n    attrs: {\n      \"title\": _vm.title,\n      \"divId\": 'gv-measure-panel',\n      \"noClose\": true\n    }\n  }), _vm._v(\" \"), _vm._c('div', {\n    staticClass: \"gv-measure-panel-body gv-inverted-color-scheme\"\n  }, [_vm._c('el-button', {\n    staticClass: \"gv-color-scheme fg-measure\",\n    attrs: {\n      \"id\": \"gv-measure-point\",\n      \"title\": \"Misure Puntuali (Coordinate)\",\n      \"size\": \"mini\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.measure('Point')\n      }\n    }\n  }), _vm._v(\" \"), _vm._c('el-button', {\n    staticClass: \"gv-color-scheme fg-measure-line\",\n    attrs: {\n      \"id\": \"gv-measure-line\",\n      \"title\": \"Misure Lineari\",\n      \"size\": \"mini\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.measure('LineString')\n      }\n    }\n  }), _vm._v(\" \"), _vm._c('el-button', {\n    staticClass: \"gv-color-scheme fg-measure-area\",\n    attrs: {\n      \"id\": \"gv-measure-area\",\n      \"title\": \"Misure Areali\",\n      \"size\": \"mini\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.measure('Polygon')\n      }\n    }\n  })], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-143396ba!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/MeasureOL.vue\n// module id = 796\n// module chunks = 11"],"sourceRoot":""}