webpackJsonp([29,28],[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(40),o=i(a),r=n(39),s=i(r);n(488);var l=n(313),u=(i(l),n(5)),c=i(u),d=n(155),f=i(d),p=n(370),h=i(p),g=n(367),m=i(g),v=n(7),_=i(v),y=n(21),b=i(y),L=n(365),w=i(L),C=n(358),M=i(C),x=n(359),S=i(x),E=n(357),I=i(E),T=n(356),A=i(T),O=n(327),G=i(O),P=n(343),R=i(P),V=n(334),k=i(V),F=n(308),z=i(F),B=n(1),N=i(B),D=n(618),j=i(D),U=n(363),W=i(U);n(594);n(607),n(608),n(611),n(610),n(609),n(322),n(321),n(323),n(487).polyfill(),window.GV={init:function(e){var t=this;return(0,s.default)(o.default.mark(function n(){var i,a,r,s;return o.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,k.default)();case 2:if(i=n.sent,GV.globals.ENV=i,t.messageEventListener(),!e.application.auth){n.next=22;break}a=e.application.auth.options,n.t0=e.application.auth.type,n.next="NAM"===n.t0?10:"S3"===n.t0?15:20;break;case 10:return n.next=12,(0,G.default)(a.ruolo);case 12:return r=n.sent,r.success?t.initConfig(e):(0,b.default)("ACCESSO ALLA APPLICAZIONE NON AUTORIZZATO"),n.abrupt("break",20);case 15:return n.next=17,(0,A.default)(a.s3Token,a.s3TokenType,a.s3TokenProv);case 17:return s=n.sent,s.success&&s.found?t.initConfig(e):(0,b.default)("ACCESSO ALLA APPLICAZIONE NON AUTORIZZATO"),n.abrupt("break",20);case 20:n.next=23;break;case 22:t.initConfig(e);case 23:case"end":return n.stop()}},n,t)}))()},messageEventListener:function(){window.addEventListener("message",function(e){var t=e.data;!t.type},!1)},initConfig:function(e){GV.config=z.default,z.default.init(e),N.default.component("gv-app",j.default);var t=new N.default({el:"#gv-container",template:"<gv-app></gv-app>"});return t},mountLegend:function(){(0,_.default)({elId:"gv-legend",clear:!0,containerId:GV.config.containerId,vm:new N.default({template:'<gv-legend ref="gv-legend"></gv-legend>'})})},dragbox:m.default,globals:c.default,log:h.default,eventBus:new N.default,utils:{getUrlParam:f.default,buildFindOptionsFromQueryStringParams:w.default,insertAgCoordinate:M.default,notification:b.default,insertGeomPraticaGenio:S.default,getS3TokenBbox:I.default,getS3Token:A.default,getGeneric:R.default},tools:W.default,gvInfoFeatures:[]}},,,,,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={DEFAULT_PROXY:"/geoservices/REST/proxy/proxy?url=",USE_SUBDOMAINS:!0,RL_MAP_CONFIG_SERVICE:"/geoservices/REST/geoportale/map/",RL_LAYER_CONFIG_SERVICE:"/geoservices/REST/config/layer/",RL_QUERY_LAYER_VALUE_LIST_SERVICE:"/geoservices/REST/config/query_layer_valuelist/",RL_QUERY_LAYER_TOPO_VALUE_LIST_SERVICE:"/geoservices/REST/config/query_layer_topo_valuelist/",RL_QUERY_LAYER_SERVICE:"/geoservices/REST/config/query_layer/",RL_QUERY_LAYER_TOPO_SERVICE:"/geoservices/REST/config/query_layer_topo/",RL_DYN_MAP_CONFIG_SERVICE:"/geoservices/REST/config/map/",RL_CREATE_SLD_SERVICE:"/geoservices/REST/config/create_sld/",RL_XSL_INFO_SERVICE:"/geoservices/REST/config/info_xsl?",RL_CATALOG_SERVICE:"/geoservices/REST/geoportale/catalogo/",RL_CANALI_SERVICE:"/geoservices/REST/config/ag_app_canali_tree/",RL_CANALE_CARTE_SERVICE:"/geoservices/REST/config/ag_canale_tree/",RL_DOWNLOAD_CONFIG_SERVICE:"/geoservices/REST/download/map/",RL_DOWNLOAD_INSERT_SERVICE:"/geoservices/REST/download/insert_richiesta/",RL_DOWNLOAD_ESEGUI_RICHIESTA:"/geoservices/REST/download/elabora_richiesta_sincrona/",RL_ENTI_SERVICE:"/geoservices/REST/geoportale/enti/",RL_METADATA_URL:"/geoservices/REST/metadata/scheda_xml/",RL_TRANSFORM_POINT_SERVICE:"/geoservices/REST/coordinate/transform_point/",RL_TRANSFORM_BBOX_SERVICE:"/geoservices/REST/coordinate/transform_bbox/",RL_TRANSFORM_POLY_SERVICE:"/geoservices/REST/coordinate/transform_poly/",RL_ELEVATION:"/geoservices/REST/coordinate/elevation/",RL_AG_APP_LISTA_MAPPE:"/geoservices/REST/config/ag_app_lista_mappe/",RL_CATALOG:"pub",HERE_GEOCODE_PROXY:"/geoservices/apps/proxy/proxy.jsp?url=http://10.20.4.120/geoservices/REST/proxy/here_geocode.v3?",MAPBOX_USERNAME:"stefanoparodi",MAPBOX_ACCESS_TOKEN:"pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g",MAX_BOUNDS:{X_MIN:43.4,Y_MIN:7.3,X_MAX:44.8,Y_MAX:10.5},INFO_WMS_MAX_FEATURES:10,BASE_SCALES:[591657550.5,295828775.3,147914387.6,73957193.82,36978596.91,18489298.45,9244649.227,4622324.614,2311162.307,1155581.153,577790.5767,288895.2884,144447.6442,72223.82209,36111.91104,18055.95552,9027.977761,4513.98888,2256.99444,1128.49722,564.24861,282.124305],BASE_LAYERS:{BLANK:{label:"Sfondo Bianco",icon:"/geoservices/apps/viewer/static/img/legend/bianco.gif",printType:"no_base"},RL_ORTOFOTO_2013:{label:"AGEA: Ortofoto 2013",icon:"/geoservices/apps/viewer/static/img/legend/sfondi_rl.jpg",printType:"rl_ortofoto_2013"},RL_ORTOFOTO_2010:{label:"AGEA: Ortofoto 2010",icon:"/geoservices/apps/viewer/static/img/legend/sfondi_rl.jpg",printType:"rl_ortofoto_2010"},RL_ORTOFOTO_2007:{label:"AGEA: Ortofoto 2007",icon:"/geoservices/apps/viewer/static/img/legend/sfondi_rl.jpg",printType:"rl_ortofoto_2007"},RL_ORTOFOTO_2000:{label:"Ortofoto IT 2000",icon:"/geoservices/apps/viewer/static/img/legend/sfondi_rl.jpg",printType:"rl_ortofoto_2000"},RL_ORTOFOTO_2016:{label:"AGEA: Ortofoto 2016",icon:"/geoservices/apps/viewer/static/img/legend/sfondi_rl.jpg",printType:"rl_ortofoto_2016"},RL_CARTE_BASE:{label:"Carte Regionali 2007 -2013",icon:"/geoservices/apps/viewer/static/img/legend/sfondi_rl.jpg",printType:"rl_carte_base"},RL_CARTE_BASE_NC25:{label:"Carta Regionale 1:25000 - DBT NC25",icon:"/geoservices/apps/viewer/static/img/legend/sfondi_rl.jpg",printType:"rl_carte_base"},RL_CARTE_BASE_GS:{label:"Carte Regionali 2007 -2013",icon:"/geoservices/apps/viewer/static/img/legend/sfondi_rl.jpg",printType:"rl_carte_base"},OSM:{label:"OpenStreetMap",icon:"/geoservices/apps/viewer/static/img/legend/openstreetmap.png",printType:"OSM"},ESRI_IMAGERY:{label:"ESRI Imagery",icon:"/geoservices/apps/viewer/static/img/legend/esri.gif",printType:"ESRI_IMAGERY"},ESRI_STREETS:{label:"ESRI Streets",icon:"/geoservices/apps/viewer/static/img/legend/esri.gif",printType:"ESRI_STREETS"},MAPBOX_STREETS:{label:"Mapbox Streets",icon:"/geoservices/apps/viewer/static/img/legend/mapbox.png",printType:"MAPBOX_STREETS"},MAPBOX_MONOCHROME:{label:"Mapbox Monochrome",icon:"/geoservices/apps/viewer/static/img/legend/mapbox.png",printType:"MAPBOX_MONOCHROME"},MAPBOX_VIABILITA:{label:"Carta della Viabilità",icon:"/geoservices/apps/viewer/static/img/legend/mapbox.png",printType:"MAPBOX_STREETS"},MAPBOX_VIABILITA_SATELLITARE:{label:"Carta satellitare della Viabilità",icon:"/geoservices/apps/viewer/static/img/legend/mapbox.png",printType:"MAPBOX_STREETS"},MAPBOX_OUTDOOR:{label:"Mapbox Outdoor",icon:"/geoservices/apps/viewer/static/img/legend/mapbox.png"},MAPBOX_LIGHT:{label:"Mapbox Light",icon:"/geoservices/apps/viewer/static/img/legend/mapbox.png"}}}},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.elId,n=e.vm,i=e.toggleEl,a=document.getElementById(t);if(i&&a)a.style.display="none"!==a.style.display&&a.style.display?"none":"block";else{var r=(0,o.default)(e);n.$mount(r)}return n};var a=n(366),o=i(a)},,function(e,t){},,,,function(e,t){},function(e,t){},,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,i="info"===t?"Info":"Attenzione!!!";e&&t&&(0,l.default)({title:i,type:t,duration:n,offset:70,dangerouslyUseHTMLString:!0,position:"bottom-left",message:e})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(81),r=(i(o),n(6)),s=(i(r),n(74)),l=i(s);t.default=a},,,,,,,,,function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){function t(t,n){var i=t.infoOptions.infoQueryUrl||b.default.DEFAULT_PROXY+t.wmsParams.url,a=t.infoOptions.infoQueryLayers||t.wmsParams.name,s=t.wmsParams.cql_filter;t.wmsParams.infoFormat&&(n=t.wmsParams.infoFormat);var l=o(i,a,e.latlng,n,t.infoBuffer,s);H++,GV.app.map._container.style.cursor="progress","application/json"===n?(0,P.default)(l).then(function(e){return r(e,t.name)}).catch(function(e){return console.error(e)}):"application/geojson"===n?(0,F.default)(l,t.wmsParams.name).then(function(e){return r(e,t.name)}).catch(function(e){return console.error(e)}):"text/plain"===n?(0,B.default)(l,t.wmsParams.name).then(function(e){return r(e,t.name)}).catch(function(e){return console.error(e)}):(0,V.default)(l,t.wmsParams.name).then(function(e){return r(e,t.name)}).catch(function(e){return console.error(e)})}GV.log("start info request: "+new Date),Z=0,H=0,$=[],GV.config.maps.forEach(function(e){var n=e.flagGeoserver?"application/json":"application/vnd.ogc.gml";e.layers.forEach(function(e){"WMS"===e.type&&e.queryable&&e.visible&&GV.app.map.layerInRange(e)&&t(e,n)})})}function o(e,t,n,i,a,o){"cesium"===event.mapType&&console.log("cesium getFeatureInfo");var r=GV.app.map.latLngToContainerPoint(n,GV.app.map.getZoom()),s=GV.app.map.getSize(),l=GV.app.map.getBounds(),u=GV.app.map.options.crs.project(l.getSouthWest()),c=GV.app.map.options.crs.project(l.getNorthEast()),d=null===a||void 0===a?10:a,f={request:"GetFeatureInfo",service:"WMS",crs:"EPSG:3857",styles:"",version:"1.3.0",bbox:u.x+","+u.y+","+c.x+","+c.y,height:s.y,width:s.x,layers:t,query_layers:t,FEATURE_COUNT:100,buffer:d,info_format:i,i:parseInt(r.x),j:parseInt(r.y)};return o&&(f.cql_filter=o),e+(0,O.default)(f,e,!0)}function r(e,t){function n(e,t){var n=GV.app.map.getLayerByName(e).config,a=i(t,n.cachePostGIS);return a}function i(e,t){var n={};for(var i in e)"bbox"!==i&&e.hasOwnProperty(i)&&(t?n[i.toUpperCase()]=e[i]:n[i]=e[i]);return n}function a(e,t){var n,i;return n=o(e,"infoLabelAttr"),i=o(e,"infoIdAttr"),n&&t[n]?t[n]:i&&t[i]?t[i]:t[r(t)]}function o(e,t){var n=GV.app.map.getLayerByName(e).config;return n&&n.infoOptions&&n.infoOptions[t]?n.infoOptions[t]:null}function r(e){for(var t in e)if(e.hasOwnProperty(t)&&"function"!=typeof t)return t;return null}if(e&&(Z++,e.forEach(function(e){e.text?(e.layer=GV.app.map.getLayerByName(e.layerName),e.infoOptions=e.layer.config.infoOptions):(e.layerName=t,e.layer=GV.app.map.getLayerByName(t),e.properties=n(t,e.properties),e.label=a(t,e.properties),e.infoOptions=e.layer.config.infoOptions)}),Array.prototype.push.apply($,e),Z===H)){if(GV.app.map._container&&(GV.app.map._container.style.cursor="default"),0===$.length)return void GV.log("Nessun elemento trovato");if(1===$.length){var l=document.getElementById("gv-info-wms-list");l&&l.parentNode.removeChild(l),s($[0])}else(0,x.default)({elId:"gv-info-wms-list",clear:!0,vm:new C.default({template:'<gv-info-wms-list :items="items"></gv-info-wms-list>',data:{items:$}})});GV.log("end info request: "+new Date)}}function s(e){var t=p(e);switch(t){case"text":d(e);break;case"generico":c(e);break;case"xsl":f(e);break;case"gv_info":l(e);break;default:u(e)}h(e)}function l(e){var t=e.id,n=e.layer.config.id;GV.gvInfoFeatures[t]=e;var i="gvi-info-"+t,a="/geoservices/apps/gvi/info/"+n+"/?feature_id="+t;e.infoOptions.infoTarget&&"panel"!==e.infoOptions.infoTarget?m(a,e.infoOptions):g(a,e.infoOptions,i)}function u(e){var t=(0,T.default)(e.infoOptions.infoUrl,e.properties);e.infoOptions.infoTarget&&"panel"!==e.infoOptions.infoTarget?m(t,e.infoOptions):g(t,e.infoOptions)}function c(e){var t=e.layer.legend.label;(0,x.default)({elId:"gv-info-generico",vm:new C.default({template:'<gv-info-generico :properties="properties" :height="height" :width="width" :title="title"></gv-info-generico>',data:{title:t,properties:e.properties,width:e.infoOptions.infoWidth||400,height:e.infoOptions.infoHeight||600}})})}function d(e){var t=e.infoOptions,n=t.infoUrl,i={text:e.text.replace(/(?:\r\n|\r|\n)/g,"<br>")};(0,U.default)(n,i).then(function(e){var n=e.infoUrl;g(n,t)})}function f(e){function t(e){try{var t='<?xml version="1.0" encoding="ISO-8859-1"?><msGMLOutput xmlns:gml="http://www.opengis.net/gml" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"></msGMLOutput>',n=(0,E.default)(t),i=/^\d/.test(e.layerName)?"L"+e.layerName.replace(/\s+/g,"_"):e.layerName.replace(/\s+/g,"_"),a=i+"_layer",o=n.createElement(a),r=i+"_feature",s=n.createElement(r),l=e.properties;for(var u in l)if(l.hasOwnProperty(u)&&"boundedBy"!==u){var c=null;c=0===l[u]||l[u]?n.createTextNode(l[u]):n.createTextNode("");var d=u.match(/^\d/)?"_"+u:u,f=n.createElement(d);f.appendChild(c),s.appendChild(f)}return o.appendChild(s),n.documentElement.appendChild(o),n}catch(e){console.error(e)}}var n=e.infoOptions,i=t(e);e.gml=(new XMLSerializer).serializeToString(i);var a=n.infoUrl,o=n.infoTarget;(0,U.default)(a,e).then(function(e){var t=e.infoUrl;o&&"panel"!==o?m(t,n):g(t,n)})}function p(e){var t=e.infoOptions.infoUrl;return e.text?"text":"gv_info"===t?"gv_info":"generico.xsl"===t.substr(t.length-12)?"generico":".xsl"===t.substr(t.length-4)?"xsl":void 0}function h(e){e.layer.config.flagGeoserver&&"VECTOR"===e.layer.config.geomType&&!function(){var t=[e.layerName],n=e.layer.config,i=n.infoOptions.infoIdAttr;i&&n.cachePostGIS&&(i=i.toLowerCase());var a=i+"='"+e.properties[n.infoOptions.infoIdAttr]+"'";e.layer.config.wmsParams.cql_filter&&(a+=" AND "+e.layer.config.wmsParams.cql_filter),(0,D.default)(n.wfsParams,a,null).then(function(e){var i=GV.app.map.getLayerByName("InfoWmsHilite"),a=i&&e?e[0]:null;if(a&&a.geometry)if("cesium"===GV.app.map.type)"MultiPolygon"!==a.geometry.type&&"Polygon"!==a.geometry.type||(i.load(a,{stroke:new Cesium.Color(1,.55,0,0),fill:new Cesium.Color(1,.55,0,.2),clampToGround:!0}),GV.app.map.viewer.zoomTo(i,new Cesium.HeadingPitchRange(null,-90,null))),"MultiLineString"!==a.geometry.type&&"LineString"!==a.geometry.type||(i.load(a,{stroke:new Cesium.Color(1,.55,0,0)}),GV.app.map.viewer.zoomTo(i,new Cesium.HeadingPitchRange(null,-90,null))),"MultiPoint"!==a.geometry.type&&"Point"!==a.geometry.type||(i.entities.add({position:Cesium.Cartesian3.fromDegrees(a.geometry.coordinates[0],a.geometry.coordinates[1]),point:{pixelSize:20,color:new Cesium.Color(1,.55,0,.6)},label:null}),GV.app.map.viewer.zoomTo(i,new Cesium.HeadingPitchRange(0,-90,3e3)));else{i.clearLayers(),i.addData(a.geometry);var o=n.maxZoom<17?n.maxZoom:17;GV.app.map.flyToBounds(i.getBounds(),{maxZoom:o}),GV.app.map._container.style.cursor="default",GV.config.hilitedLayer.push(t)}}).catch(function(e){console.error(e)})}()}function g(e,t,n){var i=n||"gv-info-wms-html";(0,x.default)({elId:i,vm:new C.default({template:'<gv-info-wms-html :src="src" :height="height" :width="width" :title="title" :id="id"></gv-info-wms-html>',data:{title:"Risultato Info",src:e,width:t.infoWidth||400,height:t.infoHeight||400,id:i}})})}function m(e,t){var n=t.infoWidth||400,i=t.infoHeight||500,a=t.infoTarget,o=window.open(e,a,"status=yes, toolbar=yes, menubar=no, width="+n+", height="+i+", resizable=yes, scrollbars=yes");return o?o:void(0,q.default)("Popup bloccata sul browser<br>Per visualizzare info è necessario abilitare popup","info")}function v(e){"cesium"===e.options.type?e.viewer.dataSources.add(new Cesium.GeoJsonDataSource("InfoWmsHilite")):e.loadLayers([{name:"InfoWmsHilite",type:"JSON",style:{color:"#ffcc00",fillOpacity:0,weight:6,opacity:.6},pointToLayer:function(e,t){return L.circleMarker(t,{radius:8,color:"#ffcc00",fillColor:"#ffcc00",fill:!0,fillOpacity:.6,weight:6,opacity:.6})},visible:!0}])}function _(e){$=[],Cesium.defined(e.featuresPromise)&&Cesium.when(e.featuresPromise,function(e){if(Z=0,H=1,e.length>0){var t=e.map(function(e){return e.data});r(t)}})}Object.defineProperty(t,"__esModule",{value:!0});var y=n(5),b=i(y),w=n(1),C=i(w),M=n(7),x=i(M),S=n(87),E=i(S),I=n(371),T=i(I),A=n(115),O=i(A),G=n(105),P=i(G),R=n(337),V=i(R),k=n(335),F=i(k),z=n(336),B=i(z),N=n(36),D=i(N),j=n(338),U=i(j),W=n(21),q=i(W),Z=0,H=0,$=[];t.default={id:"info-wms-manager",active:!1,firstActivation:!0,addHiliteLayer:v,buildWMSOptions:o,features:$,activate:function(){var e=this;GV.log("GV.app.infoWmsManager.activate"),this.active=!0,GV.app.map?v(GV.app.map):GV.eventBus.$on("gv-map-mounted",function(e){v(e)}),GV.app.map.on("click",function(t){e.active&&("cesium"===t.mapType?_(t):a(t))}),GV.app.infoWmsManager=this,GV.config.activeControl=this},deactivate:function(){GV.log("GV.app.infoWmsManager.deactivate"),GV.app.map.off("click"),this.active=!1},showFeatureInfo:s}},,,,function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){if(!n&&!e&&!e.url)return void console.warning("getWFSFeature: URL non impostata");var i=""+GV.globals.DEFAULT_PROXY+n;if(e){var a="service=WFS&version=2.0.0&request=GetFeature&srsName=EPSG%3A4326&outputFormat=application%2Fjson";i=""+GV.globals.DEFAULT_PROXY+e.url+a+"&typeName="+e.typeName+"&cql_filter="+t}var o=l.default.service({text:"Attendere...",background:"rgba(0, 0, 0, 0.8)"});return c.default.get(i).then(function(e){return o.close(),e.data.features})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(42),r=(i(o),n(6)),s=(i(r),n(41)),l=i(s);t.default=a;var u=n(4),c=i(u),d=n(5);i(d)},,function(e,t){},,,,function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t={};return r.default.get(e,{params:t})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(4),r=i(o)},,,,,,,,,,,,,function(e,t){},function(e,t){},,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={methods:{switchActiveButton:function(){this.active=!this.active,this.active?(GV.config.activeControl&&GV.config.activeControl.deactivate(),GV.config.activeControl=this.control,GV.config.activeButton&&this.name!==GV.config.activeButton.name&&(GV.config.activeButton.active=!1),GV.config.activeButton=this,GV.config.activeButton.active=!0,this.control.activate()):this.control.deactivate()}},mounted:function(){this.options&&this.options.active&&this.switchActiveButton()}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,i){var a=""+l.default.RL_TRANSFORM_POINT_SERVICE+e+"/"+t+"/"+n+","+i;return r.default.get(a,{})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(4),r=i(o),s=n(5),l=i(s)},,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){try{var t=null;if((0,r.default)()){var n=new ActiveXObject("Microsoft.XMLDOM");n.async="false",n.loadXML(e),t=n}else{var i=new DOMParser;t=i.parseFromString(e,"text/xml")}return t}catch(e){console.error(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(158),r=i(o)},,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(7),s=i(r),l=n(1),u=i(l);u.default.component("gv-coordinate-panel",function(){return new o.default(function(e){n.e(26,function(t){e(n(626))})})});var c={id:"coordinate",active:!1,latlng:null,activate:function(){GV.log("GV.controls.coordinate.activate"),this.active=!0,this.openPanel(),GV.eventBus.$emit("gv-control-coordinate-activate",this)},deactivate:function(){GV.log("GV.controls.coordinate.deactivate"),GV.eventBus.$emit("gv-control-coordinate-deactivate",this),this.active=!1,this.closePanel()},openPanel:function(){(0,s.default)({elId:"gv-coordinate-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new u.default({template:"<gv-coordinate-panel></gv-coordinate-panel>"})})},closePanel:function(){document.getElementById("gv-coordinate-panel").style.display="none"}};t.default=c},,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t={};return r.default.get(e,{params:t}).then(function(e){return e.data.features})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(4),r=i(o)},,,,,,,,,function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}var a,o,r,s=n(45);i(s);!function(n,i){o=[],a=i,r="function"==typeof a?a.apply(t,o):a,!(void 0!==r&&(e.exports=r))}(void 0,function(){return function(e){"use strict";function t(){void 0===e.escapeMode&&(e.escapeMode=!0),e.attributePrefix=e.attributePrefix||"_",e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0),e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0),void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0),e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!1),e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],void 0===e.keepCData&&(e.keepCData=!1)}function n(){}function i(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function a(e){return e.prefix}function o(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function r(e,t,n,i){for(var a=0;a<e.length;a++){var o=e[a];if("string"==typeof o){if(o==i)break}else if(o instanceof RegExp){if(o.test(i))break}else if("function"==typeof o&&o(t,n,i))break}return a!=e.length}function s(t,n,i){switch(e.arrayAccessForm){case"property":t[n]instanceof Array?t[n+"_asArray"]=t[n]:t[n+"_asArray"]=[t[n]]}!(t[n]instanceof Array)&&e.arrayAccessFormPaths.length>0&&r(e.arrayAccessFormPaths,t,n,i)&&(t[n]=[t[n]])}function l(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),i=t[5].split(".");if(n.setHours(t[3],t[4],i[0]),i.length>1&&n.setMilliseconds(i[1]),t[6]&&t[7]){var a=60*t[6]+Number(t[7]),o=/\d\d-\d\d:\d\d$/.test(e)?"-":"+";a=0+("-"==o?-1*a:a),n.setMinutes(n.getMinutes()-a-n.getTimezoneOffset())}else e.indexOf("Z",e.length-1)!==-1&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function u(t,n,i){if(e.datetimeAccessFormPaths.length>0){var a=i.split(".#")[0];return r(e.datetimeAccessFormPaths,t,n,a)?l(t):t}return t}function c(t,n,i,a){return!(n==x.ELEMENT_NODE&&e.xmlElementsFilter.length>0)||r(e.xmlElementsFilter,t,i,a)}function d(t,n){if(t.nodeType==x.DOCUMENT_NODE){for(var o=new Object,r=t.childNodes,l=0;l<r.length;l++){var f=r.item(l);if(f.nodeType==x.ELEMENT_NODE){var p=i(f);o[p]=d(f,p)}}return o}if(t.nodeType==x.ELEMENT_NODE){var o=new Object;o.__cnt=0;for(var r=t.childNodes,l=0;l<r.length;l++){var f=r.item(l),p=i(f);if(f.nodeType!=x.COMMENT_NODE){var h=n+"."+p;c(o,f.nodeType,p,h)&&(o.__cnt++,null==o[p]?(o[p]=d(f,h),s(o,p,h)):(null!=o[p]&&(o[p]instanceof Array||(o[p]=[o[p]],s(o,p,h))),o[p][o[p].length]=d(f,h)))}}for(var g=0;g<t.attributes.length;g++){var m=t.attributes.item(g);o.__cnt++,o[e.attributePrefix+m.name]=m.value}var v=a(t);return null!=v&&""!=v&&(o.__cnt++,o.__prefix=v),null!=o["#text"]&&(o.__text=o["#text"],o.__text instanceof Array&&(o.__text=o.__text.join("\n")),e.stripWhitespaces&&(o.__text=o.__text.trim()),delete o["#text"],"property"==e.arrayAccessForm&&delete o["#text_asArray"],o.__text=u(o.__text,p,n+"."+p)),null!=o["#cdata-section"]&&(o.__cdata=o["#cdata-section"],delete o["#cdata-section"],"property"==e.arrayAccessForm&&delete o["#cdata-section_asArray"]),0==o.__cnt&&"text"==e.emptyNodeForm?o="":1==o.__cnt&&null!=o.__text?o=o.__text:1!=o.__cnt||null==o.__cdata||e.keepCData?o.__cnt>1&&null!=o.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==o.__text||""==o.__text.trim())&&delete o.__text:o=o.__cdata,delete o.__cnt,!e.enableToStringFunc||null==o.__text&&null==o.__cdata||(o.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),o}if(t.nodeType==x.TEXT_NODE||t.nodeType==x.CDATA_SECTION_NODE)return t.nodeValue}function f(t,n,i,a){var r="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+n;if(null!=i)for(var s=0;s<i.length;s++){var l=i[s],u=t[l];e.escapeMode&&(u=o(u)),r+=" "+l.substr(e.attributePrefix.length)+"=",r+=e.useDoubleQuotes?'"'+u+'"':"'"+u+"'"}return r+=a?"/>":">"}function p(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function h(e,t){return e.indexOf(t,e.length-t.length)!==-1}function g(t,n){return!!("property"==e.arrayAccessForm&&h(n.toString(),"_asArray")||0==n.toString().indexOf(e.attributePrefix)||0==n.toString().indexOf("__")||t[n]instanceof Function)}function m(e){var t=0;if(e instanceof Object)for(var n in e)g(e,n)||t++;return t}function v(t,n,i){return 0==e.jsonPropertiesFilter.length||""==i||r(e.jsonPropertiesFilter,t,n,i)}function _(t){var n=[];if(t instanceof Object)for(var i in t)i.toString().indexOf("__")==-1&&0==i.toString().indexOf(e.attributePrefix)&&n.push(i);return n}function y(t){var n="";return null!=t.__cdata&&(n+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(n+=e.escapeMode?o(t.__text):t.__text),n}function b(t){var n="";return t instanceof Object?n+=y(t):null!=t&&(n+=e.escapeMode?o(t):t),n}function L(e,t){return""===e?t:e+"."+t}function w(e,t,n,i){var a="";if(0==e.length)a+=f(e,t,n,!0);else for(var o=0;o<e.length;o++)a+=f(e[o],t,_(e[o]),!1),a+=C(e[o],L(i,t)),a+=p(e[o],t);return a}function C(e,t){var n="",i=m(e);if(i>0)for(var a in e)if(!g(e,a)&&(""==t||v(e,a,L(t,a)))){var o=e[a],r=_(o);if(null==o||void 0==o)n+=f(o,a,r,!0);else if(o instanceof Object)if(o instanceof Array)n+=w(o,a,r,t);else if(o instanceof Date)n+=f(o,a,r,!1),n+=o.toISOString(),n+=p(o,a);else{var s=m(o);s>0||null!=o.__text||null!=o.__cdata?(n+=f(o,a,r,!1),n+=C(o,L(t,a)),n+=p(o,a)):n+=f(o,a,r,!0)}else n+=f(o,a,r,!1),n+=b(o),n+=p(o,a)}return n+=b(e)}var M="1.2.0";e=e||{},t(),n();var x={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(e){var t=window.ActiveXObject||"ActiveXObject"in window;if(void 0===e)return null;var n;if(window.DOMParser){var i=new window.DOMParser,a=null;if(!t)try{a=i.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(e){a=null}try{n=i.parseFromString(e,"text/xml"),null!=a&&n.getElementsByTagNameNS(a,"parsererror").length>0&&(n=null)}catch(e){n=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(e);return n},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?l(e):e},this.xml2json=function(e){return d(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return C(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return M}}})},function(e,t){"use strict";function n(e,t,n){var i=[];for(var a in e)i.push(encodeURIComponent(n?a.toUpperCase():a)+"="+encodeURIComponent(e[a]));return(t&&t.indexOf("?")!==-1?"&":"?")+i.join("&")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var i,a;n(565),i=n(285);var o=n(754);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-ad3b01fe",e.exports=i},,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=l.default.RL_CATALOG_SERVICE;return e.idMap&&(t+=e.idMap),e.cat=GV.globals.RL_CATALOG,r.default.get(t,{params:e}).then(function(e){return e.data.data})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(4),r=i(o),s=n(5),l=i(s)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(!e||"null"===e)throw new Error("Parametro idMap mancante");var t=e.startsWith("D")?""+l.default.RL_DYN_MAP_CONFIG_SERVICE+e:""+l.default.RL_MAP_CONFIG_SERVICE+e,n={};return GV.config.application.name?n.app=GV.config.application.name:n.app="gv2",GV.config.geoserverUrl&&(n.geoserverUrl=GV.config.geoserverUrl),GV.config.flagGeoserver&&(n.geoserver="true"),r.default.get(t,{params:n})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(4),r=i(o),s=n(5),l=i(s)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var i=""+l.default.RL_TRANSFORM_BBOX_SERVICE+e+"/"+t+"/"+n;return r.default.get(i,{})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(4),r=i(o),s=n(5),l=i(s)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=s.default.RL_DOWNLOAD_CONFIG_SERVICE+e;return o.default.get(t).then(function(e){return e.data.data})};var a=n(4),o=i(a),r=n(5),s=i(r)},,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return(new l).xml_str2json(e)}function o(e){var t=GV.globals.DEFAULT_PROXY+e;return s.default.get(t).then(function(e){var t=e.data,n=a(t);return n})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=n(4),s=i(r),l=n(114)},function(e,t){"use strict";function n(e){var t=new RegExp("[\\?&]"+e+"=([^&#]*)","i").exec(window.location.href);return t&&"null"===t[1]&&(t=null),t?decodeURIComponent(t[1]):null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=r.default.BASE_SCALES.findIndex(function(t){return e>t});return t<0?20:t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(5),r=i(o)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=/\{ *([\w_\-]+) *\}/g;return e.replace(n,function(e,n){var i=t[n];if(void 0===i)throw new Error("No value provided for variable "+e);return"function"==typeof i&&(i=i(t)),i})}},function(e,t){"use strict";function n(){return navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.indexOf("Trident")>0||navigator.userAgent.indexOf("Edge")>0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},,,,,function(e,t,n){var i,a;n(574),i=n(264);var o=n(762);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(372),o=i(a),r=n(61),s=i(r),l=n(10),u=i(l),c=n(369),d=(i(c),n(368)),f=(i(d),n(7)),p=i(f),h=n(1),g=i(h),m=n(653),v=i(m),_=n(624),y=i(_),b=n(651),L=i(b),w=n(640),C=i(w),M=n(140),x=i(M);g.default.component("gv-map",v.default),g.default.component("gv-cesium",y.default),g.default.component("gv-legend",L.default),g.default.component("gv-header",C.default),g.default.component("gv-title",x.default),g.default.component("gv-iframe-panel",function(){return new u.default(function(e){n.e(25,function(t){e(n(641))})})}),g.default.component("gv-info-wms-list",function(){return new u.default(function(e){n.e(22,function(t){e(n(645))})})}),g.default.component("gv-info-wms-html",function(){return new u.default(function(e){n.e(23,function(t){e(n(644))})})}),g.default.component("gv-info-generico",function(){return new u.default(function(e){n.e(24,function(t){e(n(643))})})}),t.default={name:"gv-app",data:function(){var e=GV.config.application.mapOptions&&GV.config.application.mapOptions.type||"leaflet";return{leafletMap:"leaflet"===e,cesiumMap:"cesium"===e,showHeader:GV.config.application.layout.header,
showLegend:GV.config.application.layout.legend,showToolbar:GV.config.application.layout.toolbar}},created:function(){GV.log("gv-app: created"),GV.app=this},mounted:function(){GV.log("gv-app: mounted"),this.addTools(GV.config.application.layout.tools),GV.eventBus.$emit("gv-app-mounted",this)},methods:{addTools:function(){var e=this;if(GV.config.application.layout.tools){var t=GV.config.application.layout.tools;t.forEach(function(t){var n=t.position||"topleft";t.options=t.options||{},e.addTool(t,n)})}},addTool:function(e,t){var n=!1;GV.tools.forEach(function(i){if(e.name===i.name){n=!0;var a=e.name;GV.log("gv-app: addTool -> "+a),e.active&&(e.options.active=!0);var r=e.options.props?e.options.props.map(function(e){return(0,s.default)(e)[0]+"="+(0,o.default)(e)[0]}).join(" "):"",l="gv-tool-"+t;(0,p.default)({containerId:l,elId:a,vm:new g.default({template:"<"+a+" "+r+"></"+a+">"}),toggleEl:!1})}}),n||console.error("Strumento "+e.name+" non trovato")}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(13),s=(i(r),n(11)),l=i(s),u=n(14),c=(i(u),n(6)),d=(i(c),n(12)),f=i(d),p=n(1),h=i(p),g=n(7),m=i(g),v=n(326),_=i(v),y=n(31),b=i(y),L=n(105),w=i(L);h.default.use(f.default),h.default.use(l.default),h.default.component("gv-atlante-geochimico-scheda-panel",function(){return new o.default(function(e){n.e(27,function(t){e(n(620))})})}),t.default={data:function(){return{livelli:[],livello:null,downloadConfig:null,metaData:null,layerConfig:null,show:!0,showLegend:!1,legendUrl:null,baseMapConfigId:2037}},methods:{toggleCollapseClass:function(){return this.show?"gv-panel-collapse gv-color-scheme el-icon-arrow-up":"gv-panel-collapse gv-color-scheme el-icon-arrow-down"},hidePanel:function(){this.show?document.getElementById("ag-wrapper").style.display="none":document.getElementById("ag-wrapper").style.display="block",this.show=!this.show},onChange:function(e){var t=this.livelli.filter(function(t){return t.id==e});this.layerConfig=t[0],this.loadLayer(t[0]),this.legendUrl="/geoservices/REST/atlante_geochimico/legenda/?id="+this.layerConfig.id,this.showLegend=!0,this.cleanUpDownload()},cleanUpDownload:function(){var e=document.getElementById("gv-map-download");e&&e.parentNode.removeChild(e);var t=GV.app.map.getLayerByName("SelezioneMacrobacino");t&&GV.app.map.removeLayer(t),GV.config.activeControl&&GV.config.activeControl.activate()},loadLayer:function(e){e.visible=!0,e.legend.popUpFlag=!1,e.multiClasse=!1;var t=e.idMap;GV.config.removeMap(t),GV.config.removeMap(this.baseMapConfigId),GV.config.addMapConfig({id:t,name:"Atlante Geochimico",flagGeoserver:!0,flagDownload:!0,downloadConfig:this.downloadConfig,metaData:this.metaData,layers:[e]}),GV.config.addRlMap(this.baseMapConfigId.toString(),!0,!1)},subscribeMapEvent:function(e){var t=this;GV.app.map.on("click",function(e){var n=t.getWmsUrl(e);t.layerConfig&&t.layerConfig.visible&&(0,w.default)(n).then(function(e){t.showInfo(e)})})},showInfo:function(e){var t={pcdf:e[0].properties.GRAY_INDEX,pest:e[1].properties.GRAY_INDEX,plower:e[2].properties.GRAY_INDEX,pupper:e[3].properties.GRAY_INDEX,Q1:e[4].properties.GRAY_INDEX,Q2:e[5].properties.GRAY_INDEX,Q3:e[6].properties.GRAY_INDEX,QCD:e[7].properties.GRAY_INDEX,cifre:this.layerConfig.infoOptions.cifreSignificative,unitaMisura:this.layerConfig.infoOptions.unitaMisura,titolo:this.layerConfig.title};(0,m.default)({elId:"gv-atlante-geochimico-scheda-panel",clear:!0,vm:new h.default({template:'<gv-atlante-geochimico-scheda-panel :pcdf="pcdf" :pest="pest" :plower="plower" :pupper="pupper" :Q1="Q1" :Q2="Q2" :Q3="Q3" :QCD="QCD" :cifre="cifre" :unitaMisura="unitaMisura" :titolo="titolo"></gv-atlante-geochimico-scheda-panel>',data:t})})},getWmsUrl:function(e){if(this.layerConfig){var t=GV.globals.DEFAULT_PROXY+this.layerConfig.infoOptions.infoQueryUrl,n="application/json",i=0,a=b.default.buildWMSOptions(t,this.layerConfig.infoOptions.infoQueryLayers,e.latlng,n,i);return a}}},mounted:function(){var e=this;(0,_.default)().then(function(t){e.livelli=t.layers.sort(function(e,t){return e.title.localeCompare(t.title)}),e.livelli.forEach(function(e){e.title=e.title.replace("2","₂").replace("3","₃").replace("5","₅")}),e.downloadConfig=t.downloadConfig,e.metaData=t.metaData}),GV.config.addRlMap(this.baseMapConfigId.toString(),!0,!1),this.subscribeMapEvent(event)}}},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(13),o=(i(a),n(11)),r=i(o),s=n(14),l=(i(s),n(6)),u=(i(l),n(12)),c=i(u),d=n(1),f=i(d);f.default.use(c.default),f.default.use(r.default),t.default={name:"gv-base-layer-switcher",data:function(){return{baseLayers:GV.config.baseLayers,activeBaseLayer:GV.config.activeBaseLayer}},methods:{onChange:function(e){GV.eventBus.$emit("change-base-layer",{layer:e})}},mounted:function(){GV.baseLayerSwitcher=this}}},,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=(i(a),n(307)),r=i(o),s=n(31),l=i(s),u=n(101),c=i(u);t.default={name:"gv-cesium",data:function(){var e=document.documentElement.clientHeight;return{style:"height:"+e+"px",map:null}},mounted:function(){if(GV.app.map=r.default.initialize(GV.config.application.mapOptions),this.map=GV.app.map,this.registerMapEvents(),this.subscribeConfigEvents(),window.addEventListener("resize",this.handleResize),this.handleResize(),GV.config.application.mapOptions&&GV.config.application.mapOptions.click)switch(GV.config.application.mapOptions.click){case"info":l.default.activate();break;case"coordinate":c.default.activate()}GV.log("gv-map: mounted"),GV.eventBus.$emit("gv-map-mounted",this.map)},methods:{handleResize:function(e){var t=document.documentElement.clientHeight-document.getElementById("gv-cesium").getBoundingClientRect().top;this.style="height:"+t+"px"},registerMapEvents:function(){},subscribeConfigEvents:function(){GV.eventBus.$on("config-add-map",function(e){var t=e.config;GV.app.map.loadLayers(t.layers),t.extent_3857&&GV.app.map.setExtent(t.extent_3857)}),GV.eventBus.$on("config-remove-map",function(e){var t=e.config;t.layers.forEach(function(e){var t=GV.app.map.getLayerByName(e.name);t&&GV.app.map.removeLayer(t)})})}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(585),o=(i(a),n(6)),r=(i(o),n(471)),s=i(r),l=n(1),u=i(l);u.default.use(s.default),t.default={name:"gv-conferma-dettaglio",props:["link","label","idMap"],data:function(){return{dialogVisible:!0}},methods:{cancel:function(){this.dialogVisible=!1},submit:function(){GV.config.addRlMap(this.idMap,!1,!0),this.dialogVisible=!1}}}},,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(1),s=i(r),l=n(7),u=i(l),c=n(642),d=i(c);s.default.component("image-viewer",d.default),s.default.component("gv-fototeca-carrello-panel",function(){return new o.default(function(e){n.e(2,function(t){e(n(184))})})}),t.default={name:"gv-fototeca-immagine",props:["volo","foto"],data:function(){var e="https://geoservizi.regione.liguria.it/dtuff/Img/voli/",t=""+e+this.volo+"/"+this.foto+".jpg";return{title:"Fotogramma: "+this.foto,imgUrl:t,logo:"/geoservices/apps/imageviewer2/fototeca/logo.gif"}},methods:{addToBasket:function(){var e=this,t=GV.globals.FOTOTECA_CARRELLO.filter(function(e){return e.id===GV.globals.FOTOTECA_SEL_VOLO.id});if(0===t.length)GV.globals.FOTOTECA_CARRELLO.push({id:GV.globals.FOTOTECA_SEL_VOLO.id,label:GV.globals.FOTOTECA_SEL_VOLO.nome,dir:GV.globals.FOTOTECA_SEL_VOLO.volo.toLowerCase(),children:[{label:this.foto,file:this.foto+".jpg"}]});else{var n=t[0],i=!1;n.children.forEach(function(t){t.label===e.foto&&(i=!0)}),i||n.children.push({label:this.foto,file:this.foto+".jpg"})}this.showCart()},showCart:function(){(0,u.default)({elId:"gv-fototeca-carrello-panel",containerId:GV.config.containerId,toggleEl:!1,vm:new s.default({template:"<gv-fototeca-carrello-panel></gv-fototeca-carrello-panel>"})})}},mounted:function(){}}},,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(13),s=(i(r),n(11)),l=i(s),u=n(14),c=(i(u),n(6)),d=(i(c),n(12)),f=i(d),p=n(1),h=i(p),g=n(339),m=i(g),v=n(149),_=i(v),y=n(7),b=i(y),w=n(631),C=i(w);h.default.use(f.default),h.default.use(l.default),h.default.component("gv-fototeca-immagine",C.default),h.default.component("gv-fototeca-scheda-volo-panel",function(){return new o.default(function(e){n.e(3,function(t){e(n(185))})})}),t.default={data:function(){return{voli:[],volo:[],loading:!1,marker:null,bbox:null,baseWfsUrl:GV.globals.DEFAULT_PROXY+"https://geoservizi.regione.liguria.it/geoserver/wfs?service=WFS&version=2.0.0&request=GetFeature&srsName=EPSG%3A4326&outputFormat=application%2Fjson&",strisciata:null,foto:null}},methods:{onChange:function(e){GV.globals.FOTOTECA_SEL_VOLO=this.voli.filter(function(t){return t.id===e})[0];var t="M"+GV.globals.FOTOTECA_SEL_VOLO.id,n="L"+GV.globals.FOTOTECA_SEL_VOLO.codLivStrisciata,i="presenza_fotogrammi='SI'",a=this.baseWfsUrl+"typeName="+t+":"+n+"&cql_filter="+i;this.loadLayerStrisciata(a),this.showSchedaVolo()},showSchedaVolo:function(){(0,b.default)({elId:"gv-fototeca-scheda-volo-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new h.default({template:"<gv-fototeca-scheda-volo-panel></gv-fototeca-scheda-volo-panel>"})})},hiliteStrisciata:function(e){var t=GV.app.map.getLayerByName("strisciate");t.eachLayer(function(e){e.setStyle({color:"#ff0000"})}),e.setStyle({color:"#ffff00"})},loadLayerStrisciata:function(e){var t=this,n={type:"JSON",dataType:"json",name:"strisciate",visible:!0,geomSubType:"POLYGON",url:e,idMap:"fototeca",style:{color:"#ff0000",fillOpacity:0,weight:2,opacity:1},zoomToLayerExtent:!0,onEachFeature:function(e,n){n.on("click",function(e){t.strisciata=e.target.feature.properties.id_strisciata,t.hiliteStrisciata(n),t.loadLayerFoto()}),n.on("mouseover",function(e){t.strisciata!==e.target.feature.properties.id_strisciata&&n.setStyle({color:"#ff9900"})}),n.on("mouseout",function(e){t.strisciata!==e.target.feature.properties.id_strisciata&&n.setStyle({color:"#ff0000"})})}},i=n.idMap;GV.config.removeMap(i),GV.config.addMapConfig({id:i,name:"Fototeca",flagGeoserver:!0,layers:[n]})},hiliteFoto:function(e){var t=GV.app.map.getLayerByName("foto");t.eachLayer(function(e){e.setStyle({color:"#ff0000"})}),e.setStyle({color:"#ffff00"})},loadLayerFoto:function(){var e=this;GV.config.removeLayer("foto");var t="M"+GV.globals.FOTOTECA_SEL_VOLO.id,n="L"+GV.globals.FOTOTECA_SEL_VOLO.codLivFoto,i="id_strisciata='"+this.strisciata+"'",a=this.baseWfsUrl+"typeName="+t+":"+n+"&cql_filter="+i,o={type:"JSON",name:"foto",visible:!0,geomSubType:"POINT",url:a,idMap:"fototeca",pointToLayer:function(e,t){var n={color:"#ff0000",fillColor:"#ff0000",fill:!0,weight:3,radius:2};return L.circleMarker(t,n)},zoomToLayerExtent:!0,onEachFeature:function(t,n){n.on("click",function(t){e.foto=t.target.feature.properties.foto,e.hiliteFoto(n),GV.app.map.setView([n._latlng.lat,n._latlng.lng],15),"obliterato"===t.target.feature.properties.immagine?GV.utils.notification("Fotogramma consultabile presso lo Sportello Cartografico <br>Codice Fotogramma: <b>"+e.foto+"</b>","info"):e.showFoto()}),n.on("mouseover",function(t){e.foto!==t.target.feature.properties.foto&&n.setStyle({color:"#ff9900"})}),n.on("mouseout",function(t){e.foto!==t.target.feature.properties.foto&&n.setStyle({color:"#ff0000"})})}};o.idMap;GV.config.addLayerToMap(o,"fototeca")},showFoto:function(){(0,b.default)({elId:"gv-fototeca-immagine",clear:!0,vm:new h.default({template:'<gv-fototeca-immagine :volo="volo" :foto="foto" ></gv-fototeca-immagine>',data:{volo:GV.globals.FOTOTECA_SEL_VOLO.volo.toLowerCase(),foto:this.foto}})})}},mounted:function(){var e=this;(0,m.default)(this.bbox).then(function(t){e.voli=t}),GV.eventBus.$on("gv-fototeca-reload-voli",function(t){var n=t.bbox,i=t.bboxSRS,a="3003";n?(0,_.default)(i,a,n).then(function(t){t.data.data&&(console.log(t.data.data),e.bbox=t.data.data[0][0]+","+t.data.data[1][0],(0,m.default)(e.bbox).then(function(t){e.voli=t}))}):(e.bbox=n,(0,m.default)(e.bbox).then(function(t){e.voli=t}))})}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(179),o=(i(a),n(52)),r=i(o),s=n(81),l=(i(s),n(74)),u=i(l),c=n(9),d=(i(c),n(8)),f=i(d),p=n(13),h=(i(p),n(11)),g=i(h),m=n(14),v=(i(m),n(6)),_=(i(v),n(12)),y=i(_),b=n(1),w=i(b),C=n(341),M=i(C),x=n(342),S=i(x);w.default.use(y.default,g.default,f.default,u.default),w.default.use(r.default),t.default={data:function(){return{name:"gv-gas",title:"FILTRI",aree:null,area:null,province:[{codice:null,descrizione:"TUTTE LE PROVINCE"},{codice:"010",descrizione:"GENOVA"},{codice:"008",descrizione:"IMPERIA"},{codice:"011",descrizione:"LA SPEZIA"},{codice:"009",descrizione:"SAVONA"}],provincia:null,moduli:[],modulo:null,listaAsl:[],asl:0,soloPostiDisponibili:!1,features:null,options:GV.config.getToolOptions("gv-gas")}},methods:{onChangeArea:function(e){this.moduli=this.aree.filter(function(t){return t.codice===e})[0].moduli},onChangeProvincia:function(e){this.asl=0},onChangeASL:function(e){this.provincia=null},elenco:function(){window.open("http://www.alisa.liguria.it/index.php?option=com_docman&view=docman&Itemid=382")},submit:function(){this.area?this.showFeatures():(0,u.default)({title:"Attenzione",type:"info",duration:5e3,offset:70,dangerouslyUseHTMLString:!0,position:"bottom-left",message:'Il parametro "Area" � obbligatorio'})},showFeatures:function(){var e=this,t=this.features.filter(function(t){var n=!e.area||t.properties.idarea===e.area.toString(),i=!e.provincia||t.properties.codProvincia===e.provincia,a=!e.soloPostiDisponibili||"S"===t.properties.disponibilita,o=!e.asl||t.properties.ASL==e.asl,r=!1;if(e.modulo){if(t.properties.idModuli){var s=t.properties.idModuli.split(",");s.forEach(function(t){t==e.modulo&&(r=!0)})}}else r=!0;return n&&i&&a&&r&&o});this.loadLayer(t)},loadLayer:function(e){var t=GV.app.map.getLayerByName("Strutture");if(t&&GV.app.map.removeLayer(t),0===e.length)return void(0,u.default)({title:"Attenzione",type:"info",duration:5e3,offset:70,dangerouslyUseHTMLString:!0,position:"bottom-left",message:"Nessuna struttura soddisfa i parametri<br>di ricerca"});var n=function(e){var t=e.feature.properties,n="";t.cVia&&(n+=" "+t.cVia),t.via&&(n+=" "+t.via),t.nCivico&&(n+=" "+t.nCivico),n+=", ",t.cap&&(n+=t.cap+" "),t.desComune&&(n+=t.desComune+" "),t.telefono&&(n+="<br/>Tel: "+t.telefono+" ");var i=GV.globals.GAS_SCHEDA+"gasweb/gestione/scheda?ID="+t.idul,a="\n              <p><b>"+t.denominazione+"</b></p> \n              <p>"+n+"<br/><br/>\n              Moduli: "+t.moduli+'<br/>\n              <a href="'+i+'" target="_blank">Scheda dettaglio</a>\n        ';return a};GV.app.map.loadLayers([{name:"Strutture",type:"JSON",geomSubType:"POINT",classes:[{name:"CLASSE_BASE",style:{iconUrl:"/geoservices/apps/viewer/static/img/gas/strutture.png",iconSize:[22,27],iconAnchor:[11,27],popupAnchor:[0,-27]}}],visible:!0,data:e,customPopup:n,cluster:{options:{iconCreateFunction:function(e){return L.divIcon({html:e.getChildCount(),className:"cluster",iconSize:L.point(28,28)})},showCoverageOnHover:!1,maxClusterRadius:80}}}]),GV.app.map.fitBounds(GV.app.map.getLayerByName("Strutture").getBounds()),GV.app.map.getZoom()>18&&GV.app.map.setZoom(18)}},mounted:function(){(0,u.default)({title:"Attenzione",type:"info",duration:1e4,offset:70,dangerouslyUseHTMLString:!0,position:"bottom-left",message:'Sulla mappa potrebbero non comparire <br>tutte le strutture.<br>Per ottenere un elenco di tutte le <br>strutture selezionare il bottone <br><b>"Elenco Strutture"</b>'})},created:function(){var e=this,t="/geoservices/REST/gas/combo?ENV="+this.options.env;(0,M.default)(t).then(function(t){e.aree=t.aree.sort(function(e,t){return e.descrizione>t.descrizione?1:t.descrizione>e.descrizione?-1:0}),e.aree.forEach(function(e){e.moduli.unshift({codiceArea:0,codice:0,descrizione:"TUTTI"})}),e.listaAsl=t.asl,e.listaAsl=e.listaAsl.sort(function(e,t){return e.descrizione<t.descrizione?-1:e.descrizione>t.descrizione?1:0}),e.listaAsl.unshift({codice:0,descrizione:"TUTTE LE ASL"})});var n="/geoservices/REST/gas/strutture?ENV="+this.options.env;(0,S.default)(n).then(function(t){e.features=t})}}},,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(13),o=(i(a),n(11)),r=i(o),s=n(14),l=(i(s),n(6)),u=(i(l),n(12)),c=i(u),d=n(346),f=i(d),p=n(1),h=i(p);h.default.use(c.default),h.default.use(r.default),t.default={data:function(){return{results:[],address:[],loading:!1,marker:null}},methods:{remoteMethod:function(e){var t=this;if(e.length<4)return void(this.results=[]);this.loading=!0;var n=1e3;setTimeout(function(){(0,f.default)(e).then(function(e){t.loading=!1,e&&e.length>0?t.results=e.map(function(e){return{label:e.formatted_address,value:e.place_id,location:e.geometry.location}}):t.results=[]}).catch(function(e){t.loading=!1,console.error(e)})},n)},onChange:function(e){var t=this.results.find(function(t){return t.value===e});t?this.marker=GV.app.map.addMarker(t):this.marker&&GV.app.map.removeLayer(this.marker)}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(13),o=(i(a),n(11)),r=i(o),s=n(14),l=(i(s),n(6)),u=(i(l),n(12)),c=i(u),d=n(347),f=i(d),p=n(1),h=i(p);h.default.use(c.default),h.default.use(r.default),t.default={data:function(){return{results:[],address:[],loading:!1,marker:null}},methods:{remoteMethod:function(e){var t=this;if(e.length<4)return void(this.results=[]);this.loading=!0;var n=1e3;setTimeout(function(){(0,f.default)(e).then(function(e){t.loading=!1,console.log(e);var n=e?e.features:null;n&&n.length>0?t.results=n.map(function(e){return{label:e.properties.label,value:e.properties.id,location:{lat:e.geometry.coordinates[1],lng:e.geometry.coordinates[0]}}}):t.results=[]}).catch(function(e){t.loading=!1,console.error(e)})},n)},onChange:function(e){var t=this.results.find(function(t){return t.value===e});t?(t.type="circle",this.marker=GV.app.map.addMarker(t)):this.marker&&GV.app.map.removeLayer(this.marker)}},mounted:function(){}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"gv-header",computed:{style:function(){return"height:"+GV.config.application.layout.header.height}},mounted:function(){this.$el.innerHTML=GV.config.application.layout.header.html}}},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=(i(a),n(97)),r=i(o);n(591),n(318),t.default={name:"image-viewer",props:["imgUrl","logo","width","height"],data:function(){return{}},mounted:function(){this.init()},computed:{},methods:{init:function(){var e=this;this.img=new Image,this.img.src=this.imgUrl,this.img.onload=function(){e.loadImage()}},loadImage:function(){var e=this.img;this.newHeight=this.height,document.getElementById("image-map").setAttribute("style","width:"+this.width+"px; height:"+this.newHeight+"px");var t=Math.ceil(Math.log(this.width/e.width>this.newHeight/e.height?e.width/this.width:e.height/this.newHeight)/Math.log(2))+1,n=r.default.map("image-map",{minZoom:1,maxZoom:t,zoomSnap:.2,crs:r.default.CRS.Simple}),i=new r.default.LatLngBounds(n.unproject([0,e.height],t),n.unproject([e.width,0],t));r.default.imageOverlay(e.src,i).addTo(n),n.setMaxBounds(i),n.fitBounds(i),r.default.control.zoom().addTo(n),r.default.controlCredits({image:this.logo,position:"bottomleft"}).addTo(n)}}}},,,,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"gv-inner-html",props:["html"],data:function(){return{}},methods:{},mounted:function(){}}},,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),o=(i(a),n(6)),r=(i(o),n(8)),s=i(r),l=n(10),u=i(l),c=n(1),d=i(c),f=n(7),p=i(f),h=n(621),g=i(h),m=n(186),v=i(m);d.default.component("gv-base-layer-switcher",g.default),d.default.component("gv-legend-maps",v.default),d.default.component("gv-map-catalog-panel",function(){return new u.default(function(e){n.e(1,function(t){e(n(139))})})}),d.default.use(s.default),t.default={name:"gv-legend",data:function(){return{options:GV.config.application.layout.legend.options,maps:GV.config.maps,show:!0}},mounted:function(){if(GV.log("gv-legend: mounted"),GV.legend=this,this.options.showAddMap){var e=!GV.config.idMap&&!GV.config.agAppMap;this.options.showMapCatalogPanelOnStart&&(e=!0),this.options.dontShowMapCatalogPanelOnStart&&(e=!1),GV.config.loadCatalog({showMapCatalogPanel:e,filterDownloadCatalog:this.options.filterDownloadCatalog})}(this.options.collapsed||window.matchMedia("(max-width: 500px)").matches)&&(this.show=!1),this.hideLegend()},methods:{hideLegend:function(e){this.show?(document.getElementById("gv-legend-title").style.display="block",document.getElementById("gv-legend-title-collapsed").style.display="none",document.getElementById("gv-legend-wrapper").style.display="block",document.getElementById("gv-legend").style.width="260px"):(document.getElementById("gv-legend-title").style.display="none",document.getElementById("gv-legend-title-collapsed").style.display="block",document.getElementById("gv-legend-wrapper").style.display="none",document.getElementById("gv-legend").style.width="26px"),this.show=!this.show},toggleCollapseClass:function(){return this.show?"gv-legend-collapse gv-color-scheme el-icon-arrow-down":"gv-legend-collapse gv-color-scheme el-icon-arrow-up"},addMap:function(){(0,p.default)({elId:"gv-map-catalog-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new d.default({template:"<gv-map-catalog-panel></gv-map-catalog-panel>"})})},downloadMaps:function(){(0,p.default)({elId:"gv-download-totale-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new d.default({template:"<gv-download-totale-panel></gv-download-totale-panel>"})})}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(80),o=(i(a),n(73)),r=i(o),s=n(38),l=(i(s),n(37)),u=i(l),c=n(181),d=(i(c),n(177)),f=i(d),p=n(180),h=(i(p),n(176)),g=i(h),m=n(56),v=(i(m),n(54)),_=i(v),y=n(57),b=(i(y),n(55)),L=i(b),w=n(9),C=(i(w),n(8)),M=i(C),x=n(13),S=(i(x),n(11)),E=i(S),I=n(14),T=(i(I),n(6)),A=(i(T),n(12)),O=i(A),G=n(10),P=i(G),R=n(1),V=i(R),k=n(7),F=i(k);V.default.component("gv-multi-legend-panel",function(){return new P.default(function(e){n.e(20,function(t){e(n(661))})})}),V.default.component("gv-layers-transparency",function(){return new P.default(function(e){n.e(21,function(t){e(n(650))})})}),V.default.component("gv-layer-search-legend",function(){return new P.default(function(e){n.e(7,function(t){e(n(648))})})}),V.default.use(O.default),V.default.use(E.default),V.default.use(M.default),V.default.use(L.default),V.default.use(_.default),V.default.use(g.default),V.default.use(f.default),V.default.use(u.default),V.default.use(r.default),t.default={name:"gv-legend-layers",props:["map","options"],data:function(){return{}},mounted:function(){GV.log("gv-legend-layers: mounted")},methods:{iconUrl:function(e){return e.legend.icon},getClass:function(e){return e.inRange?"gv-list-legend-layer-item":"gv-list-legend-layer-item gv-list-legend-layer-disabled-item"},layerClassName:function(e){var t=e.row;e.rowIndex;return t.inRange?"gv-list-legend-layer-item":"gv-list-legend-layer-item gv-list-legend-layer-disabled-item"},setLayerVisible:function(e){GV.eventBus.$emit("set-layer-visible",{layer:e,checked:e.visible});var t=e.opacityBase100/100;GV.eventBus.$emit("set-layer-transparency",{layerName:e.name,opacity:t})},setLayerTransparency:function(e){var t=e.opacityBase100/100;GV.eventBus.$emit("set-layer-transparency",{layerName:e.name,opacity:t})},layerSearch:function(e){(0,F.default)({elId:"gv-layer-search-legend",containerId:GV.config.containerId,toggleEl:!0,vm:new V.default({template:"<gv-layer-search-legend layerId="+e.id+"></gv-layer-search-legend>"})})},showLegendPanel:function(e){if(e.inRange&&(e.multiClasse||e.flagRemote||e.legend.popUpFlag)){var t,n,i=null;e.legend.popUpUrl&&e.legend.popUpFlag?(i=""+GV.globals.DEFAULT_PROXY+e.legend.popUpUrl,t=window.matchMedia("(max-width: 450px)").matches?300:e.legend.popUpWidth||600,n=window.matchMedia("(max-height: 620px)").matches?400:e.legend.popUpHeight||600):e.multiClasse?(e.flagGeoserver||e.flagRemote)&&(i=""+GV.globals.DEFAULT_PROXY+e.wmsParams.url+"LAYER="+e.name+"&REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&",e.wmsParams.styles&&(i+="STYLES="+e.wmsParams.styles+"&"),t=window.matchMedia("(max-width: 450px)").matches?300:400,n=350):e.flagRemote&&(i=""+GV.globals.DEFAULT_PROXY+e.wmsParams.url+"&LAYER="+e.name+"&SERVICE=WMS&REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/jpeg",e.wmsParams.styles&&(i+="STYLES="+e.wmsParams.styles+"&"),t=window.matchMedia("(max-width: 450px)").matches?300:500,n=350),(0,F.default)({elId:"gv-multi-legend-panel",containerId:GV.config.containerId,vm:new V.default({template:'<gv-multi-legend-panel visible="true" :src="src" :height="height" :width="width" :title="title"></gv-multi-legend-panel>',data:{title:"LEGENDA",src:i,width:t,height:n}})})}}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),o=(i(a),n(6)),r=(i(o),n(8)),s=i(r),l=n(10),u=i(l),c=n(1),d=i(c),f=n(7),p=i(f),h=n(652),g=i(h),m=n(768),v=i(m);d.default.component("gv-legend-layers",g.default),d.default.component("gv-map-info-panel",function(){return new u.default(function(e){n.e(0,function(t){e(n(99))})})}),d.default.component("gv-map-catalog-panel",function(){return new u.default(function(e){n.e(1,function(t){e(n(139))})})}),d.default.component("gv-map-download",function(){return new u.default(function(e){n.e(6,function(t){e(n(627))})})}),d.default.use(v.default),d.default.use(s.default),t.default={name:"gv-legend-maps",props:["options"],data:function(){return{maps:GV.config.maps}},mounted:function(){var e=this;GV.log("gv-legend-maps: mounted"),this.options.showDownloadPanelOnLoad&&GV.config.idMap&&GV.eventBus.$on("gv-config-init",function(t){e.openDownloadPanel(GV.config.idMap)})},methods:{showMapLayers:function(e){return e.showLayersInLegend},toggleLayers:function(e){e.showLayersInLegend=!e.showLayersInLegend},getToggleLayersClass:function(e){return e.showLayersInLegend?"gv-inverted-color-scheme gv-legend-map-tools-button el-icon-arrow-up":"gv-inverted-color-scheme gv-legend-map-tools-button el-icon-arrow-down"},isDownloadable:function(e){return!this.options.noDownloadButton&&(!("pub"!==GV.globals.RL_CATALOG||!e.flagDownload)||!("int"!==GV.globals.RL_CATALOG||!e.flagDownloadExtranet&&!e.flagDownload))},checkInfoMap:function(e){return this.options.showInfoMap&&GV.config.getMapConfig(e.id).metaData},showMapInfoPanel:function(e){var t=GV.config.getMapConfig(e.id).metaData,n=this.isDownloadable(e);(0,p.default)({elId:"gv-map-info-panel",containerId:GV.config.containerId,clear:!0,vm:new d.default({template:'<gv-map-info-panel visible="true" :metaData="metaData" addToMapButton="true" downloadable="'+n+'"></gv-map-info-panel>',data:{metaData:t}})})},remove:function(e){GV.config.removeMap(e.id)},download:function(e){this.openDownloadPanel(e.id)},openDownloadPanel:function(e){if(document.getElementById("gv-map-download")){var t=document.getElementById("gv-map-download");t.parentNode.removeChild(t)}var n="closeWindow"===this.options.downloadPanelCloseMode;(0,p.default)({elId:"gv-map-download",containerId:GV.config.containerId,toggleEl:!1,vm:new d.default({template:'<gv-map-download idMap="'+e+'" closeWindow="'+n+'"></gv-map-download>'})})},layerTransparency:function(e){(0,p.default)({elId:"gv-layers-transparency",containerId:GV.config.containerId,toggleEl:!1,vm:new d.default({template:'<gv-layers-transparency idMap="'+e.id+'"></gv-layers-transparency>'})})}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=(i(a),n(315)),r=i(o),s=n(31),l=i(s),u=n(101),c=i(u),d=["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","contextmenu","focus","blur","preclick","load","unload","viewreset","movestart","move","moveend","dragstart","drag","dragend","zoomstart","zoomend","zoomanim","zoomlevelschange","resize","autopanstart","layeradd","layerremove","baselayerchange","overlayadd","overlayremove","locationfound","locationerror","popupopen","popupclose"];t.default={name:"gv-map",data:function(){var e=document.documentElement.clientHeight;return{style:"height:"+e+"px",map:null}},mounted:function(){if(GV.app.map=new r.default,this.map=GV.app.map,this.registerMapEvents(),this.subscribeConfigEvents(),window.addEventListener("resize",this.handleResize),this.handleResize(),GV.config.application.mapOptions&&GV.config.application.mapOptions.click)switch(GV.config.application.mapOptions.click){case"info":l.default.activate();break;case"coordinate":c.default.activate()}GV.log("gv-map: mounted"),GV.eventBus.$emit("gv-map-mounted",GV.app.map)},methods:{handleResize:function(e){var t=document.documentElement.clientHeight-document.getElementById("gv-map").getBoundingClientRect().top;this.style="height:"+t+"px"},registerMapEvents:function(){d.forEach(function(e){var t="map-"+e;GV.app.map.on(e,function(e){e.mapType="leaflet",GV.eventBus.$emit(t,e)})})},subscribeConfigEvents:function(){GV.eventBus.$on("config-add-map",function(e){var t=e.config;GV.app.map.loadLayers(t.layers),t.extent_3857&&GV.app.map.setExtent(t.extent_3857)}),GV.eventBus.$on("config-add-layer",function(e){var t=e.config;GV.app.map.loadLayers([t]),t.extent_3857&&GV.app.map.setExtent(t.extent_3857)}),GV.eventBus.$on("config-remove-layer",function(e){var t=e.config,n=GV.app.map.getLayerByName(t);n&&GV.app.map.removeLayer(n)}),GV.eventBus.$on("config-remove-map",function(e){var t=e.config;t.layers.forEach(function(e){var t=GV.app.map.getLayerByName(e.name);t&&GV.app.map.removeLayer(t)})})}}}},,,,,,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(584),o=(i(a),n(470)),r=i(o),s=n(38),l=(i(s),n(37)),u=i(l),c=n(13),d=(i(c),n(11)),f=i(d),p=n(14),h=(i(p),n(6)),g=(i(h),n(12)),m=i(g),v=n(1),_=i(v),y=n(4),b=i(y);_.default.use(m.default),_.default.use(f.default),_.default.use(u.default),_.default.use(r.default),t.default={data:function(){return{idMap:null,mapConfig:null,baseLayerGG:null,baseLayerAA:null,tipi:[],indicatoriGiorno:[],indicatoriAnno:[],anni:[],tipo:null,indicatore:null,data:null,giorno:null,show:!0,buttonDisabled:!0,showLegend:!1,legendUrl:null}},watch:{giorno:function(){this.data=this.giorno},data:function(){this.data||(this.showLegend=!1),this.data&&this.indicatore&&this.loadLayer()}},methods:{onChangeTipo:function(e){this.tipo=e,this.indicatore=null,this.data=null,this.giorno=null,this.showLegend=!1},onChangeIndicatore:function(e){this.indicatore=e,this.data&&this.loadLayer()},loadLayer:function(){GV.config.removeMap(this.idMap),this.mapConfig.layers=[],this.mapConfig.layers=[this.getLayer()],GV.config.addMapConfig(this.mapConfig),this.legendUrl="/geoservices/REST/rqa/legenda/"+this.indicatore,this.showLegend=!0},getLayer:function(){var e=this,t="G"===this.tipo?this.baseLayerGG:this.baseLayerAA;if("G"===this.tipo){t.wmsParams.styles="RQA_"+this.indicatore,t.wmsParams.cql_filter="cod_indicatore='"+this.indicatore+"' AND giorno='"+this.data+"'";var n=this.indicatoriGiorno.find(function(t){return t.id===e.indicatore;
}).nome;t.legend.label=n+" ("+this.data+")"}else{t.wmsParams.styles="RQA_"+this.indicatore,t.wmsParams.cql_filter="cod_indicatore='"+this.indicatore+"' AND anno="+this.data;var i=this.indicatoriAnno.find(function(t){return t.id===e.indicatore}).nome;t.legend.label=i+" ("+this.data+")"}return t},toggleCollapseClass:function(){return this.show?"gv-panel-collapse gv-color-scheme el-icon-arrow-up":"gv-panel-collapse gv-color-scheme el-icon-arrow-down"},hidePanel:function(){this.show?document.getElementById("rqa-wrapper").style.display="none":document.getElementById("rqa-wrapper").style.display="block",this.show=!this.show},setData:function(e){this.tipi=e.tipi,this.indicatoriGiorno=e.indicatoriGiorno,this.indicatoriAnno=e.indicatoriAnno,this.anni=e.anni,this.mapConfig=e.mapConfig,this.idMap=e.mapConfig.id,this.baseLayerGG=e.mapConfig.layers.filter(function(t){return t.id===e.idLayerGG})[0],this.baseLayerAA=e.mapConfig.layers.filter(function(t){return t.id===e.idLayerAA})[0]}},computed:{showIndicatoriGiorno:function(){return"G"==this.tipo},showIndicatoriAnno:function(){return"A"==this.tipo}},mounted:function(){var e=this;b.default.get("/geoservices/REST/rqa/app-config/").then(function(e){return e.data.data}).then(function(t){e.setData(t)})}}},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(13),o=(i(a),n(11)),r=i(o),s=n(14),l=(i(s),n(6)),u=(i(l),n(12)),c=i(u),d=n(1),f=i(d);f.default.use(c.default),f.default.use(r.default),t.default={data:function(){var e=[{value:8,label:"1:2.300.000"},{value:9,label:"1:1.150.000"},{value:10,label:"1:580.000"},{value:11,label:"1:290.000"},{value:12,label:"1:144.000"},{value:13,label:"1:72.000"},{value:14,label:"1:36.000"},{value:15,label:"1:18.000"},{value:16,label:"1:9.000"},{value:17,label:"1:4.500"},{value:18,label:"1:2.200"},{value:19,label:"1:1.100"},{value:20,label:"1:560"}];return{options:e,value:9}},methods:{onChange:function(e){GV.app.map.setZoom(e)}},mounted:function(){var e=this;GV.eventBus.$on("map-zoom",function(t){e.value=t})}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(56),s=(i(r),n(54)),l=i(s),u=n(57),c=(i(u),n(55)),d=i(c),f=n(9),p=(i(f),n(8)),h=i(p),g=n(13),m=(i(g),n(11)),v=i(m),_=n(14),y=(i(_),n(6)),b=(i(y),n(12)),L=i(b),w=n(1),C=i(w),M=n(186),x=i(M),S=n(7),E=i(S);C.default.component("gv-legend-maps",x.default),C.default.use(L.default),C.default.use(v.default),C.default.use(h.default),C.default.use(d.default),C.default.use(l.default),C.default.component("gv-scuoladigitale-ricerca",function(){return new o.default(function(e){n.e(15,function(t){e(n(668))})})}),t.default={name:"gv-scuoladigitale-legend",data:function(){return{options:GV.config.getToolOptions("gv-scuoladigitale-legend"),maps:GV.config.maps,show:!0,tema:0}},mounted:function(){GV.log("gv-scuoladigitale-legend: mounted"),GV.legend=this,window.matchMedia("(max-width: 500px)").matches&&(this.show=!1),this.hideLegend(),this.changeMap(0)},methods:{changeMap:function(e){GV.config.maps[0]&&GV.config.removeMap(GV.config.maps[0].id),GV.config.addMapConfig(this.options.maps[e])},showSearch:function(){(0,E.default)({elId:"gv-scuoladigitale-ricerca",containerId:GV.config.containerId,toggleEl:!0,vm:new C.default({template:"<gv-scuoladigitale-ricerca></gv-scuoladigitale-ricerca>"})})},hideLegend:function(e){this.show?(document.getElementById("gv-scuoladigitale-legend-title").style.display="block",document.getElementById("gv-scuoladigitale-legend-title-collapsed").style.display="none",document.getElementById("gv-scuoladigitale-legend-wrapper").style.display="block",document.getElementById("gv-scuoladigitale-legend").style.width="260px"):(document.getElementById("gv-scuoladigitale-legend-title").style.display="none",document.getElementById("gv-scuoladigitale-legend-title-collapsed").style.display="block",document.getElementById("gv-scuoladigitale-legend-wrapper").style.display="none",document.getElementById("gv-scuoladigitale-legend").style.width="26px"),this.show=!this.show},toggleCollapseClass:function(){return this.show?"gv-scuoladigitale-legend-collapse gv-color-scheme el-icon-arrow-down":"gv-scuoladigitale-legend-collapse gv-color-scheme el-icon-arrow-up"}}}},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(13),o=(i(a),n(11)),r=i(o),s=n(14),l=(i(s),n(6)),u=(i(l),n(12)),c=i(u),d=n(1),f=i(d);f.default.use(c.default),f.default.use(r.default),t.default={data:function(){return{results:[],address:[],recordsCache:{},layers:null,cachedLayers:[],propertyName:null,loading:!1,marker:null,placeHolder:"Ricerca..."}},mounted:function(){this.layers=GV.config.getToolOptions("gv-search").layers,this.propertyName=GV.config.getToolOptions("gv-search").propertyName,this.additionalLabel=GV.config.getToolOptions("gv-search").additionalLabel,this.placeHolder=GV.config.getToolOptions("gv-search").placeHolder||"Ricerca..."},methods:{search:function(e){this.results=[],e.length<3||(this.results=this.filterData(e))},filterData:function(e){var t=this,n=[];return e=e.replace(/[*+?^${}()|[\]\\]/g,""),""===e?[]:(this.layers.forEach(function(i){GV.app.map.eachLayer(function(a){a.name===i&&a instanceof L.LayerGroup&&a.eachLayer(function(i){var a=i.getLatLng();a.layer=i;var o=i.feature.properties[t.propertyName];if(new RegExp(e,"i").test(o)){var r=t.additionalLabel?i.feature.properties[t.additionalLabel]:null,s=t.additionalLabel?o+" ("+r+")":o;n.push({label:s,value:s,location:a})}})})}),n)},onChange:function(e){var t=this.results.find(function(t){return t.value===e});t?(t.type="circle",t.zoomLevel=16,this.marker=GV.app.map.addMarker(t)):this.marker&&GV.app.map.removeLayer(this.marker)}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(13),o=(i(a),n(11)),r=i(o),s=n(14),l=(i(s),n(12)),u=i(l),c=n(35),d=(i(c),n(33)),f=i(d),p=n(30),h=(i(p),n(28)),g=i(h),m=n(9),v=(i(m),n(6)),_=(i(v),n(8)),y=i(_),b=n(1),L=i(b),w=n(5),C=i(w),M=n(43),x=i(M),S=n(21),E=i(S),I=n(23),T=i(I),A=n(18),O=i(A);L.default.use(y.default),L.default.use(g.default),L.default.use(f.default),L.default.use(u.default),L.default.use(r.default),O.default.use(T.default);var G=n(64);L.default.use(G),t.default={name:"gv-map-selezione-fogli",props:{idMap:String,selFogli:String,field:String},data:function(){return{title:"SELEZIONE FOGLI",fogli:[],config:{},storageKey:"selFogli"}},computed:{},watch:{fogli:function(e){this.syncFogli(e)}},mounted:function(){var e=this;GV.eventBus.$on("gv-config-init",function(){e.config=GV.config.getMapConfig(e.idMap).downloadConfig,e.addLayerSquadri(),e.show=!0})},methods:{syncFogli:function(e){var t=GV.app.map.getLayerByName("SelezioneSquadri");t&&(t.eachLayer(function(e){e.setStyle({fillOpacity:0,weight:1})}),t.eachLayer(function(t){e.forEach(function(e){var n=t.feature.properties.COD_SQUADRO||t.feature.properties.cod_squadro;n===e&&t.setStyle({fillOpacity:.6,weight:2})})}))},addLayerSquadri:function(){var e=this,t=C.default.DEFAULT_PROXY+"https://geoservizi.regione.liguria.it/geoserver/wfs?service=WFS&version=2.0.0&request=GetFeature&srsName=EPSG:4326&outputFormat=application%2Fjson&typeName=",n=""+t+this.config.livelloSquadri;(0,x.default)(n).then(function(t){e.loadDataSquadri(t.data)})},loadDataSquadri:function(e){var t=this;GV.app.map.getLayerByName("SelezioneSquadri")&&GV.app.map.removeLayer(GV.app.map.getLayerByName("SelezioneSquadri"));var n=e.features.filter(function(e){var n=t.config.fogli.filter(function(t){var n=e.properties.COD_SQUADRO||e.properties.cod_squadro;return t.codice===n});return n.length>0});e.features=n,this.layerFogli=e,this.loadLayer()},submit:function(){this.postMessage("conferma")},cancel:function(){this.postMessage("annulla")},postMessage:function(e){var t={fogliSelezionati:this.fogli.join(","),field:parseInt(this.field),button:e};window.parent.postMessage(t,"*")},loadLayer:function(){var e=this;GV.app.map.loadLayers([{name:"SelezioneSquadri",type:"JSON",style:{color:"#ffcc00",fillOpacity:0,weight:1,opacity:1},visible:!0,data:this.layerFogli,onEachFeature:function(t,n){n.on("click",function(n){var i=t.properties.COD_SQUADRO||t.properties.cod_squadro;e.fogli.indexOf(i)>-1?e.fogli=e.fogli.filter(function(e){return e!==i}):e.fogli.push(i)})}}]),GV.config.activeControl.deactivate(),this.selFogli&&(this.fogli=this.selFogli.split(",")),(0,E.default)("Selezionare un foglio sulla mappa o dalla lista","info")},collapse:function(e){this.show?document.getElementById("gv-map-selezione-fogli-body").style.display="none":document.getElementById("gv-map-selezione-fogli-body").style.display="block",this.show=!this.show}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1);i(a);t.default={name:"gv-title",props:["divId","title","fullTitle","hide","noClose","collapsible","width","collapsedWidth"],data:function(){return{collapsed:!1}},methods:{closePanel:function(){var e=document.getElementById(this.divId);e&&(this.hide?e.style.display="none":e.parentNode.removeChild(e),GV.eventBus.$emit("title-close-panel",{divId:this.divId}))},collapse:function(){this.collapsed?(document.getElementById(this.collapsible).style.display="block",this.width&&(this.$el.style.width=this.width)):(document.getElementById(this.collapsible).style.display="none",this.collapsedWidth&&(this.$el.style.width=this.collapsedWidth)),this.collapsed=!this.collapsed},toggleCollapseClass:function(){return this.collapsed?"gv-title-collapse gv-color-scheme el-icon-arrow-down":"gv-title-collapse gv-color-scheme el-icon-arrow-up"}},mounted:function(){this.$el.id=this.divId+"-title",this.width&&(this.$el.style.width=this.width)}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(9),s=(i(r),n(6)),l=(i(s),n(8)),u=i(l),c=n(7),d=i(c),f=n(1),p=i(f);p.default.use(u.default),p.default.component("gv-map-catalog-panel",function(){return new o.default(function(e){n.e(1,function(t){e(n(139))})})});var h="gv-add-map-button";t.default={name:h,data:function(){var e=GV.config.getToolOptions(h);return{name:h,active:!1,options:e,cssClass:"gv-add-map gv-button fa fa-plus-square-o",cssActiveClass:"gv-button-selected"}},methods:{onClick:function(){(0,d.default)({elId:"gv-map-catalog-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new p.default({template:"<gv-map-catalog-panel></gv-map-catalog-panel>"})})},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="gv-back-button";t.default={data:function(){var e=GV.config.getToolOptions(n);return{name:n,active:!1,options:e,action:e.action,url:e.url,confirm:e.confirm,cssClass:"gv-back gv-button fa fa-arrow-left",cssActiveClass:"gv-button-selected"}},methods:{onClick:function(){if(this.confirm){var e=confirm("Sei sicuro?");1==e&&this.back()}else this.back()},back:function(){"close"===this.action?window.close():this.url?window.location=this.url:history.back()},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(9),s=(i(r),n(6)),l=(i(s),n(8)),u=i(l),c=n(7),d=i(c),f=n(1),p=i(f);p.default.use(u.default),p.default.component("gv-cem-elaborazioni",function(){return new o.default(function(e){n.e(19,function(t){e(n(622))})})});var h="gv-cem-elaborazioni-button";t.default={name:h,data:function(){var e=GV.config.getToolOptions(h);return{active:!1,options:e,cssClass:"gv-cem-elaborazioni gv-button fa fa-magnet",cssActiveClass:"gv-button-selected"}},methods:{onClick:function(){(0,d.default)({elId:"gv-cem-elaborazioni",containerId:GV.config.containerId,toggleEl:!0,vm:new p.default({template:"<gv-cem-elaborazioni></gv-cem-elaborazioni>"})})},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){(0,d.default)({elId:"gv-cem-elaborazioni",containerId:GV.config.containerId,toggleEl:!0,vm:new p.default({template:"<gv-cem-elaborazioni></gv-cem-elaborazioni>"})})}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(59),o=i(a),r=n(101),s=i(r),l="gv-coordinate-button";t.default={name:l,data:function(){var e=GV.config.getToolOptions(l);return{name:l,active:!1,control:s.default,options:e,cssClass:"gv-button fa fa-hand-point-down",cssActiveClass:"gv-button-selected"}},mixins:[o.default],methods:{onClick:function(){this.switchActiveButton()},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(9),s=(i(r),n(6)),l=(i(s),n(8)),u=i(l),c=n(7),d=i(c),f=n(1),p=i(f);p.default.use(u.default),p.default.component("gv-download-totale-panel",function(){return new o.default(function(e){n.e(14,function(t){e(n(629))})})});var h="gv-download-totale-button";t.default={name:h,data:function(){var e=GV.config.getToolOptions(h);return{active:!1,options:e,cssClass:"gv-download-totale-button gv-button el-icon-download",cssActiveClass:"gv-button-selected"}},methods:{onClick:function(){(0,d.default)({elId:"gv-download-totale-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new p.default({template:"<gv-download-totale-panel></gv-download-totale-panel>"})})},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(59),o=i(a),r=n(309),s=i(r),l="gv-draw-button";t.default={name:l,data:function(){var e=GV.config.getToolOptions(l);return{name:l,active:!1,control:s.default,options:e,title:"Acquisizione Geometrie",cssClass:"gv-button ms ms-draw",cssActiveClass:"gv-button-selected"}},mixins:[o.default],methods:{onClick:function(){this.switchActiveButton()},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(7),s=i(r),l=n(1),u=i(l);u.default.component("gv-fototeca-carrello-panel",function(){return new o.default(function(e){n.e(2,function(t){e(n(184))})})});var c="gv-fototeca-carrello-button";t.default={name:c,data:function(){var e=GV.config.getToolOptions(c);return{name:c,active:!1,options:e,cssClass:"gv-button fa fa-shopping-cart",cssActiveClass:"gv-button-selected"}},methods:{onClick:function(){(0,s.default)({elId:"gv-fototeca-carrello-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new u.default({template:"<gv-fototeca-carrello-panel></gv-fototeca-carrello-panel>"})})},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(7),s=i(r),l=n(1),u=i(l);u.default.component("gv-fototeca-scheda-volo-panel",function(){return new o.default(function(e){n.e(3,function(t){e(n(185))})})});var c="gv-fototeca-scheda-volo-button";t.default={name:c,data:function(){var e=GV.config.getToolOptions(c);return{name:c,active:!1,options:e,cssClass:"gv-button fa fa-info-circle",cssActiveClass:"gv-button-selected"}},methods:{onClick:function(){GV.globals.FOTOTECA_SEL_VOLO&&(0,s.default)({elId:"gv-fototeca-scheda-volo-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new u.default({template:"<gv-fototeca-scheda-volo-panel></gv-fototeca-scheda-volo-panel>"})})},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(59),o=i(a),r=n(310),s=i(r),l="gv-fototeca-selezione-territoriale-button";t.default={name:l,data:function(){var e=GV.config.getToolOptions(l);return{name:l,active:!1,control:s.default,options:e,cssClass:"gv-button fa fa-edit",cssActiveClass:"gv-button-selected"}},mixins:[o.default],methods:{onClick:function(){this.switchActiveButton()},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){var e=this;GV.eventBus.$on("gv-fototeca-selezione-territoriale-switch",function(t){e.switchActiveButton()})}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(9),s=(i(r),n(6)),l=(i(s),n(8)),u=i(l),c=n(7),d=i(c),f=n(1),p=i(f);p.default.use(u.default),p.default.component("gv-genio-localizza",function(){return new o.default(function(e){n.e(11,function(t){e(n(635))})})});var h="gv-genio-localizza-button";t.default={name:h,data:function(){var e=GV.config.getToolOptions(h);return{active:!1,options:e,cssClass:"gv-genio-localizza-button gv-button ms ms-select-hand",cssActiveClass:"gv-button-selected"}},methods:{onClick:function(){(0,d.default)({elId:"gv-genio-localizza",containerId:GV.config.containerId,toggleEl:!0,vm:new p.default({template:"<gv-genio-localizza></gv-genio-localizza>"})})},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(7),s=i(r),l=n(1),u=i(l);u.default.component("gv-genio-pratiche-collegate-panel",function(){return new o.default(function(e){n.e(17,function(t){e(n(636))})})});var c="gv-genio-pratiche-collegate-button";t.default={name:c,data:function(){var e=GV.config.getToolOptions(c);return{name:c,active:!1,options:e,cssClass:"gv-button fa fa-link",cssActiveClass:"gv-button-selected"}},methods:{onClick:function(){(0,s.default)({elId:"gv-genio-pratiche-collegate-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new u.default({template:"<gv-genio-pratiche-collegate-panel></gv-genio-pratiche-collegate-panel>"})})},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(59),o=i(a),r=n(311),s=i(r),l="gv-genio-seleziona-particelle-button";t.default={name:l,data:function(){var e=GV.config.getToolOptions(l);return{name:l,active:!1,control:s.default,options:e,cssClass:"gv-button fa fa-hand-point-down",cssActiveClass:"gv-button-selected"}},mixins:[o.default],methods:{onClick:function(){this.switchActiveButton()},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(59),o=i(a),r=n(31),s=i(r),l="gv-info-button";t.default={name:l,data:function(){var e=GV.config.getToolOptions(l);return{name:l,active:!1,control:s.default,options:e,cssClass:"gv-button fa fa-info",cssActiveClass:"gv-button-selected"}},mixins:[o.default],methods:{onClick:function(){this.switchActiveButton()},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){this.active=this.options.active}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(9),s=(i(r),n(6)),l=(i(s),n(8)),u=i(l),c=n(7),d=i(c),f=n(1),p=i(f);p.default.use(u.default),p.default.component("gv-layer-search",function(){return new o.default(function(e){n.e(8,function(t){e(n(647))})})});var h="gv-layer-search-button";t.default={name:h,data:function(){var e=GV.config.getToolOptions(h);return{active:!1,options:e,cssClass:"gv-layer-search-button gv-button fa fa-search",cssActiveClass:"gv-button-selected"}},methods:{onClick:function(){(0,d.default)({elId:"gv-layer-search",containerId:GV.config.containerId,toggleEl:!0,vm:new p.default({template:"<gv-layer-search></gv-layer-search>"})})},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(9),s=(i(r),n(6)),l=(i(s),n(8)),u=i(l),c=n(7),d=i(c),f=n(1),p=i(f);p.default.use(u.default),p.default.component("gv-layer-search-topo",function(){return new o.default(function(e){n.e(4,function(t){e(n(649))})})});var h="gv-layer-search-topo-button";t.default={name:h,data:function(){var e=GV.config.getToolOptions(h);return{active:!1,options:e,cssClass:"gv-layer-search-topo-button gv-button fa fa-search",cssActiveClass:"gv-button-selected"}},methods:{onClick:function(){(0,d.default)({elId:"gv-layer-search-topo",containerId:GV.config.containerId,toggleEl:!0,vm:new p.default({template:"<gv-layer-search-topo></gv-layer-search-topo>"})})},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(59),o=i(a),r=n(312),s=i(r),l="gv-measure-button";t.default={name:l,data:function(){var e=GV.config.getToolOptions(l);return{name:l,active:!1,control:s.default,options:e,title:"Misurazioni",cssClass:"gv-button fa fa-edit",cssActiveClass:"gv-button-selected"}},mixins:[o.default],methods:{onClick:function(){this.switchActiveButton()},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(9),s=(i(r),n(6)),l=(i(s),n(8)),u=i(l),c=n(7),d=i(c),f=n(1),p=i(f);p.default.use(u.default),p.default.component("gv-print-panel",function(){return new o.default(function(e){n.e(10,function(t){e(n(662))})})});var h="gv-print-button";t.default={name:h,data:function(){var e=GV.config.getToolOptions(h);return{active:!1,options:e,cssClass:"gv-print-button gv-button fa fa-print",cssActiveClass:"gv-button-selected"}},methods:{onClick:function(){(0,d.default)({elId:"gv-print-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new p.default({template:"<gv-print-panel></gv-print-panel>"})})},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(9),s=(i(r),n(6)),l=(i(s),n(8)),u=i(l),c=n(7),d=i(c),f=n(1),p=i(f);p.default.use(u.default),p.default.component("gv-ricerca-particella",function(){return new o.default(function(e){n.e(9,function(t){e(n(663))})})});var h="gv-ricerca-particella-button";t.default={name:h,data:function(){var e=GV.config.getToolOptions(h);return{active:!1,options:e,cssClass:"gv-ricerca-particella-button gv-button fa fa-building",cssActiveClass:"gv-button-selected"}},methods:{onClick:function(){(0,d.default)({elId:"gv-ricerca-particella",containerId:GV.config.containerId,toggleEl:!0,vm:new p.default({template:"<gv-ricerca-particella></gv-ricerca-particella>"})})},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(9),s=(i(r),n(6)),l=(i(s),n(8)),u=i(l),c=n(7),d=i(c),f=n(1),p=i(f);p.default.use(u.default),p.default.component("gv-ricerca-catastale",function(){return new o.default(function(e){n.e(5,function(t){e(n(665))})})});var h="gv-ricerca-catastale-button";t.default={name:h,data:function(){var e=GV.config.getToolOptions(h);return{active:!1,options:e,cssClass:"gv-ricerca-catastale-button gv-button fa fa-building",cssActiveClass:"gv-button-selected"}},methods:{onClick:function(){(0,d.default)({elId:"gv-ricerca-catastale",containerId:GV.config.containerId,toggleEl:!0,vm:new p.default({template:"<gv-ricerca-catastale></gv-ricerca-catastale>"})})},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t){"use strict";!function(){function e(e,i){Cesium.when(e,function(e){Cesium.defined(e)&&e.ready&&(e.levelZeroMaximumGeometricError=Cesium.TerrainProvider.getEstimatedLevelZeroGeometricErrorForAHeightmap(e.tilingScheme.ellipsoid,e.heightMapWidth,e.tilingScheme.getNumberOfXTilesAtLevel(0)),Cesium.defined(e.URLtemplateImage)&&(e.getHeightmapTerrainDataImage=function(a,o,s){var u;if(!isNaN(a+o+s)){var c=t(e.URLtemplateImage(a,o,s),a,o,s,i),d={highest:e.highest,lowest:e.lowest,offset:e.offset},f=n(a,o,s,i),p=r(c);Cesium.defined(p)&&(u=Cesium.when(p,function(t){return l.imageToHeightmapTerrainData(t,d,{width:e.heightMapWidth,height:e.heightMapHeight},e.waterMask,f,e.hasStyledImage)}).otherwise(function(){return new Cesium.HeightmapTerrainData({buffer:new Uint16Array(e.heightMapWidth*e.heightMapHeight),width:e.heightMapWidth,height:e.heightMapHeight,childTileMask:f,waterMask:new Uint8Array(e.heightMapWidth*e.heightMapHeight),structure:e.formatImage.terrainDataStructure})}))}return u}),Cesium.defined(e.URLtemplateArray)&&(e.getHeightmapTerrainDataArray=function(a,r,s){var u;if(!isNaN(a+r+s)){var c=t(e.URLtemplateArray(a,r,s),a,r,s,i),d={highest:e.highest,lowest:e.lowest,offset:e.offset},f=n(a,r,s,i),p=o(c);Cesium.defined(p)&&(u=Cesium.when(p,function(t){return l.arrayToHeightmapTerrainData(t,d,{width:e.heightMapWidth,height:e.heightMapHeight},e.formatArray,e.waterMask,f)}).otherwise(function(){return Cesium.defined(e.getHeightmapTerrainDataImage)?e.getHeightmapTerrainDataImage(a,r,s):new Cesium.HeightmapTerrainData({buffer:new Uint16Array(e.heightMapWidth*e.heightMapHeight),width:e.heightMapWidth,height:e.heightMapHeight,childTileMask:f,waterMask:new Uint8Array(e.heightMapWidth*e.heightMapHeight),structure:e.formatImage.terrainDataStructure})}))}return u}),i.getLevelMaximumGeometricError=function(t){return e.levelZeroMaximumGeometricError/(1<<t)},i.requestTileGeometry=function(t,n,i){var a;return Cesium.defined(e.getHeightmapTerrainDataArray)?a=e.getHeightmapTerrainDataArray(t,n,i):Cesium.defined(e.getHeightmapTerrainDataImage)&&(a=e.getHeightmapTerrainDataImage(t,n,i)),a},Cesium.defineProperties(i,{tilingScheme:{get:function(){return e.tilingScheme}},ready:{get:function(){return e.ready}},hasWaterMask:{get:function(){return e.waterMask}},heightMapHeight:{get:function(){return e.heightMapHeight}},heightMapWidth:{get:function(){return e.heightMapWidth}},getTileDataAvailable:{get:function(){return e.getTileDataAvailable}}})),i._readyPromise.resolve(e.ready)})}function t(e,t,n,i,a){var o=a.tilingScheme.tileXYToNativeRectangle(t,n,i),r=(o.east-o.west)/(a.heightMapWidth-1),s=(o.north-o.south)/(a.heightMapHeight-1);o.west-=.5*r,o.east+=.5*r,o.south-=.5*s,o.north+=.5*s;var l=a.tilingScheme.getNumberOfYTilesAtLevel(i),u=l-n-1;return e.replace("{south}",o.south).replace("{north}",o.north).replace("{west}",o.west).replace("{east}",o.east).replace("{x}",t).replace("{y}",n).replace("{tmsY}",u)}function n(e,t,n,i){var a=0,o=n+1;return a|=i.getTileDataAvailable(2*e,2*t,o)?1:0,a|=i.getTileDataAvailable(2*e+1,2*t,o)?2:0,a|=i.getTileDataAvailable(2*e,2*t+1,o)?4:0,a|=i.getTileDataAvailable(2*e+1,2*t+1,o)?8:0}var i={},a=void 0===Cesium.loadXML?Cesium.Resource.fetchXML:Cesium.loadXML,o=void 0===Cesium.loadArrayBuffer?Cesium.Resource.fetchArrayBuffer:Cesium.loadArrayBuffer,r=void 0===Cesium.loadImage?Cesium.Resource.fetchImage:Cesium.loadImage,s=function(e,t){var n,i=Math.max(e.west,t.west),a=Math.min(e.east,t.east),o=Math.max(e.south,t.south),r=Math.min(e.north,t.north);return n=a<=i||o>=r?void 0:new Cesium.Rectangle(i,o,a,r)};i.CRS=[{name:"CRS:84",ellipsoid:Cesium.Ellipsoid.WGS84,firstAxeIsLatitude:!1,tilingScheme:Cesium.GeographicTilingScheme,supportedCRS:"urn:ogc:def:crs:OGC:2:84"},{name:"EPSG:4326",ellipsoid:Cesium.Ellipsoid.WGS84,firstAxeIsLatitude:!0,tilingScheme:Cesium.GeographicTilingScheme,SupportedCRS:"urn:ogc:def:crs:EPSG::4326"},{name:"EPSG:3857",ellipsoid:Cesium.Ellipsoid.WGS84,firstAxeIsLatitude:!1,tilingScheme:Cesium.WebMercatorTilingScheme,SupportedCRS:"urn:ogc:def:crs:EPSG::3857"},{name:"OSGEO:41001",ellipsoid:Cesium.Ellipsoid.WGS84,firstAxeIsLatitude:!1,tilingScheme:Cesium.WebMercatorTilingScheme,SupportedCRS:"urn:ogc:def:crs:EPSG::3857"}],i.FormatImage=[{format:"image/png",extension:"png"},{format:"image/jpeg",extension:"jpg"},{format:"image/jpeg",extension:"jpeg"},{format:"image/gif",extension:"gif"},{format:"image/png; mode=8bit",extension:"png"}],i.FormatArray=[{format:"image/bil",postProcessArray:function(e,t,n,i,a){var o,r=new DataView(e),s=new ArrayBuffer(t.height*t.width*2),l=new DataView(s);if(s.byteLength===e.byteLength){for(var u,c=0,d=0,f=0;f<s.byteLength;f+=2)if(u=r.getInt16(f,!1)-a,u>i&&u<n)l.setInt16(f,u,!0),d+=u,c++;else{var p=0===c?1:d/c;l.setInt16(f,p,!0)}o=new Int16Array(s)}return o}}],i.WMSParser={},i.TMSParser={},i.WMTSParser={},i.parser=function(e){var t;switch(e=Cesium.defaultValue(e,Cesium.defaultValue.EMPTY_OBJECT),e.service){case"TMS":t=i.TMSParser.generate(e);break;case"WMTS":t=i.WMTSParser.generate(e);break;default:t=i.WMSParser.generate(e)}return t},i.WMSParser.generate=function(e){var t;if(e=Cesium.defaultValue(e,Cesium.defaultValue.EMPTY_OBJECT),Cesium.defined(e.url)){var n=e.url,o=n.lastIndexOf("?");o>-1&&(n=n.substring(0,o));var r=n+"?SERVICE=WMS&REQUEST=GetCapabilities&tiled=true";Cesium.defined(e.proxy)&&(r=e.proxy.getURL(r)),t=Cesium.when(a(r),function(t){return i.WMSParser.getMetaDatafromXML(t,e)})}else{if(!Cesium.defined(e.xml))throw new Cesium.DeveloperError("either description.url or description.xml are required.");t=i.WMSParser.getMetaDatafromXML(e.xml,e)}return t},i.WMSParser.getMetaDatafromXML=function(e,t){if(!(e instanceof XMLDocument))throw new Cesium.DeveloperError("xml must be a XMLDocument");if(!Cesium.defined(t.layerName))throw new Cesium.DeveloperError("description.layerName is required.");var n={},a=t.layerName,o=Cesium.defaultValue(t.maxLevel,11),r=void 0;n.heightMapWidth=Cesium.defaultValue(t.heightMapWidth,65),n.heightMapHeight=Cesium.defaultValue(t.heightMapHeight,n.heightMapWidth);var l={width:65,height:65},u=void 0;n.formatImage=t.formatImage,n.formatArray=t.formatArray,n.tilingScheme=void 0;var c=void 0,d=void 0;n.ready=!1,n.levelZeroMaximumGeometricError=void 0,n.waterMask=Cesium.defaultValue(t.waterMask,!1),"boolean"!=typeof n.waterMask&&(n.waterMask=!1),n.offset=Cesium.defaultValue(t.offset,0),n.highest=Cesium.defaultValue(t.highest,12e3),n.lowest=Cesium.defaultValue(t.lowest,-500);var f=t.styleName;n.hasStyledImage=Cesium.defaultValue(t.hasStyledImage,"string"==typeof t.styleName);var p=e.querySelector("[version]");null!==p&&(r=p.getAttribute("version"),d=/^1\.[3-9]\./.test(r));var h=e.querySelector("Request>GetMap OnlineResource").getAttribute("xlink:href"),g=h.indexOf("?");g>-1&&(h=h.substring(0,g)),Cesium.defined(t.proxy)&&(h=t.proxy.getURL(h));var m=e.querySelectorAll("Request>GetMap>Format");if(!Cesium.defined(n.formatImage))for(var v=0;v<m.length&&!Cesium.defined(n.formatArray);v++){
var _=i.FormatArray.filter(function(e){return e.format===m[v].textContent});_.length>0&&(n.formatArray=_[0])}Cesium.defined(n.formatArray)&&"string"==typeof n.formatArray.format&&"function"==typeof n.formatArray.postProcessArray?n.formatArray.terrainDataStructure={heightScale:1,heightOffset:0,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1,lowestEncodedHeight:0,highestEncodedHeight:1e4}:n.formatArray=void 0;for(var v=0;v<m.length&&!Cesium.defined(n.formatImage);v++){var _=i.FormatImage.filter(function(e){return e.format===m[v].textContent});_.length>0&&(n.formatImage=_[0])}Cesium.defined(n.formatImage)&&"string"==typeof n.formatImage.format?n.formatImage.terrainDataStructure={heightScale:1,heightOffset:0,elementsPerHeight:2,stride:4,elementMultiplier:256,isBigEndian:!0,lowestEncodedHeight:0,highestEncodedHeight:1e4}:n.formatImage=void 0;for(var y,b=e.querySelectorAll("Layer[queryable='1'],Layer[queryable='true']"),L=0;L<b.length&&!Cesium.defined(y);L++)if(b[L].querySelector("Name").textContent===a){y=b[L];var w=y.getAttribute("fixedHeight"),C=y.getAttribute("fixedWidth");Cesium.defined(w)&&(w=parseInt(w),n.heightMapHeight=w>0&&w<n.heightMapHeight?w:n.heightMapHeight,l.height=w>0?w:l.height),Cesium.defined(C)&&(C=parseInt(C),n.heightMapWidth=C>0&&C<n.heightMapWidth?C:n.heightMapWidth,l.width=C>0?C:l.width)}if(Cesium.defined(y)&&Cesium.defined(r)){for(var M=!1,x=0;x<i.CRS.length&&!M;x++){var S=i.CRS[x],E=S.name,I=y.querySelector("BoundingBox[SRS='"+E+"'],BoundingBox[CRS='"+E+"']");if(null!==I){u=E,c=S.firstAxeIsLatitude,n.tilingScheme=new S.tilingScheme({ellipsoid:S.ellipsoid});var T,A,O,G;c&&d?(T=parseFloat(I.getAttribute("miny")),A=parseFloat(I.getAttribute("maxy")),O=parseFloat(I.getAttribute("minx")),G=parseFloat(I.getAttribute("maxx"))):(T=parseFloat(I.getAttribute("minx")),A=parseFloat(I.getAttribute("maxx")),O=parseFloat(I.getAttribute("miny")),G=parseFloat(I.getAttribute("maxy")));var P=new Cesium.Rectangle(T,O,A,G);n.getTileDataAvailable=function(e,t,i){var a=!1,r=n.tilingScheme.tileXYToNativeRectangle(e,t,i);if(i<o){var l=s(P,r);a=Cesium.defined(l)}return a},M=!0}}if(Cesium.defined(f)){for(var R=y.querySelectorAll("Style>Name"),V=!1,k=0;k<R.length&&!V;k++)f===R[k].textContent&&(V=!0);V||(f=void 0)}for(var F=e.querySelectorAll("VendorSpecificCapabilities>TileSet"),z=!1,B=0;B<F.length&&!z;B++){var N=null!==F[B].querySelector("BoundingBox[SRS='"+u+"'],BoundingBox[CRS='"+u+"']"),D=F[B].querySelector("Layers").textContent===a;D&&N&&(l.width=parseInt(F[B].querySelector("Width").textContent),l.height=parseInt(F[B].querySelector("Height").textContent),z=!0)}n.ready=M&&(Cesium.defined(n.formatImage)||Cesium.defined(n.formatArray))&&Cesium.defined(r)}if(n.ready){var j=h+"?SERVICE=WMS&REQUEST=GetMap&layers="+a+"&version="+r+"&bbox=";if(j+=d&&c?"{south},{west},{north},{east}":"{west},{south},{east},{north}",j+="&crs="+u+"&srs="+u,n.formatImage){var U=j+"&format="+n.formatImage.format+"&width="+l.width+"&height="+l.height;Cesium.defined(f)&&(U+="&styles="+f+"&style="+f),n.URLtemplateImage=function(){return U},n.imageSize=l}if(n.formatArray){var W=j+"&format="+n.formatArray.format+"&width="+n.heightMapWidth+"&height="+n.heightMapHeight;n.URLtemplateArray=function(){return W}}}return n},i.TMSParser.generate=function(e){var t;if(e=Cesium.defaultValue(e,Cesium.defaultValue.EMPTY_OBJECT),Cesium.defined(e.url))t=a(e.url).then(function(t){return i.TMSParser.parseXML(t,e)});else{if(!Cesium.defined(e.xml))throw new Cesium.DeveloperError("either description.url or description.xml are required.");t=i.TMSParser.parseXML(e.xml,e)}return t},i.TMSParser.parseXML=function(e,t){if(!(e instanceof XMLDocument))throw new Cesium.DeveloperError("xml must be a XMLDocument");var n;if(null!=e.querySelector("TileMapService")){if(!Cesium.defined(t.layerName))throw new Cesium.DeveloperError("layerName is required.");var o=[].slice.apply(e.querySelectorAll("TileMap[title='"+t.layerName+"']")),r=o.map(function(e){var n=e.getAttribute("href");return Cesium.defined(t.proxy)&&(n=t.proxy.getURL(n)),Cesium.when(a(n),function(e){return i.TMSParser.getMetaDatafromXML(e,t)})}),s=Cesium.when.all(r).then(function(e){for(var t,n=0;n<e.length&&!Cesium.defined(t);n++)Cesium.defined(e[n])&&(t=e[n]);return t});n=s.then(function(e){return e})}else n=i.TMSParser.getMetaDatafromXML(e,t);return n},i.TMSParser.getMetaDatafromXML=function(e,t){var n={};n.ready=!1,n.heightMapWidth=Cesium.defaultValue(t.heightMapWidth,65),n.heightMapHeight=Cesium.defaultValue(t.heightMapHeight,n.heightMapWidth);var a=Cesium.defaultValue(t.maxLevel,11),o=t.proxy;n.hasStyledImage=Cesium.defaultValue(t.hasStyledImage,"string"==typeof t.styleName),n.waterMask=Cesium.defaultValue(t.waterMask,!1),"boolean"!=typeof n.waterMask&&(n.waterMask=!1),n.offset=Cesium.defaultValue(t.offset,0),n.highest=Cesium.defaultValue(t.highest,12e3),n.lowest=Cesium.defaultValue(t.lowest,-500);var r=e.querySelector("SRS").textContent,l=i.CRS.filter(function(e){return e.name===r});l.length>0&&(n.tilingScheme=new l[0].tilingScheme({ellipsoid:l[0].ellipsoid}));var u=e.querySelector("TileFormat"),c=i.FormatImage.filter(function(e){return e.extension==u.getAttribute("extension")});c.length>0&&(n.formatImage=c[0],n.imageSize={},n.imageSize.width=parseInt(u.getAttribute("width")),n.imageSize.height=parseInt(u.getAttribute("height")));var d=[].slice.call(e.querySelectorAll("TileSets>TileSet")),f=[];if(Cesium.defined(n.formatImage)&&(f=d.map(function(e){var t=e.getAttribute("href")+"/{x}/{tmsY}."+n.formatImage.extension;Cesium.defined(o)&&(t=o.getURL(t));var i=parseInt(e.getAttribute("order"));return{url:t,level:i}}),f.sort(function(e,t){return e.level-t.level}),f.length>0&&(n.tileSets=f)),Cesium.defined(n.tileSets)&&Cesium.defined(n.formatImage)&&Cesium.defined(n.tilingScheme)){n.URLtemplateImage=function(e,t,n){var i="";return n<f.length&&(i=f[n].url),i};var p=e.querySelector("BoundingBox"),h=parseFloat(p.getAttribute("miny")),g=parseFloat(p.getAttribute("maxy")),m=parseFloat(p.getAttribute("minx")),v=parseFloat(p.getAttribute("maxx")),_=new Cesium.Rectangle(m,h,v,g);n.getTileDataAvailable=function(e,t,i){var o=n.tilingScheme.tileXYToNativeRectangle(e,t,i),r=s(_,o);return Cesium.defined(r)&&i<a&&i<f.length},n.ready=!0}else n=void 0;return n},i.WMTSParser.generate=function(e){e=Cesium.defaultValue(e,Cesium.defaultValue.EMPTY_OBJECT);var t;if(Cesium.defined(e.url)){var n=e.url,o=n.lastIndexOf("?");o>-1&&(n=n.substring(0,o));var r=n+"?REQUEST=GetCapabilities";Cesium.defined(e.proxy)&&(r=e.proxy.getURL(r)),t=a(r).then(function(t){return i.WMTSParser.getMetaDatafromXML(t,e)})}else{if(!Cesium.defined(e.xml))throw new Cesium.DeveloperError("either description.url or description.xml are required.");t=i.WMTSParser.getMetaDatafromXML(e.xml,e)}return t},i.WMTSParser.getMetaDatafromXML=function(e,t){if(!(e instanceof XMLDocument))throw new Cesium.DeveloperError("xml must be a XMLDocument");var n={},a=t.layerName;n.ready=!1,n.heightMapWidth=Cesium.defaultValue(t.heightMapWidth,65),n.heightMapHeight=Cesium.defaultValue(t.heightMapHeight,n.heightMapWidth);var o=Cesium.defaultValue(t.maxLevel,12),r=t.proxy,s=t.styleName;n.hasStyledImage=Cesium.defaultValue(t.hasStyledImage,"string"==typeof t.styleName),n.waterMask=Cesium.defaultValue(t.waterMask,!1),"boolean"!=typeof n.waterMask&&(n.waterMask=!1),n.offset=Cesium.defaultValue(t.offset,0),n.highest=Cesium.defaultValue(t.highest,12e3),n.lowest=Cesium.defaultValue(t.lowest,-500);for(var l,u,c,d,f=[],p=[].slice.call(e.querySelectorAll('Operation[name="GetTile"] HTTP Get')),h=p.map(function(e){var t,n=e.querySelector("Value").textContent;return"KVP"===n&&(t={node:e,type:"KVP"}),"RESTful"===n&&(t={node:e,type:"RESTful"}),t}).filter(function(e){return Cesium.defined(e)}),g=0;g<h.length;g++){var m=h[g];"RESTful"!==m.type||Cesium.defined(c)||(c=m.node.getAttribute("xlink:href"),Cesium.defined(r)&&(c=r.getURL(c))),"KVP"!==m.type||Cesium.defined(u)||(u=m.node.getAttribute("xlink:href"),Cesium.defined(r)&&(u=r.getURL(u)))}for(var v,_=e.querySelectorAll("Contents>Layer>Identifier"),g=0;g<_.length&&!Cesium.defined(v);g++)a===_[g].textContent&&(v=_[g].parentNode);if(Cesium.defined(v)){for(var y,b,L=v.querySelectorAll("Style"),g=0;g<L.length;g++){var w=L[g].querySelector("Identifier").textContent;null!=L[g].getAttribute("isDefault")&&(y=w),w===s&&(b=w)}Cesium.defined(s)&&s==b||(s=Cesium.defaultValue(y,""));for(var C=[].slice.call(v.querySelectorAll("Format")),M=0;M<i.FormatImage.length&&!Cesium.defined(d);M++){var x=C.filter(function(e){return e.textContent===i.FormatImage[M].format});x.length>0&&(d=i.FormatImage[M])}f=v.querySelectorAll("TileMatrixSetLink")}for(var S=[].slice.call(e.querySelectorAll("TileMatrixSet>Identifier")),E=0;E<f.length&&!n.ready;E++){for(var I,T,A=f[E],O=A.querySelector("TileMatrixSet").textContent,g=0;g<S.length&&!Cesium.defined(I);g++)S[g].textContent===O&&(I=S[g].parentNode);for(var G=I.querySelector("SupportedCRS").textContent,P=0;P<i.CRS.length&&!Cesium.defined(T);P++)i.CRS[P].SupportedCRS===G&&(T=i.CRS[P]);if(Cesium.defined(T)){var R,V=[].slice.call(I.querySelectorAll("TileMatrix"));R=V.map(function(e){var t=e.querySelector("Identifier").textContent,n=parseInt(e.querySelector("MatrixWidth").textContent),i=parseInt(e.querySelector("MatrixHeight").textContent),a=parseInt(e.querySelector("TileWidth").textContent),o=parseInt(e.querySelector("TileHeight").textContent),r=parseFloat(e.querySelector("ScaleDenominator").textContent);return{id:t,maxWidth:n,maxHeight:i,scaleDenominator:r,complete:!1,tileWidth:a,tileHeight:o}}),R.sort(function(e,t){return t.scaleDenominator-e.scaleDenominator}),listTileMatrixLimits=A.querySelectorAll("TileMatrixSetLimits>TileMatrixLimits");for(var k=0;k<R.length;k++)for(var F=R[k],z=0;z<listTileMatrixLimits.length;z++){var B=listTileMatrixLimits[z];F.id===B.querySelector("TileMatrix").textContent&&(F.minTileRow=parseInt(B.querySelector("MinTileRow").textContent),F.maxTileRow=parseInt(B.querySelector("MaxTileRow").textContent),F.minTileCol=parseInt(B.querySelector("MinTileCol").textContent),F.maxTileCol=parseInt(B.querySelector("MaxTileCol").textContent),F.complete=!0,R[k]=F)}if(R.length>0){n.tilingScheme=new T.tilingScheme({ellipsoid:T.ellipsoid,numberOfLevelZeroTilesX:R[0].maxWidth,numberOfLevelZeroTilesY:R[0].maxHeight});var N=v.querySelector("ResourceURL[format='"+d.format+"']");if(null!=N?l=N.getAttribute("template").replace("{TileRow}","{y}").replace("{TileCol}","{x}").replace("{Style}",s).replace("{TileMatrixSet}",O).replace("{layer}",a).replace("{infoFormatExtension}",d.extension):Cesium.defined(u)&&(l=u+"service=WMTS&request=GetTile&version=1.0.0&layer="+a+"&style="+s+"&format="+d.format+"&TileMatrixSet="+O+"&TileMatrix={TileMatrix}&TileRow={y}&TileCol={x}"),Cesium.defined(l)){n.getTileDataAvailable=function(e,t,n){var i=!1;if(n<o&&n<R.length){var a=R[n];i=a.complete?t<=a.maxTileRow&&t>=a.minTileRow&&e<=a.maxTileCol&&e>=a.minTileCol:e<a.maxWidth&&t<a.maxHeight}return i},n.URLtemplateImage=function(e,t,i){var a="";if(n.getTileDataAvailable(e,t,i)){var o=R[i];a=l.replace("{TileMatrix}",o.id)}return a};var D={width:R[0].tileWidth,height:R[0].tileHeight},j=R.filter(function(e){return e.tileWidth!=D.width||e.tileHeight!=D.height});0==j.length&&(n.imageSize=D),n.ready=!0}}}}return n};var l=function(t){if(!Cesium.defined(t))throw new Cesium.DeveloperError("description is required.");var n=new Cesium.Event,a=t.credit;"string"==typeof a&&(a=new Cesium.Credit(a)),this.ready=!1,this._readyPromise=Cesium.when.defer(),Cesium.defineProperties(this,{errorEvent:{get:function(){return n}},credit:{get:function(){return a}},hasVertexNormals:{get:function(){return!1}},readyPromise:{get:function(){return this._readyPromise.promise}}});var o=i.parser(t);e(o,this)};l.arrayToHeightmapTerrainData=function(e,t,n,i,a,o){"number"==typeof n&&(n={width:n,height:n});var r=i.postProcessArray(e,n,t.highest,t.lowest,t.offset);if(!Cesium.defined(r))throw new Cesium.DeveloperError("no good size");var s={buffer:r,width:n.width,height:n.height,childTileMask:o,structure:i.terrainDataStructure};if(a){for(var l=new Uint8Array(r.length),u=0;u<r.length;u++)r[u]<=0&&(l[u]=255);s.waterMask=l}return new Cesium.HeightmapTerrainData(s)},l.imageToHeightmapTerrainData=function(e,t,n,i,a,o){"number"==typeof n&&(n={width:n,height:n});for(var r=Cesium.getImagePixels(e,n.width,n.height),s=new Uint8Array(r.length/4),l=new Int16Array(r.length/4),u=0,c=0,d=0;d<r.length;d+=4){var f=r[d],p=r[d+1],h=r[d+2]>128,g=(f<<8|p)-t.offset-32768;g>t.lowest&&g<t.highest&&(h||o)?(l[d/4]=g,c+=g,u++):l[d/4]=0==u?0:c/u}var m={buffer:l,width:n.width,height:n.height,childTileMask:a,structure:{heightScale:1,heightOffset:0,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1}};if(i){for(var s=new Uint8Array(l.length),d=0;d<l.length;d++)l[d]<=0&&(s[d]=255);m.waterMask=s}return new Cesium.HeightmapTerrainData(m)},Cesium.GeoserverTerrainProvider=l}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(h[e.type]){var t=h[e.type](e);return t.legend=e.legend,t.config=e,t}throw new Error("Layer di tipo "+e.type+" non gestito")}Object.defineProperty(t,"__esModule",{value:!0}),t.create=void 0;var o=n(5),r=(i(o),n(157)),s=(i(r),n(115)),l=(i(s),n(156)),u=i(l),c=n(43),d=(i(c),n(154)),f=(i(d),n(183)),p=(i(f),n(87)),h=(i(p),{OSM:function(e){e.legend={label:"OpenStreetMap"};var t=new Cesium.OpenStreetMapImageryProvider({url:"https://a.tile.openstreetmap.org/",enablePickFeatures:!1});return t},ESRI_IMAGERY:function(e){e.legend={label:"ESRI Imagery"},e.name=e.type;var t=new Cesium.ArcGisMapServerImageryProvider({url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",enablePickFeatures:!1});return t},MAPBOX_STREETS:function(e){e.legend={label:"Mapbox Streets"};var t="pk.eyJ1IjoibGlndXJpYWRpZ2l0YWxlIiwiYSI6ImNqbzQzajk0bDEwa3EzcWt1ZThqazFqcGIifQ.dUhSMka7mXTD2inJGmlBMw",n=new Cesium.MapboxImageryProvider({mapId:"mapbox.streets",accessToken:t,enablePickFeatures:!1});return n},RL_ORTOFOTO_2016:function(){var e=new Cesium.WebMapServiceImageryProvider({url:"http://mapproxy.regione.liguria.it/mapproxy/1828/service",layers:"L5802",enablePickFeatures:!1,parameters:{format:"image/jpeg"}});return e},RL_CARTE_BASE:function(){var e=new Cesium.WebMapServiceImageryProvider({url:"http://mapproxy.regione.liguria.it/mapproxy/1623/service",layers:"C1623",enablePickFeatures:!1,parameters:{format:"image/jpeg"}});return e},TMS:function(e){return e.wmsParams.url=e.tmsParams.url.replace("tms","service"),h.WMS(e)},WMS:function(e){var t=e.minScale?(0,u.default)(e.minScale)-2:8,n=e.maxScale?(0,u.default)(e.maxScale)-1:20,i=e.wmsParams.url.replace("geoservizi.regione.liguria.it","geoservizi{s}.regione.liguria.it");e.minZoomLevel=t,e.maxZoomLevel=n;var a=e.wmsParams.name,o=e.queryable,r=Cesium.Rectangle.fromDegrees(7.45634025169431,43.5948638648273,10.0882423374134,44.8480709868961);e.extent_3857&&(r=GV.app.map.getCesiumRectangleFromEPSG3857(e.extent_3857));var s=new Cesium.WebMapServiceImageryProvider({url:i,layers:a,enablePickFeatures:o,parameters:{transparent:!0,tiled:!1,format:e.wmsParams.format},subdomains:["1","2"],rectangle:r,maximumLevel:n}),l=new Cesium.ImageryLayer(s,{minimumTerrainLevel:t});return l.config=e,l.layerName=e.wmsParams.name,l.show=e.visible,l}});t.create=a},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var o=n(306),r=a(o),s=n(97),l=i(s),u={type:"cesium",options:{},layers:[],baseLayers:[],initialExtent:[],buttons:[],viewerOptions:{baseLayerPicker:!1,animation:!1,fullscreenButton:!1,geocoder:!1,homeButton:!1,infoBox:!1,sceneModePicker:!1,selectionIndicator:!1,timeline:!1,navigationHelpButton:!1,navigationInstructionsInitiallyVisible:!1},viewer:null,terrainProviderURL:"https://geoservizi.regione.liguria.it/geoserver/DTM/ows",terrainProviderLayerName:"DTM_dbtopo_5m_wgs84",cesiumAccessToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI4MjlkNDBmNS1jMjU0LTQ0MzYtODllNy0wZTA1N2FmN2JkYjgiLCJpZCI6MjMxNTgsInNjb3BlcyI6WyJhc3IiLCJnYyJdLCJpYXQiOjE1ODI4MTEyMTh9.9i2qC1VoiACGU_PDGlOkvgi1cQL2DTDZbJdE9wCf8fo",initialize:function(e){if(this.options=e,"cesium"===this.options.type){Cesium.Ion.defaultAccessToken=this.cesiumAccessToken;n(305);this.viewerOptions.terrainProvider=new Cesium.GeoserverTerrainProvider({url:e.terrainProviderURL||this.terrainProviderURL,layerName:e.terrainProviderLayerName||this.terrainProviderLayerName}),this.viewer=new Cesium.Viewer("gv-cesium",this.viewerOptions),this.imageryLayers=this.viewer.scene.globe.imageryLayers,this.layers=this.imageryLayers._layers,this.setInitialExtent(),this.eventMngr(),this.loadBaseLayers(),this.options.navigationControl&&this.viewer.extend(Cesium.viewerCesiumNavigationMixin,{enableCompass:!0,enableZoomControls:!0,enableDistanceLegend:!1,enableCompassOuterRing:!0})}return this},layerInRange:function(e){if(!e.minScale&&!e.minScale)return!0;if(!this._zoom)return!0;var t=e.minZoomLevel<=this._zoom&&e.maxZoomLevel>=this._zoom;return t},eventMngr:function(){var e=this;this.viewer.camera.moveEnd.addEventListener(function(){var t=e.viewer.scene.globe._surface._tilesToRender,n=t&&t[0]?t[0]._level:null;e._zoom=n,GV.eventBus.$emit("map-zoom",e._zoom)});var t=!1;this.viewer.screenSpaceEventHandler.setInputAction(function(e){t=!1},Cesium.ScreenSpaceEventType.LEFT_DOWN),this.viewer.screenSpaceEventHandler.setInputAction(function(e){t=!0},Cesium.ScreenSpaceEventType.MOUSE_MOVE),this.viewer.screenSpaceEventHandler.setInputAction(function(n){if(!t){var i=e.viewer.scene.globe.ellipsoid,a=e.viewer.camera.pickEllipsoid(new Cesium.Cartesian3(n.position.x,n.position.y),i);if(a){var o=e.viewer.camera.getPickRay(new Cesium.Cartesian2(n.position.x,n.position.y)),r=e.viewer.imageryLayers.pickImageryLayerFeatures(o,e.viewer.scene),s=i.cartesianToCartographic(a);GV.eventBus.$emit("map-click",{mapType:"cesium",featuresPromise:r,latlng:l.default.latLng(s.latitude,s.longitude,s.height)})}}},Cesium.ScreenSpaceEventType.LEFT_UP),GV.eventBus.$on("set-layer-visible",function(t){e.setLayerVisible(t.layer,t.checked)}),GV.eventBus.$on("change-base-layer",function(t){e.changeBaseLayer(t.layer)})},getCesiumRectangleFromEPSG3857:function(e){var t=e.split(","),n=l.default.point(t[0],t[1]),i=l.default.point(t[2],t[3]),a=l.default.Projection.SphericalMercator.unproject(n),o=l.default.Projection.SphericalMercator.unproject(i);return Cesium.Rectangle.fromDegrees(a.lng,a.lat,o.lng,o.lat)},setInitialExtent:function(){var e=this.options.initialExtent||"830036,5402959,1123018,5597635",t=this.getCesiumRectangleFromEPSG3857(e);this.initialExtent=t,this.viewer.camera.setView({destination:t})},setExtent:function(e){var t=this.getCesiumRectangleFromEPSG3857(e);this.viewer.camera.setView({destination:t})},setLayerVisible:function(e,t){var n=this.getLayerByName(e.name);e.visible=t,n.show=t},loadBaseLayers:function(){var e=this;this.baseLayers=[],GV.config.baseLayers.forEach(function(t){var n=r.create(t);e.baseLayers[t.type]=n,n&&t.visible&&(e.imageryLayers.remove(e.imageryLayers.get(0)),e.imageryLayers.addImageryProvider(n,0),e.activeBaseLayer=n,GV.config.activeBaseLayer=t.name)},this)},removeLayer:function(e){this.imageryLayers.remove(e)},changeBaseLayer:function(e){var t=GV.config.getActiveBaseLayer().name;t!==e&&(this.imageryLayers.remove(this.imageryLayers.get(0)),this.imageryLayers.addImageryProvider(this.baseLayers[e],0),this.activeBaseLayer=this.baseLayers[e],GV.config.setActiveBaseLayer(e))},loadLayers:function(e){var t=this,n=e.map(function(e){return e});n.reverse().forEach(function(e){var n=r.create(e);t.viewer.imageryLayers.add(n)})},getLayerByName:function(e){if("InfoWmsHilite"===e)return this.viewer.dataSources.getByName("InfoWmsHilite")[0];var t=null;return this.layers.forEach(function(n){n.config&&n.config.name&&n.config.name===e&&(t=n)}),t},addMarker:function(e){var t=this;e.epsg&&"4326"!=e.epsg?getCoordTransform(e.epsg,"4326",e.location[1],e.location[0]).then(function(n){if(n.data.points){var i=n.data.points[0].split(",")[0],a=n.data.points[0].split(",")[1];e.location=[a,i],t.addMarkerToMap(e)}}):this.addMarkerToMap(e)},addMarkerToMap:function(e){this.viewer.entities.remove(this.viewer.entities.getById("geocoder")),this.viewer.entities.add({id:"geocoder",position:Cesium.Cartesian3.fromDegrees(e.location.lng,e.location.lat),point:{pixelSize:7,color:new Cesium.Color(1,.55,0,.6)},label:{text:e.label||"",font:"8pt monospace",style:Cesium.LabelStyle.FILL,backgroundColor:Cesium.Color.BLUE,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,pixelOffset:new Cesium.Cartesian2(0,-9)}}),this.viewer.zoomTo(this.viewer.entities,new Cesium.HeadingPitchRange(0,-90,3e3))}};t.default=u},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(42),o=(i(a),n(41)),r=i(o),s=n(81),l=(i(s),n(6)),u=(i(l),n(74)),c=i(u),d=n(66),f=i(d),p=n(40),h=i(p),g=n(39),m=i(g),v=n(1),_=i(v),y=n(5),b=i(y),L=n(148),w=i(L),C=n(147),M=i(C),x=n(325),S=i(x),E=n(333),I=i(E),T=n(60),A=i(T),O=n(7),G=i(O),P=n(150),R=(i(P),n(625)),V=i(R);_.default.component("gv-conferma-dettaglio",V.default),t.default={_lastZIndex:21,debug:!1,containerId:"gv-container",idMap:null,title:null,findOptions:null,zoomTo:null,geoserverUrl:null,application:{},baseLayers:[{type:"ESRI_IMAGERY",visible:!0}],activeBaseLayer:"ESRI_IMAGERY",maps:[],hilitedLayer:[],init:function(e){var t=this;return(0,m.default)(h.default.mark(function n(){var i,a,o;return h.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}throw new Error("Opzioni di inizializzazione non impostate!");case 2:if(t.debug=e.debug,t.idMap=e.idMap,t.findOptions=e.findOptions,t.zoomTo=e.zoomTo,t.disableTMS=e.disableTMS,t.disableCache=e.disableCache,t.flagGeoserver=e.flagGeoserver,t.agAppMap=e.agAppMapList,e.application&&(t.application=e.application),e.containerId&&(t.containerId=e.containerId),t.application.layout=e.application&&e.application.layout?e.application.layout:{},e.application&&(t.application.proxy=e.application.proxy||b.default.DEFAULT_PROXY),e.application&&e.application.layout&&e.application.layout.title&&(t.title=e.application.layout.title),t.setBaseLayers(e.baseLayers),t.initLoadedMaps=0,t.initLoadingMaps=1,!e.agAppMapList){n.next=25;break}return n.next=21,(0,S.default)(e.agAppMapList);case 21:i=n.sent,t.agAppMapList=i,a=i.map(function(e){return e.id}),t.loadMaps(a);case 25:e.idMap&&(o=e.idMap.toString().split(","),t.loadMaps(o)),e.idMap||e.agAppMap||GV.eventBus.$on("gv-app-mounted",function(n){e.maps.forEach(function(e){t.addMapConfig(e,null)}),t.application&&t.application.callback&&t.application.callback(n)}),GV.eventBus.$on("map-zoom",function(e){var n=t.getLayersConfig();n.forEach(function(e){t.setLayerAttribute(e.name,"inRange",GV.app.map.layerInRange(e))})});case 28:case"end":return n.stop()}},n,t)}))()},loadMaps:function(e){var t=this;this.initLoadingMaps=e.length,e.forEach(function(e){t.addRlMap(e,!0,!1)}),GV.eventBus.$on("gv-config-init",function(e){t.application&&t.application.callback&&t.application.callback(e)})},setBaseLayers:function(e){var t=this;this.baseLayers=[],e.forEach(function(e){e.name=e.type,e.label=b.default.BASE_LAYERS[e.type].label,e.icon=b.default.BASE_LAYERS[e.type].icon,e.printType=b.default.BASE_LAYERS[e.type].printType,t.baseLayers.push(e),e.visible&&(t.activeBaseLayer=e.name)})},changeBaseLayers:function(e){var t=this;GV.app.map.removeLayer(GV.app.map.activeBaseLayer),this.baseLayers.splice(0),e.forEach(function(e){e.name=e.type,e.label=b.default.BASE_LAYERS[e.type].label,e.icon=b.default.BASE_LAYERS[e.type].icon,t.baseLayers.push(e),e.visible&&(t.activeBaseLayer=e.name,GV.baseLayerSwitcher&&(GV.baseLayerSwitcher.activeBaseLayer=e.name))}),GV.app.map.loadBaseLayers()},setLayerconfig:function(e,t){e.extent_3857=t.extent_3857;var n=e.minScale?" da 1:"+e.minScale:" fino",i=e.maxScale?" a 1:"+e.maxScale:"";return e.scaleRangeLabel="Visibile"+n+i,e.minScale=0===e.minScale?591657550:e.minScale,e.inRange=!GV.app||!GV.app.map||GV.app.map.layerInRange(e),e.opacityBase100=100*e.opacity,e.zIndex=this._lastZIndex++,this.setLayerType(e),this.setLayerCache(e),e},setLayerType:function(e){this.disableTMS&&e.idMap==this.idMap&&"TMS"===e.type&&(e.type="WMS")},setLayerCache:function(e){this.disableCache&&e.idMap==this.idMap&&"WMS"===e.type&&(e.cacheMinZoomLevel=null)},addMapConfig:function(e,t){var n=this;if(e.ancillaryMaps&&e.ancillaryMaps.forEach(function(t){t.extent_3857=null,n.addMapConfig(t,e)}),e.layers=e.layers.filter(function(e){return!e.flagBaseVectorLayer}),e.layers.forEach(function(t){n.setLayerconfig(t,e)}),e.layers.reverse(),e.addLayerConfig&&this.getMapConfig(e.id))e.layers.forEach(function(t){n.getMapConfig(e.id).layers.push(t)});else{if(this.getMapConfig(e.id))return;t&&(this.application.layout.legend.options.hideAncillaryMapLegend||t.hideAncillaryMapLegend)?e.showLayersInLegend=!1:e.showLayersInLegend=!0,this.maps.unshift(e)}GV.eventBus.$emit("config-add-map",{config:e})},setLayerAttribute:function(e,t,n){this.maps.forEach(function(i){var a=i.layers;a.forEach(function(i){i.name===e&&(i[t]=n)})})},removeMap:function(e){var t=this.getMapConfig(e);if(t){GV.eventBus.$emit("config-remove-map",{config:t});var n=this.maps.findIndex(function(t){return t.id===e});n>-1&&this.maps.splice(n,1)}},removeLayer:function(e){var t=this;this.maps.forEach(function(n){var i=-1;n.layers.forEach(function(t,n){t.name===e&&(i=n)}),i>-1&&n.layers.splice(i,1),0===n.layers.length&&t.removeMap(n.id)}),GV.eventBus.$emit("config-remove-layer",{config:e})},addLayerToMap:function(e,t){var n=this,i=(0,f.default)({},e);this.maps.forEach(function(e){if(e.id===t){var a=n.getMapConfig(t);n.isLayerInMapConfig(i,a)||(n.setLayerconfig(i,a),e.layers.unshift(i))}}),GV.eventBus.$emit("config-add-layer",{config:i})},isLayerInMapConfig:function(e,t){var n=t.layers.filter(function(t){return t.name===e.name});return n.length>0},setFlagVisible:function(e){if(this.agAppMap){var t=this.agAppMapList.filter(function(t){return t.id===e.id.toString()});t&&t[0]&&!t[0].visible&&e.layers.forEach(function(e){e.visible=!1})}},addRlMap:function(e,t,n){var i=this;return(0,m.default)(h.default.mark(function a(){var o,r,s;return h.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!i.getMapConfig(e)){a.next=2;break}return a.abrupt("return",i.getMapConfig(e));case 2:return a.prev=2,a.next=5,(0,w.default)(e);case 5:if(o=a.sent,o.data.success){a.next=8;break}throw new Error("Errore Caricamento Mappa: "+o.data.message);case 8:if(o.data.data){a.next=10;break}throw new Error("Errore Caricamento Mappa: configurazione non trovata");case 10:return b.default.SYS_MANUTENZIONE_DOWNLOAD=o.data.sistema&&o.data.sistema.manutenzioneDownload,r=o.data.data,r.fileDettaglio&&!n?(s="Condizioni di utilizzo",(0,G.default)({elId:"gv-conferma-dettaglio",containerId:i.containerId,vm:new _.default({template:'<gv-conferma-dettaglio idMap="'+e+'" label="'+s+'" link="'+r.fileDettaglio+'"></gv-conferma-dettaglio>'})})):i.loadConfig(r,t),a.abrupt("return",r);case 16:a.prev=16,a.t0=a.catch(2),console.error(a.t0),c.default.error({title:"Attenzione",type:"error",duration:5e3,offset:70,position:"bottom-left",message:a.t0.message});case 20:case"end":return a.stop()}},a,i,[[2,16]])}))()},loadConfig:function(e,t){this.setFlagVisible(e),this.addMapConfig(e,null),GV.app&&GV.app.map&&e.type&&"R"==e.type&&t&&this.getBaseLayerConfig("BLANK")&&(GV.app.map.changeBaseLayer("BLANK"),GV.baseLayerSwitcher&&(GV.baseLayerSwitcher.activeBaseLayer="BLANK")),e.baseLayers&&e.baseLayers.length>0&&this.changeBaseLayers(e.baseLayers),e.activeBaseLayer&&(GV.app.map.changeBaseLayer(e.activeBaseLayer),GV.baseLayerSwitcher&&(GV.baseLayerSwitcher.activeBaseLayer=e.activeBaseLayer)),GV.config.findOptions&&GV.app.map.find(GV.config.findOptions),GV.config.zoomTo&&this.zoomToCoord(GV.config.zoomTo),this.initLoadedMaps=this.initLoadedMaps+1,this.initLoadingMaps===this.initLoadedMaps&&GV.eventBus.$emit("gv-config-init",GV.app)},zoomToCoord:function(e){var t=this;return(0,m.default)(h.default.mark(function n(){var i,a,o,s,l,u;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.coord){t.next=3;break}return console.error("Parametro COORD non impostato"),t.abrupt("return");case 3:if(e.epsg||(e.epsg=3003),e.zoom||(e.zoom=16),i=e.coord.split(",")[0],a=e.coord.split(",")[1],4326===e.epsg||4258===e.epsg){t.next=16;break}return o=r.default.service({text:"Ricerca...",background:"rgba(0, 0, 0, 0.8)"}),t.next=11,(0,A.default)(e.epsg,"4326",i,a);case 11:s=t.sent,s.data.points&&(l=s.data.points[0].split(",")[0],u=s.data.points[0].split(",")[1],GV.app.map.addMarker({location:[u,l],zoomLevel:e.zoom})),o.close(),t.next=17;break;case 16:GV.app.map.addMarker({location:[a,i],zoomLevel:e.zoom});case 17:case"end":return t.stop()}},n,t)}))()},loadCatalog:function(e){var t=this;return(0,m.default)(h.default.mark(function n(){var i,a;return h.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,M.default)(e);case 2:return i=n.sent,t.catalog=t.catalogFull=i.children,n.next=6,(0,I.default)();case 6:a=n.sent,t.enti=a,e.showMapCatalogPanel&&(0,G.default)({elId:"gv-map-catalog-panel",toggleEl:!1,vm:new _.default({template:"<gv-map-catalog-panel></gv-map-catalog-panel>"})});case 9:case"end":return n.stop()}},n,t)}))()},getLayersConfig:function(e){var t=[];return this.maps.forEach(function(n){if(e){var i=n.layers.filter(e);i.forEach(function(e){t.push(e)})}else n.layers.forEach(function(e){t.push(e)})}),t},getLayersNameByMapId:function(e){if(!e)return console.error('Parametro "idMap" non definito'),null;var t=[];return this.maps.forEach(function(n){n.id.toString()===e&&n.layers.forEach(function(n){n.idMap.toString()===e&&t.push(n.name)})}),t},getLayerConfig:function(e){var t=null;return this.maps.forEach(function(n){n.layers.forEach(function(n){n.name===e&&(t=n)})}),t},getBaseLayerConfig:function(e){var t=this.baseLayers.find(function(t){return t.name===e});return t},getMapConfig:function(e){return this.maps.find(function(t){return t.id==e})},getToolOptions:function(e){var t=null;return this.application.layout&&this.application.layout.tools?(this.application.layout.tools.forEach(function(n){n.name===e&&n.options&&(t=n.options)}),t):null},getButtonOptions:function(e){var t=null;return this.application.layout&&this.application.layout.toolbar?(this.application.layout.toolbar.items.forEach(function(n){n.name===e&&n.options&&(t=n.options)}),t):null},getActiveBaseLayer:function(){var e=null;return this.baseLayers.forEach(function(t){t.visible&&(e=t)}),e},setActiveBaseLayer:function(e){this.baseLayers.forEach(function(t){t.visible=t.name===e})}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(7),s=i(r),l=n(1),u=i(l);u.default.component("gv-draw-panel",function(){return new o.default(function(e){n.e(12,function(t){e(n(630))})})});var c={id:"draw",active:!1,latlng:null,activate:function(){GV.log("GV.controls.draw.activate"),GV.eventBus.$emit("gv-control-draw-activate",this),this.active=!0,this.openPanel()},deactivate:function(){GV.log("GV.controls.draw.deactivate"),GV.eventBus.$emit("gv-control-draw-deactivate",this),this.active=!1,this.closePanel()},openPanel:function(){(0,s.default)({elId:"gv-draw-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new u.default({template:"<gv-draw-panel></gv-draw-panel>"})})},closePanel:function(){document.getElementById("gv-draw-panel").style.display="none"}};t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(7),s=i(r),l=n(1),u=i(l);u.default.component("gv-fototeca-selezione-territoriale-panel",function(){
return new o.default(function(e){n.e(18,function(t){e(n(632))})})});var c={id:"fototeca-selezione-territoriale",active:!1,latlng:null,activate:function(){GV.log("GV.controls.fototeca-selezione-territoriale.activate"),this.openPanel(),GV.eventBus.$emit("gv-control-fototeca-selezione-territoriale-activate",this),this.active=!0},deactivate:function(){GV.log("GV.controls.fototeca-selezione-territoriale.deactivate"),GV.eventBus.$emit("gv-control-fototeca-selezione-territoriale-deactivate",this),this.active=!1,this.closePanel()},openPanel:function(){(0,s.default)({elId:"gv-fototeca-selezione-territoriale-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new u.default({template:"<gv-fototeca-selezione-territoriale-panel></gv-fototeca-selezione-territoriale-panel>"})})},closePanel:function(){document.getElementById("gv-fototeca-selezione-territoriale-panel").style.display="none"}};t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(7),s=i(r),l=n(1),u=i(l);u.default.component("gv-genio-seleziona-particelle-panel",function(){return new o.default(function(e){n.e(16,function(t){e(n(637))})})});var c={id:"genio-seleziona-particelle",active:!1,latlng:null,activate:function(){GV.log("GV.controls.genio-seleziona-particelle.activate"),this.openPanel(),GV.eventBus.$emit("gv-control-genio-seleziona-particelle-activate",this),this.active=!0},deactivate:function(){GV.log("GV.controls.genio-seleziona-particelle.deactivate"),GV.eventBus.$emit("gv-control-genio-seleziona-particelle-deactivate",this),this.active=!1,this.closePanel()},openPanel:function(){(0,s.default)({elId:"gv-genio-seleziona-particelle-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new u.default({template:"<gv-genio-seleziona-particelle-panel></gv-genio-seleziona-particelle-panel>"})})},closePanel:function(){document.getElementById("gv-genio-seleziona-particelle-panel").style.display="none"}};t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(7),s=i(r),l=n(1),u=i(l);u.default.component("gv-measure-panel",function(){return new o.default(function(e){n.e(13,function(t){e(n(660))})})});var c={id:"coordinate",active:!1,latlng:null,activate:function(){GV.log("GV.controls.measure.activate"),GV.eventBus.$emit("gv-control-measure-activate",this),this.active=!0,this.openPanel()},deactivate:function(){GV.log("GV.controls.measure.deactivate"),GV.eventBus.$emit("gv-control-measure-deactivate",this),this.active=!1,this.closePanel()},openPanel:function(){(0,s.default)({elId:"gv-measure-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new u.default({template:"<gv-measure-panel></gv-measure-panel>"})})},closePanel:function(){document.getElementById("gv-measure-panel").style.display="none"}};t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(1),o=i(a);o.default.directive("draggable",{inserted:function(e,t,n){var i=e.id.replace("-title","");e.className+=" draggable",e.setAttribute("draggable","true"),e.setAttribute("ondragstart","GV.dragbox.start(event)"),e.setAttribute("ondragend","GV.dragbox.end(event,'"+i+"')")}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=void 0;if(t){var i=t.geomField||"location",a=e.hits.hits;n={type:"FeatureCollection",totalFeatures:e.hits.total,features:[],crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4326"}}},a.forEach(function(e){var t=e._source[i];n.features.push({type:"Feature",id:e._id,geometry:{type:"Point",coordinates:t},geometry_name:"GEOMETRY",properties:e._source})})}else n="string"==typeof e?JSON.parse(e):e;return n}function o(e,t){if(T[e.type]){var n=T[e.type](e,t);return n.legend=e.legend,n.config=e,n}throw new Error("Layer di tipo "+e.type+" non gestito")}Object.defineProperty(t,"__esModule",{value:!0}),t.create=void 0;var r=n(61),s=i(r),l=n(66),u=i(l),c=n(97),d=i(c),f=n(5),p=i(f),h=n(157),g=i(h),m=n(115),v=i(m),_=n(156),y=i(_),b=n(43),L=i(b),w=n(154),C=i(w),M=n(183),x=i(M),S=n(87),E=i(S);n(316),n(317),n(320);var I='<a href="https://www.esri.com/">Esri</a>',T={BLANK:function(e){return e.legend={label:"Sfondo Bianco"},d.default.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{opacity:0,maxZoom:20})},OSM:function(e){return e.legend={label:"OpenStreetMap"},d.default.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data © <a href="https://openstreetmap.org">OpenStreetMap</a> contributors',maxZoom:20})},ESRI_IMAGERY:function(e){e.legend={label:"ESRI Imagery"},e.name=e.type;var t="DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community";return d.default.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"&copy; "+I+", "+t,maxZoom:20})},ESRI_STREETS:function(e){e.legend={label:"ESRI Streets"},e.name=e.type;var t="USGS, NOAA";return d.default.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"&copy; "+I+", "+t,maxZoom:20})},ESRI_TOPOGRAPHIC:function(e){e.legend={label:"ESRI Topographic"},e.name=e.type;var t="USGS, NOAA";return d.default.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"&copy; "+I+", "+t,maxZoom:20})},ESRI_GRAY:function(e){e.legend={label:"ESRI Gray"},e.name=e.type;var t="HERE, DeLorme, MapmyIndia, OpenStreetMap contributors";return d.default.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"&copy; "+I+", "+t,maxZoom:16})},ESRI_DARKGRAY:function(e){e.legend={label:"ESRI Dark Gray"},e.name=e.type;var t="HERE, DeLorme, MapmyIndia, OpenStreetMap contributors";return d.default.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"&copy; "+I+", "+t,maxZoom:16})},MAPBOX:function(e){var t=e.mapboxConfig.userName,n=e.mapboxConfig.accessToken,i=e.mapboxConfig.style;return d.default.tileLayer("https://api.mapbox.com/styles/v1/"+t+"/"+i+"/tiles/256/{z}/{x}/{y}?access_token="+n,{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",maxZoom:20})},MAPBOX_VIABILITA:function(e){var t="liguriadigitale",n="pk.eyJ1IjoibGlndXJpYWRpZ2l0YWxlIiwiYSI6ImNqbzQzajk0bDEwa3EzcWt1ZThqazFqcGIifQ.dUhSMka7mXTD2inJGmlBMw",i="cjo442ih3407m2slfdwc1hib5",a="Carta della Viabilità";return e.legend={label:a},d.default.tileLayer("https://api.mapbox.com/styles/v1/"+t+"/"+i+"/tiles/256/{z}/{x}/{y}?access_token="+n,{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",maxZoom:20})},MAPBOX_MONOCHROME:function(e){var t="liguriadigitale",n="pk.eyJ1IjoibGlndXJpYWRpZ2l0YWxlIiwiYSI6ImNqbzQzajk0bDEwa3EzcWt1ZThqazFqcGIifQ.dUhSMka7mXTD2inJGmlBMw",i="ckgj8eqz80t8q19theln5gwrk",a="Mapbox Monochrome";return e.legend={label:a},d.default.tileLayer("https://api.mapbox.com/styles/v1/"+t+"/"+i+"/tiles/256/{z}/{x}/{y}?access_token="+n,{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",maxZoom:20})},MAPBOX_STREETS:function(e){var t="liguriadigitale",n="pk.eyJ1IjoibGlndXJpYWRpZ2l0YWxlIiwiYSI6ImNqbzQzajk0bDEwa3EzcWt1ZThqazFqcGIifQ.dUhSMka7mXTD2inJGmlBMw",i="ckgj8f25p0o6y19jxk0ykap41",a="Mapbox Streets";return e.legend={label:a},d.default.tileLayer("https://api.mapbox.com/styles/v1/"+t+"/"+i+"/tiles/256/{z}/{x}/{y}?access_token="+n,{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",maxZoom:20})},MAPBOX_VIABILITA_SATELLITARE:function(e){var t="liguriadigitale",n="pk.eyJ1IjoibGlndXJpYWRpZ2l0YWxlIiwiYSI6ImNqbzQzajk0bDEwa3EzcWt1ZThqazFqcGIifQ.dUhSMka7mXTD2inJGmlBMw",i="cjo43w54x00di2spieg5itsgf",a="Carta ibrida";return e.legend={label:a},d.default.tileLayer("https://api.mapbox.com/styles/v1/"+t+"/"+i+"/tiles/256/{z}/{x}/{y}?access_token="+n,{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",maxZoom:20})},STAMEN_TERRAIN:function(e){return e.legend={label:"Stamen Terrain"},d.default.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}.{ext}",{attribution:'Map tiles by <a href="https://stamen.com">Stamen Design</a>, <a href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"})},STAMEN_TONER_LIGHT:function(e){return e.legend={label:"Stamen Toner Light"},d.default.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.{ext}",{attribution:'Map tiles by <a href="https://stamen.com">Stamen Design</a>, <a href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"})},RL_ORTOFOTO_2013:function(){return this.TMS({visible:!1,tmsParams:{name:"L4419/webmercator",url:"http://mapproxy.regione.liguria.it/mapproxy/1661/tiles/"},zIndex:1,attribution:"Immagine di proprietà AGEA"})},RL_ORTOFOTO_2010:function(){return this.TMS({visible:!1,tmsParams:{name:"L3861/webmercator",url:"http://mapproxy.regione.liguria.it/mapproxy/1505/tiles/"},zIndex:1,attribution:"Immagine di proprietà AGEA"})},RL_ORTOFOTO_2007:function(){return this.TMS({visible:!1,tmsParams:{name:"L3463/webmercator",url:"http://mapproxy.regione.liguria.it/mapproxy/1361/tiles/"},zIndex:1,attribution:"Immagine di proprietà AGEA"})},RL_ORTOFOTO_2000_OLD:function(){return this.TMS({visible:!1,tmsParams:{name:"L48/webmercator",url:"http://mapproxy.regione.liguria.it/mapproxy/48/tiles/"},zIndex:1,attribution:"Immagine di proprietà AGEA"})},RL_CARTE_BASE_OLD:function(){return this.TMS({visible:!1,tmsParams:{name:"C1623/webmercator",url:"http://mapproxy.regione.liguria.it/mapproxy/1623/tiles/"},zIndex:1,attribution:"Regione Liguria"})},RL_CARTE_BASE_NC25:function(){return this.WMS({visible:!1,name:"L7273",cacheMinZoomLevel:12,maxScale:1e4,minScale:2e5,wmsParams:{name:"L7273",format:"image/jpeg",url:"https://geoservizi.regione.liguria.it/geoserver/M2125/wms?"},zIndex:1,attribution:"Regione Liguria"})},RL_CARTE_BASE:function(){return this.WMS({visible:!1,name:"CARTE_DI_BASE",cacheMinZoomLevel:8,wmsParams:{name:"CARTE_DI_BASE",format:"image/jpeg",url:"https://geoservizi.regione.liguria.it/geoserver/wms?"},zIndex:1,attribution:"Regione Liguria"})},RL_ORTOFOTO_2016_OLD:function(){return this.TMS({visible:!1,tmsParams:{name:"L5802/webmercator",url:"http://mapproxy.regione.liguria.it/mapproxy/1828/tiles/"},attribution:"Ortofoto 20cm/ ©2016 CONSORZIO TeA - TUTTI I DIRITTI RISERVATI",zIndex:1})},RL_ORTOFOTO_2016:function(){return this.WMS({visible:!1,name:"ORTOFOTO",cacheMinZoomLevel:8,wmsParams:{name:"L5802",format:"image/jpeg",url:"https://geoservizi.regione.liguria.it/geoserver/wms?"},zIndex:1,attribution:"Ortofoto 20cm/ ©2016 CONSORZIO TeA - TUTTI I DIRITTI RISERVATI"})},TMS:function(e){var t=e.tmsParams.url.replace("/tms/","/tiles/"),n=e.tmsParams.name,i=e.attribution,a=t+"/1.0.0/"+n+"/{z}/{x}/{y}.png",o=e.maxScale?(0,y.default)(e.maxScale)-1:20,r=d.default.tileLayer(a,{minZoom:1,maxZoom:o,attribution:i});return r.setZIndex(e.zIndex),r.name=n.replace("/webmercator",""),r},WMS:function(e){var t=e.name,n=e.cacheMinZoomLevel,i=e.minScale,a=e.maxScale,o=e.wmsParams,r=(e.flagGeoserver,e.zIndex);GV.log("layerFactory - Creazione Layer WMS: "+t);var s=null,l=!!n,c=o.format,f=e.opacity||1;e.minZoom=i?(0,y.default)(i):8,e.maxZoom=a?(0,y.default)(a)-1:20;var h={subdomains:["1","2"],transparent:!0,layers:o.name,format:c,styles:o.styles||"",opacity:f,minZoom:e.minZoom,maxZoom:e.maxZoom,bounds:d.default.latLngBounds(d.default.latLng(p.default.MAX_BOUNDS.X_MIN,p.default.MAX_BOUNDS.Y_MIN),d.default.latLng(p.default.MAX_BOUNDS.X_MAX,p.default.MAX_BOUNDS.Y_MAX)),client:"GV2"};o.cql_filter&&(h.cql_filter=o.cql_filter),o.sld&&(h.sld=o.sld);var g=o.url;if(l){p.default.USE_SUBDOMAINS&&g.indexOf("geoservizi.regione.liguria.it")>0&&(g=g.replace("geoservizi","geoservizi{s}"));var m=g.indexOf("geoservizi.datasiel.net")>0?e.cacheVersionTest:e.cacheVersion;(0,u.default)(h,{tiled:!0,TILESORIGIN:"-20037508,-20037508",tileSize:256,CACHE_VERSION:m}),s=d.default.tileLayer.wms(g,h),s.on("tileerror",function(e){(0,C.default)(e.tile.currentSrc).then(function(e){console.error("ERRORE WMS"),e&&e.ServiceExceptionReport&&console.log(e.ServiceExceptionReport.ServiceException)}).catch(function(e){return console.error(e)})})}else(0,u.default)(h,{tiled:!1,pane:"tilePane"}),s=d.default.nonTiledLayer.wms(g,h),s.on("error",function(e){(0,C.default)(e.target.url).then(function(e){console.error("ERRORE WMS"),console.log(e.ServiceExceptionReport.ServiceException)}).catch(function(e){return console.error(e)})});return s.setZIndex(r),s.type="WMS",s.name=t,s},JSON:function(e){function t(e){var t=[];(0,s.default)(e.feature.properties).forEach(function(n){if("stroke"!==n&&"stroke-opacity"!==n&&"stroke-width"!==n&&"fill"!==n&&"fill-opacity"!==n){var i=e.feature.properties[n];("string"==typeof i||i instanceof String||"number"==typeof i)&&t.push({key:n,value:i})}});var n="<div><b>"+C.label+"</b><br><br></div>";return n+="<div>",t.forEach(function(e){n+=e.key+":"+e.value+"<br>"}),n+="</div>"}var n=e.data,i=e.url,o=e.name,r=e.wfsParams,l=e.esParams,c=e.classes,f=e.style,p=e.pointToLayer,h=e.tooltip,m=e.popup,_=e.basePopup,y=e.customPopup,b=e.cluster,w=e.subType,C=e.legend,M=e.onEachFeature,S=null,I={};c&&c.length>0&&("POINT"===e.geomSubType?I.pointToLayer=function(e,t){var n;if(c.forEach(function(t){t.filter&&t.filter.key&&t.filter.value?e.properties[t.filter.key]===t.filter.value&&(n=t.style):n=t.style}),n.iconUrl){var i;switch(n.iconUrl){case"default":i=d.default.icon({iconUrl:"/geoservices/apps/viewer/dist/static/img/marker-icon.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[0,-41]});break;case"default-small":i=d.default.icon({iconUrl:"/geoservices/apps/viewer/dist/static/img/marker-icon.png",iconSize:[12,20],iconAnchor:[6,10],popupAnchor:[0,-20]});break;default:i=d.default.icon({iconUrl:n.iconUrl,iconSize:n.iconSize,iconAnchor:n.iconAnchor,popupAnchor:n.popupAnchor})}return d.default.marker(t,{icon:i})}return d.default.circleMarker(t,n)}:I.style=function(e){var t;return c.forEach(function(n){n.filter&&n.filter.key&&n.filter.value?e.properties[n.filter.key]===n.filter.value&&(t=n.style):t=n.style}),t},I.filter=function(e){var t=!1;return c.forEach(function(n){n.filter?n.filter.key&&n.filter.value&&e.properties[n.filter.key]===n.filter.value&&(t=!0):t=!0}),t}),f&&(I.style=f),p&&(I.pointToLayer=p),(h||m||_||y)&&(I.onEachFeature=function(e,n){h&&(n.options.title=(0,g.default)(h,e.properties)),m&&n.bindPopup((0,g.default)(m,e.properties)),_&&n.bindPopup(t),y&&n.bindPopup(y)}),M&&(I.onEachFeature=M);var T=d.default.geoJson(n,I);T.name=o,T.setFilter=function(e){T.filter=e,e?T.eachLayer(function(t){var n=0;e.forEach(function(e){t.feature.properties[e.key]===e.value&&(n=T.config.opacity||1)}),t.setOpacity(n)}):T.eachLayer(function(e){var t=T.config.opacity||1;e.setOpacity(t)})};var A;if(r&&r.typeName&&r.url&&(A={service:"WFS",version:"2.0.0",request:"GetFeature",srsName:"EPSG:4326",outputFormat:"text/javascript",format_options:"callback: getJson",typeName:r.typeName},i=r.url+(0,v.default)(A)),l&&(A={},l.field?(A.q=l.field+":",l.query?A.q+=l.query:A.q+="*"):l.query&&(A.q=l.query),A.pretty="true",A.size=1e5,i=GV.config.application.proxy+l.url+(0,v.default)(A)),b){var O={showCoverageOnHover:!1};b.options&&(0,u.default)(O,b.options),S=d.default.markerClusterGroup(O),S.name=o}return i&&(0,L.default)(i).then(function(e){var t=void 0;if("KML"===w){var n=(0,E.default)(e.data);t=x.default.kml(n)}else if("GPX"===w){var i=(0,E.default)(e.data);t=x.default.gpx(i)}else t=a(e.data,l);T.addData(t),b&&S.addLayer(T),T.fire("ready"),GV.eventBus.$emit("layer-loaded-json",T)}).catch(function(e){return console.error(e)}),n&&b&&(S.addLayer(T),h&&(S.options.title=(0,g.default)(h,feature.properties)),m&&S.bindPopup((0,g.default)(m,feature.properties)),_&&S.bindPopup(t),y&&S.bindPopup(y)),b?S:T},PBF:function(e){e.pbfParams||console.error("Parametri per layer di tipo PBF non impostati");var t=e.pbfParams.url,n={rendererFactory:d.default.canvas.tile,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="https://www.mapbox.com/about/maps/">MapBox</a>',vectorTileLayerStyles:e.pbfParams.style,token:e.pbfParams.token,interactive:!0},i=d.default.vectorGrid.protobuf(t,n);return i.name=e.name,i}};t.create=o},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(42),r=(a(o),n(6)),s=(a(r),n(41)),l=a(s),u=n(66),c=a(u),d=n(5),f=a(d),p=n(314),h=i(p),g=n(97),m=a(g),v=n(36),_=a(v),y=n(364),b=a(y),L=n(31),w=a(L),C=n(60),M=a(C),x=n(149),S=a(x),E=n(21),I=a(E),T=m.default.Map.extend({layers:[],baseLayers:[],initialExtent:[],buttons:[],mapOptions:{zoomControl:!1,minZoom:7,maxZoom:20},initialize:function(){(0,c.default)(this.mapOptions,GV.config.application.mapOptions),GV.config.application.mapOptions&&GV.config.application.mapOptions.disableMaxBounds||(this.mapOptions.maxBounds=m.default.latLngBounds(m.default.latLng(f.default.MAX_BOUNDS.X_MIN,f.default.MAX_BOUNDS.Y_MIN),m.default.latLng(f.default.MAX_BOUNDS.X_MAX,f.default.MAX_BOUNDS.Y_MAX)),this.mapOptions.maxBoundsViscosity=1),m.default.Map.prototype.initialize.call(this,"gv-map",m.default.extend(m.default.Map.prototype.options,this.mapOptions)),this.type="leaflet",this.setInitialExtent(),this.setRestrictedExtent(),this.setLoading(),this.loadBaseLayers(),this.loadControls(),this.eventMngr()},eventMngr:function(){var e=this;this.on("zoom",function(){GV.eventBus.$emit("map-zoom",e._zoom)}),GV.eventBus.$on("set-layer-visible",function(t){e.setLayerVisible(t.layer,t.checked),e.setHiliteLayerVisible(t)}),GV.eventBus.$on("set-layer-transparency",function(t){var n=e.getLayerByName(t.layerName);n&&n.setOpacity&&n.setOpacity(t.opacity)}),GV.eventBus.$on("change-base-layer",function(t){e.changeBaseLayer(t.layer)})},setHiliteLayerVisible:function(e){var t=this;GV.config.hilitedLayer&&GV.config.hilitedLayer.forEach(function(n){if(n===e.layer.name){var i=t.getLayerByName("InfoWmsHilite");i.eachLayer(function(t){var n=e.checked?.6:0;t.setStyle({opacity:n})})}})},projToGeoBounds:function(e){var t=e.split(","),n=m.default.point(t[0],t[1]),i=m.default.point(t[2],t[3]),a=m.default.Projection.SphericalMercator.unproject(n),o=m.default.Projection.SphericalMercator.unproject(i);return m.default.latLngBounds(a,o)},setExtent:function(e){this.initialExtent=this.projToGeoBounds(e),this.fitBounds(this.initialExtent)},setInitialExtent:function(){var e=this.mapOptions.initialExtent||"830036,5402959,1123018,5597635";this.setExtent(e)},setRestrictedExtent:function(){this.options.restrictedExtent&&(this.restrictedExtent=this.projToGeoBounds(this.options.restrictedExtent),this.setMaxBounds(this.restrictedExtent))},getExtent:function(){var e=this.getBounds().getSouthWest(),t=this.getBounds().getNorthEast(),n=m.default.Projection.SphericalMercator.project(e),i=m.default.Projection.SphericalMercator.project(t);return m.default.bounds(n,i)},getExtentAsString:function(){var e=this.getBounds().getSouthWest(),t=this.getBounds().getNorthEast(),n=m.default.Projection.SphericalMercator.project(e),i=m.default.Projection.SphericalMercator.project(t);return n.x+","+n.y+","+i.x+","+i.y},setLayerVisible:function(e,t){if(t)e.visible=!0,this.loadLayers([e]);else{var n=this.getLayerByName(e.name);n&&this.removeLayer(n)}},layerInRange:function(e){return!e.minScale&&!e.minScale||this.getScale()<e.minScale&&this.getScale()>e.maxScale},loadControls:function(){if(this.mapOptions.controls){var e;this.controls={},this.mapOptions.controls.forEach(function(t){switch(t.name){case"scale":e=m.default.control.scale({imperial:!1}).addTo(this),this.controls[t]=e}},this)}},loadBaseLayers:function(){var e=this;this.baseLayers=[],GV.config.baseLayers.forEach(function(t){var n=h.create(t,e);e.baseLayers[n.config.type]=n,n&&t.visible&&(n.on("loading",function(){this.loading(!0,n)},e),n.on("load",function(){this.loading(!1,n)},e),n.addTo(e),e.activeBaseLayer=n,GV.config.activeBaseLayer=n.config.name)},this)},loadLayers:function(e){e.forEach(function(e){var t=this;if(!this.getLayerByName(e.name)){var n=h.create(e,this);n&&e.visible&&(n.on("loading",function(){this.loading(!0,n)},this),n.on("load",function(){this.loading(!1,n)},this),n.addTo(this),n.on("ready",function(){e.zoomToLayerExtent&&!function(){var e=new m.default.latLngBounds;n.eachLayer(function(t){t.getBounds?e.extend(t.getBounds()):e.extend(new m.default.latLngBounds(t._latlng,t._latlng))}),e&&t.fitBounds(e)}()}))}},this)},getLayerByName:function(e){var t=null;return this.eachLayer(function(n){n.config&&n.config.name&&n.config.name===e&&(t=n)}),t},changeBaseLayer:function(e){var t=GV.config.getActiveBaseLayer().name;t!==e&&(this.baseLayers[e].addTo(this),this.activeBaseLayer=this.baseLayers[e],this.removeLayer(this.baseLayers[t]),GV.config.setActiveBaseLayer(e))},getScale:function(){var e=591657550/Math.pow(2,this._zoom);return e},setLoading:function(){this._spinning=0,this.on("layerremove",function(e){e.layer.loading&&this.loading(!1),"function"==typeof e.layer.on&&(e.layer.off("load"),e.layer.off("loading"))},this)},loading:function(e,t){e?(0===this._spinning&&(GV.log("start load: "+t.config.name),this._container.style.cursor="progress"),this._spinning++):(this._spinning--,this._spinning<=0&&(GV.log("end load: "+t.config.name),this._container.style.cursor="default"))},addMarker:function(e){var t=this;e.epsg&&"4326"!=e.epsg?(0,M.default)(e.epsg,"4326",e.location[1],e.location[0]).then(function(n){if(n.data.points){var i=n.data.points[0].split(",")[0],a=n.data.points[0].split(",")[1];e.location=[a,i],t.addMarkerToMap(e)}}):this.addMarkerToMap(e)},addMarkerToMap:function(e){var t=m.default.icon({iconUrl:"/geoservices/apps/viewer/dist/static/img/marker-icon.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[0,-41]}),n={opacity:.8,icon:t,title:e.label};"circle"===e.type?m.default.circleMarker(e.location,n).addTo(this):m.default.marker(e.location,n).addTo(this),this.flyTo(e.location,e.zoomLevel||14)},find:function(e){var t=this;if(e.bbox)return void this.zoomToBound(e.bbox,e.epsg,e.maxZoom);if(!(e.values&&"null"!==e.values||e.cqlFilter))return void console.error("Parametri FIND non completi: manca CQL_FILTER o VALUES");var n=e.cqlFilter||(0,b.default)(e),i=e.layers||GV.config.getLayersNameByMapId(e.map),a=i.join(","),o=GV.config.getLayerConfig(i[0]),r=o.wfsParams;r.typeName=a;var s=l.default.service({text:"Ricerca...",background:"rgba(0, 0, 0, 0.8)"});(0,_.default)(r,n).then(function(n){w.default.addHiliteLayer(GV.app.map);var a=t.getLayerByName("InfoWmsHilite");if(n&&n.length>0){a.clearLayers(),a.addData(n);var o=e.maxZoom||15;t.flyToBounds(a.getBounds(),{maxZoom:o}),GV.config.hilitedLayer=i}else e.notFoundAlert&&(0,I.default)("Nessuna Elemento Trovato"),console.warn("Nessuna Elemento Trovato");s.close()}).catch(function(e){console.error(e),s.close()})},zoomTo:function(e,t,n){this.setView(new m.default.LatLng(e,t),n)},zoomToBound:function(e,t,n){var i=this;if("4326"!=t){var a=t,o="4326";(0,S.default)(a,o,e).then(function(e){if(e.data.data){var t=e.data.data[0][0].split(",").reverse(),n=e.data.data[1][0].split(",").reverse();i.fitBounds([t,n])}})}else{var r=e.split(","),s=[r[0],r[1]],l=[r[2],r[3]];this.fitBounds([s,l])}}});t.default=T},function(e,t){"use strict";!function(e,t,n){L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(e){L.Util.setOptions(this,e),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[];var t=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,t?this._withAnimation:this._noAnimation),this._markerCluster=t?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(e){if(e instanceof L.LayerGroup)return this.addLayers([e]);if(!e.getLatLng)return this._nonPointGroup.addLayer(e),this;if(!this._map)return this._needsClustering.push(e),this;if(this.hasLayer(e))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(e,this._maxZoom),this._topClusterLevel._recalculateBounds();var t=e,n=this._map.getZoom();if(e.__parent)for(;t.__parent._zoom>=n;)t=t.__parent;return this._currentShownBounds.contains(t.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(e,t):this._animationAddLayerNonAnimated(e,t)),this},removeLayer:function(e){return e instanceof L.LayerGroup?this.removeLayers([e]):e.getLatLng?this._map?e.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(e)),this._removeLayer(e,!0),this._topClusterLevel._recalculateBounds(),e.off("move",this._childMarkerMoved,this),this._featureGroup.hasLayer(e)&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,e)&&this.hasLayer(e)&&this._needsRemoving.push(e),this):(this._nonPointGroup.removeLayer(e),this)},addLayers:function(e){if(!L.Util.isArray(e))return this.addLayer(e);var t,n=this._featureGroup,i=this._nonPointGroup,a=this.options.chunkedLoading,o=this.options.chunkInterval,r=this.options.chunkProgress,s=e.length,l=0,u=!0;if(this._map){var c=(new Date).getTime(),d=L.bind(function(){for(var f=(new Date).getTime();l<s;l++){if(a&&l%200===0){var p=(new Date).getTime()-f;if(p>o)break}if(t=e[l],t instanceof L.LayerGroup)u&&(e=e.slice(),u=!1),this._extractNonGroupLayers(t,e),s=e.length;else if(t.getLatLng){if(!this.hasLayer(t)&&(this._addLayer(t,this._maxZoom),t.__parent&&2===t.__parent.getChildCount())){var h=t.__parent.getAllChildMarkers(),g=h[0]===t?h[1]:h[0];n.removeLayer(g)}}else i.addLayer(t)}r&&r(l,s,(new Date).getTime()-c),l===s?(this._topClusterLevel._recalculateBounds(),this._featureGroup.eachLayer(function(e){e instanceof L.MarkerCluster&&e._iconNeedsUpdate&&e._updateIcon()}),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(d,this.options.chunkDelay)},this);d()}else for(var f=this._needsClustering;l<s;l++)t=e[l],t instanceof L.LayerGroup?(u&&(e=e.slice(),u=!1),this._extractNonGroupLayers(t,e),s=e.length):t.getLatLng?this.hasLayer(t)||f.push(t):i.addLayer(t);return this},removeLayers:function(e){var t,n,i=e.length,a=this._featureGroup,o=this._nonPointGroup,r=!0;if(!this._map){for(t=0;t<i;t++)n=e[t],n instanceof L.LayerGroup?(r&&(e=e.slice(),r=!1),this._extractNonGroupLayers(n,e),i=e.length):(this._arraySplice(this._needsClustering,n),o.removeLayer(n),this.hasLayer(n)&&this._needsRemoving.push(n));return this}if(this._unspiderfy){this._unspiderfy();var s=e.slice(),l=i;for(t=0;t<l;t++)n=s[t],n instanceof L.LayerGroup?(this._extractNonGroupLayers(n,s),l=s.length):this._unspiderfyLayer(n)}for(t=0;t<i;t++)n=e[t],n instanceof L.LayerGroup?(r&&(e=e.slice(),r=!1),this._extractNonGroupLayers(n,e),i=e.length):n.__parent?(this._removeLayer(n,!0,!0),a.hasLayer(n)&&(a.removeLayer(n),n.clusterShow&&n.clusterShow())):o.removeLayer(n);return this._topClusterLevel._recalculateBounds(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),a.eachLayer(function(e){e instanceof L.MarkerCluster&&e._updateIcon()}),this},clearLayers:function(){return this._map||(this._needsClustering=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(e){e.off("move",this._childMarkerMoved,this),delete e.__parent}),this._map&&this._generateInitialClusters(),this},getBounds:function(){var e=new L.LatLngBounds;this._topClusterLevel&&e.extend(this._topClusterLevel._bounds);for(var t=this._needsClustering.length-1;t>=0;t--)e.extend(this._needsClustering[t].getLatLng());return e.extend(this._nonPointGroup.getBounds()),e},eachLayer:function(e,t){var n,i=this._needsClustering.slice(),a=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(i),n=i.length-1;n>=0;n--)a.indexOf(i[n])===-1&&e.call(t,i[n]);this._nonPointGroup.eachLayer(e,t)},getLayers:function(){var e=[];return this.eachLayer(function(t){e.push(t)}),e},getLayer:function(e){var t=null;return e=parseInt(e,10),this.eachLayer(function(n){L.stamp(n)===e&&(t=n)}),t},hasLayer:function(e){if(!e)return!1;var t,n=this._needsClustering;for(t=n.length-1;t>=0;t--)if(n[t]===e)return!0;for(n=this._needsRemoving,t=n.length-1;t>=0;t--)if(n[t]===e)return!1;return!(!e.__parent||e.__parent._group!==this)||this._nonPointGroup.hasLayer(e)},zoomToShowLayer:function(e,t){"function"!=typeof t&&(t=function(){});var n=function n(){!e._icon&&!e.__parent._icon||this._inZoomAnimation||(this._map.off("moveend",n,this),this.off("animationend",n,this),e._icon?t():e.__parent._icon&&(this.once("spiderfied",t,this),e.__parent.spiderfy()))};if(e._icon&&this._map.getBounds().contains(e.getLatLng()))t();else if(e.__parent._zoom<this._map.getZoom())this._map.on("moveend",n,this),this._map.panTo(e.getLatLng());else{var i=function(){this._map.off("movestart",i,this),i=null};this._map.on("movestart",i,this),this._map.on("moveend",n,this),this.on("animationend",n,this),e.__parent.zoomToBounds(),i&&n.call(this)}},onAdd:function(e){this._map=e;var t,n,i;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(e),this._nonPointGroup.addTo(e),this._gridClusters||this._generateInitialClusters(),this._maxLat=e.options.crs.projection.MAX_LATITUDE,t=0,n=this._needsRemoving.length;t<n;t++)i=this._needsRemoving[t],this._removeLayer(i,!0);this._needsRemoving=[],this._zoom=this._map.getZoom(),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),n=this._needsClustering,this._needsClustering=[],this.addLayers(n)},onRemove:function(e){e.off("zoomend",this._zoomEnd,this),e.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(e){for(var t=e;t&&!t._icon;)t=t.__parent;return t||null},_arraySplice:function(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return e.splice(n,1),!0},_removeFromGridUnclustered:function(e,t){for(var n=this._map,i=this._gridUnclustered;t>=0&&i[t].removeObject(e,n.project(e.getLatLng(),t));t--);
},_childMarkerMoved:function(e){this._ignoreMove||(e.target._latlng=e.oldLatLng,this.removeLayer(e.target),e.target._latlng=e.latlng,this.addLayer(e.target))},_removeLayer:function(e,t,n){var i=this._gridClusters,a=this._gridUnclustered,o=this._featureGroup,r=this._map;t&&this._removeFromGridUnclustered(e,this._maxZoom);var s,l=e.__parent,u=l._markers;for(this._arraySplice(u,e);l&&(l._childCount--,l._boundsNeedUpdate=!0,!(l._zoom<0));)t&&l._childCount<=1?(s=l._markers[0]===e?l._markers[1]:l._markers[0],i[l._zoom].removeObject(l,r.project(l._cLatLng,l._zoom)),a[l._zoom].addObject(s,r.project(s.getLatLng(),l._zoom)),this._arraySplice(l.__parent._childClusters,l),l.__parent._markers.push(s),s.__parent=l.__parent,l._icon&&(o.removeLayer(l),n||o.addLayer(s))):n&&l._icon||l._updateIcon(),l=l.__parent;delete e.__parent},_isOrIsParent:function(e,t){for(;t;){if(e===t)return!0;t=t.parentNode}return!1},fire:function(e,t,n){if(t&&t.layer instanceof L.MarkerCluster){if(t.originalEvent&&this._isOrIsParent(t.layer._icon,t.originalEvent.relatedTarget))return;e="cluster"+e}L.FeatureGroup.prototype.fire.call(this,e,t,n)},listens:function(e,t){return L.FeatureGroup.prototype.listens.call(this,e,t)||L.FeatureGroup.prototype.listens.call(this,"cluster"+e,t)},_defaultIconCreateFunction:function(e){var t=e.getChildCount(),n=" marker-cluster-";return n+=t<10?"small":t<100?"medium":"large",new L.DivIcon({html:"<div><span>"+t+"</span></div>",className:"marker-cluster"+n,iconSize:new L.Point(40,40)})},_bindEvents:function(){var e=this._map,t=this.options.spiderfyOnMaxZoom,n=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick;(t||i)&&this.on("clusterclick",this._zoomOrSpiderfy,this),n&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),e.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(e){for(var t=e.layer,n=t;1===n._childClusters.length;)n=n._childClusters[0];n._zoom===this._maxZoom&&n._childCount===t._childCount&&this.options.spiderfyOnMaxZoom?t.spiderfy():this.options.zoomToBoundsOnClick&&t.zoomToBounds(),e.originalEvent&&13===e.originalEvent.keyCode&&this._map._container.focus()},_showCoverage:function(e){var t=this._map;this._inZoomAnimation||(this._shownPolygon&&t.removeLayer(this._shownPolygon),e.layer.getChildCount()>2&&e.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(e.layer.getConvexHull(),this.options.polygonOptions),t.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var e=this.options.spiderfyOnMaxZoom,t=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick,i=this._map;(e||n)&&this.off("clusterclick",this._zoomOrSpiderfy,this),t&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),i.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var e=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),e),this._currentShownBounds=e}},_generateInitialClusters:function(){var e=this._map.getMaxZoom(),t=this.options.maxClusterRadius,n=t;"function"!=typeof t&&(n=function(){return t}),this.options.disableClusteringAtZoom&&(e=this.options.disableClusteringAtZoom-1),this._maxZoom=e,this._gridClusters={},this._gridUnclustered={};for(var i=e;i>=0;i--)this._gridClusters[i]=new L.DistanceGrid(n(i)),this._gridUnclustered[i]=new L.DistanceGrid(n(i));this._topClusterLevel=new this._markerCluster(this,-1)},_addLayer:function(e,t){var n,i,a=this._gridClusters,o=this._gridUnclustered;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(e),e.on("move",this._childMarkerMoved,this);t>=0;t--){n=this._map.project(e.getLatLng(),t);var r=a[t].getNearObject(n);if(r)return r._addChild(e),void(e.__parent=r);if(r=o[t].getNearObject(n)){var s=r.__parent;s&&this._removeLayer(r,!1);var l=new this._markerCluster(this,t,r,e);a[t].addObject(l,this._map.project(l._cLatLng,t)),r.__parent=l,e.__parent=l;var u=l;for(i=t-1;i>s._zoom;i--)u=new this._markerCluster(this,i,u),a[i].addObject(u,this._map.project(r.getLatLng(),i));return s._addChild(u),void this._removeFromGridUnclustered(r,t)}o[t].addObject(e,n)}this._topClusterLevel._addChild(e),e.__parent=this._topClusterLevel},_enqueue:function(e){this._queue.push(e),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var e=0;e<this._queue.length;e++)this._queue[e].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var e=Math.round(this._map._zoom);this._processQueue(),this._zoom<e&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,e)):this._zoom>e?(this._animationStart(),this._animationZoomOut(this._zoom,e)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(e){var t=this._maxLat;return t!==n&&(e.getNorth()>=t&&(e._northEast.lat=1/0),e.getSouth()<=-t&&(e._southWest.lat=-(1/0))),e},_animationAddLayerNonAnimated:function(e,t){if(t===e)this._featureGroup.addLayer(e);else if(2===t._childCount){t._addToMap();var n=t.getAllChildMarkers();this._featureGroup.removeLayer(n[0]),this._featureGroup.removeLayer(n[1])}else t._updateIcon()},_extractNonGroupLayers:function(e,t){var n,i=e.getLayers(),a=0;for(t=t||[];a<i.length;a++)n=i[a],n instanceof L.LayerGroup?this._extractNonGroupLayers(n,t):t.push(n);return t},_overrideMarkerIcon:function(e){var t=e.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[e]}});return t}}),L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-(1/0),-(1/0)),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(e,t){this._animationAddLayerNonAnimated(e,t)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(e,t){var n,i=this._getExpandedVisibleBounds(),a=this._featureGroup;this._ignoreMove=!0,this._topClusterLevel._recursively(i,e,0,function(o){var r,s=o._latlng,l=o._markers;for(i.contains(s)||(s=null),o._isSingleParent()&&e+1===t?(a.removeLayer(o),o._recursivelyAddChildrenToMap(null,t,i)):(o.clusterHide(),o._recursivelyAddChildrenToMap(s,t,i)),n=l.length-1;n>=0;n--)r=l[n],i.contains(r._latlng)||a.removeLayer(r)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(i,t),a.eachLayer(function(e){e instanceof L.MarkerCluster||!e._icon||e.clusterShow()}),this._topClusterLevel._recursively(i,e,t,function(e){e._recursivelyRestoreChildPositions(t)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(i,e,0,function(e){a.removeLayer(e),e.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(e,t){this._animationZoomOutSingle(this._topClusterLevel,e-1,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,e,this._getExpandedVisibleBounds())},_animationAddLayer:function(e,t){var n=this,i=this._featureGroup;i.addLayer(e),t!==e&&(t._childCount>2?(t._updateIcon(),this._forceLayout(),this._animationStart(),e._setPos(this._map.latLngToLayerPoint(t.getLatLng())),e.clusterHide(),this._enqueue(function(){i.removeLayer(e),e.clusterShow(),n._animationEnd()})):(this._forceLayout(),n._animationStart(),n._animationZoomOutSingle(t,this._map.getMaxZoom(),this._map.getZoom())))}},_animationZoomOutSingle:function(e,t,n){var i=this._getExpandedVisibleBounds();e._recursivelyAnimateChildrenInAndAddSelfToMap(i,t+1,n);var a=this;this._forceLayout(),e._recursivelyBecomeVisible(i,n),this._enqueue(function(){if(1===e._childCount){var o=e._markers[0];this._ignoreMove=!0,o.setLatLng(o.getLatLng()),this._ignoreMove=!1,o.clusterShow&&o.clusterShow()}else e._recursively(i,n,0,function(e){e._recursivelyRemoveChildrenFromMap(i,t+1)});a._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(t.body.offsetWidth)}}),L.markerClusterGroup=function(e){return new L.MarkerClusterGroup(e)},L.MarkerCluster=L.Marker.extend({initialize:function(e,t,n,i){L.Marker.prototype.initialize.call(this,n?n._cLatLng||n.getLatLng():new L.LatLng(0,0),{icon:this}),this._group=e,this._zoom=t,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,n&&this._addChild(n),i&&this._addChild(i)},getAllChildMarkers:function(e){e=e||[];for(var t=this._childClusters.length-1;t>=0;t--)this._childClusters[t].getAllChildMarkers(e);for(var n=this._markers.length-1;n>=0;n--)e.push(this._markers[n]);return e},getChildCount:function(){return this._childCount},zoomToBounds:function(){for(var e,t=this._childClusters.slice(),n=this._group._map,i=n.getBoundsZoom(this._bounds),a=this._zoom+1,o=n.getZoom();t.length>0&&i>a;){a++;var r=[];for(e=0;e<t.length;e++)r=r.concat(t[e]._childClusters);t=r}i>a?this._group._map.setView(this._latlng,a):i<=o?this._group._map.setView(this._latlng,o+1):this._group._map.fitBounds(this._bounds)},getBounds:function(){var e=new L.LatLngBounds;return e.extend(this._bounds),e},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(e,t){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(e),e instanceof L.MarkerCluster?(t||(this._childClusters.push(e),e.__parent=this),this._childCount+=e._childCount):(t||this._markers.push(e),this._childCount++),this.__parent&&this.__parent._addChild(e,!0)},_setClusterCenter:function(e){this._cLatLng||(this._cLatLng=e._cLatLng||e._latlng)},_resetBounds:function(){var e=this._bounds;e._southWest&&(e._southWest.lat=1/0,e._southWest.lng=1/0),e._northEast&&(e._northEast.lat=-(1/0),e._northEast.lng=-(1/0))},_recalculateBounds:function(){var e,t,n,i,a=this._markers,o=this._childClusters,r=0,s=0,l=this._childCount;if(0!==l){for(this._resetBounds(),e=0;e<a.length;e++)n=a[e]._latlng,this._bounds.extend(n),r+=n.lat,s+=n.lng;for(e=0;e<o.length;e++)t=o[e],t._boundsNeedUpdate&&t._recalculateBounds(),this._bounds.extend(t._bounds),n=t._wLatLng,i=t._childCount,r+=n.lat*i,s+=n.lng*i;this._latlng=this._wLatLng=new L.LatLng(r/l,s/l),this._boundsNeedUpdate=!1}},_addToMap:function(e){e&&(this._backupLatlng=this._latlng,this.setLatLng(e)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(e,t,n){this._recursively(e,0,n-1,function(e){var n,i,a=e._markers;for(n=a.length-1;n>=0;n--)i=a[n],i._icon&&(i._setPos(t),i.clusterHide())},function(e){var n,i,a=e._childClusters;for(n=a.length-1;n>=0;n--)i=a[n],i._icon&&(i._setPos(t),i.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(e,t,n){this._recursively(e,n,0,function(i){i._recursivelyAnimateChildrenIn(e,i._group._map.latLngToLayerPoint(i.getLatLng()).round(),t),i._isSingleParent()&&t-1===n?(i.clusterShow(),i._recursivelyRemoveChildrenFromMap(e,t)):i.clusterHide(),i._addToMap()})},_recursivelyBecomeVisible:function(e,t){this._recursively(e,0,t,null,function(e){e.clusterShow()})},_recursivelyAddChildrenToMap:function(e,t,n){this._recursively(n,-1,t,function(i){if(t!==i._zoom)for(var a=i._markers.length-1;a>=0;a--){var o=i._markers[a];n.contains(o._latlng)&&(e&&(o._backupLatlng=o.getLatLng(),o.setLatLng(e),o.clusterHide&&o.clusterHide()),i._group._featureGroup.addLayer(o))}},function(t){t._addToMap(e)})},_recursivelyRestoreChildPositions:function(e){for(var t=this._markers.length-1;t>=0;t--){var n=this._markers[t];n._backupLatlng&&(n.setLatLng(n._backupLatlng),delete n._backupLatlng)}if(e-1===this._zoom)for(var i=this._childClusters.length-1;i>=0;i--)this._childClusters[i]._restorePosition();else for(var a=this._childClusters.length-1;a>=0;a--)this._childClusters[a]._recursivelyRestoreChildPositions(e)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(e,t,n){var i,a;this._recursively(e,-1,t-1,function(e){for(a=e._markers.length-1;a>=0;a--)i=e._markers[a],n&&n.contains(i._latlng)||(e._group._featureGroup.removeLayer(i),i.clusterShow&&i.clusterShow())},function(e){for(a=e._childClusters.length-1;a>=0;a--)i=e._childClusters[a],n&&n.contains(i._latlng)||(e._group._featureGroup.removeLayer(i),i.clusterShow&&i.clusterShow())})},_recursively:function(e,t,n,i,a){var o,r,s=this._childClusters,l=this._zoom;if(t>l)for(o=s.length-1;o>=0;o--)r=s[o],e.intersects(r._bounds)&&r._recursively(e,t,n,i,a);else if(i&&i(this),a&&this._zoom===n&&a(this),n>l)for(o=s.length-1;o>=0;o--)r=s[o],e.intersects(r._bounds)&&r._recursively(e,t,n,i,a)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}}),L.Marker.include({clusterHide:function(){return this.options.opacityWhenUnclustered=this.options.opacity||1,this.setOpacity(0)},clusterShow:function(){var e=this.setOpacity(this.options.opacity||this.options.opacityWhenUnclustered);return delete this.options.opacityWhenUnclustered,e}}),L.DistanceGrid=function(e){this._cellSize=e,this._sqCellSize=e*e,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(e,t){var n=this._getCoord(t.x),i=this._getCoord(t.y),a=this._grid,o=a[i]=a[i]||{},r=o[n]=o[n]||[],s=L.Util.stamp(e);this._objectPoint[s]=t,r.push(e)},updateObject:function(e,t){this.removeObject(e),this.addObject(e,t)},removeObject:function(e,t){var n,i,a=this._getCoord(t.x),o=this._getCoord(t.y),r=this._grid,s=r[o]=r[o]||{},l=s[a]=s[a]||[];for(delete this._objectPoint[L.Util.stamp(e)],n=0,i=l.length;n<i;n++)if(l[n]===e)return l.splice(n,1),1===i&&delete s[a],!0},eachObject:function(e,t){var n,i,a,o,r,s,l,u=this._grid;for(n in u){r=u[n];for(i in r)for(s=r[i],a=0,o=s.length;a<o;a++)l=e.call(t,s[a]),l&&(a--,o--)}},getNearObject:function(e){var t,n,i,a,o,r,s,l,u=this._getCoord(e.x),c=this._getCoord(e.y),d=this._objectPoint,f=this._sqCellSize,p=null;for(t=c-1;t<=c+1;t++)if(a=this._grid[t])for(n=u-1;n<=u+1;n++)if(o=a[n])for(i=0,r=o.length;i<r;i++)s=o[i],l=this._sqDist(d[L.Util.stamp(s)],e),l<f&&(f=l,p=s);return p},_getCoord:function(e){return Math.floor(e/this._cellSize)},_sqDist:function(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i}},function(){L.QuickHull={getDistant:function(e,t){var n=t[1].lat-t[0].lat,i=t[0].lng-t[1].lng;return i*(e.lat-t[0].lat)+n*(e.lng-t[0].lng)},findMostDistantPointFromBaseLine:function(e,t){var n,i,a,o=0,r=null,s=[];for(n=t.length-1;n>=0;n--)i=t[n],a=this.getDistant(i,e),a>0&&(s.push(i),a>o&&(o=a,r=i));return{maxPoint:r,newPoints:s}},buildConvexHull:function(e,t){var n=[],i=this.findMostDistantPointFromBaseLine(e,t);return i.maxPoint?(n=n.concat(this.buildConvexHull([e[0],i.maxPoint],i.newPoints)),n=n.concat(this.buildConvexHull([i.maxPoint,e[1]],i.newPoints))):[e[0]]},getConvexHull:function(e){var t,n=!1,i=!1,a=!1,o=!1,r=null,s=null,l=null,u=null,c=null,d=null;for(t=e.length-1;t>=0;t--){var f=e[t];(n===!1||f.lat>n)&&(r=f,n=f.lat),(i===!1||f.lat<i)&&(s=f,i=f.lat),(a===!1||f.lng>a)&&(l=f,a=f.lng),(o===!1||f.lng<o)&&(u=f,o=f.lng)}i!==n?(d=s,c=r):(d=u,c=l);var p=[].concat(this.buildConvexHull([d,c],e),this.buildConvexHull([c,d],e));return p}}}(),L.MarkerCluster.include({getConvexHull:function(){var e,t,n=this.getAllChildMarkers(),i=[];for(t=n.length-1;t>=0;t--)e=n[t].getLatLng(),i.push(e);return L.QuickHull.getConvexHull(i)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:Math.PI/6,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var e,t=this.getAllChildMarkers(),n=this._group,i=n._map,a=i.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,t.length>=this._circleSpiralSwitchover?e=this._generatePointsSpiral(t.length,a):(a.y+=10,e=this._generatePointsCircle(t.length,a)),this._animationSpiderfy(t,e)}},unspiderfy:function(e){this._group._inZoomAnimation||(this._animationUnspiderfy(e),this._group._spiderfied=null)},_generatePointsCircle:function(e,t){var n,i,a=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+e),o=a/this._2PI,r=this._2PI/e,s=[];for(s.length=e,n=e-1;n>=0;n--)i=this._circleStartAngle+n*r,s[n]=new L.Point(t.x+o*Math.cos(i),t.y+o*Math.sin(i))._round();return s},_generatePointsSpiral:function(e,t){var n,i=this._group.options.spiderfyDistanceMultiplier,a=i*this._spiralLengthStart,o=i*this._spiralFootSeparation,r=i*this._spiralLengthFactor*this._2PI,s=0,l=[];for(l.length=e,n=e-1;n>=0;n--)s+=o/a+5e-4*n,l[n]=new L.Point(t.x+a*Math.cos(s),t.y+a*Math.sin(s))._round(),a+=r/s;return l},_noanimationUnspiderfy:function(){var e,t,n=this._group,i=n._map,a=n._featureGroup,o=this.getAllChildMarkers();for(n._ignoreMove=!0,this.setOpacity(1),t=o.length-1;t>=0;t--)e=o[t],a.removeLayer(e),e._preSpiderfyLatlng&&(e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng),e.setZIndexOffset&&e.setZIndexOffset(0),e._spiderLeg&&(i.removeLayer(e._spiderLeg),delete e._spiderLeg);n.fire("unspiderfied",{cluster:this,markers:o}),n._ignoreMove=!1,n._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(e,t){var n,i,a,o,r=this._group,s=r._map,l=r._featureGroup,u=this._group.options.spiderLegPolylineOptions;for(r._ignoreMove=!0,n=0;n<e.length;n++)o=s.layerPointToLatLng(t[n]),i=e[n],a=new L.Polyline([this._latlng,o],u),s.addLayer(a),i._spiderLeg=a,i._preSpiderfyLatlng=i._latlng,i.setLatLng(o),i.setZIndexOffset&&i.setZIndexOffset(1e6),l.addLayer(i);this.setOpacity(.3),r._ignoreMove=!1,r.fire("spiderfied",{cluster:this,markers:e})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(e,t){var i,a,o,r,s,l,u=this,c=this._group,d=c._map,f=c._featureGroup,p=this._latlng,h=d.latLngToLayerPoint(p),g=L.Path.SVG,m=L.extend({},this._group.options.spiderLegPolylineOptions),v=m.opacity;for(v===n&&(v=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),g?(m.opacity=0,m.className=(m.className||"")+" leaflet-cluster-spider-leg"):m.opacity=v,c._ignoreMove=!0,i=0;i<e.length;i++)a=e[i],l=d.layerPointToLatLng(t[i]),o=new L.Polyline([p,l],m),d.addLayer(o),a._spiderLeg=o,g&&(r=o._path,s=r.getTotalLength()+.1,r.style.strokeDasharray=s,r.style.strokeDashoffset=s),a.setZIndexOffset&&a.setZIndexOffset(1e6),a.clusterHide&&a.clusterHide(),f.addLayer(a),a._setPos&&a._setPos(h);for(c._forceLayout(),c._animationStart(),i=e.length-1;i>=0;i--)l=d.layerPointToLatLng(t[i]),a=e[i],a._preSpiderfyLatlng=a._latlng,a.setLatLng(l),a.clusterShow&&a.clusterShow(),g&&(o=a._spiderLeg,r=o._path,r.style.strokeDashoffset=0,o.setStyle({opacity:v}));this.setOpacity(.3),c._ignoreMove=!1,setTimeout(function(){c._animationEnd(),c.fire("spiderfied",{cluster:u,markers:e})},200)},_animationUnspiderfy:function(e){var t,n,i,a,o,r,s=this,l=this._group,u=l._map,c=l._featureGroup,d=e?u._latLngToNewLayerPoint(this._latlng,e.zoom,e.center):u.latLngToLayerPoint(this._latlng),f=this.getAllChildMarkers(),p=L.Path.SVG;for(l._ignoreMove=!0,l._animationStart(),this.setOpacity(1),n=f.length-1;n>=0;n--)t=f[n],t._preSpiderfyLatlng&&(t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng,r=!0,t._setPos&&(t._setPos(d),r=!1),t.clusterHide&&(t.clusterHide(),r=!1),r&&c.removeLayer(t),p&&(i=t._spiderLeg,a=i._path,o=a.getTotalLength()+.1,a.style.strokeDashoffset=o,i.setStyle({opacity:0})));l._ignoreMove=!1,setTimeout(function(){var e=0;for(n=f.length-1;n>=0;n--)t=f[n],t._spiderLeg&&e++;for(n=f.length-1;n>=0;n--)t=f[n],t._spiderLeg&&(t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),e>1&&c.removeLayer(t),u.removeLayer(t._spiderLeg),delete t._spiderLeg);l._animationEnd(),l.fire("unspiderfied",{cluster:s,markers:f})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(e){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(e))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(e){this._spiderfied&&this._spiderfied.unspiderfy(e)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(e){e._spiderLeg&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),this._map.removeLayer(e._spiderLeg),delete e._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(e){return e?e instanceof L.MarkerClusterGroup?e=e._topClusterLevel.getAllChildMarkers():e instanceof L.LayerGroup?e=e._layers:e instanceof L.MarkerCluster?e=e.getAllChildMarkers():e instanceof L.Marker&&(e=[e]):e=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(e),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(e),this},_flagParentsIconsNeedUpdate:function(e){var t,n;for(t in e)for(n=e[t].__parent;n;)n._iconNeedsUpdate=!0,n=n.__parent},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(e){e instanceof L.MarkerCluster&&e._iconNeedsUpdate&&e._updateIcon()})},_refreshSingleMarkerModeMarkers:function(e){var t,n;for(t in e)n=e[t],this.hasLayer(n)&&n.setIcon(this._overrideMarkerIcon(n))}}),L.Marker.include({refreshIconOptions:function(e,t){var n=this.options.icon;return L.setOptions(n,e),this.setIcon(n),t&&this.__parent&&this.__parent._group.refreshClusters(this),this}})}(window,document)},function(e,t){"use strict";L.NonTiledLayer=L.Layer.extend({includes:L.Evented,options:{attribution:"",opacity:1,zIndex:void 0,minZoom:0,maxZoom:18,pointerEvents:null,errorImageUrl:"data:image/gif;base64,R0lGODlhAQABAHAAACH5BAUAAAAALAAAAAABAAEAAAICRAEAOw==",bounds:L.latLngBounds([-85.05,-180],[85.05,180])},url:"",initialize:function(e){L.setOptions(this,e)},onAdd:function(e){this._map=e,this._div||(this._div=L.DomUtil.create("div","leaflet-image-layer"),this.options.pointerEvents&&(this._div.style["pointer-events"]=this.options.pointerEvents),void 0!==this.options.zIndex&&(this._div.style.zIndex=this.options.zIndex),void 0!==this.options.opacity&&(this._div.style.opacity=this.options.opacity)),this.getPane().appendChild(this._div),this._bufferImage=this._initImage(),this._currentImage=this._initImage(),this._update()},onRemove:function(e){this.getPane().removeChild(this._div),this._div.removeChild(this._bufferImage),this._div.removeChild(this._currentImage)},addTo:function(e){return e.addLayer(this),this},getEvents:function(){var e={moveend:this._update,zoom:this._viewreset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},getElement:function(){return this._div},setOpacity:function(e){return this.options.opacity=e,this._div&&L.DomUtil.setOpacity(this._div,this.options.opacity),this},setZIndex:function(e){return e&&(this.options.zIndex=e,this._div&&(this._div.style.zIndex=e)),this},bringToFront:function(){return this._div&&this._pane.appendChild(this._div),this},bringToBack:function(){return this._div&&this._pane.insertBefore(this._div,this._pane.firstChild),this},getAttribution:function(){return this.options.attribution},_initImage:function(e){var e=L.DomUtil.create("img","leaflet-image-layer");return this._div.appendChild(e),this._map.options.zoomAnimation&&L.Browser.any3d?L.DomUtil.addClass(e,"leaflet-zoom-animated"):L.DomUtil.addClass(e,"leaflet-zoom-hide"),L.extend(e,{galleryimg:"no",onselectstart:L.Util.falseFn,onmousemove:L.Util.falseFn,onload:L.bind(this._onImageLoad,this),onerror:L.bind(this._onImageError,this)}),e},redraw:function(){return this._map&&this._update(),this},_animateZoom:function(e){this._currentImage._bounds&&this._animateImage(this._currentImage,e),this._bufferImage._bounds&&this._animateImage(this._bufferImage,e)},_animateImage:function(e,t){var n=this._map.getZoomScale(t.zoom),i=this._map._latLngToNewLayerPoint(e._bounds.getNorthWest(),t.zoom,t.center);L.DomUtil.setTransform(e,i,n)},_resetImage:function(e){var t=new L.Bounds(this._map.latLngToLayerPoint(e._bounds.getNorthWest()),this._map.latLngToLayerPoint(e._bounds.getSouthEast())),n=t.getSize();L.DomUtil.setPosition(e,t.min),e.style.width=n.x+"px",e.style.height=n.y+"px"},_getClippedBounds:function(){var e=this._map.getBounds(),t=e.getSouth(),n=e.getNorth(),i=e.getWest(),a=e.getEast(),o=this.options.bounds.getSouth(),r=this.options.bounds.getNorth(),s=this.options.bounds.getWest(),l=this.options.bounds.getEast();t<o&&(t=o),n>r&&(n=r),i<s&&(i=s),a>l&&(a=l);var u=new L.LatLng(n,i),c=new L.LatLng(t,a);return new L.LatLngBounds(u,c)},_viewreset:function(){this._bufferImage._bounds&&this._resetImage(this._bufferImage),this._currentImage._bounds&&this._resetImage(this._currentImage)},_update:function(){if(this._map.getZoom()<this.options.minZoom||this._map.getZoom()>this.options.maxZoom)return void(this._div.style.visibility="hidden");this._div.style.visibility="visible",this._bufferImage._bounds&&this._resetImage(this._bufferImage);var e=this._getClippedBounds(),t=this._map.latLngToContainerPoint(e.getNorthWest()),n=this._map.latLngToContainerPoint(e.getSouthEast()),i=n.x-t.x,a=n.y-t.y;if(!(i<32||a<32)){this._currentImage._bounds=e,this._resetImage(this._currentImage);var o=this._currentImage;this.getImageUrl?o.src=this.getImageUrl(e.getNorthWest(),e.getSouthEast(),i,a):this.getImageUrlAsync(e.getNorthWest(),e.getSouthEast(),i,a,function(e,t){o.src=e,o.tag=t}),this.url=o.src,L.DomUtil.setOpacity(this._currentImage,0)}},_onImageError:function(e){this.fire("error",e),L.DomUtil.addClass(e.target,"invalid"),e.target.src!==this.options.errorImageUrl&&(e.target.src=this.options.errorImageUrl,this._onImageDone(!1,e))},_onImageLoad:function(e){if(e.target.src!==this.options.errorImageUrl){if(L.DomUtil.removeClass(e.target,"invalid"),e.target.src!==this.url)return;this._onImageDone(!0,e)}},_onImageDone:function(e,t){L.DomUtil.setOpacity(this._currentImage,1),L.DomUtil.setOpacity(this._bufferImage,0),this._addInteraction&&this._addInteraction(this._currentImage.tag);var n=this._bufferImage;this._bufferImage=this._currentImage,this._currentImage=n,this.fire("load",t)}}),L.nonTiledLayer=function(){return new L.NonTiledLayer},L.NonTiledLayer.WMS=L.NonTiledLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},options:{crs:null,uppercase:!1},initialize:function(e,t){this._wmsUrl=e;var n=L.extend({},this.defaultWmsParams);for(var i in t)L.NonTiledLayer.prototype.options.hasOwnProperty(i)||L.Layer.prototype.options.hasOwnProperty(i)||(n[i]=t[i]);this.wmsParams=n,L.setOptions(this,t)},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,L.NonTiledLayer.prototype.onAdd.call(this,e)},getImageUrl:function(e,t,n,i){var a=this.wmsParams;a.width=n,a.height=i;var o=this._crs.project(e),r=this._crs.project(t),s=this._wmsUrl,l=l=(this._wmsVersion>=1.3&&this._crs===L.CRS.EPSG4326?[r.y,o.x,o.y,r.x]:[o.x,r.y,r.x,o.y]).join(",");return s+L.Util.getParamString(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+l},setParams:function(e,t){return L.extend(this.wmsParams,e),t||this.redraw(),this}}),L.nonTiledLayer.wms=function(e,t){return new L.NonTiledLayer.WMS(e,t)}},function(e,t){"use strict";L.controlCredits=function(e){return new L.CreditsControl(e)},L.CreditsControl=L.Control.extend({initialize:function(e){L.setOptions(this,e)},onAdd:function(e){this._map=e;var t=L.DomUtil.create("div","leaflet-credits-control",t),n=L.DomUtil.create("img","",t);return n.src=this.options.image,this._container=t}})},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){try{return window.URL.createObjectURL(new Blob([Uint8Array.from(e.split("").map(function(e){return e.charCodeAt(0)}))],{type:t}))}catch(i){return"data:"+t+(n?";base64,":",")+e}}function o(e){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}function r(e,t,n){var i,a,o=n.buf;if(a=o[n.pos++],i=(112&a)>>4,a<128)return l(e,i,t);if(a=o[n.pos++],i|=(127&a)<<3,a<128)return l(e,i,t);if(a=o[n.pos++],i|=(127&a)<<10,a<128)return l(e,i,t);if(a=o[n.pos++],i|=(127&a)<<17,a<128)return l(e,i,t);if(a=o[n.pos++],i|=(127&a)<<24,a<128)return l(e,i,t);if(a=o[n.pos++],i|=(1&a)<<31,a<128)return l(e,i,t);throw new Error("Expected varint not more than 10 bytes")}function s(e){return e.type===o.Bytes?e.readVarint()+e.pos:e.pos+1}function l(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function u(e,t){var n,i;if(e>=0?(n=e%4294967296|0,i=e/4294967296|0):(n=~(-e%4294967296),i=~(-e/4294967296),4294967295^n?n=n+1|0:(n=0,i=i+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),c(n,i,t),d(i,t)}function c(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos]=127&e}function d(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}function f(e,t,n){var i=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.ceil(Math.log(t)/(7*Math.LN2));n.realloc(i);for(var a=n.pos-1;a>=e;a--)n.buf[a+i]=n.buf[a]}function p(e,t){
for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function h(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function g(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function m(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function v(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function _(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function y(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function b(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function w(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function C(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function M(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function x(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function S(e,t,n){for(var i="",a=t;a<n;){var o=e[a],r=null,s=o>239?4:o>223?3:o>191?2:1;if(a+s>n)break;var l,u,c;1===s?o<128&&(r=o):2===s?(l=e[a+1],128===(192&l)&&(r=(31&o)<<6|63&l,r<=127&&(r=null))):3===s?(l=e[a+1],u=e[a+2],128===(192&l)&&128===(192&u)&&(r=(15&o)<<12|(63&l)<<6|63&u,(r<=2047||r>=55296&&r<=57343)&&(r=null))):4===s&&(l=e[a+1],u=e[a+2],c=e[a+3],128===(192&l)&&128===(192&u)&&128===(192&c)&&(r=(15&o)<<18|(63&l)<<12|(63&u)<<6|63&c,(r<=65535||r>=1114112)&&(r=null))),null===r?(r=65533,s=1):r>65535&&(r-=65536,i+=String.fromCharCode(r>>>10&1023|55296),r=56320|1023&r),i+=String.fromCharCode(r),a+=s}return i}function E(e,t,n){for(var i,a,o=0;o<t.length;o++){if(i=t.charCodeAt(o),i>55295&&i<57344){if(!a){i>56319||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):a=i;continue}if(i<56320){e[n++]=239,e[n++]=191,e[n++]=189,a=i;continue}i=a-55296<<10|i-56320|65536,a=null}else a&&(e[n++]=239,e[n++]=191,e[n++]=189,a=null);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(i<65536?e[n++]=i>>12|224:(e[n++]=i>>18|240,e[n++]=i>>12&63|128),e[n++]=i>>6&63|128),e[n++]=63&i|128)}return n}function I(e,t){this.x=e,this.y=t}function T(e,t,n,i,a){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=i,this._values=a,e.readFields(A,this,t)}function A(e,t,n){1==e?t.id=n.readVarint():2==e?O(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function O(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var i=t._keys[e.readVarint()],a=t._values[e.readVarint()];t.properties[i]=a}}function G(e){var t=e.length;if(t<=1)return[e];for(var n,i,a=[],o=0;o<t;o++){var r=P(e[o]);0!==r&&(void 0===i&&(i=r<0),i===r<0?(n&&a.push(n),n=[e[o]]):n.push(e[o]))}return n&&a.push(n),a}function P(e){for(var t,n,i=0,a=0,o=e.length,r=o-1;a<o;r=a++)t=e[a],n=e[r],i+=(n.x-t.x)*(t.y+n.y);return i}function R(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(V,this,t),this.length=this._features.length}function V(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(k(n))}function k(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var i=e.readVarint()>>3;t=1===i?e.readString():2===i?e.readFloat():3===i?e.readDouble():4===i?e.readVarint64():5===i?e.readVarint():6===i?e.readSVarint():7===i?e.readBoolean():null}return t}function F(e,t){this.layers=e.readFields(z,{},t)}function z(e,t,n){if(3===e){var i=new K(n,n.readVarint()+n.pos);i.length&&(t[i.name]=i)}}var B=n(10),N=i(B),D=function(e,t,n,i,a){var o,r,s=8*a-i-1,l=(1<<s)-1,u=l>>1,c=-7,d=n?a-1:0,f=n?-1:1,p=e[t+d];for(d+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+e[t+d],d+=f,c-=8);for(r=o&(1<<-c)-1,o>>=-c,c+=i;c>0;r=256*r+e[t+d],d+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return r?NaN:(p?-1:1)*(1/0);r+=Math.pow(2,i),o-=u}return(p?-1:1)*r*Math.pow(2,o-i)},j=function(e,t,n,i,a,o){var r,s,l,u=8*o-a-1,c=(1<<u)-1,d=c>>1,f=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,h=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,r=c):(r=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-r))<1&&(r--,l*=2),t+=r+d>=1?f/l:f*Math.pow(2,1-d),t*l>=2&&(r++,l/=2),r+d>=c?(s=0,r=c):r+d>=1?(s=(t*l-1)*Math.pow(2,a),r+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,a),r=0));a>=8;e[n+p]=255&s,p+=h,s/=256,a-=8);for(r=r<<a|s,u+=a;u>0;e[n+p]=255&r,p+=h,r/=256,u-=8);e[n+p-h]|=128*g},U={read:D,write:j},W=o,q=U;o.Varint=0,o.Fixed64=1,o.Bytes=2,o.Fixed32=5;var Z=4294967296,H=1/Z;o.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){var i=this;for(n=n||this.length;this.pos<n;){var a=i.readVarint(),o=a>>3,r=i.pos;i.type=7&a,e(o,t,i),i.pos===r&&i.skip(a)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=C(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=x(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=C(this.buf,this.pos)+C(this.buf,this.pos+4)*Z;return this.pos+=8,e},readSFixed64:function(){var e=C(this.buf,this.pos)+x(this.buf,this.pos+4)*Z;return this.pos+=8,e},readFloat:function(){var e=q.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=q.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,i=this.buf;return n=i[this.pos++],t=127&n,n<128?t:(n=i[this.pos++],t|=(127&n)<<7,n<128?t:(n=i[this.pos++],t|=(127&n)<<14,n<128?t:(n=i[this.pos++],t|=(127&n)<<21,n<128?t:(n=i[this.pos],t|=(15&n)<<28,r(t,e,this)))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=S(this.buf,this.pos,e);return this.pos=e,t},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){var n=this,i=s(this);for(e=e||[];this.pos<i;)e.push(n.readVarint(t));return e},readPackedSVarint:function(e){var t=this,n=s(this);for(e=e||[];this.pos<n;)e.push(t.readSVarint());return e},readPackedBoolean:function(e){var t=this,n=s(this);for(e=e||[];this.pos<n;)e.push(t.readBoolean());return e},readPackedFloat:function(e){var t=this,n=s(this);for(e=e||[];this.pos<n;)e.push(t.readFloat());return e},readPackedDouble:function(e){var t=this,n=s(this);for(e=e||[];this.pos<n;)e.push(t.readDouble());return e},readPackedFixed32:function(e){var t=this,n=s(this);for(e=e||[];this.pos<n;)e.push(t.readFixed32());return e},readPackedSFixed32:function(e){var t=this,n=s(this);for(e=e||[];this.pos<n;)e.push(t.readSFixed32());return e},readPackedFixed64:function(e){var t=this,n=s(this);for(e=e||[];this.pos<n;)e.push(t.readFixed64());return e},readPackedSFixed64:function(e){var t=this,n=s(this);for(e=e||[];this.pos<n;)e.push(t.readSFixed64());return e},skip:function(e){var t=7&e;if(t===o.Varint)for(;this.buf[this.pos++]>127;);else if(t===o.Bytes)this.pos=this.readVarint()+this.pos;else if(t===o.Fixed32)this.pos+=4;else{if(t!==o.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),M(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),M(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),M(this.buf,e&-1,this.pos),M(this.buf,Math.floor(e*H),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),M(this.buf,e&-1,this.pos),M(this.buf,Math.floor(e*H),this.pos+4),this.pos+=8},writeVarint:function(e){return e=+e||0,e>268435455||e<0?void u(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),void(e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127)))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=E(this.buf,e,this.pos);var n=this.pos-t;n>=128&&f(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),q.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),q.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=this,n=e.length;this.writeVarint(n),this.realloc(n);for(var i=0;i<n;i++)t.buf[t.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var i=this.pos-n;i>=128&&f(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeMessage:function(e,t,n){this.writeTag(e,o.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){this.writeMessage(e,p,t)},writePackedSVarint:function(e,t){this.writeMessage(e,h,t)},writePackedBoolean:function(e,t){this.writeMessage(e,v,t)},writePackedFloat:function(e,t){this.writeMessage(e,g,t)},writePackedDouble:function(e,t){this.writeMessage(e,m,t)},writePackedFixed32:function(e,t){this.writeMessage(e,_,t)},writePackedSFixed32:function(e,t){this.writeMessage(e,y,t)},writePackedFixed64:function(e,t){this.writeMessage(e,b,t)},writePackedSFixed64:function(e,t){this.writeMessage(e,w,t)},writeBytesField:function(e,t){this.writeTag(e,o.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,o.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,o.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,o.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,o.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,o.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,o.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,o.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,o.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,o.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var $=I;I.prototype={clone:function(){return new I(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),i=t*this.x-n*this.y,a=n*this.x+t*this.y;return this.x=i,this.y=a,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},I.convert=function(e){return e instanceof I?e:Array.isArray(e)?new I(e[0],e[1]):e};var X=$,Y=T;T.types=["Unknown","Point","LineString","Polygon"],T.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,i=1,a=0,o=0,r=0,s=[];e.pos<n;){if(!a){var l=e.readVarint();i=7&l,a=l>>3}if(a--,1===i||2===i)o+=e.readSVarint(),r+=e.readSVarint(),1===i&&(t&&s.push(t),t=[]),t.push(new X(o,r));else{if(7!==i)throw new Error("unknown command "+i);t&&t.push(t[0].clone())}}return t&&s.push(t),s},T.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,i=0,a=0,o=0,r=1/0,s=-(1/0),l=1/0,u=-(1/0);e.pos<t;){if(!i){var c=e.readVarint();n=7&c,i=c>>3}if(i--,1===n||2===n)a+=e.readSVarint(),o+=e.readSVarint(),a<r&&(r=a),a>s&&(s=a),o<l&&(l=o),o>u&&(u=o);else if(7!==n)throw new Error("unknown command "+n)}return[r,l,s,u]},T.prototype.toGeoJSON=function(e,t,n){function i(e){for(var t=0;t<e.length;t++){var n=e[t],i=180-360*(n.y+l)/r;e[t]=[360*(n.x+s)/r-180,360/Math.PI*Math.atan(Math.exp(i*Math.PI/180))-90]}}var a,o,r=this.extent*Math.pow(2,n),s=this.extent*e,l=this.extent*t,u=this.loadGeometry(),c=T.types[this.type];switch(this.type){case 1:var d=[];for(a=0;a<u.length;a++)d[a]=u[a][0];u=d,i(u);break;case 2:for(a=0;a<u.length;a++)i(u[a]);break;case 3:for(u=G(u),a=0;a<u.length;a++)for(o=0;o<u[a].length;o++)i(u[a][o])}1===u.length?u=u[0]:c="Multi"+c;var f={type:"Feature",geometry:{type:c,coordinates:u},properties:this.properties};return"id"in this&&(f.id=this.id),f};var Q=Y,J=R;R.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new Q(this._pbf,t,this.extent,this._keys,this._values)};var K=J,ee=F,te=ee;L.SVG.Tile=L.SVG.extend({initialize:function(e,t,n){L.SVG.prototype.initialize.call(this,n),this._tileCoord=e,this._size=t,this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._container.setAttribute("viewBox",[0,0,this._size.x,this._size.y].join(" ")),n.interactive&&(this._container.style.pointerEvents="auto"),this._layers={}},getCoord:function(){return this._tileCoord},getContainer:function(){return this._container},onAdd:L.Util.falseFn,addTo:function(e){if(this._map=e,this.options.interactive)for(var t in this._layers){var n=this._layers[t];this._map._targets[L.stamp(n._path)]=n}},_initContainer:function(){L.SVG.prototype._initContainer.call(this),L.SVG.create("rect")},_addPath:function(e){this._rootGroup.appendChild(e._path),this._layers[L.stamp(e)]=e},_updateIcon:function(e){var t=e._path=L.SVG.create("image"),n=e.options.icon,i=n.options,a=L.point(i.iconSize),o=i.iconAnchor||a&&a.divideBy(2,!0),r=e._point.subtract(o);t.setAttribute("x",r.x),t.setAttribute("y",r.y),t.setAttribute("width",a.x+"px"),t.setAttribute("height",a.y+"px"),t.setAttribute("href",i.iconUrl)}}),L.svg.tile=function(e,t,n){return new L.SVG.Tile(e,t,n)},L.VectorGrid=L.GridLayer.extend({options:{rendererFactory:L.svg.tile,vectorTileLayerStyles:{},interactive:!1},initialize:function(e){L.setOptions(this,e),L.GridLayer.prototype.initialize.apply(this,arguments),this.options.getFeatureId&&(this._vectorTiles={},this._overriddenStyles={},this.on("tileunload",function(e){delete this._vectorTiles[this._tileCoordsToKey(e.coords)]},this))},createTile:function(e,t){var n=this.options.getFeatureId,i=this.getTileSize(),a=this.options.rendererFactory(e,i,this.options),o=this._getVectorTilePromise(e);return n&&(this._vectorTiles[this._tileCoordsToKey(e)]=a,a._features={}),o.then(function(i){for(var o in i.layers){var r=i.layers[o],s=this.getTileSize().x/r.extent,l=this.options.vectorTileLayerStyles[o]||L.Path.prototype.options;for(var u in r.features){var c,d=r.features[u],f=l;if(n){c=this.options.getFeatureId(d);var p=this._overriddenStyles[c];p&&(f=p[o]?p[o]:p)}if(f instanceof Function&&(f=f(d.properties,e.z)),f instanceof Array||(f=[f]),f.length){var h=this._createLayer(d,s);for(var g in f){var m=L.extend({},L.Path.prototype.options,f[g]);h.render(a,m),a._addPath(h)}this.options.interactive&&h.makeInteractive(),n&&(a._features[c]={layerName:o,feature:h})}}}null!=this._map&&a.addTo(this._map),L.Util.requestAnimFrame(t.bind(e,null,null))}.bind(this)),a.getContainer()},setFeatureStyle:function(e,t){this._overriddenStyles[e]={};for(var n in this._vectorTiles){var i=this._vectorTiles[n],a=i._features,o=a[e];if(o){this._overriddenStyles[e]=t;var r=o.feature,s=t;t[o.layerName]&&(s=t[o.layerName]),s=s instanceof Function?s(r.properties,i.getCoord().z):s,this._updateStyles(r,i,s)}else this._overriddenStyles[e]=t}},resetFeatureStyle:function(e){delete this._overriddenStyles[e];for(var t in this._vectorTiles){var n=this._vectorTiles[t],i=n._features,a=i[e];if(a){var o=a.feature,r=this.options.vectorTileLayerStyles[a.layerName]||L.Path.prototype.options,s=r instanceof Function?r(o.properties,n.getCoord().z):r;this._updateStyles(o,n,s)}}},_updateStyles:function(e,t,n){n instanceof Array||(n=[n]);for(var i in n){var a=L.extend({},L.Path.prototype.options,n[i]);e.updateStyle(t,a)}},_createLayer:function(e,t,n){var i;switch(e.type){case 1:i=new ie(e,t);break;case 2:i=new oe(e,t);break;case 3:i=new re(e,t)}return this.options.interactive&&i.addEventParent(this),i}}),L.vectorGrid=function(e){return new L.VectorGrid(e)};var ne=L.Class.extend({render:function(e,t){this._renderer=e,this.options=t,e._initPath(this),e._updateStyle(this)},updateStyle:function(e,t){this.options=t,e._updateStyle(this)},_getPixelBounds:function(){for(var e=this._parts,t=L.bounds([]),n=0;n<e.length;n++)for(var i=e[n],a=0;a<i.length;a++)t.extend(i[a]);var o=this._clickTolerance(),r=new L.Point(o,o);return t.min._subtract(r),t.max._add(r),t},_clickTolerance:L.Path.prototype._clickTolerance}),ie=L.CircleMarker.extend({includes:ne.prototype,statics:{iconCache:{}},initialize:function(e,t){this.properties=e.properties,this._makeFeatureParts(e,t)},render:function(e,t){ne.prototype.render.call(this,e,t),this._radius=t.radius,this._updatePath()},_makeFeatureParts:function(e,t){var n=e.geometry[0][0];"x"in n&&(this._point=L.point(n.x*t,n.y*t),this._empty=L.Util.falseFn)},makeInteractive:function(){this._updateBounds()},updateStyle:function(e,t){return this._radius=t.radius||this._radius,this._updateBounds(),ne.prototype.updateStyle.call(this,e,t)},_updateBounds:function(){var e=this.options.icon;if(e){var t=L.point(e.options.iconSize),n=e.options.iconAnchor||t&&t.divideBy(2,!0),i=this._point.subtract(n);this._pxBounds=new L.Bounds(i,i.add(e.options.iconSize))}else L.CircleMarker.prototype._updateBounds.call(this)},_updatePath:function(){this.options.icon?this._renderer._updateIcon(this):L.CircleMarker.prototype._updatePath.call(this)},_getImage:function(){if(this.options.icon){var e=this.options.icon.options.iconUrl,t=ie.iconCache[e];if(!t){var n=this.options.icon;t=ie.iconCache[e]=n.createIcon()}return t}return null},_containsPoint:function(e){var t=this.options.icon;return t?this._pxBounds.contains(e):L.CircleMarker.prototype._containsPoint.call(this,e)}}),ae={_makeFeatureParts:function(e,t){var n,i=e.geometry;this._parts=[];for(var a in i){var o=i[a],r=[];for(var s in o)n=o[s],"x"in n?r.push(L.point(n.x*t,n.y*t)):r.push(L.point(n[0]*t,n[1]*t));this._parts.push(r)}},makeInteractive:function(){this._pxBounds=this._getPixelBounds()}},oe=L.Polyline.extend({includes:[ne.prototype,ae],initialize:function(e,t){this.properties=e.properties,this._makeFeatureParts(e,t)},render:function(e,t){t.fill=!1,ne.prototype.render.call(this,e,t),this._updatePath()},updateStyle:function(e,t){t.fill=!1,ne.prototype.updateStyle.call(this,e,t)}}),re=L.Polygon.extend({includes:[ne.prototype,ae],initialize:function(e,t){this.properties=e.properties,this._makeFeatureParts(e,t)},render:function(e,t){ne.prototype.render.call(this,e,t),this._updatePath()}});L.VectorGrid.Protobuf=L.VectorGrid.extend({options:{subdomains:"abc"},initialize:function(e,t){this._url=e,L.VectorGrid.prototype.initialize.call(this,t)},_getSubdomain:L.TileLayer.prototype._getSubdomain,_getVectorTilePromise:function(e){var t={s:this._getSubdomain(e),x:e.x,y:e.y,z:e.z};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=n),t["-y"]=n}var i=L.Util.template(this._url,L.extend(t,this.options));return fetch(i).then(function(e){return e.ok?e.blob().then(function(e){var t=new FileReader;return new N.default(function(n){t.addEventListener("loadend",function(){var e=new W(t.result);return n(new te(e))}),t.readAsArrayBuffer(e)})}):{layers:[]}}).then(function(e){for(var t in e.layers){for(var n=[],i=0;i<e.layers[t].length;i++){var a=e.layers[t].feature(i);a.geometry=a.loadGeometry(),n.push(a)}e.layers[t].features=n}return e})}}),L.vectorGrid.protobuf=function(e,t){return new L.VectorGrid.Protobuf(e,t)};var se=a('"use strict";function simplify$1(e,t){var r,n,o,i,a=t*t,s=e.length,u=0,c=s-1,l=[];for(e[u][2]=1,e[c][2]=1;c;){for(n=0,r=u+1;r<c;r++)o=getSqSegDist(e[r],e[u],e[c]),o>n&&(i=r,n=o);n>a?(e[i][2]=n,l.push(u),l.push(i),u=i):(c=l.pop(),u=l.pop())}}function getSqSegDist(e,t,r){var n=t[0],o=t[1],i=r[0],a=r[1],s=e[0],u=e[1],c=i-n,l=a-o;if(0!==c||0!==l){var f=((s-n)*c+(u-o)*l)/(c*c+l*l);f>1?(n=i,o=a):f>0&&(n+=c*f,o+=l*f)}return c=s-n,l=u-o,c*c+l*l}function createFeature$1(e,t,r,n){var o={id:n||null,type:t,geometry:r,tags:e||null,min:[1/0,1/0],max:[-(1/0),-(1/0)]};return calcBBox(o),o}function calcBBox(e){var t=e.geometry,r=e.min,n=e.max;if(1===e.type)calcRingBBox(r,n,t);else for(var o=0;o<t.length;o++)calcRingBBox(r,n,t[o]);return e}function calcRingBBox(e,t,r){for(var n,o=0;o<r.length;o++)n=r[o],e[0]=Math.min(n[0],e[0]),t[0]=Math.max(n[0],t[0]),e[1]=Math.min(n[1],e[1]),t[1]=Math.max(n[1],t[1])}function convert$1(e,t){var r=[];if("FeatureCollection"===e.type)for(var n=0;n<e.features.length;n++)convertFeature(r,e.features[n],t);else"Feature"===e.type?convertFeature(r,e,t):convertFeature(r,{geometry:e},t);return r}function convertFeature(e,t,r){if(null!==t.geometry){var n,o,i,a,s=t.geometry,u=s.type,c=s.coordinates,l=t.properties,f=t.id;if("Point"===u)e.push(createFeature(l,1,[projectPoint(c)],f));else if("MultiPoint"===u)e.push(createFeature(l,1,project(c),f));else if("LineString"===u)e.push(createFeature(l,2,[project(c,r)],f));else if("MultiLineString"===u||"Polygon"===u){for(i=[],n=0;n<c.length;n++)a=project(c[n],r),"Polygon"===u&&(a.outer=0===n),i.push(a);e.push(createFeature(l,"Polygon"===u?3:2,i,f))}else if("MultiPolygon"===u){for(i=[],n=0;n<c.length;n++)for(o=0;o<c[n].length;o++)a=project(c[n][o],r),a.outer=0===o,i.push(a);e.push(createFeature(l,3,i,f))}else{if("GeometryCollection"!==u)throw new Error("Input data is not a valid GeoJSON object.");for(n=0;n<s.geometries.length;n++)convertFeature(e,{geometry:s.geometries[n],properties:l},r)}}}function project(e,t){for(var r=[],n=0;n<e.length;n++)r.push(projectPoint(e[n]));return t&&(simplify(r,t),calcSize(r)),r}function projectPoint(e){var t=Math.sin(e[1]*Math.PI/180),r=e[0]/360+.5,n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n=n<0?0:n>1?1:n,[r,n,0]}function calcSize(e){for(var t,r,n=0,o=0,i=0;i<e.length-1;i++)t=r||e[i],r=e[i+1],n+=t[0]*r[1]-r[0]*t[1],o+=Math.abs(r[0]-t[0])+Math.abs(r[1]-t[1]);e.area=Math.abs(n/2),e.dist=o}function transformTile(e,t){if(e.transformed)return e;var r,n,o,i=e.z2,a=e.x,s=e.y;for(r=0;r<e.features.length;r++){var u=e.features[r],c=u.geometry,l=u.type;if(1===l)for(n=0;n<c.length;n++)c[n]=transformPoint(c[n],t,i,a,s);else for(n=0;n<c.length;n++){var f=c[n];for(o=0;o<f.length;o++)f[o]=transformPoint(f[o],t,i,a,s)}}return e.transformed=!0,e}function transformPoint(e,t,r,n,o){var i=Math.round(t*(e[0]*r-n)),a=Math.round(t*(e[1]*r-o));return[i,a]}function clip$1(e,t,r,n,o,i,a,s){if(r/=t,n/=t,a>=r&&s<=n)return e;if(a>n||s<r)return null;for(var u=[],c=0;c<e.length;c++){var l,f,p=e[c],h=p.geometry,m=p.type;if(l=p.min[o],f=p.max[o],l>=r&&f<=n)u.push(p);else if(!(l>n||f<r)){var g=1===m?clipPoints(h,r,n,o):clipGeometry(h,r,n,o,i,3===m);g.length&&u.push(createFeature$2(p.tags,m,g,p.id))}}return u.length?u:null}function clipPoints(e,t,r,n){for(var o=[],i=0;i<e.length;i++){var a=e[i],s=a[n];s>=t&&s<=r&&o.push(a)}return o}function clipGeometry(e,t,r,n,o,i){for(var a=[],s=0;s<e.length;s++){var u,c,l,f=0,p=0,h=null,m=e[s],g=m.area,d=m.dist,v=m.outer,y=m.length,x=[];for(c=0;c<y-1;c++)u=h||m[c],h=m[c+1],f=p||u[n],p=h[n],f<t?p>r?(x.push(o(u,h,t),o(u,h,r)),i||(x=newSlice(a,x,g,d,v))):p>=t&&x.push(o(u,h,t)):f>r?p<t?(x.push(o(u,h,r),o(u,h,t)),i||(x=newSlice(a,x,g,d,v))):p<=r&&x.push(o(u,h,r)):(x.push(u),p<t?(x.push(o(u,h,t)),i||(x=newSlice(a,x,g,d,v))):p>r&&(x.push(o(u,h,r)),i||(x=newSlice(a,x,g,d,v))));u=m[y-1],f=u[n],f>=t&&f<=r&&x.push(u),l=x[x.length-1],i&&l&&(x[0][0]!==l[0]||x[0][1]!==l[1])&&x.push(x[0]),newSlice(a,x,g,d,v)}return a}function newSlice(e,t,r,n,o){return t.length&&(t.area=r,t.dist=n,void 0!==o&&(t.outer=o),e.push(t)),[]}function wrap$1(e,t,r){var n=e,o=clip$2(e,1,-1-t,t,0,r,-1,2),i=clip$2(e,1,1-t,2+t,0,r,-1,2);return(o||i)&&(n=clip$2(e,1,-t,1+t,0,r,-1,2)||[],o&&(n=shiftFeatureCoords(o,1).concat(n)),i&&(n=n.concat(shiftFeatureCoords(i,-1)))),n}function shiftFeatureCoords(e,t){for(var r=[],n=0;n<e.length;n++){var o,i=e[n],a=i.type;if(1===a)o=shiftCoords(i.geometry,t);else{o=[];for(var s=0;s<i.geometry.length;s++)o.push(shiftCoords(i.geometry[s],t))}r.push(createFeature$3(i.tags,a,o,i.id))}return r}function shiftCoords(e,t){var r=[];r.area=e.area,r.dist=e.dist;for(var n=0;n<e.length;n++)r.push([e[n][0]+t,e[n][1],e[n][2]]);return r}function createTile$1(e,t,r,n,o,i){for(var a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:n,z2:t,transformed:!1,min:[2,1],max:[-1,0]},s=0;s<e.length;s++){a.numFeatures++,addFeature(a,e[s],o,i);var u=e[s].min,c=e[s].max;u[0]<a.min[0]&&(a.min[0]=u[0]),u[1]<a.min[1]&&(a.min[1]=u[1]),c[0]>a.max[0]&&(a.max[0]=c[0]),c[1]>a.max[1]&&(a.max[1]=c[1])}return a}function addFeature(e,t,r,n){var o,i,a,s,u=t.geometry,c=t.type,l=[],f=r*r;if(1===c)for(o=0;o<u.length;o++)l.push(u[o]),e.numPoints++,e.numSimplified++;else for(o=0;o<u.length;o++)if(a=u[o],n||!(2===c&&a.dist<r||3===c&&a.area<f)){var p=[];for(i=0;i<a.length;i++)s=a[i],(n||s[2]>f)&&(p.push(s),e.numSimplified++),e.numPoints++;3===c&&rewind(p,a.outer),l.push(p)}else e.numPoints+=a.length;if(l.length){var h={geometry:l,type:c,tags:t.tags||null};null!==t.id&&(h.id=t.id),e.features.push(h)}}function rewind(e,t){var r=signedArea(e);r<0===t&&e.reverse()}function signedArea(e){for(var t,r,n=0,o=0,i=e.length,a=i-1;o<i;a=o++)t=e[o],r=e[a],n+=(r[0]-t[0])*(t[1]+r[1]);return n}function geojsonvt(e,t){return new GeoJSONVT(e,t)}function GeoJSONVT(e,t){t=this.options=extend(Object.create(this.options),t);var r=t.debug;r&&console.time("preprocess data");var n=1<<t.maxZoom,o=convert(e,t.tolerance/(n*t.extent));this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),o=wrap(o,t.buffer/t.extent,intersectX),o.length&&this.splitTile(o,0,0,0),r&&(o.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function toID(e,t,r){return 32*((1<<e)*r+t)+e}function intersectX(e,t,r){return[r,(r-e[0])*(t[1]-e[1])/(t[0]-e[0])+e[1],1]}function intersectY(e,t,r){return[(r-e[1])*(t[0]-e[0])/(t[1]-e[1])+e[0],r,1]}function extend(e,t){for(var r in t)e[r]=t[r];return e}function isClippedSquare(e,t,r){var n=e.source;if(1!==n.length)return!1;var o=n[0];if(3!==o.type||o.geometry.length>1)return!1;var i=o.geometry[0].length;if(5!==i)return!1;for(var a=0;a<i;a++){var s=transform.point(o.geometry[0][a],t,e.z2,e.x,e.y);if(s[0]!==-r&&s[0]!==t+r||s[1]!==-r&&s[1]!==t+r)return!1}return!0}function feature$3(e,t){var r=t.id,n=t.bbox,o=null==t.properties?{}:t.properties,i=object(e,t);return null==r&&null==n?{type:"Feature",properties:o,geometry:i}:null==n?{type:"Feature",id:r,properties:o,geometry:i}:{type:"Feature",id:r,bbox:n,properties:o,geometry:i}}function object(e,t){function r(e,t){t.length&&t.pop();for(var r=c[e<0?~e:e],n=0,o=r.length;n<o;++n)t.push(u(r[n].slice(),n));e<0&&reverse(t,o)}function n(e){return u(e.slice())}function o(e){for(var t=[],n=0,o=e.length;n<o;++n)r(e[n],t);return t.length<2&&t.push(t[0].slice()),t}function i(e){for(var t=o(e);t.length<4;)t.push(t[0].slice());return t}function a(e){return e.map(i)}function s(e){var t,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(s)};case"Point":t=n(e.coordinates);break;case"MultiPoint":t=e.coordinates.map(n);break;case"LineString":t=o(e.arcs);break;case"MultiLineString":t=e.arcs.map(o);break;case"Polygon":t=a(e.arcs);break;case"MultiPolygon":t=e.arcs.map(a);break;default:return null}return{type:r,coordinates:t}}var u=transform$3(e),c=e.arcs;return s(t)}function meshArcs(e,t,r){var n,o,i;if(arguments.length>1)n=extractArcs(e,t,r);else for(o=0,n=new Array(i=e.arcs.length);o<i;++o)n[o]=o;return{type:"MultiLineString",arcs:stitch(e,n)}}function extractArcs(e,t,r){function n(e){var t=e<0?~e:e;(l[t]||(l[t]=[])).push({i:e,g:u})}function o(e){e.forEach(n)}function i(e){e.forEach(o)}function a(e){e.forEach(i)}function s(e){switch(u=e,e.type){case"GeometryCollection":e.geometries.forEach(s);break;case"LineString":o(e.arcs);break;case"MultiLineString":case"Polygon":i(e.arcs);break;case"MultiPolygon":a(e.arcs)}}var u,c=[],l=[];return s(t),l.forEach(null==r?function(e){c.push(e[0].i)}:function(e){r(e[0].g,e[e.length-1].g)&&c.push(e[0].i)}),c}function planarRingArea(e){for(var t,r=-1,n=e.length,o=e[n-1],i=0;++r<n;)t=o,o=e[r],i+=t[0]*o[1]-t[1]*o[0];return Math.abs(i)}function mergeArcs(e,t){function r(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(r);break;case"Polygon":n(e.arcs);break;case"MultiPolygon":e.arcs.forEach(n)}}function n(e){e.forEach(function(t){t.forEach(function(t){(i[t=t<0?~t:t]||(i[t]=[])).push(e)})}),a.push(e)}function o(t){return planarRingArea(object(e,{type:"Polygon",arcs:[t]}).coordinates[0])}var i={},a=[],s=[];return t.forEach(r),a.forEach(function(e){if(!e._){var t=[],r=[e];for(e._=1,s.push(t);e=r.pop();)t.push(e),e.forEach(function(e){e.forEach(function(e){i[e<0?~e:e].forEach(function(e){e._||(e._=1,r.push(e))})})})}}),a.forEach(function(e){delete e._}),{type:"MultiPolygon",arcs:s.map(function(t){var r,n=[];if(t.forEach(function(e){e.forEach(function(e){e.forEach(function(e){i[e<0?~e:e].length<2&&n.push(e)})})}),n=stitch(e,n),(r=n.length)>1)for(var a,s,u=1,c=o(n[0]);u<r;++u)(a=o(n[u]))>c&&(s=n[0],n[0]=n[u],n[u]=s,c=a);return n})}}var simplify_1=simplify$1,feature=createFeature$1,convert_1=convert$1,simplify=simplify_1,createFeature=feature,tile=transformTile,point=transformPoint,transform$1={tile:tile,point:point},clip_1=clip$1,createFeature$2=feature,clip$2=clip_1,createFeature$3=feature,wrap_1=wrap$1,tile$1=createTile$1,index=geojsonvt,convert=convert_1,transform=transform$1,clip=clip_1,wrap=wrap_1,createTile=tile$1;GeoJSONVT.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,solidChildren:!1,tolerance:3,extent:4096,buffer:64,debug:0},GeoJSONVT.prototype.splitTile=function(e,t,r,n,o,i,a){for(var s=this,u=[e,t,r,n],c=this.options,l=c.debug,f=null;u.length;){n=u.pop(),r=u.pop(),t=u.pop(),e=u.pop();var p=1<<t,h=toID(t,r,n),m=s.tiles[h],g=t===c.maxZoom?0:c.tolerance/(p*c.extent);if(!m&&(l>1&&console.time("creation"),m=s.tiles[h]=createTile(e,p,r,n,g,t===c.maxZoom),s.tileCoords.push({z:t,x:r,y:n}),l)){l>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,r,n,m.numFeatures,m.numPoints,m.numSimplified),console.timeEnd("creation"));var d="z"+t;s.stats[d]=(s.stats[d]||0)+1,s.total++}if(m.source=e,o){if(t===c.maxZoom||t===o)continue;var v=1<<o-t;if(r!==Math.floor(i/v)||n!==Math.floor(a/v))continue}else if(t===c.indexMaxZoom||m.numPoints<=c.indexMaxPoints)continue;if(c.solidChildren||!isClippedSquare(m,c.extent,c.buffer)){m.source=null,l>1&&console.time("clipping");var y,x,b,P,M,S,E=.5*c.buffer/c.extent,F=.5-E,$=.5+E,w=1+E;y=x=b=P=null,M=clip(e,p,r-E,r+$,0,intersectX,m.min[0],m.max[0]),S=clip(e,p,r+F,r+w,0,intersectX,m.min[0],m.max[0]),M&&(y=clip(M,p,n-E,n+$,1,intersectY,m.min[1],m.max[1]),x=clip(M,p,n+F,n+w,1,intersectY,m.min[1],m.max[1])),S&&(b=clip(S,p,n-E,n+$,1,intersectY,m.min[1],m.max[1]),P=clip(S,p,n+F,n+w,1,intersectY,m.min[1],m.max[1])),l>1&&console.timeEnd("clipping"),e.length&&(u.push(y||[],t+1,2*r,2*n),u.push(x||[],t+1,2*r,2*n+1),u.push(b||[],t+1,2*r+1,2*n),u.push(P||[],t+1,2*r+1,2*n+1))}else o&&(f=t)}return f},GeoJSONVT.prototype.getTile=function(e,t,r){var n=this,o=this.options,i=o.extent,a=o.debug,s=1<<e;t=(t%s+s)%s;var u=toID(e,t,r);if(this.tiles[u])return transform.tile(this.tiles[u],i);a>1&&console.log("drilling down to z%d-%d-%d",e,t,r);for(var c,l=e,f=t,p=r;!c&&l>0;)l--,f=Math.floor(f/2),p=Math.floor(p/2),c=n.tiles[toID(l,f,p)];if(!c||!c.source)return null;if(a>1&&console.log("found parent tile z%d-%d-%d",l,f,p),isClippedSquare(c,i,o.buffer))return transform.tile(c,i);a>1&&console.time("drilling down");var h=this.splitTile(c.source,l,f,p,e,t,r);if(a>1&&console.timeEnd("drilling down"),null!==h){var m=1<<e-h;u=toID(h,Math.floor(t/m),Math.floor(r/m))}return this.tiles[u]?transform.tile(this.tiles[u],i):null};var identity=function(e){return e},transform$3=function(e){if(null==(t=e.transform))return identity;var t,r,n,o=t.scale[0],i=t.scale[1],a=t.translate[0],s=t.translate[1];return function(e,t){return t||(r=n=0),e[0]=(r+=e[0])*o+a,e[1]=(n+=e[1])*i+s,e}},bbox=function(e){function t(e){s[0]=e[0],s[1]=e[1],a(s),s[0]<u&&(u=s[0]),s[0]>l&&(l=s[0]),s[1]<c&&(c=s[1]),s[1]>f&&(f=s[1])}function r(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(r);break;case"Point":t(e.coordinates);break;case"MultiPoint":e.coordinates.forEach(t)}}var n=e.bbox;if(!n){var o,i,a=transform$3(e),s=new Array(2),u=1/0,c=u,l=-u,f=-u;e.arcs.forEach(function(e){for(var t=-1,r=e.length;++t<r;)o=e[t],s[0]=o[0],s[1]=o[1],a(s,t),s[0]<u&&(u=s[0]),s[0]>l&&(l=s[0]),s[1]<c&&(c=s[1]),s[1]>f&&(f=s[1])});for(i in e.objects)r(e.objects[i]);n=e.bbox=[u,c,l,f]}return n},reverse=function(e,t){for(var r,n=e.length,o=n-t;o<--n;)r=e[o],e[o++]=e[n],e[n]=r},feature$2=function(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return feature$3(e,t)})}:feature$3(e,t)},stitch=function(e,t){function r(t){var r,n=e.arcs[t<0?~t:t],o=n[0];return e.transform?(r=[0,0],n.forEach(function(e){r[0]+=e[0],r[1]+=e[1]})):r=n[n.length-1],t<0?[r,o]:[o,r]}function n(e,t){for(var r in e){var n=e[r];delete t[n.start],delete n.start,delete n.end,n.forEach(function(e){o[e<0?~e:e]=1}),s.push(n)}}var o={},i={},a={},s=[],u=-1;return t.forEach(function(r,n){var o,i=e.arcs[r<0?~r:r];i.length<3&&!i[1][0]&&!i[1][1]&&(o=t[++u],t[u]=r,t[n]=o)}),t.forEach(function(e){var t,n,o=r(e),s=o[0],u=o[1];if(t=a[s])if(delete a[t.end],t.push(e),t.end=u,n=i[u]){delete i[n.start];var c=n===t?t:t.concat(n);i[c.start=t.start]=a[c.end=n.end]=c}else i[t.start]=a[t.end]=t;else if(t=i[u])if(delete i[t.start],t.unshift(e),t.start=s,n=a[s]){delete a[n.end];var l=n===t?t:n.concat(t);i[l.start=n.start]=a[l.end=t.end]=l}else i[t.start]=a[t.end]=t;else t=[e],i[t.start=s]=a[t.end=u]=t}),n(a,i),n(i,a),t.forEach(function(e){o[e<0?~e:e]||s.push([e])}),s},bisect=function(e,t){for(var r=0,n=e.length;r<n;){var o=r+n>>>1;e[o]<t?r=o+1:n=o}return r},slicers={},options;onmessage=function(e){if("slice"===e.data[0]){var t=e.data[1];if(options=e.data[2],t.type&&"Topology"===t.type)for(var r in t.objects)slicers[r]=index(feature$2(t,t.objects[r]),options);else slicers[options.vectorTileLayerName]=index(t,options)}else if("get"===e.data[0]){var n=e.data[1],o={};for(var r in slicers){var i=slicers[r].getTile(n.z,n.x,n.y);if(i){var a={features:[],extent:options.extent,name:options.vectorTileLayerName,length:i.features.length};for(var s in i.features){var u={geometry:i.features[s].geometry,properties:i.features[s].tags,type:i.features[s].type};a.features.push(u)}o[r]=a}}postMessage({layers:o,coords:n})}};\n',"text/plain; charset=us-ascii",!1);
L.VectorGrid.Slicer=L.VectorGrid.extend({options:{vectorTileLayerName:"sliced",extent:4096,maxZoom:14},initialize:function(e,t){L.VectorGrid.prototype.initialize.call(this,t);var t={};for(var n in this.options)"rendererFactory"!==n&&"vectorTileLayerStyles"!==n&&"function"!=typeof this.options[n]&&(t[n]=this.options[n]);this._worker=new Worker(se),this._worker.postMessage(["slice",e,t])},_getVectorTilePromise:function(e){var t=this,n=new N.default(function(n){t._worker.addEventListener("message",function i(a){a.data.coords&&a.data.coords.x===e.x&&a.data.coords.y===e.y&&a.data.coords.z===e.z&&(n(a.data),t._worker.removeEventListener("message",i))})});return this._worker.postMessage(["get",e]),n}}),L.vectorGrid.slicer=function(e,t){return new L.VectorGrid.Slicer(e,t)},L.Canvas.Tile=L.Canvas.extend({initialize:function(e,t,n){L.Canvas.prototype.initialize.call(this,n),this._tileCoord=e,this._size=t,this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._layers={},this._drawnLayers={},this._drawing=!0,n.interactive&&(this._container.style.pointerEvents="auto")},getCoord:function(){return this._tileCoord},getContainer:function(){return this._container},getOffset:function(){return this._tileCoord.scaleBy(this._size).subtract(this._map.getPixelOrigin())},onAdd:L.Util.falseFn,addTo:function(e){this._map=e},_onClick:function(e){var t,n=this._map.mouseEventToLayerPoint(e).subtract(this.getOffset()),i=[];for(var a in this._layers)t=this._layers[a],t.options.interactive&&t._containsPoint(n)&&!this._map._draggableMoved(t)&&(L.DomEvent._fakeStop(e),i.push(t));i.length&&this._fireEvent(i,e)},_onMouseMove:function(e){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e).subtract(this.getOffset());this._handleMouseOut(e,t),this._handleMouseHover(e,t)}},_updateIcon:function(e){if(this._drawing){var t=e.options.icon,n=t.options,i=L.point(n.iconSize),a=n.iconAnchor||i&&i.divideBy(2,!0),o=e._point.subtract(a),r=this._ctx,s=e._getImage();s.complete?r.drawImage(s,o.x,o.y,i.x,i.y):L.DomEvent.on(s,"load",function(){r.drawImage(s,o.x,o.y,i.x,i.y)}),this._drawnLayers[e._leaflet_id]=e}}}),L.canvas.tile=function(e,t,n){return new L.Canvas.Tile(e,t,n)}},function(e,t){"use strict";Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t=Object(this),n=t.length>>>0,i=arguments[1],a=0;a!==n;a++)if(e.call(i,this[a],a,t))return this[a]}})},function(e,t){"use strict";Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],a=0;a<n;){var o=t[a];if(e.call(i,o,a,t))return a;a++}return-1}})},function(e,t){"use strict";String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(t||0,e.length)===e})},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=""+s.default.RL_AG_APP_LISTA_MAPPE+e;return o.default.get(t).then(function(e){return e.data.data})};var a=n(4),o=i(a),r=n(5),s=i(r)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=GV.globals.ATLANTE_GEOCHIMICO_CONFIG_URL;return o.default.get(e).then(function(e){return e.data.data})};var a=n(4),o=i(a)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(40),o=i(a),r=n(39),s=i(r),l=n(4),u=i(l);t.default=function(){function e(e){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(t){var n,i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/geoservices/REST/utils/autorizza_nam/GEOVIEWER/"+t,e.next=3,u.default.get(n);case 3:return i=e.sent,e.abrupt("return",i.data);case 5:case"end":return e.stop()}},e,this)}));return e}()},,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(){var e=l.default.RL_ENTI_SERVICE;return r.default.get(e).then(function(e){return e.data.data})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(4),r=i(o),s=n(5),l=i(s)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(40),o=i(a),r=n(39),s=i(r),l=n(4),u=i(l);t.default=function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="/geoservices/apps/viewer/pages/env.json",e.next=3,u.default.get(t);case 3:return n=e.sent,e.abrupt("return",n.data.ENV);case 5:case"end":return e.stop()}},e,this)}));return e}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=e.features;return e.features.forEach(function(e,n){e.id=t+"."+n}),n}function o(e,t){var n={};return s.default.get(e,{params:n}).then(function(e){var n=e.data,i=a(n,t);return i})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=n(4),s=i(r)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};return r.default.get(e,{params:n}).then(function(e){var n={layerName:t,id:"1",label:"1",text:e.data,properties:null};return[n]})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(4),r=i(o)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=(new c).xml_str2json(e),i=[];return n.FeatureCollection&&n.FeatureCollection.featureMember&&(Array.isArray(n.FeatureCollection.featureMember)?n.FeatureCollection.featureMember.forEach(function(e,n){var a=e[(0,s.default)(e)[0]],o={},r=!1;(0,s.default)(a).forEach(function(e,t){"__prefix"!==e&&"__text"!==e&&"toString"!==e&&(o[e]=a[e].__text,r=!0)}),r&&i.push({type:"Feature",id:t+"."+n,geometry:null,properties:o})}):!function(){var e=n.FeatureCollection.featureMember,a=e[(0,s.default)(e)[0]],o={},r=!1,l=0;(0,s.default)(a).forEach(function(e,t){"__prefix"!==e&&"__text"!==e&&"toString"!==e&&(o[e]=a[e].__text,r=!0)}),r&&i.push({type:"Feature",id:t+"."+l,geometry:null,properties:o})}()),n.msGMLOutput&&(0,s.default)(n.msGMLOutput).forEach(function(e,t){e.indexOf("_layer")>=0&&!function(){var t=e.replace("_layer",""),a=n.msGMLOutput[e];(0,s.default)(a).forEach(function(e,n){var o=a[e];Array.isArray(o)?o.forEach(function(e){var a=e;i.push({type:"Feature",id:t+"."+n,geometry:null,properties:a})}):!function(){var e={},a=!1;(0,s.default)(o).forEach(function(t,n){"__prefix"!==t&&"__text"!==t&&"toString"!==t&&(e[t]=o[t],a=!0)}),a&&i.push({type:"Feature",id:t+"."+n,geometry:null,properties:e})}()})}()}),i}function o(e,t){var n={};return u.default.get(e,{params:n}).then(function(e){var n=e.data,i=a(n,t);return i})}Object.defineProperty(t,"__esModule",{value:!0});var r=n(61),s=i(r);t.default=o;var l=n(4),u=i(l),c=n(114)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=t.layerName?t.layerName.replace("L",""):null,i=t.layer&&t.layer.legend?t.layer.legend.label:null;return r.default.post(l.default.RL_XSL_INFO_SERVICE,{data:{xslUrl:e,gml:t.gml,idLayer:n,titolo:i,featureAttributes:t.properties,text:t.text}}).then(function(e){return e.data})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(4),r=i(o),s=n(5),l=i(s),u=n(87);i(u)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t="/geoservices/REST/fototeca/voli/";return e&&(t+="?bbox="+e),o.default.get(t).then(function(e){return e.data.data})};var a=n(4),o=i(a),r=n(5);i(r)},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return o.default.get(e).then(function(e){return e.data.data})};var a=n(4),o=i(a)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return o.default.get(e).then(function(e){return e.data.features})};var a=n(4),o=i(a)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(40),o=i(a),r=n(39),s=i(r),l=n(4),u=i(l);t.default=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.default.get(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={mapview:"7.43,43.75;10.00,44.70",searchtext:e.replace("INCROCIO","@")};return o.default.get(s.default.HERE_GEOCODE_PROXY,{params:t}).then(function(e){return e.data.Response.View[0].Result.map(function(e){return{relevance:e.Relevance,match_level:e.MatchLevel,match_type:e.MatchType,formatted_address:e.Location.Address.Label,place_id:e.Location.LocationId,geometry:{location:{lat:e.Location.DisplayPosition.Latitude,lng:e.Location.DisplayPosition.Longitude}}}})})};var a=n(4),o=i(a),r=n(5),s=i(r)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={"boundary.gid":"whosonfirst:macroregion:404227507",text:e};return o.default.get("http://10.11.6.189:4000/v1/search",{params:t}).then(function(e){return e.data})};var a=n(4),o=i(a)},,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var i=t&&"genio"===t&&n?"/geoservices/REST/genioweb/get_token/"+n+"/":"/geoservices/REST/sigmater/get_token/";return i+=e,o.default.get(i).then(function(e){return e.data})};var a=n(4),o=i(a)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t="/geoservices/REST/sigmater/get_token_bbox/"+e;return o.default.get(t).then(function(e){return e.data})};var a=n(4),o=i(a)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i){var a="/geoservices/REST/config/ag_insert_coordinate?idSession="+e+"&coord_x="+t+"&coord_y="+n+"&esito="+i;o.default.get(a).then(function(e){GV.globals.flagInsert=!0,e.data.success?(GV.globals.flagInsert=!0,(0,s.default)()?window.history.back(-1):window.close()):alert("Attenzione: - "+e.data.message)})};var a=n(4),o=i(a),r=n(158),s=i(r)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return o.default.post("/geoservices/REST/genioweb/insert_geom_pratica",{headers:{Accept:"text/xml"},data:e}).then(function(e){return e.data})};var a=n(4),o=i(a),r=n(5);i(r)},,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=i(a),r=n(638),s=i(r),l=n(669),u=i(l),c=n(666),d=i(c),f=n(646),p=i(f),h=n(671),g=i(h),m=n(683),v=i(m),_=n(674),y=i(_),b=n(686),L=i(b),w=n(676),C=i(w),M=n(675),x=i(M),S=n(684),E=i(S),I=n(685),T=i(I),A=n(619),O=i(A),G=n(670),P=i(G),R=n(634),V=i(R),k=n(688),F=i(k),z=n(689),B=i(z),N=n(687),D=i(N),j=n(667),U=i(j),W=n(680),q=i(W),Z=n(682),H=i(Z),$=n(673),X=i($),Y=n(672),Q=i(Y),J=n(633),K=i(J),ee=n(677),te=i(ee),ne=n(678),ie=i(ne),ae=n(679),oe=i(ae),re=n(681),se=i(re),le=n(639),ue=i(le),ce=n(664),de=i(ce),fe=[];fe.push({name:"gv-geocoder"}),o.default.component("gv-geocoder",s.default),fe.push({name:"gv-search"}),o.default.component("gv-search",u.default),fe.push({name:"gv-scalebar"}),o.default.component("gv-scalebar",d.default),fe.push({name:"gv-inner-html"}),o.default.component("gv-inner-html",p.default),fe.push({name:"gv-add-map-button"}),o.default.component("gv-add-map-button",g.default),fe.push({name:"gv-info-button"}),o.default.component("gv-info-button",v.default),fe.push({name:"gv-coordinate-button"}),o.default.component("gv-coordinate-button",y.default),fe.push({name:"gv-measure-button"}),o.default.component("gv-measure-button",L.default),fe.push({name:"gv-draw-button"}),o.default.component("gv-draw-button",C.default),fe.push({name:"gv-download-totale-button"}),o.default.component("gv-download-totale-button",x.default),fe.push({name:"gv-layer-search-button"}),o.default.component("gv-layer-search-button",E.default),fe.push({name:"gv-layer-search-topo-button"}),o.default.component("gv-layer-search-topo-button",T.default),fe.push({name:"atlante-geochimico-livelli"}),o.default.component("atlante-geochimico-livelli",O.default),fe.push({name:"gv-map-selezione-fogli"}),o.default.component("gv-map-selezione-fogli",P.default),fe.push({name:"gv-gas"}),o.default.component("gv-gas",V.default),fe.push({name:"gv-ricerca-particella-button"}),o.default.component("gv-ricerca-particella-button",F.default),fe.push({name:"gv-ricerca-catastale-button"}),o.default.component("gv-ricerca-catastale-button",B.default),fe.push({name:"gv-print-button"}),o.default.component("gv-print-button",D.default),fe.push({name:"gv-scuoladigitale-legend"}),o.default.component("gv-scuoladigitale-legend",U.default),fe.push({name:"gv-genio-localizza-button"}),o.default.component("gv-genio-localizza-button",q.default),fe.push({name:"gv-genio-seleziona-particelle-button"}),o.default.component("gv-genio-seleziona-particelle-button",H.default),fe.push({name:"gv-cem-elaborazioni-button"}),o.default.component("gv-cem-elaborazioni-button",X.default),fe.push({name:"gv-back-button"}),o.default.component("gv-back-button",Q.default),fe.push({name:"gv-fototeca-voli"}),o.default.component("gv-fototeca-voli",K.default),fe.push({name:"gv-fototeca-carrello-button"}),o.default.component("gv-fototeca-carrello-button",te.default),fe.push({name:"gv-fototeca-scheda-volo-button"}),o.default.component("gv-fototeca-scheda-volo-button",ie.default),fe.push({name:"gv-fototeca-selezione-territoriale-button"}),o.default.component("gv-fototeca-selezione-territoriale-button",oe.default),fe.push({name:"gv-genio-pratiche-collegate-button"}),o.default.component("gv-genio-pratiche-collegate-button",se.default),fe.push({name:"gv-geocoder-pelias"}),o.default.component("gv-geocoder-pelias",ue.default),fe.push({name:"rqa-livelli"}),o.default.component("rqa-livelli",de.default),t.default=fe},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[],n=e.fields;e.values.split(",").forEach(function(e){t.push(n+"='"+e+"'")});var i=encodeURIComponent(t.join(" OR "));return i}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,o.default)("FIND_MAP")||(0,o.default)("ID")||(0,o.default)("id"),t=(0,o.default)("FIND_LAYERS")?(0,o.default)("FIND_LAYERS").split(","):null,n=(0,o.default)("FIND_FIELDS"),i=(0,o.default)("FIND_VALUES"),a=(0,o.default)("FIND_CQL_FILTER");return{map:e,layers:t,fields:n,values:i,cqlFilter:a}};var a=n(155),o=i(a)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.elType||"div",n=e.containerId||"gv-container",i=e.elId,a=e.clear;a&&document.getElementById(i)&&document.getElementById(i).remove();var o=document.createElement(t);return o.id=i,document.getElementById(n)?document.getElementById(n).appendChild(o):(console.log("Elemento "+n+" non trovato faccio mount su body"),document.body.appendChild(o)),o}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=null;window.document.body.setAttribute("ondrop","GV.dragbox.drop(event)"),t.default={start:function(e){n=[e.screenX,e.screenY],e.dataTransfer.setData("text/plain",e.target.id)},end:function(e,t){var i=document.getElementById(t),a=window.getComputedStyle(i,null),o=[e.screenX,e.screenY];i.style.top=Number(a.top.replace("px",""))+(o[1]-n[1])+"px",i.style.left=Number(a.left.replace("px",""))+(o[0]-n[0])+"px"},drop:function(e){"text"===e.target.type&&e.preventDefault()}}},function(e,t){"use strict";function n(){return window.location.href.split(":")[0]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(){return window.matchMedia("(pointer: coarse)").matches}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(e){GV.config.debug&&console.log(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(e,t,n){var a=function(e,i){for(var a,o=i.split(/\.+/),r=0;r<o.length;r++)0==r&&(a=t),a=a[o[r]];return"function"==typeof a&&(a=n?a.apply(null,n):a()),"undefined"==typeof a?"undefined":a};return e.replace(i,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=/\$\{([\w.]+?)\}/g},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},,function(e,t){},function(e,t){},,function(e,t){},function(e,t){},function(e,t){},,,function(e,t){},function(e,t){},,,function(e,t){},function(e,t){},,,,,function(e,t){},function(e,t){},function(e,t){},,function(e,t){},,function(e,t){},function(e,t){},function(e,t){},,,,,,,function(e,t){},function(e,t){},,,function(e,t){},function(e,t){},,,,function(e,t){},,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,function(e,t){},function(e,t){},function(e,t){},,function(e,t){},function(e,t){},function(e,t){},,,function(e,t){},,function(e,t){},,,,function(e,t){},,,,,function(e,t){},,,,,function(e,t){},,function(e,t){},function(e,t){},function(e,t){},,,,function(e,t){},function(e,t){},function(e,t){},,function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,,,,function(e,t){},function(e,t){},function(e,t){},,,,,,,,,,,,,,function(e,t,n){var i=n(489);"string"==typeof i&&(i=[[e.id,i,""]]);n(58)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(582);"string"==typeof i&&(i=[[e.id,i,""]]);n(58)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(583);"string"==typeof i&&(i=[[e.id,i,""]]);n(58)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(592);"string"==typeof i&&(i=[[e.id,i,""]]);n(58)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(593);"string"==typeof i&&(i=[[e.id,i,""]]);n(58)(i,{});i.locals&&(e.exports=i.locals)},,,,,,,function(e,t,n){var i,a;n(539),i=n(227);var o=n(731);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(580),n(579),i=n(228);var o=n(766);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-fac8391c",e.exports=i},,function(e,t,n){var i,a;n(530),i=n(230);var o=n(723);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-544d1aac",e.exports=i},,,function(e,t,n){var i,a;n(496),n(495),i=n(233);var o=n(695);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-110be177",e.exports=i},function(e,t,n){var i,a;n(529),i=n(234);var o=n(722);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},,,,,,function(e,t,n){var i,a;n(541),i=n(241);var o=n(733);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-65c0f46b",e.exports=i},,function(e,t,n){var i,a;n(538),i=n(244);var o=n(730);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-63c00d10",e.exports=i},function(e,t,n){var i,a;n(504),i=n(245);var o=n(700);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-1c17d97c",e.exports=i},,,,function(e,t,n){var i,a;n(516),i=n(249);var o=n(711);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-387aaf4a",e.exports=i},function(e,t,n){var i,a;n(518),i=n(250);var o=n(713);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-3e5de3c2",e.exports=i},function(e,t,n){var i,a;n(540),i=n(251);var o=n(732);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-651fb2b4",e.exports=i},,function(e,t,n){var i,a;n(542),i=n(253);var o=n(734);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-65d960b6",e.exports=i},,,,function(e,t,n){var i,a;n(556),i=n(257);var o=n(746);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-7ef00eca",e.exports=i},,,,,function(e,t,n){var i,a;n(511),i=n(262);var o=n(706);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(525),i=n(263);var o=n(719);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(512),i=n(265);var o=n(707);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-2f2f3045",e.exports=i},,,,,,,,,,,function(e,t,n){var i,a;n(501),n(500),i=n(278);var o=n(698);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-1a6c287c",e.exports=i},,function(e,t,n){var i,a;n(545),i=n(280);var o=n(737);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-714520f0",e.exports=i},function(e,t,n){var i,a;n(517),i=n(281);var o=n(712);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},,function(e,t,n){var i,a;n(550),i=n(283);var o=n(741);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(547),n(546),i=n(284);var o=n(738);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-72e9a1d6",e.exports=i},function(e,t,n){var i,a;n(493),i=n(286);var o=n(693);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(514),i=n(287);var o=n(709);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(534),i=n(288);var o=n(726);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(570),i=n(289);var o=n(758);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(573),i=n(290);var o=n(761);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(578),i=n(291);var o=n(765);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(537),i=n(292);var o=n(729);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(497),i=n(293);var o=n(696);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(505),i=n(294);var o=n(701);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(536),i=n(295);var o=n(728);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(560),i=n(296);var o=n(750);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(526),i=n(297);var o=n(720);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(554),i=n(298);var o=n(744);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(549),i=n(299);var o=n(740);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(572),i=n(300);var o=n(760);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(492),i=n(301);var o=n(692);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(510),i=n(302);var o=n(705);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(551),i=n(303);var o=n(742);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(490),i=n(304);var o=n(690);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-button-ricerca-catastale",title:"Ricerche Catastali"},on:{click:e.onClick}})},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-measure",title:e.title},on:{click:e.onClick}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-button-add-map",title:"Aggiungi Mappe"},on:{click:e.onClick}})},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{style:e.style,attrs:{id:"gv-cesium"}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-button-fototeca-scheda-volo",title:"Scheda Volo"},on:{click:e.onClick}})},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"rqa gv-color-scheme"},[e._c("div",{staticClass:"rqa-title gv-color-scheme"},[e._v("\n    RQA: Indicatori\n    "),e._c("button",{class:e.toggleCollapseClass(),attrs:{size:"mini",title:"Nascondi Pannello"},on:{click:e.hidePanel}})]),e._v(" "),e._c("div",{staticClass:"rqa-wrapper gv-color-scheme",attrs:{id:"rqa-wrapper"}},[e._c("div",{staticClass:"combo"},[e._c("el-select",{attrs:{placeholder:"Tipologia Indicatori",size:"mini"},on:{change:e.onChangeTipo},model:{value:e.tipo,callback:function(t){e.tipo=t},expression:"tipo"}},e._l(e.tipi,function(t){return e._c("el-option",{key:t.id,attrs:{value:t.id,label:t.label}})}))],1),e._v(" "),e._c("div",{directives:[{name:"show",rawName:"v-show",value:e.showIndicatoriGiorno,expression:"showIndicatoriGiorno"}],staticClass:"combo"},[e._c("el-select",{attrs:{filterable:"",placeholder:"Indicatori Giornalieri",size:"mini"},on:{change:e.onChangeIndicatore},model:{value:e.indicatore,callback:function(t){e.indicatore=t},expression:"indicatore"}},e._l(e.indicatoriGiorno,function(t){return e._c("el-option",{key:t.id,attrs:{value:t.id,label:t.nome}})}))],1),e._v(" "),e._c("div",{directives:[{name:"show",rawName:"v-show",value:e.showIndicatoriGiorno,expression:"showIndicatoriGiorno"}],staticClass:"combo"},[e._c("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"Giorno","value-format":"yyyy-MM-dd"},model:{value:e.giorno,callback:function(t){e.giorno=t},expression:"giorno"}})],1),e._v(" "),e._c("div",{directives:[{name:"show",rawName:"v-show",value:e.showIndicatoriAnno,expression:"showIndicatoriAnno"}],staticClass:"combo"
},[e._c("el-select",{attrs:{filterable:"",placeholder:"Indicatori Annuali",size:"mini"},on:{change:e.onChangeIndicatore},model:{value:e.indicatore,callback:function(t){e.indicatore=t},expression:"indicatore"}},e._l(e.indicatoriAnno,function(t){return e._c("el-option",{key:t.id,attrs:{value:t.id,label:t.nome}})}))],1),e._v(" "),e._c("div",{directives:[{name:"show",rawName:"v-show",value:e.showIndicatoriAnno,expression:"showIndicatoriAnno"}],staticClass:"combo"},[e._c("el-select",{attrs:{filterable:"",placeholder:"Anno",size:"mini"},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},e._l(e.anni,function(t){return e._c("el-option",{key:t.id,attrs:{value:t.id,label:t.label}})}))],1),e._v(" "),e._c("div",{directives:[{name:"show",rawName:"v-show",value:e.showLegend,expression:"showLegend"}]},[e._c("gv-iframe-panel",{staticClass:"gv-iframe-panel",attrs:{src:e.legendUrl,height:"141",width:"230"}})],1)])])},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"gv-gas gv-inverted-color-scheme",attrs:{id:"gv-gas"}},[e._c("gv-title",{directives:[{name:"draggable",rawName:"v-draggable"}],attrs:{title:e.title,divId:"gv-gas",noClose:!0,collapsible:"gv-gas-body",width:"255px"}}),e._v(" "),e._c("div",{staticClass:"gv-gas-body",attrs:{id:"gv-gas-body"}},[e._c("el-select",{staticClass:"gv-gas-combo",attrs:{placeholder:"Seleziona Area",size:"mini"},on:{change:e.onChangeArea},model:{value:e.area,callback:function(t){e.area=t},expression:"area"}},e._l(e.aree,function(t){return e._c("el-option",{key:t.codice,attrs:{value:t.codice,label:t.descrizione}})})),e._v(" "),e._c("el-select",{staticClass:"gv-gas-combo",attrs:{placeholder:"Seleziona Modulo",size:"mini"},model:{value:e.modulo,callback:function(t){e.modulo=t},expression:"modulo"}},e._l(e.moduli,function(t){return e._c("el-option",{key:t.codice,attrs:{value:t.codice,label:t.descrizione}})})),e._v(" "),e._c("div",{staticClass:"gv-gas-checkbox"},[e._c("el-checkbox",{model:{value:e.soloPostiDisponibili,callback:function(t){e.soloPostiDisponibili=t},expression:"soloPostiDisponibili"}},[e._v("Solo strutture con posti disponibili")])],1),e._v(" "),e._c("el-select",{staticClass:"gv-gas-combo",attrs:{placeholder:"Seleziona Provincia",size:"mini"},on:{change:e.onChangeProvincia},model:{value:e.provincia,callback:function(t){e.provincia=t},expression:"provincia"}},e._l(e.province,function(t){return e._c("el-option",{key:t.codice,attrs:{value:t.codice,label:t.descrizione}})})),e._v(" "),e._c("el-select",{staticClass:"gv-gas-combo",attrs:{placeholder:"Seleziona ASL",size:"mini"},on:{change:e.onChangeASL},model:{value:e.asl,callback:function(t){e.asl=t},expression:"asl"}},e._l(e.listaAsl,function(t){return e._c("el-option",{key:t.codice,attrs:{value:t.codice,label:t.descrizione}})})),e._v(" "),e._c("el-button",{attrs:{id:"gv-gas-submit",type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.submit}},[e._v("Visualizza")]),e._v(" "),e._c("el-button",{attrs:{id:"gv-gas-elenco",type:"primary",size:"mini",icon:"el-icon-document"},on:{click:e.elenco}},[e._v("Elenco Strutture")])],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-button-fototeca-selezione-territoriale",title:"Selezione Territoriale"},on:{click:e.onClick}})},staticRenderFns:[]}},,,,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-print-button",title:"Stampa"},on:{click:e.onClick}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"gv-inverted-color-scheme",attrs:{id:"gv-legend"}},[e._c("div",{staticClass:"gv-legend-title gv-color-scheme",attrs:{id:"gv-legend-title"}},[e._c("b",[e._v("LEGENDA")]),e._v(" "),e._c("button",{class:e.toggleCollapseClass(),attrs:{size:"mini",title:"Nascondi Legenda"},on:{click:e.hideLegend}}),e._v(" "),e._c("el-button",{directives:[{name:"show",rawName:"v-show",value:e.options.showAddMap,expression:"options.showAddMap"}],staticClass:"gv-color-scheme gv-legend-buttons ms ms-layers-add",attrs:{id:"gv-legend-add-map",title:"Aggiungi Mappe",size:"mini"},on:{click:e.addMap}}),e._v(" "),e._c("el-button",{directives:[{name:"show",rawName:"v-show",value:e.options.showDownloadTotale,expression:"options.showDownloadTotale"}],staticClass:"gv-color-scheme gv-legend-buttons el-icon-download",attrs:{id:"gv-legend-add-map",title:"Download Mappe",size:"mini"},on:{click:e.downloadMaps}})],1),e._v(" "),e._c("div",{staticClass:"gv-legend-title-collapsed gv-color-scheme",attrs:{id:"gv-legend-title-collapsed"}},[e._c("button",{class:e.toggleCollapseClass(),attrs:{size:"mini",title:"Mostra Legenda"},on:{click:e.hideLegend}})]),e._v(" "),e._c("div",{staticClass:"gv-legend-wrapper",attrs:{id:"gv-legend-wrapper"}},[e._c("gv-legend-maps",{attrs:{maps:e.maps,options:e.options}}),e._v(" "),e._c("div",{staticClass:"gv-legend-footer gv-inverted-color-scheme"},[e.options.showBaseLayerSwitcher?e._c("gv-base-layer-switcher",{ref:"gv-base-layer-switcher"}):e._e()],1)],1)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{style:e.style,attrs:{id:"gv-map"}})},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-button-back",title:"Ritorno"},on:{click:e.onClick}})},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("el-select",{staticClass:"gv-geocoder",attrs:{filterable:"",clearable:"",remote:"",size:"mini",placeholder:"Ricerca Indirizzo...","remote-method":e.remoteMethod,loading:e.loading,"loading-text":"Caricamento... ","no-match-text":"Nessun indirizzo trovato","no-data-text":"Nessun indirizzo trovato",id:"gv-geocoder"},on:{change:e.onChange},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}},e._l(e.results,function(t){return e._c("el-option",{key:t.value,staticClass:"gv-geocoder-options",attrs:{label:t.label,value:t.value}})}))},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"gv-inverted-color-scheme",attrs:{id:"gv-scuoladigitale-legend"}},[e._c("div",{staticClass:"gv-scuoladigitale-legend-title gv-color-scheme",attrs:{id:"gv-scuoladigitale-legend-title"}},[e._c("b",[e._v("LEGENDA")]),e._v(" "),e._c("button",{class:e.toggleCollapseClass(),attrs:{size:"mini",title:"Nascondi Legenda"},on:{click:e.hideLegend}}),e._v(" "),e._c("el-button",{staticClass:"gv-color-scheme gv-legend-buttons el-icon-search",attrs:{id:"gv-legend-add-map",title:"Ricerca per parola chiave",size:"mini"},on:{click:e.showSearch}})],1),e._v(" "),e._c("div",{staticClass:"gv-scuoladigitale-legend-title-collapsed gv-color-scheme",attrs:{id:"gv-scuoladigitale-legend-title-collapsed"}},[e._c("button",{class:e.toggleCollapseClass(),attrs:{size:"mini",title:"Mostra Legenda"},on:{click:e.hideLegend}})]),e._v(" "),e._c("div",{staticClass:"gv-scuoladigitale-legend-wrapper",attrs:{id:"gv-scuoladigitale-legend-wrapper"}},[e._c("div",[e._c("div",{attrs:{id:"gv-scuoladigitale-legend-body"}},[e._c("gv-legend-maps",{attrs:{options:e.options}})],1)])])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("el-select",{staticClass:"gv-geocoder",attrs:{filterable:"",clearable:"",remote:"",size:"mini",placeholder:"Ricerca Indirizzo PELIAS...","remote-method":e.remoteMethod,loading:e.loading,"loading-text":"Caricamento... ","no-match-text":"Nessun indirizzo trovato","no-data-text":"Nessun indirizzo trovato",id:"gv-geocoder-pelias"},on:{change:e.onChange},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}},e._l(e.results,function(t){return e._c("el-option",{key:t.value,staticClass:"gv-geocoder-options",attrs:{label:t.label,value:t.value}})}))},staticRenderFns:[]}},,,,,,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",[e._c("el-table",{staticStyle:{width:"100%","line-height":"23px","font-weight":"400"},attrs:{data:e.map.layers,"show-header":!1,size:"mini","empty-text":" ","row-class-name":e.layerClassName}},[e._c("el-table-column",{attrs:{align:"center",width:"30"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._c("img",{attrs:{src:e.iconUrl(t.row),width:"20"},on:{click:function(n){e.showLegendPanel(t.row)}}})]}}])}),e._v(" "),e._c("el-table-column",{attrs:{align:"center",width:"25"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._c("span",[e._c("el-checkbox",{staticClass:"gv-layer-visibility-cb",attrs:{disabled:!t.row.inRange},on:{change:function(n){e.setLayerVisible(t.row)}},model:{value:t.row.visible,callback:function(n){e.$set(t.row,"visible",n)},expression:"scope.row.visible"}})],1)]}}])}),e._v(" "),e._c("el-table-column",{staticStyle:{"word-break":"normal"},attrs:{"class-name":"gv-inverted-color-scheme-light"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._c("el-popover",{directives:[{name:"show",rawName:"v-show",value:!t.row.inRange,expression:"!scope.row.inRange"}],attrs:{trigger:"hover",placement:"left-start",offset:"10","popper-class":"gv-layer-popover"}},[e._c("p",[e._v(e._s(t.row.scaleRangeLabel))]),e._v(" "),e._c("div",{staticClass:"gv-legend-popover-button"},[e._c("el-button",{directives:[{name:"show",rawName:"v-show",value:e.options.layerPopover&&e.options.layerPopover.find,expression:"options.layerPopover && options.layerPopover.find"}],staticClass:"gv-color-scheme gv-legend-map-tools-button",attrs:{title:"Ricerca sul livello",icon:"el-icon-search",size:"mini"},on:{click:function(n){e.layerSearch(t.row)}}})],1),e._v(" "),e._c("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v("\n            "+e._s(t.row.legend.label)+"\n          ")])]),e._v(" "),e._c("el-popover",{directives:[{name:"show",rawName:"v-show",value:e.options.layerPopover&&t.row.inRange,expression:"options.layerPopover && scope.row.inRange"}],attrs:{trigger:"hover","popper-class":"popover-scala",placement:"left-start",width:"150",offset:"15"}},[e._c("div",{staticClass:"gv-legend-transparency-layer-slider"},[e._c("el-slider",{on:{change:function(n){e.setLayerTransparency(t.row)}},model:{value:t.row.opacityBase100,callback:function(n){e.$set(t.row,"opacityBase100",n)},expression:"scope.row.opacityBase100"}})],1),e._v(" "),e._c("el-row",{staticClass:"row-bg gv-legend-popover-buttons",attrs:{type:"flex",justify:"left"}},[e._c("div",{staticClass:"gv-legend-popover-button"},[e._c("el-button",{directives:[{name:"show",rawName:"v-show",value:e.options.layerPopover&&e.options.layerPopover.find,expression:"options.layerPopover && options.layerPopover.find"}],staticClass:"gv-color-scheme gv-legend-map-tools-button",attrs:{title:"Ricerca sul livello",icon:"el-icon-search",size:"mini"},on:{click:function(n){e.layerSearch(t.row)}}})],1),e._v(" "),e._c("div",{staticClass:"gv-legend-popover-button"},[e._c("el-checkbox",{staticClass:"gv-layer-visibility-cb",on:{change:function(n){e.setLayerVisible(t.row)}},model:{value:t.row.visible,callback:function(n){e.$set(t.row,"visible",n)},expression:"scope.row.visible"}})],1)]),e._v(" "),e._c("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v("\n            "+e._s(t.row.legend.label)+"\n          ")])],1),e._v(" "),e._c("div",{directives:[{name:"show",rawName:"v-show",value:!e.options.layerPopover&&t.row.inRange,expression:"!options.layerPopover && scope.row.inRange"}],staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v("\n          "+e._s(t.row.legend.label)+"\n        ")])]}}])})],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-button-genio-seleziona-particelle",title:"Seleziona Particelle"},on:{click:e.onClick}})},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("el-dialog",{attrs:{width:"50%",title:"Conferma",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[e._c("span",[e._v("\n    Prima di proseguire è necessario visualizzare il dettaglio delle condizioni di utilizzo.\n    "),e._c("br"),e._v("Cliccando su\n    "),e._c("span",{staticStyle:{color:"#00377c"}},[e._c("b",[e._v('"Accetto"')])]),e._v(" l’utente dichiara di aver preso visione dell’avviso.\n  ")]),e._v(" "),e._c("br"),e._v(" "),e._c("br"),e._v(" "),e._c("span",[e._c("a",{attrs:{href:e.link,target:"_blank"}},[e._v(e._s(e.label))])]),e._v(" "),e._c("span",{attrs:{slot:"footer"},slot:"footer"},[e._c("el-button",{on:{click:e.cancel}},[e._c("span",{staticStyle:{color:"#00377c","font-weight":"bold"}},[e._v("Annulla")])]),e._v(" "),e._c("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._c("span",{staticStyle:{color:"#ffffff","font-weight":"bold"}},[e._v("Accetto")])])],1)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("el-select",{attrs:{size:"mini",placeholder:"Sfondo"},on:{change:e.onChange},model:{value:e.activeBaseLayer,callback:function(t){e.activeBaseLayer=t},expression:"activeBaseLayer"}},e._l(e.baseLayers,function(t){return e._c("el-option",{key:t.name,attrs:{label:t.label,value:t.name}},[e._c("span",{staticStyle:{float:"left"}},[e._c("img",{staticClass:"gv-sfondi-icon",attrs:{src:t.icon}}),e._v(" "),e._c("span",{staticClass:"gv-sfondi-label"},[e._v(e._s(t.label))])])])}))},staticRenderFns:[]}},,,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-button-cem-elaborazioni",title:"Lista Elaborazioni"},on:{click:e.onClick}})},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-button-genio-localizza",title:"Localizzazione"},on:{click:e.onClick}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-button-fototeca-carrello",title:"Carrello"},on:{click:e.onClick}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("el-select",{staticClass:"gv-fototeca-voli",attrs:{filterable:"",remote:"",size:"mini",placeholder:"Seleziona un volo...",id:"gv-fototeca-voli"},on:{change:e.onChange},model:{value:e.volo,callback:function(t){e.volo=t},expression:"volo"}},e._l(e.voli,function(t){return e._c("el-option",{key:t.id,staticClass:"gv-fototeca-voli-options",attrs:{label:t.nome,value:t.id}})}))},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{attrs:{id:"gv-container"}},[e.showHeader?e._c("gv-header"):e._e(),e._v(" "),e.leafletMap?e._c("gv-map",{ref:"gv-map"}):e._e(),e._v(" "),e.cesiumMap?e._c("gv-cesium",{ref:"gv-cesium"}):e._e(),e._v(" "),e.showLegend?e._c("gv-legend",{ref:"gv-legend"}):e._e(),e._v(" "),e._m(0)],1)},staticRenderFns:[function(){var e=this;e.$createElement;return e._c("div",{staticClass:"gv-tool-container"},[e._c("div",{staticClass:"gv-tool-top gv-tool-left",attrs:{id:"gv-tool-topleft"}}),e._v(" "),e._c("div",{staticClass:"gv-tool-top gv-tool-right",attrs:{id:"gv-tool-topright"}}),e._v(" "),e._c("div",{staticClass:"gv-tool-bottom gv-tool-left",attrs:{id:"gv-tool-bottomleft"}}),e._v(" "),e._c("div",{staticClass:"gv-tool-bottom gv-tool-right",attrs:{id:"gv-tool-bottomright"}})])}]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{style:e.style,attrs:{id:"gv-header"}},[e._t("default")],2)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"gv-fototeca-immagine gv-inverted-color-scheme",attrs:{id:"gv-fototeca-immagine"}},[e._c("gv-title",{directives:[{name:"draggable",rawName:"v-draggable"}],attrs:{title:e.title,divId:"gv-fototeca-immagine"}}),e._v(" "),e._c("el-button",{staticClass:"gv-color-scheme gv-button-fototeca-immagine-carrello",attrs:{id:"gv-button-fototeca-immagine-carrello",icon:"el-icon-circle-plus-outline",title:"Aggiungi al Carrello",size:"mini"},on:{click:e.addToBasket}},[e._v("Aggiungi al Carrello")]),e._v(" "),e._c("div",{staticClass:"gv-fototeca-immagine-body",attrs:{id:"gv-fototeca-immagine-body"}},[e._c("image-viewer",{attrs:{imgUrl:e.imgUrl,logo:e.logo,width:"400",height:"400"}})],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{attrs:{id:"image-map"}})},staticRenderFns:[]}},,,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"scalebar",attrs:{id:"gv-scalebar"}},[e._c("el-select",{attrs:{size:"mini",placeholder:""},on:{change:e.onChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(t){return e._c("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"gv-map-selezione-fogli gv-inverted-color-scheme",attrs:{id:"gv-map-selezione-fogli"}},[e._c("gv-title",{directives:[{name:"draggable",rawName:"v-draggable"}],attrs:{title:e.title,divId:"gv-map-selezione-fogli",noClose:!0,collapsible:"gv-map-selezione-fogli-body",width:"270px"}}),e._v(" "),e._c("div",{staticClass:"gv-map-selezione-fogli-body",attrs:{id:"gv-map-selezione-fogli-body"}},[e._c("el-select",{attrs:{size:"mini",multiple:"","collapse-tags":"",placeholder:"Seleziona"},model:{value:e.fogli,callback:function(t){e.fogli=t},expression:"fogli"}},e._l(e.config.fogli,function(t){return e._c("el-option",{key:t.codice,attrs:{value:t.codice,label:t.nome}})})),e._v(" "),e._c("div",{staticClass:"gv-map-selezione-fogli-buttons"},[e._c("el-button",{attrs:{id:"gv-map-selezione-fogli-submit",type:"primary",size:"mini"},on:{click:e.submit}},[e._v("Conferma")]),e._v(" "),e._c("el-button",{attrs:{id:"gv-map-selezione-fogli-cancel",type:"primary",size:"mini"},on:{click:e.cancel}},[e._v("Annulla")])],1)],1)],1)},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-button-layer-search",title:"Ricerca sui Livelli"},on:{click:e.onClick}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"gv-search",attrs:{id:"gv-search"}},[e._c("el-select",{attrs:{id:"gv-seach-input",filterable:"",clearable:"",remote:"",size:"mini",placeholder:e.placeHolder,"remote-method":e.search,loading:e.loading,"loading-text":"Caricamento... ","no-match-text":"Nessun elemento trovato","no-data-text":"Nessun elemento trovato"},on:{change:e.onChange},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}},e._l(e.results,function(t){return e._c("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-button-ricerca-particella",title:"Ricerca Particella Catastale"},on:{click:e.onClick}})},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{title:"Info sui livelli della mappa"},on:{click:e.onClick}})},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{domProps:{innerHTML:e._s(e.html)}})},staticRenderFns:[]}},,,,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-button-genio-pratiche-collegate",title:"Genio Pratiche Collegate"},on:{click:e.onClick}})},staticRenderFns:[]}},,,,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"gv-panel-title gv-color-scheme"},[e._c("span",{staticClass:"gv-color-scheme",attrs:{title:e.fullTitle}},[e._v(e._s(e.title))]),e._v(" "),e.noClose?e._e():e._c("el-button",{staticClass:"gv-close gv-color-scheme",attrs:{icon:"el-icon-close",type:"button",title:"Chiudi Panello"},on:{click:e.closePanel}}),e._v(" "),e.collapsible?e._c("button",{class:e.toggleCollapseClass(),attrs:{size:"mini",title:"Mostra/Nascondi Pannello"},on:{click:e.collapse}}):e._e()],1)},staticRenderFns:[]}},,,,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-button-coordinate",title:"Acquisizione Coordinate"},on:{click:e.onClick}})},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-button-layer-search-topo",title:"Ricerche sui Livelli"},on:{click:e.onClick}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-download-totale-button",title:"Download"},on:{click:e.onClick}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{directives:[{name:"bar",rawName:"v-bar"}]},[e._c("div",{attrs:{id:"gv-legend-maps"}},e._l(e.maps,function(t){return e._c("ul",{key:t.id,staticClass:"gv-list-group"},[e._c("div",{staticClass:"gv-list-legend-map-item gv-inverted-color-scheme"},[e._c("li",[e._v(e._s(t.name))]),e._v(" "),e._c("div",{staticClass:"gv-legend-map-tools gv-inverted-color-scheme"},[e._c("el-button",{class:e.getToggleLayersClass(t),attrs:{title:"Mostra/Nascondi Livelli in Legenda",size:"mini"},on:{click:function(n){e.toggleLayers(t)}}}),e._v(" "),e.checkInfoMap(t)?e._c("el-button",{staticClass:"gv-inverted-color-scheme gv-legend-map-tools-button",attrs:{id:"gv-legend-scheda-"+t.id,title:"Visualizza Scheda",icon:"el-icon-document",size:"mini"},on:{click:function(n){e.showMapInfoPanel(t)}}}):e._e(),e._v(" "),e.options.noDeleteButton?e._e():e._c("el-button",{staticClass:"gv-inverted-color-scheme gv-legend-map-tools-button",attrs:{id:"gv-legend-delete-"+t.id,title:"Elimina Mappa",icon:"el-icon-delete",size:"mini"},on:{click:function(n){e.remove(t)}}}),e._v(" "),e.options.showLayersTransparency?e._c("el-button",{staticClass:"gv-inverted-color-scheme gv-legend-map-tools-button",attrs:{id:"gv-legend-transparency-"+t.id,title:"Trasparenza Livelli",icon:"el-icon-setting",size:"mini"},on:{click:function(n){e.layerTransparency(t)}}}):e._e(),e._v(" "),e.isDownloadable(t)?e._c("el-button",{staticClass:"gv-inverted-color-scheme gv-legend-map-tools-button",attrs:{id:"gv-legend-download-"+t.id,title:"Download Mappa",icon:"el-icon-download",size:"mini"},on:{click:function(n){e.download(t)}}}):e._e()],1)]),e._v(" "),e._c("gv-legend-layers",{directives:[{name:"show",rawName:"v-show",value:e.showMapLayers(t),expression:"showMapLayers(map)"}],attrs:{map:t,options:e.options}})],1)}))])},staticRenderFns:[]}},,,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-draw",title:e.title},on:{click:e.onClick}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"atlante-geochimico gv-color-scheme"},[e._c("div",{staticClass:"ag-title gv-color-scheme",attrs:{id:"ag-title"}},[e._v("\n    Atlante Geochimico\n    "),e._c("button",{class:e.toggleCollapseClass(),attrs:{size:"mini",title:"Nascondi Pannello"},on:{click:e.hidePanel}})]),e._v(" "),e._c("div",{staticClass:"ag-wrapper gv-color-scheme",attrs:{id:"ag-wrapper"}},[e._c("el-select",{attrs:{placeholder:"Seleziona Elemento",size:"mini"},on:{change:e.onChange},model:{value:e.livello,callback:function(t){e.livello=t},expression:"livello"}},e._l(e.livelli,function(t){return e._c("el-option",{key:t.id,attrs:{value:t.id,label:t.title}},[e._c("span",{staticStyle:{"font-size":"16px"}},[e._v(e._s(t.title))])])})),e._v(" "),e._c("div",{directives:[{name:"show",rawName:"v-show",value:e.showLegend,expression:"showLegend"}],staticClass:"ag-legend"},[e._c("gv-iframe-panel",{staticClass:"gv-iframe-panel",attrs:{src:e.legendUrl,height:"237",width:"249"}})],1)],1)])},staticRenderFns:[]}},,,,function(e,t){},function(e,t){}]);
//# sourceMappingURL=GV.js.map