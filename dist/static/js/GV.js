webpackJsonp([12,10],[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(216),o=(i(a),n(6)),r=i(o),s=n(151),l=i(s),u=n(250),c=i(u),d=n(243),f=i(d),p=n(9),h=i(p),g=n(240),m=i(g),_=n(215),v=i(_),y=n(3),L=i(y),b=n(383),M=i(b),C=n(388),E=i(C),w=n(399),I=i(w),S=n(398),x=i(S),O=n(393),G=i(O),A=n(400),P=i(A),B=n(402),R=i(B),T=n(401),V=i(T),k=n(403),N=i(k),z=n(384),F=i(z);n(376),n(377),n(378),n(374),n(222),n(221),n(223),n(332).polyfill();var j=[];j.push({name:"gv-geocoder"}),L.default.component("gv-geocoder",E.default),j.push({name:"gv-search"}),L.default.component("gv-search",I.default),j.push({name:"gv-scalebar"}),L.default.component("gv-scalebar",x.default),j.push({name:"gv-inner-html"}),L.default.component("gv-inner-html",G.default),j.push({name:"gv-add-map-button"}),L.default.component("gv-add-map-button",P.default),j.push({name:"gv-info-button"}),L.default.component("gv-info-button",R.default),j.push({name:"gv-coordinate-button"}),L.default.component("gv-coordinate-button",V.default),j.push({name:"gv-layer-search-button"}),L.default.component("gv-layer-search-button",N.default),j.push({name:"atlante-geochimico-livelli"}),L.default.component("atlante-geochimico-livelli",F.default),window.GV={init:function(e){this.initConfig(e),L.default.component("gv-app",M.default);var t=new L.default({el:"#gv-container",template:"<gv-app></gv-app>"});return t},initConfig:function(e){GV.config=v.default,v.default.init(e)},mountLegend:function(){(0,h.default)({elId:"gv-legend",clear:!0,containerId:GV.config.containerId,vm:new L.default({template:'<gv-legend ref="gv-legend"></gv-legend>'})})},dragbox:f.default,globals:r.default,log:c.default,eventBus:new L.default,utils:{getUrlParam:l.default,buildFindOptionsFromQueryStringParams:m.default},tools:j}},,,,,,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={DEFAULT_PROXY:"/geoservices/apps/proxy/proxy.jsp?url=",USE_SUBDOMAINS:!0,RL_MAP_CONFIG_SERVICE:"/geoservices/REST/geoportale/map/",RL_LAYER_CONFIG_SERVICE:"/geoservices/REST/config/layer/",RL_QUERY_LAYER_VALUE_LIST_SERVICE:"/geoservices/REST/config/query_layer_valuelist/",RL_QUERY_LAYER_SERVICE:"/geoservices/REST/config/query_layer/",RL_DYN_MAP_CONFIG_SERVICE:"/geoservices/REST/config/map/",RL_CREATE_SLD_SERVICE:"/geoservices/REST/config/create_sld/",RL_XSL_INFO_SERVICE:"/geoservices/REST/config/xsl_info_service?",RL_CATALOG_SERVICE:"/geoservices/REST/geoportale/catalogo/",RL_CANALI_SERVICE:"/geoservices/REST/config/ag_app_canali_tree/",RL_SCHEDA_SERVICE:"/geoservices/REST/geoportale/scheda/",RL_DOWNLOAD_CONFIG_SERVICE:"/geoservices/REST/download/map/",RL_DOWNLOAD_INSERT_SERVICE:"/geoservices/REST/download/insert_richiesta/",RL_ENTI_SERVICE:"/geoservices/REST/geoportale/enti/",RL_METADATA_URL:"/geoservices/REST/metadata/scheda_xml/",HERE_GEOCODE_PROXY:"/geoservices/REST/proxy/here_geocode",MAX_BOUNDS:{X_MIN:43.4,Y_MIN:7.3,X_MAX:44.8,Y_MAX:10.5},INFO_WMS_MAX_FEATURES:10,BASE_SCALES:[591657550.5,295828775.3,147914387.6,73957193.82,36978596.91,18489298.45,9244649.227,4622324.614,2311162.307,1155581.153,577790.5767,288895.2884,144447.6442,72223.82209,36111.91104,18055.95552,9027.977761,4513.98888,2256.99444,1128.49722,564.24861,282.124305],BASE_SCALE_LABELS:{8:"1:1.600.000",9:"1:800.000",10:"1:400.000",11:"1:200.000",12:"1:100.000",13:"1:50.000",14:"1:25.000",15:"1:12.500",16:"1:6.250",17:"1:3.125",18:"1:1.560",19:"1:800",20:"1:400"},BASE_LAYERS:{BLANK:{label:"Sfondo Bianco",icon:"http://srvcarto.regione.liguria.it/geoviewer/img/legend/bianco.gif"},RL_ORTOFOTO_2013:{label:"AGEA: Ortofoto 2013",icon:"http://srvcarto.regione.liguria.it/geoviewer/img/legend/sfondi_rl.jpg"},RL_ORTOFOTO_2016:{label:"AGEA: Ortofoto 2016",icon:"http://srvcarto.regione.liguria.it/geoviewer/img/legend/sfondi_rl.jpg"},RL_CARTE_BASE:{label:"Carte di base regionali",icon:"http://srvcarto.regione.liguria.it/geoviewer/img/legend/sfondi_rl.jpg"},OSM:{label:"OpenStreetMap",icon:"http://srvcarto.regione.liguria.it/geoviewer/img/legend/openstreetmap.png"},ESRI_IMAGERY:{label:"ESRI Imagery",icon:"http://srvcarto.regione.liguria.it/geoviewer/img/legend/esri.gif"},ESRI_TOPOGRAPHIC:{label:"ESRI Topographic",icon:"http://srvcarto.regione.liguria.it/geoviewer/img/legend/esri.gif"},ESRI_GRAY:{label:"ESRI Gray",icon:"http://srvcarto.regione.liguria.it/geoviewer/img/legend/esri.gif"},ESRI_DARKGRAY:{label:"ESRI Dark Gray",icon:"http://srvcarto.regione.liguria.it/geoviewer/img/legend/esri.gif"},MAPBOX_STREETS:{label:"Mapbox Streets",icon:"http://srvcarto.regione.liguria.it/geoviewer/img/legend/mapbox.png"},MAPBOX_SATELLITE:{label:"Mapbox Satellite",icon:"http://srvcarto.regione.liguria.it/geoviewer/img/legend/mapbox.png"},MAPBOX_OUTDOOR:{label:"Mapbox Outdoor",icon:"http://srvcarto.regione.liguria.it/geoviewer/img/legend/mapbox.png"},MAPBOX_LIGHT:{label:"Mapbox Light",icon:"http://srvcarto.regione.liguria.it/geoviewer/img/legend/mapbox.png"},STAMEN_TERRAIN:{label:"Stamen Terrain",icon:"http://srvcarto.regione.liguria.it/geoviewer/img/legend/mapbox.png"},STAMEN_TONER_LIGHT:{label:"Stamen Toner Light",icon:"http://srvcarto.regione.liguria.it/geoviewer/img/legend/mapbox.png"},GOOGLE_ROADMAP:{label:"Google Stradario",icon:"http://srvcarto.regione.liguria.it/geoviewer/img/legend/google.png"},GOOGLE_HYBRID:{label:"Google Ibrido",icon:"http://srvcarto.regione.liguria.it/geoviewer/img/legend/google.png"},GOOGLE_TERRAIN:{label:"Google Terreno",icon:"http://srvcarto.regione.liguria.it/geoviewer/img/legend/google.png"},GOOGLE_SATELLITE:{label:"Google Satellite",icon:"http://srvcarto.regione.liguria.it/geoviewer/img/legend/google.png"}}}},,function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.elId,n=e.vm,i=e.toggleEl,a=document.getElementById(t);if(i&&a)a.style.display="none"!==a.style.display&&a.style.display?"none":"block";else{var r=(0,o.default)(e);n.$mount(r)}return n};var a=n(242),o=i(a)},,,,,,,,,,,,function(e,t){},,function(e,t){},function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){GV.log("start info request: "+new Date),S=0,x=0,O=[];var t=function(e,t,n,i){var a=GV.app.map.latLngToContainerPoint(i,GV.app.map.getZoom()),o=GV.app.map.getSize(),r=GV.app.map.getBounds(),s=GV.app.map.options.crs.project(r.getSouthWest()),l=GV.app.map.options.crs.project(r.getNorthEast()),u=e.flagGeoserver?"application/json":"application/vnd.ogc.gml",c={request:"GetFeatureInfo",service:"WMS",crs:"EPSG:3857",styles:"",version:"1.3.0",bbox:s.x+","+s.y+","+l.x+","+l.y,height:o.y,width:o.x,layers:n,query_layers:n,FEATURE_COUNT:100,buffer:10,info_format:u,i:a.x,j:a.y};return t+(0,_.default)(c,t,!0)};GV.config.maps.forEach(function(n){var i=null,a=[];if(n.layers.forEach(function(e){e.idMap===n.id&&"WMS"===e.type&&e.queryable&&e.visible&&GV.app.map.layerInRange(e)&&(i=e.wmsParams.url,i=u.default.DEFAULT_PROXY+i,a.push(e.wmsParams.name))}),i&&a.length>0){var r=a.join(","),s=t(n,i,r,e.latlng);x++,GV.app.map._container.style.cursor="progress",n.flagGeoserver?(0,y.default)(s).then(function(e){return o(e)}).catch(function(e){return console.error(e)}):(0,M.default)(s).then(function(e){return o(e)}).catch(function(e){return console.error(e)})}})}function o(e){function t(e,t){var i=GV.app.map.getLayerByName(e).config,a=n(t,i.cachePostGIS);return a}function n(e,t){var n={};for(var i in e)"bbox"!==i&&e.hasOwnProperty(i)&&(t?n[i.toUpperCase()]=e[i]:n[i]=e[i]);return n}function i(e,t){var n,i;return n=a(e,"infoLabelAttr"),i=a(e,"infoIdAttr"),n&&t[n]?t[n]:i&&t[i]?t[i]:t[o(t)]}function a(e,t){var n=GV.app.map.getLayerByName(e).config;return n&&n.infoOptions&&n.infoOptions[t]?n.infoOptions[t]:null}function o(e){for(var t in e)if(e.hasOwnProperty(t)&&"function"!=typeof t)return t;return null}if(S++,e.forEach(function(e){var n=e.id.split(".")[0];e.layerName=n,e.layer=GV.app.map.getLayerByName(n),e.properties=t(n,e.properties),e.label=i(n,e.properties),e.infoOptions=e.layer.config.infoOptions}),Array.prototype.push.apply(O,e),S===x){if(GV.app.map._container.style.cursor="default",0===O.length)return void GV.log("Nessun elemento trovato");if(1===O.length){var s=document.getElementById("gv-info-wms-list");s&&s.parentNode.removeChild(s),r(O[0])}else(0,p.default)({elId:"gv-info-wms-list",clear:!0,vm:new d.default({template:'<gv-info-wms-list :items="items"></gv-info-wms-list>',data:{items:O}})});GV.log("end info request: "+new Date)}}function r(e){function t(e,t){function a(e){try{var t='<?xml version="1.0" encoding="ISO-8859-1"?><msGMLOutput xmlns:gml="http://www.opengis.net/gml" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"></msGMLOutput>',n=(0,g.default)(t),i=e.layerName+"_layer",a=n.createElement(i),o=e.layerName+"_feature",r=n.createElement(o),s=e.properties;for(var l in s)if(s.hasOwnProperty(l)&&"boundedBy"!==l){var u=null;u=s[l]?n.createTextNode(s[l]):n.createTextNode("");var c=n.createElement(l);c.appendChild(u),r.appendChild(c)}return a.appendChild(r),n.documentElement.appendChild(a),n}catch(e){console.error(e)}}function o(e,t){try{if(window.XSLTProcessor){var n=new XSLTProcessor;n.importStylesheet(t);var i=n.transformToDocument(e);return(new XMLSerializer).serializeToString(i)}return e.transformNode(t)}catch(e){console.error(e)}}var r=a(t),s=e.infoUrl,l=e.infoTarget;(0,I.default)(s,t).then(function(a){Array.prototype.slice.call(a.getElementsByTagName("td")).forEach(function(e,n,i){"Titolo"===e.id&&(e.textContent=t.layer.legend.label,e.text=t.layer.legend.label)});var s=o(r,a);l&&"panel"!==l?i(s,null,e):n(s,null,e)})}function n(e,t,n){e&&(0,p.default)({elId:"gv-info-wms-html",vm:new d.default({template:'<gv-info-wms-html :html="html" :height="height" :width="width" :title="title"></gv-info-wms-html>',data:{title:"Risultato Info",html:e,width:n.infoWidth||400,height:n.infoHeight||400}})})}function i(e,t,n){var i=n.infoWidth||400,a=n.infoHeight||500,o=window.open(t,"","status=yes, toolbar=yes, menubar=no, width="+i+", height="+a+", resizable=yes, scrollbars=yes");o.document.open(),o.document.write(e),o.document.close(),o.focus()}var a=e.infoOptions,o=a.infoUrl;".xsl"===o.substr(o.length-4)||".xslt"===o.substr(o.length-5)?t(a,e):a.infoTarget&&"panel"!==a.infoTarget?i(o,null,a):n(o,null,a);var r=[e.layerName],s=e.layer.config,l=s.cachePostGIS?s.infoOptions.infoIdAttr.toLowerCase():s.infoOptions.infoIdAttr,u=l+"="+e.properties[s.infoOptions.infoIdAttr];(0,E.default)(r,u).then(function(e){var t=GV.app.map.getLayerByName("InfoWmsHilite");e&&e[0]&&e[0].geometry&&(t.clearLayers(),t.addData(e[0].geometry),GV.app.map.fitBounds(t.getBounds(),{maxZoom:15}),GV.app.map._container.style.cursor="default",GV.config.hilitedLayer.push(r))}).catch(function(e){console.error(e)})}function s(e){e.loadLayers([{name:"InfoWmsHilite",type:"JSON",style:{color:"#ffcc00",fillOpacity:0,weight:6,opacity:.6},pointToLayer:function(e,t){return L.circleMarker(t,{radius:8,color:"#ffcc00",fillColor:"#ffcc00",fill:!0,fillOpacity:.6,weight:6,opacity:.6})},visible:!0}])}Object.defineProperty(t,"__esModule",{value:!0});var l=n(6),u=i(l),c=n(3),d=i(c),f=n(9),p=i(f),h=n(106),g=i(h),m=n(150),_=i(m),v=n(228),y=i(v),b=n(229),M=i(b),C=n(105),E=i(C),w=n(230),I=i(w),S=0,x=0,O=[];t.default={id:"info-wms-manager",active:!1,addHiliteLayer:s,activate:function(){var e=this;GV.log("GV.app.infoWmsManager.activate"),this.active=!0,GV.app.map?s(GV.app.map):GV.eventBus.$on("gv-map-mounted",function(e){s(e)}),GV.config.activeButton&&GV.config.activeButton.deactivate&&GV.config.activeButton.deactivate(),GV.eventBus.$on("map-click",function(t){e.active&&a(t)}),GV.config.activeControl=this},deactivate:function(){GV.log("GV.app.infoWmsManager.deactivate"),this.active=!1},showFeatureInfo:r}},,,,,,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"generico";if(!e||"null"===e)throw new Error("Parametro idMap mancante");var n=e.startsWith("D")?""+l.default.RL_DYN_MAP_CONFIG_SERVICE+e+"?app="+t:""+l.default.RL_MAP_CONFIG_SERVICE+e+"?app="+t,i={};return GV.config.geoserverUrl&&(i.geoserverUrl=GV.config.geoserverUrl),r.default.get(n,{params:i})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(7),r=i(o),s=n(6),l=i(s)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=s.default.RL_DOWNLOAD_CONFIG_SERVICE+e;return o.default.get(t).then(function(e){return e.data.data})};var a=n(7),o=i(a),r=n(6),s=i(r)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=GV.config.getLayerConfig(e[0]),i="M"+n.idMap,a=u.default.DEFAULT_PROXY+n.wfsParams.url.replace("/"+i,"")+"service=WFS&version=2.0.0&request=GetFeature&srsName=EPSG%3A4326&outputFormat=application%2Fjson",o=[];e.forEach(function(e){var t=GV.config.getLayerConfig(e);o.push(i+":"+t.wfsParams.typeName)});var r=o.join(","),s=a+"&typeName="+r+"&cql_filter="+t;return s}function o(e,t){var n=a(e,t),i={};return s.default.get(n,{params:i}).then(function(e){return e.data.features})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=n(7),s=i(r),l=n(6),u=i(l)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){try{var t=null;if((0,r.default)()){var n=new ActiveXObject("Microsoft.XMLDOM");n.async="false",n.loadXML(e),t=n}else{var i=new DOMParser;t=i.parseFromString(e,"text/xml")}return t}catch(e){console.error(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(248),r=i(o)},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,,,,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(17),o=i(a),r=n(9),s=i(r),l=n(3),u=i(l);u.default.component("gv-coordinate-panel",function(){return new o.default(function(e){n.e(7,function(t){e(n(386))})})});var c={id:"coordinate",active:!1,latlng:null,activate:function(){GV.log("GV.controls.coordinate.activate"),this.active=!0,this.openPanel()},deactivate:function(){GV.log("GV.controls.coordinate.deactivate"),this.active=!1,this.closePanel()},openPanel:function(){(0,s.default)({elId:"gv-coordinate-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new u.default({template:"<gv-coordinate-panel></gv-coordinate-panel>"})})},closePanel:function(){document.getElementById("gv-coordinate-panel").style.display="none"}};t.default=c},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={methods:{switchActiveButton:function(){this.active=!this.active,this.active?(GV.config.activeControl&&GV.config.activeControl.deactivate(),GV.config.activeControl=this.control,GV.config.activeButton&&this.name!==GV.config.activeButton.name&&(GV.config.activeButton.active=!1),GV.config.activeButton=this,GV.config.activeButton.active=!0,this.control.activate()):this.control.deactivate()}},mounted:function(){this.options&&this.options.active&&this.switchActiveButton()}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=l.default.RL_CATALOG_SERVICE;return e.idMap&&(t+=e.idMap),r.default.get(t,{params:e}).then(function(e){return e.data.data})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(7),r=i(o),s=n(6),l=i(s)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t={};return r.default.get(e,{params:t})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(7),r=i(o)},function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}var a,o,r,s=n(10);i(s);!function(n,i){o=[],a=i,r="function"==typeof a?a.apply(t,o):a,!(void 0!==r&&(e.exports=r))}(void 0,function(){return function(e){"use strict";function t(){void 0===e.escapeMode&&(e.escapeMode=!0),e.attributePrefix=e.attributePrefix||"_",e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0),e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0),void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0),e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!1),e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],void 0===e.keepCData&&(e.keepCData=!1)}function n(){}function i(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function a(e){return e.prefix}function o(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function r(e,t,n,i){for(var a=0;a<e.length;a++){var o=e[a];if("string"==typeof o){if(o==i)break}else if(o instanceof RegExp){if(o.test(i))break}else if("function"==typeof o&&o(t,n,i))break}return a!=e.length}function s(t,n,i){switch(e.arrayAccessForm){case"property":t[n]instanceof Array?t[n+"_asArray"]=t[n]:t[n+"_asArray"]=[t[n]]}!(t[n]instanceof Array)&&e.arrayAccessFormPaths.length>0&&r(e.arrayAccessFormPaths,t,n,i)&&(t[n]=[t[n]])}function l(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),i=t[5].split(".");if(n.setHours(t[3],t[4],i[0]),i.length>1&&n.setMilliseconds(i[1]),t[6]&&t[7]){var a=60*t[6]+Number(t[7]),o=/\d\d-\d\d:\d\d$/.test(e)?"-":"+";a=0+("-"==o?-1*a:a),n.setMinutes(n.getMinutes()-a-n.getTimezoneOffset())}else e.indexOf("Z",e.length-1)!==-1&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function u(t,n,i){if(e.datetimeAccessFormPaths.length>0){var a=i.split(".#")[0];return r(e.datetimeAccessFormPaths,t,n,a)?l(t):t}return t}function c(t,n,i,a){return!(n==w.ELEMENT_NODE&&e.xmlElementsFilter.length>0)||r(e.xmlElementsFilter,t,i,a)}function d(t,n){if(t.nodeType==w.DOCUMENT_NODE){for(var o=new Object,r=t.childNodes,l=0;l<r.length;l++){var f=r.item(l);if(f.nodeType==w.ELEMENT_NODE){var p=i(f);o[p]=d(f,p)}}return o}if(t.nodeType==w.ELEMENT_NODE){var o=new Object;o.__cnt=0;for(var r=t.childNodes,l=0;l<r.length;l++){var f=r.item(l),p=i(f);if(f.nodeType!=w.COMMENT_NODE){var h=n+"."+p;c(o,f.nodeType,p,h)&&(o.__cnt++,null==o[p]?(o[p]=d(f,h),s(o,p,h)):(null!=o[p]&&(o[p]instanceof Array||(o[p]=[o[p]],s(o,p,h))),o[p][o[p].length]=d(f,h)))}}for(var g=0;g<t.attributes.length;g++){var m=t.attributes.item(g);o.__cnt++,o[e.attributePrefix+m.name]=m.value}var _=a(t);return null!=_&&""!=_&&(o.__cnt++,o.__prefix=_),null!=o["#text"]&&(o.__text=o["#text"],o.__text instanceof Array&&(o.__text=o.__text.join("\n")),e.stripWhitespaces&&(o.__text=o.__text.trim()),delete o["#text"],"property"==e.arrayAccessForm&&delete o["#text_asArray"],o.__text=u(o.__text,p,n+"."+p)),null!=o["#cdata-section"]&&(o.__cdata=o["#cdata-section"],delete o["#cdata-section"],"property"==e.arrayAccessForm&&delete o["#cdata-section_asArray"]),0==o.__cnt&&"text"==e.emptyNodeForm?o="":1==o.__cnt&&null!=o.__text?o=o.__text:1!=o.__cnt||null==o.__cdata||e.keepCData?o.__cnt>1&&null!=o.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==o.__text||""==o.__text.trim())&&delete o.__text:o=o.__cdata,delete o.__cnt,!e.enableToStringFunc||null==o.__text&&null==o.__cdata||(o.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),o}if(t.nodeType==w.TEXT_NODE||t.nodeType==w.CDATA_SECTION_NODE)return t.nodeValue}function f(t,n,i,a){var r="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+n;if(null!=i)for(var s=0;s<i.length;s++){var l=i[s],u=t[l];e.escapeMode&&(u=o(u)),r+=" "+l.substr(e.attributePrefix.length)+"=",r+=e.useDoubleQuotes?'"'+u+'"':"'"+u+"'"}return r+=a?"/>":">"}function p(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function h(e,t){return e.indexOf(t,e.length-t.length)!==-1}function g(t,n){return!!("property"==e.arrayAccessForm&&h(n.toString(),"_asArray")||0==n.toString().indexOf(e.attributePrefix)||0==n.toString().indexOf("__")||t[n]instanceof Function)}function m(e){var t=0;if(e instanceof Object)for(var n in e)g(e,n)||t++;return t}function _(t,n,i){return 0==e.jsonPropertiesFilter.length||""==i||r(e.jsonPropertiesFilter,t,n,i)}function v(t){var n=[];if(t instanceof Object)for(var i in t)i.toString().indexOf("__")==-1&&0==i.toString().indexOf(e.attributePrefix)&&n.push(i);return n}function y(t){var n="";return null!=t.__cdata&&(n+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(n+=e.escapeMode?o(t.__text):t.__text),n}function L(t){var n="";return t instanceof Object?n+=y(t):null!=t&&(n+=e.escapeMode?o(t):t),n}function b(e,t){return""===e?t:e+"."+t}function M(e,t,n,i){var a="";if(0==e.length)a+=f(e,t,n,!0);else for(var o=0;o<e.length;o++)a+=f(e[o],t,v(e[o]),!1),a+=C(e[o],b(i,t)),a+=p(e[o],t);return a}function C(e,t){var n="",i=m(e);if(i>0)for(var a in e)if(!g(e,a)&&(""==t||_(e,a,b(t,a)))){var o=e[a],r=v(o);if(null==o||void 0==o)n+=f(o,a,r,!0);else if(o instanceof Object)if(o instanceof Array)n+=M(o,a,r,t);else if(o instanceof Date)n+=f(o,a,r,!1),n+=o.toISOString(),n+=p(o,a);else{var s=m(o);s>0||null!=o.__text||null!=o.__cdata?(n+=f(o,a,r,!1),n+=C(o,b(t,a)),n+=p(o,a)):n+=f(o,a,r,!0)}else n+=f(o,a,r,!1),n+=L(o),n+=p(o,a)}return n+=L(e)}var E="1.2.0";e=e||{},t(),n();var w={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(e){var t=window.ActiveXObject||"ActiveXObject"in window;if(void 0===e)return null;var n;if(window.DOMParser){var i=new window.DOMParser,a=null;if(!t)try{a=i.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(e){a=null}try{n=i.parseFromString(e,"text/xml"),null!=a&&n.getElementsByTagNameNS(a,"parsererror").length>0&&(n=null)}catch(e){n=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(e);return n},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?l(e):e},this.xml2json=function(e){return d(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return C(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return E}}})},function(e,t){"use strict";function n(e,t,n){var i=[];for(var a in e)i.push(encodeURIComponent(n?a.toUpperCase():a)+"="+encodeURIComponent(e[a]));return(t&&t.indexOf("?")!==-1?"&":"?")+i.join("&")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(e){var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.href);return t?decodeURIComponent(t[1]):null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},,,,,,,,,,,,,,,,,,,,function(e,t,n){var i,a;n(349),i=n(210);var o=n(416);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-4512c626",e.exports=i},,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(251),o=i(a),r=n(65),s=i(r),l=n(17),u=i(l),c=n(249),d=(i(c),n(244)),f=(i(d),n(9)),p=i(f),h=n(3),g=i(h),m=n(397),_=i(m),v=n(396),y=i(v),L=n(389),b=i(L),M=n(171),C=i(M);g.default.component("gv-map",_.default),g.default.component("gv-legend",y.default),g.default.component("gv-header",b.default),g.default.component("gv-title",C.default),g.default.component("gv-iframe-panel",function(){return new u.default(function(e){n.e(9,function(t){e(n(390))})})}),g.default.component("gv-info-wms-list",function(){return new u.default(function(e){n.e(5,function(t){e(n(392))})})}),g.default.component("gv-info-wms-html",function(){return new u.default(function(e){n.e(8,function(t){e(n(391))})})}),t.default={name:"gv-app",data:function(){var e="leaflet";return GV.config.application.mapOptions&&GV.config.application.mapOptions.type&&(e=GV.config.application.mapOptions.type),{leafletMap:"leaflet"===e,showHeader:GV.config.application.layout.header,showLegend:GV.config.application.layout.legend,showToolbar:GV.config.application.layout.toolbar}},created:function(){GV.log("gv-app: created"),GV.app=this},mounted:function(){GV.log("gv-app: mounted"),this.addTools(GV.config.application.layout.tools),GV.eventBus.$emit("gv-app-mounted",this)},methods:{addTools:function(){var e=this;if(GV.config.application.layout.tools){var t=GV.config.application.layout.tools;t.forEach(function(t){var n=t.position||"topleft";t.options=t.options||{},e.addTool(t,n)})}},addTool:function(e,t){GV.tools.forEach(function(n){if(e.name===n.name){var i=e.name;GV.log("gv-app: addTool -> "+i),e.active&&(e.options.active=!0);var a=e.options.props?e.options.props.map(function(e){return(0,s.default)(e)[0]+"='"+(0,o.default)(e)[0]+"'"}).join(" "):"",r="gv-tool-"+t;(0,p.default)({containerId:r,elId:i,vm:new g.default({template:"<"+i+" "+a+"></"+i+">"}),toggleEl:!1})}})}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(17),o=i(a),r=n(23),s=(i(r),n(19)),l=i(s),u=n(24),c=(i(u),n(8)),d=(i(c),n(20)),f=i(d),p=n(3),h=i(p),g=n(224),m=i(g),_=n(233),v=i(_),y=n(9),L=i(y);h.default.use(f.default),h.default.use(l.default),h.default.component("gv-multi-legend-panel",function(){return new o.default(function(e){n.e(1,function(t){e(n(170))})})}),t.default={data:function(){return{livello:null,livelli:[]}},methods:{onChange:function(e){var t=this;(0,v.default)(e,null,!0).then(function(e){t.loadLayer(e[0]),t.showLegend(e[0])})},loadLayer:function(e){e.visible=!0;var t=e.idMap;GV.config.removeMap(t),GV.config.addMapConfig({id:t,flagGeoserver:!0,layers:[e]})},showLegend:function(e){(0,L.default)({elId:"gv-multi-legend-panel",containerId:GV.config.containerId,clear:!0,vm:new h.default({template:'<gv-multi-legend-panel \n            visible="true" \n            src="'+e.wmsParams.url+"LAYER="+e.name+'&REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&" \n            height="120" \n            width="250" \n            :title="false"  \n            noClose="true">\n            </gv-multi-legend-panel>'})})}},mounted:function(){var e=this;(0,m.default)().then(function(t){e.livelli=t})}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(23),o=(i(a),n(19)),r=i(o),s=n(24),l=(i(s),n(8)),u=(i(l),n(20)),c=i(u),d=n(3),f=i(d);f.default.use(c.default),f.default.use(r.default),t.default={name:"gv-base-layer-switcher",data:function(){return{baseLayers:GV.config.baseLayers,activeBaseLayer:GV.config.getActiveBaseLayer().name}},methods:{onChange:function(e){GV.eventBus.$emit("change-base-layer",{layer:e})}},mounted:function(){GV.baseLayerSwitcher=this}}},,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(23),o=(i(a),n(19)),r=i(o),s=n(24),l=(i(s),n(8)),u=(i(l),n(20)),c=i(u),d=n(231),f=i(d),p=n(3),h=i(p);h.default.use(c.default),h.default.use(r.default),t.default={data:function(){return{results:[],address:[],loading:!1,marker:null}},methods:{remoteMethod:function(e){var t=this;return e.length<4?void(this.results=[]):(this.loading=!0,void(0,f.default)(e).then(function(e){t.loading=!1,e&&e.length>0?t.results=e.map(function(e){return{label:e.formatted_address,value:e.place_id,location:e.geometry.location}}):t.results=[]}).catch(function(e){t.loading=!1,console.error(e)}))},onChange:function(e){var t=this.results.find(function(t){return t.value===e});t?this.marker=GV.app.map.addMarker(t):this.marker&&GV.app.map.removeLayer(this.marker)}},mounted:function(){}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"gv-header",computed:{style:function(){return"height:"+GV.config.application.layout.header.height}},mounted:function(){this.$el.innerHTML=GV.config.application.layout.header.html}}},,,,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"gv-inner-html",props:["html"],data:function(){return{}},methods:{},mounted:function(){}}},,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(21),o=(i(a),n(18)),r=i(o),s=n(23),l=(i(s),n(19)),u=i(l),c=n(24),d=(i(c),n(8)),f=(i(d),n(20)),p=i(f),h=n(17),g=i(h),m=n(3),_=i(m),v=n(9),y=i(v),L=n(385),b=i(L);_.default.component("gv-base-layer-switcher",b.default),_.default.component("gv-map-info-panel",function(){return new g.default(function(e){n.e(4,function(t){e(n(138))})})}),_.default.component("gv-multi-legend-panel",function(){return new g.default(function(e){n.e(1,function(t){e(n(170))})})}),_.default.component("gv-map-catalog-panel",function(){return new g.default(function(e){n.e(0,function(t){e(n(168))})})}),_.default.component("gv-layers-transparency",function(){return new g.default(function(e){n.e(6,function(t){e(n(395))})})}),_.default.component("gv-map-download",function(){return new g.default(function(e){n.e(3,function(t){e(n(387))})})}),_.default.use(p.default),_.default.use(u.default),_.default.use(r.default),t.default={name:"gv-legend",data:function(){return{baseLayers:GV.config.baseLayers,maps:GV.config.maps,options:GV.config.application.layout.legend.options,show:!0}},mounted:function(){var e=this;if(GV.log("gv-legend: mounted"),GV.legend=this,this.options.showAddMap){var t=!GV.config.idMap;GV.config.loadCatalog({showMapCatalogPanel:t})}this.options.showDownloadPanelOnLoad&&GV.eventBus.$on("config-add-download",function(t){t.id==GV.config.idMap&&e.openDownloadPanel(t.id)}),this.options.collapsed&&this.hideLegend()},methods:{showMapLayers:function(e){return e.showLayersInLegend},toggleLayers:function(e){e.showLayersInLegend=!e.showLayersInLegend},toggleCollapseClass:function(){return this.show?"gv-legend-collapse gv-color-scheme el-icon-arrow-down":"gv-legend-collapse gv-color-scheme el-icon-arrow-up"},getToggleLayersClass:function(e){return e.showLayersInLegend?"gv-inverted-color-scheme gv-legend-map-tools-button el-icon-arrow-up":"gv-inverted-color-scheme gv-legend-map-tools-button el-icon-arrow-down"},isDownloadable:function(e){return!(!e||!e.metaData)&&e.metaData.flag_download},checkAddMap:function(e){return this.options.showAddMap&&GV.config.getMapConfig(e.id).metaData},hideLegend:function(e){this.show?(document.getElementById("gv-legend-wrapper").style.display="none",document.getElementById("gv-legend").style.width="180px"):(document.getElementById("gv-legend-wrapper").style.display="block",document.getElementById("gv-legend").style.width="260px"),this.show=!this.show},showMapInfoPanel:function(e){GV.config.schedaInfoCartografia=GV.config.getMapConfig(e.id).metaData,(0,y.default)({elId:"gv-map-info-panel",containerId:GV.config.containerId,clear:!0,vm:new _.default({template:'<gv-map-info-panel visible="true" idMap="'+e.id+'"></gv-map-info-panel>'})})},remove:function(e){GV.config.removeMap(e.id)},download:function(e){this.openDownloadPanel(e.id)},openDownloadPanel:function(e){if(document.getElementById("gv-map-download")){var t=document.getElementById("gv-map-download");t.parentNode.removeChild(t)}var n="closeWindow"===this.options.downloadPanelCloseMode;(0,y.default)({elId:"gv-map-download",containerId:GV.config.containerId,toggleEl:!1,vm:new _.default({
template:'<gv-map-download idMap="'+e+'" closeWindow="'+n+'"></gv-map-download>'})})},addMap:function(){(0,y.default)({elId:"gv-map-catalog-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new _.default({template:"<gv-map-catalog-panel></gv-map-catalog-panel>"})})},layerTransparency:function(e){(0,y.default)({elId:"gv-layers-transparency",containerId:GV.config.containerId,toggleEl:!1,vm:new _.default({template:'<gv-layers-transparency idMap="'+e.id+'"></gv-layers-transparency>'})})},iconUrl:function(e){return e.legend.icon},getClass:function(e){return e.inRange?"gv-list-legend-layer-item":"gv-list-legend-layer-item gv-list-legend-layer-disabled-item"},setLayerVisible:function(e,t){GV.eventBus.$emit("set-layer-visible",{layer:e,checked:t.currentTarget.checked})},showLegendPanel:function(e){if(e.inRange&&(e.multiClasse||e.legend.popUpFlag)){var t,n,i=null,a=null;if(e.legend.popUpUrl&&e.legend.popUpFlag)i=e.legend.popUpUrl,t=window.matchMedia("(max-width: 620px)").matches?400:600,n=window.matchMedia("(max-height: 620px)").matches?400:600;else if(e.multiClasse)if(e.flagGeoserver)i=e.wmsParams.url+"LAYER="+e.name+"&REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&",t=window.matchMedia("(max-width: 450px)").matches?300:400,n=350;else{var o=e.classes;a="<table width=100% border=0>",o.forEach(function(e){a+="<tr>",a+='<td width=30><img src="'+e.legendIcon+'"></td>',a+="<td >"+e.legendLabel+"</td>",a+="</tr>"}),a+="</table>"}(0,y.default)({elId:"gv-multi-legend-panel",containerId:GV.config.containerId,vm:new _.default({template:'<gv-multi-legend-panel visible="true" :src="src" :html="html" :height="height" :width="width" :title="title"></gv-multi-legend-panel>',data:{title:"LEGENDA - "+e.legend.label,src:i,html:a,width:t,height:n}})})}}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),o=(i(a),n(218)),r=i(o),s=n(90),l=i(s),u=n(145),c=i(u),d=["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","contextmenu","focus","blur","preclick","load","unload","viewreset","movestart","move","moveend","dragstart","drag","dragend","zoomstart","zoomend","zoomanim","zoomlevelschange","resize","autopanstart","layeradd","layerremove","baselayerchange","overlayadd","overlayremove","locationfound","locationerror","popupopen","popupclose"];t.default={name:"gv-map",data:function(){var e=document.documentElement.clientHeight;return{style:"height:"+e+"px",map:null}},mounted:function(){if(GV.app.map=new r.default,this.map=GV.app.map,this.registerMapEvents(),this.subscribeConfigEvents(),window.addEventListener("resize",this.handleResize),this.handleResize(),GV.config.application.mapOptions&&GV.config.application.mapOptions.click)switch(GV.config.application.mapOptions.click){case"info":l.default.activate();break;case"coordinate":c.default.activate()}GV.log("gv-map: mounted"),GV.eventBus.$emit("gv-map-mounted",GV.app.map)},methods:{handleResize:function(e){var t=document.documentElement.clientHeight-document.getElementById("gv-map").getBoundingClientRect().top;this.style="height:"+t+"px"},registerMapEvents:function(){d.forEach(function(e){var t="map-"+e;GV.app.map.on(e,function(e){GV.eventBus.$emit(t,e)})})},subscribeConfigEvents:function(){GV.eventBus.$on("config-add-map",function(e){var t=e.config;GV.app.map.loadLayers(t.layers),GV.app.map.loadLayers(t.layers),t.extent_3857&&GV.app.map.setExtent(t.extent_3857)}),GV.eventBus.$on("config-remove-map",function(e){var t=e.config;t.layers.forEach(function(e){var t=GV.app.map.getLayerByName(e.name);t&&GV.app.map.removeLayer(t)})})}}}},,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(23),o=(i(a),n(19)),r=i(o),s=n(24),l=(i(s),n(8)),u=(i(l),n(20)),c=i(u),d=n(3),f=i(d);f.default.use(c.default),f.default.use(r.default),t.default={data:function(){return{options:[{value:8,label:"1:1.600.000"},{value:9,label:"1:800.000"},{value:10,label:"1:400.000"},{value:11,label:"1:200.000"},{value:12,label:"1:100.000"},{value:13,label:"1:50.000"},{value:14,label:"1:25.000"},{value:15,label:"1:12.000"},{value:16,label:"1:6.000"},{value:17,label:"1:3.000"},{value:18,label:"1:1.500"},{value:19,label:"1:800"},{value:20,label:"1:400"}],value:9}},methods:{onChange:function(e){GV.app.map.setZoom(e)}},mounted:function(){var e=this;GV.eventBus.$on("map-zoom",function(t){e.value=t})}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(65),o=i(a),r=n(23),s=(i(r),n(19)),l=i(s),u=n(24),c=(i(u),n(8)),d=(i(c),n(20)),f=i(d),p=n(3),h=i(p);h.default.use(f.default),h.default.use(l.default),t.default={data:function(){return{results:[],address:[],recordsCache:{},layers:null,cachedLayers:[],propertyName:null,loading:!1,marker:null}},mounted:function(){this.layers=GV.config.getToolOptions("gv-search").layers,this.propertyName=GV.config.getToolOptions("gv-search").propertyName},methods:{search:function(e){var t=this;if(this.results=[],!(e.length<4)){var n=this.filterData(e);(0,o.default)(n).length>0?(0,o.default)(n).forEach(function(e,i){t.results.push({label:e,value:e,location:n[e]})}):this.results=[]}},filterData:function(e){var t=this,n={};return e=e.replace(/[*+?^${}()|[\]\\]/g,""),""===e?[]:(this.layers.forEach(function(i){GV.app.map.eachLayer(function(a){a.name===i&&a instanceof L.LayerGroup&&a.eachLayer(function(i){var a=i.getLatLng();a.layer=i;var o=i.feature.properties[t.propertyName];new RegExp(e,"i").test(o)&&(n[o]=a)})})}),n)},onChange:function(e){var t=this.results.find(function(t){return t.value===e});t?(t.type="circle",t.zoomLevel=16,this.marker=GV.app.map.addMarker(t)):this.marker&&GV.app.map.removeLayer(this.marker)}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(3);i(a);t.default={name:"gv-title",props:["divId","title","fullTitle","hide","noClose","collapsible","width"],data:function(){return{collapsed:!1}},methods:{closePanel:function(){var e=document.getElementById(this.divId);e&&(this.hide?e.style.display="none":e.parentNode.removeChild(e))},collapse:function(){this.collapsed?document.getElementById(this.collapsible).style.display="block":document.getElementById(this.collapsible).style.display="none",this.collapsed=!this.collapsed},toggleCollapseClass:function(){return this.collapsed?"gv-title-collapse gv-color-scheme el-icon-arrow-down":"gv-title-collapse gv-color-scheme el-icon-arrow-up"}},mounted:function(){this.$el.id=this.divId+"-title",this.width&&(this.$el.style.width=this.width)}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(17),o=i(a),r=n(21),s=(i(r),n(8)),l=(i(s),n(18)),u=i(l),c=n(9),d=i(c),f=n(3),p=i(f);p.default.use(u.default),p.default.component("gv-map-catalog-panel",function(){return new o.default(function(e){n.e(0,function(t){e(n(168))})})});var h="gv-add-map-button";t.default={name:h,data:function(){var e=GV.config.getButtonOptions(h);return{active:!1,options:e,cssClass:"gv-add-map gv-button fa fa-plus-square-o",cssActiveClass:"gv-button-selected"}},methods:{onClick:function(){(0,d.default)({elId:"gv-map-catalog-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new p.default({template:"<gv-map-catalog-panel></gv-map-catalog-panel>"})})},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(146),o=i(a),r=n(145),s=i(r),l="gv-coordinate-button";t.default={name:l,data:function(){var e=GV.config.getToolOptions(l);return{name:l,active:!1,control:s.default,options:e,cssClass:"gv-button fa fa-hand-o-down",cssActiveClass:"gv-button-selected"}},mixins:[o.default],methods:{onClick:function(){this.switchActiveButton()},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(146),o=i(a),r=n(90),s=i(r),l="gv-info-button";t.default={name:l,data:function(){var e=GV.config.getToolOptions(l);return{name:l,active:!1,control:s.default,options:e,cssClass:"gv-button fa fa-info",cssActiveClass:"gv-button-selected"}},mixins:[o.default],methods:{onClick:function(){this.switchActiveButton()},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){this.active=this.options.active}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(17),o=i(a),r=n(21),s=(i(r),n(8)),l=(i(s),n(18)),u=i(l),c=n(9),d=i(c),f=n(3),p=i(f);p.default.use(u.default),p.default.component("gv-layer-search",function(){return new o.default(function(e){n.e(2,function(t){e(n(394))})})});var h="gv-layer-search-button";t.default={name:h,data:function(){var e=GV.config.getButtonOptions(h);return{active:!1,options:e,cssClass:"gv-layer-search-button gv-button fa fa-search",cssActiveClass:"gv-button-selected"}},methods:{onClick:function(){(0,d.default)({elId:"gv-layer-search",containerId:GV.config.containerId,toggleEl:!0,vm:new p.default({template:"<gv-layer-search></gv-layer-search>"})})},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(132),o=(i(a),n(8)),r=(i(o),n(127)),s=i(r),l=n(3),u=i(l),c=n(6),d=i(c),f=n(103),p=i(f),h=n(147),g=i(h),m=n(227),_=i(m),v=n(9),y=i(v),L=n(104),b=i(L);t.default={_lastZIndex:21,debug:!1,containerId:"gv-container",idMap:null,title:null,findOptions:null,geoserverUrl:null,application:{},baseLayers:[{type:"ESRI_IMAGERY",visible:!0}],maps:[],hilitedLayer:[],init:function(e){var t=this;if(!e)throw new Error("Opzioni di inizializzazione non impostate!");if(this.debug=e.debug,this.idMap=e.idMap,this.findOptions=e.findOptions,this.geoserverUrl=e.geoserverUrl,e.application&&(this.application=e.application),e.containerId&&(this.containerId=e.containerId),this.application.layout=e.application&&e.application.layout?e.application.layout:{},e.application&&(this.application.proxy=e.application.proxy||d.default.DEFAULT_PROXY),e.application&&e.application.layout&&e.application.layout.title&&(this.title=e.application.layout.title),this.baseLayers=e.baseLayers,this.baseLayers.forEach(function(e){e.name=e.type,e.label=d.default.BASE_LAYERS[e.type].label,e.icon=d.default.BASE_LAYERS[e.type].icon}),e.idMap){var n=(e.application?e.application.callback:null,e.idMap.split(","));this.initLoadingMaps=n.length,this.initLoadedMaps=0,n.forEach(function(e){t.addRlMap(e,!0)}),GV.eventBus.$on("gv-config-init",function(e){t.application&&t.application.callback&&t.application.callback(e)})}else GV.eventBus.$on("gv-app-mounted",function(n){e.maps.forEach(function(e){t.addMapConfig(e)}),t.application&&t.application.callback&&t.application.callback(n)});GV.eventBus.$on("map-zoom",function(e){var n=t.getAllLayersConfig();n.forEach(function(e){t.setLayerAttribute(e.name,"inRange",GV.app.map.layerInRange(e))})})},addMapConfig:function(e){var t=this;if(e.layers.forEach(function(e){e.minScale=0===e.minScale?591657550:e.minScale,e.inRange=!GV.app||!GV.app.map||GV.app.map.layerInRange(e),e.opacityBase100=100*e.opacity,e.zIndex=t._lastZIndex++}),e.layers.reverse(),e.addLayerConfig&&this.getMapConfig(e.id))e.layers.forEach(function(n){return t.getMapConfig(e.id).layers.push(n)});else{if(this.getMapConfig(e.id))return;e.ancillaryMaps&&e.ancillaryMaps.forEach(function(e){return t.addMapConfig(e)}),e.showLayersInLegend=!0,this.maps.unshift(e)}GV.eventBus.$emit("config-add-map",{config:e})},setLayerAttribute:function(e,t,n){this.maps.forEach(function(i){var a=i.layers;a.forEach(function(i){i.name===e&&(i[t]=n)})})},removeMap:function(e){var t=this.getMapConfig(e);if(t){GV.eventBus.$emit("config-remove-map",{config:t});var n=this.maps.findIndex(function(t){return t.id===e});n>-1&&this.maps.splice(n,1)}},removeLayer:function(e){var t=this;this.maps.forEach(function(n){var i=-1;n.layers.forEach(function(t,n){t.name===e&&(i=n)}),i>-1&&n.layers.splice(i,1),0===n.layers.length&&t.removeMap(n.id)}),GV.eventBus.$emit("config-remove-layer",{config:e})},addRlMap:function(e,t){var n=this;return this.getMapConfig(e)?this.getMapConfig(e):void(0,p.default)(e).then(function(i){if(!i.data.success)throw new Error("Errore Caricamento Mappa: "+i.data.message);if(!i.data.data)throw new Error("Errore Caricamento Mappa: configurazione non trovata");var a=i.data.data;return n.addMapConfig(a),GV.app&&GV.app.map&&a.type&&"R"==a.type&&t&&n.getBaseLayerConfig("BLANK")&&(GV.app.map.changeBaseLayer("BLANK"),GV.baseLayerSwitcher&&(GV.baseLayerSwitcher.activeBaseLayer="BLANK")),a.activeBaseLayer&&(GV.app.map.changeBaseLayer(a.activeBaseLayer),GV.baseLayerSwitcher&&(GV.baseLayerSwitcher.activeBaseLayer=a.activeBaseLayer)),GV.config.findOptions&&GV.app.map.find(GV.config.findOptions),n.initLoadedMaps=n.initLoadedMaps+1,n.initLoadingMaps===n.initLoadedMaps&&GV.eventBus.$emit("gv-config-init",GV.app),a.metaData.flag_download&&(0,b.default)(e).then(function(t){n.maps.forEach(function(n){n.id.toString()===e&&(n.downloadConfig=t,GV.eventBus.$emit("config-add-download",a))})}),a}).catch(function(e){console.error(e),s.default.error({title:"Attenzione",type:"error",duration:5e3,offset:70,message:e.message})})},loadCatalog:function(e){var t=this;(0,g.default)().then(function(n){t.catalog=t.catalogFull=n.children,(0,_.default)().then(function(n){t.enti=n,e.showMapCatalogPanel&&(0,y.default)({elId:"gv-map-catalog-panel",toggleEl:!1,vm:new u.default({template:"<gv-map-catalog-panel></gv-map-catalog-panel>"})})})})},getAllLayersConfig:function(){var e=[];return this.maps.forEach(function(t){t.layers.forEach(function(t){e.push(t)})}),e},getLayersNameByMapId:function(e){if(!e)return console.error('Parametro "idMap" non definito'),null;var t=[];return this.maps.forEach(function(n){n.id.toString()===e&&n.layers.forEach(function(n){n.idMap.toString()===e&&t.push(n.name)})}),t},getLayerConfig:function(e){var t=null;return this.maps.forEach(function(n){n.layers.forEach(function(n){n.name===e&&(t=n)})}),t},getBaseLayerConfig:function(e){var t=this.baseLayers.find(function(t){return t.name===e});return t},getMapConfig:function(e){return this.maps.find(function(t){return t.id==e})},getToolOptions:function(e){var t=null;return this.application.layout&&this.application.layout.tools?(this.application.layout.tools.forEach(function(n){n.name===e&&n.options&&(t=n.options)}),t):null},getButtonOptions:function(e){var t=null;return this.application.layout&&this.application.layout.toolbar?(this.application.layout.toolbar.items.forEach(function(n){n.name===e&&n.options&&(t=n.options)}),t):null},getActiveBaseLayer:function(){var e=null;return this.baseLayers.forEach(function(t){t.visible&&(e=t)}),e},setActiveBaseLayer:function(e){this.baseLayers.forEach(function(t){t.visible=t.name===e})}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(3),o=i(a);o.default.directive("draggable",{inserted:function(e,t,n){var i=e.id.replace("-title","");e.className+=" draggable",e.setAttribute("draggable","true"),e.setAttribute("ondragstart","GV.dragbox.start(event)"),e.setAttribute("ondragend","GV.dragbox.end(event,'"+i+"')")}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=void 0;if(t){var i=t.geomField||"location",a=e.hits.hits;n={type:"FeatureCollection",totalFeatures:e.hits.total,features:[],crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4326"}}},a.forEach(function(e){var t=e._source[i];n.features.push({type:"Feature",id:e._id,geometry:{type:"Point",coordinates:t},geometry_name:"GEOMETRY",properties:e._source})})}else n="string"==typeof e?JSON.parse(e):e;return n}function o(e,t){if(O[e.type]){var n=O[e.type](e,t);return n.legend=e.legend,n.config=e,n}throw new Error("Layer di tipo "+e.type+" non gestito")}Object.defineProperty(t,"__esModule",{value:!0}),t.create=void 0;var r=n(65),s=i(r),l=n(64),u=i(l),c=n(166),d=i(c),f=n(6),p=i(f),h=n(247),g=i(h),m=n(150),_=i(m),v=n(246),y=i(v),L=n(148),b=i(L),M=n(245),C=i(M),E=n(380),w=i(E),I=n(106),S=i(I);n(219),n(220);var x='<a href="http://www.esri.com/">Esri</a>',O={BLANK:function(e){return e.legend={label:"Sfondo Bianco"},d.default.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{opacity:0})},OSM:function(e){return e.legend={label:"OpenStreetMap"},d.default.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data Â© <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'})},ESRI_IMAGERY:function(e){e.legend={label:"ESRI Imagery"},e.name=e.type;var t="DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community";return d.default.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"&copy; "+x+", "+t,maxZoom:19})},ESRI_STREETS:function(e){e.legend={label:"ESRI Streets"},e.name=e.type;var t="USGS, NOAA";return d.default.tileLayer("http://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"&copy; "+x+", "+t,maxZoom:19})},ESRI_TOPOGRAPHIC:function(e){e.legend={label:"ESRI Topographic"},e.name=e.type;var t="USGS, NOAA";return d.default.tileLayer("http://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"&copy; "+x+", "+t,maxZoom:19})},ESRI_GRAY:function(e){e.legend={label:"ESRI Gray"},e.name=e.type;var t="HERE, DeLorme, MapmyIndia, OpenStreetMap contributors";return d.default.tileLayer("http://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"&copy; "+x+", "+t,maxZoom:16})},ESRI_DARKGRAY:function(e){e.legend={label:"ESRI Dark Gray"},e.name=e.type;var t="HERE, DeLorme, MapmyIndia, OpenStreetMap contributors";return d.default.tileLayer("http://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"&copy; "+x+", "+t,maxZoom:16})},MAPBOX_STREETS:function(e){return e.legend={label:"Mapbox Streets"},d.default.tileLayer("http://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g",{attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",id:"mapbox.streets",accessToken:"pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g"})},MAPBOX_SATELLITE:function(e){return e.legend={label:"Mapbox Satellite"},d.default.tileLayer("http://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g",{attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",id:"mapbox.satellite",accessToken:"pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g"})},MAPBOX_OUTDOOR:function(e){return e.legend={label:"Mapox Outdoor"},d.default.tileLayer("http://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g",{attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",id:"mapbox.outdoors",accessToken:"pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g"})},MAPBOX_LIGHT:function(e){return e.legend={label:"Mapox Light"},d.default.tileLayer("http://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g",{attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",id:"mapbox.light",accessToken:"pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g"})},STAMEN_TERRAIN:function(e){return e.legend={label:"Stamen Terrain"},d.default.tileLayer("http://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",minZoom:0,maxZoom:18,ext:"png"})},STAMEN_TONER_LIGHT:function(e){return e.legend={label:"Stamen Toner Light"},d.default.tileLayer("http://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"})},RL_ORTOFOTO_2013:function(){return this.TMS({visible:!1,tmsParams:{name:"L4419/webmercator",url:"http://mapproxy.regione.liguria.it/mapproxy/1661/tiles/"},zIndex:1})},RL_ORTOFOTO_2016:function(){return this.TMS({visible:!1,tmsParams:{name:"L5802/webmercator",url:"http://mapproxy.regione.liguria.it/mapproxy/1828/tiles/"},zIndex:1})},RL_CARTE_BASE:function(){return this.TMS({visible:!1,tmsParams:{name:"C1623/webmercator",url:"http://mapproxy.regione.liguria.it/mapproxy/1623/tiles/"},zIndex:1})},TMS:function(e){var t=e.tmsParams.url.replace("/tms/","/tiles/"),n=e.tmsParams.name,i=t+"/1.0.0/"+n+"/{z}/{x}/{y}.png",a=(0,C.default)(e.maxScale),o=d.default.tileLayer(i,{minZoom:1,maxZoom:a});return o.setZIndex(e.zIndex),o.name=n.replace("/webmercator",""),o},WMS:function(e){var t=e.name,n=e.cacheMinZoomLevel,i=e.minScale,a=e.maxScale,o=e.wmsParams,r=(e.flagGeoserver,e.zIndex);GV.log("layerFactory - Creazione Layer WMS: "+t);var s=null,l=!!n,c=o.format,f=i?(0,y.default)(i):8,h=a?(0,y.default)(a):20,g=e.opacity||1,m={subdomains:["1","2"],transparent:!0,FORMAT_OPTIONS:"antialias:text",layers:t,format:c,opacity:g,minZoom:f,maxZoom:h,bounds:d.default.latLngBounds(d.default.latLng(p.default.MAX_BOUNDS.X_MIN,p.default.MAX_BOUNDS.Y_MIN),d.default.latLng(p.default.MAX_BOUNDS.X_MAX,p.default.MAX_BOUNDS.Y_MAX))},_=o.url;return l?(p.default.USE_SUBDOMAINS&&_.indexOf("geoservizi.regione.liguria.it")>0&&(_=_.replace("geoservizi","geoservizi{s}")),(0,u.default)(m,{tiled:!0,TILESORIGIN:"-20037508,-20037508",tileSize:256,CACHE_VERSION:e.cacheVersion}),s=d.default.tileLayer.wms(_,m)):((0,u.default)(m,{tiled:!1,pane:"tilePane"}),s=d.default.nonTiledLayer.wms(_,m)),s.setZIndex(r),s.type="WMS",s.name=t,s},JSON:function(e){function t(e){var t="<div><b>"+M.label+"</b><br><br></div>";return t+="<div>",e.forEach(function(e){t+=e.key+":"+e.value+"<br>"}),t+="</div>"}var n=e.data,i=e.url,o=e.name,r=e.wfsParams,l=e.esParams,c=e.classes,f=e.style,p=e.pointToLayer,h=e.tooltip,m=e.popup,v=e.basePopup,y=e.cluster,L=e.subType,M=e.legend,C=e.onEachFeature,E=null,I={};c&&c.length>0&&("POINT"===e.geomSubType?I.pointToLayer=function(e,t){var n;if(c.forEach(function(t){t.filter&&t.filter.key&&t.filter.value?e.properties[t.filter.key]===t.filter.value&&(n=t.style):n=t.style}),n.iconUrl){var i;switch(n.iconUrl){case"default":i=d.default.icon({iconUrl:"http://geoportale.regione.liguria.it/geoviewer2/static/img/marker-icon.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[0,-41]});break;case"default-small":i=d.default.icon({iconUrl:"http://geoportale.regione.liguria.it/geoviewer2/static/img/marker-icon.png",iconSize:[12,20],iconAnchor:[6,10],popupAnchor:[0,-20]});break;default:i=d.default.icon({iconUrl:n.iconUrl,iconSize:n.iconSize,iconAnchor:n.iconAnchor,popupAnchor:n.popupAnchor})}return d.default.marker(t,{icon:i})}return d.default.circleMarker(t,n)}:I.style=function(e){var t;return c.forEach(function(n){n.filter&&n.filter.key&&n.filter.value?e.properties[n.filter.key]===n.filter.value&&(t=n.style):t=n.style}),t},I.filter=function(e){var t=!1;return c.forEach(function(n){n.filter?n.filter.key&&n.filter.value&&e.properties[n.filter.key]===n.filter.value&&(t=!0):t=!0}),t}),f&&(I.style=f),p&&(I.pointToLayer=p),h||m?I.onEachFeature=function(e,t){h&&(t.options.title=(0,g.default)(h,e.properties)),m&&t.bindPopup((0,g.default)(m,e.properties))}:I.onEachFeature=C;var x=d.default.geoJson(n,I);x.name=o,v&&x.on("ready",function(){x.eachLayer(function(e){var n=[];(0,s.default)(e.feature.properties).forEach(function(t){var i=e.feature.properties[t];("string"==typeof i||i instanceof String||"number"==typeof i)&&n.push({key:t,value:i})}),x.bindPopup(t(n))})}),x.setFilter=function(e){x.filter=e,e?x.eachLayer(function(t){var n=0;e.forEach(function(e){t.feature.properties[e.key]===e.value&&(n=x.config.opacity||1)}),t.setOpacity(n)}):x.eachLayer(function(e){var t=x.config.opacity||1;e.setOpacity(t)})};var O;if(r&&r.typeName&&r.url&&(O={service:"WFS",version:"2.0.0",request:"GetFeature",srsName:"EPSG:4326",outputFormat:"text/javascript",format_options:"callback: getJson",typeName:r.typeName},i=r.url+(0,_.default)(O)),l&&(O={},l.field?(O.q=l.field+":",l.query?O.q+=l.query:O.q+="*"):l.query&&(O.q=l.query),O.pretty="true",O.size=1e5,i=GV.config.application.proxy+l.url+(0,_.default)(O)),y){var G={showCoverageOnHover:!1};y.options&&(0,u.default)(G,y.options),E=d.default.markerClusterGroup(G),E.name=o}return i&&(0,b.default)(i).then(function(e){var t=void 0;if("KML"===L){var n=(0,S.default)(e.data);t=w.default.kml(n)}else if("GPX"===L){var i=(0,S.default)(e.data);t=w.default.gpx(i)}else t=a(e.data,l);x.addData(t),y&&E.addLayer(x),x.fire("ready"),GV.eventBus.$emit("layer-loaded-json",x)}).catch(function(e){return console.error(e)}),n&&y&&E.addLayer(x),y?E:x}};t.create=o},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(64),r=a(o),s=n(6),l=a(s),u=n(217),c=i(u),d=n(166),f=a(d),p=n(105),h=a(p),g=n(239),m=a(g),_=f.default.Map.extend({layers:[],baseLayers:[],initialExtent:[],buttons:[],mapOptions:{zoomControl:!1,maxBounds:f.default.latLngBounds(f.default.latLng(l.default.MAX_BOUNDS.X_MIN,l.default.MAX_BOUNDS.Y_MIN),f.default.latLng(l.default.MAX_BOUNDS.X_MAX,l.default.MAX_BOUNDS.Y_MAX)),maxBoundsViscosity:1,minZoom:7},initialize:function(){(0,r.default)(this.mapOptions,GV.config.application.mapOptions),f.default.Map.prototype.initialize.call(this,"gv-map",f.default.extend(f.default.Map.prototype.options,this.mapOptions)),this.setInitialExtent(),this.setLoading(),this.loadBaseLayers(),this.loadControls(),this.eventMngr()},eventMngr:function(){var e=this;this.on("zoom",function(){GV.eventBus.$emit("map-zoom",e._zoom)}),GV.eventBus.$on("set-layer-visible",function(t){e.setLayerVisible(t.layer,t.checked),e.setHiliteLayerVisible(t)}),GV.eventBus.$on("set-layer-transparency",function(t){var n=e.getLayerByName(t.layerName);n.setOpacity(t.opacity)}),GV.eventBus.$on("change-base-layer",function(t){e.changeBaseLayer(t.layer)})},setHiliteLayerVisible:function(e){var t=this;GV.config.hilitedLayer&&GV.config.hilitedLayer.forEach(function(n){if(n===e.layer.name){var i=t.getLayerByName("InfoWmsHilite");i.eachLayer(function(t){var n=e.checked?.6:0;t.setStyle({opacity:n})})}})},setInitialExtent:function(){var e=this.mapOptions.initialExtent||"830036,5402959,1123018,5597635",t=e.split(","),n=f.default.point(t[0],t[1]),i=f.default.point(t[2],t[3]),a=f.default.Projection.SphericalMercator.unproject(n),o=f.default.Projection.SphericalMercator.unproject(i);this.initialExtent=f.default.latLngBounds(a,o),this.fitBounds(this.initialExtent)},setExtent:function(e){var t=e.split(","),n=f.default.point(t[0],t[1]),i=f.default.point(t[2],t[3]),a=f.default.Projection.SphericalMercator.unproject(n),o=f.default.Projection.SphericalMercator.unproject(i);this.initialExtent=f.default.latLngBounds(a,o),this.fitBounds(this.initialExtent)},setLayerVisible:function(e,t){if(t)e.visible=!0,this.loadLayers([e]);else{var n=this.getLayerByName(e.name);n&&this.removeLayer(n)}},layerInRange:function(e){return!e.minScale&&!e.minScale||this.getScale()<e.minScale&&this.getScale()>e.maxScale},loadControls:function(){if(this.mapOptions.controls){var e;this.controls={},this.mapOptions.controls.forEach(function(t){switch(t.name){case"scale":e=f.default.control.scale({imperial:!1}).addTo(this),this.controls[t]=e}},this)}},loadBaseLayers:function(){GV.config.baseLayers.forEach(function(e){var t=c.create(e,this);this.baseLayers[t.config.type]=t,t&&e.visible&&(t.on("loading",function(){this.loading(!0,t)},this),t.on("load",function(){this.loading(!1,t)},this),t.addTo(this))},this)},loadLayers:function(e){e.forEach(function(e){var t=this;if(!this.getLayerByName(e.name)){var n=c.create(e,this);n&&e.visible&&(n.on("loading",function(){this.loading(!0,n)},this),n.on("load",function(){this.loading(!1,n)},this),n.addTo(this),n.on("ready",function(){if(e.zoomToLayerExtent){var i;!function(){var e=new f.default.latLngBounds;i=n._layers,n.eachLayer(function(t){t.getBounds?e.extend(t.getBounds()):e.extend(new f.default.latLngBounds(t._latlng,t._latlng))}),e&&t.fitBounds(e)}()}}))}},this)},getLayerByName:function(e){var t=null;return this.eachLayer(function(n){n.config&&n.config.name&&n.config.name===e&&(t=n)}),t},changeBaseLayer:function(e){var t=GV.config.getActiveBaseLayer().name;t!==e&&(this.removeLayer(this.baseLayers[t]),this.baseLayers[e].addTo(this),GV.config.setActiveBaseLayer(e))},getScaleLabel:function(){return l.default.BASE_SCALE_LABELS[this._zoom]},getScale:function(){return l.default.BASE_SCALES[this._zoom]},setLoading:function(){this._spinning=0,this.on("layerremove",function(e){e.layer.loading&&this.loading(!1),"function"==typeof e.layer.on&&(e.layer.off("load"),e.layer.off("loading"))},this)},loading:function(e,t){e?(0===this._spinning&&(GV.log("start load: "+t.config.name),this._container.style.cursor="progress"),this._spinning++):(this._spinning--,this._spinning<=0&&(GV.log("end load: "+t.config.name),this._container.style.cursor="default"))},addMarker:function(e){var t=f.default.icon({iconUrl:"http://srvcarto.regione.liguria.it/geoviewer2/static/img/marker-icon.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[0,-41]}),n={opacity:.8,icon:t,title:e.label};"circle"===e.type?f.default.circleMarker(e.location,n).addTo(this):f.default.marker(e.location,n).addTo(this),this.setView(e.location,e.zoomLevel||14)},find:function(e){var t=this;if(!(e.values&&"null"!==e.values||e.cqlFilter))return void console.error("Parametri FIND non completi: manca CQL_FILTER o VALUES");var n=e.cqlFilter||(0,m.default)(e),i=e.layers||GV.config.getLayersNameByMapId(e.map);(0,h.default)(i,n).then(function(e){var n=t.getLayerByName("InfoWmsHilite");e&&e.length>0&&(n.clearLayers(),n.addData(e),t.fitBounds(n.getBounds(),{maxZoom:15}),GV.config.hilitedLayer=i)}).catch(function(e){console.error(e)})},zoomTo:function(e,t,n){this.setView(new f.default.LatLng(e,t),n)}});t.default=_},function(e,t){"use strict";!function(e,t,n){L.MarkerClusterGroup=L.FeatureGroup.extend({
options:{maxClusterRadius:80,iconCreateFunction:null,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(e){L.Util.setOptions(this,e),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[];var t=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,t?this._withAnimation:this._noAnimation),this._markerCluster=t?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(e){if(e instanceof L.LayerGroup)return this.addLayers([e]);if(!e.getLatLng)return this._nonPointGroup.addLayer(e),this;if(!this._map)return this._needsClustering.push(e),this;if(this.hasLayer(e))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(e,this._maxZoom),this._topClusterLevel._recalculateBounds();var t=e,n=this._map.getZoom();if(e.__parent)for(;t.__parent._zoom>=n;)t=t.__parent;return this._currentShownBounds.contains(t.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(e,t):this._animationAddLayerNonAnimated(e,t)),this},removeLayer:function(e){return e instanceof L.LayerGroup?this.removeLayers([e]):e.getLatLng?this._map?e.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(e)),this._removeLayer(e,!0),this._topClusterLevel._recalculateBounds(),e.off("move",this._childMarkerMoved,this),this._featureGroup.hasLayer(e)&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,e)&&this.hasLayer(e)&&this._needsRemoving.push(e),this):(this._nonPointGroup.removeLayer(e),this)},addLayers:function(e){if(!L.Util.isArray(e))return this.addLayer(e);var t,n=this._featureGroup,i=this._nonPointGroup,a=this.options.chunkedLoading,o=this.options.chunkInterval,r=this.options.chunkProgress,s=e.length,l=0,u=!0;if(this._map){var c=(new Date).getTime(),d=L.bind(function(){for(var f=(new Date).getTime();l<s;l++){if(a&&l%200===0){var p=(new Date).getTime()-f;if(p>o)break}if(t=e[l],t instanceof L.LayerGroup)u&&(e=e.slice(),u=!1),this._extractNonGroupLayers(t,e),s=e.length;else if(t.getLatLng){if(!this.hasLayer(t)&&(this._addLayer(t,this._maxZoom),t.__parent&&2===t.__parent.getChildCount())){var h=t.__parent.getAllChildMarkers(),g=h[0]===t?h[1]:h[0];n.removeLayer(g)}}else i.addLayer(t)}r&&r(l,s,(new Date).getTime()-c),l===s?(this._topClusterLevel._recalculateBounds(),this._featureGroup.eachLayer(function(e){e instanceof L.MarkerCluster&&e._iconNeedsUpdate&&e._updateIcon()}),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(d,this.options.chunkDelay)},this);d()}else for(var f=this._needsClustering;l<s;l++)t=e[l],t instanceof L.LayerGroup?(u&&(e=e.slice(),u=!1),this._extractNonGroupLayers(t,e),s=e.length):t.getLatLng?this.hasLayer(t)||f.push(t):i.addLayer(t);return this},removeLayers:function(e){var t,n,i=e.length,a=this._featureGroup,o=this._nonPointGroup,r=!0;if(!this._map){for(t=0;t<i;t++)n=e[t],n instanceof L.LayerGroup?(r&&(e=e.slice(),r=!1),this._extractNonGroupLayers(n,e),i=e.length):(this._arraySplice(this._needsClustering,n),o.removeLayer(n),this.hasLayer(n)&&this._needsRemoving.push(n));return this}if(this._unspiderfy){this._unspiderfy();var s=e.slice(),l=i;for(t=0;t<l;t++)n=s[t],n instanceof L.LayerGroup?(this._extractNonGroupLayers(n,s),l=s.length):this._unspiderfyLayer(n)}for(t=0;t<i;t++)n=e[t],n instanceof L.LayerGroup?(r&&(e=e.slice(),r=!1),this._extractNonGroupLayers(n,e),i=e.length):n.__parent?(this._removeLayer(n,!0,!0),a.hasLayer(n)&&(a.removeLayer(n),n.clusterShow&&n.clusterShow())):o.removeLayer(n);return this._topClusterLevel._recalculateBounds(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),a.eachLayer(function(e){e instanceof L.MarkerCluster&&e._updateIcon()}),this},clearLayers:function(){return this._map||(this._needsClustering=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(e){e.off("move",this._childMarkerMoved,this),delete e.__parent}),this._map&&this._generateInitialClusters(),this},getBounds:function(){var e=new L.LatLngBounds;this._topClusterLevel&&e.extend(this._topClusterLevel._bounds);for(var t=this._needsClustering.length-1;t>=0;t--)e.extend(this._needsClustering[t].getLatLng());return e.extend(this._nonPointGroup.getBounds()),e},eachLayer:function(e,t){var n,i=this._needsClustering.slice(),a=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(i),n=i.length-1;n>=0;n--)a.indexOf(i[n])===-1&&e.call(t,i[n]);this._nonPointGroup.eachLayer(e,t)},getLayers:function(){var e=[];return this.eachLayer(function(t){e.push(t)}),e},getLayer:function(e){var t=null;return e=parseInt(e,10),this.eachLayer(function(n){L.stamp(n)===e&&(t=n)}),t},hasLayer:function(e){if(!e)return!1;var t,n=this._needsClustering;for(t=n.length-1;t>=0;t--)if(n[t]===e)return!0;for(n=this._needsRemoving,t=n.length-1;t>=0;t--)if(n[t]===e)return!1;return!(!e.__parent||e.__parent._group!==this)||this._nonPointGroup.hasLayer(e)},zoomToShowLayer:function(e,t){"function"!=typeof t&&(t=function(){});var n=function n(){!e._icon&&!e.__parent._icon||this._inZoomAnimation||(this._map.off("moveend",n,this),this.off("animationend",n,this),e._icon?t():e.__parent._icon&&(this.once("spiderfied",t,this),e.__parent.spiderfy()))};if(e._icon&&this._map.getBounds().contains(e.getLatLng()))t();else if(e.__parent._zoom<this._map.getZoom())this._map.on("moveend",n,this),this._map.panTo(e.getLatLng());else{var i=function(){this._map.off("movestart",i,this),i=null};this._map.on("movestart",i,this),this._map.on("moveend",n,this),this.on("animationend",n,this),e.__parent.zoomToBounds(),i&&n.call(this)}},onAdd:function(e){this._map=e;var t,n,i;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(e),this._nonPointGroup.addTo(e),this._gridClusters||this._generateInitialClusters(),this._maxLat=e.options.crs.projection.MAX_LATITUDE,t=0,n=this._needsRemoving.length;t<n;t++)i=this._needsRemoving[t],this._removeLayer(i,!0);this._needsRemoving=[],this._zoom=this._map.getZoom(),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),n=this._needsClustering,this._needsClustering=[],this.addLayers(n)},onRemove:function(e){e.off("zoomend",this._zoomEnd,this),e.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(e){for(var t=e;t&&!t._icon;)t=t.__parent;return t||null},_arraySplice:function(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return e.splice(n,1),!0},_removeFromGridUnclustered:function(e,t){for(var n=this._map,i=this._gridUnclustered;t>=0&&i[t].removeObject(e,n.project(e.getLatLng(),t));t--);},_childMarkerMoved:function(e){this._ignoreMove||(e.target._latlng=e.oldLatLng,this.removeLayer(e.target),e.target._latlng=e.latlng,this.addLayer(e.target))},_removeLayer:function(e,t,n){var i=this._gridClusters,a=this._gridUnclustered,o=this._featureGroup,r=this._map;t&&this._removeFromGridUnclustered(e,this._maxZoom);var s,l=e.__parent,u=l._markers;for(this._arraySplice(u,e);l&&(l._childCount--,l._boundsNeedUpdate=!0,!(l._zoom<0));)t&&l._childCount<=1?(s=l._markers[0]===e?l._markers[1]:l._markers[0],i[l._zoom].removeObject(l,r.project(l._cLatLng,l._zoom)),a[l._zoom].addObject(s,r.project(s.getLatLng(),l._zoom)),this._arraySplice(l.__parent._childClusters,l),l.__parent._markers.push(s),s.__parent=l.__parent,l._icon&&(o.removeLayer(l),n||o.addLayer(s))):n&&l._icon||l._updateIcon(),l=l.__parent;delete e.__parent},_isOrIsParent:function(e,t){for(;t;){if(e===t)return!0;t=t.parentNode}return!1},fire:function(e,t,n){if(t&&t.layer instanceof L.MarkerCluster){if(t.originalEvent&&this._isOrIsParent(t.layer._icon,t.originalEvent.relatedTarget))return;e="cluster"+e}L.FeatureGroup.prototype.fire.call(this,e,t,n)},listens:function(e,t){return L.FeatureGroup.prototype.listens.call(this,e,t)||L.FeatureGroup.prototype.listens.call(this,"cluster"+e,t)},_defaultIconCreateFunction:function(e){var t=e.getChildCount(),n=" marker-cluster-";return n+=t<10?"small":t<100?"medium":"large",new L.DivIcon({html:"<div><span>"+t+"</span></div>",className:"marker-cluster"+n,iconSize:new L.Point(40,40)})},_bindEvents:function(){var e=this._map,t=this.options.spiderfyOnMaxZoom,n=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick;(t||i)&&this.on("clusterclick",this._zoomOrSpiderfy,this),n&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),e.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(e){for(var t=e.layer,n=t;1===n._childClusters.length;)n=n._childClusters[0];n._zoom===this._maxZoom&&n._childCount===t._childCount&&this.options.spiderfyOnMaxZoom?t.spiderfy():this.options.zoomToBoundsOnClick&&t.zoomToBounds(),e.originalEvent&&13===e.originalEvent.keyCode&&this._map._container.focus()},_showCoverage:function(e){var t=this._map;this._inZoomAnimation||(this._shownPolygon&&t.removeLayer(this._shownPolygon),e.layer.getChildCount()>2&&e.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(e.layer.getConvexHull(),this.options.polygonOptions),t.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var e=this.options.spiderfyOnMaxZoom,t=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick,i=this._map;(e||n)&&this.off("clusterclick",this._zoomOrSpiderfy,this),t&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),i.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var e=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),e),this._currentShownBounds=e}},_generateInitialClusters:function(){var e=this._map.getMaxZoom(),t=this.options.maxClusterRadius,n=t;"function"!=typeof t&&(n=function(){return t}),this.options.disableClusteringAtZoom&&(e=this.options.disableClusteringAtZoom-1),this._maxZoom=e,this._gridClusters={},this._gridUnclustered={};for(var i=e;i>=0;i--)this._gridClusters[i]=new L.DistanceGrid(n(i)),this._gridUnclustered[i]=new L.DistanceGrid(n(i));this._topClusterLevel=new this._markerCluster(this,-1)},_addLayer:function(e,t){var n,i,a=this._gridClusters,o=this._gridUnclustered;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(e),e.on("move",this._childMarkerMoved,this);t>=0;t--){n=this._map.project(e.getLatLng(),t);var r=a[t].getNearObject(n);if(r)return r._addChild(e),void(e.__parent=r);if(r=o[t].getNearObject(n)){var s=r.__parent;s&&this._removeLayer(r,!1);var l=new this._markerCluster(this,t,r,e);a[t].addObject(l,this._map.project(l._cLatLng,t)),r.__parent=l,e.__parent=l;var u=l;for(i=t-1;i>s._zoom;i--)u=new this._markerCluster(this,i,u),a[i].addObject(u,this._map.project(r.getLatLng(),i));return s._addChild(u),void this._removeFromGridUnclustered(r,t)}o[t].addObject(e,n)}this._topClusterLevel._addChild(e),e.__parent=this._topClusterLevel},_enqueue:function(e){this._queue.push(e),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var e=0;e<this._queue.length;e++)this._queue[e].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var e=Math.round(this._map._zoom);this._processQueue(),this._zoom<e&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,e)):this._zoom>e?(this._animationStart(),this._animationZoomOut(this._zoom,e)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(e){var t=this._maxLat;return t!==n&&(e.getNorth()>=t&&(e._northEast.lat=1/0),e.getSouth()<=-t&&(e._southWest.lat=-(1/0))),e},_animationAddLayerNonAnimated:function(e,t){if(t===e)this._featureGroup.addLayer(e);else if(2===t._childCount){t._addToMap();var n=t.getAllChildMarkers();this._featureGroup.removeLayer(n[0]),this._featureGroup.removeLayer(n[1])}else t._updateIcon()},_extractNonGroupLayers:function(e,t){var n,i=e.getLayers(),a=0;for(t=t||[];a<i.length;a++)n=i[a],n instanceof L.LayerGroup?this._extractNonGroupLayers(n,t):t.push(n);return t},_overrideMarkerIcon:function(e){var t=e.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[e]}});return t}}),L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-(1/0),-(1/0)),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(e,t){this._animationAddLayerNonAnimated(e,t)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(e,t){var n,i=this._getExpandedVisibleBounds(),a=this._featureGroup;this._ignoreMove=!0,this._topClusterLevel._recursively(i,e,0,function(o){var r,s=o._latlng,l=o._markers;for(i.contains(s)||(s=null),o._isSingleParent()&&e+1===t?(a.removeLayer(o),o._recursivelyAddChildrenToMap(null,t,i)):(o.clusterHide(),o._recursivelyAddChildrenToMap(s,t,i)),n=l.length-1;n>=0;n--)r=l[n],i.contains(r._latlng)||a.removeLayer(r)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(i,t),a.eachLayer(function(e){e instanceof L.MarkerCluster||!e._icon||e.clusterShow()}),this._topClusterLevel._recursively(i,e,t,function(e){e._recursivelyRestoreChildPositions(t)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(i,e,0,function(e){a.removeLayer(e),e.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(e,t){this._animationZoomOutSingle(this._topClusterLevel,e-1,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,e,this._getExpandedVisibleBounds())},_animationAddLayer:function(e,t){var n=this,i=this._featureGroup;i.addLayer(e),t!==e&&(t._childCount>2?(t._updateIcon(),this._forceLayout(),this._animationStart(),e._setPos(this._map.latLngToLayerPoint(t.getLatLng())),e.clusterHide(),this._enqueue(function(){i.removeLayer(e),e.clusterShow(),n._animationEnd()})):(this._forceLayout(),n._animationStart(),n._animationZoomOutSingle(t,this._map.getMaxZoom(),this._map.getZoom())))}},_animationZoomOutSingle:function(e,t,n){var i=this._getExpandedVisibleBounds();e._recursivelyAnimateChildrenInAndAddSelfToMap(i,t+1,n);var a=this;this._forceLayout(),e._recursivelyBecomeVisible(i,n),this._enqueue(function(){if(1===e._childCount){var o=e._markers[0];this._ignoreMove=!0,o.setLatLng(o.getLatLng()),this._ignoreMove=!1,o.clusterShow&&o.clusterShow()}else e._recursively(i,n,0,function(e){e._recursivelyRemoveChildrenFromMap(i,t+1)});a._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(t.body.offsetWidth)}}),L.markerClusterGroup=function(e){return new L.MarkerClusterGroup(e)},L.MarkerCluster=L.Marker.extend({initialize:function(e,t,n,i){L.Marker.prototype.initialize.call(this,n?n._cLatLng||n.getLatLng():new L.LatLng(0,0),{icon:this}),this._group=e,this._zoom=t,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,n&&this._addChild(n),i&&this._addChild(i)},getAllChildMarkers:function(e){e=e||[];for(var t=this._childClusters.length-1;t>=0;t--)this._childClusters[t].getAllChildMarkers(e);for(var n=this._markers.length-1;n>=0;n--)e.push(this._markers[n]);return e},getChildCount:function(){return this._childCount},zoomToBounds:function(){for(var e,t=this._childClusters.slice(),n=this._group._map,i=n.getBoundsZoom(this._bounds),a=this._zoom+1,o=n.getZoom();t.length>0&&i>a;){a++;var r=[];for(e=0;e<t.length;e++)r=r.concat(t[e]._childClusters);t=r}i>a?this._group._map.setView(this._latlng,a):i<=o?this._group._map.setView(this._latlng,o+1):this._group._map.fitBounds(this._bounds)},getBounds:function(){var e=new L.LatLngBounds;return e.extend(this._bounds),e},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(e,t){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(e),e instanceof L.MarkerCluster?(t||(this._childClusters.push(e),e.__parent=this),this._childCount+=e._childCount):(t||this._markers.push(e),this._childCount++),this.__parent&&this.__parent._addChild(e,!0)},_setClusterCenter:function(e){this._cLatLng||(this._cLatLng=e._cLatLng||e._latlng)},_resetBounds:function(){var e=this._bounds;e._southWest&&(e._southWest.lat=1/0,e._southWest.lng=1/0),e._northEast&&(e._northEast.lat=-(1/0),e._northEast.lng=-(1/0))},_recalculateBounds:function(){var e,t,n,i,a=this._markers,o=this._childClusters,r=0,s=0,l=this._childCount;if(0!==l){for(this._resetBounds(),e=0;e<a.length;e++)n=a[e]._latlng,this._bounds.extend(n),r+=n.lat,s+=n.lng;for(e=0;e<o.length;e++)t=o[e],t._boundsNeedUpdate&&t._recalculateBounds(),this._bounds.extend(t._bounds),n=t._wLatLng,i=t._childCount,r+=n.lat*i,s+=n.lng*i;this._latlng=this._wLatLng=new L.LatLng(r/l,s/l),this._boundsNeedUpdate=!1}},_addToMap:function(e){e&&(this._backupLatlng=this._latlng,this.setLatLng(e)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(e,t,n){this._recursively(e,0,n-1,function(e){var n,i,a=e._markers;for(n=a.length-1;n>=0;n--)i=a[n],i._icon&&(i._setPos(t),i.clusterHide())},function(e){var n,i,a=e._childClusters;for(n=a.length-1;n>=0;n--)i=a[n],i._icon&&(i._setPos(t),i.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(e,t,n){this._recursively(e,n,0,function(i){i._recursivelyAnimateChildrenIn(e,i._group._map.latLngToLayerPoint(i.getLatLng()).round(),t),i._isSingleParent()&&t-1===n?(i.clusterShow(),i._recursivelyRemoveChildrenFromMap(e,t)):i.clusterHide(),i._addToMap()})},_recursivelyBecomeVisible:function(e,t){this._recursively(e,0,t,null,function(e){e.clusterShow()})},_recursivelyAddChildrenToMap:function(e,t,n){this._recursively(n,-1,t,function(i){if(t!==i._zoom)for(var a=i._markers.length-1;a>=0;a--){var o=i._markers[a];n.contains(o._latlng)&&(e&&(o._backupLatlng=o.getLatLng(),o.setLatLng(e),o.clusterHide&&o.clusterHide()),i._group._featureGroup.addLayer(o))}},function(t){t._addToMap(e)})},_recursivelyRestoreChildPositions:function(e){for(var t=this._markers.length-1;t>=0;t--){var n=this._markers[t];n._backupLatlng&&(n.setLatLng(n._backupLatlng),delete n._backupLatlng)}if(e-1===this._zoom)for(var i=this._childClusters.length-1;i>=0;i--)this._childClusters[i]._restorePosition();else for(var a=this._childClusters.length-1;a>=0;a--)this._childClusters[a]._recursivelyRestoreChildPositions(e)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(e,t,n){var i,a;this._recursively(e,-1,t-1,function(e){for(a=e._markers.length-1;a>=0;a--)i=e._markers[a],n&&n.contains(i._latlng)||(e._group._featureGroup.removeLayer(i),i.clusterShow&&i.clusterShow())},function(e){for(a=e._childClusters.length-1;a>=0;a--)i=e._childClusters[a],n&&n.contains(i._latlng)||(e._group._featureGroup.removeLayer(i),i.clusterShow&&i.clusterShow())})},_recursively:function(e,t,n,i,a){var o,r,s=this._childClusters,l=this._zoom;if(t>l)for(o=s.length-1;o>=0;o--)r=s[o],e.intersects(r._bounds)&&r._recursively(e,t,n,i,a);else if(i&&i(this),a&&this._zoom===n&&a(this),n>l)for(o=s.length-1;o>=0;o--)r=s[o],e.intersects(r._bounds)&&r._recursively(e,t,n,i,a)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}}),L.Marker.include({clusterHide:function(){return this.options.opacityWhenUnclustered=this.options.opacity||1,this.setOpacity(0)},clusterShow:function(){var e=this.setOpacity(this.options.opacity||this.options.opacityWhenUnclustered);return delete this.options.opacityWhenUnclustered,e}}),L.DistanceGrid=function(e){this._cellSize=e,this._sqCellSize=e*e,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(e,t){var n=this._getCoord(t.x),i=this._getCoord(t.y),a=this._grid,o=a[i]=a[i]||{},r=o[n]=o[n]||[],s=L.Util.stamp(e);this._objectPoint[s]=t,r.push(e)},updateObject:function(e,t){this.removeObject(e),this.addObject(e,t)},removeObject:function(e,t){var n,i,a=this._getCoord(t.x),o=this._getCoord(t.y),r=this._grid,s=r[o]=r[o]||{},l=s[a]=s[a]||[];for(delete this._objectPoint[L.Util.stamp(e)],n=0,i=l.length;n<i;n++)if(l[n]===e)return l.splice(n,1),1===i&&delete s[a],!0},eachObject:function(e,t){var n,i,a,o,r,s,l,u=this._grid;for(n in u){r=u[n];for(i in r)for(s=r[i],a=0,o=s.length;a<o;a++)l=e.call(t,s[a]),l&&(a--,o--)}},getNearObject:function(e){var t,n,i,a,o,r,s,l,u=this._getCoord(e.x),c=this._getCoord(e.y),d=this._objectPoint,f=this._sqCellSize,p=null;for(t=c-1;t<=c+1;t++)if(a=this._grid[t])for(n=u-1;n<=u+1;n++)if(o=a[n])for(i=0,r=o.length;i<r;i++)s=o[i],l=this._sqDist(d[L.Util.stamp(s)],e),l<f&&(f=l,p=s);return p},_getCoord:function(e){return Math.floor(e/this._cellSize)},_sqDist:function(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i}},function(){L.QuickHull={getDistant:function(e,t){var n=t[1].lat-t[0].lat,i=t[0].lng-t[1].lng;return i*(e.lat-t[0].lat)+n*(e.lng-t[0].lng)},findMostDistantPointFromBaseLine:function(e,t){var n,i,a,o=0,r=null,s=[];for(n=t.length-1;n>=0;n--)i=t[n],a=this.getDistant(i,e),a>0&&(s.push(i),a>o&&(o=a,r=i));return{maxPoint:r,newPoints:s}},buildConvexHull:function(e,t){var n=[],i=this.findMostDistantPointFromBaseLine(e,t);return i.maxPoint?(n=n.concat(this.buildConvexHull([e[0],i.maxPoint],i.newPoints)),n=n.concat(this.buildConvexHull([i.maxPoint,e[1]],i.newPoints))):[e[0]]},getConvexHull:function(e){var t,n=!1,i=!1,a=!1,o=!1,r=null,s=null,l=null,u=null,c=null,d=null;for(t=e.length-1;t>=0;t--){var f=e[t];(n===!1||f.lat>n)&&(r=f,n=f.lat),(i===!1||f.lat<i)&&(s=f,i=f.lat),(a===!1||f.lng>a)&&(l=f,a=f.lng),(o===!1||f.lng<o)&&(u=f,o=f.lng)}i!==n?(d=s,c=r):(d=u,c=l);var p=[].concat(this.buildConvexHull([d,c],e),this.buildConvexHull([c,d],e));return p}}}(),L.MarkerCluster.include({getConvexHull:function(){var e,t,n=this.getAllChildMarkers(),i=[];for(t=n.length-1;t>=0;t--)e=n[t].getLatLng(),i.push(e);return L.QuickHull.getConvexHull(i)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:Math.PI/6,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var e,t=this.getAllChildMarkers(),n=this._group,i=n._map,a=i.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,t.length>=this._circleSpiralSwitchover?e=this._generatePointsSpiral(t.length,a):(a.y+=10,e=this._generatePointsCircle(t.length,a)),this._animationSpiderfy(t,e)}},unspiderfy:function(e){this._group._inZoomAnimation||(this._animationUnspiderfy(e),this._group._spiderfied=null)},_generatePointsCircle:function(e,t){var n,i,a=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+e),o=a/this._2PI,r=this._2PI/e,s=[];for(s.length=e,n=e-1;n>=0;n--)i=this._circleStartAngle+n*r,s[n]=new L.Point(t.x+o*Math.cos(i),t.y+o*Math.sin(i))._round();return s},_generatePointsSpiral:function(e,t){var n,i=this._group.options.spiderfyDistanceMultiplier,a=i*this._spiralLengthStart,o=i*this._spiralFootSeparation,r=i*this._spiralLengthFactor*this._2PI,s=0,l=[];for(l.length=e,n=e-1;n>=0;n--)s+=o/a+5e-4*n,l[n]=new L.Point(t.x+a*Math.cos(s),t.y+a*Math.sin(s))._round(),a+=r/s;return l},_noanimationUnspiderfy:function(){var e,t,n=this._group,i=n._map,a=n._featureGroup,o=this.getAllChildMarkers();for(n._ignoreMove=!0,this.setOpacity(1),t=o.length-1;t>=0;t--)e=o[t],a.removeLayer(e),e._preSpiderfyLatlng&&(e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng),e.setZIndexOffset&&e.setZIndexOffset(0),e._spiderLeg&&(i.removeLayer(e._spiderLeg),delete e._spiderLeg);n.fire("unspiderfied",{cluster:this,markers:o}),n._ignoreMove=!1,n._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(e,t){var n,i,a,o,r=this._group,s=r._map,l=r._featureGroup,u=this._group.options.spiderLegPolylineOptions;for(r._ignoreMove=!0,n=0;n<e.length;n++)o=s.layerPointToLatLng(t[n]),i=e[n],a=new L.Polyline([this._latlng,o],u),s.addLayer(a),i._spiderLeg=a,i._preSpiderfyLatlng=i._latlng,i.setLatLng(o),i.setZIndexOffset&&i.setZIndexOffset(1e6),l.addLayer(i);this.setOpacity(.3),r._ignoreMove=!1,r.fire("spiderfied",{cluster:this,markers:e})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(e,t){var i,a,o,r,s,l,u=this,c=this._group,d=c._map,f=c._featureGroup,p=this._latlng,h=d.latLngToLayerPoint(p),g=L.Path.SVG,m=L.extend({},this._group.options.spiderLegPolylineOptions),_=m.opacity;for(_===n&&(_=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),g?(m.opacity=0,m.className=(m.className||"")+" leaflet-cluster-spider-leg"):m.opacity=_,c._ignoreMove=!0,i=0;i<e.length;i++)a=e[i],l=d.layerPointToLatLng(t[i]),o=new L.Polyline([p,l],m),d.addLayer(o),a._spiderLeg=o,g&&(r=o._path,s=r.getTotalLength()+.1,r.style.strokeDasharray=s,r.style.strokeDashoffset=s),a.setZIndexOffset&&a.setZIndexOffset(1e6),a.clusterHide&&a.clusterHide(),f.addLayer(a),a._setPos&&a._setPos(h);for(c._forceLayout(),c._animationStart(),i=e.length-1;i>=0;i--)l=d.layerPointToLatLng(t[i]),a=e[i],a._preSpiderfyLatlng=a._latlng,a.setLatLng(l),a.clusterShow&&a.clusterShow(),g&&(o=a._spiderLeg,r=o._path,r.style.strokeDashoffset=0,o.setStyle({opacity:_}));this.setOpacity(.3),c._ignoreMove=!1,setTimeout(function(){c._animationEnd(),c.fire("spiderfied",{cluster:u,markers:e})},200)},_animationUnspiderfy:function(e){var t,n,i,a,o,r,s=this,l=this._group,u=l._map,c=l._featureGroup,d=e?u._latLngToNewLayerPoint(this._latlng,e.zoom,e.center):u.latLngToLayerPoint(this._latlng),f=this.getAllChildMarkers(),p=L.Path.SVG;for(l._ignoreMove=!0,l._animationStart(),this.setOpacity(1),n=f.length-1;n>=0;n--)t=f[n],t._preSpiderfyLatlng&&(t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng,r=!0,t._setPos&&(t._setPos(d),r=!1),t.clusterHide&&(t.clusterHide(),r=!1),r&&c.removeLayer(t),p&&(i=t._spiderLeg,a=i._path,o=a.getTotalLength()+.1,a.style.strokeDashoffset=o,i.setStyle({opacity:0})));l._ignoreMove=!1,setTimeout(function(){var e=0;for(n=f.length-1;n>=0;n--)t=f[n],t._spiderLeg&&e++;for(n=f.length-1;n>=0;n--)t=f[n],t._spiderLeg&&(t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),e>1&&c.removeLayer(t),u.removeLayer(t._spiderLeg),delete t._spiderLeg);l._animationEnd(),l.fire("unspiderfied",{cluster:s,markers:f})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(e){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(e))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(e){this._spiderfied&&this._spiderfied.unspiderfy(e)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(e){e._spiderLeg&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),this._map.removeLayer(e._spiderLeg),delete e._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(e){return e?e instanceof L.MarkerClusterGroup?e=e._topClusterLevel.getAllChildMarkers():e instanceof L.LayerGroup?e=e._layers:e instanceof L.MarkerCluster?e=e.getAllChildMarkers():e instanceof L.Marker&&(e=[e]):e=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(e),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(e),this},_flagParentsIconsNeedUpdate:function(e){var t,n;for(t in e)for(n=e[t].__parent;n;)n._iconNeedsUpdate=!0,n=n.__parent},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(e){e instanceof L.MarkerCluster&&e._iconNeedsUpdate&&e._updateIcon()})},_refreshSingleMarkerModeMarkers:function(e){var t,n;for(t in e)n=e[t],this.hasLayer(n)&&n.setIcon(this._overrideMarkerIcon(n))}}),L.Marker.include({refreshIconOptions:function(e,t){var n=this.options.icon;return L.setOptions(n,e),this.setIcon(n),t&&this.__parent&&this.__parent._group.refreshClusters(this),this}})}(window,document)},function(e,t){"use strict";L.NonTiledLayer=L.Layer.extend({includes:L.Evented,options:{attribution:"",opacity:1,zIndex:void 0,minZoom:0,maxZoom:18,pointerEvents:null,errorImageUrl:"data:image/gif;base64,R0lGODlhAQABAHAAACH5BAUAAAAALAAAAAABAAEAAAICRAEAOw==",
bounds:L.latLngBounds([-85.05,-180],[85.05,180])},url:"",initialize:function(e){L.setOptions(this,e)},onAdd:function(e){this._map=e,this._div||(this._div=L.DomUtil.create("div","leaflet-image-layer"),this.options.pointerEvents&&(this._div.style["pointer-events"]=this.options.pointerEvents),void 0!==this.options.zIndex&&(this._div.style.zIndex=this.options.zIndex),void 0!==this.options.opacity&&(this._div.style.opacity=this.options.opacity)),this.getPane().appendChild(this._div),this._bufferImage=this._initImage(),this._currentImage=this._initImage(),this._update()},onRemove:function(e){this.getPane().removeChild(this._div),this._div.removeChild(this._bufferImage),this._div.removeChild(this._currentImage)},addTo:function(e){return e.addLayer(this),this},getEvents:function(){var e={moveend:this._update,zoom:this._viewreset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},getElement:function(){return this._div},setOpacity:function(e){return this.options.opacity=e,this._div&&L.DomUtil.setOpacity(this._div,this.options.opacity),this},setZIndex:function(e){return e&&(this.options.zIndex=e,this._div&&(this._div.style.zIndex=e)),this},bringToFront:function(){return this._div&&this._pane.appendChild(this._div),this},bringToBack:function(){return this._div&&this._pane.insertBefore(this._div,this._pane.firstChild),this},getAttribution:function(){return this.options.attribution},_initImage:function(e){var e=L.DomUtil.create("img","leaflet-image-layer");return this._div.appendChild(e),this._map.options.zoomAnimation&&L.Browser.any3d?L.DomUtil.addClass(e,"leaflet-zoom-animated"):L.DomUtil.addClass(e,"leaflet-zoom-hide"),L.extend(e,{galleryimg:"no",onselectstart:L.Util.falseFn,onmousemove:L.Util.falseFn,onload:L.bind(this._onImageLoad,this),onerror:L.bind(this._onImageError,this)}),e},redraw:function(){return this._map&&this._update(),this},_animateZoom:function(e){this._currentImage._bounds&&this._animateImage(this._currentImage,e),this._bufferImage._bounds&&this._animateImage(this._bufferImage,e)},_animateImage:function(e,t){var n=this._map.getZoomScale(t.zoom),i=this._map._latLngToNewLayerPoint(e._bounds.getNorthWest(),t.zoom,t.center);L.DomUtil.setTransform(e,i,n)},_resetImage:function(e){var t=new L.Bounds(this._map.latLngToLayerPoint(e._bounds.getNorthWest()),this._map.latLngToLayerPoint(e._bounds.getSouthEast())),n=t.getSize();L.DomUtil.setPosition(e,t.min),e.style.width=n.x+"px",e.style.height=n.y+"px"},_getClippedBounds:function(){var e=this._map.getBounds(),t=e.getSouth(),n=e.getNorth(),i=e.getWest(),a=e.getEast(),o=this.options.bounds.getSouth(),r=this.options.bounds.getNorth(),s=this.options.bounds.getWest(),l=this.options.bounds.getEast();t<o&&(t=o),n>r&&(n=r),i<s&&(i=s),a>l&&(a=l);var u=new L.LatLng(n,i),c=new L.LatLng(t,a);return new L.LatLngBounds(u,c)},_viewreset:function(){this._bufferImage._bounds&&this._resetImage(this._bufferImage),this._currentImage._bounds&&this._resetImage(this._currentImage)},_update:function(){if(this._map.getZoom()<this.options.minZoom||this._map.getZoom()>this.options.maxZoom)return void(this._div.style.visibility="hidden");this._div.style.visibility="visible",this._bufferImage._bounds&&this._resetImage(this._bufferImage);var e=this._getClippedBounds(),t=this._map.latLngToContainerPoint(e.getNorthWest()),n=this._map.latLngToContainerPoint(e.getSouthEast()),i=n.x-t.x,a=n.y-t.y;if(!(i<32||a<32)){this._currentImage._bounds=e,this._resetImage(this._currentImage);var o=this._currentImage;this.getImageUrl?o.src=this.getImageUrl(e.getNorthWest(),e.getSouthEast(),i,a):this.getImageUrlAsync(e.getNorthWest(),e.getSouthEast(),i,a,function(e,t){o.src=e,o.tag=t}),this.url=o.src,L.DomUtil.setOpacity(this._currentImage,0)}},_onImageError:function(e){this.fire("error",e),L.DomUtil.addClass(e.target,"invalid"),e.target.src!==this.options.errorImageUrl&&(e.target.src=this.options.errorImageUrl,this._onImageDone(!1,e))},_onImageLoad:function(e){if(e.target.src!==this.options.errorImageUrl){if(L.DomUtil.removeClass(e.target,"invalid"),e.target.src!==this.url)return;this._onImageDone(!0,e)}},_onImageDone:function(e,t){L.DomUtil.setOpacity(this._currentImage,1),L.DomUtil.setOpacity(this._bufferImage,0),this._addInteraction&&this._addInteraction(this._currentImage.tag);var n=this._bufferImage;this._bufferImage=this._currentImage,this._currentImage=n,this.fire("load",t)}}),L.nonTiledLayer=function(){return new L.NonTiledLayer},L.NonTiledLayer.WMS=L.NonTiledLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},options:{crs:null,uppercase:!1},initialize:function(e,t){this._wmsUrl=e;var n=L.extend({},this.defaultWmsParams);for(var i in t)L.NonTiledLayer.prototype.options.hasOwnProperty(i)||L.Layer.prototype.options.hasOwnProperty(i)||(n[i]=t[i]);this.wmsParams=n,L.setOptions(this,t)},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,L.NonTiledLayer.prototype.onAdd.call(this,e)},getImageUrl:function(e,t,n,i){var a=this.wmsParams;a.width=n,a.height=i;var o=this._crs.project(e),r=this._crs.project(t),s=this._wmsUrl,l=l=(this._wmsVersion>=1.3&&this._crs===L.CRS.EPSG4326?[r.y,o.x,o.y,r.x]:[o.x,r.y,r.x,o.y]).join(",");return s+L.Util.getParamString(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+l},setParams:function(e,t){return L.extend(this.wmsParams,e),t||this.redraw(),this}}),L.nonTiledLayer.wms=function(e,t){return new L.NonTiledLayer.WMS(e,t)}},function(e,t){"use strict";Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t=Object(this),n=t.length>>>0,i=arguments[1],a=0;a!==n;a++)if(e.call(i,this[a],a,t))return this[a]}})},function(e,t){"use strict";Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],a=0;a<n;){var o=t[a];if(e.call(i,o,a,t))return a;a++}return-1}})},function(e,t){"use strict";String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(t||0,e.length)===e})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return o.default.get("/geoservices/REST/atlante_geochimico/livelli/").then(function(e){return e.data.data.livelli})};var a=n(7),o=i(a)},,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(){var e=l.default.RL_ENTI_SERVICE;return r.default.get(e).then(function(e){return e.data.data})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(7),r=i(o),s=n(6),l=i(s)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t={};return r.default.get(e,{params:t}).then(function(e){return e.data.features})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(7),r=i(o)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=(new c).xml_str2json(e),n=[];return(0,s.default)(t.msGMLOutput).forEach(function(e,i){e.indexOf("_layer")>=0&&!function(){var i=e.replace("_layer",""),a=t.msGMLOutput[e];(0,s.default)(a).forEach(function(e,t){var o=a[e];if(Array.isArray(o))o.forEach(function(e){var a=e;n.push({type:"Feature",id:i+"."+t,geometry:null,properties:a})});else{var r=o,s=r;n.push({type:"Feature",id:i+"."+t,geometry:null,properties:s})}})}()}),n}function o(e){var t={};return u.default.get(e,{params:t}).then(function(e){var t=e.data,n=a(t);return n})}Object.defineProperty(t,"__esModule",{value:!0});var r=n(65),s=i(r);t.default=o;var l=n(7),u=i(l),c=n(149)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return r.default.post(l.default.RL_XSL_INFO_SERVICE,{headers:{Accept:"text/xml"},data:{xslUrl:e,ambiente:null,idLayer:t.layerName.replace("L",""),featureAttributes:t.properties}}).then(function(e){return e.data}).then(function(e){return(0,c.default)(e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(7),r=i(o),s=n(6),l=i(s),u=n(106),c=i(u)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={app_id:"uHFYCdocrLoinMf8j6RK",app_code:"XKQe3be7-30iGWPuh3dbtQ",mapview:"7.43,43.75;10.00,44.70",searchtext:e};return o.default.get(s.default.HERE_GEOCODE_PROXY,{params:t}).then(function(e){return e.data.Response.View[0].Result.map(function(e){return{relevance:e.Relevance,match_level:e.MatchLevel,match_type:e.MatchType,formatted_address:e.Location.Address.Label,place_id:e.Location.LocationId,geometry:{location:{lat:e.Location.DisplayPosition.Latitude,lng:e.Location.DisplayPosition.Longitude}}}})})};var a=n(7),o=i(a),r=n(6),s=i(r)},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(!e||"null"===e)throw new Error("Parametro idLayer mancante");var i={};return t&&(i.geoserverUrl=t),n&&(i.flagGeoserver=n),o.default.get(""+s.default.RL_LAYER_CONFIG_SERVICE+e,{params:i}).then(function(e){return e.data.data})};var a=n(7),o=i(a),r=n(6),s=i(r)},,,,,,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[],n=e.fields;e.values.split(",").forEach(function(e){t.push(n+"='"+e+"'")});var i=encodeURIComponent(t.join(" OR "));return i}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,o.default)("FIND_MAP"),t=(0,o.default)("FIND_LAYERS")?(0,o.default)("FIND_LAYERS").split(","):null,n=(0,o.default)("FIND_FIELDS"),i=(0,o.default)("FIND_VALUES"),a=(0,o.default)("FIND_CQL_FILTER");return{map:e,layers:t,fields:n,values:i,cqlFilter:a}};var a=n(151),o=i(a)},,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.elType||"div",n=e.containerId||"gv-container",i=e.elId,a=e.clear;a&&document.getElementById(i)&&document.getElementById(i).remove();var o=document.createElement(t);return o.id=i,document.getElementById(n)?document.getElementById(n).appendChild(o):(console.log("Elemento "+n+" non trovato faccio mount su body"),document.body.appendChild(o)),o}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=null;window.document.body.setAttribute("ondrop","GV.dragbox.drop(event)"),t.default={start:function(e){n=[e.screenX,e.screenY],e.dataTransfer.setData("text/plain",e.target.id)},end:function(e,t){var i=document.getElementById(t),a=window.getComputedStyle(i,null),o=[e.screenX,e.screenY];i.style.top=Number(a.top.replace("px",""))+(o[1]-n[1])+"px",i.style.left=Number(a.left.replace("px",""))+(o[0]-n[0])+"px"},drop:function(e){"text"===e.target.type&&e.preventDefault()}}},function(e,t){"use strict";function n(){return window.location.href.split(":")[0]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(e){var t=12;return(e<=2e3||null==e)&&(t=17),e>2e3&&e<=6250&&(t=16),e>6250&&e<=12500&&(t=15),e>12500&&e<=25e3&&(t=14),e>25e3&&e<=5e4&&(t=13),t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=r.default.BASE_SCALES.findIndex(function(t){return e>t});return t-1}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(6),r=i(o)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=/\{ *([\w_\-]+) *\}/g;return e.replace(n,function(e,n){var i=t[n];if(void 0===i)throw new Error("No value provided for variable "+e);return"function"==typeof i&&(i=i(t)),i})}},function(e,t){"use strict";function n(){return navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.indexOf("Trident")>0||navigator.userAgent.indexOf("Edge")>0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(){return window.matchMedia("(pointer: coarse)").matches}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(e){GV.config.debug&&console.log(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},function(e,t){},,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,,,function(e,t){},,,function(e,t){},function(e,t){},function(e,t){},,function(e,t){},,function(e,t){},function(e,t){},,,,,,,function(e,t){},,,function(e,t,n){var i=n(333);"string"==typeof i&&(i=[[e.id,i,""]]);n(89)(i,{});i.locals&&(e.exports=i.locals)},,function(e,t,n){var i=n(335);"string"==typeof i&&(i=[[e.id,i,""]]);n(89)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(364);"string"==typeof i&&(i=[[e.id,i,""]]);n(89)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(371);"string"==typeof i&&(i=[[e.id,i,""]]);n(89)(i,{});i.locals&&(e.exports=i.locals)},,,,,function(e,t,n){var i,a;n(348),i=n(190);var o=n(415);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(354),i=n(191);var o=n(420);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-74778fa6",e.exports=i},function(e,t,n){var i,a;n(344),i=n(192);var o=n(411);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-39472a4f",e.exports=i},,,function(e,t,n){var i,a;n(363),i=n(195);var o=n(428);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-eb2c59d4",e.exports=i},function(e,t,n){var i,a;n(345),i=n(196);var o=n(412);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-3f78502f",e.exports=i},,,,function(e,t,n){var i,a;n(358),i=n(200);var o=n(423);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-a5a38922",e.exports=i},,,function(e,t,n){var i,a;n(357),i=n(203);var o=n(422);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(346),i=n(204);var o=n(413);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-4020fcaa",e.exports=i},function(e,t,n){var i,a;n(339),i=n(208);var o=n(407);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-17ec4bab",e.exports=i},function(e,t,n){var i,a;n(361),i=n(209);var o=n(426);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(347),i=n(211);var o=n(414);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(359),i=n(212);var o=n(424);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(340),i=n(213);var o=n(408);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(337),i=n(214);var o=n(405);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{title:"Ricerca sui Livelli"},on:{click:e.onClick}})},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"scalebar",attrs:{id:"gv-scalebar"}},[e._c("el-select",{attrs:{size:"mini",placeholder:""},on:{change:e.onChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(t){return e._c("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{title:"Info sui livelli della mappa"},on:{click:e.onClick}})},staticRenderFns:[]}},,,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("el-select",{attrs:{size:"mini",placeholder:"Sfondo"},on:{change:e.onChange},model:{value:e.activeBaseLayer,callback:function(t){e.activeBaseLayer=t},expression:"activeBaseLayer"}},e._l(e.baseLayers,function(t){return e._c("el-option",{key:t.name,attrs:{label:t.label,value:t.name}},[e._c("span",{staticStyle:{float:"left"}},[e._c("img",{staticClass:"gv-sfondi-icon",attrs:{src:t.icon}}),e._v(" "),e._c("span",{staticClass:"gv-sfondi-label"},[e._v(e._s(t.label))])])])}))},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{style:e.style,attrs:{id:"gv-header"}},[e._t("default")],2)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{style:e.style,attrs:{id:"gv-map"}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-button-add-map",title:"Aggiungi Mappe"},on:{click:e.onClick}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{attrs:{id:"gv-container"}},[e.showHeader?e._c("gv-header"):e._e(),e._v(" "),e.leafletMap?e._c("gv-map",{ref:"gv-map"}):e._e(),e._v(" "),e.showLegend?e._c("gv-legend",{ref:"gv-legend"}):e._e(),e._v(" "),e._m(0)],1)},staticRenderFns:[function(){var e=this;e.$createElement;return e._c("div",{staticClass:"gv-tool-container"},[e._c("div",{staticClass:"gv-tool-top gv-tool-left",attrs:{id:"gv-tool-topleft"}}),e._v(" "),e._c("div",{staticClass:"gv-tool-top gv-tool-right",attrs:{id:"gv-tool-topright"}}),e._v(" "),e._c("div",{staticClass:"gv-tool-bottom gv-tool-left",attrs:{id:"gv-tool-bottomleft"}}),e._v(" "),e._c("div",{staticClass:"gv-tool-bottom gv-tool-right",attrs:{id:"gv-tool-bottomright"}})])}]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"gv-panel-title gv-color-scheme"},[e._c("span",{staticClass:"gv-color-scheme",attrs:{title:e.fullTitle}},[e._v("\n        "+e._s(e.title)+"\n    ")]),e._v(" "),e.noClose?e._e():e._c("el-button",{staticClass:"gv-close gv-color-scheme",attrs:{icon:"el-icon-close",type:"button",title:"Chiudi Panello"},on:{click:e.closePanel}}),e._v(" "),e.collapsible?e._c("button",{class:e.toggleCollapseClass(),attrs:{size:"mini",title:"Minimizza Panello"},on:{click:e.collapse}}):e._e()],1)},staticRenderFns:[]}},,,,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"atlante-geochimico gv-color-scheme"},[e._c("el-select",{attrs:{placeholder:"Seleziona Livello",size:"mini",filterable:""},on:{change:e.onChange},model:{value:e.livello,callback:function(t){e.livello=t},expression:"livello"}},e._l(e.livelli,function(t){return e._c("el-option",{key:t.codice,attrs:{value:t.codice,label:t.nome}})}))],1)},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"gv-inverted-color-scheme",attrs:{id:"gv-legend"}},[e._c("div",{staticClass:"gv-legend-title gv-color-scheme"},[e._c("b",[e._v("LEGENDA")]),e._v(" "),e._c("button",{class:e.toggleCollapseClass(),attrs:{size:"mini",title:"Minimizza Panello"},on:{click:e.hideLegend}}),e._v(" "),e._c("el-button",{directives:[{name:"show",rawName:"v-show",value:e.options.showAddMap,expression:"options.showAddMap"}],staticClass:"gv-color-scheme gv-legend-buttons ms ms-layers-add",attrs:{id:"gv-legend-add-map",title:"Aggiungi Mappe",size:"mini"},on:{click:e.addMap}})],1),e._v(" "),e._c("div",{staticClass:"gv-legend-wrapper",attrs:{id:"gv-legend-wrapper"}},[e._c("div",{attrs:{id:"gv-legend-body"}},e._l(e.maps,function(t){return e._c("ul",{key:t.id,staticClass:"gv-list-group"},[e._c("div",{staticClass:"gv-list-legend-map-item gv-inverted-color-scheme"},[e._c("li",[e._v("\n                        "+e._s(t.name)+"\n                    ")]),e._v(" "),e._c("div",{staticClass:"gv-legend-map-tools gv-inverted-color-scheme"},[e._c("el-button",{class:e.getToggleLayersClass(t),attrs:{title:"Nascondi/Mostra Livelli in Legenda",size:"mini"},on:{click:function(n){e.toggleLayers(t)}}}),e._v(" "),e.checkAddMap(t)?e._c("el-button",{staticClass:"gv-inverted-color-scheme gv-legend-map-tools-button",attrs:{id:"gv-legend-scheda-"+t.id,title:"Visualizza Scheda",icon:"el-icon-document",size:"mini"},on:{click:function(n){e.showMapInfoPanel(t)}}}):e._e(),e._v(" "),e.options.noDeleteButton?e._e():e._c("el-button",{staticClass:"gv-inverted-color-scheme gv-legend-map-tools-button",attrs:{id:"gv-legend-delete-"+t.id,title:"Elimina Mappa",icon:"el-icon-delete",size:"mini"},on:{click:function(n){e.remove(t)}}}),e._v(" "),e.options.showLayersTransparency?e._c("el-button",{staticClass:"gv-inverted-color-scheme gv-legend-map-tools-button fa fa-sliders",attrs:{title:"Trasparenza Livelli",size:"mini"},on:{click:function(n){e.layerTransparency(t)}}}):e._e(),e._v(" "),e.isDownloadable(t)?e._c("el-button",{staticClass:"gv-inverted-color-scheme gv-legend-map-tools-button",attrs:{id:"gv-legend-download-"+t.id,title:"Download Mappa",icon:"el-icon-download",size:"mini"},on:{click:function(n){e.download(t)}}}):e._e()],1)]),e._v(" "),e._c("ul",{directives:[{name:"show",rawName:"v-show",value:e.showMapLayers(t),expression:"showMapLayers(map)"}],staticClass:"gv-list-group"},e._l(t.layers,function(t){return e._c("li",{key:t.id,class:e.getClass(t),attrs:{id:"gv-legend-layer-"+t.id,layer:t}},[e._c("img",{staticClass:"gv-legend-layer-icon",attrs:{src:e.iconUrl(t)},on:{click:function(n){e.showLegendPanel(t)}}}),e._v(" "),e._c("span",{staticClass:"gv-layer-visibility-span"},[e._c("input",{directives:[{name:"model",rawName:"v-model",value:t.visible,expression:"layer.visible"}],staticClass:"gv-layer-visibility-cb",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.visible)?e._i(t.visible,null)>-1:t.visible},on:{click:function(n){e.setLayerVisible(t,n)},change:function(n){var i=t.visible,a=n.target,o=!!a.checked;if(Array.isArray(i)){var r=null,s=e._i(i,r);a.checked?s<0&&(t.visible=i.concat([r])):s>-1&&(t.visible=i.slice(0,s).concat(i.slice(s+1)))}else e.$set(t,"visible",o)}}})]),e._v(" "),e._c("span",{staticClass:"gv-layer-title-span"},[e._v(e._s(t.legend.label))])])}))])})),e._v(" "),e._c("div",{staticClass:"gv-legend-footer gv-inverted-color-scheme"},[e.options.showBaseLayerSwitcher?e._c("gv-base-layer-switcher",{ref:"gv-base-layer-switcher"}):e._e()],1)])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{domProps:{innerHTML:e._s(e.html)}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{title:"Acquisizione Coordinate"},on:{click:e.onClick}})},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"gv-search",attrs:{id:"gv-search"}},[e._c("el-select",{attrs:{id:"gv-seach-input",filterable:"",clearable:"",remote:"",size:"mini",placeholder:"Ricerca...","remote-method":e.search,loading:e.loading,"loading-text":"Caricamento... ","no-match-text":"Nessun elemento trovato","no-data-text":"Nessun elemento trovato"},on:{change:e.onChange},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}},e._l(e.results,function(t){return e._c("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("el-select",{staticClass:"gv-geocoder",attrs:{filterable:"",clearable:"",remote:"",size:"mini",placeholder:"Ricerca Indirizzo...","remote-method":e.remoteMethod,loading:e.loading,"loading-text":"Caricamento... ","no-match-text":"Nessun indirizzo trovato","no-data-text":"Nessun indirizzo trovato",id:"gv-geocoder"},on:{change:e.onChange},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}},e._l(e.results,function(t){return e._c("el-option",{key:t.value,staticClass:"gv-geocoder-options",attrs:{label:t.label,value:t.value}})}))},staticRenderFns:[]}},function(e,t){},function(e,t){}]);
//# sourceMappingURL=GV.js.map