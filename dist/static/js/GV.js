webpackJsonp([29,28],[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(35),o=i(a),r=n(34),s=i(r);n(488);var l=n(600),c=(i(l),n(597)),u=i(c),d=n(307),f=(i(d),n(5)),p=i(f),g=n(151),h=i(g),m=n(365),v=i(m),_=n(361),y=i(_),L=n(7),b=i(L),w=n(18),C=i(w),M=n(360),S=i(M),E=n(354),x=i(E),I=n(355),O=i(I),G=n(353),T=i(G),A=n(352),R=i(A),V=n(323),k=i(V),P=n(339),z=i(P),B=n(330),N=i(B),F=n(302),D=i(F),j=n(1),U=i(j),W=n(625),Z=i(W),q=n(359),H=i(q);n(598);n(614),n(617),n(613),n(616),n(615),n(599),n(313),n(314),n(310),n(311),n(312),n(318),n(317),n(319),n(487).polyfill(),window.GV={init:function(e){var t=this;return(0,s.default)(o.default.mark(function n(){var i,a,r,s,l,c,d,f;return o.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.application.mapOptions||"openlayers"!==e.application.mapOptions.type){n.next=18;break}if(console.log("Caricamento libreria OpenLayers"),i=["/geoservices/apps/viewer/dist/openlayers/ol.js","/geoservices/apps/viewer/dist/openlayers/ol.css","/geoservices/apps/viewer/dist/proj4js/proj4.js"],a=["/geoservices/apps/viewer/dist/proj4js/3003.js"],!e.application.mapOptions.ol3d){n.next=12;break}return window.CESIUM_BASE_URL="/geoservices/apps/viewer/dist/cesium/Build/Cesium",r=["/geoservices/apps/viewer/dist/cesium/Build/Cesium/Cesium.js"],s=["/geoservices/apps/viewer/dist/olcs/olcesium.js","/geoservices/apps/viewer/dist/olcs/olcs.css"],n.next=10,(0,u.default)(a,(0,u.default)(s,(0,u.default)(i,(0,u.default)(r))));case 10:n.next=16;break;case 12:return n.next=14,(0,u.default)(a,(0,u.default)(i));case 14:return n.next=16,(0,u.default)(i);case 16:n.next=18;break;case 18:return n.next=20,(0,N.default)();case 20:if(l=n.sent,GV.globals.ENV=l,t.messageEventListener(),!e.application.auth){n.next=40;break}c=e.application.auth.options,n.t0=e.application.auth.type,n.next="NAM"===n.t0?28:"S3"===n.t0?33:38;break;case 28:return n.next=30,(0,k.default)(c.ruolo);case 30:return d=n.sent,d.success?t.initConfig(e):(0,C.default)("ACCESSO ALLA APPLICAZIONE NON AUTORIZZATO"),n.abrupt("break",38);case 33:return n.next=35,(0,R.default)(c.s3Token,c.s3TokenType,c.s3TokenProv);case 35:return f=n.sent,f.success&&f.found?t.initConfig(e):(0,C.default)("ACCESSO ALLA APPLICAZIONE NON AUTORIZZATO"),n.abrupt("break",38);case 38:n.next=41;break;case 40:t.initConfig(e);case 41:case"end":return n.stop()}},n,t)}))()},messageEventListener:function(){window.addEventListener("message",function(e){var t=e.data;!t.type},!1)},initConfig:function(e){GV.config=D.default,D.default.init(e),U.default.component("gv-app",Z.default);var t=new U.default({el:"#gv-container",template:"<gv-app></gv-app>"});return t},mountLegend:function(){(0,b.default)({elId:"gv-legend",clear:!0,containerId:GV.config.containerId,vm:new U.default({template:'<gv-legend ref="gv-legend"></gv-legend>'})})},mount:function(e){(0,b.default)({elId:e.eldId,clear:e.clear,containerId:GV.config.containerId,vm:new U.default({template:e.template,data:e.data})})},dragbox:y.default,globals:p.default,log:v.default,eventBus:new U.default,utils:{getUrlParam:h.default,buildFindOptionsFromQueryStringParams:S.default,insertAgCoordinate:x.default,notification:C.default,insertGeomPraticaGenio:O.default,getS3TokenBbox:T.default,getS3Token:R.default,getGeneric:z.default},tools:H.default,gvInfoFeatures:[]}},,,,,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={DEFAULT_PROXY:"/geoservices/REST/proxy/proxy?url=",USE_SUBDOMAINS:!0,RL_MAP_CONFIG_SERVICE:"/geoservices/REST/geoportale/map/",RL_LAYER_CONFIG_SERVICE:"/geoservices/REST/config/layer/",RL_QUERY_LAYER_VALUE_LIST_SERVICE:"/geoservices/REST/config/query_layer_valuelist/",RL_QUERY_LAYER_TOPO_VALUE_LIST_SERVICE:"/geoservices/REST/config/query_layer_topo_valuelist/",RL_QUERY_LAYER_SERVICE:"/geoservices/REST/config/query_layer/",RL_QUERY_LAYER_TOPO_SERVICE:"/geoservices/REST/config/query_layer_topo/",RL_DYN_MAP_CONFIG_SERVICE:"/geoservices/REST/config/map/",RL_CREATE_SLD_SERVICE:"/geoservices/REST/config/create_sld/",RL_XSL_INFO_SERVICE:"/geoservices/REST/config/info_xsl?",RL_CATALOG_SERVICE:"/geoservices/REST/geoportale/catalogo/",RL_CANALI_SERVICE:"/geoservices/REST/config/ag_app_canali_tree/",RL_CANALE_CARTE_SERVICE:"/geoservices/REST/config/ag_canale_tree/",RL_DOWNLOAD_CONFIG_SERVICE:"/geoservices/REST/download/map/",RL_DOWNLOAD_INSERT_SERVICE:"/geoservices/REST/download/insert_richiesta/",RL_DOWNLOAD_ESEGUI_RICHIESTA:"/geoservices/REST/download/elabora_richiesta_sincrona/",RL_ENTI_SERVICE:"/geoservices/REST/geoportale/enti/",RL_METADATA_URL:"/geoservices/REST/metadata/scheda_xml/",RL_TRANSFORM_POINT_SERVICE:"/geoservices/REST/coordinate/transform_point/",RL_TRANSFORM_BBOX_SERVICE:"/geoservices/REST/coordinate/transform_bbox/",RL_TRANSFORM_POLY_SERVICE:"/geoservices/REST/coordinate/transform_poly/",RL_ELEVATION:"/geoservices/REST/coordinate/elevation/",RL_AG_APP_LISTA_MAPPE:"/geoservices/REST/config/ag_app_lista_mappe/",RL_CATALOG:"pub",HERE_GEOCODE_PROXY:"/geoservices/apps/proxy/proxy.jsp?url=http://10.20.4.120/geoservices/REST/proxy/here_geocode.v3?",MAPBOX_USERNAME:"stefanoparodi",MAPBOX_ACCESS_TOKEN:"pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g",MAX_BOUNDS:{X_MIN:43.4,Y_MIN:7.3,X_MAX:44.8,Y_MAX:10.5},INFO_WMS_MAX_FEATURES:10,BASE_SCALES:[591657550.5,295828775.3,147914387.6,73957193.82,36978596.91,18489298.45,9244649.227,4622324.614,2311162.307,1155581.153,577790.5767,288895.2884,144447.6442,72223.82209,36111.91104,18055.95552,9027.977761,4513.98888,2256.99444,1128.49722,564.24861,282.124305],BASE_LAYERS:{BLANK:{label:"Sfondo Bianco",icon:"/geoservices/apps/viewer/static/img/legend/bianco.gif"},RL_ORTOFOTO_2013:{label:"AGEA: Ortofoto 2013",icon:"/geoservices/apps/viewer/static/img/legend/sfondi_rl.jpg"},RL_ORTOFOTO_2010:{label:"AGEA: Ortofoto 2010",icon:"/geoservices/apps/viewer/static/img/legend/sfondi_rl.jpg"},RL_ORTOFOTO_2007:{label:"AGEA: Ortofoto 2007",icon:"/geoservices/apps/viewer/static/img/legend/sfondi_rl.jpg"},RL_ORTOFOTO_2000:{label:"Ortofoto IT 2000",icon:"/geoservices/apps/viewer/static/img/legend/sfondi_rl.jpg"},RL_ORTOFOTO_2016:{label:"AGEA: Ortofoto 2016",icon:"/geoservices/apps/viewer/static/img/legend/sfondi_rl.jpg"},RL_CARTE_BASE:{label:"Carte Regionali 2007 -2013",icon:"/geoservices/apps/viewer/static/img/legend/sfondi_rl.jpg"},RL_CARTE_BASE_NC25:{label:"Carta Regionale 1:25000 - DBT NC25",icon:"/geoservices/apps/viewer/static/img/legend/sfondi_rl.jpg"},RL_CARTE_BASE_GS:{label:"Carte Regionali 2007 -2013",icon:"/geoservices/apps/viewer/static/img/legend/sfondi_rl.jpg"},TS_STREETS:{label:"Stradario",icon:"/geoservices/apps/viewer/static/img/legend/sfondi_rl.jpg"},TS_DARK_MATTER:{label:"Dark",icon:"/geoservices/apps/viewer/static/img/legend/sfondi_rl.jpg"},TS_POSITRON:{label:"Positron",icon:"/geoservices/apps/viewer/static/img/legend/sfondi_rl.jpg"},TS_MONOCHROME:{label:"Monochrome",icon:"/geoservices/apps/viewer/static/img/legend/sfondi_rl.jpg"},TS_TONER:{label:"Toner",icon:"/geoservices/apps/viewer/static/img/legend/sfondi_rl.jpg"},OSM:{label:"OpenStreetMap",icon:"/geoservices/apps/viewer/static/img/legend/openstreetmap.png"},ESRI_IMAGERY:{label:"ESRI Imagery",icon:"/geoservices/apps/viewer/static/img/legend/esri.gif"},ESRI_GRAY:{label:"ESRI Gray",icon:"/geoservices/apps/viewer/static/img/legend/esri.gif"},ESRI_DARKGRAY:{label:"ESRI Dark Gray",icon:"/geoservices/apps/viewer/static/img/legend/esri.gif"},ESRI_STREETS:{label:"ESRI Streets",icon:"/geoservices/apps/viewer/static/img/legend/esri.gif"},MAPBOX_STREETS:{label:"Mapbox Streets",icon:"/geoservices/apps/viewer/static/img/legend/mapbox.png"},MAPBOX_MONOCHROME:{label:"Mapbox Monochrome",icon:"/geoservices/apps/viewer/static/img/legend/mapbox.png"},MAPBOX_VIABILITA:{label:"Carta della Viabilità",icon:"/geoservices/apps/viewer/static/img/legend/mapbox.png"},MAPBOX_VIABILITA_SATELLITARE:{label:"Carta satellitare della Viabilità",icon:"/geoservices/apps/viewer/static/img/legend/mapbox.png"},MAPBOX_OUTDOOR:{label:"Mapbox Outdoor",icon:"/geoservices/apps/viewer/static/img/legend/mapbox.png"},MAPBOX_LIGHT:{label:"Mapbox Light",icon:"/geoservices/apps/viewer/static/img/legend/mapbox.png"}}}},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.elId,n=e.vm,i=e.toggleEl,a=document.getElementById(t);if(i&&a)a.style.display="none"!==a.style.display&&a.style.display?"none":"block";else{var r=(0,o.default)(e);n.$mount(r)}return n};var a=n(149),o=i(a)},,function(e,t){},,,,function(e,t){},function(e,t){},,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,i="info"===t?"Info":"Attenzione!!!";e&&t&&(0,l.default)({title:i,type:t,duration:n,offset:70,dangerouslyUseHTMLString:!0,position:"bottom-left",message:e})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(81),r=(i(o),n(6)),s=(i(r),n(74)),l=i(s);t.default=a},,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){function t(t,n){t.wmsParams.infoFormat||(t.wmsParams.infoFormat=n);var i=o(t,e);switch(X++,n){case"application/json":(0,V.default)(i).then(function(e){return l(e,t.name)}).catch(function(e){return console.error(e)});break;case"application/geojson":(0,B.default)(i,t.wmsParams.name).then(function(e){return l(e,t.name)}).catch(function(e){return console.error(e)});break;case"text/plain":(0,F.default)(i,t.wmsParams.name).then(function(e){return l(e,t.name)}).catch(function(e){return console.error(e)});break;default:(0,P.default)(i,t.wmsParams.name).then(function(e){return l(e,t.name)}).catch(function(e){return console.error(e)})}}GV.log("start info request: "+new Date),H=0,X=0,Y=[],GV.config.maps.forEach(function(e){var n=e.flagGeoserver?"application/json":"application/vnd.ogc.gml";e.layers.forEach(function(e){"WMS"===e.type&&e.queryable&&e.visible&&GV.app.map.layerInRange(e)&&t(e,n)})})}function o(e,t){if("openlayers"===GV.app.map.type)return r(e,t);var n=e.infoOptions.infoQueryUrl||w.default.DEFAULT_PROXY+e.wmsParams.url,i=e.infoOptions.infoQueryLayers||e.wmsParams.name,a=e.wmsParams.cql_filter,o=e.wmsParams.infoFormat;return s(n,i,t.latlng,o,e.infoBuffer,a)}function r(e,t){var n=e.infoOptions.infoQueryUrl||e.wmsParams.url,i=e.infoOptions.infoQueryLayers||e.wmsParams.name,a=e.wmsParams.infoFormat,o=e.infoBuffer||10,r=GV.app.map.getView().getProjection(),s=GV.app.map.getView().getResolution(),l=new ol.source.ImageWMS({url:n,params:{LAYERS:e.wmsParams.name},ratio:1,serverType:"geoserver"}),c=l.getFeatureInfoUrl(t.coordinate,s,r,{INFO_FORMAT:a,QUERY_LAYERS:i,FEATURE_COUNT:100,BUFFER:o});return c=w.default.DEFAULT_PROXY+c}function s(e,t,n,i,a,o){var r=GV.app.map.getContainerPoint(n),s=GV.app.map.getSize(),l=GV.app.map.getBbox(),c=null===a||void 0===a?10:a,u={request:"GetFeatureInfo",service:"WMS",crs:"EPSG:3857",styles:"",version:"1.3.0",bbox:l,height:s.y,width:s.x,layers:t,query_layers:t,FEATURE_COUNT:100,buffer:c,info_format:i,i:parseInt(r.x),j:parseInt(r.y)};return o&&(u.cql_filter=o),e+(0,A.default)(u,e,!0)}function l(e,t){function n(e,t){var n=GV.app.map.getLayerByName(e).config,a=i(t,n.cachePostGIS);return a}function i(e,t){var n={};for(var i in e)"bbox"!==i&&e.hasOwnProperty(i)&&(t?n[i.toUpperCase()]=e[i]:n[i]=e[i]);return n}function a(e,t){var n,i;return n=o(e,"infoLabelAttr"),i=o(e,"infoIdAttr"),n&&t[n]?t[n]:i&&t[i]?t[i]:t[r(t)]}function o(e,t){var n=GV.app.map.getLayerByName(e).config;return n&&n.infoOptions&&n.infoOptions[t]?n.infoOptions[t]:null}function r(e){for(var t in e)if(e.hasOwnProperty(t)&&"function"!=typeof t)return t;return null}if(e&&(H++,e.forEach(function(e){e.text?(e.layer=GV.app.map.getLayerByName(e.layerName),e.infoOptions=e.layer.config.infoOptions):(e.layerName=t,e.layer=GV.app.map.getLayerByName(t),e.properties=n(t,e.properties),e.label=a(t,e.properties),e.infoOptions=e.layer.config.infoOptions)}),Array.prototype.push.apply(Y,e),H===X)){if(0===Y.length)return void GV.log("Nessun elemento trovato");if(1===Y.length){var s=document.getElementById("gv-info-wms-list");s&&s.parentNode.removeChild(s),c(Y[0])}else(0,E.default)({elId:"gv-info-wms-list",clear:!0,vm:new M.default({template:'<gv-info-wms-list :items="items"></gv-info-wms-list>',data:{items:Y}})});GV.log("end info request: "+new Date)}}function c(e){var t=h(e);switch(t){case"text":p(e);break;case"generico":f(e);break;case"xsl":g(e);break;case"gv_info":u(e);break;default:d(e)}m(e)}function u(e){var t=e.id,n=e.layer.config.id;GV.gvInfoFeatures[t]=e;var i="gvi-info-"+t,a="/geoservices/apps/gvi/info/"+n+"/?feature_id="+t;e.infoOptions.infoTarget&&"panel"!==e.infoOptions.infoTarget?_(a,e.infoOptions):v(a,e.infoOptions,i)}function d(e){var t=(0,G.default)(e.infoOptions.infoUrl,e.properties);e.infoOptions.infoTarget&&"panel"!==e.infoOptions.infoTarget?_(t,e.infoOptions):v(t,e.infoOptions)}function f(e){var t=e.layer.legend.label;(0,E.default)({elId:"gv-info-generico",vm:new M.default({template:'<gv-info-generico :properties="properties" :height="height" :width="width" :title="title"></gv-info-generico>',data:{title:t,properties:e.properties,width:e.infoOptions.infoWidth||400,height:e.infoOptions.infoHeight||600}})})}function p(e){var t=e.infoOptions,n=t.infoUrl,i={text:e.text.replace(/(?:\r\n|\r|\n)/g,"<br>")};(0,W.default)(n,i).then(function(e){var n=e.infoUrl;v(n,t)})}function g(e){function t(e){try{var t='<?xml version="1.0" encoding="ISO-8859-1"?><msGMLOutput xmlns:gml="http://www.opengis.net/gml" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"></msGMLOutput>',n=(0,I.default)(t),i=/^\d/.test(e.layerName)?"L"+e.layerName.replace(/\s+/g,"_"):e.layerName.replace(/\s+/g,"_"),a=i+"_layer",o=n.createElement(a),r=i+"_feature",s=n.createElement(r),l=e.properties;for(var c in l)if(l.hasOwnProperty(c)&&"boundedBy"!==c){var u=null;u=0===l[c]||l[c]?n.createTextNode(l[c]):n.createTextNode("");var d=c.match(/^\d/)?"_"+c:c,f=n.createElement(d);f.appendChild(u),s.appendChild(f)}return o.appendChild(s),n.documentElement.appendChild(o),n}catch(e){console.error(e)}}var n=e.infoOptions,i=t(e);e.gml=(new XMLSerializer).serializeToString(i);var a=n.infoUrl,o=n.infoTarget;(0,W.default)(a,e).then(function(e){var t=e.infoUrl;o&&"panel"!==o?_(t,n):v(t,n)})}function h(e){var t=e.infoOptions.infoUrl;return e.text?"text":"gv_info"===t?"gv_info":"generico.xsl"===t.substr(t.length-12)?"generico":".xsl"===t.substr(t.length-4)?"xsl":void 0}function m(e){e.layer.config.flagGeoserver&&"VECTOR"===e.layer.config.geomType&&!function(){var t=[e.layerName],n=e.layer.config,i=n.infoOptions.infoIdAttr;i&&n.cachePostGIS&&(i=i.toLowerCase());var a=i+"='"+e.properties[n.infoOptions.infoIdAttr]+"'";e.layer.config.wmsParams.cql_filter&&(a+=" AND "+e.layer.config.wmsParams.cql_filter),(0,j.default)(n.wfsParams,a,null).then(function(e){var i=GV.app.map.getLayerByName("InfoWmsHilite"),a=i&&e?e[0]:null;if(a&&a.geometry)if("openlayers"===GV.app.map.type){var o=i.getSource();o.clear(!0);var r=(new ol.format.GeoJSON).readFeature(a,{featureProjection:"EPSG:3857"});o.addFeature(r),GV.app.map.getView().fit(r.getGeometry().getExtent(),{maxZoom:n.maxZoom<17?n.maxZoom:17}),GV.config.hilitedLayer.push(t)}else{i.clearLayers(),i.addData(a.geometry);var s=n.maxZoom<17?n.maxZoom:17;GV.app.map.flyToBounds(i.getBounds(),{maxZoom:s}),GV.config.hilitedLayer.push(t)}}).catch(function(e){console.error(e)})}()}function v(e,t,n){var i=n||"gv-info-wms-html";(0,E.default)({elId:i,vm:new M.default({template:'<gv-info-wms-html :src="src" :height="height" :width="width" :title="title" :id="id"></gv-info-wms-html>',data:{title:"Risultato Info",src:e,width:t.infoWidth||400,height:t.infoHeight||400,id:i}})})}function _(e,t){var n=t.infoWidth||400,i=t.infoHeight||500,a=t.infoTarget,o=window.open(e,a,"status=yes, toolbar=yes, menubar=no, width="+n+", height="+i+", resizable=yes, scrollbars=yes"),r=setInterval(function(){o.closed&&(clearInterval(r),console.log("Chiusa Popup"),GV.app.map.clearLayer("InfoWmsHilite"))},1e3);return o?o:void(0,q.default)("Popup bloccata sul browser<br>Per visualizzare info è necessario abilitare popup","info")}function y(e){!function(){switch(e.options.type){case"openlayers":var t=[255,204,0,.6],n=new ol.style.Stroke({color:t,width:6}),i={Point:new ol.style.Style({image:new ol.style.Circle({radius:8,fill:null,stroke:n})}),MultiPoint:new ol.style.Style({image:new ol.style.Circle({radius:8,fill:null,stroke:n})}),LineString:new ol.style.Style({stroke:n}),MultiLineString:new ol.style.Style({stroke:n}),Polygon:new ol.style.Style({stroke:n}),MultiPolygon:new ol.style.Style({stroke:n}),GeometryCollection:new ol.style.Style({stroke:n,image:new ol.style.Circle({radius:8,fill:null,stroke:n})})};e.loadLayers([{name:"InfoWmsHilite",type:"JSON",style:function(e){return i[e.getGeometry().getType()]},visible:!0,zIndex:1e3}]);break;default:e.loadLayers([{name:"InfoWmsHilite",type:"JSON",style:{color:"#ffcc00",fillOpacity:0,weight:6,opacity:.6},pointToLayer:function(e,t){return L.circleMarker(t,{radius:8,color:"#ffcc00",fillColor:"#ffcc00",fill:!0,fillOpacity:.6,weight:6,opacity:.6})},visible:!0}])}}()}Object.defineProperty(t,"__esModule",{value:!0});var b=n(5),w=i(b),C=n(1),M=i(C),S=n(7),E=i(S),x=n(112),I=i(x),O=n(366),G=i(O),T=n(150),A=i(T),R=n(102),V=i(R),k=n(333),P=i(k),z=n(331),B=i(z),N=n(332),F=i(N),D=n(33),j=i(D),U=n(334),W=i(U),Z=n(18),q=i(Z),H=0,X=0,Y=[];t.default={id:"info-wms-manager",active:!1,firstActivation:!0,addHiliteLayer:y,getGetFeatureInfoUrl:o,features:Y,activate:function(){var e=this;GV.log("GV.app.infoWmsManager.activate"),this.active=!0,GV.app.map?y(GV.app.map):GV.eventBus.$on("gv-map-mounted",function(e){y(e)}),GV.app.map.on("click",function(t){e.active&&a(t)}),GV.app.infoWmsManager=this,GV.config.activeControl=this},deactivate:function(){GV.log("GV.app.infoWmsManager.deactivate"),GV.app.map.off("click"),this.active=!1},showFeatureInfo:c}},,,,,function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){if(!n&&!e&&!e.url)return void console.warning("getWFSFeature: URL non impostata");var i=""+GV.globals.DEFAULT_PROXY+n;if(e){var a="service=WFS&version=2.0.0&request=GetFeature&srsName=EPSG%3A4326&outputFormat=application%2Fjson";i=""+GV.globals.DEFAULT_PROXY+e.url+a+"&typeName="+e.typeName+"&cql_filter="+t}var o=l.default.service({text:"Attendere...",background:"rgba(0, 0, 0, 0.8)"});return u.default.get(i).then(function(e){return o.close(),e.data.features})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(40),r=(i(o),n(6)),s=(i(r),n(37)),l=i(s);t.default=a;var c=n(4),u=i(c),d=n(5);i(d)},,,,,,function(e,t){},function(e,t){},,function(e,t){},,function(e,t){},,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,i){var a=""+l.default.RL_TRANSFORM_POINT_SERVICE+e+"/"+t+"/"+n+","+i;return r.default.get(a,{})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(4),r=i(o),s=n(5),l=i(s)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t={};return r.default.get(e,{params:t})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(4),r=i(o)},,,,,,,,,,,function(e,t){},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={methods:{switchActiveButton:function(){this.active=!this.active,this.active?(GV.config.activeControl&&GV.config.activeControl.deactivate(),GV.config.activeControl=this.control,GV.config.activeButton&&this.name!==GV.config.activeButton.name&&(GV.config.activeButton.active=!1),GV.config.activeButton=this,GV.config.activeButton.active=!0,this.control.activate()):this.control.deactivate()}},mounted:function(){this.options&&this.options.active&&this.switchActiveButton()}}},,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(7),s=i(r),l=n(1),c=i(l);c.default.component("gv-coordinate-panel",function(){return new o.default(function(e){n.e(26,function(t){e(n(632))})})});var u={id:"coordinate",active:!1,latlng:null,activate:function(){GV.log("GV.controls.coordinate.activate"),this.active=!0,this.openPanel(),GV.eventBus.$emit("gv-control-coordinate-activate",this)},deactivate:function(){GV.log("GV.controls.coordinate.deactivate"),GV.eventBus.$emit("gv-control-coordinate-deactivate",this),this.active=!1,this.closePanel()},openPanel:function(){(0,s.default)({elId:"gv-coordinate-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new c.default({template:"<gv-coordinate-panel></gv-coordinate-panel>"})})},closePanel:function(){document.getElementById("gv-coordinate-panel").style.display="none"}};t.default=u},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var i=""+l.default.RL_TRANSFORM_BBOX_SERVICE+e+"/"+t+"/"+n;return r.default.get(i,{})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(4),r=i(o),s=n(5),l=i(s)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t={};return r.default.get(e,{params:t}).then(function(e){return e.data.features})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(4),r=i(o)},,,,,,,,,function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}var a,o,r,s=n(66);i(s);!function(n,i){o=[],a=i,r="function"==typeof a?a.apply(t,o):a,!(void 0!==r&&(e.exports=r))}(void 0,function(){return function(e){"use strict";function t(){void 0===e.escapeMode&&(e.escapeMode=!0),e.attributePrefix=e.attributePrefix||"_",e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0),e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0),void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0),e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!1),e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],void 0===e.keepCData&&(e.keepCData=!1)}function n(){}function i(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function a(e){return e.prefix}function o(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function r(e,t,n,i){for(var a=0;a<e.length;a++){var o=e[a];if("string"==typeof o){if(o==i)break}else if(o instanceof RegExp){if(o.test(i))break}else if("function"==typeof o&&o(t,n,i))break}return a!=e.length}function s(t,n,i){switch(e.arrayAccessForm){case"property":t[n]instanceof Array?t[n+"_asArray"]=t[n]:t[n+"_asArray"]=[t[n]]}!(t[n]instanceof Array)&&e.arrayAccessFormPaths.length>0&&r(e.arrayAccessFormPaths,t,n,i)&&(t[n]=[t[n]])}function l(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),i=t[5].split(".");if(n.setHours(t[3],t[4],i[0]),i.length>1&&n.setMilliseconds(i[1]),t[6]&&t[7]){var a=60*t[6]+Number(t[7]),o=/\d\d-\d\d:\d\d$/.test(e)?"-":"+";a=0+("-"==o?-1*a:a),n.setMinutes(n.getMinutes()-a-n.getTimezoneOffset())}else e.indexOf("Z",e.length-1)!==-1&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function c(t,n,i){if(e.datetimeAccessFormPaths.length>0){var a=i.split(".#")[0];return r(e.datetimeAccessFormPaths,t,n,a)?l(t):t}return t}function u(t,n,i,a){return!(n==S.ELEMENT_NODE&&e.xmlElementsFilter.length>0)||r(e.xmlElementsFilter,t,i,a)}function d(t,n){if(t.nodeType==S.DOCUMENT_NODE){for(var o=new Object,r=t.childNodes,l=0;l<r.length;l++){var f=r.item(l);if(f.nodeType==S.ELEMENT_NODE){var p=i(f);o[p]=d(f,p)}}return o}if(t.nodeType==S.ELEMENT_NODE){var o=new Object;o.__cnt=0;for(var r=t.childNodes,l=0;l<r.length;l++){var f=r.item(l),p=i(f);if(f.nodeType!=S.COMMENT_NODE){var g=n+"."+p;u(o,f.nodeType,p,g)&&(o.__cnt++,null==o[p]?(o[p]=d(f,g),s(o,p,g)):(null!=o[p]&&(o[p]instanceof Array||(o[p]=[o[p]],s(o,p,g))),o[p][o[p].length]=d(f,g)))}}for(var h=0;h<t.attributes.length;h++){var m=t.attributes.item(h);o.__cnt++,o[e.attributePrefix+m.name]=m.value}var v=a(t);return null!=v&&""!=v&&(o.__cnt++,o.__prefix=v),null!=o["#text"]&&(o.__text=o["#text"],o.__text instanceof Array&&(o.__text=o.__text.join("\n")),e.stripWhitespaces&&(o.__text=o.__text.trim()),delete o["#text"],"property"==e.arrayAccessForm&&delete o["#text_asArray"],o.__text=c(o.__text,p,n+"."+p)),null!=o["#cdata-section"]&&(o.__cdata=o["#cdata-section"],delete o["#cdata-section"],"property"==e.arrayAccessForm&&delete o["#cdata-section_asArray"]),0==o.__cnt&&"text"==e.emptyNodeForm?o="":1==o.__cnt&&null!=o.__text?o=o.__text:1!=o.__cnt||null==o.__cdata||e.keepCData?o.__cnt>1&&null!=o.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==o.__text||""==o.__text.trim())&&delete o.__text:o=o.__cdata,delete o.__cnt,!e.enableToStringFunc||null==o.__text&&null==o.__cdata||(o.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),o}if(t.nodeType==S.TEXT_NODE||t.nodeType==S.CDATA_SECTION_NODE)return t.nodeValue}function f(t,n,i,a){var r="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+n;if(null!=i)for(var s=0;s<i.length;s++){var l=i[s],c=t[l];e.escapeMode&&(c=o(c)),r+=" "+l.substr(e.attributePrefix.length)+"=",r+=e.useDoubleQuotes?'"'+c+'"':"'"+c+"'"}return r+=a?"/>":">"}function p(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function g(e,t){return e.indexOf(t,e.length-t.length)!==-1}function h(t,n){return!!("property"==e.arrayAccessForm&&g(n.toString(),"_asArray")||0==n.toString().indexOf(e.attributePrefix)||0==n.toString().indexOf("__")||t[n]instanceof Function)}function m(e){var t=0;if(e instanceof Object)for(var n in e)h(e,n)||t++;return t}function v(t,n,i){return 0==e.jsonPropertiesFilter.length||""==i||r(e.jsonPropertiesFilter,t,n,i)}function _(t){var n=[];if(t instanceof Object)for(var i in t)i.toString().indexOf("__")==-1&&0==i.toString().indexOf(e.attributePrefix)&&n.push(i);return n}function y(t){var n="";return null!=t.__cdata&&(n+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(n+=e.escapeMode?o(t.__text):t.__text),n}function L(t){var n="";return t instanceof Object?n+=y(t):null!=t&&(n+=e.escapeMode?o(t):t),n}function b(e,t){return""===e?t:e+"."+t}function w(e,t,n,i){var a="";if(0==e.length)a+=f(e,t,n,!0);else for(var o=0;o<e.length;o++)a+=f(e[o],t,_(e[o]),!1),a+=C(e[o],b(i,t)),a+=p(e[o],t);return a}function C(e,t){var n="",i=m(e);if(i>0)for(var a in e)if(!h(e,a)&&(""==t||v(e,a,b(t,a)))){var o=e[a],r=_(o);if(null==o||void 0==o)n+=f(o,a,r,!0);else if(o instanceof Object)if(o instanceof Array)n+=w(o,a,r,t);else if(o instanceof Date)n+=f(o,a,r,!1),n+=o.toISOString(),n+=p(o,a);else{var s=m(o);s>0||null!=o.__text||null!=o.__cdata?(n+=f(o,a,r,!1),n+=C(o,b(t,a)),n+=p(o,a)):n+=f(o,a,r,!0)}else n+=f(o,a,r,!1),n+=L(o),n+=p(o,a)}return n+=L(e)}var M="1.2.0";e=e||{},t(),n();var S={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(e){var t=window.ActiveXObject||"ActiveXObject"in window;if(void 0===e)return null;var n;if(window.DOMParser){var i=new window.DOMParser,a=null;if(!t)try{a=i.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(e){a=null}try{n=i.parseFromString(e,"text/xml"),null!=a&&n.getElementsByTagNameNS(a,"parsererror").length>0&&(n=null)}catch(e){n=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(e);return n},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?l(e):e},this.xml2json=function(e){return d(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return C(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return M}}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){try{var t=null;if((0,r.default)()){var n=new ActiveXObject("Microsoft.XMLDOM");n.async="false",n.loadXML(e),t=n}else{var i=new DOMParser;t=i.parseFromString(e,"text/xml")}return t}catch(e){console.error(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(153),r=i(o)},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var i,a;n(569),i=n(280);var o=n(767);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-ad3b01fe",e.exports=i},,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=l.default.RL_CATALOG_SERVICE;return e.idMap&&(t+=e.idMap),e.cat=GV.globals.RL_CATALOG,r.default.get(t,{params:e}).then(function(e){return e.data.data})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(4),r=i(o),s=n(5),l=i(s)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(!e||"null"===e)throw new Error("Parametro idMap mancante");var t=e.startsWith("D")?""+l.default.RL_DYN_MAP_CONFIG_SERVICE+e:""+l.default.RL_MAP_CONFIG_SERVICE+e,n={};return GV.config.application.name?n.app=GV.config.application.name:n.app="gv2",GV.config.geoserverUrl&&(n.geoserverUrl=GV.config.geoserverUrl),GV.config.flagGeoserver&&(n.geoserver="true"),r.default.get(t,{params:n})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(4),r=i(o),s=n(5),l=i(s)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=s.default.RL_DOWNLOAD_CONFIG_SERVICE+e;return o.default.get(t).then(function(e){return e.data.data})};var a=n(4),o=i(a),r=n(5),s=i(r)},,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return(new l).xml_str2json(e)}function o(e){var t=GV.globals.DEFAULT_PROXY+e;return s.default.get(t).then(function(e){var t=e.data,n=a(t);return n})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=n(4),s=i(r),l=n(111)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[],n=e.fields;e.values.split(",").forEach(function(e){t.push(n+"='"+e+"'")});var i=encodeURIComponent(t.join(" OR "));return i}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.elType||"div",n=e.containerId||"gv-container",i=e.elId,a=e.clear;a&&document.getElementById(i)&&document.getElementById(i).remove();var o=document.createElement(t);return o.id=i,document.getElementById(n)?document.getElementById(n).appendChild(o):(console.log("Elemento "+n+" non trovato faccio mount su body"),document.body.appendChild(o)),o}},function(e,t){"use strict";function n(e,t,n){var i=[];for(var a in e)i.push(encodeURIComponent(n?a.toUpperCase():a)+"="+encodeURIComponent(e[a]));return(t&&t.indexOf("?")!==-1?"&":"?")+i.join("&")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(e){var t=new RegExp("[\\?&]"+e+"=([^&#]*)","i").exec(window.location.href);return t&&"null"===t[1]&&(t=null),t?decodeURIComponent(t[1]):null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){
"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=r.default.BASE_SCALES.findIndex(function(t){return e>t});return t<0?20:t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(5),r=i(o)},function(e,t){"use strict";function n(){return navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.indexOf("Trident")>0||navigator.userAgent.indexOf("Edge")>0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},,,,function(e,t,n){var i,a;n(578),i=n(257);var o=n(775);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(367),o=i(a),r=n(50),s=i(r),l=n(10),c=i(l),u=n(364),d=(i(u),n(362)),f=(i(d),n(7)),p=i(f),g=n(1),h=i(g),m=n(657),v=i(m),_=n(668),y=i(_),L=n(658),b=i(L),w=n(646),C=i(w),M=n(134),S=i(M);h.default.component("gv-ll-map",v.default),h.default.component("gv-ol-map",y.default),h.default.component("gv-legend",b.default),h.default.component("gv-header",C.default),h.default.component("gv-title",S.default),h.default.component("gv-iframe-panel",function(){return new c.default(function(e){n.e(25,function(t){e(n(647))})})}),h.default.component("gv-info-wms-list",function(){return new c.default(function(e){n.e(22,function(t){e(n(651))})})}),h.default.component("gv-info-wms-html",function(){return new c.default(function(e){n.e(23,function(t){e(n(650))})})}),h.default.component("gv-info-generico",function(){return new c.default(function(e){n.e(24,function(t){e(n(649))})})}),t.default={name:"gv-app",data:function(){var e=GV.config.application.mapOptions&&GV.config.application.mapOptions.type||"leaflet";return{leafletMap:"leaflet"===e,olMap:"openlayers"===e,showHeader:GV.config.application.layout.header,showLegend:GV.config.application.layout.legend,showToolbar:GV.config.application.layout.toolbar}},created:function(){GV.log("gv-app: created"),GV.app=this},mounted:function(){GV.log("gv-app: mounted"),this.addTools(GV.config.application.layout.tools),GV.eventBus.$emit("gv-app-mounted",this)},methods:{addTools:function(){var e=this;if(GV.config.application.layout.tools){var t=GV.config.application.layout.tools;t.forEach(function(t){var n=t.position||"topleft";t.options=t.options||{},e.addTool(t,n)})}},addTool:function(e,t){var n=!1;GV.tools.forEach(function(i){if(e.name===i.name){n=!0;var a=e.name;GV.log("gv-app: addTool -> "+a),e.active&&(e.options.active=!0);var r=e.options.props?e.options.props.map(function(e){return(0,s.default)(e)[0]+"="+(0,o.default)(e)[0]}).join(" "):"",l="gv-tool-"+t;(0,p.default)({containerId:l,elId:a,vm:new h.default({template:"<"+a+" "+r+"></"+a+">"}),toggleEl:!1})}}),n||console.error("Strumento "+e.name+" non trovato")}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(13),s=(i(r),n(11)),l=i(s),c=n(14),u=(i(c),n(6)),d=(i(u),n(12)),f=i(d),p=n(1),g=i(p),h=n(7),m=i(h),v=n(322),_=i(v),y=n(27),L=i(y),b=n(102),w=i(b);g.default.use(f.default),g.default.use(l.default),g.default.component("gv-atlante-geochimico-scheda-panel",function(){return new o.default(function(e){n.e(27,function(t){e(n(627))})})}),t.default={data:function(){return{livelli:[],livello:null,downloadConfig:null,metaData:null,layerConfig:null,show:!0,showLegend:!1,legendUrl:null,baseMapConfigId:2037}},methods:{toggleCollapseClass:function(){return this.show?"gv-panel-collapse gv-color-scheme el-icon-arrow-up":"gv-panel-collapse gv-color-scheme el-icon-arrow-down"},hidePanel:function(){this.show?document.getElementById("ag-wrapper").style.display="none":document.getElementById("ag-wrapper").style.display="block",this.show=!this.show},onChange:function(e){var t=this.livelli.filter(function(t){return t.id==e});this.layerConfig=t[0],this.loadLayer(t[0]),this.legendUrl="/geoservices/REST/atlante_geochimico/legenda/?id="+this.layerConfig.id,this.showLegend=!0,this.cleanUpDownload()},cleanUpDownload:function(){var e=document.getElementById("gv-map-download");e&&e.parentNode.removeChild(e);var t=GV.app.map.getLayerByName("SelezioneMacrobacino");t&&GV.app.map.removeLayer(t),GV.config.activeControl&&GV.config.activeControl.activate()},loadLayer:function(e){e.visible=!0,e.legend.popUpFlag=!1,e.multiClasse=!1;var t=e.idMap;GV.config.removeMap(t),GV.config.removeMap(this.baseMapConfigId),GV.config.addMapConfig({id:t,name:"Atlante Geochimico",flagGeoserver:!0,flagDownload:!0,downloadConfig:this.downloadConfig,metaData:this.metaData,layers:[e]}),GV.config.addRlMap(this.baseMapConfigId.toString(),!0,!1)},subscribeMapEvent:function(e){var t=this;GV.app.map.on("click",function(e){var n=t.getWmsUrl(e);t.layerConfig&&t.layerConfig.visible&&(0,w.default)(n).then(function(e){t.showInfo(e)})})},showInfo:function(e){var t={pcdf:e[0].properties.GRAY_INDEX,pest:e[1].properties.GRAY_INDEX,plower:e[2].properties.GRAY_INDEX,pupper:e[3].properties.GRAY_INDEX,Q1:e[4].properties.GRAY_INDEX,Q2:e[5].properties.GRAY_INDEX,Q3:e[6].properties.GRAY_INDEX,QCD:e[7].properties.GRAY_INDEX,cifre:this.layerConfig.infoOptions.cifreSignificative,unitaMisura:this.layerConfig.infoOptions.unitaMisura,titolo:this.layerConfig.title};(0,m.default)({elId:"gv-atlante-geochimico-scheda-panel",clear:!0,vm:new g.default({template:'<gv-atlante-geochimico-scheda-panel :pcdf="pcdf" :pest="pest" :plower="plower" :pupper="pupper" :Q1="Q1" :Q2="Q2" :Q3="Q3" :QCD="QCD" :cifre="cifre" :unitaMisura="unitaMisura" :titolo="titolo"></gv-atlante-geochimico-scheda-panel>',data:t})})},getWmsUrl:function(e){if(this.layerConfig){return this.layerConfig.wmsParams.infoFormat="application/json",this.layerConfig.infoBuffer=0,L.default.getGetFeatureInfoUrl(this.layerConfig,e)}}},mounted:function(){var e=this;(0,_.default)().then(function(t){e.livelli=t.layers.sort(function(e,t){return e.title.localeCompare(t.title)}),e.livelli.forEach(function(e){e.title=e.title.replace("2","₂").replace("3","₃").replace("5","₅")}),e.downloadConfig=t.downloadConfig,e.metaData=t.metaData}),GV.config.addRlMap(this.baseMapConfigId.toString(),!0,!1),this.subscribeMapEvent(event)}}},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(13),o=(i(a),n(11)),r=i(o),s=n(14),l=(i(s),n(6)),c=(i(l),n(12)),u=i(c),d=n(1),f=i(d);f.default.use(u.default),f.default.use(r.default),t.default={name:"gv-base-layer-switcher",data:function(){return{baseLayers:GV.config.baseLayers,activeBaseLayer:GV.config.activeBaseLayer}},methods:{onChange:function(e){GV.eventBus.$emit("change-base-layer",{layer:e})}},mounted:function(){GV.baseLayerSwitcher=this}}},,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(588),o=(i(a),n(6)),r=(i(o),n(471)),s=i(r),l=n(1),c=i(l);c.default.use(s.default),t.default={name:"gv-conferma-dettaglio",props:["link","label","idMap"],data:function(){return{dialogVisible:!0}},methods:{cancel:function(){this.dialogVisible=!1},submit:function(){GV.config.addRlMap(this.idMap,!1,!0),this.dialogVisible=!1}}}},,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(1),s=i(r),l=n(7),c=i(l),u=n(648),d=i(u);s.default.component("image-viewer",d.default),s.default.component("gv-fototeca-carrello-panel",function(){return new o.default(function(e){n.e(2,function(t){e(n(177))})})}),t.default={name:"gv-fototeca-immagine",props:["volo","foto"],data:function(){var e="https://geoservizi.regione.liguria.it/dtuff/Img/voli/",t=""+e+this.volo+"/"+this.foto+".jpg";return{title:"Fotogramma: "+this.foto,imgUrl:t,logo:"/geoservices/apps/imageviewer2/fototeca/logo.gif"}},methods:{addToBasket:function(){var e=this,t=GV.globals.FOTOTECA_CARRELLO.filter(function(e){return e.id===GV.globals.FOTOTECA_SEL_VOLO.id});if(0===t.length)GV.globals.FOTOTECA_CARRELLO.push({id:GV.globals.FOTOTECA_SEL_VOLO.id,label:GV.globals.FOTOTECA_SEL_VOLO.nome,dir:GV.globals.FOTOTECA_SEL_VOLO.volo.toLowerCase(),children:[{label:this.foto,file:this.foto+".jpg"}]});else{var n=t[0],i=!1;n.children.forEach(function(t){t.label===e.foto&&(i=!0)}),i||n.children.push({label:this.foto,file:this.foto+".jpg"})}this.showCart()},showCart:function(){(0,c.default)({elId:"gv-fototeca-carrello-panel",containerId:GV.config.containerId,toggleEl:!1,vm:new s.default({template:"<gv-fototeca-carrello-panel></gv-fototeca-carrello-panel>"})})}},mounted:function(){}}},,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(13),s=(i(r),n(11)),l=i(s),c=n(14),u=(i(c),n(6)),d=(i(u),n(12)),f=i(d),p=n(1),g=i(p),h=n(335),m=i(h),v=n(101),_=i(v),y=n(7),b=i(y),w=n(637),C=i(w);g.default.use(f.default),g.default.use(l.default),g.default.component("gv-fototeca-immagine",C.default),g.default.component("gv-fototeca-scheda-volo-panel",function(){return new o.default(function(e){n.e(3,function(t){e(n(178))})})}),t.default={data:function(){return{voli:[],volo:[],loading:!1,marker:null,bbox:null,baseWfsUrl:GV.globals.DEFAULT_PROXY+"https://geoservizi.regione.liguria.it/geoserver/wfs?service=WFS&version=2.0.0&request=GetFeature&srsName=EPSG%3A4326&outputFormat=application%2Fjson&",strisciata:null,foto:null}},methods:{onChange:function(e){GV.globals.FOTOTECA_SEL_VOLO=this.voli.filter(function(t){return t.id===e})[0];var t="M"+GV.globals.FOTOTECA_SEL_VOLO.id,n="L"+GV.globals.FOTOTECA_SEL_VOLO.codLivStrisciata,i="presenza_fotogrammi='SI'",a=this.baseWfsUrl+"typeName="+t+":"+n+"&cql_filter="+i;this.loadLayerStrisciata(a),this.showSchedaVolo()},showSchedaVolo:function(){(0,b.default)({elId:"gv-fototeca-scheda-volo-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new g.default({template:"<gv-fototeca-scheda-volo-panel></gv-fototeca-scheda-volo-panel>"})})},hiliteStrisciata:function(e){var t=GV.app.map.getLayerByName("strisciate");t.eachLayer(function(e){e.setStyle({color:"#ff0000"})}),e.setStyle({color:"#ffff00"})},loadLayerStrisciata:function(e){var t=this,n={type:"JSON",dataType:"json",name:"strisciate",visible:!0,geomSubType:"POLYGON",url:e,idMap:"fototeca",style:{color:"#ff0000",fillOpacity:0,weight:2,opacity:1},zoomToLayerExtent:!0,onEachFeature:function(e,n){n.on("click",function(e){t.strisciata=e.target.feature.properties.id_strisciata,t.hiliteStrisciata(n),t.loadLayerFoto()}),n.on("mouseover",function(e){t.strisciata!==e.target.feature.properties.id_strisciata&&n.setStyle({color:"#ff9900"})}),n.on("mouseout",function(e){t.strisciata!==e.target.feature.properties.id_strisciata&&n.setStyle({color:"#ff0000"})})}},i=n.idMap;GV.config.removeMap(i),GV.config.addMapConfig({id:i,name:"Fototeca",flagGeoserver:!0,layers:[n]})},hiliteFoto:function(e){var t=GV.app.map.getLayerByName("foto");t.eachLayer(function(e){e.setStyle({color:"#ff0000"})}),e.setStyle({color:"#ffff00"})},loadLayerFoto:function(){var e=this;GV.config.removeLayer("foto");var t="M"+GV.globals.FOTOTECA_SEL_VOLO.id,n="L"+GV.globals.FOTOTECA_SEL_VOLO.codLivFoto,i="id_strisciata='"+this.strisciata+"'",a=this.baseWfsUrl+"typeName="+t+":"+n+"&cql_filter="+i,o={type:"JSON",name:"foto",visible:!0,geomSubType:"POINT",url:a,idMap:"fototeca",pointToLayer:function(e,t){var n={color:"#ff0000",fillColor:"#ff0000",fill:!0,weight:3,radius:2};return L.circleMarker(t,n)},zoomToLayerExtent:!0,onEachFeature:function(t,n){n.on("click",function(t){e.foto=t.target.feature.properties.foto,e.hiliteFoto(n),GV.app.map.setView([n._latlng.lat,n._latlng.lng],15),"obliterato"===t.target.feature.properties.immagine?GV.utils.notification("Fotogramma consultabile presso lo Sportello Cartografico <br>Codice Fotogramma: <b>"+e.foto+"</b>","info"):e.showFoto()}),n.on("mouseover",function(t){e.foto!==t.target.feature.properties.foto&&n.setStyle({color:"#ff9900"})}),n.on("mouseout",function(t){e.foto!==t.target.feature.properties.foto&&n.setStyle({color:"#ff0000"})})}};o.idMap;GV.config.addLayerToMap(o,"fototeca")},showFoto:function(){(0,b.default)({elId:"gv-fototeca-immagine",clear:!0,vm:new g.default({template:'<gv-fototeca-immagine :volo="volo" :foto="foto" ></gv-fototeca-immagine>',data:{volo:GV.globals.FOTOTECA_SEL_VOLO.volo.toLowerCase(),foto:this.foto}})})}},mounted:function(){var e=this;(0,m.default)(this.bbox).then(function(t){e.voli=t}),GV.eventBus.$on("gv-fototeca-reload-voli",function(t){var n=t.bbox,i=t.bboxSRS,a="3003";n?(0,_.default)(i,a,n).then(function(t){t.data.data&&(console.log(t.data.data),e.bbox=t.data.data[0][0]+","+t.data.data[1][0],(0,m.default)(e.bbox).then(function(t){e.voli=t}))}):(e.bbox=n,(0,m.default)(e.bbox).then(function(t){e.voli=t}))})}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(173),o=(i(a),n(56)),r=i(o),s=n(81),l=(i(s),n(74)),c=i(l),u=n(9),d=(i(u),n(8)),f=i(d),p=n(13),g=(i(p),n(11)),h=i(g),m=n(14),v=(i(m),n(6)),_=(i(v),n(12)),y=i(_),b=n(1),w=i(b),C=n(337),M=i(C),S=n(338),E=i(S);w.default.use(y.default,h.default,f.default,c.default),w.default.use(r.default),t.default={data:function(){return{name:"gv-gas",title:"FILTRI",aree:null,area:null,province:[{codice:null,descrizione:"TUTTE LE PROVINCE"},{codice:"010",descrizione:"GENOVA"},{codice:"008",descrizione:"IMPERIA"},{codice:"011",descrizione:"LA SPEZIA"},{codice:"009",descrizione:"SAVONA"}],provincia:null,moduli:[],modulo:null,listaAsl:[],asl:0,soloPostiDisponibili:!1,features:null,options:GV.config.getToolOptions("gv-gas")}},methods:{onChangeArea:function(e){this.moduli=this.aree.filter(function(t){return t.codice===e})[0].moduli},onChangeProvincia:function(e){this.asl=0},onChangeASL:function(e){this.provincia=null},elenco:function(){window.open("http://www.alisa.liguria.it/index.php?option=com_docman&view=docman&Itemid=382")},submit:function(){this.area?this.showFeatures():(0,c.default)({title:"Attenzione",type:"info",duration:5e3,offset:70,dangerouslyUseHTMLString:!0,position:"bottom-left",message:'Il parametro "Area" � obbligatorio'})},showFeatures:function(){var e=this,t=this.features.filter(function(t){var n=!e.area||t.properties.idarea===e.area.toString(),i=!e.provincia||t.properties.codProvincia===e.provincia,a=!e.soloPostiDisponibili||"S"===t.properties.disponibilita,o=!e.asl||t.properties.ASL==e.asl,r=!1;if(e.modulo){if(t.properties.idModuli){var s=t.properties.idModuli.split(",");s.forEach(function(t){t==e.modulo&&(r=!0)})}}else r=!0;return n&&i&&a&&r&&o});this.loadLayer(t)},loadLayer:function(e){var t=GV.app.map.getLayerByName("Strutture");if(t&&GV.app.map.removeLayer(t),0===e.length)return void(0,c.default)({title:"Attenzione",type:"info",duration:5e3,offset:70,dangerouslyUseHTMLString:!0,position:"bottom-left",message:"Nessuna struttura soddisfa i parametri<br>di ricerca"});var n=function(e){var t=e.feature.properties,n="";t.cVia&&(n+=" "+t.cVia),t.via&&(n+=" "+t.via),t.nCivico&&(n+=" "+t.nCivico),n+=", ",t.cap&&(n+=t.cap+" "),t.desComune&&(n+=t.desComune+" "),t.telefono&&(n+="<br/>Tel: "+t.telefono+" ");var i=GV.globals.GAS_SCHEDA+"gasweb/gestione/scheda?ID="+t.idul,a="\n              <p><b>"+t.denominazione+"</b></p> \n              <p>"+n+"<br/><br/>\n              Moduli: "+t.moduli+'<br/>\n              <a href="'+i+'" target="_blank">Scheda dettaglio</a>\n        ';return a};GV.app.map.loadLayers([{name:"Strutture",type:"JSON",geomSubType:"POINT",classes:[{name:"CLASSE_BASE",style:{iconUrl:"/geoservices/apps/viewer/static/img/gas/strutture.png",iconSize:[22,27],iconAnchor:[11,27],popupAnchor:[0,-27]}}],visible:!0,data:e,customPopup:n,cluster:{options:{iconCreateFunction:function(e){return L.divIcon({html:e.getChildCount(),className:"cluster",iconSize:L.point(28,28)})},showCoverageOnHover:!1,maxClusterRadius:80}}}]),GV.app.map.fitBounds(GV.app.map.getLayerByName("Strutture").getBounds()),GV.app.map.getZoom()>18&&GV.app.map.setZoom(18)}},mounted:function(){(0,c.default)({title:"Attenzione",type:"info",duration:1e4,offset:70,dangerouslyUseHTMLString:!0,position:"bottom-left",message:'Sulla mappa potrebbero non comparire <br>tutte le strutture.<br>Per ottenere un elenco di tutte le <br>strutture selezionare il bottone <br><b>"Elenco Strutture"</b>'})},created:function(){var e=this,t="/geoservices/REST/gas/combo?ENV="+this.options.env;(0,M.default)(t).then(function(t){e.aree=t.aree.sort(function(e,t){return e.descrizione>t.descrizione?1:t.descrizione>e.descrizione?-1:0}),e.aree.forEach(function(e){e.moduli.unshift({codiceArea:0,codice:0,descrizione:"TUTTI"})}),e.listaAsl=t.asl,e.listaAsl=e.listaAsl.sort(function(e,t){return e.descrizione<t.descrizione?-1:e.descrizione>t.descrizione?1:0}),e.listaAsl.unshift({codice:0,descrizione:"TUTTE LE ASL"})});var n="/geoservices/REST/gas/strutture?ENV="+this.options.env;(0,E.default)(n).then(function(t){e.features=t})}}},,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(13),o=(i(a),n(11)),r=i(o),s=n(14),l=(i(s),n(6)),c=(i(l),n(12)),u=i(c),d=n(342),f=i(d),p=n(1),g=i(p);g.default.use(u.default),g.default.use(r.default),t.default={data:function(){return{results:[],address:[],loading:!1,marker:null}},methods:{remoteMethod:function(e){var t=this;if(e.length<4)return void(this.results=[]);this.loading=!0;var n=1e3;setTimeout(function(){(0,f.default)(e).then(function(e){t.loading=!1,e&&e.length>0?t.results=e.map(function(e){return{label:e.formatted_address,value:e.place_id,location:e.geometry.location}}):t.results=[]}).catch(function(e){t.loading=!1,console.error(e)})},n)},onChange:function(e){var t=this.results.find(function(t){return t.value===e});t?this.marker=GV.app.map.addMarker(t):this.marker&&GV.app.map.removeLayer(this.marker)}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(13),o=(i(a),n(11)),r=i(o),s=n(14),l=(i(s),n(6)),c=(i(l),n(12)),u=i(c),d=n(343),f=i(d),p=n(1),g=i(p);g.default.use(u.default),g.default.use(r.default),t.default={data:function(){return{results:[],address:[],loading:!1,marker:null}},methods:{remoteMethod:function(e){var t=this;if(e.length<4)return void(this.results=[]);this.loading=!0;var n=1e3;setTimeout(function(){(0,f.default)(e).then(function(e){t.loading=!1,console.log(e);var n=e?e.features:null;n&&n.length>0?t.results=n.map(function(e){return{label:e.properties.label,value:e.properties.id,location:{lat:e.geometry.coordinates[1],lng:e.geometry.coordinates[0]}}}):t.results=[]}).catch(function(e){t.loading=!1,console.error(e)})},n)},onChange:function(e){var t=this.results.find(function(t){return t.value===e});t?(t.type="circle",this.marker=GV.app.map.addMarker(t)):this.marker&&GV.app.map.removeLayer(this.marker)}},mounted:function(){}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"gv-header",computed:{style:function(){return"height:"+GV.config.application.layout.header.height}},mounted:function(){this.$el.innerHTML=GV.config.application.layout.header.html}}},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1);i(a);t.default={name:"image-viewer",props:["imgUrl","logo","width","height"],data:function(){return{}},mounted:function(){this.init()},computed:{},methods:{init:function(){var e=this;this.img=new Image,this.img.src=this.imgUrl,this.img.onload=function(){e.loadImage()}},loadImage:function(){var e=this.img;this.newHeight=this.height,document.getElementById("image-map").setAttribute("style","width:"+this.width+"px; height:"+this.newHeight+"px");var t=Math.ceil(Math.log(this.width/e.width>this.newHeight/e.height?e.width/this.width:e.height/this.newHeight)/Math.log(2))+1,n=L.map("image-map",{minZoom:1,maxZoom:t,zoomSnap:.2,crs:L.CRS.Simple}),i=new L.LatLngBounds(n.unproject([0,e.height],t),n.unproject([e.width,0],t));L.imageOverlay(e.src,i).addTo(n),n.setMaxBounds(i),n.fitBounds(i),L.control.zoom().addTo(n),L.controlCredits({image:this.logo,position:"bottomleft"}).addTo(n)}}}},,,,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"gv-inner-html",props:["html"],data:function(){return{}},methods:{},mounted:function(){}}},,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=(i(a),n(309)),r=i(o),s=n(27),l=i(s),c=n(99),u=i(c),d=["dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","contextmenu","focus","blur","preclick","load","unload","viewreset","movestart","move","moveend","dragstart","drag","dragend","zoomstart","zoomend","zoomanim","zoomlevelschange","resize","autopanstart","layeradd","layerremove","baselayerchange","overlayadd","overlayremove","locationfound","locationerror","popupopen","popupclose"];t.default={name:"gv-ll-map",data:function(){return{map:null}},mounted:function(){if(this.setMapSize(),GV.app.map=new r.default,this.map=GV.app.map,this.registerMapEvents(),this.subscribeConfigEvents(),window.addEventListener("resize",this.handleResize),this.handleResize(),GV.config.application.mapOptions&&GV.config.application.mapOptions.click)switch(GV.config.application.mapOptions.click){case"info":l.default.activate();break;case"coordinate":u.default.activate()}GV.log("gv-map: mounted"),GV.eventBus.$emit("gv-map-mounted",GV.app.map)},methods:{setMapSize:function(){var e=document.getElementById("gv-map");GV.config.application.mapOptions&&GV.config.application.mapOptions.width&&(e.style.width=GV.config.application.mapOptions.width+"px"),GV.config.application.mapOptions&&GV.config.application.mapOptions.height&&(e.style.height=GV.config.application.mapOptions.height+"px")},handleResize:function(e){var t=document.documentElement.clientHeight-document.getElementById("gv-map").getBoundingClientRect().top;this.style="height:"+t+"px"},registerMapEvents:function(){d.forEach(function(e){var t="preclick"===e?"map-click":"map-"+e;GV.app.map.on(e,function(e){e.mapType="leaflet",GV.eventBus.$emit(t,e)})})},subscribeConfigEvents:function(){console.log("OPENLAYERSMAP: subscribeConfigEvents"),GV.eventBus.$on("config-add-map",function(e){var t=e.config;GV.app.map.loadLayers(t.layers),t.extent_3857&&GV.app.map.setExtent(t.extent_3857)}),GV.eventBus.$on("config-add-layer",function(e){var t=e.config;GV.app.map.loadLayers([t]),t.extent_3857&&GV.app.map.setExtent(t.extent_3857)}),GV.eventBus.$on("config-remove-layer",function(e){var t=e.config,n=GV.app.map.getLayerByName(t);n&&GV.app.map.removeLayer(n)}),GV.eventBus.$on("config-remove-map",function(e){var t=e.config;t.layers.forEach(function(e){var t=GV.app.map.getLayerByName(e.name);t&&GV.app.map.removeLayer(t)})})}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),o=(i(a),n(6)),r=(i(o),n(8)),s=i(r),l=n(10),c=i(l),u=n(1),d=i(u),f=n(7),p=i(f),g=n(628),h=i(g),m=n(179),v=i(m);d.default.component("gv-base-layer-switcher",h.default),d.default.component("gv-legend-maps",v.default),d.default.component("gv-map-catalog-panel",function(){return new c.default(function(e){n.e(1,function(t){e(n(133))})})}),d.default.use(s.default),t.default={name:"gv-legend",data:function(){return{options:GV.config.application.layout.legend.options,maps:GV.config.maps,show:!0}},mounted:function(){if(GV.log("gv-legend: mounted"),GV.legend=this,this.options.showAddMap){var e=!GV.config.idMap&&!GV.config.agAppMap;this.options.showMapCatalogPanelOnStart&&(e=!0),this.options.dontShowMapCatalogPanelOnStart&&(e=!1),GV.config.loadCatalog({showMapCatalogPanel:e,filterDownloadCatalog:this.options.filterDownloadCatalog})}(this.options.collapsed||window.matchMedia("(max-width: 500px)").matches)&&(this.show=!1),this.hideLegend()},methods:{hideLegend:function(e){this.show?(document.getElementById("gv-legend-title").style.display="block",document.getElementById("gv-legend-title-collapsed").style.display="none",document.getElementById("gv-legend-wrapper").style.display="block",document.getElementById("gv-legend").style.width="260px"):(document.getElementById("gv-legend-title").style.display="none",document.getElementById("gv-legend-title-collapsed").style.display="block",document.getElementById("gv-legend-wrapper").style.display="none",document.getElementById("gv-legend").style.width="26px"),this.show=!this.show},toggleCollapseClass:function(){return this.show?"gv-legend-collapse gv-color-scheme el-icon-arrow-down":"gv-legend-collapse gv-color-scheme el-icon-arrow-up"},addMap:function(){(0,p.default)({elId:"gv-map-catalog-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new d.default({template:"<gv-map-catalog-panel></gv-map-catalog-panel>"})})},downloadMaps:function(){(0,p.default)({elId:"gv-download-totale-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new d.default({template:"<gv-download-totale-panel></gv-download-totale-panel>"})})}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(80),o=(i(a),n(73)),r=i(o),s=n(42),l=(i(s),n(41)),c=i(l),u=n(175),d=(i(u),n(171)),f=i(d),p=n(174),g=(i(p),n(170)),h=i(g),m=n(59),v=(i(m),n(58)),_=i(v),y=n(44),L=(i(y),n(43)),b=i(L),w=n(9),C=(i(w),n(8)),M=i(C),S=n(13),E=(i(S),n(11)),x=i(E),I=n(14),O=(i(I),n(6)),G=(i(O),n(12)),T=i(G),A=n(10),R=i(A),V=n(1),k=i(V),P=n(7),z=i(P);k.default.component("gv-multi-legend-panel",function(){return new R.default(function(e){n.e(20,function(t){e(n(667))})})}),k.default.component("gv-layers-transparency",function(){return new R.default(function(e){n.e(21,function(t){e(n(656))})})}),k.default.component("gv-layer-search-legend",function(){return new R.default(function(e){n.e(7,function(t){e(n(654))})})}),k.default.use(T.default),k.default.use(x.default),k.default.use(M.default),k.default.use(b.default),k.default.use(_.default),k.default.use(h.default),k.default.use(f.default),k.default.use(c.default),k.default.use(r.default),t.default={name:"gv-legend-layers",props:["map","options"],data:function(){return{}},mounted:function(){GV.log("gv-legend-layers: mounted")},methods:{iconUrl:function(e){return e.legend.icon},getClass:function(e){return e.inRange?"gv-list-legend-layer-item":"gv-list-legend-layer-item gv-list-legend-layer-disabled-item"},layerClassName:function(e){var t=e.row;e.rowIndex;return t.inRange?"gv-list-legend-layer-item":"gv-list-legend-layer-item gv-list-legend-layer-disabled-item"},setLayerVisible:function(e){GV.eventBus.$emit("set-layer-visible",{layer:e,checked:e.visible}),this.setLayerTransparency(e)},setLayerTransparency:function(e){var t=e.opacityBase100/100;GV.eventBus.$emit("set-layer-transparency",{layerName:e.name,opacity:t})},layerSearch:function(e){(0,z.default)({elId:"gv-layer-search-legend",containerId:GV.config.containerId,toggleEl:!0,vm:new k.default({template:"<gv-layer-search-legend layerId="+e.id+"></gv-layer-search-legend>"})})},showLegendPanel:function(e){if(e.inRange&&(e.multiClasse||e.flagRemote||e.legend.popUpFlag)){var t,n,i=null;e.legend.popUpUrl&&e.legend.popUpFlag?(i=""+GV.globals.DEFAULT_PROXY+e.legend.popUpUrl,t=window.matchMedia("(max-width: 450px)").matches?300:e.legend.popUpWidth||600,n=window.matchMedia("(max-height: 620px)").matches?400:e.legend.popUpHeight||600):e.multiClasse?(e.flagGeoserver||e.flagRemote)&&(i=""+GV.globals.DEFAULT_PROXY+e.wmsParams.url+"LAYER="+e.name+"&REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&",e.wmsParams.styles&&(i+="STYLES="+e.wmsParams.styles+"&"),t=window.matchMedia("(max-width: 450px)").matches?300:400,n=350):e.flagRemote&&(i=""+GV.globals.DEFAULT_PROXY+e.wmsParams.url+"&LAYER="+e.name+"&SERVICE=WMS&REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/jpeg",e.wmsParams.styles&&(i+="STYLES="+e.wmsParams.styles+"&"),t=window.matchMedia("(max-width: 450px)").matches?300:500,n=350),(0,z.default)({elId:"gv-multi-legend-panel",containerId:GV.config.containerId,vm:new k.default({template:'<gv-multi-legend-panel visible="true" :src="src" :height="height" :width="width" :title="title"></gv-multi-legend-panel>',data:{title:"LEGENDA",src:i,width:t,height:n}})})}}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),o=(i(a),n(6)),r=(i(o),n(8)),s=i(r),l=n(10),c=i(l),u=n(1),d=i(u),f=n(7),p=i(f),g=n(659),h=i(g),m=n(781),v=i(m);d.default.component("gv-legend-layers",h.default),d.default.component("gv-map-info-panel",function(){return new c.default(function(e){n.e(0,function(t){e(n(97))})})}),d.default.component("gv-map-catalog-panel",function(){return new c.default(function(e){n.e(1,function(t){e(n(133))})})}),d.default.component("gv-map-download",function(){return new c.default(function(e){n.e(10,function(t){e(n(633))})})}),d.default.use(v.default),d.default.use(s.default),t.default={name:"gv-legend-maps",props:["options"],data:function(){return{maps:GV.config.maps}},mounted:function(){var e=this;GV.log("gv-legend-maps: mounted"),this.options.showDownloadPanelOnLoad&&GV.config.idMap&&GV.eventBus.$on("gv-config-init",function(t){e.openDownloadPanel(GV.config.idMap)})},methods:{showMapLayers:function(e){return e.showLayersInLegend},toggleLayers:function(e){e.showLayersInLegend=!e.showLayersInLegend},getToggleLayersClass:function(e){return e.showLayersInLegend?"gv-inverted-color-scheme gv-legend-map-tools-button el-icon-arrow-up":"gv-inverted-color-scheme gv-legend-map-tools-button el-icon-arrow-down"},isDownloadable:function(e){return!this.options.noDownloadButton&&(!("pub"!==GV.globals.RL_CATALOG||!e.flagDownload)||!("int"!==GV.globals.RL_CATALOG||!e.flagDownloadExtranet&&!e.flagDownload))},checkInfoMap:function(e){return this.options.showInfoMap&&GV.config.getMapConfig(e.id).metaData},showMapInfoPanel:function(e){var t=GV.config.getMapConfig(e.id).metaData,n=this.isDownloadable(e);(0,p.default)({elId:"gv-map-info-panel",containerId:GV.config.containerId,clear:!0,vm:new d.default({template:'<gv-map-info-panel visible="true" :metaData="metaData" addToMapButton="true" downloadable="'+n+'"></gv-map-info-panel>',data:{metaData:t}})})},remove:function(e){GV.config.removeMap(e.id)},download:function(e){this.openDownloadPanel(e.id)},openDownloadPanel:function(e){if(document.getElementById("gv-map-download")){var t=document.getElementById("gv-map-download");t.parentNode.removeChild(t)}var n="closeWindow"===this.options.downloadPanelCloseMode;(0,p.default)({elId:"gv-map-download",containerId:GV.config.containerId,toggleEl:!1,vm:new d.default({template:'<gv-map-download idMap="'+e+'" closeWindow="'+n+'"></gv-map-download>'})})},layerTransparency:function(e){(0,p.default)({elId:"gv-layers-transparency",containerId:GV.config.containerId,toggleEl:!1,vm:new d.default({template:'<gv-layers-transparency idMap="'+e.id+'"></gv-layers-transparency>'})})}}}},,,,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=(i(a),n(316)),r=i(o),s=n(27),l=i(s),c=n(99),u=i(c),d=["click","dblclick","singleclick","change:layerGroup","change:size","change:target","change:view","error","moveend","movestart","pointerdrag","pointermove","postcompose","postrender","precompose","propertychange","rendercomplete"];t.default={name:"gv-ol-map",data:function(){return{map:null}},mounted:function(){if(this.setMapSize(),GV.app.map=r.default.initialize(GV.config.application.mapOptions),this.map=GV.app.map,this.registerMapEvents(),this.subscribeConfigEvents(),window.addEventListener("resize",this.handleResize),
this.handleResize(),GV.config.application.mapOptions&&GV.config.application.mapOptions.click)switch(GV.config.application.mapOptions.click){case"info":l.default.activate();break;case"coordinate":u.default.activate()}GV.log("gv-map: mounted"),GV.eventBus.$emit("gv-map-mounted",GV.app.map)},methods:{setMapSize:function(){var e=document.getElementById("gv-map");GV.config.application.mapOptions&&GV.config.application.mapOptions.width&&(e.style.width=GV.config.application.mapOptions.width+"px"),GV.config.application.mapOptions&&GV.config.application.mapOptions.height&&(e.style.height=GV.config.application.mapOptions.height+"px")},handleResize:function(e){var t=document.documentElement.clientHeight-document.getElementById("gv-map").getBoundingClientRect().top;this.style="height:"+t+"px"},registerMapEvents:function(){d.forEach(function(e){var t="map-"+e;GV.app.map.map.on(e,function(e){e.mapType="openlayers",GV.eventBus.$emit(t,e)})})},subscribeConfigEvents:function(){GV.eventBus.$on("config-add-map",function(e){var t=e.config;GV.app.map.loadLayers(t.layers),t.extent_3857&&GV.app.map.setExtent(t.extent_3857)}),GV.eventBus.$on("config-add-layer",function(e){var t=e.config;GV.app.map.loadLayers([t]),t.extent_3857&&GV.app.map.setExtent(t.extent_3857)}),GV.eventBus.$on("config-remove-layer",function(e){var t=e.config,n=GV.app.map.getLayerByName(t);n&&GV.app.map.removeLayer(n)}),GV.eventBus.$on("config-remove-map",function(e){var t=e.config;t.layers.forEach(function(e){var t=GV.app.map.getLayerByName(e.name);t&&GV.app.map.removeLayer(t)})})}}}},,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(587),o=(i(a),n(470)),r=i(o),s=n(42),l=(i(s),n(41)),c=i(l),u=n(13),d=(i(u),n(11)),f=i(d),p=n(14),g=(i(p),n(6)),h=(i(g),n(12)),m=i(h),v=n(1),_=i(v),y=n(4),L=i(y);_.default.use(m.default),_.default.use(f.default),_.default.use(c.default),_.default.use(r.default),t.default={data:function(){return{idMap:null,mapConfig:null,baseLayerGG:null,baseLayerAA:null,tipi:[],indicatoriGiorno:[],indicatoriAnno:[],anni:[],tipo:null,indicatore:null,data:null,giorno:null,show:!0,buttonDisabled:!0,showLegend:!1,legendUrl:null}},watch:{giorno:function(){this.data=this.giorno},data:function(){this.data||(this.showLegend=!1),this.data&&this.indicatore&&this.loadLayer()}},methods:{onChangeTipo:function(e){this.tipo=e,this.indicatore=null,this.data=null,this.giorno=null,this.showLegend=!1},onChangeIndicatore:function(e){this.indicatore=e,this.data&&this.loadLayer()},loadLayer:function(){GV.config.removeMap(this.idMap),this.mapConfig.layers=[],this.mapConfig.layers=[this.getLayer()],GV.config.addMapConfig(this.mapConfig),this.legendUrl="/geoservices/REST/rqa/legenda/"+this.indicatore,this.showLegend=!0},getLayer:function(){var e=this,t="G"===this.tipo?this.baseLayerGG:this.baseLayerAA;if("G"===this.tipo){t.wmsParams.styles="RQA_"+this.indicatore,t.wmsParams.cql_filter="cod_indicatore='"+this.indicatore+"' AND giorno='"+this.data+"'";var n=this.indicatoriGiorno.find(function(t){return t.id===e.indicatore}).nome;t.legend.label=n+" ("+this.data+")"}else{t.wmsParams.styles="RQA_"+this.indicatore,t.wmsParams.cql_filter="cod_indicatore='"+this.indicatore+"' AND anno="+this.data;var i=this.indicatoriAnno.find(function(t){return t.id===e.indicatore}).nome;t.legend.label=i+" ("+this.data+")"}return t},toggleCollapseClass:function(){return this.show?"gv-panel-collapse gv-color-scheme el-icon-arrow-up":"gv-panel-collapse gv-color-scheme el-icon-arrow-down"},hidePanel:function(){this.show?document.getElementById("rqa-wrapper").style.display="none":document.getElementById("rqa-wrapper").style.display="block",this.show=!this.show},setData:function(e){this.tipi=e.tipi,this.indicatoriGiorno=e.indicatoriGiorno,this.indicatoriAnno=e.indicatoriAnno,this.anni=e.anni,this.mapConfig=e.mapConfig,this.idMap=e.mapConfig.id,this.baseLayerGG=e.mapConfig.layers.filter(function(t){return t.id===e.idLayerGG})[0],this.baseLayerAA=e.mapConfig.layers.filter(function(t){return t.id===e.idLayerAA})[0]},download:function(){this.downloadURI("https://geoservizi.regione.liguria.it/dtuff/download_statico/2219/rqa-dati.zip")},downloadURI:function(e){var t=document.createElement("a");t.setAttribute("target","_blank"),document.body.appendChild(t),t.href=e,t.click()}},computed:{showIndicatoriGiorno:function(){return"G"==this.tipo},showIndicatoriAnno:function(){return"A"==this.tipo}},mounted:function(){var e=this;L.default.get("/geoservices/REST/rqa/app-config/").then(function(e){return e.data.data}).then(function(t){e.setData(t)})}}},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(13),o=(i(a),n(11)),r=i(o),s=n(14),l=(i(s),n(6)),c=(i(l),n(12)),u=i(c),d=n(1),f=i(d);f.default.use(u.default),f.default.use(r.default),t.default={data:function(){var e=[{value:8,label:"1:2.300.000"},{value:9,label:"1:1.150.000"},{value:10,label:"1:580.000"},{value:11,label:"1:290.000"},{value:12,label:"1:144.000"},{value:13,label:"1:72.000"},{value:14,label:"1:36.000"},{value:15,label:"1:18.000"},{value:16,label:"1:9.000"},{value:17,label:"1:4.500"},{value:18,label:"1:2.200"},{value:19,label:"1:1.100"},{value:20,label:"1:560"}];return{options:e,value:9}},methods:{onChange:function(e){GV.app.map.setZoom(e)}},mounted:function(){var e=this;GV.eventBus.$on("map-zoom",function(t){e.value=Math.round(t)})}}},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(59),s=(i(r),n(58)),l=i(s),c=n(44),u=(i(c),n(43)),d=i(u),f=n(9),p=(i(f),n(8)),g=i(p),h=n(13),m=(i(h),n(11)),v=i(m),_=n(14),y=(i(_),n(6)),L=(i(y),n(12)),b=i(L),w=n(1),C=i(w),M=n(179),S=i(M),E=n(7),x=i(E);C.default.component("gv-legend-maps",S.default),C.default.use(b.default),C.default.use(v.default),C.default.use(g.default),C.default.use(d.default),C.default.use(l.default),C.default.component("gv-scuoladigitale-ricerca",function(){return new o.default(function(e){n.e(4,function(t){e(n(676))})})}),t.default={name:"gv-scuoladigitale-legend",data:function(){return{options:GV.config.getToolOptions("gv-scuoladigitale-legend"),maps:GV.config.maps,show:!0,tema:0,title:"LEGENDA ICONE"}},mounted:function(){GV.log("gv-scuoladigitale-legend: mounted"),GV.legend=this,this.changeMap(0),this.show=!1,2===this.options.version&&(this.hideLegend(),(0,x.default)({elId:"gv-scuoladigitale-ricerca",containerId:GV.config.containerId,toggleEl:!0,vm:new C.default({template:"<gv-scuoladigitale-ricerca></gv-scuoladigitale-ricerca>"})}))},methods:{changeMap:function(e){GV.config.maps[0]&&GV.config.removeMap(GV.config.maps[0].id),GV.config.addMapConfig(this.options.maps[e])},showSearch:function(){(0,x.default)({elId:"gv-scuoladigitale-ricerca",containerId:GV.config.containerId,toggleEl:!0,vm:new C.default({template:"<gv-scuoladigitale-ricerca></gv-scuoladigitale-ricerca>"})})},hideLegend:function(e){this.show?(document.getElementById("gv-scuoladigitale-legend-wrapper").style.display="block",document.getElementById("gv-scuoladigitale-legend").style.width="260px"):(document.getElementById("gv-scuoladigitale-legend-wrapper").style.display="none",document.getElementById("gv-scuoladigitale-legend").style.width="150px"),this.show=!this.show},toggleCollapseClass:function(){return console.log("legend",this.show),this.show?"gv-scuoladigitale-legend-collapse gv-color-scheme el-icon-arrow-down":"gv-scuoladigitale-legend-collapse gv-color-scheme el-icon-arrow-up"}}}},,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(13),o=(i(a),n(11)),r=i(o),s=n(14),l=(i(s),n(6)),c=(i(l),n(12)),u=i(c),d=n(1),f=i(d);f.default.use(u.default),f.default.use(r.default),t.default={data:function(){return{results:[],address:[],recordsCache:{},layers:null,cachedLayers:[],propertyName:null,loading:!1,marker:null,placeHolder:"Ricerca..."}},mounted:function(){this.layers=GV.config.getToolOptions("gv-search").layers,this.propertyName=GV.config.getToolOptions("gv-search").propertyName,this.additionalLabel=GV.config.getToolOptions("gv-search").additionalLabel,this.placeHolder=GV.config.getToolOptions("gv-search").placeHolder||"Ricerca..."},methods:{search:function(e){this.results=[],e.length<3||(this.results=this.filterData(e))},filterData:function(e){var t=this,n=[];return e=e.replace(/[*+?^${}()|[\]\\]/g,""),""===e?[]:(this.layers.forEach(function(i){GV.app.map.eachLayer(function(a){a.name===i&&a instanceof L.LayerGroup&&a.eachLayer(function(i){var a=i.getLatLng();a.layer=i;var o=i.feature.properties[t.propertyName];if(new RegExp(e,"i").test(o)){var r=t.additionalLabel?i.feature.properties[t.additionalLabel]:null,s=t.additionalLabel?o+" ("+r+")":o;n.push({label:s,value:s,location:a})}})})}),n)},onChange:function(e){var t=this.results.find(function(t){return t.value===e});t?(t.type="circle",t.zoomLevel=16,this.marker=GV.app.map.addMarker(t)):this.marker&&GV.app.map.removeLayer(this.marker)}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(13),o=(i(a),n(11)),r=i(o),s=n(14),l=(i(s),n(12)),c=i(l),u=n(39),d=(i(u),n(36)),f=i(d),p=n(32),g=(i(p),n(30)),h=i(g),m=n(9),v=(i(m),n(6)),_=(i(v),n(8)),y=i(_),L=n(1),b=i(L),w=n(5),C=i(w),M=n(48),S=i(M),E=n(18),x=i(E),I=n(22),O=i(I),G=n(17),T=i(G);b.default.use(y.default),b.default.use(h.default),b.default.use(f.default),b.default.use(c.default),b.default.use(r.default),T.default.use(O.default);var A=n(63);b.default.use(A),t.default={name:"gv-map-selezione-fogli",props:{idMap:String,selFogli:String,field:String},data:function(){return{title:"SELEZIONE FOGLI",fogli:[],config:{},storageKey:"selFogli"}},computed:{},watch:{fogli:function(e){this.syncFogli(e)}},mounted:function(){var e=this;GV.eventBus.$on("gv-config-init",function(){e.config=GV.config.getMapConfig(e.idMap).downloadConfig,e.addLayerSquadri(),e.show=!0})},methods:{syncFogli:function(e){var t=GV.app.map.getLayerByName("SelezioneSquadri");t&&(t.eachLayer(function(e){e.setStyle({fillOpacity:0,weight:1})}),t.eachLayer(function(t){e.forEach(function(e){var n=t.feature.properties.COD_SQUADRO||t.feature.properties.cod_squadro;n===e&&t.setStyle({fillOpacity:.6,weight:2})})}))},addLayerSquadri:function(){var e=this,t=C.default.DEFAULT_PROXY+"https://geoservizi.regione.liguria.it/geoserver/wfs?service=WFS&version=2.0.0&request=GetFeature&srsName=EPSG:4326&outputFormat=application%2Fjson&typeName=",n=""+t+this.config.livelloSquadri;(0,S.default)(n).then(function(t){e.loadDataSquadri(t.data)})},loadDataSquadri:function(e){var t=this;GV.app.map.getLayerByName("SelezioneSquadri")&&GV.app.map.removeLayer(GV.app.map.getLayerByName("SelezioneSquadri"));var n=e.features.filter(function(e){var n=t.config.fogli.filter(function(t){var n=e.properties.COD_SQUADRO||e.properties.cod_squadro;return t.codice===n});return n.length>0});e.features=n,this.layerFogli=e,this.loadLayer()},submit:function(){this.postMessage("conferma")},cancel:function(){this.postMessage("annulla")},postMessage:function(e){var t={fogliSelezionati:this.fogli.join(","),field:parseInt(this.field),button:e};window.parent.postMessage(t,"*")},loadLayer:function(){var e=this;GV.app.map.loadLayers([{name:"SelezioneSquadri",type:"JSON",style:{color:"#ffcc00",fillOpacity:0,weight:1,opacity:1},visible:!0,data:this.layerFogli,onEachFeature:function(t,n){n.on("click",function(n){var i=t.properties.COD_SQUADRO||t.properties.cod_squadro;e.fogli.indexOf(i)>-1?e.fogli=e.fogli.filter(function(e){return e!==i}):e.fogli.push(i)})}}]),GV.config.activeControl.deactivate(),this.selFogli&&(this.fogli=this.selFogli.split(",")),(0,x.default)("Selezionare un foglio sulla mappa o dalla lista","info")},collapse:function(e){this.show?document.getElementById("gv-map-selezione-fogli-body").style.display="none":document.getElementById("gv-map-selezione-fogli-body").style.display="block",this.show=!this.show}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1);i(a);t.default={name:"gv-title",props:["divId","title","fullTitle","hide","noClose","collapsible","width","collapsedWidth"],data:function(){return{collapsed:!1}},methods:{closePanel:function(){var e=document.getElementById(this.divId);e&&(this.hide?e.style.display="none":e.parentNode.removeChild(e),GV.eventBus.$emit("title-close-panel",{divId:this.divId}))},collapse:function(){this.collapsed?(document.getElementById(this.collapsible).style.display="block",this.$el.style.width=null):(document.getElementById(this.collapsible).style.display="none",this.collapsedWidth&&(this.$el.style.width=this.collapsedWidth)),this.collapsed=!this.collapsed},toggleCollapseClass:function(){return this.collapsed?"gv-title-collapse gv-color-scheme el-icon-arrow-down":"gv-title-collapse gv-color-scheme el-icon-arrow-up"}},mounted:function(){this.$el.id=this.divId+"-title"}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(9),s=(i(r),n(6)),l=(i(s),n(8)),c=i(l),u=n(7),d=i(u),f=n(1),p=i(f);p.default.use(c.default),p.default.component("gv-map-catalog-panel",function(){return new o.default(function(e){n.e(1,function(t){e(n(133))})})});var g="gv-add-map-button";t.default={name:g,data:function(){var e=GV.config.getToolOptions(g);return{name:g,active:!1,options:e,cssClass:"gv-add-map gv-button fa fa-plus-square-o",cssActiveClass:"gv-button-selected"}},methods:{onClick:function(){(0,d.default)({elId:"gv-map-catalog-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new p.default({template:"<gv-map-catalog-panel></gv-map-catalog-panel>"})})},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="gv-back-button";t.default={data:function(){var e=GV.config.getToolOptions(n);return{name:n,active:!1,options:e,action:e.action,url:e.url,confirm:e.confirm,cssClass:"gv-back gv-button fa fa-arrow-left",cssActiveClass:"gv-button-selected"}},methods:{onClick:function(){if(this.confirm){var e=confirm("Sei sicuro?");1==e&&this.back()}else this.back()},back:function(){"close"===this.action?window.close():this.url?window.location=this.url:history.back()},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(9),s=(i(r),n(6)),l=(i(s),n(8)),c=i(l),u=n(7),d=i(u),f=n(1),p=i(f);p.default.use(c.default),p.default.component("gv-cem-elaborazioni",function(){return new o.default(function(e){n.e(19,function(t){e(n(629))})})});var g="gv-cem-elaborazioni-button";t.default={name:g,data:function(){var e=GV.config.getToolOptions(g);return{active:!1,options:e,cssClass:"gv-cem-elaborazioni gv-button fa fa-magnet",cssActiveClass:"gv-button-selected"}},methods:{onClick:function(){(0,d.default)({elId:"gv-cem-elaborazioni",containerId:GV.config.containerId,toggleEl:!0,vm:new p.default({template:"<gv-cem-elaborazioni></gv-cem-elaborazioni>"})})},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){(0,d.default)({elId:"gv-cem-elaborazioni",containerId:GV.config.containerId,toggleEl:!0,vm:new p.default({template:"<gv-cem-elaborazioni></gv-cem-elaborazioni>"})})}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(60),o=i(a),r=n(99),s=i(r),l="gv-coordinate-button";t.default={name:l,data:function(){var e=GV.config.getToolOptions(l);return{name:l,active:!1,control:s.default,options:e,cssClass:"gv-button fa fa-hand-point-down",cssActiveClass:"gv-button-selected"}},mixins:[o.default],methods:{onClick:function(){this.switchActiveButton()},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(9),s=(i(r),n(6)),l=(i(s),n(8)),c=i(l),u=n(7),d=i(u),f=n(1),p=i(f);p.default.use(c.default),p.default.component("gv-download-totale-panel",function(){return new o.default(function(e){n.e(13,function(t){e(n(635))})})});var g="gv-download-totale-button";t.default={name:g,data:function(){var e=GV.config.getToolOptions(g);return{active:!1,options:e,cssClass:"gv-download-totale-button gv-button el-icon-download",cssActiveClass:"gv-button-selected"}},methods:{onClick:function(){(0,d.default)({elId:"gv-download-totale-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new p.default({template:"<gv-download-totale-panel></gv-download-totale-panel>"})})},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(60),o=i(a),r=n(303),s=i(r),l="gv-draw-button";t.default={name:l,data:function(){var e=GV.config.getToolOptions(l);return{name:l,active:!1,control:s.default,options:e,title:"Acquisizione Geometrie",cssClass:"gv-button ms ms-draw",cssActiveClass:"gv-button-selected"}},mixins:[o.default],methods:{onClick:function(){this.switchActiveButton()},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(7),s=i(r),l=n(1),c=i(l);c.default.component("gv-fototeca-carrello-panel",function(){return new o.default(function(e){n.e(2,function(t){e(n(177))})})});var u="gv-fototeca-carrello-button";t.default={name:u,data:function(){var e=GV.config.getToolOptions(u);return{name:u,active:!1,options:e,cssClass:"gv-button fa fa-shopping-cart",cssActiveClass:"gv-button-selected"}},methods:{onClick:function(){(0,s.default)({elId:"gv-fototeca-carrello-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new c.default({template:"<gv-fototeca-carrello-panel></gv-fototeca-carrello-panel>"})})},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(7),s=i(r),l=n(1),c=i(l);c.default.component("gv-fototeca-scheda-volo-panel",function(){return new o.default(function(e){n.e(3,function(t){e(n(178))})})});var u="gv-fototeca-scheda-volo-button";t.default={name:u,data:function(){var e=GV.config.getToolOptions(u);return{name:u,active:!1,options:e,cssClass:"gv-button fa fa-info-circle",cssActiveClass:"gv-button-selected"}},methods:{onClick:function(){GV.globals.FOTOTECA_SEL_VOLO&&(0,s.default)({elId:"gv-fototeca-scheda-volo-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new c.default({template:"<gv-fototeca-scheda-volo-panel></gv-fototeca-scheda-volo-panel>"})})},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(60),o=i(a),r=n(304),s=i(r),l="gv-fototeca-selezione-territoriale-button";t.default={name:l,data:function(){var e=GV.config.getToolOptions(l);return{name:l,active:!1,control:s.default,options:e,cssClass:"gv-button fa fa-edit",cssActiveClass:"gv-button-selected"}},mixins:[o.default],methods:{onClick:function(){this.switchActiveButton()},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){var e=this;GV.eventBus.$on("gv-fototeca-selezione-territoriale-switch",function(t){e.switchActiveButton()})}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(9),s=(i(r),n(6)),l=(i(s),n(8)),c=i(l),u=n(7),d=i(u),f=n(1),p=i(f);p.default.use(c.default),p.default.component("gv-genio-localizza",function(){return new o.default(function(e){n.e(12,function(t){e(n(641))})})});var g="gv-genio-localizza-button";t.default={name:g,data:function(){var e=GV.config.getToolOptions(g);return{active:!1,options:e,cssClass:"gv-genio-localizza-button gv-button ms ms-select-hand",cssActiveClass:"gv-button-selected"}},methods:{onClick:function(){(0,d.default)({elId:"gv-genio-localizza",containerId:GV.config.containerId,toggleEl:!0,vm:new p.default({template:"<gv-genio-localizza></gv-genio-localizza>"})})},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(7),s=i(r),l=n(1),c=i(l);c.default.component("gv-genio-pratiche-collegate-panel",function(){return new o.default(function(e){n.e(16,function(t){e(n(642))})})});var u="gv-genio-pratiche-collegate-button";t.default={name:u,data:function(){var e=GV.config.getToolOptions(u);return{name:u,active:!1,options:e,cssClass:"gv-button fa fa-link",cssActiveClass:"gv-button-selected"}},methods:{onClick:function(){(0,s.default)({elId:"gv-genio-pratiche-collegate-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new c.default({template:"<gv-genio-pratiche-collegate-panel></gv-genio-pratiche-collegate-panel>"})})},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(60),o=i(a),r=n(305),s=i(r),l="gv-genio-seleziona-particelle-button";t.default={name:l,data:function(){var e=GV.config.getToolOptions(l);return{name:l,active:!1,control:s.default,options:e,cssClass:"gv-button fa fa-hand-point-down",cssActiveClass:"gv-button-selected"}},mixins:[o.default],methods:{onClick:function(){this.switchActiveButton()},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(60),o=i(a),r=n(27),s=i(r),l="gv-info-button";t.default={name:l,data:function(){var e=GV.config.getToolOptions(l);return{name:l,active:!1,control:s.default,options:e,cssClass:"gv-button fa fa-info",cssActiveClass:"gv-button-selected"}},mixins:[o.default],methods:{onClick:function(){this.switchActiveButton()},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){this.active=this.options.active}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(9),s=(i(r),n(6)),l=(i(s),n(8)),c=i(l),u=n(7),d=i(u),f=n(1),p=i(f);p.default.use(c.default),p.default.component("gv-layer-search",function(){return new o.default(function(e){n.e(8,function(t){e(n(653))})})});var g="gv-layer-search-button";t.default={name:g,data:function(){var e=GV.config.getToolOptions(g);return{active:!1,options:e,cssClass:"gv-layer-search-button gv-button fa fa-search",cssActiveClass:"gv-button-selected"}},methods:{onClick:function(){(0,d.default)({elId:"gv-layer-search",containerId:GV.config.containerId,toggleEl:!0,vm:new p.default({template:"<gv-layer-search></gv-layer-search>"})})},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(9),s=(i(r),n(6)),l=(i(s),n(8)),c=i(l),u=n(7),d=i(u),f=n(1),p=i(f);p.default.use(c.default),p.default.component("gv-layer-search-topo",function(){return new o.default(function(e){n.e(6,function(t){e(n(655))})})});var g="gv-layer-search-topo-button";t.default={name:g,data:function(){var e=GV.config.getToolOptions(g);return{active:!1,options:e,cssClass:"gv-layer-search-topo-button gv-button fa fa-search",cssActiveClass:"gv-button-selected"}},methods:{onClick:function(){(0,d.default)({elId:"gv-layer-search-topo",containerId:GV.config.containerId,toggleEl:!0,vm:new p.default({template:"<gv-layer-search-topo></gv-layer-search-topo>"})})},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(60),o=i(a),r=n(306),s=i(r),l="gv-measure-button";t.default={name:l,data:function(){var e=GV.config.getToolOptions(l);return{name:l,active:!1,control:s.default,options:e,title:"Misurazioni",cssClass:"gv-button fa fa-edit",cssActiveClass:"gv-button-selected"}},mixins:[o.default],methods:{onClick:function(){this.switchActiveButton()},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(9),s=(i(r),n(6)),l=(i(s),n(8)),c=i(l),u=n(7),d=i(u),f=n(1),p=i(f);p.default.use(c.default),p.default.component("gv-print-panel",function(){return new o.default(function(e){n.e(11,function(t){e(n(669))})})});var g="gv-print-button";t.default={name:g,data:function(){var e=GV.config.getToolOptions(g);return{active:!1,options:e,cssClass:"gv-print-button gv-button fa fa-print",cssActiveClass:"gv-button-selected"}},methods:{onClick:function(){(0,d.default)({elId:"gv-print-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new p.default({template:"<gv-print-panel></gv-print-panel>"})})},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(9),s=(i(r),n(6)),l=(i(s),n(8)),c=i(l),u=n(7),d=i(u),f=n(1),p=i(f);p.default.use(c.default),p.default.component("gv-ricerca-particella",function(){return new o.default(function(e){n.e(9,function(t){e(n(670))})})});var g="gv-ricerca-particella-button";t.default={name:g,data:function(){var e=GV.config.getToolOptions(g);return{active:!1,options:e,cssClass:"gv-ricerca-particella-button gv-button fa fa-building",cssActiveClass:"gv-button-selected"}},methods:{onClick:function(){(0,d.default)({elId:"gv-ricerca-particella",containerId:GV.config.containerId,toggleEl:!0,vm:new p.default({template:"<gv-ricerca-particella></gv-ricerca-particella>"})})},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(9),s=(i(r),n(6)),l=(i(s),n(8)),c=i(l),u=n(7),d=i(u),f=n(1),p=i(f);p.default.use(c.default),p.default.component("gv-ricerca-catastale",function(){return new o.default(function(e){n.e(5,function(t){e(n(672))})})});var g="gv-ricerca-catastale-button";t.default={name:g,data:function(){var e=GV.config.getToolOptions(g);return{active:!1,options:e,cssClass:"gv-ricerca-catastale-button gv-button fa fa-building",cssActiveClass:"gv-button-selected"}},methods:{onClick:function(){(0,d.default)({elId:"gv-ricerca-catastale",containerId:GV.config.containerId,toggleEl:!0,vm:new p.default({template:"<gv-ricerca-catastale></gv-ricerca-catastale>"})})},setClass:function(){return this.active?this.cssClass+" "+this.cssActiveClass:this.cssClass}},mounted:function(){}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="gv-switch3D-button";t.default={name:n,data:function(){var e=GV.config.getToolOptions(n);return{name:n,active:!1,options:e,enable3d:null,label:null}},methods:{onClick:function(){this.enable3d=!this.enable3d,this.setLabel(),GV.app.map.ol3d.setEnabled(this.enable3d)},setLabel:function(){this.enable3d?this.label="2D":this.label="3D"}},mounted:function(){this.enable3d=GV.config.application.mapOptions.enable3d,this.setLabel()}}},function(e,t){"use strict";!function(){function e(e,i){Cesium.when(e,function(e){Cesium.defined(e)&&e.ready&&(e.levelZeroMaximumGeometricError=Cesium.TerrainProvider.getEstimatedLevelZeroGeometricErrorForAHeightmap(e.tilingScheme.ellipsoid,e.heightMapWidth,e.tilingScheme.getNumberOfXTilesAtLevel(0)),Cesium.defined(e.URLtemplateImage)&&(e.getHeightmapTerrainDataImage=function(a,o,s){var c;if(!isNaN(a+o+s)){var u=t(e.URLtemplateImage(a,o,s),a,o,s,i),d={highest:e.highest,lowest:e.lowest,offset:e.offset},f=n(a,o,s,i),p=r(u);Cesium.defined(p)&&(c=Cesium.when(p,function(t){return l.imageToHeightmapTerrainData(t,d,{width:e.heightMapWidth,height:e.heightMapHeight},e.waterMask,f,e.hasStyledImage)}).otherwise(function(){return new Cesium.HeightmapTerrainData({buffer:new Uint16Array(e.heightMapWidth*e.heightMapHeight),width:e.heightMapWidth,height:e.heightMapHeight,childTileMask:f,waterMask:new Uint8Array(e.heightMapWidth*e.heightMapHeight),structure:e.formatImage.terrainDataStructure})}))}return c}),Cesium.defined(e.URLtemplateArray)&&(e.getHeightmapTerrainDataArray=function(a,r,s){var c;if(!isNaN(a+r+s)){var u=t(e.URLtemplateArray(a,r,s),a,r,s,i),d={highest:e.highest,lowest:e.lowest,offset:e.offset},f=n(a,r,s,i),p=o(u);Cesium.defined(p)&&(c=Cesium.when(p,function(t){return l.arrayToHeightmapTerrainData(t,d,{width:e.heightMapWidth,height:e.heightMapHeight},e.formatArray,e.waterMask,f)}).otherwise(function(){return Cesium.defined(e.getHeightmapTerrainDataImage)?e.getHeightmapTerrainDataImage(a,r,s):new Cesium.HeightmapTerrainData({buffer:new Uint16Array(e.heightMapWidth*e.heightMapHeight),width:e.heightMapWidth,height:e.heightMapHeight,childTileMask:f,waterMask:new Uint8Array(e.heightMapWidth*e.heightMapHeight),structure:e.formatImage.terrainDataStructure})}))}return c}),i.getLevelMaximumGeometricError=function(t){return e.levelZeroMaximumGeometricError/(1<<t)},i.requestTileGeometry=function(t,n,i){var a;return Cesium.defined(e.getHeightmapTerrainDataArray)?a=e.getHeightmapTerrainDataArray(t,n,i):Cesium.defined(e.getHeightmapTerrainDataImage)&&(a=e.getHeightmapTerrainDataImage(t,n,i)),a},Cesium.defineProperties(i,{tilingScheme:{get:function(){return e.tilingScheme}},ready:{get:function(){return e.ready}},hasWaterMask:{get:function(){return e.waterMask}},heightMapHeight:{get:function(){return e.heightMapHeight}},heightMapWidth:{get:function(){return e.heightMapWidth}},getTileDataAvailable:{get:function(){return e.getTileDataAvailable}}})),i._readyPromise.resolve(e.ready)})}function t(e,t,n,i,a){var o=a.tilingScheme.tileXYToNativeRectangle(t,n,i),r=(o.east-o.west)/(a.heightMapWidth-1),s=(o.north-o.south)/(a.heightMapHeight-1);o.west-=.5*r,o.east+=.5*r,o.south-=.5*s,o.north+=.5*s;var l=a.tilingScheme.getNumberOfYTilesAtLevel(i),c=l-n-1;return e.replace("{south}",o.south).replace("{north}",o.north).replace("{west}",o.west).replace("{east}",o.east).replace("{x}",t).replace("{y}",n).replace("{tmsY}",c)}function n(e,t,n,i){var a=0,o=n+1;return a|=i.getTileDataAvailable(2*e,2*t,o)?1:0,a|=i.getTileDataAvailable(2*e+1,2*t,o)?2:0,a|=i.getTileDataAvailable(2*e,2*t+1,o)?4:0,a|=i.getTileDataAvailable(2*e+1,2*t+1,o)?8:0}var i={},a=void 0===Cesium.loadXML?Cesium.Resource.fetchXML:Cesium.loadXML,o=void 0===Cesium.loadArrayBuffer?Cesium.Resource.fetchArrayBuffer:Cesium.loadArrayBuffer,r=void 0===Cesium.loadImage?Cesium.Resource.fetchImage:Cesium.loadImage,s=function(e,t){
var n,i=Math.max(e.west,t.west),a=Math.min(e.east,t.east),o=Math.max(e.south,t.south),r=Math.min(e.north,t.north);return n=a<=i||o>=r?void 0:new Cesium.Rectangle(i,o,a,r)};i.CRS=[{name:"CRS:84",ellipsoid:Cesium.Ellipsoid.WGS84,firstAxeIsLatitude:!1,tilingScheme:Cesium.GeographicTilingScheme,supportedCRS:"urn:ogc:def:crs:OGC:2:84"},{name:"EPSG:4326",ellipsoid:Cesium.Ellipsoid.WGS84,firstAxeIsLatitude:!0,tilingScheme:Cesium.GeographicTilingScheme,SupportedCRS:"urn:ogc:def:crs:EPSG::4326"},{name:"EPSG:3857",ellipsoid:Cesium.Ellipsoid.WGS84,firstAxeIsLatitude:!1,tilingScheme:Cesium.WebMercatorTilingScheme,SupportedCRS:"urn:ogc:def:crs:EPSG::3857"},{name:"OSGEO:41001",ellipsoid:Cesium.Ellipsoid.WGS84,firstAxeIsLatitude:!1,tilingScheme:Cesium.WebMercatorTilingScheme,SupportedCRS:"urn:ogc:def:crs:EPSG::3857"}],i.FormatImage=[{format:"image/png",extension:"png"},{format:"image/jpeg",extension:"jpg"},{format:"image/jpeg",extension:"jpeg"},{format:"image/gif",extension:"gif"},{format:"image/png; mode=8bit",extension:"png"}],i.FormatArray=[{format:"image/bil",postProcessArray:function(e,t,n,i,a){var o,r=new DataView(e),s=new ArrayBuffer(t.height*t.width*2),l=new DataView(s);if(s.byteLength===e.byteLength){for(var c,u=0,d=0,f=0;f<s.byteLength;f+=2)if(c=r.getInt16(f,!1)-a,c>i&&c<n)l.setInt16(f,c,!0),d+=c,u++;else{var p=0===u?1:d/u;l.setInt16(f,p,!0)}o=new Int16Array(s)}return o}}],i.WMSParser={},i.TMSParser={},i.WMTSParser={},i.parser=function(e){var t;switch(e=Cesium.defaultValue(e,Cesium.defaultValue.EMPTY_OBJECT),e.service){case"TMS":t=i.TMSParser.generate(e);break;case"WMTS":t=i.WMTSParser.generate(e);break;default:t=i.WMSParser.generate(e)}return t},i.WMSParser.generate=function(e){var t;if(e=Cesium.defaultValue(e,Cesium.defaultValue.EMPTY_OBJECT),Cesium.defined(e.url)){var n=e.url,o=n.lastIndexOf("?");o>-1&&(n=n.substring(0,o));var r=n+"?SERVICE=WMS&REQUEST=GetCapabilities&tiled=true";Cesium.defined(e.proxy)&&(r=e.proxy.getURL(r)),t=Cesium.when(a(r),function(t){return i.WMSParser.getMetaDatafromXML(t,e)})}else{if(!Cesium.defined(e.xml))throw new Cesium.DeveloperError("either description.url or description.xml are required.");t=i.WMSParser.getMetaDatafromXML(e.xml,e)}return t},i.WMSParser.getMetaDatafromXML=function(e,t){if(!(e instanceof XMLDocument))throw new Cesium.DeveloperError("xml must be a XMLDocument");if(!Cesium.defined(t.layerName))throw new Cesium.DeveloperError("description.layerName is required.");var n={},a=t.layerName,o=Cesium.defaultValue(t.maxLevel,11),r=void 0;n.heightMapWidth=Cesium.defaultValue(t.heightMapWidth,65),n.heightMapHeight=Cesium.defaultValue(t.heightMapHeight,n.heightMapWidth);var l={width:65,height:65},c=void 0;n.formatImage=t.formatImage,n.formatArray=t.formatArray,n.tilingScheme=void 0;var u=void 0,d=void 0;n.ready=!1,n.levelZeroMaximumGeometricError=void 0,n.waterMask=Cesium.defaultValue(t.waterMask,!1),"boolean"!=typeof n.waterMask&&(n.waterMask=!1),n.offset=Cesium.defaultValue(t.offset,0),n.highest=Cesium.defaultValue(t.highest,12e3),n.lowest=Cesium.defaultValue(t.lowest,-500);var f=t.styleName;n.hasStyledImage=Cesium.defaultValue(t.hasStyledImage,"string"==typeof t.styleName);var p=e.querySelector("[version]");null!==p&&(r=p.getAttribute("version"),d=/^1\.[3-9]\./.test(r));var g=e.querySelector("Request>GetMap OnlineResource").getAttribute("xlink:href"),h=g.indexOf("?");h>-1&&(g=g.substring(0,h)),Cesium.defined(t.proxy)&&(g=t.proxy.getURL(g));var m=e.querySelectorAll("Request>GetMap>Format");if(!Cesium.defined(n.formatImage))for(var v=0;v<m.length&&!Cesium.defined(n.formatArray);v++){var _=i.FormatArray.filter(function(e){return e.format===m[v].textContent});_.length>0&&(n.formatArray=_[0])}Cesium.defined(n.formatArray)&&"string"==typeof n.formatArray.format&&"function"==typeof n.formatArray.postProcessArray?n.formatArray.terrainDataStructure={heightScale:1,heightOffset:0,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1,lowestEncodedHeight:0,highestEncodedHeight:1e4}:n.formatArray=void 0;for(var v=0;v<m.length&&!Cesium.defined(n.formatImage);v++){var _=i.FormatImage.filter(function(e){return e.format===m[v].textContent});_.length>0&&(n.formatImage=_[0])}Cesium.defined(n.formatImage)&&"string"==typeof n.formatImage.format?n.formatImage.terrainDataStructure={heightScale:1,heightOffset:0,elementsPerHeight:2,stride:4,elementMultiplier:256,isBigEndian:!0,lowestEncodedHeight:0,highestEncodedHeight:1e4}:n.formatImage=void 0;for(var y,L=e.querySelectorAll("Layer[queryable='1'],Layer[queryable='true']"),b=0;b<L.length&&!Cesium.defined(y);b++)if(L[b].querySelector("Name").textContent===a){y=L[b];var w=y.getAttribute("fixedHeight"),C=y.getAttribute("fixedWidth");Cesium.defined(w)&&(w=parseInt(w),n.heightMapHeight=w>0&&w<n.heightMapHeight?w:n.heightMapHeight,l.height=w>0?w:l.height),Cesium.defined(C)&&(C=parseInt(C),n.heightMapWidth=C>0&&C<n.heightMapWidth?C:n.heightMapWidth,l.width=C>0?C:l.width)}if(Cesium.defined(y)&&Cesium.defined(r)){for(var M=!1,S=0;S<i.CRS.length&&!M;S++){var E=i.CRS[S],x=E.name,I=y.querySelector("BoundingBox[SRS='"+x+"'],BoundingBox[CRS='"+x+"']");if(null!==I){c=x,u=E.firstAxeIsLatitude,n.tilingScheme=new E.tilingScheme({ellipsoid:E.ellipsoid});var O,G,T,A;u&&d?(O=parseFloat(I.getAttribute("miny")),G=parseFloat(I.getAttribute("maxy")),T=parseFloat(I.getAttribute("minx")),A=parseFloat(I.getAttribute("maxx"))):(O=parseFloat(I.getAttribute("minx")),G=parseFloat(I.getAttribute("maxx")),T=parseFloat(I.getAttribute("miny")),A=parseFloat(I.getAttribute("maxy")));var R=new Cesium.Rectangle(O,T,G,A);n.getTileDataAvailable=function(e,t,i){var a=!1,r=n.tilingScheme.tileXYToNativeRectangle(e,t,i);if(i<o){var l=s(R,r);a=Cesium.defined(l)}return a},M=!0}}if(Cesium.defined(f)){for(var V=y.querySelectorAll("Style>Name"),k=!1,P=0;P<V.length&&!k;P++)f===V[P].textContent&&(k=!0);k||(f=void 0)}for(var z=e.querySelectorAll("VendorSpecificCapabilities>TileSet"),B=!1,N=0;N<z.length&&!B;N++){var F=null!==z[N].querySelector("BoundingBox[SRS='"+c+"'],BoundingBox[CRS='"+c+"']"),D=z[N].querySelector("Layers").textContent===a;D&&F&&(l.width=parseInt(z[N].querySelector("Width").textContent),l.height=parseInt(z[N].querySelector("Height").textContent),B=!0)}n.ready=M&&(Cesium.defined(n.formatImage)||Cesium.defined(n.formatArray))&&Cesium.defined(r)}if(n.ready){var j=g+"?SERVICE=WMS&REQUEST=GetMap&layers="+a+"&version="+r+"&bbox=";if(j+=d&&u?"{south},{west},{north},{east}":"{west},{south},{east},{north}",j+="&crs="+c+"&srs="+c,n.formatImage){var U=j+"&format="+n.formatImage.format+"&width="+l.width+"&height="+l.height;Cesium.defined(f)&&(U+="&styles="+f+"&style="+f),n.URLtemplateImage=function(){return U},n.imageSize=l}if(n.formatArray){var W=j+"&format="+n.formatArray.format+"&width="+n.heightMapWidth+"&height="+n.heightMapHeight;n.URLtemplateArray=function(){return W}}}return n},i.TMSParser.generate=function(e){var t;if(e=Cesium.defaultValue(e,Cesium.defaultValue.EMPTY_OBJECT),Cesium.defined(e.url))t=a(e.url).then(function(t){return i.TMSParser.parseXML(t,e)});else{if(!Cesium.defined(e.xml))throw new Cesium.DeveloperError("either description.url or description.xml are required.");t=i.TMSParser.parseXML(e.xml,e)}return t},i.TMSParser.parseXML=function(e,t){if(!(e instanceof XMLDocument))throw new Cesium.DeveloperError("xml must be a XMLDocument");var n;if(null!=e.querySelector("TileMapService")){if(!Cesium.defined(t.layerName))throw new Cesium.DeveloperError("layerName is required.");var o=[].slice.apply(e.querySelectorAll("TileMap[title='"+t.layerName+"']")),r=o.map(function(e){var n=e.getAttribute("href");return Cesium.defined(t.proxy)&&(n=t.proxy.getURL(n)),Cesium.when(a(n),function(e){return i.TMSParser.getMetaDatafromXML(e,t)})}),s=Cesium.when.all(r).then(function(e){for(var t,n=0;n<e.length&&!Cesium.defined(t);n++)Cesium.defined(e[n])&&(t=e[n]);return t});n=s.then(function(e){return e})}else n=i.TMSParser.getMetaDatafromXML(e,t);return n},i.TMSParser.getMetaDatafromXML=function(e,t){var n={};n.ready=!1,n.heightMapWidth=Cesium.defaultValue(t.heightMapWidth,65),n.heightMapHeight=Cesium.defaultValue(t.heightMapHeight,n.heightMapWidth);var a=Cesium.defaultValue(t.maxLevel,11),o=t.proxy;n.hasStyledImage=Cesium.defaultValue(t.hasStyledImage,"string"==typeof t.styleName),n.waterMask=Cesium.defaultValue(t.waterMask,!1),"boolean"!=typeof n.waterMask&&(n.waterMask=!1),n.offset=Cesium.defaultValue(t.offset,0),n.highest=Cesium.defaultValue(t.highest,12e3),n.lowest=Cesium.defaultValue(t.lowest,-500);var r=e.querySelector("SRS").textContent,l=i.CRS.filter(function(e){return e.name===r});l.length>0&&(n.tilingScheme=new l[0].tilingScheme({ellipsoid:l[0].ellipsoid}));var c=e.querySelector("TileFormat"),u=i.FormatImage.filter(function(e){return e.extension==c.getAttribute("extension")});u.length>0&&(n.formatImage=u[0],n.imageSize={},n.imageSize.width=parseInt(c.getAttribute("width")),n.imageSize.height=parseInt(c.getAttribute("height")));var d=[].slice.call(e.querySelectorAll("TileSets>TileSet")),f=[];if(Cesium.defined(n.formatImage)&&(f=d.map(function(e){var t=e.getAttribute("href")+"/{x}/{tmsY}."+n.formatImage.extension;Cesium.defined(o)&&(t=o.getURL(t));var i=parseInt(e.getAttribute("order"));return{url:t,level:i}}),f.sort(function(e,t){return e.level-t.level}),f.length>0&&(n.tileSets=f)),Cesium.defined(n.tileSets)&&Cesium.defined(n.formatImage)&&Cesium.defined(n.tilingScheme)){n.URLtemplateImage=function(e,t,n){var i="";return n<f.length&&(i=f[n].url),i};var p=e.querySelector("BoundingBox"),g=parseFloat(p.getAttribute("miny")),h=parseFloat(p.getAttribute("maxy")),m=parseFloat(p.getAttribute("minx")),v=parseFloat(p.getAttribute("maxx")),_=new Cesium.Rectangle(m,g,v,h);n.getTileDataAvailable=function(e,t,i){var o=n.tilingScheme.tileXYToNativeRectangle(e,t,i),r=s(_,o);return Cesium.defined(r)&&i<a&&i<f.length},n.ready=!0}else n=void 0;return n},i.WMTSParser.generate=function(e){e=Cesium.defaultValue(e,Cesium.defaultValue.EMPTY_OBJECT);var t;if(Cesium.defined(e.url)){var n=e.url,o=n.lastIndexOf("?");o>-1&&(n=n.substring(0,o));var r=n+"?REQUEST=GetCapabilities";Cesium.defined(e.proxy)&&(r=e.proxy.getURL(r)),t=a(r).then(function(t){return i.WMTSParser.getMetaDatafromXML(t,e)})}else{if(!Cesium.defined(e.xml))throw new Cesium.DeveloperError("either description.url or description.xml are required.");t=i.WMTSParser.getMetaDatafromXML(e.xml,e)}return t},i.WMTSParser.getMetaDatafromXML=function(e,t){if(!(e instanceof XMLDocument))throw new Cesium.DeveloperError("xml must be a XMLDocument");var n={},a=t.layerName;n.ready=!1,n.heightMapWidth=Cesium.defaultValue(t.heightMapWidth,65),n.heightMapHeight=Cesium.defaultValue(t.heightMapHeight,n.heightMapWidth);var o=Cesium.defaultValue(t.maxLevel,12),r=t.proxy,s=t.styleName;n.hasStyledImage=Cesium.defaultValue(t.hasStyledImage,"string"==typeof t.styleName),n.waterMask=Cesium.defaultValue(t.waterMask,!1),"boolean"!=typeof n.waterMask&&(n.waterMask=!1),n.offset=Cesium.defaultValue(t.offset,0),n.highest=Cesium.defaultValue(t.highest,12e3),n.lowest=Cesium.defaultValue(t.lowest,-500);for(var l,c,u,d,f=[],p=[].slice.call(e.querySelectorAll('Operation[name="GetTile"] HTTP Get')),g=p.map(function(e){var t,n=e.querySelector("Value").textContent;return"KVP"===n&&(t={node:e,type:"KVP"}),"RESTful"===n&&(t={node:e,type:"RESTful"}),t}).filter(function(e){return Cesium.defined(e)}),h=0;h<g.length;h++){var m=g[h];"RESTful"!==m.type||Cesium.defined(u)||(u=m.node.getAttribute("xlink:href"),Cesium.defined(r)&&(u=r.getURL(u))),"KVP"!==m.type||Cesium.defined(c)||(c=m.node.getAttribute("xlink:href"),Cesium.defined(r)&&(c=r.getURL(c)))}for(var v,_=e.querySelectorAll("Contents>Layer>Identifier"),h=0;h<_.length&&!Cesium.defined(v);h++)a===_[h].textContent&&(v=_[h].parentNode);if(Cesium.defined(v)){for(var y,L,b=v.querySelectorAll("Style"),h=0;h<b.length;h++){var w=b[h].querySelector("Identifier").textContent;null!=b[h].getAttribute("isDefault")&&(y=w),w===s&&(L=w)}Cesium.defined(s)&&s==L||(s=Cesium.defaultValue(y,""));for(var C=[].slice.call(v.querySelectorAll("Format")),M=0;M<i.FormatImage.length&&!Cesium.defined(d);M++){var S=C.filter(function(e){return e.textContent===i.FormatImage[M].format});S.length>0&&(d=i.FormatImage[M])}f=v.querySelectorAll("TileMatrixSetLink")}for(var E=[].slice.call(e.querySelectorAll("TileMatrixSet>Identifier")),x=0;x<f.length&&!n.ready;x++){for(var I,O,G=f[x],T=G.querySelector("TileMatrixSet").textContent,h=0;h<E.length&&!Cesium.defined(I);h++)E[h].textContent===T&&(I=E[h].parentNode);for(var A=I.querySelector("SupportedCRS").textContent,R=0;R<i.CRS.length&&!Cesium.defined(O);R++)i.CRS[R].SupportedCRS===A&&(O=i.CRS[R]);if(Cesium.defined(O)){var V,k=[].slice.call(I.querySelectorAll("TileMatrix"));V=k.map(function(e){var t=e.querySelector("Identifier").textContent,n=parseInt(e.querySelector("MatrixWidth").textContent),i=parseInt(e.querySelector("MatrixHeight").textContent),a=parseInt(e.querySelector("TileWidth").textContent),o=parseInt(e.querySelector("TileHeight").textContent),r=parseFloat(e.querySelector("ScaleDenominator").textContent);return{id:t,maxWidth:n,maxHeight:i,scaleDenominator:r,complete:!1,tileWidth:a,tileHeight:o}}),V.sort(function(e,t){return t.scaleDenominator-e.scaleDenominator}),listTileMatrixLimits=G.querySelectorAll("TileMatrixSetLimits>TileMatrixLimits");for(var P=0;P<V.length;P++)for(var z=V[P],B=0;B<listTileMatrixLimits.length;B++){var N=listTileMatrixLimits[B];z.id===N.querySelector("TileMatrix").textContent&&(z.minTileRow=parseInt(N.querySelector("MinTileRow").textContent),z.maxTileRow=parseInt(N.querySelector("MaxTileRow").textContent),z.minTileCol=parseInt(N.querySelector("MinTileCol").textContent),z.maxTileCol=parseInt(N.querySelector("MaxTileCol").textContent),z.complete=!0,V[P]=z)}if(V.length>0){n.tilingScheme=new O.tilingScheme({ellipsoid:O.ellipsoid,numberOfLevelZeroTilesX:V[0].maxWidth,numberOfLevelZeroTilesY:V[0].maxHeight});var F=v.querySelector("ResourceURL[format='"+d.format+"']");if(null!=F?l=F.getAttribute("template").replace("{TileRow}","{y}").replace("{TileCol}","{x}").replace("{Style}",s).replace("{TileMatrixSet}",T).replace("{layer}",a).replace("{infoFormatExtension}",d.extension):Cesium.defined(c)&&(l=c+"service=WMTS&request=GetTile&version=1.0.0&layer="+a+"&style="+s+"&format="+d.format+"&TileMatrixSet="+T+"&TileMatrix={TileMatrix}&TileRow={y}&TileCol={x}"),Cesium.defined(l)){n.getTileDataAvailable=function(e,t,n){var i=!1;if(n<o&&n<V.length){var a=V[n];i=a.complete?t<=a.maxTileRow&&t>=a.minTileRow&&e<=a.maxTileCol&&e>=a.minTileCol:e<a.maxWidth&&t<a.maxHeight}return i},n.URLtemplateImage=function(e,t,i){var a="";if(n.getTileDataAvailable(e,t,i)){var o=V[i];a=l.replace("{TileMatrix}",o.id)}return a};var D={width:V[0].tileWidth,height:V[0].tileHeight},j=V.filter(function(e){return e.tileWidth!=D.width||e.tileHeight!=D.height});0==j.length&&(n.imageSize=D),n.ready=!0}}}}return n};var l=function(t){if(!Cesium.defined(t))throw new Cesium.DeveloperError("description is required.");var n=new Cesium.Event,a=t.credit;"string"==typeof a&&(a=new Cesium.Credit(a)),this.ready=!1,this._readyPromise=Cesium.when.defer(),Cesium.defineProperties(this,{errorEvent:{get:function(){return n}},credit:{get:function(){return a}},hasVertexNormals:{get:function(){return!1}},readyPromise:{get:function(){return this._readyPromise.promise}}});var o=i.parser(t);e(o,this)};l.arrayToHeightmapTerrainData=function(e,t,n,i,a,o){"number"==typeof n&&(n={width:n,height:n});var r=i.postProcessArray(e,n,t.highest,t.lowest,t.offset);if(!Cesium.defined(r))throw new Cesium.DeveloperError("no good size");var s={buffer:r,width:n.width,height:n.height,childTileMask:o,structure:i.terrainDataStructure};if(a){for(var l=new Uint8Array(r.length),c=0;c<r.length;c++)r[c]<=0&&(l[c]=255);s.waterMask=l}return new Cesium.HeightmapTerrainData(s)},l.imageToHeightmapTerrainData=function(e,t,n,i,a,o){"number"==typeof n&&(n={width:n,height:n});for(var r=Cesium.getImagePixels(e,n.width,n.height),s=new Uint8Array(r.length/4),l=new Int16Array(r.length/4),c=0,u=0,d=0;d<r.length;d+=4){var f=r[d],p=r[d+1],g=r[d+2]>128,h=(f<<8|p)-t.offset-32768;h>t.lowest&&h<t.highest&&(g||o)?(l[d/4]=h,u+=h,c++):l[d/4]=0==c?0:u/c}var m={buffer:l,width:n.width,height:n.height,childTileMask:a,structure:{heightScale:1,heightOffset:0,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1}};if(i){for(var s=new Uint8Array(l.length),d=0;d<l.length;d++)l[d]<=0&&(s[d]=255);m.waterMask=s}return new Cesium.HeightmapTerrainData(m)},Cesium.GeoserverTerrainProvider=l}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(40),o=(i(a),n(37)),r=i(o),s=n(81),l=(i(s),n(6)),c=(i(l),n(74)),u=i(c),d=n(49),f=i(d),p=n(35),g=i(p),h=n(34),m=i(h),v=n(1),_=i(v),y=n(5),L=i(y),b=n(142),w=i(b),C=n(141),M=i(C),S=n(321),E=i(S),x=n(329),I=i(x),O=n(47),G=i(O),T=n(7),A=i(T),R=n(143),V=(i(R),n(631)),k=i(V);_.default.component("gv-conferma-dettaglio",k.default),t.default={_lastZIndex:21,debug:!1,containerId:"gv-container",idMap:null,title:null,findOptions:null,zoomTo:null,geoserverUrl:null,application:{},baseLayers:[{type:"ESRI_IMAGERY",visible:!0}],activeBaseLayer:"ESRI_IMAGERY",maps:[],hilitedLayer:[],init:function(e){var t=this;return(0,m.default)(g.default.mark(function n(){var i,a,o;return g.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}throw new Error("Opzioni di inizializzazione non impostate!");case 2:if(t.debug=e.debug,t.idMap=e.idMap,t.findOptions=e.findOptions,t.zoomTo=e.zoomTo,t.disableTMS=e.disableTMS,t.disableCache=e.disableCache,t.flagGeoserver=e.flagGeoserver,t.agAppMap=e.agAppMapList,e.application&&(t.application=e.application),e.containerId&&(t.containerId=e.containerId),t.application.layout=e.application&&e.application.layout?e.application.layout:{},e.application&&(t.application.proxy=e.application.proxy||L.default.DEFAULT_PROXY),e.application&&e.application.layout&&e.application.layout.title&&(t.title=e.application.layout.title),t.setBaseLayers(e.baseLayers),t.initLoadedMaps=0,t.initLoadingMaps=1,!e.agAppMapList){n.next=25;break}return n.next=21,(0,E.default)(e.agAppMapList);case 21:i=n.sent,t.agAppMapList=i,a=i.map(function(e){return e.id}),t.loadMaps(a);case 25:e.idMap&&(o=e.idMap.toString().split(","),t.loadMaps(o)),e.idMap||e.agAppMap||GV.eventBus.$on("gv-app-mounted",function(n){e.maps.forEach(function(e){t.addMapConfig(e,null)}),t.application&&t.application.callback&&t.application.callback(n)}),GV.eventBus.$on("map-zoom",function(e){var n=t.getLayersConfig();n.forEach(function(e){if(t.setLayerAttribute(e.name,"inRange",GV.app.map.layerInRange(e)),"openlayers"===GV.app.map.type){var n=GV.app.map.getLayerByName(e.name),i=e.visible&&e.inRange;n.setVisible(i)}})});case 28:case"end":return n.stop()}},n,t)}))()},loadMaps:function(e){var t=this;this.initLoadingMaps=e.length,e.forEach(function(e){t.addRlMap(e,!0,!1)}),GV.eventBus.$on("gv-config-init",function(e){t.application&&t.application.callback&&t.application.callback(e)})},setBaseLayers:function(e){var t=this;this.baseLayers=[],e.forEach(function(e){e.name=e.type,e.label=L.default.BASE_LAYERS[e.type].label,e.icon=L.default.BASE_LAYERS[e.type].icon,t.baseLayers.push(e),e.visible&&(t.activeBaseLayer=e.name)})},changeBaseLayers:function(e){var t=this;GV.app.map.removeLayer(GV.app.map.activeBaseLayer),this.baseLayers.splice(0),e.forEach(function(e){e.name=e.type,e.label=L.default.BASE_LAYERS[e.type].label,e.icon=L.default.BASE_LAYERS[e.type].icon,t.baseLayers.push(e),e.visible&&(t.activeBaseLayer=e.name,GV.baseLayerSwitcher&&(GV.baseLayerSwitcher.activeBaseLayer=e.name))}),GV.app.map.loadBaseLayers()},setLayerconfig:function(e,t){e.extent_3857=t.extent_3857;var n=e.minScale?" da 1:"+e.minScale:" fino",i=e.maxScale?" a 1:"+e.maxScale:"";return e.scaleRangeLabel="Visibile"+n+i,e.minScale=0===e.minScale?591657550:e.minScale,e.inRange=!GV.app||!GV.app.map||GV.app.map.layerInRange(e),"undefined"==typeof e.opacity&&(e.opacity=1),e.opacityBase100=100*e.opacity,e.zIndex=this._lastZIndex++,this.setLayerType(e),this.setLayerCache(e),e},setLayerType:function(e){this.disableTMS&&e.idMap==this.idMap&&"TMS"===e.type&&(e.type="WMS")},setLayerCache:function(e){this.disableCache&&e.idMap==this.idMap&&"WMS"===e.type&&(e.cacheMinZoomLevel=null)},addMapConfig:function(e,t){var n=this;if(e.ancillaryMaps&&e.ancillaryMaps.forEach(function(t){t.extent_3857=null,n.addMapConfig(t,e)}),e.layers=e.layers.filter(function(e){return!e.flagBaseVectorLayer}),e.layers.forEach(function(t){n.setLayerconfig(t,e)}),e.layers.reverse(),e.addLayerConfig&&this.getMapConfig(e.id))e.layers.forEach(function(t){n.getMapConfig(e.id).layers.push(t)});else{if(this.getMapConfig(e.id))return;t&&(this.application.layout.legend.options.hideAncillaryMapLegend||t.hideAncillaryMapLegend)?e.showLayersInLegend=!1:e.showLayersInLegend=!0,this.maps.unshift(e)}console.log("EMETTO config-add-map"),GV.eventBus.$emit("config-add-map",{config:e})},setLayerAttribute:function(e,t,n){this.maps.forEach(function(i){var a=i.layers;a.forEach(function(i){i.name===e&&(i[t]=n)})})},removeMap:function(e){var t=this.getMapConfig(e);if(t){GV.eventBus.$emit("config-remove-map",{config:t});var n=this.maps.findIndex(function(t){return t.id===e});n>-1&&this.maps.splice(n,1)}},removeLayer:function(e){var t=this;this.maps.forEach(function(n){var i=-1;n.layers.forEach(function(t,n){t.name===e&&(i=n)}),i>-1&&n.layers.splice(i,1),0===n.layers.length&&t.removeMap(n.id)}),GV.eventBus.$emit("config-remove-layer",{config:e})},addLayerToMap:function(e,t){var n=this,i=(0,f.default)({},e);this.maps.forEach(function(e){if(e.id===t){var a=n.getMapConfig(t);n.isLayerInMapConfig(i,a)||(n.setLayerconfig(i,a),e.layers.unshift(i))}}),GV.eventBus.$emit("config-add-layer",{config:i})},isLayerInMapConfig:function(e,t){var n=t.layers.filter(function(t){return t.name===e.name});return n.length>0},setFlagVisible:function(e){if(this.agAppMap){var t=this.agAppMapList.filter(function(t){return t.id===e.id.toString()});t&&t[0]&&!t[0].visible&&e.layers.forEach(function(e){e.visible=!1})}},addRlMap:function(e,t,n){var i=this;return(0,m.default)(g.default.mark(function a(){var o,r,s;return g.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!i.getMapConfig(e)){a.next=2;break}return a.abrupt("return",i.getMapConfig(e));case 2:return a.prev=2,a.next=5,(0,w.default)(e);case 5:if(o=a.sent,o.data.success){a.next=8;break}throw new Error("Errore Caricamento Mappa: "+o.data.message);case 8:if(o.data.data){a.next=10;break}throw new Error("Errore Caricamento Mappa: configurazione non trovata");case 10:return L.default.SYS_MANUTENZIONE_DOWNLOAD=o.data.sistema&&o.data.sistema.manutenzioneDownload,r=o.data.data,r.fileDettaglio&&!n?(s="Condizioni di utilizzo",(0,A.default)({elId:"gv-conferma-dettaglio",containerId:i.containerId,vm:new _.default({template:'<gv-conferma-dettaglio idMap="'+e+'" label="'+s+'" link="'+r.fileDettaglio+'"></gv-conferma-dettaglio>'})})):i.loadConfig(r,t),a.abrupt("return",r);case 16:a.prev=16,a.t0=a.catch(2),console.error(a.t0),u.default.error({title:"Attenzione",type:"error",duration:5e3,offset:70,position:"bottom-left",message:a.t0.message});case 20:case"end":return a.stop()}},a,i,[[2,16]])}))()},loadConfig:function(e,t){this.setFlagVisible(e),this.addMapConfig(e,null),GV.app&&GV.app.map&&e.type&&"R"==e.type&&t&&this.getBaseLayerConfig("BLANK")&&(GV.app.map.changeBaseLayer("BLANK"),GV.baseLayerSwitcher&&(GV.baseLayerSwitcher.activeBaseLayer="BLANK")),e.baseLayers&&e.baseLayers.length>0&&this.changeBaseLayers(e.baseLayers),e.activeBaseLayer&&(GV.app.map.changeBaseLayer(e.activeBaseLayer),GV.baseLayerSwitcher&&(GV.baseLayerSwitcher.activeBaseLayer=e.activeBaseLayer)),GV.config.findOptions&&GV.app.map.find(GV.config.findOptions),GV.config.zoomTo&&this.zoomToCoord(GV.config.zoomTo),this.initLoadedMaps=this.initLoadedMaps+1,this.initLoadingMaps===this.initLoadedMaps&&GV.eventBus.$emit("gv-config-init",GV.app)},zoomToCoord:function(e){var t=this;return(0,m.default)(g.default.mark(function n(){var i,a,o,s,l,c;return g.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.coord){t.next=3;break}return console.error("Parametro COORD non impostato"),t.abrupt("return");case 3:if(e.epsg||(e.epsg=3003),e.zoom||(e.zoom=16),i=e.coord.split(",")[0],a=e.coord.split(",")[1],4326===e.epsg||4258===e.epsg){t.next=16;break}return o=r.default.service({text:"Ricerca...",background:"rgba(0, 0, 0, 0.8)"}),t.next=11,(0,G.default)(e.epsg,"4326",i,a);case 11:s=t.sent,s.data.points&&(l=s.data.points[0].split(",")[0],c=s.data.points[0].split(",")[1],GV.app.map.addMarker({location:[c,l],zoomLevel:e.zoom})),o.close(),t.next=17;break;case 16:GV.app.map.addMarker({location:[a,i],zoomLevel:e.zoom});case 17:case"end":return t.stop()}},n,t)}))()},loadCatalog:function(e){var t=this;return(0,m.default)(g.default.mark(function n(){var i,a;return g.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,M.default)(e);case 2:return i=n.sent,t.catalog=t.catalogFull=i.children,n.next=6,(0,I.default)();case 6:a=n.sent,t.enti=a,e.showMapCatalogPanel&&(0,A.default)({elId:"gv-map-catalog-panel",toggleEl:!1,vm:new _.default({template:"<gv-map-catalog-panel></gv-map-catalog-panel>"})});case 9:case"end":return n.stop()}},n,t)}))()},getLayersConfig:function(e){var t=[];return this.maps.forEach(function(n){if(e){var i=n.layers.filter(e);i.forEach(function(e){t.push(e)})}else n.layers.forEach(function(e){t.push(e)})}),t},getLayersNameByMapId:function(e){if(!e)return console.error('Parametro "idMap" non definito'),null;var t=[];return this.maps.forEach(function(n){n.id.toString()===e&&n.layers.forEach(function(n){n.idMap.toString()===e&&t.push(n.name)})}),t},getLayerConfig:function(e){var t=null;return this.maps.forEach(function(n){n.layers.forEach(function(n){n.name===e&&(t=n)})}),t},getBaseLayerConfig:function(e){var t=this.baseLayers.find(function(t){return t.name===e});return t},getMapConfig:function(e){return this.maps.find(function(t){return t.id==e})},getToolOptions:function(e){var t=null;return this.application.layout&&this.application.layout.tools?(this.application.layout.tools.forEach(function(n){n.name===e&&n.options&&(t=n.options)}),t):null},getButtonOptions:function(e){var t=null;return this.application.layout&&this.application.layout.toolbar?(this.application.layout.toolbar.items.forEach(function(n){n.name===e&&n.options&&(t=n.options)}),t):null},getActiveBaseLayer:function(){var e=null;return this.baseLayers.forEach(function(t){t.visible&&(e=t)}),e},setActiveBaseLayer:function(e){this.baseLayers.forEach(function(t){t.visible=t.name===e})}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(7),s=i(r),l=n(1),c=i(l);c.default.component("gv-draw-panel",function(){return new o.default(function(e){n.e(18,function(t){e(n(636))})})});var u={id:"draw",active:!1,latlng:null,activate:function(){GV.log("GV.controls.draw.activate"),GV.eventBus.$emit("gv-control-draw-activate",this),this.active=!0,this.openPanel()},deactivate:function(){GV.log("GV.controls.draw.deactivate"),GV.eventBus.$emit("gv-control-draw-deactivate",this),this.active=!1,this.closePanel()},openPanel:function(){(0,s.default)({elId:"gv-draw-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new c.default({template:"<gv-draw-panel></gv-draw-panel>"})})},closePanel:function(){document.getElementById("gv-draw-panel").style.display="none"}};t.default=u},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(7),s=i(r),l=n(1),c=i(l);c.default.component("gv-fototeca-selezione-territoriale-panel",function(){return new o.default(function(e){n.e(17,function(t){e(n(638))})})});var u={id:"fototeca-selezione-territoriale",active:!1,latlng:null,activate:function(){GV.log("GV.controls.fototeca-selezione-territoriale.activate"),this.openPanel(),GV.eventBus.$emit("gv-control-fototeca-selezione-territoriale-activate",this),this.active=!0},deactivate:function(){GV.log("GV.controls.fototeca-selezione-territoriale.deactivate"),GV.eventBus.$emit("gv-control-fototeca-selezione-territoriale-deactivate",this),this.active=!1,this.closePanel()},openPanel:function(){(0,s.default)({elId:"gv-fototeca-selezione-territoriale-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new c.default({template:"<gv-fototeca-selezione-territoriale-panel></gv-fototeca-selezione-territoriale-panel>"})})},closePanel:function(){document.getElementById("gv-fototeca-selezione-territoriale-panel").style.display="none"}};t.default=u},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(7),s=i(r),l=n(1),c=i(l);c.default.component("gv-genio-seleziona-particelle-panel",function(){return new o.default(function(e){n.e(15,function(t){e(n(643))})})});var u={id:"genio-seleziona-particelle",active:!1,latlng:null,activate:function(){GV.log("GV.controls.genio-seleziona-particelle.activate"),this.openPanel(),GV.eventBus.$emit("gv-control-genio-seleziona-particelle-activate",this),this.active=!0},deactivate:function(){GV.log("GV.controls.genio-seleziona-particelle.deactivate"),GV.eventBus.$emit("gv-control-genio-seleziona-particelle-deactivate",this),this.active=!1,this.closePanel()},openPanel:function(){(0,s.default)({elId:"gv-genio-seleziona-particelle-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new c.default({template:"<gv-genio-seleziona-particelle-panel></gv-genio-seleziona-particelle-panel>"})})},closePanel:function(){document.getElementById("gv-genio-seleziona-particelle-panel").style.display="none"}};t.default=u},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=i(a),r=n(7),s=i(r),l=n(1),c=i(l);c.default.component("gv-measure-panel",function(){return new o.default(function(e){n.e(14,function(t){e(n(666))})})});var u={id:"coordinate",active:!1,latlng:null,activate:function(){GV.log("GV.controls.measure.activate"),GV.eventBus.$emit("gv-control-measure-activate",this),this.active=!0,this.openPanel()},deactivate:function(){GV.log("GV.controls.measure.deactivate"),GV.eventBus.$emit("gv-control-measure-deactivate",this),this.active=!1,this.closePanel()},openPanel:function(){(0,s.default)({elId:"gv-measure-panel",containerId:GV.config.containerId,toggleEl:!0,vm:new c.default({template:"<gv-measure-panel></gv-measure-panel>"})})},closePanel:function(){document.getElementById("gv-measure-panel").style.display="none"}};t.default=u},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(1),o=i(a);o.default.directive("draggable",{inserted:function(e,t,n){var i=e.id.replace("-title","");e.className+=" draggable",e.setAttribute("draggable","true"),e.setAttribute("ondragstart","GV.dragbox.start(event)"),e.setAttribute("ondragend","GV.dragbox.end(event,'"+i+"')")}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=void 0;if(t){var i=t.geomField||"location",a=e.hits.hits;n={type:"FeatureCollection",totalFeatures:e.hits.total,features:[],crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4326"}}},a.forEach(function(e){var t=e._source[i];n.features.push({type:"Feature",id:e._id,geometry:{type:"Point",coordinates:t},geometry_name:"GEOMETRY",properties:e._source})})}else n="string"==typeof e?JSON.parse(e):e;return n}function o(e,t){if(I[e.type]){var n=I[e.type](e,t);return n.legend=e.legend,n.config=e,n}throw new Error("Layer di tipo "+e.type+" non gestito")}Object.defineProperty(t,"__esModule",{value:!0}),t.create=void 0;var r=n(50),s=i(r),l=n(49),c=i(l),u=n(5),d=i(u),f=n(363),p=i(f),g=n(150),h=i(g),m=n(152),v=i(m),_=n(48),y=i(_),b=n(147),w=i(b),C=n(621),M=i(C),S=n(112),E=i(S),x='<a href="https://www.esri.com/">Esri</a>',I={
BLANK:function(e){return e.legend={label:"Sfondo Bianco"},L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{opacity:0,maxZoom:20})},OSM:function(e){return e.legend={label:"OpenStreetMap"},L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data © <a href="https://openstreetmap.org">OpenStreetMap</a> contributors',maxZoom:20})},TILESERVER_GL:function(e){var t=e;return L.tileLayer("https://geoservizi{s}.regione.liguria.it/styles/"+t+"/{z}/{x}/{y}.png",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',minZoom:0,maxZoom:20,subdomains:["1","2"]})},TS_STREETS:function(){return this.TILESERVER_GL("streets")},TS_DARK_MATTER:function(){return this.TILESERVER_GL("dark-matter")},TS_POSITRON:function(){return this.TILESERVER_GL("positron")},TS_MONOCHROME:function(){return this.TILESERVER_GL("monochrome")},TS_TONER:function(){return this.TILESERVER_GL("toner")},ESRI_IMAGERY:function(e){e.legend={label:"ESRI Imagery"},e.name=e.type;var t="DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community";return L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"&copy; "+x+", "+t,maxZoom:20})},ESRI_STREETS:function(e){e.legend={label:"ESRI Streets"},e.name=e.type;var t="USGS, NOAA";return L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"&copy; "+x+", "+t,maxZoom:20})},ESRI_TOPOGRAPHIC:function(e){e.legend={label:"ESRI Topographic"},e.name=e.type;var t="USGS, NOAA";return L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"&copy; "+x+", "+t,maxZoom:20})},ESRI_GRAY:function(e){e.legend={label:"ESRI Gray"},e.name=e.type;var t="HERE, DeLorme, MapmyIndia, OpenStreetMap contributors";return L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"&copy; "+x+", "+t,maxZoom:16})},ESRI_DARKGRAY:function(e){e.legend={label:"ESRI Dark Gray"},e.name=e.type;var t="HERE, DeLorme, MapmyIndia, OpenStreetMap contributors";return L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"&copy; "+x+", "+t,maxZoom:16})},MAPBOX:function(e){var t=e.mapboxConfig.userName,n=e.mapboxConfig.accessToken,i=e.mapboxConfig.style;return L.tileLayer("https://api.mapbox.com/styles/v1/"+t+"/"+i+"/tiles/256/{z}/{x}/{y}?access_token="+n,{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",maxZoom:20})},MAPBOX_VIABILITA:function(e){var t="liguriadigitale",n="pk.eyJ1IjoibGlndXJpYWRpZ2l0YWxlIiwiYSI6ImNqbzQzajk0bDEwa3EzcWt1ZThqazFqcGIifQ.dUhSMka7mXTD2inJGmlBMw",i="cjo442ih3407m2slfdwc1hib5",a="Carta della Viabilità";return e.legend={label:a},L.tileLayer("https://api.mapbox.com/styles/v1/"+t+"/"+i+"/tiles/256/{z}/{x}/{y}?access_token="+n,{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",maxZoom:20})},MAPBOX_MONOCHROME:function(e){var t="liguriadigitale",n="pk.eyJ1IjoibGlndXJpYWRpZ2l0YWxlIiwiYSI6ImNqbzQzajk0bDEwa3EzcWt1ZThqazFqcGIifQ.dUhSMka7mXTD2inJGmlBMw",i="ckgj8eqz80t8q19theln5gwrk",a="Mapbox Monochrome";return e.legend={label:a},L.tileLayer("https://api.mapbox.com/styles/v1/"+t+"/"+i+"/tiles/256/{z}/{x}/{y}?access_token="+n,{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",maxZoom:20})},MAPBOX_STREETS:function(e){var t="liguriadigitale",n="pk.eyJ1IjoibGlndXJpYWRpZ2l0YWxlIiwiYSI6ImNqbzQzajk0bDEwa3EzcWt1ZThqazFqcGIifQ.dUhSMka7mXTD2inJGmlBMw",i="ckgj8f25p0o6y19jxk0ykap41",a="Mapbox Streets";return e.legend={label:a},L.tileLayer("https://api.mapbox.com/styles/v1/"+t+"/"+i+"/tiles/256/{z}/{x}/{y}?access_token="+n,{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",maxZoom:20})},MAPBOX_VIABILITA_SATELLITARE:function(e){var t="liguriadigitale",n="pk.eyJ1IjoibGlndXJpYWRpZ2l0YWxlIiwiYSI6ImNqbzQzajk0bDEwa3EzcWt1ZThqazFqcGIifQ.dUhSMka7mXTD2inJGmlBMw",i="cjo43w54x00di2spieg5itsgf",a="Carta ibrida";return e.legend={label:a},L.tileLayer("https://api.mapbox.com/styles/v1/"+t+"/"+i+"/tiles/256/{z}/{x}/{y}?access_token="+n,{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",maxZoom:20})},STAMEN_TERRAIN:function(e){return e.legend={label:"Stamen Terrain"},L.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}.{ext}",{attribution:'Map tiles by <a href="https://stamen.com">Stamen Design</a>, <a href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"})},STAMEN_TONER_LIGHT:function(e){return e.legend={label:"Stamen Toner Light"},L.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.{ext}",{attribution:'Map tiles by <a href="https://stamen.com">Stamen Design</a>, <a href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"})},RL_CARTE_BASE_NC25:function(){return this.WMS({visible:!1,name:"L7273",cacheMinZoomLevel:12,maxScale:1e4,minScale:2e5,wmsParams:{name:"L7273",format:"image/jpeg",url:"https://geoservizi.regione.liguria.it/geoserver/M2125/wms?"},zIndex:1,attribution:"Regione Liguria"})},RL_CARTE_BASE:function(){return this.WMS({visible:!1,name:"CARTE_DI_BASE",cacheMinZoomLevel:8,wmsParams:{name:"CARTE_DI_BASE",format:"image/jpeg",url:"https://geoservizi.regione.liguria.it/geoserver/wms?"},zIndex:1,attribution:"Regione Liguria"})},RL_ORTOFOTO_2016:function(){return this.WMS({visible:!1,name:"ORTOFOTO",cacheMinZoomLevel:8,wmsParams:{name:"L5802",format:"image/jpeg",url:"https://geoservizi.regione.liguria.it/geoserver/wms?"},zIndex:1,attribution:"Ortofoto 20cm/ ©2016 CONSORZIO TeA - TUTTI I DIRITTI RISERVATI"})},RL_ORTOFOTO_2013:function(){return this.WMS({visible:!1,name:"ORTOFOTO",cacheMinZoomLevel:8,wmsParams:{name:"L4419",format:"image/jpeg",url:"https://geoservizi.regione.liguria.it/geoserver/M1661/wms?"},zIndex:1,attribution:"Immagine di proprietà AGEA"})},RL_ORTOFOTO_2010:function(){return this.WMS({visible:!1,name:"ORTOFOTO",cacheMinZoomLevel:8,wmsParams:{name:"L3861",format:"image/jpeg",url:"https://geoservizi.regione.liguria.it/geoserver/M1505/wms?"},zIndex:1,attribution:"Immagine di proprietà AGEA"})},RL_ORTOFOTO_2007:function(){return this.WMS({visible:!1,name:"ORTOFOTO",cacheMinZoomLevel:8,wmsParams:{name:"L3463",format:"image/jpeg",url:"https://geoservizi.regione.liguria.it/geoserver/M1361/wms?"},zIndex:1,attribution:"Immagine di proprietà AGEA"})},RL_ORTOFOTO_2000:function(){return this.WMS({visible:!1,name:"ORTOFOTO",cacheMinZoomLevel:8,wmsParams:{name:"L48",format:"image/jpeg",url:"https://geoservizi.regione.liguria.it/geoserver/M48/wms?"},zIndex:1})},TMS:function(e){var t=e.tmsParams.url.replace("/tms/","/tiles/"),n=e.tmsParams.name,i=e.attribution,a=t+"/1.0.0/"+n+"/{z}/{x}/{y}.png",o=e.maxScale?(0,v.default)(e.maxScale)-1:20,r=L.tileLayer(a,{minZoom:1,maxZoom:o,attribution:i});return r.setZIndex(e.zIndex),r.name=n.replace("/webmercator",""),r},WMS:function(e){var t=e.name,n=e.cacheMinZoomLevel,i=e.minScale,a=e.maxScale,o=e.wmsParams,r=(e.flagGeoserver,e.zIndex);GV.log("layerFactory - Creazione Layer WMS: "+t);var s=null,l=!!n,u=o.format,f=e.opacity||1;e.minZoom=i?(0,v.default)(i):8,e.maxZoom=a?(0,v.default)(a)-1:20;var p={subdomains:["1","2"],transparent:!0,layers:o.name,format:u,styles:o.styles||"",opacity:f,minZoom:e.minZoom,maxZoom:e.maxZoom,bounds:L.latLngBounds(L.latLng(d.default.MAX_BOUNDS.X_MIN,d.default.MAX_BOUNDS.Y_MIN),L.latLng(d.default.MAX_BOUNDS.X_MAX,d.default.MAX_BOUNDS.Y_MAX)),client:"GV2"};o.cql_filter&&(p.cql_filter=o.cql_filter),o.sld&&(p.sld=o.sld);var g=o.url;if(l){d.default.USE_SUBDOMAINS&&g.indexOf("geoservizi.regione.liguria.it")>0&&(g=g.replace("geoservizi","geoservizi{s}"));var h=g.indexOf("geoservizi.datasiel.net")>0?e.cacheVersionTest:e.cacheVersion;(0,c.default)(p,{tiled:!0,TILESORIGIN:"-20037508,-20037508",tileSize:256,CACHE_VERSION:h}),s=L.tileLayer.wms(g,p),s.on("tileerror",function(e){(0,w.default)(e.tile.currentSrc).then(function(e){console.error("ERRORE WMS"),e&&e.ServiceExceptionReport&&console.log(e.ServiceExceptionReport.ServiceException)}).catch(function(e){return console.error(e)})})}else(0,c.default)(p,{tiled:!1,pane:"tilePane"}),s=L.nonTiledLayer.wms(g,p),s.on("error",function(e){(0,w.default)(e.target.url).then(function(e){console.error("ERRORE WMS"),console.log(e.ServiceExceptionReport.ServiceException)}).catch(function(e){return console.error(e)})});return s.setZIndex(r),s.type="WMS",s.name=t,s},JSON:function(e){function t(e){var t=[];(0,s.default)(e.feature.properties).forEach(function(n){if("stroke"!==n&&"stroke-opacity"!==n&&"stroke-width"!==n&&"fill"!==n&&"fill-opacity"!==n){var i=e.feature.properties[n];("string"==typeof i||i instanceof String||"number"==typeof i)&&t.push({key:n,value:i})}});var n="<div><b>"+C.label+"</b><br><br></div>";return n+="<div>",t.forEach(function(e){n+=e.key+":"+e.value+"<br>"}),n+="</div>"}var n=e.data,i=e.url,o=e.name,r=e.wfsParams,l=e.esParams,u=e.classes,d=e.style,f=e.pointToLayer,g=e.tooltip,m=e.popup,v=e.basePopup,_=e.customPopup,b=e.cluster,w=e.subType,C=e.legend,S=e.onEachFeature,x=e.onFeatureSelect,I=e.filter,O=null,G={};u&&u.length>0&&("POINT"===e.geomSubType?G.pointToLayer=function(e,t){var n;if(u.forEach(function(t){t.filter&&t.filter.key&&t.filter.value?e.properties[t.filter.key]===t.filter.value&&(n=t.style):n=t.style}),n.iconUrl){var i;switch(n.iconUrl){case"default":i=L.icon({iconUrl:"/geoservices/apps/viewer/dist/static/img/marker-icon.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[0,-41]});break;case"default-small":i=L.icon({iconUrl:"/geoservices/apps/viewer/dist/static/img/marker-icon.png",iconSize:[12,20],iconAnchor:[6,10],popupAnchor:[0,-20]});break;default:i=L.icon({iconUrl:n.iconUrl,iconSize:n.iconSize,iconAnchor:n.iconAnchor,popupAnchor:n.popupAnchor})}return L.marker(t,{icon:i})}return L.circleMarker(t,n)}:G.style=function(e){var t;return u.forEach(function(n){n.filter&&n.filter.key&&n.filter.value?e.properties[n.filter.key]===n.filter.value&&(t=n.style):t=n.style}),t},G.filter=function(e){var t=!1;return u.forEach(function(n){n.filter?n.filter.key&&n.filter.value&&e.properties[n.filter.key]===n.filter.value&&(t=!0):t=!0}),t}),d&&(G.style=d),f&&(G.pointToLayer=f),I&&(G.filter=I),(g||m||v||_)&&(G.onEachFeature=function(e,n){g&&(n.options.title=(0,p.default)(g,e.properties)),m&&n.bindPopup((0,p.default)(m,e.properties)),v&&n.bindPopup(t),_&&n.bindPopup(_)}),S&&(G.onEachFeature=S);var T=L.geoJson(n,G);T.name=o,T.geoJson=null,x&&T.on("click",function(e){x(e.layer.feature,e.layer)});var A;if(r&&r.typeName&&r.url&&(A={service:"WFS",version:"2.0.0",request:"GetFeature",srsName:"EPSG:4326",outputFormat:"text/javascript",format_options:"callback: getJson",typeName:r.typeName},i=r.url+(0,h.default)(A)),l&&(A={},l.field?(A.q=l.field+":",l.query?A.q+=l.query:A.q+="*"):l.query&&(A.q=l.query),A.pretty="true",A.size=1e5,i=GV.config.application.proxy+l.url+(0,h.default)(A)),b){var R={showCoverageOnHover:!1};b.options&&(0,c.default)(R,b.options),O=L.markerClusterGroup(R),O.name=o}return i&&(0,y.default)(i).then(function(e){var t=void 0;if("KML"===w){var n=(0,E.default)(e.data);t=M.default.kml(n)}else if("GPX"===w){var i=(0,E.default)(e.data);t=M.default.gpx(i)}else t=a(e.data,l);T.geoJson=t,T.addData(t),b&&(O.geoJson=T.geoJson,O.addLayer(T)),T.fire("ready"),GV.eventBus.$emit("layer-loaded-json",T)}).catch(function(e){return console.error(e)}),n&&(T.geoJson=n,b&&(O.addLayer(T),O.geoJson=T.geoJson,g&&(O.options.title=(0,p.default)(g,feature.properties)),m&&O.bindPopup((0,p.default)(m,feature.properties)),v&&O.bindPopup(t),_&&O.bindPopup(_))),b?O:T}};t.create=o},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(40),r=(a(o),n(6)),s=(a(r),n(37)),l=a(s),c=n(49),u=a(c),d=n(5),f=a(d),p=n(308),g=i(p),h=n(33),m=a(h),v=n(148),_=a(v),y=n(27),b=a(y),w=n(47),C=a(w),M=n(101),S=a(M),E=n(18),x=a(E),I=L.Map.extend({layers:[],baseLayers:[],initialExtent:[],buttons:[],mapOptions:{zoomControl:!1,minZoom:7,maxZoom:20},initialize:function(){(0,u.default)(this.mapOptions,GV.config.application.mapOptions),GV.config.application.mapOptions&&GV.config.application.mapOptions.disableMaxBounds||(this.mapOptions.maxBounds=L.latLngBounds(L.latLng(f.default.MAX_BOUNDS.X_MIN,f.default.MAX_BOUNDS.Y_MIN),L.latLng(f.default.MAX_BOUNDS.X_MAX,f.default.MAX_BOUNDS.Y_MAX)),this.mapOptions.maxBoundsViscosity=1),L.Map.prototype.initialize.call(this,"gv-map",L.extend(L.Map.prototype.options,this.mapOptions)),this.type="leaflet",this.setInitialExtent(),this.setRestrictedExtent(),this.setLoading(),this.loadBaseLayers(),this.loadControls(),this.eventMngr()},eventMngr:function(){var e=this;this.on("zoom",function(){GV.eventBus.$emit("map-zoom",e._zoom)}),GV.eventBus.$on("set-layer-visible",function(t){e.setLayerVisible(t.layer,t.checked),e.setHiliteLayerVisible(t)}),GV.eventBus.$on("set-layer-transparency",function(t){var n=e.getLayerByName(t.layerName);n&&n.setOpacity&&n.setOpacity(t.opacity)}),GV.eventBus.$on("change-base-layer",function(t){e.changeBaseLayer(t.layer)})},setHiliteLayerVisible:function(e){var t=this;GV.config.hilitedLayer&&GV.config.hilitedLayer.forEach(function(n){if(n===e.layer.name){var i=t.getLayerByName("InfoWmsHilite");i.eachLayer(function(t){var n=e.checked?.6:0;t.setStyle({opacity:n})})}})},projToGeoBounds:function(e){var t=e.split(","),n=L.point(t[0],t[1]),i=L.point(t[2],t[3]),a=L.Projection.SphericalMercator.unproject(n),o=L.Projection.SphericalMercator.unproject(i);return L.latLngBounds(a,o)},setExtent:function(e){this.initialExtent=this.projToGeoBounds(e),this.fitBounds(this.initialExtent)},setInitialExtent:function(){if(GV.log("setInitialExtent"),this.mapOptions.center&&this.mapOptions.zoom)GV.log("setView"),this.setView(this.mapOptions.center,this.mapOptions.zoom);else{GV.log("setExtent");var e=this.mapOptions.initialExtent||"830036,5402959,1123018,5597635";this.setExtent(e)}},setRestrictedExtent:function(){this.options.restrictedExtent&&(this.restrictedExtent=this.projToGeoBounds(this.options.restrictedExtent),this.setMaxBounds(this.restrictedExtent))},getExtent:function(){var e=this.getBounds().getSouthWest(),t=this.getBounds().getNorthEast(),n=L.Projection.SphericalMercator.project(e),i=L.Projection.SphericalMercator.project(t);return L.bounds(n,i)},getExtentAsString:function(){var e=this.getBounds().getSouthWest(),t=this.getBounds().getNorthEast(),n=L.Projection.SphericalMercator.project(e),i=L.Projection.SphericalMercator.project(t);return n.x+","+n.y+","+i.x+","+i.y},setLayerVisible:function(e,t){if(t)e.visible=!0,this.loadLayers([e]);else{var n=this.getLayerByName(e.name);n&&this.removeLayer(n)}},layerInRange:function(e){return!e.minScale&&!e.minScale||this.getScale()<e.minScale&&this.getScale()>e.maxScale},loadControls:function(){if(this.mapOptions.controls){var e;this.controls={},this.mapOptions.controls.forEach(function(t){switch(t.name){case"scale":e=L.control.scale({imperial:!1}).addTo(this),this.controls[t]=e}},this)}},loadBaseLayers:function(){var e=this;this.baseLayers=[],GV.config.baseLayers.forEach(function(t){var n=g.create(t,e);e.baseLayers[n.config.type]=n,n&&t.visible&&(n.on("loading",function(){this.loading(!0,n)},e),n.on("load",function(){this.loading(!1,n)},e),n.addTo(e),e.activeBaseLayer=n,GV.config.activeBaseLayer=n.config.name)},this)},loadLayers:function(e){e.forEach(function(e){var t=this;if(!this.getLayerByName(e.name)){var n=g.create(e,this);n&&e.visible&&(n.on("loading",function(){this.loading(!0,n)},this),n.on("load",function(){this.loading(!1,n)},this),n.addTo(this),n.on("ready",function(){e.zoomToLayerExtent&&!function(){var e=new L.latLngBounds;n.eachLayer(function(t){t.getBounds?e.extend(t.getBounds()):e.extend(new L.latLngBounds(t._latlng,t._latlng))}),e&&t.fitBounds(e)}()}))}},this)},filterLayer:function(e,t){var n=this.getLayerByName(e);n&&(t?n.eachLayer(function(e){var i=0;t.forEach(function(t){e.feature.properties[t.key]===t.value&&(i=n.config.opacity||1)}),e.setOpacity(i)}):n.eachLayer(function(e){var t=n.config.opacity||1;e.setOpacity(t)}))},getLayerByName:function(e){var t=null;return this.eachLayer(function(n){n.config&&n.config.name&&n.config.name===e&&(t=n)}),t},changeBaseLayer:function(e){var t=GV.config.getActiveBaseLayer().name;t!==e&&(this.baseLayers[e].addTo(this),this.activeBaseLayer=this.baseLayers[e],this.removeLayer(this.baseLayers[t]),GV.config.setActiveBaseLayer(e))},getScale:function(){var e=591657550/Math.pow(2,this._zoom);return e},setLoading:function(){this._spinning=0,this.on("layerremove",function(e){e.layer.loading&&this.loading(!1),"function"==typeof e.layer.on&&(e.layer.off("load"),e.layer.off("loading"))},this)},loading:function(e,t){e?(0===this._spinning&&(GV.log("start load: "+t.config.name),this._container.style.cursor="progress"),this._spinning++):(this._spinning--,GV.log("end load: "+t.config.name),this._spinning<=0&&(GV.log("FINE CARICAMENTO LAYER"),this._container.style.cursor="default",GV.eventBus.$emit("map-full-loaded",this._zoom)))},addMarker:function(e){var t=this;e.epsg&&"4326"!=e.epsg?(0,C.default)(e.epsg,"4326",e.location[1],e.location[0]).then(function(n){if(n.data.points){var i=n.data.points[0].split(",")[0],a=n.data.points[0].split(",")[1];e.location=[a,i],t.addMarkerToMap(e)}}):this.addMarkerToMap(e)},addMarkerToMap:function(e){var t=L.icon({iconUrl:"/geoservices/apps/viewer/dist/static/img/marker-icon.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[0,-41]}),n={opacity:.8,icon:t,title:e.label};"circle"===e.type?L.circleMarker(e.location,n).addTo(this):L.marker(e.location,n).addTo(this),this.flyTo(e.location,e.zoomLevel||14)},find:function(e){var t=this;if(e.bbox)return void this.zoomToBound(e.bbox,e.epsg,e.maxZoom);if(!(e.values&&"null"!==e.values||e.cqlFilter))return void console.error("Parametri FIND non completi: manca CQL_FILTER o VALUES");var n=e.cqlFilter||(0,_.default)(e),i=e.layers||GV.config.getLayersNameByMapId(e.map),a=i.join(","),o=GV.config.getLayerConfig(i[0]),r=o.wfsParams;r.typeName=a;var s=l.default.service({text:"Ricerca...",background:"rgba(0, 0, 0, 0.8)"});(0,m.default)(r,n).then(function(n){b.default.addHiliteLayer(GV.app.map);var a=t.getLayerByName("InfoWmsHilite");if(n&&n.length>0){a.clearLayers(),a.addData(n);var o=e.maxZoom||15;t.flyToBounds(a.getBounds(),{maxZoom:o}),GV.config.hilitedLayer=i}else e.notFoundAlert&&(0,x.default)("Nessuna Elemento Trovato"),console.warn("Nessuna Elemento Trovato");s.close()}).catch(function(e){console.error(e),s.close()})},zoomTo:function(e,t,n){this.setView(new L.LatLng(e,t),n)},zoomToBound:function(e,t,n){var i=this;if("4326"!=t){var a=t,o="4326";(0,S.default)(a,o,e).then(function(e){if(e.data.data){var t=e.data.data[0][0].split(",").reverse(),n=e.data.data[1][0].split(",").reverse();i.fitBounds([t,n])}})}else{var r=e.split(","),s=[r[0],r[1]],l=[r[2],r[3]];this.fitBounds([s,l])}},getContainerPoint:function(e){var t=this.latLngToContainerPoint(e,this.getZoom());return t},getBbox:function(){var e=GV.app.map.getBounds(),t=GV.app.map.options.crs.project(e.getSouthWest()),n=GV.app.map.options.crs.project(e.getNorthEast());return t.x+","+t.y+","+n.x+","+n.y},clearLayer:function(){var e=this.getLayerByName("InfoWmsHilite");e.clearLayers()}});t.default=I},function(e,t){"use strict";!function(e,t,n){L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(e){L.Util.setOptions(this,e),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[];var t=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,t?this._withAnimation:this._noAnimation),this._markerCluster=t?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(e){if(e instanceof L.LayerGroup)return this.addLayers([e]);if(!e.getLatLng)return this._nonPointGroup.addLayer(e),this;if(!this._map)return this._needsClustering.push(e),this;if(this.hasLayer(e))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(e,this._maxZoom),this._topClusterLevel._recalculateBounds();var t=e,n=this._map.getZoom();if(e.__parent)for(;t.__parent._zoom>=n;)t=t.__parent;return this._currentShownBounds.contains(t.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(e,t):this._animationAddLayerNonAnimated(e,t)),this},removeLayer:function(e){return e instanceof L.LayerGroup?this.removeLayers([e]):e.getLatLng?this._map?e.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(e)),this._removeLayer(e,!0),this._topClusterLevel._recalculateBounds(),e.off("move",this._childMarkerMoved,this),this._featureGroup.hasLayer(e)&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,e)&&this.hasLayer(e)&&this._needsRemoving.push(e),this):(this._nonPointGroup.removeLayer(e),this)},addLayers:function(e){if(!L.Util.isArray(e))return this.addLayer(e);var t,n=this._featureGroup,i=this._nonPointGroup,a=this.options.chunkedLoading,o=this.options.chunkInterval,r=this.options.chunkProgress,s=e.length,l=0,c=!0;if(this._map){var u=(new Date).getTime(),d=L.bind(function(){for(var f=(new Date).getTime();l<s;l++){if(a&&l%200===0){var p=(new Date).getTime()-f;if(p>o)break}if(t=e[l],t instanceof L.LayerGroup)c&&(e=e.slice(),c=!1),this._extractNonGroupLayers(t,e),s=e.length;else if(t.getLatLng){if(!this.hasLayer(t)&&(this._addLayer(t,this._maxZoom),t.__parent&&2===t.__parent.getChildCount())){var g=t.__parent.getAllChildMarkers(),h=g[0]===t?g[1]:g[0];n.removeLayer(h)}}else i.addLayer(t)}r&&r(l,s,(new Date).getTime()-u),l===s?(this._topClusterLevel._recalculateBounds(),this._featureGroup.eachLayer(function(e){e instanceof L.MarkerCluster&&e._iconNeedsUpdate&&e._updateIcon()}),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(d,this.options.chunkDelay)},this);d()}else for(var f=this._needsClustering;l<s;l++)t=e[l],t instanceof L.LayerGroup?(c&&(e=e.slice(),c=!1),this._extractNonGroupLayers(t,e),s=e.length):t.getLatLng?this.hasLayer(t)||f.push(t):i.addLayer(t);return this},removeLayers:function(e){var t,n,i=e.length,a=this._featureGroup,o=this._nonPointGroup,r=!0;if(!this._map){for(t=0;t<i;t++)n=e[t],n instanceof L.LayerGroup?(r&&(e=e.slice(),r=!1),this._extractNonGroupLayers(n,e),i=e.length):(this._arraySplice(this._needsClustering,n),o.removeLayer(n),this.hasLayer(n)&&this._needsRemoving.push(n));return this}if(this._unspiderfy){this._unspiderfy();var s=e.slice(),l=i;for(t=0;t<l;t++)n=s[t],n instanceof L.LayerGroup?(this._extractNonGroupLayers(n,s),l=s.length):this._unspiderfyLayer(n)}for(t=0;t<i;t++)n=e[t],n instanceof L.LayerGroup?(r&&(e=e.slice(),r=!1),this._extractNonGroupLayers(n,e),i=e.length):n.__parent?(this._removeLayer(n,!0,!0),a.hasLayer(n)&&(a.removeLayer(n),n.clusterShow&&n.clusterShow())):o.removeLayer(n);return this._topClusterLevel._recalculateBounds(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),a.eachLayer(function(e){e instanceof L.MarkerCluster&&e._updateIcon()}),this},clearLayers:function(){return this._map||(this._needsClustering=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(e){e.off("move",this._childMarkerMoved,this),delete e.__parent}),this._map&&this._generateInitialClusters(),this},getBounds:function(){var e=new L.LatLngBounds;this._topClusterLevel&&e.extend(this._topClusterLevel._bounds);for(var t=this._needsClustering.length-1;t>=0;t--)e.extend(this._needsClustering[t].getLatLng());return e.extend(this._nonPointGroup.getBounds()),e},eachLayer:function(e,t){var n,i=this._needsClustering.slice(),a=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(i),n=i.length-1;n>=0;n--)a.indexOf(i[n])===-1&&e.call(t,i[n]);this._nonPointGroup.eachLayer(e,t)},getLayers:function(){var e=[];return this.eachLayer(function(t){e.push(t)}),e},getLayer:function(e){var t=null;return e=parseInt(e,10),this.eachLayer(function(n){L.stamp(n)===e&&(t=n)}),t},hasLayer:function(e){if(!e)return!1;var t,n=this._needsClustering;for(t=n.length-1;t>=0;t--)if(n[t]===e)return!0;for(n=this._needsRemoving,t=n.length-1;t>=0;t--)if(n[t]===e)return!1;return!(!e.__parent||e.__parent._group!==this)||this._nonPointGroup.hasLayer(e)},zoomToShowLayer:function(e,t){"function"!=typeof t&&(t=function(){});var n=function n(){!e._icon&&!e.__parent._icon||this._inZoomAnimation||(this._map.off("moveend",n,this),this.off("animationend",n,this),e._icon?t():e.__parent._icon&&(this.once("spiderfied",t,this),e.__parent.spiderfy()))};if(e._icon&&this._map.getBounds().contains(e.getLatLng()))t();else if(e.__parent._zoom<this._map.getZoom())this._map.on("moveend",n,this),this._map.panTo(e.getLatLng());else{var i=function(){this._map.off("movestart",i,this),i=null};this._map.on("movestart",i,this),this._map.on("moveend",n,this),this.on("animationend",n,this),e.__parent.zoomToBounds(),i&&n.call(this)}},onAdd:function(e){this._map=e;var t,n,i;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(e),this._nonPointGroup.addTo(e),this._gridClusters||this._generateInitialClusters(),this._maxLat=e.options.crs.projection.MAX_LATITUDE,t=0,n=this._needsRemoving.length;t<n;t++)i=this._needsRemoving[t],this._removeLayer(i,!0);this._needsRemoving=[],this._zoom=this._map.getZoom(),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),n=this._needsClustering,this._needsClustering=[],this.addLayers(n)},onRemove:function(e){e.off("zoomend",this._zoomEnd,this),e.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(e){for(var t=e;t&&!t._icon;)t=t.__parent;return t||null},_arraySplice:function(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return e.splice(n,1),!0},_removeFromGridUnclustered:function(e,t){for(var n=this._map,i=this._gridUnclustered;t>=0&&i[t].removeObject(e,n.project(e.getLatLng(),t));t--);},_childMarkerMoved:function(e){this._ignoreMove||(e.target._latlng=e.oldLatLng,this.removeLayer(e.target),e.target._latlng=e.latlng,this.addLayer(e.target))},_removeLayer:function(e,t,n){var i=this._gridClusters,a=this._gridUnclustered,o=this._featureGroup,r=this._map;t&&this._removeFromGridUnclustered(e,this._maxZoom);var s,l=e.__parent,c=l._markers;for(this._arraySplice(c,e);l&&(l._childCount--,l._boundsNeedUpdate=!0,!(l._zoom<0));)t&&l._childCount<=1?(s=l._markers[0]===e?l._markers[1]:l._markers[0],i[l._zoom].removeObject(l,r.project(l._cLatLng,l._zoom)),a[l._zoom].addObject(s,r.project(s.getLatLng(),l._zoom)),this._arraySplice(l.__parent._childClusters,l),l.__parent._markers.push(s),s.__parent=l.__parent,l._icon&&(o.removeLayer(l),n||o.addLayer(s))):n&&l._icon||l._updateIcon(),l=l.__parent;delete e.__parent},_isOrIsParent:function(e,t){for(;t;){if(e===t)return!0;t=t.parentNode}return!1},fire:function(e,t,n){if(t&&t.layer instanceof L.MarkerCluster){if(t.originalEvent&&this._isOrIsParent(t.layer._icon,t.originalEvent.relatedTarget))return;e="cluster"+e}L.FeatureGroup.prototype.fire.call(this,e,t,n)},listens:function(e,t){return L.FeatureGroup.prototype.listens.call(this,e,t)||L.FeatureGroup.prototype.listens.call(this,"cluster"+e,t)},_defaultIconCreateFunction:function(e){var t=e.getChildCount(),n=" marker-cluster-";return n+=t<10?"small":t<100?"medium":"large",new L.DivIcon({html:"<div><span>"+t+"</span></div>",className:"marker-cluster"+n,iconSize:new L.Point(40,40)})},_bindEvents:function(){var e=this._map,t=this.options.spiderfyOnMaxZoom,n=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick;(t||i)&&this.on("clusterclick",this._zoomOrSpiderfy,this),n&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),e.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(e){for(var t=e.layer,n=t;1===n._childClusters.length;)n=n._childClusters[0];n._zoom===this._maxZoom&&n._childCount===t._childCount&&this.options.spiderfyOnMaxZoom?t.spiderfy():this.options.zoomToBoundsOnClick&&t.zoomToBounds(),e.originalEvent&&13===e.originalEvent.keyCode&&this._map._container.focus()},_showCoverage:function(e){var t=this._map;this._inZoomAnimation||(this._shownPolygon&&t.removeLayer(this._shownPolygon),e.layer.getChildCount()>2&&e.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(e.layer.getConvexHull(),this.options.polygonOptions),t.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var e=this.options.spiderfyOnMaxZoom,t=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick,i=this._map;(e||n)&&this.off("clusterclick",this._zoomOrSpiderfy,this),t&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),i.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var e=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),e),this._currentShownBounds=e}},_generateInitialClusters:function(){var e=this._map.getMaxZoom(),t=this.options.maxClusterRadius,n=t;"function"!=typeof t&&(n=function(){return t}),this.options.disableClusteringAtZoom&&(e=this.options.disableClusteringAtZoom-1),this._maxZoom=e,this._gridClusters={},this._gridUnclustered={};for(var i=e;i>=0;i--)this._gridClusters[i]=new L.DistanceGrid(n(i)),this._gridUnclustered[i]=new L.DistanceGrid(n(i));this._topClusterLevel=new this._markerCluster(this,-1)},_addLayer:function(e,t){var n,i,a=this._gridClusters,o=this._gridUnclustered;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(e),
e.on("move",this._childMarkerMoved,this);t>=0;t--){n=this._map.project(e.getLatLng(),t);var r=a[t].getNearObject(n);if(r)return r._addChild(e),void(e.__parent=r);if(r=o[t].getNearObject(n)){var s=r.__parent;s&&this._removeLayer(r,!1);var l=new this._markerCluster(this,t,r,e);a[t].addObject(l,this._map.project(l._cLatLng,t)),r.__parent=l,e.__parent=l;var c=l;for(i=t-1;i>s._zoom;i--)c=new this._markerCluster(this,i,c),a[i].addObject(c,this._map.project(r.getLatLng(),i));return s._addChild(c),void this._removeFromGridUnclustered(r,t)}o[t].addObject(e,n)}this._topClusterLevel._addChild(e),e.__parent=this._topClusterLevel},_enqueue:function(e){this._queue.push(e),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var e=0;e<this._queue.length;e++)this._queue[e].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var e=Math.round(this._map._zoom);this._processQueue(),this._zoom<e&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,e)):this._zoom>e?(this._animationStart(),this._animationZoomOut(this._zoom,e)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(e){var t=this._maxLat;return t!==n&&(e.getNorth()>=t&&(e._northEast.lat=1/0),e.getSouth()<=-t&&(e._southWest.lat=-(1/0))),e},_animationAddLayerNonAnimated:function(e,t){if(t===e)this._featureGroup.addLayer(e);else if(2===t._childCount){t._addToMap();var n=t.getAllChildMarkers();this._featureGroup.removeLayer(n[0]),this._featureGroup.removeLayer(n[1])}else t._updateIcon()},_extractNonGroupLayers:function(e,t){var n,i=e.getLayers(),a=0;for(t=t||[];a<i.length;a++)n=i[a],n instanceof L.LayerGroup?this._extractNonGroupLayers(n,t):t.push(n);return t},_overrideMarkerIcon:function(e){var t=e.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[e]}});return t}}),L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-(1/0),-(1/0)),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(e,t){this._animationAddLayerNonAnimated(e,t)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(e,t){var n,i=this._getExpandedVisibleBounds(),a=this._featureGroup;this._ignoreMove=!0,this._topClusterLevel._recursively(i,e,0,function(o){var r,s=o._latlng,l=o._markers;for(i.contains(s)||(s=null),o._isSingleParent()&&e+1===t?(a.removeLayer(o),o._recursivelyAddChildrenToMap(null,t,i)):(o.clusterHide(),o._recursivelyAddChildrenToMap(s,t,i)),n=l.length-1;n>=0;n--)r=l[n],i.contains(r._latlng)||a.removeLayer(r)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(i,t),a.eachLayer(function(e){e instanceof L.MarkerCluster||!e._icon||e.clusterShow()}),this._topClusterLevel._recursively(i,e,t,function(e){e._recursivelyRestoreChildPositions(t)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(i,e,0,function(e){a.removeLayer(e),e.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(e,t){this._animationZoomOutSingle(this._topClusterLevel,e-1,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,e,this._getExpandedVisibleBounds())},_animationAddLayer:function(e,t){var n=this,i=this._featureGroup;i.addLayer(e),t!==e&&(t._childCount>2?(t._updateIcon(),this._forceLayout(),this._animationStart(),e._setPos(this._map.latLngToLayerPoint(t.getLatLng())),e.clusterHide(),this._enqueue(function(){i.removeLayer(e),e.clusterShow(),n._animationEnd()})):(this._forceLayout(),n._animationStart(),n._animationZoomOutSingle(t,this._map.getMaxZoom(),this._map.getZoom())))}},_animationZoomOutSingle:function(e,t,n){var i=this._getExpandedVisibleBounds();e._recursivelyAnimateChildrenInAndAddSelfToMap(i,t+1,n);var a=this;this._forceLayout(),e._recursivelyBecomeVisible(i,n),this._enqueue(function(){if(1===e._childCount){var o=e._markers[0];this._ignoreMove=!0,o.setLatLng(o.getLatLng()),this._ignoreMove=!1,o.clusterShow&&o.clusterShow()}else e._recursively(i,n,0,function(e){e._recursivelyRemoveChildrenFromMap(i,t+1)});a._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(t.body.offsetWidth)}}),L.markerClusterGroup=function(e){return new L.MarkerClusterGroup(e)},L.MarkerCluster=L.Marker.extend({initialize:function(e,t,n,i){L.Marker.prototype.initialize.call(this,n?n._cLatLng||n.getLatLng():new L.LatLng(0,0),{icon:this}),this._group=e,this._zoom=t,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,n&&this._addChild(n),i&&this._addChild(i)},getAllChildMarkers:function(e){e=e||[];for(var t=this._childClusters.length-1;t>=0;t--)this._childClusters[t].getAllChildMarkers(e);for(var n=this._markers.length-1;n>=0;n--)e.push(this._markers[n]);return e},getChildCount:function(){return this._childCount},zoomToBounds:function(){for(var e,t=this._childClusters.slice(),n=this._group._map,i=n.getBoundsZoom(this._bounds),a=this._zoom+1,o=n.getZoom();t.length>0&&i>a;){a++;var r=[];for(e=0;e<t.length;e++)r=r.concat(t[e]._childClusters);t=r}i>a?this._group._map.setView(this._latlng,a):i<=o?this._group._map.setView(this._latlng,o+1):this._group._map.fitBounds(this._bounds)},getBounds:function(){var e=new L.LatLngBounds;return e.extend(this._bounds),e},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(e,t){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(e),e instanceof L.MarkerCluster?(t||(this._childClusters.push(e),e.__parent=this),this._childCount+=e._childCount):(t||this._markers.push(e),this._childCount++),this.__parent&&this.__parent._addChild(e,!0)},_setClusterCenter:function(e){this._cLatLng||(this._cLatLng=e._cLatLng||e._latlng)},_resetBounds:function(){var e=this._bounds;e._southWest&&(e._southWest.lat=1/0,e._southWest.lng=1/0),e._northEast&&(e._northEast.lat=-(1/0),e._northEast.lng=-(1/0))},_recalculateBounds:function(){var e,t,n,i,a=this._markers,o=this._childClusters,r=0,s=0,l=this._childCount;if(0!==l){for(this._resetBounds(),e=0;e<a.length;e++)n=a[e]._latlng,this._bounds.extend(n),r+=n.lat,s+=n.lng;for(e=0;e<o.length;e++)t=o[e],t._boundsNeedUpdate&&t._recalculateBounds(),this._bounds.extend(t._bounds),n=t._wLatLng,i=t._childCount,r+=n.lat*i,s+=n.lng*i;this._latlng=this._wLatLng=new L.LatLng(r/l,s/l),this._boundsNeedUpdate=!1}},_addToMap:function(e){e&&(this._backupLatlng=this._latlng,this.setLatLng(e)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(e,t,n){this._recursively(e,0,n-1,function(e){var n,i,a=e._markers;for(n=a.length-1;n>=0;n--)i=a[n],i._icon&&(i._setPos(t),i.clusterHide())},function(e){var n,i,a=e._childClusters;for(n=a.length-1;n>=0;n--)i=a[n],i._icon&&(i._setPos(t),i.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(e,t,n){this._recursively(e,n,0,function(i){i._recursivelyAnimateChildrenIn(e,i._group._map.latLngToLayerPoint(i.getLatLng()).round(),t),i._isSingleParent()&&t-1===n?(i.clusterShow(),i._recursivelyRemoveChildrenFromMap(e,t)):i.clusterHide(),i._addToMap()})},_recursivelyBecomeVisible:function(e,t){this._recursively(e,0,t,null,function(e){e.clusterShow()})},_recursivelyAddChildrenToMap:function(e,t,n){this._recursively(n,-1,t,function(i){if(t!==i._zoom)for(var a=i._markers.length-1;a>=0;a--){var o=i._markers[a];n.contains(o._latlng)&&(e&&(o._backupLatlng=o.getLatLng(),o.setLatLng(e),o.clusterHide&&o.clusterHide()),i._group._featureGroup.addLayer(o))}},function(t){t._addToMap(e)})},_recursivelyRestoreChildPositions:function(e){for(var t=this._markers.length-1;t>=0;t--){var n=this._markers[t];n._backupLatlng&&(n.setLatLng(n._backupLatlng),delete n._backupLatlng)}if(e-1===this._zoom)for(var i=this._childClusters.length-1;i>=0;i--)this._childClusters[i]._restorePosition();else for(var a=this._childClusters.length-1;a>=0;a--)this._childClusters[a]._recursivelyRestoreChildPositions(e)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(e,t,n){var i,a;this._recursively(e,-1,t-1,function(e){for(a=e._markers.length-1;a>=0;a--)i=e._markers[a],n&&n.contains(i._latlng)||(e._group._featureGroup.removeLayer(i),i.clusterShow&&i.clusterShow())},function(e){for(a=e._childClusters.length-1;a>=0;a--)i=e._childClusters[a],n&&n.contains(i._latlng)||(e._group._featureGroup.removeLayer(i),i.clusterShow&&i.clusterShow())})},_recursively:function(e,t,n,i,a){var o,r,s=this._childClusters,l=this._zoom;if(t>l)for(o=s.length-1;o>=0;o--)r=s[o],e.intersects(r._bounds)&&r._recursively(e,t,n,i,a);else if(i&&i(this),a&&this._zoom===n&&a(this),n>l)for(o=s.length-1;o>=0;o--)r=s[o],e.intersects(r._bounds)&&r._recursively(e,t,n,i,a)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}}),L.Marker.include({clusterHide:function(){return this.options.opacityWhenUnclustered=this.options.opacity||1,this.setOpacity(0)},clusterShow:function(){var e=this.setOpacity(this.options.opacity||this.options.opacityWhenUnclustered);return delete this.options.opacityWhenUnclustered,e}}),L.DistanceGrid=function(e){this._cellSize=e,this._sqCellSize=e*e,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(e,t){var n=this._getCoord(t.x),i=this._getCoord(t.y),a=this._grid,o=a[i]=a[i]||{},r=o[n]=o[n]||[],s=L.Util.stamp(e);this._objectPoint[s]=t,r.push(e)},updateObject:function(e,t){this.removeObject(e),this.addObject(e,t)},removeObject:function(e,t){var n,i,a=this._getCoord(t.x),o=this._getCoord(t.y),r=this._grid,s=r[o]=r[o]||{},l=s[a]=s[a]||[];for(delete this._objectPoint[L.Util.stamp(e)],n=0,i=l.length;n<i;n++)if(l[n]===e)return l.splice(n,1),1===i&&delete s[a],!0},eachObject:function(e,t){var n,i,a,o,r,s,l,c=this._grid;for(n in c){r=c[n];for(i in r)for(s=r[i],a=0,o=s.length;a<o;a++)l=e.call(t,s[a]),l&&(a--,o--)}},getNearObject:function(e){var t,n,i,a,o,r,s,l,c=this._getCoord(e.x),u=this._getCoord(e.y),d=this._objectPoint,f=this._sqCellSize,p=null;for(t=u-1;t<=u+1;t++)if(a=this._grid[t])for(n=c-1;n<=c+1;n++)if(o=a[n])for(i=0,r=o.length;i<r;i++)s=o[i],l=this._sqDist(d[L.Util.stamp(s)],e),l<f&&(f=l,p=s);return p},_getCoord:function(e){return Math.floor(e/this._cellSize)},_sqDist:function(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i}},function(){L.QuickHull={getDistant:function(e,t){var n=t[1].lat-t[0].lat,i=t[0].lng-t[1].lng;return i*(e.lat-t[0].lat)+n*(e.lng-t[0].lng)},findMostDistantPointFromBaseLine:function(e,t){var n,i,a,o=0,r=null,s=[];for(n=t.length-1;n>=0;n--)i=t[n],a=this.getDistant(i,e),a>0&&(s.push(i),a>o&&(o=a,r=i));return{maxPoint:r,newPoints:s}},buildConvexHull:function(e,t){var n=[],i=this.findMostDistantPointFromBaseLine(e,t);return i.maxPoint?(n=n.concat(this.buildConvexHull([e[0],i.maxPoint],i.newPoints)),n=n.concat(this.buildConvexHull([i.maxPoint,e[1]],i.newPoints))):[e[0]]},getConvexHull:function(e){var t,n=!1,i=!1,a=!1,o=!1,r=null,s=null,l=null,c=null,u=null,d=null;for(t=e.length-1;t>=0;t--){var f=e[t];(n===!1||f.lat>n)&&(r=f,n=f.lat),(i===!1||f.lat<i)&&(s=f,i=f.lat),(a===!1||f.lng>a)&&(l=f,a=f.lng),(o===!1||f.lng<o)&&(c=f,o=f.lng)}i!==n?(d=s,u=r):(d=c,u=l);var p=[].concat(this.buildConvexHull([d,u],e),this.buildConvexHull([u,d],e));return p}}}(),L.MarkerCluster.include({getConvexHull:function(){var e,t,n=this.getAllChildMarkers(),i=[];for(t=n.length-1;t>=0;t--)e=n[t].getLatLng(),i.push(e);return L.QuickHull.getConvexHull(i)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:Math.PI/6,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var e,t=this.getAllChildMarkers(),n=this._group,i=n._map,a=i.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,t.length>=this._circleSpiralSwitchover?e=this._generatePointsSpiral(t.length,a):(a.y+=10,e=this._generatePointsCircle(t.length,a)),this._animationSpiderfy(t,e)}},unspiderfy:function(e){this._group._inZoomAnimation||(this._animationUnspiderfy(e),this._group._spiderfied=null)},_generatePointsCircle:function(e,t){var n,i,a=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+e),o=a/this._2PI,r=this._2PI/e,s=[];for(s.length=e,n=e-1;n>=0;n--)i=this._circleStartAngle+n*r,s[n]=new L.Point(t.x+o*Math.cos(i),t.y+o*Math.sin(i))._round();return s},_generatePointsSpiral:function(e,t){var n,i=this._group.options.spiderfyDistanceMultiplier,a=i*this._spiralLengthStart,o=i*this._spiralFootSeparation,r=i*this._spiralLengthFactor*this._2PI,s=0,l=[];for(l.length=e,n=e-1;n>=0;n--)s+=o/a+5e-4*n,l[n]=new L.Point(t.x+a*Math.cos(s),t.y+a*Math.sin(s))._round(),a+=r/s;return l},_noanimationUnspiderfy:function(){var e,t,n=this._group,i=n._map,a=n._featureGroup,o=this.getAllChildMarkers();for(n._ignoreMove=!0,this.setOpacity(1),t=o.length-1;t>=0;t--)e=o[t],a.removeLayer(e),e._preSpiderfyLatlng&&(e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng),e.setZIndexOffset&&e.setZIndexOffset(0),e._spiderLeg&&(i.removeLayer(e._spiderLeg),delete e._spiderLeg);n.fire("unspiderfied",{cluster:this,markers:o}),n._ignoreMove=!1,n._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(e,t){var n,i,a,o,r=this._group,s=r._map,l=r._featureGroup,c=this._group.options.spiderLegPolylineOptions;for(r._ignoreMove=!0,n=0;n<e.length;n++)o=s.layerPointToLatLng(t[n]),i=e[n],a=new L.Polyline([this._latlng,o],c),s.addLayer(a),i._spiderLeg=a,i._preSpiderfyLatlng=i._latlng,i.setLatLng(o),i.setZIndexOffset&&i.setZIndexOffset(1e6),l.addLayer(i);this.setOpacity(.3),r._ignoreMove=!1,r.fire("spiderfied",{cluster:this,markers:e})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(e,t){var i,a,o,r,s,l,c=this,u=this._group,d=u._map,f=u._featureGroup,p=this._latlng,g=d.latLngToLayerPoint(p),h=L.Path.SVG,m=L.extend({},this._group.options.spiderLegPolylineOptions),v=m.opacity;for(v===n&&(v=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),h?(m.opacity=0,m.className=(m.className||"")+" leaflet-cluster-spider-leg"):m.opacity=v,u._ignoreMove=!0,i=0;i<e.length;i++)a=e[i],l=d.layerPointToLatLng(t[i]),o=new L.Polyline([p,l],m),d.addLayer(o),a._spiderLeg=o,h&&(r=o._path,s=r.getTotalLength()+.1,r.style.strokeDasharray=s,r.style.strokeDashoffset=s),a.setZIndexOffset&&a.setZIndexOffset(1e6),a.clusterHide&&a.clusterHide(),f.addLayer(a),a._setPos&&a._setPos(g);for(u._forceLayout(),u._animationStart(),i=e.length-1;i>=0;i--)l=d.layerPointToLatLng(t[i]),a=e[i],a._preSpiderfyLatlng=a._latlng,a.setLatLng(l),a.clusterShow&&a.clusterShow(),h&&(o=a._spiderLeg,r=o._path,r.style.strokeDashoffset=0,o.setStyle({opacity:v}));this.setOpacity(.3),u._ignoreMove=!1,setTimeout(function(){u._animationEnd(),u.fire("spiderfied",{cluster:c,markers:e})},200)},_animationUnspiderfy:function(e){var t,n,i,a,o,r,s=this,l=this._group,c=l._map,u=l._featureGroup,d=e?c._latLngToNewLayerPoint(this._latlng,e.zoom,e.center):c.latLngToLayerPoint(this._latlng),f=this.getAllChildMarkers(),p=L.Path.SVG;for(l._ignoreMove=!0,l._animationStart(),this.setOpacity(1),n=f.length-1;n>=0;n--)t=f[n],t._preSpiderfyLatlng&&(t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng,r=!0,t._setPos&&(t._setPos(d),r=!1),t.clusterHide&&(t.clusterHide(),r=!1),r&&u.removeLayer(t),p&&(i=t._spiderLeg,a=i._path,o=a.getTotalLength()+.1,a.style.strokeDashoffset=o,i.setStyle({opacity:0})));l._ignoreMove=!1,setTimeout(function(){var e=0;for(n=f.length-1;n>=0;n--)t=f[n],t._spiderLeg&&e++;for(n=f.length-1;n>=0;n--)t=f[n],t._spiderLeg&&(t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),e>1&&u.removeLayer(t),c.removeLayer(t._spiderLeg),delete t._spiderLeg);l._animationEnd(),l.fire("unspiderfied",{cluster:s,markers:f})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(e){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(e))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(e){this._spiderfied&&this._spiderfied.unspiderfy(e)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(e){e._spiderLeg&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),this._map.removeLayer(e._spiderLeg),delete e._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(e){return e?e instanceof L.MarkerClusterGroup?e=e._topClusterLevel.getAllChildMarkers():e instanceof L.LayerGroup?e=e._layers:e instanceof L.MarkerCluster?e=e.getAllChildMarkers():e instanceof L.Marker&&(e=[e]):e=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(e),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(e),this},_flagParentsIconsNeedUpdate:function(e){var t,n;for(t in e)for(n=e[t].__parent;n;)n._iconNeedsUpdate=!0,n=n.__parent},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(e){e instanceof L.MarkerCluster&&e._iconNeedsUpdate&&e._updateIcon()})},_refreshSingleMarkerModeMarkers:function(e){var t,n;for(t in e)n=e[t],this.hasLayer(n)&&n.setIcon(this._overrideMarkerIcon(n))}}),L.Marker.include({refreshIconOptions:function(e,t){var n=this.options.icon;return L.setOptions(n,e),this.setIcon(n),t&&this.__parent&&this.__parent._group.refreshClusters(this),this}})}(window,document)},function(e,t){"use strict";L.NonTiledLayer=L.Layer.extend({includes:L.Evented,options:{attribution:"",opacity:1,zIndex:void 0,minZoom:0,maxZoom:18,pointerEvents:null,errorImageUrl:"data:image/gif;base64,R0lGODlhAQABAHAAACH5BAUAAAAALAAAAAABAAEAAAICRAEAOw==",bounds:L.latLngBounds([-85.05,-180],[85.05,180])},url:"",initialize:function(e){L.setOptions(this,e)},onAdd:function(e){this._map=e,this._div||(this._div=L.DomUtil.create("div","leaflet-image-layer"),this.options.pointerEvents&&(this._div.style["pointer-events"]=this.options.pointerEvents),void 0!==this.options.zIndex&&(this._div.style.zIndex=this.options.zIndex),void 0!==this.options.opacity&&(this._div.style.opacity=this.options.opacity)),this.getPane().appendChild(this._div),this._bufferImage=this._initImage(),this._currentImage=this._initImage(),this._update()},onRemove:function(e){this.getPane().removeChild(this._div),this._div.removeChild(this._bufferImage),this._div.removeChild(this._currentImage)},addTo:function(e){return e.addLayer(this),this},getEvents:function(){var e={moveend:this._update,zoom:this._viewreset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},getElement:function(){return this._div},setOpacity:function(e){return this.options.opacity=e,this._div&&L.DomUtil.setOpacity(this._div,this.options.opacity),this},setZIndex:function(e){return e&&(this.options.zIndex=e,this._div&&(this._div.style.zIndex=e)),this},bringToFront:function(){return this._div&&this._pane.appendChild(this._div),this},bringToBack:function(){return this._div&&this._pane.insertBefore(this._div,this._pane.firstChild),this},getAttribution:function(){return this.options.attribution},_initImage:function(e){var e=L.DomUtil.create("img","leaflet-image-layer");return this._div.appendChild(e),this._map.options.zoomAnimation&&L.Browser.any3d?L.DomUtil.addClass(e,"leaflet-zoom-animated"):L.DomUtil.addClass(e,"leaflet-zoom-hide"),L.extend(e,{galleryimg:"no",onselectstart:L.Util.falseFn,onmousemove:L.Util.falseFn,onload:L.bind(this._onImageLoad,this),onerror:L.bind(this._onImageError,this)}),e},redraw:function(){return this._map&&this._update(),this},_animateZoom:function(e){this._currentImage._bounds&&this._animateImage(this._currentImage,e),this._bufferImage._bounds&&this._animateImage(this._bufferImage,e)},_animateImage:function(e,t){var n=this._map.getZoomScale(t.zoom),i=this._map._latLngToNewLayerPoint(e._bounds.getNorthWest(),t.zoom,t.center);L.DomUtil.setTransform(e,i,n)},_resetImage:function(e){var t=new L.Bounds(this._map.latLngToLayerPoint(e._bounds.getNorthWest()),this._map.latLngToLayerPoint(e._bounds.getSouthEast())),n=t.getSize();L.DomUtil.setPosition(e,t.min),e.style.width=n.x+"px",e.style.height=n.y+"px"},_getClippedBounds:function(){var e=this._map.getBounds(),t=e.getSouth(),n=e.getNorth(),i=e.getWest(),a=e.getEast(),o=this.options.bounds.getSouth(),r=this.options.bounds.getNorth(),s=this.options.bounds.getWest(),l=this.options.bounds.getEast();t<o&&(t=o),n>r&&(n=r),i<s&&(i=s),a>l&&(a=l);var c=new L.LatLng(n,i),u=new L.LatLng(t,a);return new L.LatLngBounds(c,u)},_viewreset:function(){this._bufferImage._bounds&&this._resetImage(this._bufferImage),this._currentImage._bounds&&this._resetImage(this._currentImage)},_update:function(){if(this._map.getZoom()<this.options.minZoom||this._map.getZoom()>this.options.maxZoom)return void(this._div.style.visibility="hidden");this._div.style.visibility="visible",this._bufferImage._bounds&&this._resetImage(this._bufferImage);var e=this._getClippedBounds(),t=this._map.latLngToContainerPoint(e.getNorthWest()),n=this._map.latLngToContainerPoint(e.getSouthEast()),i=n.x-t.x,a=n.y-t.y;if(!(i<32||a<32)){this._currentImage._bounds=e,this._resetImage(this._currentImage);var o=this._currentImage;this.getImageUrl?o.src=this.getImageUrl(e.getNorthWest(),e.getSouthEast(),i,a):this.getImageUrlAsync(e.getNorthWest(),e.getSouthEast(),i,a,function(e,t){o.src=e,o.tag=t}),this.url=o.src,L.DomUtil.setOpacity(this._currentImage,0)}},_onImageError:function(e){this.fire("error",e),L.DomUtil.addClass(e.target,"invalid"),e.target.src!==this.options.errorImageUrl&&(e.target.src=this.options.errorImageUrl,this._onImageDone(!1,e))},_onImageLoad:function(e){if(e.target.src!==this.options.errorImageUrl){if(L.DomUtil.removeClass(e.target,"invalid"),e.target.src!==this.url)return;this._onImageDone(!0,e)}},_onImageDone:function(e,t){L.DomUtil.setOpacity(this._currentImage,1),L.DomUtil.setOpacity(this._bufferImage,0),this._addInteraction&&this._addInteraction(this._currentImage.tag);var n=this._bufferImage;this._bufferImage=this._currentImage,this._currentImage=n,this.fire("load",t)}}),L.nonTiledLayer=function(){return new L.NonTiledLayer},L.NonTiledLayer.WMS=L.NonTiledLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},options:{crs:null,uppercase:!1},initialize:function(e,t){this._wmsUrl=e;var n=L.extend({},this.defaultWmsParams);for(var i in t)L.NonTiledLayer.prototype.options.hasOwnProperty(i)||L.Layer.prototype.options.hasOwnProperty(i)||(n[i]=t[i]);this.wmsParams=n,L.setOptions(this,t)},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,L.NonTiledLayer.prototype.onAdd.call(this,e)},getImageUrl:function(e,t,n,i){var a=this.wmsParams;a.width=n,a.height=i;var o=this._crs.project(e),r=this._crs.project(t),s=this._wmsUrl,l=l=(this._wmsVersion>=1.3&&this._crs===L.CRS.EPSG4326?[r.y,o.x,o.y,r.x]:[o.x,r.y,r.x,o.y]).join(",");return s+L.Util.getParamString(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+l},setParams:function(e,t){return L.extend(this.wmsParams,e),t||this.redraw(),this}}),L.nonTiledLayer.wms=function(e,t){return new L.NonTiledLayer.WMS(e,t)}},function(e,t){"use strict";L.controlCredits=function(e){return new L.CreditsControl(e)},L.CreditsControl=L.Control.extend({initialize:function(e){L.setOptions(this,e)},onAdd:function(e){this._map=e;var t=L.DomUtil.create("div","leaflet-credits-control",t),n=L.DomUtil.create("img","",t);return n.src=this.options.image,this._container=t}})},function(e,t){"use strict";L.drawLocal={draw:{toolbar:{actions:{title:"Annulla disegno",text:"Annulla"},finish:{title:"Termina disegno",text:"Termina"},undo:{title:"Cancella ultimo punto",text:"Cancella ultimo punto"},buttons:{polyline:"Disegna linea",polygon:"Disegna poligono",rectangle:"Disegna rettangolo",circle:"Disegna cerchio",marker:"Disegna punto",circlemarker:"Disegna punto"}},handlers:{circle:{tooltip:{start:"Seleziona e trascina per disegnare il cerchio."},radius:"Radius"},circlemarker:{tooltip:{start:"Seleziona la mappa per disegnare il punto."}},marker:{tooltip:{start:"Seleziona la mappa per disegnare il punto."}},polygon:{tooltip:{start:"Seleziona per iniziare il disegno del poligono.",cont:"Seleziona per continuare il disegno del poligono.",end:"Seleziona il primo vertice oppure effettua <br>un doppio click per completare il poligono."}},polyline:{error:"<strong>Errore:</strong> intersezione non ammessa!",tooltip:{start:"Seleziona per iniziare il disegno della linea.",cont:"Seleziona per continuare o doppio click per completare la linea.",end:"Seleziona per continuare o doppio click per completare la linea."}},rectangle:{tooltip:{start:"Seleziona e trascina per disegnare il rettangolo."}},simpleshape:{tooltip:{end:"Rilascia il bottone del mouse per terminare il disegno."}}}},edit:{toolbar:{actions:{save:{title:"Salva i cambiamenti",text:"Salva"},cancel:{title:"Annulla modifiche",text:"Annulla"},clearAll:{title:"Cancella tutte le geometrie",text:"Cancella Tutto"}},buttons:{edit:"Modifica Geometrie",editDisabled:"Nessuna geometria da modificare",remove:"Cancella Geometrie",removeDisabled:"Nessuna geometria da cacellare"}},handlers:{edit:{tooltip:{text:"Trascina il punto o i vertici per modificare le geometrie.",subtext:'Seleziona "Annulla" per annulare le modifiche.'}},remove:{tooltip:{text:"Seleziona una geometria per rimuoverla."}}}}}},function(e,t){"use strict";L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(e,t,n){this._poly=e,n&&n.drawError&&(n.drawError=L.Util.extend({},this.options.drawError,n.drawError)),this._latlngs=t,L.setOptions(this,n)},_defaultShape:function(){return L.LineUtil.isFlat(this._latlngs)?this._latlngs:this._latlngs[0]},addHooks:function(){var e=this._poly,t=e._path;e instanceof L.Polygon||(e.options.fill=!1,e.options.editing&&(e.options.editing.fill=!1)),t&&e.options.editing.className&&(e.options.original.className&&e.options.original.className.split(" ").forEach(function(e){L.DomUtil.removeClass(t,e)}),e.options.editing.className.split(" ").forEach(function(e){L.DomUtil.addClass(t,e)})),e.setStyle(e.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var e=this._poly,t=e._path;t&&e.options.editing.className&&(e.options.editing.className.split(" ").forEach(function(e){L.DomUtil.removeClass(t,e)}),e.options.original.className&&e.options.original.className.split(" ").forEach(function(e){L.DomUtil.addClass(t,e)})),e.setStyle(e.options.original),e._map&&(e._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){var e=this;this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var t,n,i,a,o,r=this._latlngs;if(Array.isArray(r[0]))r.forEach(function(n,a){var o=n.length;for(e._markers.push([]),t=0,o;t<o;t++)i=e._createMarkerRing(n[t],a,t),i.on("click",e._onMarkerClick,e),i.on("contextmenu",e._onContextMenu,e),e._markers[a].push(i)}),r.forEach(function(i,r){var s=i.length;for(t=0,n=s-1;t<s;n=t++)(0!==t||L.Polygon&&e._poly instanceof L.Polygon)&&(a=e._markers[r][n],o=e._markers[r][t],e._createMiddleMarker(a,o),e._updatePrevNext(a,o))});else{r.forEach(function(t,n){i=e._createMarker(t,n),i.on("click",e._onMarkerClick,e),i.on("contextmenu",e._onContextMenu,e),e._markers.push(i)});var s=r.length;for(t=0,n=s-1;t<s;n=t++)(0!==t||L.Polygon&&this._poly instanceof L.Polygon)&&(a=this._markers[n],o=this._markers[t],this._createMiddleMarker(a,o),this._updatePrevNext(a,o))}},_createMarkerRing:function(e,t,n){var i=new L.Marker.Touch(e,{draggable:!0,icon:this.options.icon});return i._origLatLng=e,i._index=n,i._ring=t,i.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(i),i},_createMarker:function(e,t){var n=new L.Marker.Touch(e,{draggable:!0,icon:this.options.icon});return n._origLatLng=e,n._index=t,n.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(n),n},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var e=this._latlngs,t=[].splice.apply(e,arguments);return this._poly._convertLatLngs(e,!0),this._poly.redraw(),t},_spliceLatLngsInsert:function(e,t,n){var i=this._latlngs[e];i.splice(t,0,n),this._poly._convertLatLngs(i,!0),this._poly.redraw()},_spliceLatLngsRemove:function(e,t){var n=this._latlngs[e];n.splice(t,1),this._poly._convertLatLngs(n,!0),this._poly.redraw()},_removeMarker:function(e){var t=e._index,n=e._ring;this._markerGroup.removeLayer(e),
Array.isArray(this._markers[n])?(this._markers[n].splice(t,1),this._spliceLatLngsRemove(n,t),this._updateIndexesRings(n,t,-1)):(this._markers.splice(t,1),this._spliceLatLngs(t,1),this._updateIndexes(t,-1)),e.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(e){var t=e.target,n=this._poly;if(L.extend(t._origLatLng,t._latlng),t._middleLeft&&t._middleLeft.setLatLng(this._getMiddleLatLng(t._prev,t)),t._middleRight&&t._middleRight.setLatLng(this._getMiddleLatLng(t,t._next)),n.options.poly){var i=n._map._editTooltip;if(!n.options.poly.allowIntersection&&n.intersects()){var a=n.options.color;n.setStyle({color:this.options.drawError.color}),0!==L.version.indexOf("0.7")&&t.dragging._draggable._onUp(e),this._onMarkerClick(e),i&&i.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){n.setStyle({color:a}),i&&i.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-(1/0),-(1/0));var o=this._poly.getLatLngs();this._poly._convertLatLngs(o,!0),this._poly.redraw(),this._poly.fire("editdrag")},_checkMinPoints:function(e){var t=L.Polygon&&this._poly instanceof L.Polygon?4:3;if(void 0===e._ring){if(this._defaultShape().length<t)return!1}else if(this._poly._rings[e._ring].length<t)return!1;return!0},_onMarkerClick:function(e){var t=e.target;this._checkMinPoints(t)&&(this._removeMarker(t),this._updatePrevNext(t._prev,t._next),t._middleLeft&&this._markerGroup.removeLayer(t._middleLeft),t._middleRight&&this._markerGroup.removeLayer(t._middleRight),t._prev&&t._next?this._createMiddleMarker(t._prev,t._next):t._prev?t._next||(t._prev._middleRight=null):t._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(e){var t=e.target;this._poly;this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:t,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(e){var t=this._map.mouseEventToLayerPoint(e.originalEvent.touches[0]),n=this._map.layerPointToLatLng(t),i=e.target;L.extend(i._origLatLng,n),i._middleLeft&&i._middleLeft.setLatLng(this._getMiddleLatLng(i._prev,i)),i._middleRight&&i._middleRight.setLatLng(this._getMiddleLatLng(i,i._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexesRings:function(e,t,n){this._markerGroup.eachLayer(function(i){i._ring==e&&i._index>t&&(i._index+=n)})},_updateIndexes:function(e,t){this._markerGroup.eachLayer(function(n){n._index>e&&(n._index+=t)})},_createMiddleMarker:function(e,t){void 0!==e._ring&&(t._ring=e._ring),void 0!==t._ring&&(e._ring=t._ring);var n,i,a,o=this._getMiddleLatLng(e,t),r=this._createMarker(o,e._ring);r._ring=e._ring,r.setOpacity(.6),e._middleRight=t._middleLeft=r,i=function(){r.off("touchmove",i,this);var a=t._index,s=t._ring;r._index=a,r.off("click",n,this).on("click",this._onMarkerClick,this),o.lat=r.getLatLng().lat,o.lng=r.getLatLng().lng,void 0===s?(this._spliceLatLngs(a,0,o),this._markers.splice(a,0,r),this._updateIndexes(a,1)):(this._spliceLatLngsInsert(s,a,o),this._markers[s].splice(a,0,r),this._updateIndexesRings(s,a,1)),t._index++,this._updatePrevNext(e,r),this._updatePrevNext(r,t),r.setOpacity(1),this._poly.fire("editstart")},a=function(){r.off("dragstart",i,this),r.off("dragend",a,this),r.off("touchmove",i,this),this._createMiddleMarker(e,r),this._createMiddleMarker(r,t)},n=function(){i.call(this),a.call(this),this._fireEdit()},r.on("click",n,this).on("dragstart",i,this).on("dragend",a,this).on("touchmove",i,this),this._markerGroup.addLayer(r)},_updatePrevNext:function(e,t){e&&(e._next=t),t&&(t._prev=e)},_getMiddleLatLng:function(e,t){var n=this._poly._map,i=n.project(e.getLatLng()),a=n.project(t.getLatLng());return n.unproject(i._add(a)._divideBy(2))}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(_[e.type]){var n=_[e.type](e,t);return n.legend=e.legend,n.config=e,n}throw new Error("Layer di tipo "+e.type+" non gestito")}Object.defineProperty(t,"__esModule",{value:!0}),t.create=void 0;var o=n(50),r=i(o),s=n(86),l=i(s),c=n(49),u=i(c),d=n(5),f=i(d),p=n(152),g=i(p),h=n(147),m=i(h),v='<a href="https://www.esri.com/">Esri</a>',_={BLANK:function(){return null},OSM:function(e){e.legend={label:"OpenStreetMap"};var t=new ol.layer.Tile({source:new ol.source.OSM});return t.config=e,t.name=e.name,t},TILESERVER_GL:function(e){var t=new ol.layer.Tile({source:new ol.source.XYZ({url:"https://geoservizi.regione.liguria.it/styles/"+e+"/{z}/{x}/{y}.png"})});return t},TS_STREETS:function(e){var t=this.TILESERVER_GL("streets");return t.config=e,t.name=e.name,t},TS_DARK_MATTER:function(e){var t=this.TILESERVER_GL("dark-matter");return t.config=e,t.name=e.name,t},TS_POSITRON:function(e){var t=this.TILESERVER_GL("positron");return t.config=e,t.name=e.name,t},TS_MONOCHROME:function(e){var t=this.TILESERVER_GL("monochrome");return t.config=e,t.name=e.name,t},TS_TONER:function(e){var t=this.TILESERVER_GL("toner");return t.config=e,t.name=e.name,t},ESRI_IMAGERY:function(e){var t=new ol.layer.Tile({source:new ol.source.XYZ({attributions:"DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"})});return e.name=e.type,t.name=e.type,t},ESRI_STREETS:function(e){var t=new ol.layer.Tile({source:new ol.source.XYZ({attributions:"&copy; "+v+", 'USGS, NOAA",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}"})});return e.name=e.type,t.name=e.type,t},ESRI_TOPOGRAPHIC:function(e){var t=new ol.layer.Tile({source:new ol.source.XYZ({attributions:"&copy; "+v+",USGS, NOAA",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}"})});return e.name=e.type,t.name=e.type,t},ESRI_GRAY:function(e){var t=new ol.layer.Tile({source:new ol.source.XYZ({attributions:"&copy; "+v+", HERE, DeLorme, MapmyIndia, OpenStreetMap contributors",url:"https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}"})});return e.name=e.type,t.name=e.type,t},ESRI_DARKGRAY:function(e){var t=new ol.layer.Tile({source:new ol.source.XYZ({attributions:"&copy; "+v+", HERE, DeLorme, MapmyIndia, OpenStreetMap contributors",url:"https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}"})});return e.name=e.type,t.name=e.type,t},MAPBOX:function(e){var t=e.mapboxConfig.userName,n=e.mapboxConfig.accessToken,i=e.mapboxConfig.style;return L.tileLayer("https://api.mapbox.com/styles/v1/"+t+"/"+i+"/tiles/256/{z}/{x}/{y}?access_token="+n,{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",maxZoom:20})},MAPBOX_VIABILITA:function(e){var t="liguriadigitale",n="pk.eyJ1IjoibGlndXJpYWRpZ2l0YWxlIiwiYSI6ImNqbzQzajk0bDEwa3EzcWt1ZThqazFqcGIifQ.dUhSMka7mXTD2inJGmlBMw",i="cjo442ih3407m2slfdwc1hib5",a="Carta della Viabilità";return e.legend={label:a},L.tileLayer("https://api.mapbox.com/styles/v1/"+t+"/"+i+"/tiles/256/{z}/{x}/{y}?access_token="+n,{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",maxZoom:20})},MAPBOX_MONOCHROME:function(e){var t="liguriadigitale",n="pk.eyJ1IjoibGlndXJpYWRpZ2l0YWxlIiwiYSI6ImNqbzQzajk0bDEwa3EzcWt1ZThqazFqcGIifQ.dUhSMka7mXTD2inJGmlBMw",i="ckgj8eqz80t8q19theln5gwrk",a="Mapbox Monochrome";return e.legend={label:a},L.tileLayer("https://api.mapbox.com/styles/v1/"+t+"/"+i+"/tiles/256/{z}/{x}/{y}?access_token="+n,{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",maxZoom:20})},MAPBOX_STREETS:function(e){var t="liguriadigitale",n="pk.eyJ1IjoibGlndXJpYWRpZ2l0YWxlIiwiYSI6ImNqbzQzajk0bDEwa3EzcWt1ZThqazFqcGIifQ.dUhSMka7mXTD2inJGmlBMw",i="ckgj8f25p0o6y19jxk0ykap41",a="Mapbox Streets";return e.legend={label:a},L.tileLayer("https://api.mapbox.com/styles/v1/"+t+"/"+i+"/tiles/256/{z}/{x}/{y}?access_token="+n,{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",maxZoom:20})},MAPBOX_VIABILITA_SATELLITARE:function(e){var t="liguriadigitale",n="pk.eyJ1IjoibGlndXJpYWRpZ2l0YWxlIiwiYSI6ImNqbzQzajk0bDEwa3EzcWt1ZThqazFqcGIifQ.dUhSMka7mXTD2inJGmlBMw",i="cjo43w54x00di2spieg5itsgf",a="Carta ibrida";return e.legend={label:a},L.tileLayer("https://api.mapbox.com/styles/v1/"+t+"/"+i+"/tiles/256/{z}/{x}/{y}?access_token="+n,{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",maxZoom:20})},STAMEN_TERRAIN:function(e){return e.legend={label:"Stamen Terrain"},L.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}.{ext}",{attribution:'Map tiles by <a href="https://stamen.com">Stamen Design</a>, <a href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"})},STAMEN_TONER_LIGHT:function(e){return e.legend={label:"Stamen Toner Light"},L.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.{ext}",{attribution:'Map tiles by <a href="https://stamen.com">Stamen Design</a>, <a href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"})},RL_CARTE_BASE_NC25:function(){var e=2125,t="L7273";return this.WMS({idMap:e,visible:!1,name:t,cacheMinZoomLevel:12,maxScale:1e4,minScale:2e5,wmsParams:{name:t,format:"image/jpeg",url:"https://geoservizi.regione.liguria.it/geoserver/M"+e+"/wms?"},zIndex:0,attribution:"Regione Liguria"})},RL_CARTE_BASE:function(){return this.WMS({visible:!1,name:"CARTE_DI_BASE",cacheMinZoomLevel:8,wmsParams:{name:"CARTE_DI_BASE",format:"image/jpeg",url:"https://geoservizi.regione.liguria.it/geoserver/gwc/service/wms?"},zIndex:1,attribution:"Regione Liguria"})},RL_ORTOFOTO_2016:function(){var e=1828,t="L5802";return this.WMS({idMap:e,visible:!1,name:t,cacheMinZoomLevel:8,wmsParams:{name:t,format:"image/png",url:"https://geoservizi.regione.liguria.it/geoserver/M"+e+"/wms?"},zIndex:0,attribution:"Ortofoto 20cm/ ©2016 CONSORZIO TeA - TUTTI I DIRITTI RISERVATI"})},RL_ORTOFOTO_2013:function(){var e=1661,t="L4419";return this.WMS({idMap:e,visible:!1,name:t,cacheMinZoomLevel:8,wmsParams:{name:t,format:"image/jpeg",url:"https://geoservizi.regione.liguria.it/geoserver/M"+e+"/wms?"},zIndex:0,attribution:"Immagine di proprietà AGEA"})},RL_ORTOFOTO_2010:function(){var e=1505,t="L3861";return this.WMS({idMap:e,visible:!1,name:t,cacheMinZoomLevel:8,wmsParams:{name:t,format:"image/jpeg",url:"https://geoservizi.regione.liguria.it/geoserver/M"+e+"/wms?"},zIndex:0,attribution:"Immagine di proprietà AGEA"})},RL_ORTOFOTO_2007:function(){var e=1361,t="L3463";return this.WMS({idMap:e,visible:!1,name:t,cacheMinZoomLevel:8,wmsParams:{name:t,format:"image/png",url:"https://geoservizi.regione.liguria.it/geoserver/M"+e+"/wms?"},zIndex:0,attribution:"Immagine di proprietà AGEA"})},RL_ORTOFOTO_2000:function(){var e=48,t="L48";return this.WMS({idMap:e,visible:!1,name:t,cacheMinZoomLevel:8,wmsParams:{name:t,format:"image/jpeg",url:"https://geoservizi.regione.liguria.it/geoserver/M"+e+"/wms?"},zIndex:0})},WMS:function(e){var t=e.name,n=e.cacheMinZoomLevel,i=e.minScale,a=e.maxScale,o=e.wmsParams,r=e.zIndex,s=e.idMap;GV.log("layerFactory - Creazione Layer WMS: "+t);var l=null,c=!!n,d=e.opacity||1;e.minZoom=i?(0,g.default)(i):8,e.maxZoom=a?(0,g.default)(a)-1:20;var p={transparent:!0,format:o.format,styles:o.styles||"",client:"GV2"};o.cql_filter&&(p.cql_filter=o.cql_filter),o.sld&&(p.sld=o.sld);var h=o.url;if(c){s?(h=h.replace("M"+s,"gwc/service"),p.layers="M"+s+":"+o.name):p.layers=o.name;var v=null;f.default.USE_SUBDOMAINS&&h.indexOf("geoservizi.regione.liguria.it")>0&&(v=[h.replace("geoservizi","geoservizi1"),h.replace("geoservizi","geoservizi2")]);var _=h.indexOf("geoservizi.datasiel.net")>0?e.cacheVersionTest:e.cacheVersion;(0,u.default)(p,{SRS:"EPSG:3857",TILESORIGIN:"-20037508,-20037508",width:256,height:256,CACHE_VERSION:_});var y={params:p};v?y.urls=v:y.url=h,l=new ol.layer.Tile({source:new ol.source.TileWMS(y)}),l.on("tileerror",function(e){(0,m.default)(e.tile.currentSrc).then(function(e){console.error("ERRORE WMS"),e&&e.ServiceExceptionReport&&console.log(e.ServiceExceptionReport.ServiceException)}).catch(function(e){return console.error(e)})})}else{(0,u.default)(p,{layers:o.name,ratio:1});var L={url:h,params:p};l=new ol.layer.Image({url:h,source:new ol.source.ImageWMS(L)}),l.on("error",function(e){(0,m.default)(e.target.url).then(function(e){console.error("ERRORE WMS"),console.log(e.ServiceExceptionReport.ServiceException)}).catch(function(e){return console.error(e)})})}return l.setOpacity(d),l.setZIndex(r),l.type="WMS",l.config=e,l.name=t,l},JSON:function(e){return this.Vector(e)},Vector:function(e){var t=e.name,n=e.data,i=e.url,a=e.style,o=(e.cluster,e.zIndex),s=e.onFeatureSelect,c=e.subType,u=e.basePopup,d=e.legend,f=(e.onClick,e.onMouseOver,e.onMouseOut,e.filter,void 0);switch(c){case"KML":f=new ol.format.KML({});break;case"GPX":f=new ol.format.GPX({});break;default:f=new ol.format.GeoJSON({})}var p=new ol.source.Vector({format:f,url:i}),g=new ol.layer.Vector({source:p,style:a});if(n){var h=g.getSource();h.clear(!0);var m=!0,v=!1,_=void 0;try{for(var y,L=(0,l.default)(n.features);!(m=(y=L.next()).done);m=!0){var b=y.value,w=(new ol.format.GeoJSON).readFeature(b,{featureProjection:"EPSG:3857"});h.addFeature(w)}}catch(e){v=!0,_=e}finally{try{!m&&L.return&&L.return()}finally{if(v)throw _}}}return s&&GV.app.map.on("click",function(e){GV.app.map.map.forEachFeatureAtPixel(evt.pixel,s,{layerFilter:function(e){return e===g}})}),u&&!function(){var e=new ol.Overlay({element:document.getElementById("ol-popup"),autoPan:!0,autoPanAnimation:{duration:250}});GV.app.map.addOverlay(e),GV.app.map.on("pointermove",function(e){var t=GV.app.map.map.hasFeatureAtPixel(GV.app.map.getEventPixel(e.originalEvent));document.getElementById("gv-map").style.cursor=t?"pointer":""}),GV.app.map.on("click",function(t){var n=t.pixel;GV.app.map.forEachFeatureAtPixel(n,function(n){var i=n.getProperties(),a=document.getElementById("ol-popup-closer");a.onclick=function(){return e.setPosition(void 0),a.blur(),!1};var o=document.getElementById("ol-popup-content");o.innerHTML="<p><b>LIVELLO</b> "+d.label+"</p><br>",(0,r.default)(i).forEach(function(e){var t=i[e];("string"==typeof t||t instanceof String||"number"==typeof t)&&(o.innerHTML+="<b>"+e+":</b> "+t+" <br>")}),e.setPosition(t.coordinate)})})}(),o&&g.setZIndex(o),g.set("altitudeMode","clampToGround"),g.name=t,g},MBS:function(e,t){console.log(e),olms(t,e.url).then(function(e){})},MBS_STREETS:function(e,t){var n="streets",i="https://geoservizi.regione.liguria.it/tileserver-gl/styles/"+n+"/style.json";return this.MBS(i,t.map),null}};t.create=a},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(40),r=(a(o),n(6)),s=(a(r),n(37)),l=a(s),c=n(86),u=a(c),d=n(49),f=a(d),p=n(5),g=(a(p),n(315)),h=i(g),m=n(33),v=a(m),_=n(148),y=a(_),b=n(27),w=a(b),C=n(47),M=a(C),S=n(101),E=(a(S),n(149)),x=a(E),I=n(18),O=a(I),G={type:"openlayers",layers:[],baseLayers:[],initialExtent:[],map:null,zoom:null,buttons:[],options:{type:"openlayers",zoomControl:!1,minZoom:7,maxZoom:20},initialize:function(){(0,f.default)(this.options,GV.config.application.mapOptions);var e={};if(this.options.restrictedExtent&&(console.log("SET RESCTRICTED EXTENT"),e.extent=this.extentToArray(this.options.restrictedExtent)),this.map=new ol.Map({target:"gv-map",layers:[],controls:[],view:new ol.View(e)}),this.createPopupDiv(),this.setInitialExtent(),this.zoom=this.getView().getZoom(),this.loadBaseLayer(),this.eventMngr(),this.options.ol3d){var t=(n(301),new olcs.OLCesium({map:this.map}));this.scene=t.getCesiumScene();var i=new Cesium.GeoserverTerrainProvider({url:"https://geoservizi.regione.liguria.it/geoserver/DTM/ows",layerName:"DTM_dbtopo_5m_wgs84"});this.scene.terrainProvider=i,this.options.enable3d&&t.setEnabled(!0),this.ol3d=t}return this},eventMngr:function(){var e=this;this.map.on("moveend",function(t){var n=e.getView().getZoom();e.zoom!=n&&(GV.eventBus.$emit("map-zoom",n),e.zoom=n)}),this.map.on("rendercomplete",function(t){GV.log("FINE CARICAMENTO MAPPA"),GV.eventBus.$emit("map-full-loaded",e._zoom)}),GV.eventBus.$on("set-layer-visible",function(t){e.setLayerVisible(t.layer,t.checked),e.setHiliteLayerVisible(t.layer,t.checked)}),GV.eventBus.$on("set-layer-transparency",function(t){e.setLayerOpacity(t.layerName,t.opacity)}),GV.eventBus.$on("change-base-layer",function(t){e.changeBaseLayer(t.layer)})},addInteraction:function(e){this.map.addInteraction(e)},removeInteraction:function(e){this.map.removeInteraction(e)},getView:function(){return this.map.getView()},setLayerOpacity:function(e,t){var n=this.getLayerByName(e);n&&n.setOpacity&&n.setOpacity(t)},setExtent:function(e){var t=this.extentToArray(e);this.getView().fit(t)},extentToArray:function(e){var t=e.split(",").map(function(e){return parseFloat(e)});return t},setInitialExtent:function(){GV.log("setInitialExtent");var e=this.options.initialExtent||"830036,5402959,1123018,5597635";this.setExtent(e)},setView:function(e,t){this.getView().setCenter(e),this.getView().setZoom(t)},getExtent:function(){var e=this.getBounds().getSouthWest(),t=this.getBounds().getNorthEast(),n=L.Projection.SphericalMercator.project(e),i=L.Projection.SphericalMercator.project(t);return L.bounds(n,i)},getExtentAsString:function(){return this.getView().calculateExtent().join(",")},setLayerVisible:function(e,t){var n=this.getLayerByName(e.name);console.log("setLayerVisible",n.getOpacity()),n.setVisible(t),e.visible=t},setHiliteLayerVisible:function(e,t){if(GV.config.hilitedLayer){var n=!0,i=!1,a=void 0;try{for(var o,r=(0,u.default)(GV.config.hilitedLayer);!(n=(o=r.next()).done);n=!0){var s=o.value;if(s[0]===e.name){var l=this.getLayerByName("InfoWmsHilite");l.setVisible(t)}}}catch(e){i=!0,a=e}finally{try{!n&&r.return&&r.return()}finally{if(i)throw a}}}},layerInRange:function(e){return!e.minScale&&!e.minScale||this.getScale()<e.minScale&&this.getScale()>e.maxScale},loadBaseLayer:function(){var e=this;GV.config.baseLayers.forEach(function(t){t.visible&&e.setBaseLayer(t)})},setBaseLayer:function(e){if("BLANK"===e.name)return void(GV.config.activeBaseLayer="BLANK");var t=h.create(e,this);t&&(t.config.baseLayer=!0,console.log("Creato baseLayer",t),this.map.getLayers().insertAt(0,t),this.activeBaseLayer=t,GV.config.activeBaseLayer=t.config.name)},changeBaseLayer:function(e){if(GV.config.activeBaseLayer!==e){var t=this.getLayerByName(GV.config.activeBaseLayer);console.log(t),this.removeLayer(t);var n=GV.config.getBaseLayerConfig(e);this.setBaseLayer(n)}},getLayerByName:function(e){var t=null;return this.map.getLayers().forEach(function(n){n.name&&n.name===e&&(t=n)}),t},getScale:function(){var e=591657550/Math.pow(2,this.getView().getZoom());return e},setZoom:function(e){this.getView().setZoom(e)},removeLayer:function(e){this.map.removeLayer(e)},addOverlay:function(e){this.map.addOverlay(e)},getTarget:function(){return this.map.getTarget()},getEventPixel:function(e){return this.map.getEventPixel(e)},getSize:function(){return this.map.getSize()},createPopupDiv:function(){(0,x.default)({elId:"ol-popup",containerId:"body"}),(0,x.default)({elId:"ol-popup-closer",containerId:"ol-popup"}),(0,x.default)({elId:"ol-popup-content",containerId:"ol-popup"})},loadLayers:function(e){var t=this;e.forEach(function(e){if(!t.getLayerByName(e.name)){var n=h.create(e,t);n&&(t.map.addLayer(n),t.setLayerVisible(e,e.visible),e.zoomToLayerExtent&&!function(){var e=n.getSource();e.once("change",function(){"ready"===e.getState()&&n.getSource().getFeatures().length>0&&t.getView().fit(e.getExtent())})}())}})},clearLayer:function(){var e=this.getLayerByName("InfoWmsHilite"),t=e.getSource();t.clear(!0)},addMarker:function(e){var t=this;e.epsg&&"4326"!=e.epsg?(0,M.default)(e.epsg,"4326",e.location[1],e.location[0]).then(function(n){if(n.data.points){var i=n.data.points[0].split(",")[0],a=n.data.points[0].split(",")[1];e.location=[a,i],t.addMarkerToMap(e)}}):this.addMarkerToMap(e)},addMarkerToMap:function(e){var t=new ol.Feature({geometry:new ol.geom.Point(ol.proj.fromLonLat([e.location.lng,e.location.lat])),name:e.label});t.setStyle(new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:"/geoservices/apps/viewer/dist/static/img/marker-icon.png"})}));var n=new ol.layer.Vector({source:new ol.source.Vector({features:[t]}),zIndex:1e3});this.map.addLayer(n),GV.app.map.getView().fit(t.getGeometry().getExtent(),{maxZoom:e.zoomLevel||14})},find:function(e){var t=this;if(e.bbox)return void this.zoomToBound(e.bbox,e.epsg,e.maxZoom);if(!(e.values&&"null"!==e.values||e.cqlFilter))return void console.error("Parametri FIND non completi: manca CQL_FILTER o VALUES");var n=e.cqlFilter||(0,y.default)(e),i=e.layers||GV.config.getLayersNameByMapId(e.map),a=i.join(","),o=GV.config.getLayerConfig(i[0]),r=o.wfsParams;r.typeName=a;var s=l.default.service({text:"Ricerca...",background:"rgba(0, 0, 0, 0.8)"});(0,v.default)(r,n).then(function(n){w.default.addHiliteLayer(GV.app.map);var a=t.getLayerByName("InfoWmsHilite");if(n&&n.length>0){var o=a.getSource();o.clear(!0);var r=!0,l=!1,c=void 0;try{for(var d,f=(0,u.default)(n);!(r=(d=f.next()).done);r=!0){var p=d.value,g=(new ol.format.GeoJSON).readFeature(p,{featureProjection:"EPSG:3857"});o.addFeature(g)}}catch(e){l=!0,c=e}finally{try{!r&&f.return&&f.return()}finally{if(l)throw c}}var h=e.maxZoom||15;t.getView().fit(a.getSource().getExtent(),{maxZoom:h}),GV.config.hilitedLayer=i}else e.notFoundAlert&&(0,O.default)("Nessuna Elemento Trovato"),console.warn("Nessuna Elemento Trovato");s.close()}).catch(function(e){console.error(e),s.close()})},zoomTo:function(e,t,n){this.setView(new L.LatLng(e,t),n)},zoomToBound:function(e,t,n){if("3857"!=t){var i=this.extentToArray(e),a=new ol.proj.Projection({code:"EPSG:"+t}),o=ol.proj.transformExtent(i,a,"EPSG:3857");this.getView().fit(o)}else this.setExtent(e)},on:function(e,t){this.map.on(e,t)},off:function(e){this.map.removeEventListener(e)},forEachFeatureAtPixel:function(e,t,n){this.map.forEachFeatureAtPixel(e,t,n)}};t.default=G},function(e,t){"use strict";Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t=Object(this),n=t.length>>>0,i=arguments[1],a=0;a!==n;a++)if(e.call(i,this[a],a,t))return this[a]}})},function(e,t){"use strict";Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],a=0;a<n;){var o=t[a];if(e.call(i,o,a,t))return a;a++}return-1}})},function(e,t){"use strict";String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(t||0,e.length)===e})},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=""+s.default.RL_AG_APP_LISTA_MAPPE+e;return o.default.get(t).then(function(e){return e.data.data})};var a=n(4),o=i(a),r=n(5),s=i(r)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=GV.globals.ATLANTE_GEOCHIMICO_CONFIG_URL;return o.default.get(e).then(function(e){return e.data.data})};var a=n(4),o=i(a)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(35),o=i(a),r=n(34),s=i(r),l=n(4),c=i(l);t.default=function(){function e(e){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(t){var n,i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/geoservices/REST/utils/autorizza_nam/GEOVIEWER/"+t,e.next=3,c.default.get(n);case 3:return i=e.sent,e.abrupt("return",i.data);case 5:case"end":return e.stop()}},e,this)}));return e}()},,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(){var e=l.default.RL_ENTI_SERVICE;return r.default.get(e).then(function(e){return e.data.data})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(4),r=i(o),s=n(5),l=i(s)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(35),o=i(a),r=n(34),s=i(r),l=n(4),c=i(l);t.default=function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="/geoservices/apps/viewer/pages/env.json",e.next=3,c.default.get(t);case 3:return n=e.sent,e.abrupt("return",n.data.ENV);case 5:case"end":return e.stop()}},e,this)}));return e}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=e.features;return e.features.forEach(function(e,n){e.id=t+"."+n}),n}function o(e,t){var n={};return s.default.get(e,{params:n}).then(function(e){var n=e.data,i=a(n,t);return i})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=n(4),s=i(r)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};return r.default.get(e,{params:n}).then(function(e){var n={layerName:t,id:"1",label:"1",text:e.data,properties:null};return[n]})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(4),r=i(o)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=(new u).xml_str2json(e),i=[];return n.FeatureCollection&&n.FeatureCollection.featureMember&&(Array.isArray(n.FeatureCollection.featureMember)?n.FeatureCollection.featureMember.forEach(function(e,n){var a=e[(0,s.default)(e)[0]],o={},r=!1;(0,s.default)(a).forEach(function(e,t){"__prefix"!==e&&"__text"!==e&&"toString"!==e&&(o[e]=a[e].__text,r=!0)}),r&&i.push({type:"Feature",id:t+"."+n,geometry:null,properties:o})}):!function(){var e=n.FeatureCollection.featureMember,a=e[(0,s.default)(e)[0]],o={},r=!1,l=0;(0,s.default)(a).forEach(function(e,t){"__prefix"!==e&&"__text"!==e&&"toString"!==e&&(o[e]=a[e].__text,r=!0)}),r&&i.push({type:"Feature",id:t+"."+l,geometry:null,properties:o})}()),n.msGMLOutput&&(0,s.default)(n.msGMLOutput).forEach(function(e,t){e.indexOf("_layer")>=0&&!function(){var t=e.replace("_layer",""),a=n.msGMLOutput[e];(0,s.default)(a).forEach(function(e,n){var o=a[e];Array.isArray(o)?o.forEach(function(e){var a=e;i.push({type:"Feature",id:t+"."+n,geometry:null,properties:a})}):!function(){var e={},a=!1;(0,s.default)(o).forEach(function(t,n){"__prefix"!==t&&"__text"!==t&&"toString"!==t&&(e[t]=o[t],a=!0)}),a&&i.push({type:"Feature",id:t+"."+n,geometry:null,properties:e})}()})}()}),i}function o(e,t){var n={};return c.default.get(e,{params:n}).then(function(e){var n=e.data,i=a(n,t);return i})}Object.defineProperty(t,"__esModule",{value:!0});var r=n(50),s=i(r);t.default=o;var l=n(4),c=i(l),u=n(111)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=t.layerName?t.layerName.replace("L",""):null,i=t.layer&&t.layer.legend?t.layer.legend.label:null;return r.default.post(l.default.RL_XSL_INFO_SERVICE,{data:{xslUrl:e,gml:t.gml,idLayer:n,titolo:i,featureAttributes:t.properties,text:t.text}}).then(function(e){return e.data})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(4),r=i(o),s=n(5),l=i(s),c=n(112);i(c)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t="/geoservices/REST/fototeca/voli/";return e&&(t+="?bbox="+e),o.default.get(t).then(function(e){return e.data.data})};var a=n(4),o=i(a),r=n(5);i(r)},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return o.default.get(e).then(function(e){return e.data.data})};var a=n(4),o=i(a)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return o.default.get(e).then(function(e){return e.data.features})};var a=n(4),o=i(a)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(35),o=i(a),r=n(34),s=i(r),l=n(4),c=i(l);t.default=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.default.get(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={mapview:"7.43,43.75;10.00,44.70",searchtext:e.replace("INCROCIO","@")};return o.default.get(s.default.HERE_GEOCODE_PROXY,{params:t}).then(function(e){return e.data.Response.View[0].Result.map(function(e){return{relevance:e.Relevance,match_level:e.MatchLevel,match_type:e.MatchType,formatted_address:e.Location.Address.Label,place_id:e.Location.LocationId,geometry:{location:{lat:e.Location.DisplayPosition.Latitude,lng:e.Location.DisplayPosition.Longitude}}}})})};var a=n(4),o=i(a),r=n(5),s=i(r)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={"boundary.gid":"whosonfirst:macroregion:404227507",text:e};return o.default.get("http://10.11.6.189:4000/v1/search",{params:t}).then(function(e){return e.data})};var a=n(4),o=i(a)},,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var i=t&&"genio"===t&&n?"/geoservices/REST/genioweb/get_token/"+n+"/":"/geoservices/REST/sigmater/get_token/";return i+=e,o.default.get(i).then(function(e){return e.data})};var a=n(4),o=i(a)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t="/geoservices/REST/sigmater/get_token_bbox/"+e;return o.default.get(t).then(function(e){return e.data})};var a=n(4),o=i(a)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i){var a="/geoservices/REST/config/ag_insert_coordinate?idSession="+e+"&coord_x="+t+"&coord_y="+n+"&esito="+i;o.default.get(a).then(function(e){GV.globals.flagInsert=!0,e.data.success?(GV.globals.flagInsert=!0,
(0,s.default)()?window.history.back(-1):window.close()):alert("Attenzione: - "+e.data.message)})};var a=n(4),o=i(a),r=n(153),s=i(r)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return o.default.post("/geoservices/REST/genioweb/insert_geom_pratica",{headers:{Accept:"text/xml"},data:e}).then(function(e){return e.data})};var a=n(4),o=i(a),r=n(5);i(r)},,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=i(a),r=n(644),s=i(r),l=n(678),c=i(l),u=n(673),d=i(u),f=n(652),p=i(f),g=n(680),h=i(g),m=n(692),v=i(m),_=n(683),y=i(_),L=n(695),b=i(L),w=n(685),C=i(w),M=n(684),S=i(M),E=n(693),x=i(E),I=n(694),O=i(I),G=n(626),T=i(G),A=n(679),R=i(A),V=n(640),k=i(V),P=n(697),z=i(P),B=n(698),N=i(B),F=n(696),D=i(F),j=n(675),U=i(j),W=n(689),Z=i(W),q=n(691),H=i(q),X=n(682),Y=i(X),$=n(681),Q=i($),J=n(639),K=i(J),ee=n(686),te=i(ee),ne=n(687),ie=i(ne),ae=n(688),oe=i(ae),re=n(690),se=i(re),le=n(645),ce=i(le),ue=n(671),de=i(ue),fe=n(699),pe=i(fe),ge=[];ge.push({name:"gv-geocoder"}),o.default.component("gv-geocoder",s.default),ge.push({name:"gv-search"}),o.default.component("gv-search",c.default),ge.push({name:"gv-scalebar"}),o.default.component("gv-scalebar",d.default),ge.push({name:"gv-inner-html"}),o.default.component("gv-inner-html",p.default),ge.push({name:"gv-add-map-button"}),o.default.component("gv-add-map-button",h.default),ge.push({name:"gv-info-button"}),o.default.component("gv-info-button",v.default),ge.push({name:"gv-coordinate-button"}),o.default.component("gv-coordinate-button",y.default),ge.push({name:"gv-measure-button"}),o.default.component("gv-measure-button",b.default),ge.push({name:"gv-draw-button"}),o.default.component("gv-draw-button",C.default),ge.push({name:"gv-download-totale-button"}),o.default.component("gv-download-totale-button",S.default),ge.push({name:"gv-layer-search-button"}),o.default.component("gv-layer-search-button",x.default),ge.push({name:"gv-layer-search-topo-button"}),o.default.component("gv-layer-search-topo-button",O.default),ge.push({name:"atlante-geochimico-livelli"}),o.default.component("atlante-geochimico-livelli",T.default),ge.push({name:"gv-map-selezione-fogli"}),o.default.component("gv-map-selezione-fogli",R.default),ge.push({name:"gv-gas"}),o.default.component("gv-gas",k.default),ge.push({name:"gv-ricerca-particella-button"}),o.default.component("gv-ricerca-particella-button",z.default),ge.push({name:"gv-ricerca-catastale-button"}),o.default.component("gv-ricerca-catastale-button",N.default),ge.push({name:"gv-print-button"}),o.default.component("gv-print-button",D.default),ge.push({name:"gv-scuoladigitale-legend"}),o.default.component("gv-scuoladigitale-legend",U.default),ge.push({name:"gv-genio-localizza-button"}),o.default.component("gv-genio-localizza-button",Z.default),ge.push({name:"gv-genio-seleziona-particelle-button"}),o.default.component("gv-genio-seleziona-particelle-button",H.default),ge.push({name:"gv-cem-elaborazioni-button"}),o.default.component("gv-cem-elaborazioni-button",Y.default),ge.push({name:"gv-back-button"}),o.default.component("gv-back-button",Q.default),ge.push({name:"gv-fototeca-voli"}),o.default.component("gv-fototeca-voli",K.default),ge.push({name:"gv-fototeca-carrello-button"}),o.default.component("gv-fototeca-carrello-button",te.default),ge.push({name:"gv-fototeca-scheda-volo-button"}),o.default.component("gv-fototeca-scheda-volo-button",ie.default),ge.push({name:"gv-fototeca-selezione-territoriale-button"}),o.default.component("gv-fototeca-selezione-territoriale-button",oe.default),ge.push({name:"gv-genio-pratiche-collegate-button"}),o.default.component("gv-genio-pratiche-collegate-button",se.default),ge.push({name:"gv-geocoder-pelias"}),o.default.component("gv-geocoder-pelias",ce.default),ge.push({name:"rqa-livelli"}),o.default.component("rqa-livelli",de.default),ge.push({name:"gv-switch3D-button"}),o.default.component("gv-switch3D-button",pe.default),t.default=ge},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,o.default)("FIND_MAP")||(0,o.default)("ID")||(0,o.default)("id"),t=(0,o.default)("FIND_LAYERS")?(0,o.default)("FIND_LAYERS").split(","):null,n=(0,o.default)("FIND_FIELDS"),i=(0,o.default)("FIND_VALUES"),a=(0,o.default)("FIND_CQL_FILTER");return{map:e,layers:t,fields:n,values:i,cqlFilter:a}};var a=n(151),o=i(a)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=null;window.document.body.setAttribute("ondrop","GV.dragbox.drop(event)"),t.default={start:function(e){n=[e.screenX,e.screenY],e.dataTransfer.setData("text/plain",e.target.id)},end:function(e,t){var i=document.getElementById(t),a=window.getComputedStyle(i,null),o=[e.screenX,e.screenY];i.style.top=Number(a.top.replace("px",""))+(o[1]-n[1])+"px",i.style.left=Number(a.left.replace("px",""))+(o[0]-n[0])+"px"},drop:function(e){"text"===e.target.type&&e.preventDefault()}}},function(e,t){"use strict";function n(){return window.location.href.split(":")[0]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=/\{ *([\w_\-]+) *\}/g;return e.replace(n,function(e,n){var i=t[n];if(void 0===i)throw new Error("No value provided for variable "+e);return"function"==typeof i&&(i=i(t)),i})}},function(e,t){"use strict";function n(){return window.matchMedia("(pointer: coarse)").matches}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(e){GV.config.debug&&console.log(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(e,t,n){var a=function(e,i){for(var a,o=i.split(/\.+/),r=0;r<o.length;r++)0==r&&(a=t),a=a[o[r]];return"function"==typeof a&&(a=n?a.apply(null,n):a()),"undefined"==typeof a?"undefined":a};return e.replace(i,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=/\$\{([\w.]+?)\}/g},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},,function(e,t){},function(e,t){},,function(e,t){},,,function(e,t){},function(e,t){},,,function(e,t){},function(e,t){},,,,,function(e,t){},function(e,t){},,function(e,t){},,function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,,function(e,t){},,,,,,function(e,t){},function(e,t){},,,function(e,t){},function(e,t){},,,,,,function(e,t){},,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,function(e,t){},,function(e,t){},function(e,t){},function(e,t){},,function(e,t){},function(e,t){},function(e,t){},,,function(e,t){},,function(e,t){},,,,function(e,t){},,,,,function(e,t){},,,,,function(e,t){},,function(e,t){},function(e,t){},function(e,t){},,,,function(e,t){},function(e,t){},function(e,t){},,function(e,t){},function(e,t){},function(e,t){},,,,,,function(e,t){},function(e,t){},function(e,t){},,,,,,,,,,,,,,,,,function(e,t,n){var i=n(489);"string"==typeof i&&(i=[[e.id,i,""]]);n(85)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(586);"string"==typeof i&&(i=[[e.id,i,""]]);n(85)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(594);"string"==typeof i&&(i=[[e.id,i,""]]);n(85)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(595);"string"==typeof i&&(i=[[e.id,i,""]]);n(85)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(596);"string"==typeof i&&(i=[[e.id,i,""]]);n(85)(i,{});i.locals&&(e.exports=i.locals)},,,,,,,,function(e,t,n){var i,a;n(542),i=n(220);var o=n(743);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(584),n(583),i=n(221);var o=n(779);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-fac8391c",e.exports=i},,function(e,t,n){var i,a;n(531),i=n(223);var o=n(734);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-544d1aac",e.exports=i},,,function(e,t,n){var i,a;n(530),i=n(226);var o=n(733);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},,,,,,function(e,t,n){var i,a;n(544),i=n(233);var o=n(745);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-65c0f46b",e.exports=i},,function(e,t,n){var i,a;n(541),i=n(236);var o=n(742);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-63c00d10",e.exports=i},function(e,t,n){var i,a;n(502),i=n(237);var o=n(709);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-1c17d97c",e.exports=i},,,,function(e,t,n){var i,a;n(513),i=n(241);var o=n(719);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-387aaf4a",e.exports=i},function(e,t,n){var i,a;n(516),i=n(242);var o=n(722);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-3e5de3c2",e.exports=i},function(e,t,n){var i,a;n(543),i=n(243);var o=n(744);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-651fb2b4",e.exports=i},,function(e,t,n){var i,a;n(545),i=n(245);var o=n(746);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-65d960b6",e.exports=i},,,,function(e,t,n){var i,a;n(560),i=n(249);var o=n(759);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-7ef00eca",e.exports=i},,,,,function(e,t,n){var i,a;n(514),i=n(254);var o=n(720);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-38ebc9c6",e.exports=i},function(e,t,n){var i,a;n(509),i=n(255);var o=n(715);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(526),i=n(256);var o=n(730);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},,,,,,,,,function(e,t,n){var i,a;n(520),i=n(268);var o=n(725);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-449b0539",e.exports=i},,,function(e,t,n){var i,a;n(499),n(498),i=n(271);var o=n(707);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-1a6c287c",e.exports=i},,function(e,t,n){var i,a;n(549),i=n(273);var o=n(750);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-714520f0",e.exports=i},,function(e,t,n){var i,a;n(515),i=n(275);var o=n(721);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},,,function(e,t,n){var i,a;n(554),i=n(278);var o=n(754);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(551),n(550),i=n(279);var o=n(751);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-72e9a1d6",e.exports=i},function(e,t,n){var i,a;n(493),i=n(281);var o=n(703);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(511),i=n(282);var o=n(717);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(537),i=n(283);var o=n(738);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(574),i=n(284);var o=n(771);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(577),i=n(285);var o=n(774);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(582),i=n(286);var o=n(778);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(540),i=n(287);var o=n(741);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(495),i=n(288);var o=n(705);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(503),i=n(289);var o=n(710);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(539),i=n(290);var o=n(740);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(564),i=n(291);var o=n(763);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(527),i=n(292);var o=n(731);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(558),i=n(293);var o=n(757);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(553),i=n(294);var o=n(753);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(576),i=n(295);var o=n(773);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(492),i=n(296);var o=n(702);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(508),i=n(297);var o=n(714);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(555),i=n(298);var o=n(755);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(490),i=n(299);var o=n(700);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t,n){var i,a;n(547),i=n(300);var o=n(748);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=i},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-button-ricerca-catastale",title:"Ricerche Catastali"},on:{click:e.onClick}})},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-measure",title:e.title},on:{click:e.onClick}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-button-add-map",title:"Aggiungi Mappe"},on:{click:e.onClick}})},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-button-fototeca-scheda-volo",title:"Scheda Volo"},on:{click:e.onClick}})},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"rqa gv-color-scheme"},[e._c("div",{staticClass:"rqa-title gv-color-scheme"},[e._v("\n    RQA: Indicatori\n    "),e._c("button",{class:e.toggleCollapseClass(),attrs:{size:"mini",title:"Nascondi Pannello"},on:{click:e.hidePanel}}),e._v(" "),e._c("button",{staticClass:"gv-color-scheme rqa-download-button el-icon-download",attrs:{id:"rqa-download-button",title:"Download Dati",size:"mini"},on:{click:e.download}})]),e._v(" "),e._c("div",{staticClass:"rqa-wrapper gv-color-scheme",attrs:{id:"rqa-wrapper"}},[e._c("div",{staticClass:"combo"},[e._c("el-select",{attrs:{placeholder:"Tipologia Indicatori",size:"mini"},on:{change:e.onChangeTipo},model:{value:e.tipo,callback:function(t){e.tipo=t},expression:"tipo"}},e._l(e.tipi,function(t){return e._c("el-option",{key:t.id,attrs:{value:t.id,label:t.label}})}))],1),e._v(" "),e._c("div",{directives:[{name:"show",rawName:"v-show",value:e.showIndicatoriGiorno,expression:"showIndicatoriGiorno"}],staticClass:"combo"},[e._c("el-select",{attrs:{filterable:"",placeholder:"Indicatori Giornalieri",size:"mini"},on:{change:e.onChangeIndicatore},model:{value:e.indicatore,callback:function(t){e.indicatore=t},expression:"indicatore"}},e._l(e.indicatoriGiorno,function(t){return e._c("el-option",{key:t.id,attrs:{value:t.id,label:t.nome}})}))],1),e._v(" "),e._c("div",{directives:[{name:"show",rawName:"v-show",value:e.showIndicatoriGiorno,expression:"showIndicatoriGiorno"}],staticClass:"combo"},[e._c("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"Giorno","value-format":"yyyy-MM-dd"},model:{value:e.giorno,callback:function(t){e.giorno=t},expression:"giorno"}})],1),e._v(" "),e._c("div",{directives:[{name:"show",rawName:"v-show",value:e.showIndicatoriAnno,expression:"showIndicatoriAnno"}],staticClass:"combo"},[e._c("el-select",{attrs:{filterable:"",placeholder:"Indicatori Annuali",size:"mini"},on:{change:e.onChangeIndicatore},model:{value:e.indicatore,callback:function(t){e.indicatore=t},expression:"indicatore"}},e._l(e.indicatoriAnno,function(t){return e._c("el-option",{key:t.id,attrs:{value:t.id,label:t.nome}})}))],1),e._v(" "),e._c("div",{directives:[{name:"show",rawName:"v-show",value:e.showIndicatoriAnno,expression:"showIndicatoriAnno"}],staticClass:"combo"},[e._c("el-select",{attrs:{filterable:"",placeholder:"Anno",size:"mini"},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},e._l(e.anni,function(t){return e._c("el-option",{key:t.id,attrs:{value:t.id,label:t.label}})}))],1),e._v(" "),e._c("div",{directives:[{name:"show",rawName:"v-show",value:e.showLegend,expression:"showLegend"}]},[e._c("gv-iframe-panel",{staticClass:"gv-iframe-panel",attrs:{src:e.legendUrl,height:"141",width:"230"}})],1)])])},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"gv-gas gv-inverted-color-scheme",attrs:{id:"gv-gas"}},[e._c("gv-title",{directives:[{name:"draggable",rawName:"v-draggable"}],attrs:{title:e.title,divId:"gv-gas",noClose:!0,collapsible:"gv-gas-body"}}),e._v(" "),e._c("div",{staticClass:"gv-gas-body",attrs:{id:"gv-gas-body"}},[e._c("el-select",{staticClass:"gv-gas-combo",attrs:{placeholder:"Seleziona Area",size:"mini"},on:{change:e.onChangeArea},model:{value:e.area,callback:function(t){e.area=t},expression:"area"}},e._l(e.aree,function(t){return e._c("el-option",{key:t.codice,attrs:{value:t.codice,label:t.descrizione}})})),e._v(" "),e._c("el-select",{staticClass:"gv-gas-combo",attrs:{placeholder:"Seleziona Modulo",size:"mini"},model:{value:e.modulo,callback:function(t){e.modulo=t},expression:"modulo"}},e._l(e.moduli,function(t){return e._c("el-option",{key:t.codice,attrs:{value:t.codice,label:t.descrizione}})})),e._v(" "),e._c("div",{staticClass:"gv-gas-checkbox"},[e._c("el-checkbox",{model:{value:e.soloPostiDisponibili,callback:function(t){e.soloPostiDisponibili=t},expression:"soloPostiDisponibili"}},[e._v("Solo strutture con posti disponibili")])],1),e._v(" "),e._c("el-select",{staticClass:"gv-gas-combo",attrs:{placeholder:"Seleziona Provincia",size:"mini"},on:{change:e.onChangeProvincia},model:{value:e.provincia,callback:function(t){e.provincia=t},expression:"provincia"}},e._l(e.province,function(t){return e._c("el-option",{key:t.codice,attrs:{value:t.codice,label:t.descrizione}})})),e._v(" "),e._c("el-select",{staticClass:"gv-gas-combo",attrs:{placeholder:"Seleziona ASL",size:"mini"},on:{change:e.onChangeASL},model:{value:e.asl,callback:function(t){e.asl=t},expression:"asl"}},e._l(e.listaAsl,function(t){return e._c("el-option",{key:t.codice,attrs:{value:t.codice,label:t.descrizione}})})),e._v(" "),e._c("el-button",{attrs:{id:"gv-gas-submit",type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.submit}},[e._v("Visualizza")]),e._v(" "),e._c("el-button",{attrs:{id:"gv-gas-elenco",type:"primary",size:"mini",icon:"el-icon-document"},on:{click:e.elenco}},[e._v("Elenco Strutture")])],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-button-fototeca-selezione-territoriale",title:"Selezione Territoriale"},on:{click:e.onClick}})},staticRenderFns:[]}},,,,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-print-button",title:"Stampa"},on:{click:e.onClick}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"gv-inverted-color-scheme",attrs:{id:"gv-legend"}},[e._c("div",{staticClass:"gv-legend-title gv-color-scheme",attrs:{id:"gv-legend-title"}},[e._c("b",[e._v("LEGENDA")]),e._v(" "),e._c("button",{class:e.toggleCollapseClass(),attrs:{size:"mini",title:"Nascondi Legenda"},on:{click:e.hideLegend}}),e._v(" "),e._c("el-button",{directives:[{name:"show",rawName:"v-show",value:e.options.showAddMap,expression:"options.showAddMap"}],staticClass:"gv-color-scheme gv-legend-buttons ms ms-layers-add",attrs:{id:"gv-legend-add-map",title:"Aggiungi Mappe",size:"mini"},on:{click:e.addMap}}),e._v(" "),e._c("el-button",{directives:[{name:"show",rawName:"v-show",value:e.options.showDownloadTotale,expression:"options.showDownloadTotale"}],staticClass:"gv-color-scheme gv-legend-buttons el-icon-download",attrs:{id:"gv-legend-add-map",title:"Download Mappe",size:"mini"},on:{click:e.downloadMaps}})],1),e._v(" "),e._c("div",{staticClass:"gv-legend-title-collapsed gv-color-scheme",attrs:{id:"gv-legend-title-collapsed"}},[e._c("button",{class:e.toggleCollapseClass(),attrs:{size:"mini",title:"Mostra Legenda"},on:{click:e.hideLegend}})]),e._v(" "),e._c("div",{staticClass:"gv-legend-wrapper",attrs:{id:"gv-legend-wrapper"}},[e._c("gv-legend-maps",{attrs:{maps:e.maps,options:e.options}}),e._v(" "),e._c("div",{staticClass:"gv-legend-footer gv-inverted-color-scheme"},[e.options.showBaseLayerSwitcher?e._c("gv-base-layer-switcher",{ref:"gv-base-layer-switcher"}):e._e()],1)],1)])},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-button-back",title:"Ritorno"},on:{click:e.onClick}})},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("el-select",{staticClass:"gv-geocoder",attrs:{filterable:"",clearable:"",remote:"",size:"mini",placeholder:"Ricerca Indirizzo...","remote-method":e.remoteMethod,loading:e.loading,"loading-text":"Caricamento... ","no-match-text":"Nessun indirizzo trovato","no-data-text":"Nessun indirizzo trovato",id:"gv-geocoder"},on:{change:e.onChange},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}},e._l(e.results,function(t){return e._c("el-option",{key:t.value,staticClass:"gv-geocoder-options",attrs:{label:t.label,value:t.value}})}))},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{attrs:{id:"gv-map"}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"gv-inverted-color-scheme",attrs:{id:"gv-scuoladigitale-legend"}},[e._c("div",{staticClass:"gv-scuoladigitale-legend-title gv-color-scheme",attrs:{id:"gv-scuoladigitale-legend-title"}},[e._c("b",[e._v(e._s(e.title))]),e._v(" "),e._c("button",{class:e.toggleCollapseClass(),attrs:{size:"mini",title:"Nascondi Legenda"},on:{click:e.hideLegend}})]),e._v(" "),e._c("div",{staticClass:"gv-scuoladigitale-legend-wrapper",attrs:{id:"gv-scuoladigitale-legend-wrapper"}},[e._c("div",[e._c("div",{staticClass:"gv-inverted-color-scheme",attrs:{id:"gv-scuoladigitale-legend-body"}},[e._c("gv-legend-maps",{attrs:{options:e.options}})],1)])])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("el-select",{staticClass:"gv-geocoder",attrs:{filterable:"",clearable:"",remote:"",size:"mini",placeholder:"Ricerca Indirizzo PELIAS...","remote-method":e.remoteMethod,loading:e.loading,"loading-text":"Caricamento... ","no-match-text":"Nessun indirizzo trovato","no-data-text":"Nessun indirizzo trovato",id:"gv-geocoder-pelias"},on:{change:e.onChange},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}},e._l(e.results,function(t){return e._c("el-option",{key:t.value,staticClass:"gv-geocoder-options",attrs:{label:t.label,value:t.value}})}))},staticRenderFns:[]}},,,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{attrs:{id:"gv-map"}})},staticRenderFns:[]}},,,,,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",[e._c("el-table",{staticStyle:{width:"100%","line-height":"23px","font-weight":"400"},attrs:{data:e.map.layers,"show-header":!1,size:"mini","empty-text":" ","row-class-name":e.layerClassName}},[e._c("el-table-column",{attrs:{align:"center",width:"30"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._c("img",{attrs:{src:e.iconUrl(t.row),width:"20"},on:{click:function(n){e.showLegendPanel(t.row)}}})]}}])}),e._v(" "),e._c("el-table-column",{attrs:{align:"center",width:"25"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._c("span",[e._c("el-checkbox",{staticClass:"gv-layer-visibility-cb",attrs:{disabled:!t.row.inRange},on:{change:function(n){e.setLayerVisible(t.row)}},model:{value:t.row.visible,callback:function(n){e.$set(t.row,"visible",n)},expression:"scope.row.visible"}})],1)]}}])}),e._v(" "),e._c("el-table-column",{staticStyle:{"word-break":"normal"},attrs:{"class-name":"gv-inverted-color-scheme-light"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._c("el-popover",{directives:[{name:"show",rawName:"v-show",value:!t.row.inRange,expression:"!scope.row.inRange"}],attrs:{trigger:"hover",placement:"left-start",offset:"10","popper-class":"gv-layer-popover"}},[e._c("p",[e._v(e._s(t.row.scaleRangeLabel))]),e._v(" "),e._c("div",{staticClass:"gv-legend-popover-button"},[e._c("el-button",{directives:[{name:"show",rawName:"v-show",value:e.options.layerPopover&&e.options.layerPopover.find,expression:"options.layerPopover && options.layerPopover.find"}],staticClass:"gv-color-scheme gv-legend-map-tools-button",attrs:{title:"Ricerca sul livello",icon:"el-icon-search",size:"mini"},on:{click:function(n){e.layerSearch(t.row)}}})],1),e._v(" "),e._c("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v("\n            "+e._s(t.row.legend.label)+"\n          ")])]),e._v(" "),e._c("el-popover",{directives:[{name:"show",rawName:"v-show",value:e.options.layerPopover&&t.row.inRange,expression:"options.layerPopover && scope.row.inRange"}],attrs:{trigger:"hover","popper-class":"popover-scala",placement:"left-start",width:"150",offset:"15"}},[e._c("div",{staticClass:"gv-legend-transparency-layer-slider"},[e._c("el-slider",{on:{change:function(n){e.setLayerTransparency(t.row)}},model:{value:t.row.opacityBase100,callback:function(n){e.$set(t.row,"opacityBase100",n)},expression:"scope.row.opacityBase100"}})],1),e._v(" "),e._c("el-row",{staticClass:"row-bg gv-legend-popover-buttons",attrs:{type:"flex",justify:"left"}},[e._c("div",{staticClass:"gv-legend-popover-button"},[e._c("el-button",{directives:[{name:"show",rawName:"v-show",value:e.options.layerPopover&&e.options.layerPopover.find,expression:"options.layerPopover && options.layerPopover.find"}],staticClass:"gv-color-scheme gv-legend-map-tools-button",attrs:{title:"Ricerca sul livello",icon:"el-icon-search",size:"mini"},on:{click:function(n){e.layerSearch(t.row)}}})],1),e._v(" "),e._c("div",{staticClass:"gv-legend-popover-button"},[e._c("el-checkbox",{staticClass:"gv-layer-visibility-cb",on:{change:function(n){e.setLayerVisible(t.row)}},model:{value:t.row.visible,callback:function(n){e.$set(t.row,"visible",n)},expression:"scope.row.visible"}})],1)]),e._v(" "),e._c("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v("\n            "+e._s(t.row.legend.label)+"\n          ")])],1),e._v(" "),e._c("div",{
directives:[{name:"show",rawName:"v-show",value:!e.options.layerPopover&&t.row.inRange,expression:"!options.layerPopover && scope.row.inRange"}],staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v("\n          "+e._s(t.row.legend.label)+"\n        ")])]}}])})],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-button-genio-seleziona-particelle",title:"Seleziona Particelle"},on:{click:e.onClick}})},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("el-dialog",{attrs:{width:"50%",title:"Conferma",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[e._c("span",[e._v("\n    Prima di proseguire è necessario visualizzare il dettaglio delle condizioni di utilizzo.\n    "),e._c("br"),e._v("Cliccando su\n    "),e._c("span",{staticStyle:{color:"#00377c"}},[e._c("b",[e._v('"Accetto"')])]),e._v(" l’utente dichiara di aver preso visione dell’avviso.\n  ")]),e._v(" "),e._c("br"),e._v(" "),e._c("br"),e._v(" "),e._c("span",[e._c("a",{attrs:{href:e.link,target:"_blank"}},[e._v(e._s(e.label))])]),e._v(" "),e._c("span",{attrs:{slot:"footer"},slot:"footer"},[e._c("el-button",{on:{click:e.cancel}},[e._c("span",{staticStyle:{color:"#00377c","font-weight":"bold"}},[e._v("Annulla")])]),e._v(" "),e._c("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._c("span",{staticStyle:{color:"#ffffff","font-weight":"bold"}},[e._v("Accetto")])])],1)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("el-select",{attrs:{size:"mini",placeholder:"Sfondo"},on:{change:e.onChange},model:{value:e.activeBaseLayer,callback:function(t){e.activeBaseLayer=t},expression:"activeBaseLayer"}},e._l(e.baseLayers,function(t){return e._c("el-option",{key:t.name,attrs:{label:t.label,value:t.name}},[e._c("span",{staticStyle:{float:"left"}},[e._c("img",{staticClass:"gv-sfondi-icon",attrs:{src:t.icon}}),e._v(" "),e._c("span",{staticClass:"gv-sfondi-label"},[e._v(e._s(t.label))])])])}))},staticRenderFns:[]}},,,,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-button-cem-elaborazioni",title:"Lista Elaborazioni"},on:{click:e.onClick}})},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-button-genio-localizza",title:"Localizzazione"},on:{click:e.onClick}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-button-fototeca-carrello",title:"Carrello"},on:{click:e.onClick}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("el-select",{staticClass:"gv-fototeca-voli",attrs:{filterable:"",remote:"",size:"mini",placeholder:"Seleziona un volo...",id:"gv-fototeca-voli"},on:{change:e.onChange},model:{value:e.volo,callback:function(t){e.volo=t},expression:"volo"}},e._l(e.voli,function(t){return e._c("el-option",{key:t.id,staticClass:"gv-fototeca-voli-options",attrs:{label:t.nome,value:t.id}})}))},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{attrs:{id:"gv-container"}},[e.showHeader?e._c("gv-header"):e._e(),e._v(" "),e.leafletMap?e._c("gv-ll-map",{ref:"gv-ll-map"}):e._e(),e._v(" "),e.olMap?e._c("gv-ol-map",{ref:"gv-ll-map"}):e._e(),e._v(" "),e.showLegend?e._c("gv-legend",{ref:"gv-legend"}):e._e(),e._v(" "),e._m(0)],1)},staticRenderFns:[function(){var e=this;e.$createElement;return e._c("div",{staticClass:"gv-tool-container"},[e._c("div",{staticClass:"gv-tool-top gv-tool-left",attrs:{id:"gv-tool-topleft"}}),e._v(" "),e._c("div",{staticClass:"gv-tool-top gv-tool-right",attrs:{id:"gv-tool-topright"}}),e._v(" "),e._c("div",{staticClass:"gv-tool-bottom gv-tool-left",attrs:{id:"gv-tool-bottomleft"}}),e._v(" "),e._c("div",{staticClass:"gv-tool-bottom gv-tool-right",attrs:{id:"gv-tool-bottomright"}})])}]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{style:e.style,attrs:{id:"gv-header"}},[e._t("default")],2)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"gv-fototeca-immagine gv-inverted-color-scheme",attrs:{id:"gv-fototeca-immagine"}},[e._c("gv-title",{directives:[{name:"draggable",rawName:"v-draggable"}],attrs:{title:e.title,divId:"gv-fototeca-immagine"}}),e._v(" "),e._c("el-button",{staticClass:"gv-color-scheme gv-button-fototeca-immagine-carrello",attrs:{id:"gv-button-fototeca-immagine-carrello",icon:"el-icon-circle-plus-outline",title:"Aggiungi al Carrello",size:"mini"},on:{click:e.addToBasket}},[e._v("Aggiungi al Carrello")]),e._v(" "),e._c("div",{staticClass:"gv-fototeca-immagine-body",attrs:{id:"gv-fototeca-immagine-body"}},[e._c("image-viewer",{attrs:{imgUrl:e.imgUrl,logo:e.logo,width:"400",height:"400"}})],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{attrs:{id:"image-map"}})},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{staticClass:"gv-button",attrs:{id:"gv-button-switch3D",title:"Switch3D"},on:{click:e.onClick}},[e._v("\n  "+e._s(e.label)+"\n")])},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"scalebar",attrs:{id:"gv-scalebar"}},[e._c("el-select",{attrs:{size:"mini",placeholder:""},on:{change:e.onChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(t){return e._c("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"gv-map-selezione-fogli gv-inverted-color-scheme",attrs:{id:"gv-map-selezione-fogli"}},[e._c("gv-title",{directives:[{name:"draggable",rawName:"v-draggable"}],attrs:{title:e.title,divId:"gv-map-selezione-fogli",noClose:!0,collapsible:"gv-map-selezione-fogli-body"}}),e._v(" "),e._c("div",{staticClass:"gv-map-selezione-fogli-body",attrs:{id:"gv-map-selezione-fogli-body"}},[e._c("el-select",{attrs:{size:"mini",multiple:"","collapse-tags":"",placeholder:"Seleziona"},model:{value:e.fogli,callback:function(t){e.fogli=t},expression:"fogli"}},e._l(e.config.fogli,function(t){return e._c("el-option",{key:t.codice,attrs:{value:t.codice,label:t.nome}})})),e._v(" "),e._c("div",{staticClass:"gv-map-selezione-fogli-buttons"},[e._c("el-button",{attrs:{id:"gv-map-selezione-fogli-submit",type:"primary",size:"mini"},on:{click:e.submit}},[e._v("Conferma")]),e._v(" "),e._c("el-button",{attrs:{id:"gv-map-selezione-fogli-cancel",type:"primary",size:"mini"},on:{click:e.cancel}},[e._v("Annulla")])],1)],1)],1)},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-button-layer-search",title:"Ricerca sui Livelli"},on:{click:e.onClick}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"gv-search",attrs:{id:"gv-search"}},[e._c("el-select",{attrs:{id:"gv-seach-input",filterable:"",clearable:"",remote:"",size:"mini",placeholder:e.placeHolder,"remote-method":e.search,loading:e.loading,"loading-text":"Caricamento... ","no-match-text":"Nessun elemento trovato","no-data-text":"Nessun elemento trovato"},on:{change:e.onChange},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}},e._l(e.results,function(t){return e._c("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-button-ricerca-particella",title:"Ricerca Particella Catastale"},on:{click:e.onClick}})},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{title:"Info sui livelli della mappa"},on:{click:e.onClick}})},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{domProps:{innerHTML:e._s(e.html)}})},staticRenderFns:[]}},,,,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-button-genio-pratiche-collegate",title:"Genio Pratiche Collegate"},on:{click:e.onClick}})},staticRenderFns:[]}},,,,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"gv-panel-title gv-color-scheme"},[e._c("span",{staticClass:"gv-color-scheme",attrs:{title:e.fullTitle}},[e._v(e._s(e.title))]),e._v(" "),e.noClose?e._e():e._c("el-button",{staticClass:"gv-close gv-color-scheme",attrs:{icon:"el-icon-close",type:"button",title:"Chiudi Panello"},on:{click:e.closePanel}}),e._v(" "),e.collapsible?e._c("button",{class:e.toggleCollapseClass(),attrs:{size:"mini",title:"Mostra/Nascondi Pannello"},on:{click:e.collapse}}):e._e()],1)},staticRenderFns:[]}},,,,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-button-coordinate",title:"Acquisizione Coordinate"},on:{click:e.onClick}})},staticRenderFns:[]}},,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-button-layer-search-topo",title:"Ricerche sui Livelli"},on:{click:e.onClick}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-download-totale-button",title:"Download"},on:{click:e.onClick}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{directives:[{name:"bar",rawName:"v-bar"}]},[e._c("div",{attrs:{id:"gv-legend-maps"}},e._l(e.maps,function(t){return e._c("ul",{key:t.id,staticClass:"gv-list-group"},[e._c("div",{staticClass:"gv-list-legend-map-item gv-inverted-color-scheme"},[e._c("li",[e._v(e._s(t.name))]),e._v(" "),e._c("div",{staticClass:"gv-legend-map-tools gv-inverted-color-scheme"},[e._c("el-button",{class:e.getToggleLayersClass(t),attrs:{title:"Mostra/Nascondi Livelli in Legenda",size:"mini"},on:{click:function(n){e.toggleLayers(t)}}}),e._v(" "),e.checkInfoMap(t)?e._c("el-button",{staticClass:"gv-inverted-color-scheme gv-legend-map-tools-button",attrs:{id:"gv-legend-scheda-"+t.id,title:"Visualizza Scheda",icon:"el-icon-document",size:"mini"},on:{click:function(n){e.showMapInfoPanel(t)}}}):e._e(),e._v(" "),e.options.noDeleteButton?e._e():e._c("el-button",{staticClass:"gv-inverted-color-scheme gv-legend-map-tools-button",attrs:{id:"gv-legend-delete-"+t.id,title:"Elimina Mappa",icon:"el-icon-delete",size:"mini"},on:{click:function(n){e.remove(t)}}}),e._v(" "),e.options.showLayersTransparency?e._c("el-button",{staticClass:"gv-inverted-color-scheme gv-legend-map-tools-button",attrs:{id:"gv-legend-transparency-"+t.id,title:"Trasparenza Livelli",icon:"el-icon-setting",size:"mini"},on:{click:function(n){e.layerTransparency(t)}}}):e._e(),e._v(" "),e.isDownloadable(t)?e._c("el-button",{staticClass:"gv-inverted-color-scheme gv-legend-map-tools-button",attrs:{id:"gv-legend-download-"+t.id,title:"Download Mappa",icon:"el-icon-download",size:"mini"},on:{click:function(n){e.download(t)}}}):e._e()],1)]),e._v(" "),e._c("gv-legend-layers",{directives:[{name:"show",rawName:"v-show",value:e.showMapLayers(t),expression:"showMapLayers(map)"}],attrs:{map:t,options:e.options}})],1)}))])},staticRenderFns:[]}},,,function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("button",{class:e.setClass(),attrs:{id:"gv-draw",title:e.title},on:{click:e.onClick}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"atlante-geochimico gv-color-scheme"},[e._c("div",{staticClass:"ag-title gv-color-scheme",attrs:{id:"ag-title"}},[e._v("\n    Atlante Geochimico\n    "),e._c("button",{class:e.toggleCollapseClass(),attrs:{size:"mini",title:"Nascondi Pannello"},on:{click:e.hidePanel}})]),e._v(" "),e._c("div",{staticClass:"ag-wrapper gv-color-scheme",attrs:{id:"ag-wrapper"}},[e._c("el-select",{attrs:{placeholder:"Seleziona Elemento",size:"mini"},on:{change:e.onChange},model:{value:e.livello,callback:function(t){e.livello=t},expression:"livello"}},e._l(e.livelli,function(t){return e._c("el-option",{key:t.id,attrs:{value:t.id,label:t.title}},[e._c("span",{staticStyle:{"font-size":"16px"}},[e._v(e._s(t.title))])])})),e._v(" "),e._c("div",{directives:[{name:"show",rawName:"v-show",value:e.showLegend,expression:"showLegend"}],staticClass:"ag-legend"},[e._c("gv-iframe-panel",{staticClass:"gv-iframe-panel",attrs:{src:e.legendUrl,height:"237",width:"249"}})],1)],1)])},staticRenderFns:[]}},,,,function(e,t){},function(e,t){}]);
//# sourceMappingURL=GV.js.map