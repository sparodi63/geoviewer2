webpackJsonp([23,38],{115:function(e,t,o){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return l.default.post(r.default.RL_DOWNLOAD_INSERT_SERVICE,{data:e}).then(function(e){return e.data})};var n=o(2),l=a(n),i=o(6),r=a(i)},267:function(e,t,o){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=o(29),l=(a(n),o(20)),i=a(l),r=o(85),d=(a(r),o(79)),s=a(d),c=o(42),u=(a(c),o(39)),f=a(u),p=o(35),A=(a(p),o(33)),v=a(A),m=o(9),g=(a(m),o(5)),h=(a(g),o(8)),C=a(h),w=o(10),b=a(w),_=o(1),B=a(_),E=o(7),S=(a(E),o(16)),x=a(S),y=o(115),N=a(y),k=o(17),O=a(k),D=o(11),I=a(D);B.default.component("gv-title",function(){return new b.default(function(e){!function(t){e(o(149))}(o)})}),B.default.use(C.default,v.default,f.default,s.default),B.default.use(i.default),I.default.use(O.default);var T=o(68);B.default.use(T),t.default={name:"gv-download-totale-panel",props:["idMap"],data:function(){var e=GV.config.maps.filter(function(e){return e.downloadSuInteroTerritorio===!0&&e.flagDownload===!0});return console.log("gv-download-totale-panel: data",e),{codCliente:"",showHeader:!0,maps:e,multipleSelection:[],buttonDisabled:!1}},mounted:function(){return GV.log("gv-download-totale-panel: mounted"),GV.globals.SYS_MANUTENZIONE?((0,x.default)("SISTEMA IN MANUTENZIONE: SERVIZIO TEMPORANEAMENTE SOSPESO"),void(this.$el.hidden=!0)):(this.codCliente="null"!=this.$cookie.get("codCliente")?this.$cookie.get("codCliente"):"",this.selectAll(),void(0,s.default)({title:"Info",type:"info",duration:5e3,offset:70,dangerouslyUseHTMLString:!0,position:"bottom-left",message:"Questa funzione permette di effettuare il download delle carte presenti in legenda e scaricabili per l'intero territorio.<br>Le carte vengono scaricate per l'intera copertura, in formato SHAPE e sistema GAUSS-BOAGA"}))},methods:{selectAll:function(){var e=this;this.maps?this.maps.forEach(function(t){e.$refs.mapsTable.toggleRowSelection(t)}):this.$refs.mapsTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},cleanUp:function(){this.$cookie.set("codCliente",this.codCliente,"1Y")},getMapsList:function(){var e=this.multipleSelection.map(function(e){return e.id}).join(",");return e},validateEmail:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)},submit:function(){var e=this;if(!this.codCliente)return void(0,x.default)("Indicare Indirizzo Email");if(!this.validateEmail(this.codCliente))return void(0,x.default)("Indirizzo Email non valido");var t=this.getMapsList();if(""===t)return void(0,x.default)("Selezionare almeno una carta");var o={flagComposta:!0,codCliente:this.codCliente,codCatalogo:t,bbox:"",bboxSRS:null,crsOut:"3003",formato:"SHP",fogli:"",codTema:"",utente_registrato:"N",test:!1,tipologia:"CWN2",flagDownloadSincrono:"N"};(0,N.default)(o).then(function(t){t.success?!function(){(0,x.default)("<p>Inserita richiesta numero: "+t.data.idRichiesta+".</p> <p>Al termine della elaborazione l'esito verr√† comunicato via mail</p>","info");var o=e;setTimeout(function(){o.cleanUp()},5e3)}():(0,x.default)("<p>Errore inserimento richiesta: "+t.message+".</p>","error")})}}}},511:function(e,t,o){t=e.exports=o(3)(),t.push([e.id,"#gv-download-totale-panel{position:absolute;left:0;top:0;margin-left:10px;margin-top:90px;background-color:#fff;z-index:800}#gv-download-totale-body{width:480px;max-height:400px;cursor:default;overflow:hidden}#gv-download-totale-body:hover{overflow-y:scroll;overflow-x:hidden}#gv-download-totale-wrapper{display:block}.gv-download-totale-footer{height:42px}#gv-download-totale-submit{margin:10px;float:right}#gv-download-totale-label{margin:10px}","",{version:3,sources:["/./src/components/DownloadTotale.vue"],names:[],mappings:"AACA,0BACE,kBAAmB,AACnB,OAAQ,AACR,MAAO,AACP,iBAAkB,AAClB,gBAAiB,AACjB,sBAAuB,AACvB,WAAa,CACd,AACD,yBACE,YAAa,AACb,iBAAkB,AAClB,eAAgB,AAChB,eAAiB,CAClB,AACD,+BACE,kBAAmB,AACnB,iBAAmB,CACpB,AACD,4BACE,aAAe,CAChB,AACD,2BACE,WAAa,CACd,AACD,2BACE,YAAa,AACb,WAAa,CACd,AACD,0BACE,WAAa,CACd",file:"DownloadTotale.vue",sourcesContent:["\n#gv-download-totale-panel {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  margin-left: 10px;\r\n  margin-top: 90px;\r\n  background-color: #fff;\r\n  z-index: 800;\n}\n#gv-download-totale-body {\r\n  width: 480px;\r\n  max-height: 400px;\r\n  cursor: default;\r\n  overflow: hidden;\n}\n#gv-download-totale-body:hover {\r\n  overflow-y: scroll;\r\n  overflow-x: hidden;\n}\n#gv-download-totale-wrapper {\r\n  display: block;\n}\n.gv-download-totale-footer {\r\n  height: 42px;\n}\n#gv-download-totale-submit {\r\n  margin: 10px;\r\n  float: right;\n}\n#gv-download-totale-label {\r\n  margin: 10px;\n}\r\n"],sourceRoot:"webpack://"}])},636:function(e,t,o){var a=o(511);"string"==typeof a&&(a=[[e.id,a,""]]);o(4)(a,{});a.locals&&(e.exports=a.locals)},734:function(e,t,o){var a,n;o(636),a=o(267);var l=o(883);n=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(n=a=a.default),"function"==typeof n&&(n=n.options),n.render=l.render,n.staticRenderFns=l.staticRenderFns,e.exports=a},883:function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"gv-inverted-color-scheme",attrs:{id:"gv-download-totale-panel"}},[e._c("gv-title",{directives:[{name:"draggable",rawName:"v-draggable"}],attrs:{title:"DOWNLOAD",hide:!1,divId:"gv-download-totale-panel"}}),e._v(" "),e._c("div",{staticClass:"gv-download-totale-wrapper",attrs:{id:"gv-download-totale-wrapper"}},[e._c("div",{attrs:{id:"gv-download-totale-body"}},[e._c("el-table",{ref:"mapsTable",staticStyle:{width:"100%"},attrs:{"empty-text":"Nessuna mappa scaricabile",data:e.maps,"show-header":e.showHeader,size:"mini"},on:{"selection-change":e.handleSelectionChange}},[e._c("el-table-column",{attrs:{type:"selection",width:"25"}}),e._v(" "),e._c("el-table-column",{attrs:{label:"Carte Scaricabili",width:"438"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" ("+e._s(t.row.name)+") ")]}}])})],1)],1),e._v(" "),e._c("div",{staticClass:"gv-inverted-color-scheme gv-download-totale-footer"},[e._c("el-form",{ref:"form",attrs:{model:e.form}},[e._c("el-form-item",[e._c("span",{attrs:{id:"gv-download-totale-label"}},[e._v("Email")]),e._v(" "),e._c("el-input",{staticStyle:{width:"250px"},attrs:{id:"gv-download-totale-email",size:"mini",placeholder:"Email",type:"email"},model:{value:e.codCliente,callback:function(t){e.codCliente=t},expression:"codCliente"}}),e._v(" "),e._c("el-button",{attrs:{id:"gv-download-totale-submit",type:"primary",size:"mini"},on:{click:e.submit}},[e._v("Conferma")])],1)],1)],1)])],1)},staticRenderFns:[]}}});
//# sourceMappingURL=23.js.map