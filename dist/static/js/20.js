webpackJsonp([20,33],{67:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(18),r=n(o);t.default={data:function(){return{drawnRectangle:null,dragBoxInteraction:null}},methods:{rectAddLayer:function(){"openlayers"===GV.app.map.type?this.rectAddLayerOL():(this.drawnRectangle=new L.FeatureGroup,GV.app.map.addLayer(this.drawnRectangle))},rectAddLayerOL:function(){GV.app.map.loadLayers([{name:"DrawnRectangle",type:"JSON",visible:!0,zIndex:100}]),this.drawnRectangle=GV.app.map.getLayerByName("DrawnRectangle")},rectEnable:function(){(0,r.default)("Disegna un rettangolo sulla mappa"),"openlayers"===GV.app.map.type?(this.dragBoxInteraction=new ol.interaction.DragBox({}),GV.app.map.addInteraction(this.dragBoxInteraction),this.dragBoxInteraction.on("boxend",this.rectOnDraw)):(GV.app.map.map.drawRectangle||GV.app.map.addHandler("drawRectangle",L.Draw.Rectangle),GV.app.map.map.drawRectangle.enable(),GV.app.map.on("draw:created",this.rectOnDraw))},rectReset:function(){"openlayers"===GV.app.map.type?this.drawnRectangle&&this.drawnRectangle.getSource().clear():(this.drawnRectangle&&this.drawnRectangle.clearLayers(),GV.app.map.map.drawRectangle&&(GV.config.activeControl.deactivate(),GV.app.map.map.drawRectangle.disable(),GV.app.map.map.drawRectangle.enable()))},rectDisable:function(){"openlayers"===GV.app.map.type?(GV.app.map.removeInteraction(this.dragBoxInteraction),this.drawnRectangle&&this.drawnRectangle.getSource().clear()):(GV.app.map.map.drawRectangle&&GV.app.map.map.drawRectangle.disable(),this.drawnRectangle&&this.drawnRectangle.clearLayers())}},mounted:function(){this.rectAddLayer()}}},253:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),r=(n(o),a(8)),i=n(r),l=a(42),s=(n(l),a(5)),c=(n(s),a(39)),p=n(c),d=a(1),u=n(d),g=a(67),f=n(g),b=a(30),m=n(b);u.default.use(p.default),u.default.use(i.default),t.default={name:"gv-fototeca-selezione-territoriale-panel",data:function(){return{options:GV.config.getToolOptions("gv-fototeca-selezione-territoriale-button"),drawnRectangle:null,bbox:null,bboxSRS:"4326",buttonDisabled:!0}},computed:{},mixins:[f.default],methods:{rectOnDraw:function(e){var t=confirm("Sei sicuro?");1==t&&this.submit(e),GV.eventBus.$emit("gv-fototeca-selezione-territoriale-switch")},submit:function(e){if("openlayers"===GV.app.map.type){var t=this.drawnRectangle.getSource().getFeatures()[0].getGeometry().getCoordinates();this.bbox=t.map(function(e){return e.join(",")})[0],this.bboxSRS="3857"}else{m.default.addHiliteLayer(GV.app.map);var a=GV.app.map.getLayerByName("InfoWmsHilite");a.clearLayers(),a.addLayer(e.layer);var n=e.layer.getBounds()._southWest.lng,o=e.layer.getBounds()._southWest.lat,r=e.layer.getBounds()._northEast.lng,i=e.layer.getBounds()._northEast.lat;this.bbox=n+","+o+","+r+","+o+","+r+","+i+","+n+","+i+","+n+","+o,this.bboxSRS="4326"}this.buttonDisabled=!1,GV.eventBus.$emit("gv-fototeca-reload-voli",{bbox:this.bbox,bboxSRS:this.bboxSRS})},annullaSelezione:function(){var e=confirm("Sei sicuro?");1==e&&(GV.app.map.getLayerByName("InfoWmsHilite").clearLayers(),this.bbox=null,this.buttonDisabled=!0,GV.eventBus.$emit("gv-fototeca-reload-voli",{bbox:this.bbox,bboxSRS:this.bboxSRS})),GV.eventBus.$emit("gv-fototeca-selezione-territoriale-switch")}},mounted:function(){var e=this;this.rectEnable(),GV.eventBus.$on("gv-control-fototeca-selezione-territoriale-activate",function(t){e.rectEnable()}),GV.eventBus.$on("gv-control-fototeca-selezione-territoriale-deactivate",function(t){GV.app.map.off("draw:created"),e.rectDisable()})}}},430:function(e,t,a){t=e.exports=a(2)(),t.push([e.id,".gv-fototeca-selezione-territoriale-panel{position:absolute;width:260px;left:0;top:0;margin-left:10px;margin-top:50px;z-index:800}.gv-fototeca-selezione-territoriale-body{padding:5px;width:250px;height:60px}","",{version:3,sources:["/./src/components/FototecaSelezioneTerritoriale.vue"],names:[],mappings:"AACA,0CACE,kBAAmB,AACnB,YAAa,AACb,OAAU,AACV,MAAS,AACT,iBAAkB,AAClB,gBAAiB,AACjB,WAAa,CACd,AACD,yCACE,YAAa,AACb,YAAa,AACb,WAAa,CACd",file:"FototecaSelezioneTerritoriale.vue",sourcesContent:["\n.gv-fototeca-selezione-territoriale-panel {\n  position: absolute;\n  width: 260px;\n  left: 0px;\n  top: 0px;\n  margin-left: 10px;\n  margin-top: 50px;\n  z-index: 800;\n}\n.gv-fototeca-selezione-territoriale-body {\n  padding: 5px;\n  width: 250px;\n  height: 60px;\n}\n"],sourceRoot:"webpack://"}])},509:function(e,t,a){var n=a(430);"string"==typeof n&&(n=[[e.id,n,""]]);a(3)(n,{});n.locals&&(e.exports=n.locals)},654:function(e,t,a){var n,o;a(509),n=a(253);var r=a(718);o=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(o=n=n.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,e.exports=n},718:function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"gv-fototeca-selezione-territoriale-panel",attrs:{id:"gv-fototeca-selezione-territoriale-panel"}},[e._c("gv-title",{attrs:{title:"Fototeca Selezione Territoriale",divId:"gv-fototeca-selezione-territoriale-panel",noClose:!0}}),e._v(" "),e._c("div",{staticClass:"gv-fototeca-selezione-territoriale-body gv-inverted-color-scheme"},[e._c("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"left"}}),e._v(" "),e._c("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"left"}},[e._c("el-button",{staticClass:"gv-color-scheme",attrs:{id:"gv-fototeca-selezione-annulla",disabled:e.buttonDisabled,title:"Annulla Selezione",size:"mini"},on:{click:e.annullaSelezione}},[e._v("Annulla Selezione Corrente")])],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=20.js.map