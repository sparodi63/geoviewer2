webpackJsonp([18,36],{252:function(t,e,r){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(25),n=a(i),o=r(24),c=a(o),l=r(32),u=a(l),s=r(30),p=(a(s),r(29)),g=a(p),f=r(14),d=(a(f),r(11)),v=a(d),A=r(15),m=(a(A),r(12)),h=a(m),C=r(9),_=(a(C),r(5)),b=(a(_),r(8)),B=a(b),y=r(4),x=(a(y),r(1)),w=a(x),R=r(19),E=a(R),I=r(13),O=a(I),k=r(18),N=a(k);w.default.use(B.default),w.default.use(h.default),w.default.use(v.default),O.default.use(E.default),w.default.use(g.default),e.default={name:"gv-cultura-ricerca",data:function(){var t=GV.globals.CULTURA_CONFIG.raggruppamenti,e=!0,r=!1,a=void 0;try{for(var i,n=(0,u.default)(t);!(e=(i=n.next()).done);e=!0){var o=i.value;o.categorie.unshift({id:0,categoria:"Tutte"})}}catch(t){r=!0,a=t}finally{try{!e&&n.return&&n.return()}finally{if(r)throw a}}t=t.sort(function(t,e){return t.id-e.id});var c=GV.globals.CULTURA_CONFIG.categorie;c.unshift({id:0,categoria:"Tutte"}),t.unshift({id:0,raggruppamento:"Tutti",categorie:c});var l=GV.globals.CULTURA_CONFIG.province,s=!0,p=!1,g=void 0;try{for(var f,d=(0,u.default)(l);!(s=(f=d.next()).done);s=!0){var v=f.value;v.comuni.unshift({id:0,comune:"Tutti"}),v.comuni=v.comuni.sort(function(t,e){return t.id-e.id})}}catch(t){p=!0,g=t}finally{try{!s&&d.return&&d.return()}finally{if(p)throw g}}var A=GV.globals.CULTURA_CONFIG.comuni;A.push({id:0,comune:"Tutti"}),A=A.sort(function(t,e){return t.id-e.id}),l.push({id:0,provincia:"Tutte",comuni:A}),l=l.sort(function(t,e){return t.id-e.id});var m=GV.globals.CULTURA_CONFIG.filter,h=!GV.globals.CULTURA_CONFIG.embed;return{raggruppamenti:t,raggruppamento:m.raggruppamento,categorie:c,categoria:m.categoria,province:l,provincia:m.provincia,comuni:A,comune:m.comune,itinerario:m.itinerario,propertyName:"NOME",luoghi:null,filterResult:[],listaLuoghi:[],loading:!1,show:!1,visible:h,filtro:null,showResultsPanel:!1}},mounted:function(){var t=this;return(0,c.default)(n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.raggruppamento&&t.onChangeRaggruppamento(t.raggruppamento),t.provincia&&t.onChangeProvincia(t.provincia),t.filterLuoghi();case 3:case"end":return e.stop()}},e,t)}))()},methods:{onChangeRaggruppamento:function(t){this.categorie=this.raggruppamenti.filter(function(e){return e.id===t})[0].categorie,this.categoria=0},onChangeProvincia:function(t){this.comuni=this.province.filter(function(e){return e.id===t})[0].comuni,this.comune=0},filterLuoghi:function(){var t=this;if(GV.globals.CULTURA_CONFIG.flagItinerario||!this.noFilter()){var e=document.getElementById("gv-cultura-info");e&&e.remove(),this.listaLuoghi=GV.globals.CULTURA_CONFIG.luoghi.filter(function(e){return(!t.raggruppamento||t.raggruppamento===e.properties.ID_RAGGRUPPAMENTO)&&(!(t.categoria&&!t.ricercaCategoria(e.properties.OID))&&((!t.provincia||t.provincia==e.properties.COD_PROV)&&(!t.comune||t.comune==e.properties.COD_PROV+e.properties.COD_COM)))}).sort(function(t,e){var r=t.properties.NOME<e.properties.NOME?-1:1;return r}),0===this.listaLuoghi.length?(0,N.default)("Nessun risultato trovato"):(this.showResults(),this.filtraMappa(),this.zoomExtentsMap())}},ricercaCategoria:function(t){var e=this,r=GV.globals.CULTURA_CONFIG.categorieRicerca.filter(function(r){if(r.id==t&&r.catoid===e.categoria)return!0});return r.length>0},zoomExtentsMap:function(){var t=L.latLngBounds([]);GV.globals.CULTURA_LAYERS.forEach(function(e){var r=GV.app.map.getLayerByName(e.name),a=r.getBounds();t.extend(a)}),t=t.pad(.2),GV.app.map.fitBounds(t)},filtraMappa:function(){var t=this;GV.globals.CULTURA_LAYERS.forEach(function(e){GV.config.removeLayer(e.name),e.filter=function(e){var r=!1,a=!0,i=!1,n=void 0;try{for(var o,c=(0,u.default)(t.listaLuoghi);!(a=(o=c.next()).done);a=!0){var l=o.value;if(e.properties.OID==l.properties.OID){r=!0;break}}}catch(t){i=!0,n=t}finally{try{!a&&c.return&&c.return()}finally{if(i)throw n}}return r},GV.config.addLayerToMap(e,0)})},noFilter:function(){return 0===this.raggruppamento&&0===this.categoria&&0===this.provincia&&0===this.comune},reset:function(){if(GV.globals.CULTURA_CONFIG.flagItinerario)return this.noFilter()?void 0:(this.raggruppamento=0,this.categoria=0,this.provincia=0,this.comune=0,void this.filterLuoghi());this.raggruppamento=0,this.categoria=0,this.provincia=0,this.comune=0,this.onChangeRaggruppamento(0),this.onChangeProvincia(0),this.showResultsPanel=!1;var t=document.getElementById("gv-cultura-info");t&&t.remove(),GV.globals.CULTURA_LAYERS.forEach(function(t){GV.config.removeLayer(t.name),t.filter=function(){return!0},GV.config.addLayerToMap(t,0)}),this.zoomExtentsMap()},closeResultPanels:function(){},showInfo:function(){},showResults:function(){this.filtro={comune:this.comune?this.comune:null,provincia:this.provincia?this.provincia:null,raggruppamento:this.raggruppamento?this.raggruppamento:null,categoria:this.categoria?this.categoria:null,itinerario:this.itinerario?this.itinerario:null},this.showResultsPanel=!0},hidePanel:function(t){this.show?(document.getElementById("gv-cultura-ricerca-body").style.display="block",document.getElementById("gv-cultura-ricerca").style.width="480px"):(document.getElementById("gv-cultura-ricerca-body").style.display="none",document.getElementById("gv-cultura-ricerca").style.width="110px"),this.show=!this.show},toggleCollapseClass:function(){return this.show?"gv-cultura-ricerca-collapse gv-color-scheme el-icon-arrow-down":"gv-cultura-ricerca-collapse gv-color-scheme el-icon-arrow-up"},stampaPDF:function(){var t=location.protocol+"//"+location.hostname+"/geoservices/apps/cultura-print/?TYPE=PRINT";this.filtro.raggruppamento&&(t+="&RAGGRUPPAMENTO="+this.filtro.raggruppamento),this.filtro.categoria&&(t+="&CATEGORIA="+this.filtro.categoria),this.filtro.provincia&&(t+="&PROVINCIA="+this.filtro.provincia),this.filtro.comune&&(t+="&COMUNE="+this.filtro.comune),this.filtro.itinerario&&(t+="&ITINERARIO="+this.filtro.itinerario),window.open(t,"_blank")},tableRowClassName:function(){return{cursor:"pointer","background-color":"#c9c8c8"}},selectRiga:function(t){GV.app.map.setView([t.geometry.coordinates[1],t.geometry.coordinates[0]],19);var e=document.getElementById("gv-cultura-info");e&&e.remove(),GV.mount({elId:"gv-cultura-info",toggleEl:!0,template:'<gv-cultura-info :properties="properties" ></gv-cultura-info>',data:{properties:t.properties}})}}}},496:function(t,e,r){e=t.exports=r(2)(),e.push([t.id,".el-tree-node__label{font-size:12px!important}.el-tabs__header,.el-tabs__item.is-active{color:#24386c!important}.el-tabs__header{margin:0 0 5px!important}.el-select .el-input .el-select__caret{color:#000!important;font-size:16px!important;font-weight:800}","",{version:3,sources:["/./src/components/CulturaRicerca.vue"],names:[],mappings:"AACA,qBACE,wBAA2B,CAC5B,AAID,0CAFE,uBAA0B,CAK3B,AAHD,iBACE,wBAA2B,CAE5B,AACD,uCACE,qBAAwB,AACxB,yBAA2B,AAC3B,eAAiB,CAClB",file:"CulturaRicerca.vue",sourcesContent:["\n.el-tree-node__label {\r\n  font-size: 12px !important;\n}\n.el-tabs__item.is-active {\r\n  color: #24386c !important;\n}\n.el-tabs__header {\r\n  margin: 0 0 5px !important;\r\n  color: #24386c !important;\n}\n.el-select .el-input .el-select__caret {\r\n  color: black !important;\r\n  font-size: 16px !important;\r\n  font-weight: 800;\n}\r\n"],sourceRoot:"webpack://"}])},497:function(t,e,r){e=t.exports=r(2)(),e.push([t.id,".gv-cultura-ricerca[data-v-7fccc215]{position:absolute;left:0;top:0;width:480px;margin-left:10px;margin-top:20px;z-index:800}.gv-cultura-ricerca-luoghi[data-v-7fccc215]{margin-left:10px}.gv-cultura-ricerca-title[data-v-7fccc215]{position:relative;display:block;padding:.3rem 0 .3rem .5rem;margin-bottom:-1px;cursor:default;font-weight:800;font-family:Raleway,Arial,sans-serif!important;font-size:14px}.gv-cultura-ricerca-title [data-v-7fccc215]:focus{outline:0 auto -webkit-focus-ring-color}.gv-cultura-ricerca-body[data-v-7fccc215]{margin:10px}.gv-cultura-ricerca-filtri-title[data-v-7fccc215]{margin-left:10px;margin-top:20px}.gv-cultura-ricerca-label[data-v-7fccc215]{display:inline-block;width:150px}.gv-cultura-ricerca-buttons[data-v-7fccc215],.gv-cultura-ricerca-result[data-v-7fccc215]{margin-top:10px;margin-left:5px}.gv-cultura-ricerca-collapse[data-v-7fccc215]{cursor:pointer;border:0;-webkit-appearance:none;float:right;font-size:14px;margin-top:3px;opacity:1}.gv-cultura-ricerca-results-result[data-v-7fccc215]{margin-top:10px}.gv-cultura-ricerca-results-pdf-button[data-v-7fccc215]{margin:5px!important;float:right!important}","",{version:3,sources:["/./src/components/CulturaRicerca.vue"],names:[],mappings:"AACA,qCACE,kBAAmB,AACnB,OAAQ,AACR,MAAO,AACP,YAAa,AACb,iBAAkB,AAClB,gBAAiB,AACjB,WAAa,CACd,AACD,4CACE,gBAAkB,CACnB,AACD,2CACE,kBAAmB,AACnB,cAAe,AAIf,4BAAqB,AACrB,mBAAoB,AAEpB,eAAgB,AAChB,gBAAiB,AACjB,+CAAqD,AACrD,cAAgB,CACjB,AACD,kDACE,uCAA2C,CAC5C,AACD,0CACE,WAAa,CACd,AACD,kDACE,iBAAkB,AAClB,eAAiB,CAClB,AACD,2CACE,qBAAsB,AACtB,WAAa,CACd,AAKD,yFACE,gBAAiB,AACjB,eAAiB,CAClB,AACD,8CACE,eAAgB,AAChB,SAAU,AACV,wBAAyB,AACzB,YAAa,AACb,eAAgB,AAChB,eAAgB,AAChB,SAAW,CACZ,AACD,oDACE,eAAiB,CAElB,AACD,wDACE,qBAAuB,AACvB,qBAAwB,CACzB",file:"CulturaRicerca.vue",sourcesContent:["\n.gv-cultura-ricerca[data-v-7fccc215] {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  width: 480px;\r\n  margin-left: 10px;\r\n  margin-top: 20px;\r\n  z-index: 800;\n}\n.gv-cultura-ricerca-luoghi[data-v-7fccc215] {\r\n  margin-left: 10px;\n}\n.gv-cultura-ricerca-title[data-v-7fccc215] {\r\n  position: relative;\r\n  display: block;\r\n  padding-top: 0.3rem;\r\n  padding-bottom: 0.3rem;\r\n  padding-right: 0rem;\r\n  padding-left: 0.5rem;\r\n  margin-bottom: -1px;\r\n  /* color: black; */\r\n  cursor: default;\r\n  font-weight: 800;\r\n  font-family: 'Raleway', Arial, sans-serif !important;\r\n  font-size: 14px;\n}\n.gv-cultura-ricerca-title [data-v-7fccc215]:focus {\r\n  outline: -webkit-focus-ring-color auto 0px;\n}\n.gv-cultura-ricerca-body[data-v-7fccc215] {\r\n  margin: 10px;\n}\n.gv-cultura-ricerca-filtri-title[data-v-7fccc215] {\r\n  margin-left: 10px;\r\n  margin-top: 20px;\n}\n.gv-cultura-ricerca-label[data-v-7fccc215] {\r\n  display: inline-block;\r\n  width: 150px;\n}\n.gv-cultura-ricerca-buttons[data-v-7fccc215] {\r\n  margin-top: 10px;\r\n  margin-left: 5px;\n}\n.gv-cultura-ricerca-result[data-v-7fccc215] {\r\n  margin-top: 10px;\r\n  margin-left: 5px;\n}\n.gv-cultura-ricerca-collapse[data-v-7fccc215] {\r\n  cursor: pointer;\r\n  border: 0;\r\n  -webkit-appearance: none;\r\n  float: right;\r\n  font-size: 14px;\r\n  margin-top: 3px;\r\n  opacity: 1;\n}\n.gv-cultura-ricerca-results-result[data-v-7fccc215] {\r\n  margin-top: 10px;\r\n  /* margin-left: 5px; */\n}\n.gv-cultura-ricerca-results-pdf-button[data-v-7fccc215] {\r\n  margin: 5px !important;\r\n  float: right !important;\n}\r\n"],sourceRoot:"webpack://"}])},624:function(t,e,r){var a=r(496);"string"==typeof a&&(a=[[t.id,a,""]]);r(3)(a,{});a.locals&&(t.exports=a.locals)},625:function(t,e,r){var a=r(497);"string"==typeof a&&(a=[[t.id,a,""]]);r(3)(a,{});a.locals&&(t.exports=a.locals)},687:function(t,e,r){var a,i;r(625),r(624),a=r(252);var n=r(839);i=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(i=a=a.default),"function"==typeof i&&(i=i.options),i.render=n.render,i.staticRenderFns=n.staticRenderFns,i._scopeId="data-v-7fccc215",t.exports=a},839:function(t,e){t.exports={render:function(){var t=this;t.$createElement;return t.visible?t._c("div",{ref:"gv-cultura-ricerca",staticClass:"gv-cultura-ricerca gv-inverted-color-scheme",attrs:{id:"gv-cultura-ricerca"}},[t._c("div",{directives:[{name:"draggable",rawName:"v-draggable"}],staticClass:"gv-cultura-ricerca-title gv-color-scheme",attrs:{id:"gv-cultura-ricerca-title"}},[t._c("b",[t._v("RICERCHE")]),t._v(" "),t._c("button",{class:t.toggleCollapseClass(),attrs:{size:"mini",title:"Nascondi Pannello"},on:{click:t.hidePanel}})]),t._v(" "),t._c("div",{staticClass:"gv-cultura-ricerca-body",attrs:{id:"gv-cultura-ricerca-body"}},[t._c("div",{attrs:{id:"gv-cultura-ricerca-filtri"}},[t._c("table",[t._c("tr",[t._m(0),t._v(" "),t._c("td",[t._c("el-select",{staticStyle:{width:"270px !important"},attrs:{size:"small",placeholder:"Raggruppamento"},on:{change:t.onChangeRaggruppamento},model:{value:t.raggruppamento,callback:function(e){t.raggruppamento=e},expression:"raggruppamento"}},t._l(t.raggruppamenti,function(e){return t._c("el-option",{key:e.id,attrs:{value:e.id,label:e.raggruppamento}})}))],1)]),t._v(" "),t._c("tr",[t._m(1),t._v(" "),t._c("td",[t._c("el-select",{staticStyle:{width:"270px !important"},attrs:{size:"small",filterable:"","collapse-tags":"",placeholder:"Categoria"},model:{value:t.categoria,callback:function(e){t.categoria=e},expression:"categoria"}},t._l(t.categorie,function(e){return t._c("el-option",{key:e.id,attrs:{value:e.id,label:e.categoria}})}))],1)]),t._v(" "),t._c("tr",[t._m(2),t._v(" "),t._c("td",[t._c("el-select",{staticStyle:{width:"270px !important"},attrs:{size:"small",placeholder:"Provincia"},on:{change:t.onChangeProvincia},model:{value:t.provincia,callback:function(e){t.provincia=e},expression:"provincia"}},t._l(t.province,function(e){return t._c("el-option",{key:e.id,attrs:{value:e.id,label:e.provincia}})}))],1)]),t._v(" "),t._c("tr",[t._m(3),t._v(" "),t._c("el-select",{staticStyle:{width:"270px !important"},attrs:{size:"small",filterable:"","collapse-tags":"",placeholder:"Comune"},model:{value:t.comune,callback:function(e){t.comune=e},expression:"comune"}},t._l(t.comuni,function(e){return t._c("el-option",{key:e.id,attrs:{value:e.id,label:e.comune}})})),t._v(" "),t._c("td")],1)])]),t._v(" "),t._c("div",{staticClass:"gv-cultura-ricerca-buttons"},[t._c("el-button",{attrs:{alt:"Applica",id:"gv-cultura-ricerca-submit",type:"info",size:"mini"},on:{click:t.filterLuoghi}},[t._v("Applica")]),t._v(" "),t._c("el-button",{attrs:{alt:"Annulla Filtro",id:"gv-cultura-ricerca-reset",type:"info",size:"mini"},on:{click:t.reset}},[t._v("Annulla Filtro")]),t._v(" "),t._c("el-button",{directives:[{name:"show",rawName:"v-show",value:t.showResultsPanel,expression:"showResultsPanel"}],staticClass:"gv-cultura-ricerca-results-pdf-button",attrs:{id:"gv-cultura-ricerca-results-pdf-button",type:"info",size:"mini",alt:"Stampa PDF"},on:{click:t.stampaPDF}},[t._v("Stampa PDF")])],1),t._v(" "),t._c("div",{directives:[{name:"show",rawName:"v-show",value:t.showResultsPanel,expression:"showResultsPanel"}],staticClass:"gv-cultura-ricerca-results-body",attrs:{id:"gv-cultura-ricerca-results-body"}},[t._c("div",{staticClass:"gv-cultura-ricerca-results-result"},[t._c("div",{staticClass:"gv-cultura-ricerca-results-table"},[t._c("el-table",{staticClass:"gv-inverted-color-scheme",staticStyle:{"font-size":"12px !important"},attrs:{data:t.listaLuoghi,"empty-text":"Nessuna luogo trovato","row-style":t.tableRowClassName,"show-header":!1,height:"300",size:"mini"},on:{"current-change":t.selectRiga}},[t._c("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._c("strong",[t._v(t._s(e.row.properties.CATNAME))]),t._c("br"),t._c("br"),t._v(" "),t._c("em",[t._v(t._s(e.row.properties.DESCRIZIONE_BREVE))])]}}])}),t._v(" "),t._c("el-table-column",{attrs:{prop:"properties.NOME",align:"left",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._c("strong",[t._v(t._s(e.row.properties.NOME))])]}}])}),t._v(" "),t._c("el-table-column",{attrs:{prop:"properties.NOMECOMUNE",align:"left",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.filtro.comune?t._e():t._c("span",[t._v(t._s(e.row.properties.NOMECOMUNE)+"\n                  "),t.filtro.provincia?t._e():t._c("span",[t._v("( "+t._s(e.row.properties.SIGLA_PROVINCIA)+" )\n                  ")])])]}}])})],1)],1)])])])]):t._e()},staticRenderFns:[function(){var t=this;t.$createElement;return t._c("td",[t._c("span",[t._v("LIVELLO ")])])},function(){var t=this;t.$createElement;return t._c("td",[t._c("span",[t._v("CATEGORIA ")])])},function(){var t=this;t.$createElement;return t._c("td",[t._c("span",[t._v("PROVINCIA ")])])},function(){var t=this;t.$createElement;return t._c("td",[t._c("span",[t._v("COMUNE ")])])}]}}});
//# sourceMappingURL=18.js.map