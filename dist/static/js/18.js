webpackJsonp([18,36],{252:function(t,e,r){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(24),n=a(i),c=r(23),o=a(c),l=r(32),u=a(l),s=r(10),p=a(s),g=r(30),f=(a(g),r(29)),d=a(f),A=r(14),v=(a(A),r(11)),m=a(v),h=r(15),C=(a(h),r(12)),_=a(C),B=r(9),b=(a(B),r(5)),y=(a(b),r(8)),x=a(y),w=r(4),R=(a(w),r(1)),E=a(R),k=r(18),I=a(k),G=r(13),O=a(G),U=r(7),V=a(U),T=r(19),D=a(T);E.default.use(x.default),E.default.use(_.default),E.default.use(m.default),O.default.use(I.default),E.default.use(d.default),E.default.component("gv-cultura-ricerca-results",function(){return new p.default(function(t){r.e(46,function(e){t(r(693))})})}),e.default={name:"gv-cultura-ricerca",data:function(){var t=GV.globals.CULTURA_CONFIG.raggruppamenti,e=!0,r=!1,a=void 0;try{for(var i,n=(0,u.default)(t);!(e=(i=n.next()).done);e=!0){var c=i.value;c.categorie.unshift({id:0,categoria:"Tutte"})}}catch(t){r=!0,a=t}finally{try{!e&&n.return&&n.return()}finally{if(r)throw a}}t=t.sort(function(t,e){return t.id-e.id});var o=GV.globals.CULTURA_CONFIG.categorie;o.unshift({id:0,categoria:"Tutte"}),t.unshift({id:0,raggruppamento:"Tutti",categorie:o});var l=GV.globals.CULTURA_CONFIG.province,s=!0,p=!1,g=void 0;try{for(var f,d=(0,u.default)(l);!(s=(f=d.next()).done);s=!0){var A=f.value;A.comuni.unshift({id:0,comune:"Tutti"}),A.comuni=A.comuni.sort(function(t,e){return t.id-e.id})}}catch(t){p=!0,g=t}finally{try{!s&&d.return&&d.return()}finally{if(p)throw g}}var v=GV.globals.CULTURA_CONFIG.comuni;v.push({id:0,comune:"Tutti"}),v=v.sort(function(t,e){return t.id-e.id}),l.push({id:0,provincia:"Tutte",comuni:v}),l=l.sort(function(t,e){return t.id-e.id});var m=GV.globals.CULTURA_CONFIG.filter,h=!GV.globals.CULTURA_CONFIG.embed;return{raggruppamenti:t,raggruppamento:m.raggruppamento,categorie:o,categoria:m.categoria,province:l,provincia:m.provincia,comuni:v,comune:m.comune,itinerario:m.itinerario,propertyName:"NOME",luoghi:null,filterResult:[],listaLuoghi:[],loading:!1,show:!1,visible:h}},mounted:function(){var t=this;return(0,o.default)(n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.raggruppamento&&t.onChangeRaggruppamento(t.raggruppamento),t.provincia&&t.onChangeProvincia(t.provincia),t.filterLuoghi();case 3:case"end":return e.stop()}},e,t)}))()},methods:{onChangeRaggruppamento:function(t){this.categorie=this.raggruppamenti.filter(function(e){return e.id===t})[0].categorie,this.categoria=0},onChangeProvincia:function(t){this.comuni=this.province.filter(function(e){return e.id===t})[0].comuni,this.comune=0},filterLuoghi:function(){var t=this;if(GV.globals.CULTURA_CONFIG.flagItinerario||!this.noFilter()){var e=document.getElementById("gv-cultura-info");e&&e.remove(),this.listaLuoghi=GV.globals.CULTURA_CONFIG.luoghi.filter(function(e){return(!t.raggruppamento||t.raggruppamento===e.properties.ID_RAGGRUPPAMENTO)&&(!(t.categoria&&!t.ricercaCategoria(e.properties.OID))&&((!t.provincia||t.provincia==e.properties.COD_PROV)&&(!t.comune||t.comune==e.properties.COD_PROV+e.properties.COD_COM)))}).sort(function(t,e){var r=t.properties.NOME<e.properties.NOME?-1:1;return r}),0===this.listaLuoghi.length?(0,D.default)("Nessun risultato trovato"):(this.showResults(),this.filtraMappa(),this.zoomExtentsMap())}},ricercaCategoria:function(t){var e=this,r=GV.globals.CULTURA_CONFIG.categorieRicerca.filter(function(r){if(r.id==t&&r.catoid===e.categoria)return!0});return r.length>0},zoomExtentsMap:function(){var t=L.latLngBounds([]);GV.globals.CULTURA_LAYERS.forEach(function(e){var r=GV.app.map.getLayerByName(e.name),a=r.getBounds();t.extend(a)}),GV.app.map.fitBounds(t)},filtraMappa:function(){var t=this;GV.globals.CULTURA_LAYERS.forEach(function(e){GV.config.removeLayer(e.name),e.filter=function(e){var r=!1,a=!0,i=!1,n=void 0;try{for(var c,o=(0,u.default)(t.listaLuoghi);!(a=(c=o.next()).done);a=!0){var l=c.value;if(e.properties.OID==l.properties.OID){r=!0;break}}}catch(t){i=!0,n=t}finally{try{!a&&o.return&&o.return()}finally{if(i)throw n}}return r},GV.config.addLayerToMap(e,0)})},noFilter:function(){return 0===this.raggruppamento&&0===this.categoria&&0===this.provincia&&0===this.comune},reset:function(){if(GV.globals.CULTURA_CONFIG.flagItinerario)return this.noFilter()?void 0:(this.raggruppamento=0,this.categoria=0,this.provincia=0,this.comune=0,void this.filterLuoghi());this.raggruppamento=0,this.categoria=0,this.provincia=0,this.comune=0,this.onChangeRaggruppamento(0),this.onChangeProvincia(0);var t=document.getElementById("gv-cultura-ricerca-results");t&&t.remove();var e=document.getElementById("gv-cultura-info");e&&e.remove(),GV.globals.CULTURA_LAYERS.forEach(function(t){GV.config.removeLayer(t.name),t.filter=function(){return!0},GV.config.addLayerToMap(t,0)}),this.zoomExtentsMap()},closeResultPanels:function(){},showInfo:function(){},showResults:function(){var t={comune:this.comune?this.comune:null,provincia:this.provincia?this.provincia:null,raggruppamento:this.raggruppamento?this.raggruppamento:null,categoria:this.categoria?this.categoria:null,itinerario:this.itinerario?this.itinerario:null};(0,V.default)({elId:"gv-cultura-ricerca-results",clear:!0,vm:new E.default({template:'<gv-cultura-ricerca-results :listaLuoghi="listaLuoghi" :filtro="filtro"></gv-cultura-ricerca-results>',data:{listaLuoghi:this.listaLuoghi,filtro:t}})})},handleLink:function(t,e){window.open(e)},hidePanel:function(t){this.show?(document.getElementById("gv-cultura-ricerca-body").style.display="block",document.getElementById("gv-cultura-ricerca").style.width="480px"):(document.getElementById("gv-cultura-ricerca-body").style.display="none",document.getElementById("gv-cultura-ricerca").style.width="110px"),this.show=!this.show},toggleCollapseClass:function(){return this.show?"gv-cultura-ricerca-collapse gv-color-scheme el-icon-arrow-down":"gv-cultura-ricerca-collapse gv-color-scheme el-icon-arrow-up"}}}},497:function(t,e,r){e=t.exports=r(2)(),e.push([t.id,".el-tree-node__label{font-size:12px!important}.el-tabs__header,.el-tabs__item.is-active{color:#24386c!important}.el-tabs__header{margin:0 0 5px!important}.el-select .el-input .el-select__caret{color:#000!important;font-size:16px!important;font-weight:800}","",{version:3,sources:["/./src/components/CulturaRicerca.vue"],names:[],mappings:"AACA,qBACE,wBAA2B,CAC5B,AAID,0CAFE,uBAA0B,CAK3B,AAHD,iBACE,wBAA2B,CAE5B,AACD,uCACE,qBAAwB,AACxB,yBAA2B,AAC3B,eAAiB,CAClB",file:"CulturaRicerca.vue",sourcesContent:["\n.el-tree-node__label {\r\n  font-size: 12px !important;\n}\n.el-tabs__item.is-active {\r\n  color: #24386c !important;\n}\n.el-tabs__header {\r\n  margin: 0 0 5px !important;\r\n  color: #24386c !important;\n}\n.el-select .el-input .el-select__caret {\r\n  color: black !important;\r\n  font-size: 16px !important;\r\n  font-weight: 800;\n}\r\n"],sourceRoot:"webpack://"}])},498:function(t,e,r){e=t.exports=r(2)(),e.push([t.id,".gv-cultura-ricerca[data-v-7fccc215]{position:absolute;left:0;top:0;width:480px;margin-left:10px;margin-top:20px;z-index:800}.gv-cultura-ricerca-luoghi[data-v-7fccc215]{margin-left:10px}.gv-cultura-ricerca-title[data-v-7fccc215]{position:relative;display:block;padding:.3rem 0 .3rem .5rem;margin-bottom:-1px;cursor:default;font-weight:800;font-family:Raleway,Arial,sans-serif!important;font-size:14px}.gv-cultura-ricerca-title [data-v-7fccc215]:focus{outline:0 auto -webkit-focus-ring-color}.gv-cultura-ricerca-body[data-v-7fccc215]{margin:10px}.gv-cultura-ricerca-filtri-title[data-v-7fccc215]{margin-left:10px;margin-top:20px}.gv-cultura-ricerca-label[data-v-7fccc215]{display:inline-block;width:150px}.gv-cultura-ricerca-buttons[data-v-7fccc215],.gv-cultura-ricerca-result[data-v-7fccc215]{margin-top:10px;margin-left:5px}.gv-cultura-ricerca-collapse[data-v-7fccc215]{cursor:pointer;border:0;-webkit-appearance:none;float:right;font-size:14px;margin-top:3px;opacity:1}","",{version:3,sources:["/./src/components/CulturaRicerca.vue"],names:[],mappings:"AACA,qCACE,kBAAmB,AACnB,OAAQ,AACR,MAAO,AACP,YAAa,AACb,iBAAkB,AAClB,gBAAiB,AACjB,WAAa,CACd,AACD,4CACE,gBAAkB,CACnB,AACD,2CACE,kBAAmB,AACnB,cAAe,AAIf,4BAAqB,AACrB,mBAAoB,AAEpB,eAAgB,AAChB,gBAAiB,AACjB,+CAAqD,AACrD,cAAgB,CACjB,AACD,kDACE,uCAA2C,CAC5C,AACD,0CACE,WAAa,CACd,AACD,kDACE,iBAAkB,AAClB,eAAiB,CAClB,AACD,2CACE,qBAAsB,AACtB,WAAa,CACd,AAKD,yFACE,gBAAiB,AACjB,eAAiB,CAClB,AACD,8CACE,eAAgB,AAChB,SAAU,AACV,wBAAyB,AACzB,YAAa,AACb,eAAgB,AAChB,eAAgB,AAChB,SAAW,CACZ",file:"CulturaRicerca.vue",sourcesContent:["\n.gv-cultura-ricerca[data-v-7fccc215] {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  width: 480px;\r\n  margin-left: 10px;\r\n  margin-top: 20px;\r\n  z-index: 800;\n}\n.gv-cultura-ricerca-luoghi[data-v-7fccc215] {\r\n  margin-left: 10px;\n}\n.gv-cultura-ricerca-title[data-v-7fccc215] {\r\n  position: relative;\r\n  display: block;\r\n  padding-top: 0.3rem;\r\n  padding-bottom: 0.3rem;\r\n  padding-right: 0rem;\r\n  padding-left: 0.5rem;\r\n  margin-bottom: -1px;\r\n  /* color: black; */\r\n  cursor: default;\r\n  font-weight: 800;\r\n  font-family: 'Raleway', Arial, sans-serif !important;\r\n  font-size: 14px;\n}\n.gv-cultura-ricerca-title [data-v-7fccc215]:focus {\r\n  outline: -webkit-focus-ring-color auto 0px;\n}\n.gv-cultura-ricerca-body[data-v-7fccc215] {\r\n  margin: 10px;\n}\n.gv-cultura-ricerca-filtri-title[data-v-7fccc215] {\r\n  margin-left: 10px;\r\n  margin-top: 20px;\n}\n.gv-cultura-ricerca-label[data-v-7fccc215] {\r\n  display: inline-block;\r\n  width: 150px;\n}\n.gv-cultura-ricerca-buttons[data-v-7fccc215] {\r\n  margin-top: 10px;\r\n  margin-left: 5px;\n}\n.gv-cultura-ricerca-result[data-v-7fccc215] {\r\n  margin-top: 10px;\r\n  margin-left: 5px;\n}\n.gv-cultura-ricerca-collapse[data-v-7fccc215] {\r\n  cursor: pointer;\r\n  border: 0;\r\n  -webkit-appearance: none;\r\n  float: right;\r\n  font-size: 14px;\r\n  margin-top: 3px;\r\n  opacity: 1;\n}\r\n"],sourceRoot:"webpack://"}])},627:function(t,e,r){var a=r(497);"string"==typeof a&&(a=[[t.id,a,""]]);r(3)(a,{});a.locals&&(t.exports=a.locals)},628:function(t,e,r){var a=r(498);"string"==typeof a&&(a=[[t.id,a,""]]);r(3)(a,{});a.locals&&(t.exports=a.locals)},692:function(t,e,r){var a,i;r(628),r(627),a=r(252);var n=r(845);i=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(i=a=a.default),"function"==typeof i&&(i=i.options),i.render=n.render,i.staticRenderFns=n.staticRenderFns,i._scopeId="data-v-7fccc215",t.exports=a},845:function(t,e){t.exports={render:function(){var t=this;t.$createElement;return t.visible?t._c("div",{ref:"gv-cultura-ricerca",staticClass:"gv-cultura-ricerca gv-inverted-color-scheme",attrs:{id:"gv-cultura-ricerca"}},[t._c("div",{directives:[{name:"draggable",rawName:"v-draggable"}],staticClass:"gv-cultura-ricerca-title gv-color-scheme",attrs:{id:"gv-cultura-ricerca-title"}},[t._c("b",[t._v("RICERCHE")]),t._v(" "),t._c("button",{class:t.toggleCollapseClass(),attrs:{size:"mini",title:"Nascondi Pannello"},on:{click:t.hidePanel}})]),t._v(" "),t._c("div",{staticClass:"gv-cultura-ricerca-body",attrs:{id:"gv-cultura-ricerca-body"}},[t._c("div",{attrs:{id:"gv-cultura-ricerca-filtri"}},[t._c("table",[t._c("tr",[t._m(0),t._v(" "),t._c("td",[t._c("el-select",{staticStyle:{width:"270px !important"},attrs:{size:"small",placeholder:"Raggruppamento"},on:{change:t.onChangeRaggruppamento},model:{value:t.raggruppamento,callback:function(e){t.raggruppamento=e},expression:"raggruppamento"}},t._l(t.raggruppamenti,function(e){return t._c("el-option",{key:e.id,attrs:{value:e.id,label:e.raggruppamento}})}))],1)]),t._v(" "),t._c("tr",[t._m(1),t._v(" "),t._c("td",[t._c("el-select",{staticStyle:{width:"270px !important"},attrs:{size:"small",filterable:"","collapse-tags":"",placeholder:"Categoria"},model:{value:t.categoria,callback:function(e){t.categoria=e},expression:"categoria"}},t._l(t.categorie,function(e){return t._c("el-option",{key:e.id,attrs:{value:e.id,label:e.categoria}})}))],1)]),t._v(" "),t._c("tr",[t._m(2),t._v(" "),t._c("td",[t._c("el-select",{staticStyle:{width:"270px !important"},attrs:{size:"small",placeholder:"Provincia"},on:{change:t.onChangeProvincia},model:{value:t.provincia,callback:function(e){t.provincia=e},expression:"provincia"}},t._l(t.province,function(e){return t._c("el-option",{key:e.id,attrs:{value:e.id,label:e.provincia}})}))],1)]),t._v(" "),t._c("tr",[t._m(3),t._v(" "),t._c("el-select",{staticStyle:{width:"270px !important"},attrs:{size:"small",filterable:"","collapse-tags":"",placeholder:"Comune"},model:{value:t.comune,callback:function(e){t.comune=e},expression:"comune"}},t._l(t.comuni,function(e){return t._c("el-option",{key:e.id,attrs:{value:e.id,label:e.comune}})})),t._v(" "),t._c("td")],1)])]),t._v(" "),t._c("div",{staticClass:"gv-cultura-ricerca-buttons"},[t._c("el-button",{attrs:{alt:"Applica",id:"gv-cultura-ricerca-submit",type:"info",size:"mini"},on:{click:t.filterLuoghi}},[t._v("Applica")]),t._v(" "),t._c("el-button",{attrs:{alt:"Annulla Filtro",id:"gv-cultura-ricerca-reset",type:"info",size:"mini"},on:{click:t.reset}},[t._v("Annulla Filtro")])],1)])]):t._e()},staticRenderFns:[function(){var t=this;t.$createElement;return t._c("td",[t._c("span",[t._v("LIVELLO ")])])},function(){var t=this;t.$createElement;return t._c("td",[t._c("span",[t._v("CATEGORIA ")])])},function(){var t=this;t.$createElement;return t._c("td",[t._c("span",[t._v("PROVINCIA ")])])},function(){var t=this;t.$createElement;return t._c("td",[t._c("span",[t._v("COMUNE ")])])}]}}});
//# sourceMappingURL=18.js.map