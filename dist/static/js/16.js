webpackJsonp([16,38],{261:function(t,r,e){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(r,"__esModule",{value:!0});var i=e(22),n=a(i),o=e(21),c=a(o),l=e(32),u=a(l),s=e(24),p=(a(s),e(23)),g=a(p),f=e(14),v=(a(f),e(12)),d=a(v),m=e(15),A=(a(m),e(13)),h=a(A),C=e(9),_=(a(C),e(5)),b=(a(_),e(8)),B=a(b),R=e(1),y=a(R),x=e(17),w=a(x),E=e(11),I=a(E),O=e(16),G=a(O),N=e(62),U=a(N);y.default.use(B.default),y.default.use(h.default),y.default.use(d.default),I.default.use(w.default),y.default.use(g.default),r.default={name:"gv-cultura-ricerca",mixins:[U.default],data:function(){var t=GV.globals.CULTURA_CONFIG.raggruppamenti,r=!0,e=!1,a=void 0;try{for(var i,n=(0,u.default)(t);!(r=(i=n.next()).done);r=!0){var o=i.value;o.categorie.unshift({id:0,categoria:"Tutte"})}}catch(t){e=!0,a=t}finally{try{!r&&n.return&&n.return()}finally{if(e)throw a}}t=t.sort(function(t,r){return t.id-r.id});var c=GV.globals.CULTURA_CONFIG.categorie;c.unshift({id:0,categoria:"Tutte"}),t.unshift({id:0,raggruppamento:"Tutti",categorie:c});var l=GV.globals.CULTURA_CONFIG.province,s=!0,p=!1,g=void 0;try{for(var f,v=(0,u.default)(l);!(s=(f=v.next()).done);s=!0){var d=f.value;d.comuni.unshift({id:0,comune:"Tutti"}),d.comuni=d.comuni.sort(function(t,r){return t.id-r.id})}}catch(t){p=!0,g=t}finally{try{!s&&v.return&&v.return()}finally{if(p)throw g}}var m=GV.globals.CULTURA_CONFIG.comuni;m.push({id:0,comune:"Tutti"}),m=m.sort(function(t,r){return t.id-r.id}),l.push({id:0,provincia:"Tutte",comuni:m}),l=l.sort(function(t,r){return t.id-r.id});var A=GV.globals.CULTURA_CONFIG.filter,h=!GV.globals.CULTURA_CONFIG.embed||!this.largeScreen,C="";A.itinerario&&(C=GV.globals.CULTURA_CONFIG.itinerari.filter(function(t){return t.id==A.itinerario})[0].itinerario);var _=!GV.globals.CULTURA_CONFIG.filter.raggruppamento,b="";return _||(b=GV.globals.CULTURA_CONFIG.raggruppamenti.filter(function(t){return t.id==GV.globals.CULTURA_CONFIG.filter.raggruppamento})[0].raggruppamento,console.log(b)),{raggruppamenti:t,raggruppamento:A.raggruppamento,flagRaggruppamento:_,nomeRaggruppamento:b,categorie:c,categoria:A.categoria,province:l,provincia:A.provincia,comuni:m,comune:A.comune,itinerario:A.itinerario,nomeItinerario:C,propertyName:"NOME",luoghi:null,filterResult:[],listaLuoghi:[],loading:!1,show:!1,visible:h,filtro:null,showResultsPanel:!1}},mounted:function(){var t=this;return(0,c.default)(n.default.mark(function r(){var e;return n.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:t.raggruppamento&&t.onChangeRaggruppamento(t.raggruppamento),t.provincia&&t.onChangeProvincia(t.provincia),t.filterLuoghi(),e=document.getElementById("gv-cultura-ricerca-filtri"),e&&e.focus(),t.largeScreen||(t.visible=!1),GV.globals.CULTURA_CONFIG.filter.luogo&&(t.visible=!1);case 7:case"end":return r.stop()}},r,t)}))()},methods:{onChangeRaggruppamento:function(t){this.categorie=this.raggruppamenti.filter(function(r){return r.id===t})[0].categorie,this.categoria=0},onChangeProvincia:function(t){this.comuni=this.province.filter(function(r){return r.id===t})[0].comuni,this.comune=0},filterLuoghi:function(){var t=this,r=document.getElementById("gv-cultura-info");r&&!GV.globals.CULTURA_CONFIG.filter.luogo&&r.remove(),this.listaLuoghi=GV.globals.CULTURA_CONFIG.luoghi.filter(function(r){return(!t.raggruppamento||t.raggruppamento===r.properties.ID_RAGGRUPPAMENTO)&&(!(t.categoria&&!t.ricercaCategoria(r.properties.OID))&&((!t.provincia||t.provincia==r.properties.COD_PROV)&&(!t.comune||t.comune==r.properties.COD_PROV+r.properties.COD_COM)))}).sort(function(t,r){var e=t.properties.NOME<r.properties.NOME?-1:1;return e}),0===this.listaLuoghi.length?(0,G.default)("Nessun risultato trovato"):(this.showResults(),this.filtraMappa(),this.zoomExtentsMap())},ricercaCategoria:function(t){var r=this,e=GV.globals.CULTURA_CONFIG.categorieRicerca.filter(function(e){if(e.id==t&&e.catoid===r.categoria)return!0});return e.length>0},zoomExtentsMap:function(){var t=L.latLngBounds([]);GV.globals.CULTURA_LAYERS.forEach(function(r){var e=GV.app.map.getLayerByName(r.name),a=e.getBounds();t.extend(a)}),t=t.pad(.2),GV.app.map.fitBounds(t)},filtraMappa:function(){var t=this;GV.globals.CULTURA_LAYERS.forEach(function(r){GV.config.removeLayer(r.name),r.filter=function(r){var e=!1,a=!0,i=!1,n=void 0;try{for(var o,c=(0,u.default)(t.listaLuoghi);!(a=(o=c.next()).done);a=!0){var l=o.value;if(r.properties.OID==l.properties.OID){e=!0;break}}}catch(t){i=!0,n=t}finally{try{!a&&c.return&&c.return()}finally{if(i)throw n}}return e},GV.config.addLayerToMap(r,0)})},noFilter:function(){return 0===this.raggruppamento&&0===this.categoria&&0===this.provincia&&0===this.comune},reset:function(){if(GV.globals.CULTURA_CONFIG.flagItinerario)return this.noFilter()?void 0:(this.raggruppamento=0,this.categoria=0,this.provincia=0,this.comune=0,void this.filterLuoghi());var t=GV.globals.CULTURA_CONFIG.filter.raggruppamento?GV.globals.CULTURA_CONFIG.filter.raggruppamento:0;console.log(t),this.raggruppamento=t,this.categoria=0,this.provincia=0,this.comune=0,this.onChangeRaggruppamento(t),this.onChangeProvincia(0),this.filterLuoghi(),this.flagRaggruppamento&&(this.showResultsPanel=!1);var r=document.getElementById("gv-cultura-info");r&&r.remove()},closeResultPanels:function(){},showInfo:function(){},showResults:function(){!GV.globals.CULTURA_CONFIG.flagItinerario&&this.noFilter()||(this.filtro={comune:this.comune?this.comune:null,provincia:this.provincia?this.provincia:null,raggruppamento:this.raggruppamento?this.raggruppamento:null,categoria:this.categoria?this.categoria:null,itinerario:this.itinerario?this.itinerario:null},this.showResultsPanel=!0)},hidePanel:function(t){this.show?(document.getElementById("gv-cultura-ricerca-body").style.display="block",document.getElementById("gv-cultura-ricerca").style.width="480px"):(document.getElementById("gv-cultura-ricerca-body").style.display="none",document.getElementById("gv-cultura-ricerca").style.width="110px"),this.show=!this.show},toggleCollapseClass:function(){return this.show?"gv-cultura-ricerca-collapse gv-color-scheme el-icon-arrow-down":"gv-cultura-ricerca-collapse gv-color-scheme el-icon-arrow-up"},stampaPDF:function(){var t=g.default.service({fullscreen:!0,text:"Preparazione Stampa",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),r="/geoservices/REST/print/cultura/?TYPE=PRINT";this.filtro.raggruppamento&&(r+="&RAGGRUPPAMENTO="+this.filtro.raggruppamento),this.filtro.categoria&&(r+="&CATEGORIA="+this.filtro.categoria),this.filtro.provincia&&(r+="&PROVINCIA="+this.filtro.provincia),this.filtro.comune&&(r+="&COMUNE="+this.filtro.comune),this.filtro.itinerario&&(r+="&ITINERARIO="+this.filtro.itinerario),fetch(r).then(function(t){return t.json()}).then(function(r){t.close(),console.log(r);var e=window.open(r.url);e.focus()}).catch(function(t){console.error("Error:",t),alert(t)})},tableRowClassName:function(){return{cursor:"pointer","background-color":"#c9c8c8"}},selectRiga:function(t){GV.app.map.setView([t.geometry.coordinates[1],t.geometry.coordinates[0]],19);var r=document.getElementById("gv-cultura-info");r&&r.remove(),GV.mount({elId:"gv-cultura-info",toggleEl:!0,template:'<gv-cultura-info :properties="properties" ></gv-cultura-info>',data:{properties:t.properties}})}}}},518:function(t,r,e){r=t.exports=e(3)(),r.push([t.id,".el-tree-node__label{font-size:12px!important}.el-tabs__header,.el-tabs__item.is-active{color:#24386c!important}.el-tabs__header{margin:0 0 5px!important}.el-select .el-input .el-select__caret{color:#000!important;font-size:16px!important;font-weight:800}","",{version:3,sources:["/./src/components/CulturaRicerca.vue"],names:[],mappings:"AACA,qBACE,wBAA2B,CAC5B,AAID,0CAFE,uBAA0B,CAK3B,AAHD,iBACE,wBAA2B,CAE5B,AACD,uCACE,qBAAwB,AACxB,yBAA2B,AAC3B,eAAiB,CAClB",file:"CulturaRicerca.vue",sourcesContent:["\n.el-tree-node__label {\r\n  font-size: 12px !important;\n}\n.el-tabs__item.is-active {\r\n  color: #24386c !important;\n}\n.el-tabs__header {\r\n  margin: 0 0 5px !important;\r\n  color: #24386c !important;\n}\n.el-select .el-input .el-select__caret {\r\n  color: black !important;\r\n  font-size: 16px !important;\r\n  font-weight: 800;\n}\r\n"],sourceRoot:"webpack://"}])},519:function(t,r,e){r=t.exports=e(3)(),r.push([t.id,".gv-cultura-ricerca[data-v-7fccc215]{position:absolute;left:0;top:0;width:480px;margin-left:10px;margin-top:20px;z-index:800}.gv-cultura-ricerca-luoghi[data-v-7fccc215]{margin-left:3px}.gv-cultura-ricerca-title[data-v-7fccc215]{position:relative;display:block;padding:.3rem 0 .3rem .5rem;margin-bottom:-1px;cursor:default;font-weight:800;font-family:Raleway,Arial,sans-serif!important;font-size:14px}.gv-cultura-ricerca-title [data-v-7fccc215]:focus{outline:0 auto -webkit-focus-ring-color}.gv-cultura-ricerca-body[data-v-7fccc215]{margin:10px}.gv-cultura-ricerca-filtri-title[data-v-7fccc215]{margin-left:10px;margin-top:20px}.gv-cultura-ricerca-label[data-v-7fccc215]{display:inline-block;width:150px}.gv-cultura-ricerca-buttons[data-v-7fccc215],.gv-cultura-ricerca-result[data-v-7fccc215]{margin-top:10px;margin-left:5px}.gv-cultura-ricerca-collapse[data-v-7fccc215]{cursor:pointer;border:0;-webkit-appearance:none;float:right;font-size:14px;margin-top:3px;opacity:1}.gv-cultura-ricerca-results-result[data-v-7fccc215]{margin-top:10px}.gv-cultura-ricerca-results-pdf-button[data-v-7fccc215]{margin:5px!important;float:right!important}","",{version:3,sources:["/./src/components/CulturaRicerca.vue"],names:[],mappings:"AACA,qCACE,kBAAmB,AACnB,OAAQ,AACR,MAAO,AACP,YAAa,AACb,iBAAkB,AAClB,gBAAiB,AACjB,WAAa,CACd,AACD,4CACE,eAAiB,CAClB,AACD,2CACE,kBAAmB,AACnB,cAAe,AAIf,4BAAqB,AACrB,mBAAoB,AAEpB,eAAgB,AAChB,gBAAiB,AACjB,+CAAqD,AACrD,cAAgB,CACjB,AACD,kDACE,uCAA2C,CAC5C,AACD,0CACE,WAAa,CACd,AACD,kDACE,iBAAkB,AAClB,eAAiB,CAClB,AACD,2CACE,qBAAsB,AACtB,WAAa,CACd,AAKD,yFACE,gBAAiB,AACjB,eAAiB,CAClB,AACD,8CACE,eAAgB,AAChB,SAAU,AACV,wBAAyB,AACzB,YAAa,AACb,eAAgB,AAChB,eAAgB,AAChB,SAAW,CACZ,AACD,oDACE,eAAiB,CAElB,AACD,wDACE,qBAAuB,AACvB,qBAAwB,CACzB",file:"CulturaRicerca.vue",sourcesContent:["\n.gv-cultura-ricerca[data-v-7fccc215] {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  width: 480px;\r\n  margin-left: 10px;\r\n  margin-top: 20px;\r\n  z-index: 800;\n}\n.gv-cultura-ricerca-luoghi[data-v-7fccc215] {\r\n  margin-left: 3px;\n}\n.gv-cultura-ricerca-title[data-v-7fccc215] {\r\n  position: relative;\r\n  display: block;\r\n  padding-top: 0.3rem;\r\n  padding-bottom: 0.3rem;\r\n  padding-right: 0rem;\r\n  padding-left: 0.5rem;\r\n  margin-bottom: -1px;\r\n  /* color: black; */\r\n  cursor: default;\r\n  font-weight: 800;\r\n  font-family: 'Raleway', Arial, sans-serif !important;\r\n  font-size: 14px;\n}\n.gv-cultura-ricerca-title [data-v-7fccc215]:focus {\r\n  outline: -webkit-focus-ring-color auto 0px;\n}\n.gv-cultura-ricerca-body[data-v-7fccc215] {\r\n  margin: 10px;\n}\n.gv-cultura-ricerca-filtri-title[data-v-7fccc215] {\r\n  margin-left: 10px;\r\n  margin-top: 20px;\n}\n.gv-cultura-ricerca-label[data-v-7fccc215] {\r\n  display: inline-block;\r\n  width: 150px;\n}\n.gv-cultura-ricerca-buttons[data-v-7fccc215] {\r\n  margin-top: 10px;\r\n  margin-left: 5px;\n}\n.gv-cultura-ricerca-result[data-v-7fccc215] {\r\n  margin-top: 10px;\r\n  margin-left: 5px;\n}\n.gv-cultura-ricerca-collapse[data-v-7fccc215] {\r\n  cursor: pointer;\r\n  border: 0;\r\n  -webkit-appearance: none;\r\n  float: right;\r\n  font-size: 14px;\r\n  margin-top: 3px;\r\n  opacity: 1;\n}\n.gv-cultura-ricerca-results-result[data-v-7fccc215] {\r\n  margin-top: 10px;\r\n  /* margin-left: 5px; */\n}\n.gv-cultura-ricerca-results-pdf-button[data-v-7fccc215] {\r\n  margin: 5px !important;\r\n  float: right !important;\n}\r\n"],sourceRoot:"webpack://"}])},653:function(t,r,e){var a=e(518);"string"==typeof a&&(a=[[t.id,a,""]]);e(4)(a,{});a.locals&&(t.exports=a.locals)},654:function(t,r,e){var a=e(519);"string"==typeof a&&(a=[[t.id,a,""]]);e(4)(a,{});a.locals&&(t.exports=a.locals)},728:function(t,r,e){var a,i;e(654),e(653),a=e(261);var n=e(896);i=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(i=a=a.default),"function"==typeof i&&(i=i.options),i.render=n.render,i.staticRenderFns=n.staticRenderFns,i._scopeId="data-v-7fccc215",t.exports=a},896:function(t,r){t.exports={render:function(){var t=this;t.$createElement;return t.visible?t._c("div",{ref:"gv-cultura-ricerca",staticClass:"gv-cultura-ricerca gv-inverted-color-scheme",attrs:{id:"gv-cultura-ricerca"}},[t._c("div",{directives:[{name:"draggable",rawName:"v-draggable"}],staticClass:"gv-cultura-ricerca-title gv-color-scheme",attrs:{id:"gv-cultura-ricerca-title"}},[t._c("strong",[t._v("RICERCHE")]),t._v(" "),t._c("button",{class:t.toggleCollapseClass(),attrs:{size:"mini",title:"Nascondi Pannello"},on:{click:t.hidePanel}})]),t._v(" "),t._c("div",{staticClass:"gv-cultura-ricerca-body",attrs:{id:"gv-cultura-ricerca-body"}},[t._c("div",{attrs:{id:"gv-cultura-ricerca-filtri"}},[t._c("table",[t.itinerario?t._c("tr",[t._m(0),t._v(" "),t._c("td",[t._c("span",[t._c("strong",[t._v("  "+t._s(t.nomeItinerario))])])])]):t._e(),t._v(" "),t.flagRaggruppamento?t._c("tr",[t._m(1),t._v(" "),t._c("td",[t._c("el-select",{staticStyle:{width:"270px !important"},attrs:{size:"small",placeholder:"Raggruppamento"},on:{change:t.onChangeRaggruppamento},model:{value:t.raggruppamento,callback:function(r){t.raggruppamento=r},expression:"raggruppamento"}},t._l(t.raggruppamenti,function(r){return t._c("el-option",{key:r.id,attrs:{value:r.id,label:r.raggruppamento}})}))],1)]):t._e(),t._v(" "),t.flagRaggruppamento?t._e():t._c("tr",[t._m(2),t._v(" "),t._c("td",[t._c("span",[t._c("strong",[t._v("  "+t._s(t.nomeRaggruppamento))])])])]),t._v(" "),t._c("tr",[t._m(3),t._v(" "),t._c("td",[t._c("el-select",{staticStyle:{width:"270px !important"},attrs:{size:"small",filterable:"","collapse-tags":"",placeholder:"Categoria"},model:{value:t.categoria,callback:function(r){t.categoria=r},expression:"categoria"}},t._l(t.categorie,function(r){return t._c("el-option",{key:r.id,attrs:{value:r.id,label:r.categoria}})}))],1)]),t._v(" "),t._c("tr",[t._m(4),t._v(" "),t._c("td",[t._c("el-select",{staticStyle:{width:"270px !important"},attrs:{size:"small",placeholder:"Provincia"},on:{change:t.onChangeProvincia},model:{value:t.provincia,callback:function(r){t.provincia=r},expression:"provincia"}},t._l(t.province,function(r){return t._c("el-option",{key:r.id,attrs:{value:r.id,label:r.provincia}})}))],1)]),t._v(" "),t._c("tr",[t._m(5),t._v(" "),t._c("el-select",{staticStyle:{width:"270px !important"},attrs:{size:"small",filterable:"","collapse-tags":"",placeholder:"Comune"},model:{value:t.comune,callback:function(r){t.comune=r},expression:"comune"}},t._l(t.comuni,function(r){return t._c("el-option",{key:r.id,attrs:{value:r.id,label:r.comune}})})),t._v(" "),t._c("td")],1)])]),t._v(" "),t._c("div",{staticClass:"gv-cultura-ricerca-buttons"},[t._c("el-button",{attrs:{alt:"Applica",id:"gv-cultura-ricerca-submit",type:"info",size:"mini"},on:{click:t.filterLuoghi}},[t._v("Applica")]),t._v(" "),t._c("el-button",{attrs:{alt:"Annulla Filtro",id:"gv-cultura-ricerca-reset",type:"info",size:"mini"},on:{click:t.reset}},[t._v("Annulla Filtro")]),t._v(" "),t._c("el-button",{directives:[{name:"show",rawName:"v-show",value:t.showResultsPanel,expression:"showResultsPanel"}],staticClass:"gv-cultura-ricerca-results-pdf-button",attrs:{id:"gv-cultura-ricerca-results-pdf-button",type:"info",size:"mini",alt:"Stampa PDF"},on:{click:t.stampaPDF}},[t._v("Stampa PDF")])],1),t._v(" "),t._c("div",{directives:[{name:"show",rawName:"v-show",value:t.showResultsPanel,expression:"showResultsPanel"}],staticClass:"gv-cultura-ricerca-results-body",attrs:{id:"gv-cultura-ricerca-results-body"}},[t._c("div",{staticClass:"gv-cultura-ricerca-results-result"},[t._c("div",{staticClass:"gv-cultura-ricerca-results-table"},[t._c("el-table",{staticClass:"gv-inverted-color-scheme",staticStyle:{"font-size":"12px !important"},attrs:{data:t.listaLuoghi,"empty-text":"Nessun luogo trovato","row-style":t.tableRowClassName,"show-header":!1,height:"300",size:"mini"},on:{"current-change":t.selectRiga}},[t._c("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(r){return[t._c("strong",[t._v(t._s(r.row.properties.CATNAME))]),t._c("br"),t._c("br"),t._v(" "),t._c("em",[t._v(t._s(r.row.properties.DESCRIZIONE_BREVE))])]}}])}),t._v(" "),t._c("el-table-column",{attrs:{prop:"properties.NOME",align:"left",width:"200"},scopedSlots:t._u([{key:"default",fn:function(r){return[t._c("strong",[t._v(t._s(r.row.properties.NOME))])]}}])}),t._v(" "),t._c("el-table-column",{attrs:{prop:"properties.NOMECOMUNE",align:"left",width:"200"},scopedSlots:t._u([{key:"default",fn:function(r){return[t._c("span",[t._v(t._s(r.row.properties.NOMECOMUNE)+"\n                  "),t._c("span",[t._v("( "+t._s(r.row.properties.SIGLA_PROVINCIA)+" ) ")])])]}}])})],1)],1)])])])]):t._e()},staticRenderFns:[function(){var t=this;t.$createElement;return t._c("td",[t._c("span",[t._c("strong",[t._v("ITINERARIO")])])])},function(){var t=this;t.$createElement;return t._c("td",[t._c("span",[t._v("LIVELLO ")])])},function(){var t=this;t.$createElement;return t._c("td",[t._c("span",[t._c("strong",[t._v("LIVELLO")])])])},function(){var t=this;t.$createElement;return t._c("td",[t._c("span",[t._v("CATEGORIA ")])])},function(){var t=this;t.$createElement;return t._c("td",[t._c("span",[t._v("PROVINCIA ")])])},function(){var t=this;t.$createElement;return t._c("td",[t._c("span",[t._v("COMUNE ")])])}]}}});
//# sourceMappingURL=16.js.map