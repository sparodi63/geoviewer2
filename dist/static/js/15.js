webpackJsonp([15,28],{282:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(40),l=i(o),r=a(39),n=i(r),c=a(13),s=(i(c),a(11)),u=i(s),d=a(14),p=(i(d),a(12)),g=i(p),A=a(9),f=(i(A),a(6)),v=(i(f),a(8)),m=i(v),h=a(4),_=i(h),b=a(1),C=i(b),w=a(23),x=i(w),y=a(18),B=i(y),k=a(21),S=i(k);C.default.use(m.default),C.default.use(g.default),C.default.use(u.default),B.default.use(x.default),t.default={name:"gv-scuoladigitale-ricerca",props:{idMap:String,selFogli:String,field:String},data:function(){return{tipi:[{id:"scuola",label:"Ricerca per nome scuola"},{id:"temi",label:"Ricerca per parole chiave"}],tipo:"scuola",ordini:[],scuole:[],layers:["scuole_01","scuole_02","scuole_03","scuole_04","scuole_06","scuole_07"],propertyName:"DENOMINAZIONE",results:[],listaOrdini:[],parole:[],listaParole:[],listaProgetti:[],listaScuole:[],showResult:!1,loading:!1,show:!1,showRicercaScuola:!0,showRicercaTemi:!1}},mounted:function(){var e=this;return(0,n.default)(l.default.mark(function t(){var a,i;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.default.get("/geoservices/REST/scuola/ordini");case 2:return a=t.sent,t.next=5,a.data.data;case 5:return e.listaOrdini=t.sent,t.next=8,_.default.get("/geoservices/REST/scuola/parole");case 8:return i=t.sent,t.next=11,i.data.data;case 11:e.listaParole=t.sent;case 12:case"end":return t.stop()}},t,e)}))()},methods:{changeTipo:function(e){console.log(e),"scuola"===e&&(this.showRicercaScuola=!0,this.showRicercaTemi=!1),"temi"===e&&(this.showRicercaScuola=!1,this.showRicercaTemi=!0)},search:function(e){this.results=[],e.length<3||(this.results=this.filterData(e))},filterData:function(e){var t=this,a=[];return e=e.replace(/[*+?^${}()|[\]\\]/g,""),""===e?[]:(this.layers.forEach(function(i){GV.app.map.eachLayer(function(o){o.name===i&&o instanceof L.LayerGroup&&o.eachLayer(function(i){var o=i.getLatLng();o.layer=i;var l=i.feature.properties[t.propertyName];if(new RegExp(e,"i").test(l)){var r=t.additionalLabel?i.feature.properties[t.additionalLabel]:null,n=t.additionalLabel?l+" ("+r+")":l,c=i.feature.properties.COD_MECC;a.push({label:n,value:c,location:o})}})})}),a)},onChange:function(e){console.log(e),this.listaScuole=[e],this.filtraMappa()},submit:function(){var e=this;return(0,n.default)(l.default.mark(function t(){var a,i,o,r;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.parole.length){t.next=3;break}return(0,S.default)("Selezionare almeno una parola chiave","warning"),t.abrupt("return");case 3:return a=e.ordini.join(","),i=e.parole.join(","),t.next=7,_.default.get("/geoservices/REST/scuola/ricerca?ordini="+a+"&parole="+i);case 7:return o=t.sent,t.next=10,o.data.data;case 10:r=t.sent,e.listaProgetti=r.progetti,e.listaScuole=r.scuole,e.filtraMappa(),e.showResult=!0,e.$el.style.width="810px";case 16:case"end":return t.stop()}},t,e)}))()},reset:function(){GV.globals.SCUOLA_DIGITALE_LAYERS.forEach(function(e){GV.config.removeLayer(e.name),e.filter=function(){return!0},GV.config.addLayerToMap(e,0)}),this.listaProgetti=[],this.listaScuole=[],this.ordini=[],this.parole=[],this.showResult=!1,this.$el.style.width="480px"},filtraMappa:function(){var e=this;GV.globals.SCUOLA_DIGITALE_LAYERS.forEach(function(t){GV.config.removeLayer(t.name),t.filter=function(t){if(e.scuolaInListaScuole(t))return!0},GV.config.addLayerToMap(t,0)})},scuolaInListaScuole:function(e){var t=!1;return this.listaScuole.forEach(function(a){e.properties.COD_MECC===a&&(t=!0)}),t},handleLink:function(e,t){window.open(t)},selectRiga:function(e){console.log(e)},hidePanel:function(e){this.show?(document.getElementById("gv-scuoladigitale-ricerca-body").style.display="block",document.getElementById("gv-scuoladigitale-ricerca").style.width="480px"):(document.getElementById("gv-scuoladigitale-ricerca-body").style.display="none",document.getElementById("gv-scuoladigitale-ricerca").style.width="110px"),this.show=!this.show},toggleCollapseClass:function(){return this.show?"gv-scuoladigitale-ricerca-collapse gv-color-scheme el-icon-arrow-down":"gv-scuoladigitale-ricerca-collapse gv-color-scheme el-icon-arrow-up"}}}},437:function(e,t,a){t=e.exports=a(2)(),t.push([e.id,".el-tree-node__label{font-size:12px!important}.el-tabs__header,.el-tabs__item.is-active{color:#24386c!important}.el-tabs__header{margin:0 0 5px!important}","",{version:3,sources:["/./src/components/ScuolaDigitaleRicerca.vue"],names:[],mappings:"AACA,qBACE,wBAA2B,CAC5B,AAID,0CAFE,uBAA0B,CAK3B,AAHD,iBACE,wBAA2B,CAE5B",file:"ScuolaDigitaleRicerca.vue",sourcesContent:["\n.el-tree-node__label {\r\n  font-size: 12px !important;\n}\n.el-tabs__item.is-active {\r\n  color: #24386c !important;\n}\n.el-tabs__header {\r\n  margin: 0 0 5px !important;\r\n  color: #24386c !important;\n}\r\n"],sourceRoot:"webpack://"}])},438:function(e,t,a){t=e.exports=a(2)(),t.push([e.id,".gv-scuoladigitale-ricerca[data-v-55928a14]{position:absolute;left:0;top:0;width:480px;margin-left:20px;margin-top:20px;z-index:800}.gv-scuoladigitale-ricerca-title[data-v-55928a14]{position:relative;display:block;padding:.3rem 0 .3rem .5rem;margin-bottom:-1px;color:#ccc;cursor:default;font-weight:800;font-family:Raleway,Arial,sans-serif!important;font-size:14px}.gv-scuoladigitale-ricerca-title [data-v-55928a14]:focus{outline:0 auto -webkit-focus-ring-color}.gv-scuoladigitale-ricerca-body[data-v-55928a14]{margin:10px}.gv-scuoladigitale-ricerca-label[data-v-55928a14]{display:inline-block;width:150px}.gv-scuoladigitale-ricerca-buttons[data-v-55928a14],.gv-scuoladigitale-ricerca-result[data-v-55928a14]{margin-top:10px;margin-left:5px}.gv-scuoladigitale-ricerca-collapse[data-v-55928a14]{cursor:pointer;border:0;-webkit-appearance:none;float:right;font-size:14px;margin-top:3px;opacity:1}","",{version:3,sources:["/./src/components/ScuolaDigitaleRicerca.vue"],names:[],mappings:"AACA,4CACE,kBAAmB,AACnB,OAAQ,AACR,MAAO,AACP,YAAa,AACb,iBAAkB,AAClB,gBAAiB,AACjB,WAAa,CACd,AACD,kDACE,kBAAmB,AACnB,cAAe,AAIf,4BAAqB,AACrB,mBAAoB,AACpB,WAAY,AACZ,eAAgB,AAChB,gBAAiB,AACjB,+CAAqD,AACrD,cAAgB,CACjB,AACD,yDACE,uCAA2C,CAC5C,AACD,iDACE,WAAa,CACd,AACD,kDACE,qBAAsB,AACtB,WAAa,CACd,AAKD,uGACE,gBAAiB,AACjB,eAAiB,CAClB,AACD,qDACE,eAAgB,AAChB,SAAU,AACV,wBAAyB,AACzB,YAAa,AACb,eAAgB,AAChB,eAAgB,AAChB,SAAW,CACZ",file:"ScuolaDigitaleRicerca.vue",sourcesContent:["\n.gv-scuoladigitale-ricerca[data-v-55928a14] {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  width: 480px;\r\n  margin-left: 20px;\r\n  margin-top: 20px;\r\n  z-index: 800;\n}\n.gv-scuoladigitale-ricerca-title[data-v-55928a14] {\r\n  position: relative;\r\n  display: block;\r\n  padding-top: 0.3rem;\r\n  padding-bottom: 0.3rem;\r\n  padding-right: 0rem;\r\n  padding-left: 0.5rem;\r\n  margin-bottom: -1px;\r\n  color: #ccc;\r\n  cursor: default;\r\n  font-weight: 800;\r\n  font-family: 'Raleway', Arial, sans-serif !important;\r\n  font-size: 14px;\n}\n.gv-scuoladigitale-ricerca-title [data-v-55928a14]:focus {\r\n  outline: -webkit-focus-ring-color auto 0px;\n}\n.gv-scuoladigitale-ricerca-body[data-v-55928a14] {\r\n  margin: 10px;\n}\n.gv-scuoladigitale-ricerca-label[data-v-55928a14] {\r\n  display: inline-block;\r\n  width: 150px;\n}\n.gv-scuoladigitale-ricerca-buttons[data-v-55928a14] {\r\n  margin-top: 10px;\r\n  margin-left: 5px;\n}\n.gv-scuoladigitale-ricerca-result[data-v-55928a14] {\r\n  margin-top: 10px;\r\n  margin-left: 5px;\n}\n.gv-scuoladigitale-ricerca-collapse[data-v-55928a14] {\r\n  cursor: pointer;\r\n  border: 0;\r\n  -webkit-appearance: none;\r\n  float: right;\r\n  font-size: 14px;\r\n  margin-top: 3px;\r\n  opacity: 1;\n}\r\n"],sourceRoot:"webpack://"}])},531:function(e,t,a){var i=a(437);"string"==typeof i&&(i=[[e.id,i,""]]);a(3)(i,{});i.locals&&(e.exports=i.locals)},532:function(e,t,a){var i=a(438);"string"==typeof i&&(i=[[e.id,i,""]]);a(3)(i,{});i.locals&&(e.exports=i.locals)},668:function(e,t,a){var i,o;a(532),a(531),i=a(282);var l=a(724);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=l.render,o.staticRenderFns=l.staticRenderFns,o._scopeId="data-v-55928a14",e.exports=i},724:function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"gv-scuoladigitale-ricerca gv-inverted-color-scheme",attrs:{id:"gv-scuoladigitale-ricerca"}},[e._c("div",{directives:[{name:"draggable",rawName:"v-draggable"}],staticClass:"gv-scuoladigitale-ricerca-title gv-color-scheme",attrs:{id:"gv-scuoladigitale-ricerca-title"}},[e._c("b",[e._v("RICERCHE")]),e._v(" "),e._c("button",{class:e.toggleCollapseClass(),attrs:{size:"mini",title:"Nascondi Pannello"},on:{click:e.hidePanel}})]),e._v(" "),e._c("div",{staticClass:"gv-scuoladigitale-ricerca-body",attrs:{id:"gv-scuoladigitale-ricerca-body"}},[e._c("el-select",{attrs:{placeholder:"Scegli Visualizzazione",size:"mini"},on:{change:e.changeTipo},model:{value:e.tipo,callback:function(t){e.tipo=t},expression:"tipo"}},e._l(e.tipi,function(t){return e._c("el-option",{key:t.id,attrs:{value:t.id,label:t.label}})})),e._v(" "),e._c("div",{directives:[{name:"show",rawName:"v-show",value:e.showRicercaScuola,expression:"showRicercaScuola"}],attrs:{id:"gv-scuoladigitale-ricerca-scuola"}},[e._c("el-select",{attrs:{id:"gv-seach-input",filterable:"",clearable:"",remote:"",size:"small",placeholder:"Ricerca per nome scuola...","remote-method":e.search,loading:e.loading,"loading-text":"Caricamento... ","no-match-text":"Nessun elemento trovato","no-data-text":"Nessun elemento trovato"},on:{change:e.onChange},model:{value:e.scuole,callback:function(t){e.scuole=t},expression:"scuole"}},e._l(e.results,function(t){return e._c("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),e._v(" "),e._c("div",{directives:[{name:"show",rawName:"v-show",value:e.showRicercaTemi,expression:"showRicercaTemi"}],attrs:{id:"gv-scuoladigitale-ricerca-temi"}},[e._c("el-select",{staticStyle:{width:"170px !important"},attrs:{size:"small","collapse-tags":"",multiple:"",placeholder:"Ordine Scuola"},model:{value:e.ordini,callback:function(t){e.ordini=t},expression:"ordini"}},e._l(e.listaOrdini,function(t){return e._c("el-option",{key:t.id,attrs:{value:t.id,label:t.label}})})),e._v(" "),e._c("el-select",{staticStyle:{width:"270px !important"},attrs:{size:"small",multiple:"","collapse-tags":"",placeholder:"Parole Chiave"},model:{value:e.parole,callback:function(t){e.parole=t},expression:"parole"}},e._l(e.listaParole,function(t){return e._c("el-option",{key:t.id,attrs:{value:t.id,label:t.label}})}))],1),e._v(" "),e._c("div",{staticClass:"gv-scuoladigitale-ricerca-buttons"},[e._c("el-button",{attrs:{id:"gv-scuoladigitale-ricerca-submit",type:"info",size:"mini"},on:{click:e.submit}},[e._v("Conferma")]),e._v(" "),e._c("el-button",{attrs:{id:"gv-scuoladigitale-ricerca-reset",type:"info",size:"mini"},on:{click:e.reset}},[e._v("Annulla Selezione")])],1),e._v(" "),e._c("div",{directives:[{name:"show",rawName:"v-show",value:e.showResult,expression:"showResult"}],staticClass:"gv-scuoladigitale-ricerca-result"},[e._c("div",{staticClass:"gv-scuoladigitale-ricerca-table"},[e._c("el-table",{staticClass:"gv-inverted-color-scheme",staticStyle:{"font-size":"12px !important"},attrs:{data:e.listaProgetti,"empty-text":"Nessuna risultato trovato",height:"300",size:"mini"},on:{"current-change":e.selectRiga}},[e._c("el-table-column",{attrs:{label:"Anno",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._c("span",[e._v(e._s(t.row.anno))])]}}])}),e._v(" "),e._c("el-table-column",{attrs:{label:"Nome Istituto",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._c("span",[e._v(e._s(t.row.nome_istituto))])]}}])}),e._v(" "),e._c("el-table-column",{attrs:{label:"Ordine",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._c("span",[e._v(e._s(t.row.ordine))])]}}])}),e._v(" "),e._c("el-table-column",{attrs:{label:"Titolo progetto",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._c("span",[e._v(e._s(t.row.titolo_progetto))])]}}])}),e._v(" "),e._c("el-table-column",{attrs:{label:"Abstract",align:"center",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._c("span",[e._v(e._s(t.row.abstract))])]}}])}),e._v(" "),e._c("el-table-column",{attrs:{width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._c("span",{attrs:{title:"link alla documentazione"}},[e._c("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-link"},on:{click:function(a){e.handleLink(t.$index,t.row.link_documentazione)}}})],1)]}}])})],1)],1)])],1)])},staticRenderFns:[]}}});
//# sourceMappingURL=15.js.map