webpackJsonp([15,30],{268:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),i=(s(a),n(5)),r=(s(i),n(8)),l=s(r),o=n(1),u=s(o),c=n(45),d=s(c),m=n(324),v=s(m);u.default.use(l.default),t.default={name:"gv-measure-panel",data:function(){var e=GV.config.getToolOptions("gv-measure-button");return{options:e,title:e.title||"Misurazioni",buttonDisabled:!0,pointClass:"el-button--default el-button--mini el-button gv-color-scheme ms ms-select-hand",lineClass:"el-button--default el-button--mini el-button gv-color-scheme ms ms-measure-distance",areaClass:"el-button--default el-button--mini el-button gv-color-scheme ms ms-measure-area",activeHandler:null,layer:null,type:null,resultPointWGS84:null,resultPointGB:null,resultPointHeight:null,resultPointETRF89:null,resultLine:null,resultArea:0,showInfo:!0,showInfoPoint:!1,showInfoLine:!1,showInfoArea:!1,showResultPoint:!1,showResultLine:!1,showResultArea:!1,pointHandler:new L.Draw.Marker(GV.app.map.map,{icon:L.icon({iconUrl:"/geoservices/apps/viewer/dist/static/img/marker-icon.png",iconSize:[12,20],iconAnchor:[6,20]})}),lineHandler:new L.Draw.Polyline(GV.app.map.map,{shapeOptions:{color:"#FF9900"}}),areaHandler:new L.Draw.Polygon(GV.app.map.map,{allowIntersection:!1,showArea:!0,metric:!0,shapeOptions:{color:"#FF9900"}})}},methods:{measurePoint:function(){this.clear(),this.setClass("point"),this.pointHandler.enable()},measureLine:function(){this.clear(),this.setClass("line"),this.lineHandler.enable()},measureArea:function(){this.clear(),this.setClass("area"),this.areaHandler.enable()},setClass:function(e){switch(document.getElementById("gv-measure-point").className=this.pointClass,document.getElementById("gv-measure-line").className=this.lineClass,document.getElementById("gv-measure-area").className=this.areaClass,this.showInfo=!e,e){case"point":document.getElementById("gv-measure-point").className=this.pointClass+" gv-button-selected",this.showInfoPoint=!0;break;case"line":document.getElementById("gv-measure-line").className=this.lineClass+" gv-button-selected",this.showInfoLine=!0;break;case"area":document.getElementById("gv-measure-area").className=this.areaClass+" gv-button-selected",this.showInfoArea=!0}},clear:function(){this.pointHandler.disable(),this.lineHandler.disable(),this.areaHandler.disable(),this.showInfoPoint=!1,this.showInfoLine=!1,this.showInfoArea=!1,this.showResultPoint=!1,this.showResultLine=!1,this.showResultArea=!1,this.resultPointWGS84=null,this.resultPointGB=null,this.resultPointETRF89=null,this.resultLine=null,this.resultArea=null,this.setClass(null),this.layer&&GV.app.map.removeLayer(this.layer)},handleMarker:function(e){var t=this;this.resultPointHeight=null,this.resultPointWGS84=e.lng.toFixed(6)+","+e.lat.toFixed(6),(0,d.default)("4326","3003",e.lng,e.lat).then(function(e){if(e.data.points){var n=e.data.points[0].split(",");t.resultPointGB=parseInt(n[0])+","+parseInt(n[1])}}),(0,d.default)("4326","25832",e.lng,e.lat).then(function(e){if(e.data.points){var n=e.data.points[0].split(",");t.resultPointETRF89=parseInt(n[0])+","+parseInt(n[1])}}),(0,v.default)("4326",e.lng,e.lat).then(function(e){"OK"===e.data.status&&e.data.elevation?t.resultPointHeight=e.data.elevation[0]:t.resultPointHeight=null}),this.showResultPoint=!0},handleLine:function(e){var t=parseInt(this.lineHandler._measurementRunningTotal);t<1e3?this.resultLine=t+" m":this.resultLine=t/1e3+" km",this.showResultLine=!0},handleArea:function(e){this.resultArea=parseInt(this.areaHandler._area),this.showResultArea=!0},drawCreated:function(e){switch(this.type=e.layerType,this.layer=e.layer,this.layer.addTo(GV.app.map),this.type){case"marker":this.handleMarker(this.layer.editing._marker._latlng);break;case"polyline":this.handleLine(this.layer.editing);break;case"polygon":this.handleArea(this.layer.editing)}}},mounted:function(){var e=this;GV.eventBus.$on("gv-control-measure-activate",function(t){GV.app.map.on("draw:created",function(t){e.drawCreated(t)})}),GV.eventBus.$on("gv-control-measure-deactivate",function(t){e.clear(),GV.app.map.off("draw:created")}),GV.app.map.on("draw:created",function(t){e.drawCreated(t)})}}},324:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var s=""+o.default.RL_ELEVATION+e+"/"+t+","+n;return r.default.get(s,{})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=n(4),r=s(i),l=n(6),o=s(l)},461:function(e,t,n){t=e.exports=n(2)(),t.push([e.id,".gv-measure-panel{position:absolute;width:350px;left:0;top:0;margin-left:10px;margin-top:50px;z-index:800}.gv-measure-panel-body{position:absolute;padding:10px;overflow-y:auto;width:330px;height:200px}.gv-measure-panel-result{position:absolute;background-color:#fff;padding-left:15px;padding-top:5px;padding-bottom:5px;margin:0;margin-top:10px;width:310px}","",{version:3,sources:["/./src/components/Measure.vue"],names:[],mappings:"AACA,kBACE,kBAAmB,AACnB,YAAa,AACb,OAAU,AACV,MAAS,AACT,iBAAkB,AAClB,gBAAiB,AACjB,WAAa,CACd,AACD,uBACE,kBAAmB,AACnB,aAAc,AACd,gBAAiB,AACjB,YAAa,AACb,YAAc,CACf,AACD,yBACE,kBAAmB,AACnB,sBAAuB,AACvB,kBAAmB,AACnB,gBAAiB,AACjB,mBAAoB,AACpB,SAAY,AACZ,gBAAiB,AACjB,WAAa,CACd",file:"Measure.vue",sourcesContent:["\n.gv-measure-panel {\r\n  position: absolute;\r\n  width: 350px;\r\n  left: 0px;\r\n  top: 0px;\r\n  margin-left: 10px;\r\n  margin-top: 50px;\r\n  z-index: 800;\n}\n.gv-measure-panel-body {\r\n  position: absolute;\r\n  padding: 10px;\r\n  overflow-y: auto;\r\n  width: 330px;\r\n  height: 200px;\n}\n.gv-measure-panel-result {\r\n  position: absolute;\r\n  background-color: #fff;\r\n  padding-left: 15px;\r\n  padding-top: 5px;\r\n  padding-bottom: 5px;\r\n  margin: 0px;\r\n  margin-top: 10px;\r\n  width: 310px;\n}\r\n\r\n/* .gv-measure-panel-body span {\r\n  background-color: #fff;\r\n  padding-left: 15px;\r\n  padding-top: 5px;\r\n  margin: 0px;\r\n} */\r\n"],sourceRoot:"webpack://"}])},581:function(e,t,n){var s=n(461);"string"==typeof s&&(s=[[e.id,s,""]]);n(3)(s,{});s.locals&&(e.exports=s.locals)},662:function(e,t,n){var s,a;n(581),s=n(268);var i=n(773);a=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(a=s=s.default),"function"==typeof a&&(a=a.options),a.render=i.render,a.staticRenderFns=i.staticRenderFns,e.exports=s},773:function(e,t){e.exports={render:function(){var e=this;e.$createElement;return e._c("div",{staticClass:"gv-measure-panel",attrs:{id:"gv-measure-panel"}},[e._c("gv-title",{attrs:{title:"Misurazioni",divId:"gv-measure-panel",noClose:!0}}),e._v(" "),e._c("div",{staticClass:"gv-measure-panel-body gv-inverted-color-scheme"},[e._c("el-button",{staticClass:"gv-color-scheme ms ms-select-hand",attrs:{id:"gv-measure-point",title:"Misure Puntuali (Coordinate)",size:"mini"},on:{click:e.measurePoint}}),e._v(" "),e._c("el-button",{staticClass:"gv-color-scheme ms ms-measure-distance",attrs:{id:"gv-measure-line",title:"Misure Lineari",size:"mini"},on:{click:e.measureLine}}),e._v(" "),e._c("el-button",{staticClass:"gv-color-scheme ms ms-measure-area",attrs:{id:"gv-measure-area",title:"Misure Areali",size:"mini"},on:{click:e.measureArea}}),e._v(" "),e._c("div",{directives:[{name:"show",rawName:"v-show",value:e.showInfo,expression:"showInfo"}],staticClass:"gv-measure-panel-result gv-inverted-color-scheme",attrs:{id:"gv-measure-panel-info"}},[e._m(0),e._v(" "),e._c("table",{attrs:{width:"90%"}},[e._c("tr",[e._c("td",[e._c("el-button",{staticClass:"gv-color-scheme ms ms-select-hand",attrs:{id:"gv-measure-point",title:"Misure Puntuali (Coordinate)",size:"mini"},on:{click:e.measurePoint}}),e._v(" Misure Puntuali (Coordinate)\n              ")],1)]),e._v(" "),e._c("tr",[e._c("td",[e._c("el-button",{staticClass:"gv-color-scheme ms ms-measure-distance",attrs:{id:"gv-measure-line",title:"Misure Lineari",size:"mini"},on:{click:e.measureLine}}),e._v(" Misure Lineari (Lunghezza)\n              ")],1)]),e._v(" "),e._c("tr",[e._c("td",[e._c("el-button",{staticClass:"gv-color-scheme ms ms-measure-area",attrs:{id:"gv-measure-area",title:"Misure Areali",size:"mini"},on:{click:e.measureArea}}),e._v(" Misure Poligonali (Aree)\n              ")],1)])]),e._v(" "),e._c("br")]),e._v(" "),e._c("div",{directives:[{name:"show",rawName:"v-show",value:e.showInfoPoint,expression:"showInfoPoint"}],staticClass:"gv-measure-panel-result gv-inverted-color-scheme",attrs:{id:"gv-measure-panel-info"}},[e._m(1),e._v(" "),e._c("br")]),e._v(" "),e._c("div",{directives:[{name:"show",rawName:"v-show",value:e.showInfoLine,expression:"showInfoLine"}],staticClass:"gv-measure-panel-result gv-inverted-color-scheme",attrs:{id:"gv-measure-panel-info"}},[e._m(2),e._v(" "),e._c("br")]),e._v(" "),e._c("div",{directives:[{name:"show",rawName:"v-show",value:e.showInfoArea,expression:"showInfoArea"}],staticClass:"gv-measure-panel-result gv-inverted-color-scheme",attrs:{id:"gv-measure-panel-info"}},[e._m(3),e._v(" "),e._c("br")]),e._v(" "),e._c("div",{directives:[{name:"show",rawName:"v-show",value:e.showResultPoint,expression:"showResultPoint"}],staticClass:"gv-measure-panel-result gv-inverted-color-scheme",attrs:{id:"gv-measure-panel-result-point"}},[e._c("p",[e._v("Coordinate:")]),e._v(" "),e._c("p",[e._c("table",{attrs:{width:"90%"}},[e._c("tr",[e._c("td",[e._v("\n                WGS84\n              ")]),e._v(" "),e._c("td",[e._v("\n                "+e._s(e.resultPointWGS84)+"\n              ")])]),e._v(" "),e._c("tr",[e._c("td",[e._v("\n                GAUSS-BOAGA\n              ")]),e._v(" "),e._c("td",[e._v("\n                "+e._s(e.resultPointGB)+"\n              ")])]),e._v(" "),e._c("tr",[e._c("td",[e._v("\n                ETRS89/UTM32N\n              ")]),e._v(" "),e._c("td",[e._v("\n                "+e._s(e.resultPointETRF89)+"\n              ")])]),e._v(" "),e._c("tr",[e._c("td",[e._v("\n                QUOTA\n              ")]),e._v(" "),e._c("td",[e._v("\n                "+e._s(e.resultPointHeight)+"\n              ")])])])])]),e._v(" "),e._c("div",{directives:[{name:"show",rawName:"v-show",value:e.showResultLine,expression:"showResultLine"}],staticClass:"gv-measure-panel-result gv-inverted-color-scheme",attrs:{id:"gv-measure-panel-result-line"}},[e._m(4),e._v(" "),e._c("table",{attrs:{width:"90%"}},[e._c("tr",[e._c("td",[e._v("\n                "+e._s(e.resultLine)+" \n              ")])])]),e._v(" "),e._c("br")]),e._v(" "),e._c("div",{directives:[{name:"show",rawName:"v-show",value:e.showResultArea,expression:"showResultArea"}],staticClass:"gv-measure-panel-result gv-inverted-color-scheme",attrs:{id:"gv-measure-panel-result-area"}},[e._m(5),e._v(" "),e._c("p",[e._c("table",{attrs:{width:"90%"}},[e._c("tr",[e._c("td",[e._v("\n                "+e._s(e.resultArea/1e4)+" ha\n              ")])]),e._v(" "),e._c("tr",[e._c("td",[e._v("\n                "+e._s(e.resultArea)+" m"),e._c("SUP",[e._v("2")])],1)]),e._v(" "),e._c("tr",[e._c("td",[e._v("\n                "+e._s(e.resultArea/1e6)+" km"),e._c("SUP",[e._v("2")])],1)])])])])],1)],1)},staticRenderFns:[function(){var e=this;e.$createElement;return e._c("p",[e._v("Seleziona il bottone relativo"),e._c("br")])},function(){var e=this;e.$createElement;return e._c("p",[e._v("Disegna il punto sulla mappa"),e._c("br")])},function(){var e=this;e.$createElement;return e._c("p",[e._v("Disegna la linea sulla mappa"),e._c("br")])},function(){var e=this;e.$createElement;return e._c("p",[e._v("Disegna il poligono sulla mappa"),e._c("br")])},function(){var e=this;e.$createElement;return e._c("p",[e._v("Lunghezza:"),e._c("br")])},function(){var e=this;e.$createElement;return e._c("p",[e._c("span",[e._v("Area:")])])}]}}});
//# sourceMappingURL=15.js.map