{"version":3,"sources":["webpack:///static/js/15.js","webpack:///GenioSelezionaParticelle.vue","webpack:///./E:/geoviewer2/src/services/insertParticelleGenio.js","webpack:///./src/components/GenioSelezionaParticelle.vue?7092","webpack:///./src/components/GenioSelezionaParticelle.vue?af54","webpack:///./src/components/GenioSelezionaParticelle.vue","webpack:///./src/components/GenioSelezionaParticelle.vue?ad50"],"names":["webpackJsonp","248","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_loading","_loading3","_loading4","_popover","_popover3","_popover4","_row","_row3","_row4","_button","_base","_button3","_button4","_vue","_vue2","_getCoordTransform","_InfoWmsManager","_InfoWmsManager2","_getFeatureInfo","_getFeatureInfo2","_getWFSFeature","_getWFSFeature2","_insertParticelleGenio","_insertParticelleGenio2","use","name","data","particelleSelezionate","hiliteLayer","geojsonLayerList","options","GV","config","getToolOptions","computed","buttonDisabled","methods","refresh","this","loadParticelle","editableRow","stato","submit","r","confirm","saveData","_this","listaParticelle","map","particella","properties","id","prov","codicePratica","idPunto","loading","service","text","background","then","resp","close","success","utils","notification","reloadLayer","layer","globals","GW_CONFIG","idLayerPratica","startsWith","idLayerPraticaDe","idLayerEttariIrrigati","layerConfig","getLayerConfig","eventBus","$emit","checked","loadLayer","app","loadLayers","type","style","color","fillOpacity","weight","opacity","visible","onEachFeature","feature","on","ev","getLayerByName","_this2","clearLayers","workSpace","idMap","cqlFilter","wfsUrl","features","forEach","codCom","COD_COM","SV06_COD_COM","sez","SEZ","SV06_SEZ","foglio","FOGLIO","SV06_FOGLIO","mappale","MAPPALE","SV06_MAPPALE","allegato","ALLEGATO","SV06_ALLEGATO","sviluppo","SVILUPPO","SV06_SVILUPPO","protDbti","PROT_DBTI","SV06_PROT_DBTI","dataDbti","DATA_DBTI","SV06_DATA_DBTI","dataSel","DATA_SEL","SV06_DATA_SEL","area","AREA","SV06_AREA","G_STATO","SV06_STATO","mappaleParziale","MAPPALE_PARZIALE","SV06_MAPPALE_PARZIALE","geometry","bbox","geometry_name","CT24_ID","CT24_COD_COM","CT24_SEZ","CT24_FOGLIO","CT24_NUMERO","CT24_ALLEGATO","CT24_SVILUPPO","CT24_PROT_IN","CT24_DATA_AGG","STATO","parziale","label","trim","push","addData","getWmsUrl","event","console","error","url","DEFAULT_PROXY","wmsParams","infoFormat","infoBuffer","wmsUrl","buildWMSOptions","latlng","updateParticelleSelezionate","_this3","setFeatureProperties","notEditable","alreadySelected","filter","eachLayer","removeLayer","updateLayer","catalogo","CT24_AREA","_this4","selected","handleDelete","index","row","selectRiga","setStyle","deselectRiga","subscribeMapEvent","_this5","hideLayer","getElement","display","showLayer","mounted","_this6","idLayerParticella","$on","off","359","_axios2","post","headers","Accept","response","_axios","457","version","sources","names","mappings","file","sourcesContent","sourceRoot","569","content","locals","631","__vue_exports__","__vue_options__","__vue_template__","render","staticRenderFns","755","_vm","$createElement","_c","staticClass","attrs","directives","rawName","title","divId","noClose","_v","empty-text","highlight-current-row","cell-style","padding","maxHeight","cell-mouse-enter","cell-mouse-leave","align","width","scopedSlots","_u","key","fn","scope","trigger","placement","_s","slot","substr","expression","model","callback","$$v","$set","size","icon","click","$event","$index","justify","ref","disabled"],"mappings":"AAAAA,cAAc,GAAG,KAEXC,IACA,SAAUC,EAAQC,EAASC,GAEhC,YAkEA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAhEvFG,OAAOC,eAAeP,EAAS,cAC7BQ,OAAO,GAGT,IAAIC,GAAWR,EAAoB,IAI/BS,GAFYR,EAAuBO,GAEvBR,EAAoB,KAEhCU,EAAYT,EAAuBQ,GAEnCE,EAAWX,EAAoB,KAI/BY,GAFYX,EAAuBU,GAEvBX,EAAoB,MAEhCa,EAAYZ,EAAuBW,GAEnCE,EAAOd,EAAoB,IAI3Be,GAFQd,EAAuBa,GAEvBd,EAAoB,KAE5BgB,EAAQf,EAAuBc,GAE/BE,EAAUjB,EAAoB,GAI9BkB,GAFWjB,EAAuBgB,GAE1BjB,EAAoB,IAI5BmB,GAFSlB,EAAuBiB,GAErBlB,EAAoB,IAE/BoB,EAAWnB,EAAuBkB,GC0DvCE,EAAArB,EAAA,GDtDKsB,EAAQrB,EAAuBoB,GCuDpCE,EAAAvB,EAAA,IACAwB,GDpD2BvB,EAAuBsB,GCoDlDvB,EAAA,KDhDKyB,EAAmBxB,EAAuBuB,GCiD/CE,EAAA1B,EAAA,KD7CK2B,EAAmB1B,EAAuByB,GC8C/CE,EAAA5B,EAAA,ID1CK6B,EAAkB5B,EAAuB2B,GC6C9CE,EAAA9B,EAAA,KDzCK+B,EAA0B9B,EAAuB6B,EC0CtDR,GAAAlB,QAAA4B,IAAAZ,EAAAhB,SACAkB,EAAAlB,QAAA4B,IAAAhB,EAAAZ,SACAkB,EAAAlB,QAEA4B,IAAAnB,EAAAT,SDtCCL,EAAQK,SACN6B,KCuCH,sCDtCGC,KAAM,WACJ,OACEC,yBACAC,YCuCP,KDtCOC,oBACAC,QAASC,GAAGC,OAAOC,eCwC1B,0CDpCGC,UACEC,eAAgB,WACd,OCuCP,IDpCGC,SACEC,QAAS,WACPC,KCuCPC,kBDrCKC,YAAa,SAAqBC,GAChC,MCuCP,MDvCcA,GAETC,OAAQ,WACN,GAAIC,GAAIC,QCuCf,cDtCgB,IAALD,GACFL,KCuCTO,YDnCKA,SAAU,WCuCf,GAAAC,GAAAR,KDpCWS,EAAkBT,KAAKX,sBAAsBqB,IAAI,SAAUC,GAE7D,MADAA,GAAWC,WAAWC,GAAKF,ECqCpCE,GDpCgBF,ECqChBC,aDnCWxB,GACF0B,KAAMd,KAAKR,QCqCpBsB,KDpCSC,cAAef,KAAKR,QCqC7BuB,cDpCSN,gBCqCTA,EDpCSO,QAAShB,KAAKR,QCsCvBwB,SDpCWC,EAAUrD,EAAUN,QAAQ4D,SAC9BC,KCqCT,sBDpCSC,WCsCT,wBDpCO,EAAInC,EAAwB3B,SAAS8B,GAAMiC,KAAK,SAAUC,GACpDL,GAASA,ECqCtBM,QDpCaD,EAAKE,SACP/B,GAAGgC,MAAMC,aAAa,6BCsCjC,QDpCWlB,ECqCXmB,eDnCWlC,GAAGgC,MAAMC,aAAa,gCCqCjC,YDjCKC,YAAa,WACX,GAAIC,GAAQnC,GAAGoC,QAAQC,UAAU9B,KAAKR,QAAQsB,MCqCrDiB,gBACA/B,KAAAR,QAAAuB,cAAAiB,WACA,QAAAhC,KAAAR,QAAAuB,cAAAiB,WACA,QAAAhC,KAAAR,QAAAuB,cAAAiB,WACA,QAAAhC,KAAAR,QAAAuB,cAAAiB,WACA,UDxCSJ,EAAQnC,GAAGoC,QAAQC,UAAU9B,KAAKR,QAAQsB,MC0CnDmB,kBDxCWjC,KAAKR,QAAQwB,UACfY,EAAQnC,GAAGoC,QAAQC,UAAU9B,KAAKR,QAAQsB,MC0CnDoB,sBDvCO,IAAIC,GAAc1C,GAAGC,OAAO0C,eC0CnCR,EDzCOnC,IAAG4C,SAASC,MAAM,qBAChBV,MC0CTO,EDzCSI,SC2CT,IDzCO9C,GAAG4C,SAASC,MAAM,qBAChBV,MC0CTO,EDzCSI,SC2CT,KDxCKC,UAAW,WACT/C,GAAGgD,IAAI/B,IAAIgC,aACTvD,KC2CT,sBD1CSwD,KC2CT,OD1CSC,OACEC,MC2CX,UD1CWC,YC2CX,ED1CWC,OC2CX,ED1CWC,QC4CX,ID1CSC,SC2CT,ED1CSC,cAAe,SAAuBC,EAASvB,GAC7CA,EAAMwB,GAAG,QAAS,SAAUC,UAGhCrD,KAAKV,YAAcG,GAAGgD,IAAI/B,IAAI4C,eC8CrC,uBD7COtD,KC8CPC,kBD5CKA,eAAgB,WC8CrB,GAAAsD,GAAAvD,ID3COA,MAAKV,YC4CZkE,cD3COxD,KAAKX,wBACL,IAAIoE,GAAY,IAAMzD,KAAKR,QC4ClCkE,MD3CWC,EAAY,OC4CvB/B,EAAA,MD1CW5B,MAAKR,QAAQwB,SACf2C,EAAY,0BAA6B3D,KAAKR,QC2CvDuB,cAAA,iCD1CSa,EAAQ5B,KAAKR,QC2CtB0C,wBDzCSyB,EAAY,qBAAwB3D,KAAKR,QC2ClDuB,cAAA,4BD1CSa,EAAQ5B,KAAKR,QC2CtBuC,eDzCO,IAAI6B,GAAS,iKAAmKH,EAAY,IAAM7B,EAAQ,eC2CjN+B,GD1CO,EAAI5E,EAAgBzB,SAAS,KAAM,KAAMsG,GAAQvC,KAAK,SAAUwC,GAC9DA,EAASC,QAAQ,SAAUX,GACzB,GAAIY,GAASZ,EAAQvC,WAAWoD,SAAWb,EAAQvC,WC2C9DqD,aD1CeC,EAAMf,EAAQvC,WAAWuD,KAAOhB,EAAQvC,WC2CvDwD,SD1CeC,EAASlB,EAAQvC,WAAW0D,QAAUnB,EAAQvC,WC2C7D2D,YD1CeC,EAAUrB,EAAQvC,WAAW6D,SAAWtB,EAAQvC,WC2C/D8D,aD1CeC,EAAWxB,EAAQvC,WAAWgE,UAAYzB,EAAQvC,WC2CjEiE,cD1CeC,EAAW3B,EAAQvC,WAAWmE,UAAY5B,EAAQvC,WC2CjEoE,cD1CeC,EAAW9B,EAAQvC,WAAWsE,WAAa/B,EAAQvC,WC2ClEuE,eD1CeC,EAAWjC,EAAQvC,WAAWyE,WAAalC,EAAQvC,WC2ClE0E,eD1CeC,EAAUpC,EAAQvC,WAAW4E,UAAYrC,EAAQvC,WC2ChE6E,cD1CeC,EAAOvC,EAAQvC,WAAW+E,MAAQxC,EAAQvC,WC2CzDgF,UD1CezF,EAAQgD,EAAQvC,WAAWiF,SAAW1C,EAAQvC,WC2C7DkF,WACAC,EAAA5C,EAAAvC,WAAAoF,kBAAA7C,EAAAvC,WAEAqF,sBD3CetF,GACFgC,KC4Cb,UD3Ca9B,GAAIsC,EC4CjBtC,GD3CaqF,SAAU/C,EC4CvB+C,SD3CaC,KAAMhD,EC4CnBgD,KD3CaC,cAAejD,EC4C5BiD,cD3CaxF,YACEyF,QC4Cf,KD3CeC,aC4CfvC,ED3CewC,SC4CfrC,ED3CesC,YC4CfnC,ED3CeoC,YC4CfjC,ED3CekC,cC4Cf/B,ED3CegC,cC4Cf7B,ED3Ce8B,aC4Cf3B,ED3Ce4B,cC4CfzB,ED3CeI,SC4CfD,ED3CeI,KC4CfD,ED3CeoB,MC4Cf3G,ED3Ce4G,WAAUhB,GAGdpF,GAAWqG,MAAQrG,EAAWC,WC4CzC0F,aAAA,IAAA3F,EAAAC,WACA2F,SAAA,IAAA5F,EAAAC,WAAA4F,YAAA,IAAA7F,EAAAC,WAAA6F,YACAQ,OAAA,IAAAtG,EAAAC,WACA8F,cAAA,IAAA/F,EAAAC,WACA+F,cD/CWhG,EAAWE,GAAKF,ECgD3BqG,MD/CWzD,EAAOlE,sBAAsB6H,KCgDxCvG,GD/CW4C,EAAOjE,YAAY6H,QCgD9BxG,QD5CKyG,UAAW,SAAmBC,GAC5B,IAAKrH,KAAKmC,YCkDjB,WDjDSmF,SAAQC,MCgDjB,mCD7CO,IAAIC,GAAM/H,GAAGoC,QAAQ4F,cAAgBzH,KAAKmC,YAAYuF,UCgD7DF,ID/CWG,ECgDX,mBD/CWC,ECgDX,ED/CWC,EAASlJ,EAAiBrB,QCgDrCwK,gBACAN,EAAAxH,KAAAmC,YAAAuF,UACAvI,KAAAkI,EACAU,OACAJ,EAEAC,EDrDO,OCsDPC,IDpDKG,4BAA6B,SAAqCnE,GCsDvE,GAAAoE,GAAAjI,IDnDO6D,GAASC,QAAQ,SAAUX,GACzB8E,EAAOC,qBCoDhB/E,GDnDa8E,EAAOE,YAAYhF,KAGnB8E,EAAOG,gBAAgBjF,IACzB8E,EAAO5I,sBAAwB4I,EAAO5I,sBAAsBgJ,OAAO,SAAU1H,GAC3E,MAAOA,GAAWE,KAAOsC,ECoDtCtC,KDlDWoH,EAAO3I,YAAYgJ,UAAU,SAAU1G,GACjCA,EAAMuB,QAAQtC,IAAMsC,EAAQtC,IAC9BpB,GAAGgD,IAAI/B,IAAI6H,YCoD1B3G,ODhDWqG,EAAO5I,sBAAsB6H,KCoDxC/D,GDnDW8E,EAAOO,YCoDlBrF,QDhDK+E,qBAAsB,SAA8B/E,GAClDA,EAAQvC,WAAW4E,SCoD1B,GDnDOrC,EAAQvC,WAAWkG,MCoD1B,IDnDO3D,EAAQ6D,MAAQ7D,EAAQvC,WAAW0F,aAAe,IAAMnD,EAAQvC,WCoDvE2F,SAAA,IAAApD,EAAAvC,WACA4F,YAAA,IAAArD,EAAAvC,WAAA6F,YAAAQ,OAAA,IAAA9D,EAAAvC,WACA8F,cAAA,IAAAvD,EAAAvC,WAEA+F,cDvDOxD,EAAQtC,GAAKsC,ECwDpB6D,MDvDO7D,EAAQvC,WAAWmG,UCwD1B,EDvDO5D,EAAQvC,WAAW6H,UCwD1B,EDvDOtF,EAAQvC,WAAW+E,KAAOxC,EAAQvC,WCwDzC8H,WDtDKF,YAAa,SAAqBrF,EAASR,GCwDhD,GAAAgG,GAAA3I,KDrDW2D,EAAY,aAAeR,EAAQvC,WCsD9CyF,QACAzC,EACA,wLACAD,GDvDO,EAAI5E,EAAgBzB,SAAS,KAAM,KAAMsG,GAAQvC,KAAK,SAAUwC,GAC9DA,EAASC,QAAQ,SAAUX,GACzBwF,EAAOT,qBCwDlB/E,GDvDWwF,EAAOrJ,YAAY6H,QCwD9BhE,QDpDKgF,YAAa,QAASA,GAAYhF,GAChC,GAAIgF,ICwDX,CDlDO,OALAnI,MAAKX,sBAAsByE,QAAQ,SAAUnD,GACvCwC,EAAQtC,KAAOF,EAAWE,IAAsC,MAAhCF,EAAWC,WAAWkG,QACxDqB,GCwDX,KAGAA,GDtDKC,gBAAiB,SAAyBjF,GACxC,GAAIyF,ICwDX,CDlDO,OALA5I,MAAKX,sBAAsByE,QAAQ,SAAUnD,GACvCwC,EAAQtC,KAAOF,EAAWE,KAC5B+H,GCwDX,KAGAA,GDtDKC,aAAc,SAAsBC,EAAOC,GACzC/I,KAAKX,sBAAwBW,KAAKX,sBAAsBgJ,OAAO,SAAU1H,GACvE,MAAOA,GAAWE,KAAOkI,ECwDlClI,KDtDOb,KAAKV,YAAYgJ,UAAU,SAAU1G,GAC/BA,EAAMuB,QAAQtC,IAAMkI,EAAIlI,IAC1BpB,GAAGgD,IAAI/B,IAAI6H,YCwDtB3G,MDpDKoH,WAAY,SAAoBD,GAC1BA,GACF/I,KAAKV,YAAYgJ,UAAU,SAAU1G,GAC/BA,EAAMuB,QAAQtC,IAAMkI,EAAIlI,GAC1Be,EAAMqH,UAAWnG,YCwD9B,KDtDalB,EAAMqH,UAAWnG,YCwD9B,ODnDKoG,aAAc,SAAsBH,GAC9BA,GACF/I,KAAKV,YAAYgJ,UAAU,SAAU1G,GAC/BA,EAAMuB,QAAQtC,IAAMkI,EAAIlI,IAC1Be,EAAMqH,UAAWnG,YCwD9B,ODnDKqG,kBAAmB,SAA2B9B,GCwDnD,GAAA+B,GAAApJ,IDrDOP,IAAGgD,IAAI/B,IAAI0C,GAAG,QAAS,SAAUiE,GAC/B,GAAIQ,GAASuB,EAAOhC,UCsD7BC,IDrDS,EAAIxI,EAAiBvB,SAASuK,GAAQxG,KAAK,SAAUwC,GACnD,MAAOuF,GAAOpB,4BCqDzBnE,QDjDKwF,UAAW,WACTrJ,KAAKV,YAAYgJ,UAAU,SAAU1G,GACnCA,EAAM0H,aAAa1G,MAAM2G,QCoDlC,UDjDKC,UAAW,WACTxJ,KAAKV,YAAYgJ,UAAU,SAAU1G,GACnCA,EAAM0H,aAAa1G,MAAM2G,QCoDlC,YDhDGE,QAAS,WCoDZ,GAAAC,GAAA1J,IDjDKA,MAAKmC,YAAc1C,GAAGC,OAAO0C,eAAepC,KAAKR,QCkDtDmK,mBDjDU3J,KAAKmC,aACR1C,GAAG4C,SAASuH,IAAI,iBAAkB,SAAUvC,GAC1CqC,EAAOvH,YAAc1C,GAAGC,OAAO0C,eAAesH,EAAOlK,QCkD9DmK,qBD/CK3J,KCoDLwC,YDlDK/C,GAAG4C,SAASuH,IAAI,iDAAkD,SAAUvC,GAC1EqC,EAAOP,kBCmDd9B,GDlDOqC,ECmDPF,YDlDOE,ECmDPzJ,mBDjDKR,GAAG4C,SAASuH,IAAI,mDAAoD,SAAUvC,GAC5E5H,GAAGgD,IAAI/B,IAAImJ,ICmDlB,SDlDOH,ECmDPL,cDjDKrJ,KAAKmJ,kBCmDV9B,UD7CMyC,IACA,SAAU9M,EAAQC,EAASC,GAEhC,YAqBA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAnBvFG,OAAOC,eAAeP,EAAS,cAC7BQ,OAAO,IAGTR,EAAQK,QErYM,SAAU8B,GACvB,MAAO2K,GAAAzM,QACJ0M,KAAK,gDACJC,SACEC,OAAQ,YAEV9K,KAAMA,IAEPiC,KAAK,SAAA8I,GAAA,MAAYA,GAAS/K,OAV/B,IAAAgL,GAAAlN,EAAA,GFoZK6M,EAAU5M,EAAuBiN,IAMhCC,IACA,SAAUrN,EAAQC,EAASC,GG3ZjCD,EAAAD,EAAAC,QAAAC,EAAA,KAKAD,EAAAiK,MAAAlK,EAAA6D,GAAA,uVAA8W,IAAQyJ,QAAA,EAAAC,SAAA,kDAAAC,SAAAC,SAAA,mNAAAC,KAAA,+BAAAC,gBAAA,keAAq0BC,WAAA,iBHoarrCC,IACA,SAAU7N,EAAQC,EAASC,GIvajC,GAAA4N,GAAA5N,EAAA,IACA,iBAAA4N,SAAA9N,EAAA6D,GAAAiK,EAAA,KAEA5N,GAAA,GAAA4N,KACAA,GAAAC,SAAA/N,EAAAC,QAAA6N,EAAAC,SJ6bMC,IACA,SAAUhO,EAAQC,EAASC,GKrcjC,GAAA+N,GAAAC,CAIAhO,GAAA,KAGA+N,EAAA/N,EAAA,IAGA,IAAAiO,GAAAjO,EAAA,IACAgO,GAAAD,QAEA,gBAAAA,GAAA3N,SACA,kBAAA2N,GAAA3N,UAEA4N,EAAAD,IAAA3N,SAEA,kBAAA4N,KACAA,IAAA1L,SAGA0L,EAAAE,OAAAD,EAAAC,OACAF,EAAAG,gBAAAF,EAAAE,gBAEArO,EAAAC,QAAAgO,GL4cMK,IACA,SAAUtO,EAAQC,GMtexBD,EAAAC,SAAgBmO,OAAA,WAAmB,GAAAG,GAAAvL,IAAauL,GAAAC,cAChD,OAAAD,GAAAE,GAAA,OACAC,YAAA,sCACAC,OACA9K,GAAA,yCAEG0K,EAAAE,GAAA,YACHG,aACAzM,KAAA,YACA0M,QAAA,gBAEAF,OACAG,MAAA,uBACAC,MAAA,sCACAC,SAAA,KAEGT,EAAAU,GAAA,KAAAV,EAAAE,GAAA,OACHC,YAAA,gEACGH,EAAAE,GAAA,OACHC,YAAA,wCACGH,EAAAE,GAAA,YACHE,OACAvM,KAAAmM,EAAAlM,sBACA6M,aAAA,iCACAC,wBAAA,GACAC,cACAC,QAAA,MACAC,UAAA,SAGAlJ,IACAmJ,mBAAAhB,EAAAvC,WACAwD,mBAAAjB,EAAArC,gBAEGqC,EAAAE,GAAA,mBACHE,OACA3E,MAAA,UACAyF,MAAA,SACAC,MAAA,OAEAC,YAAApB,EAAAqB,KACAC,IAAA,UACAC,GAAA,SAAAC,GACA,OAAAxB,EAAAE,GAAA,cACAE,OACAqB,QAAA,QACAC,UAAA,YAES1B,EAAAE,GAAA,KAAAF,EAAAU,GAAA,WAAAV,EAAA2B,GAAAH,EAAAhE,IAAAnI,WAAA0F,mBAAAiF,EAAAU,GAAA,KAAAV,EAAAE,GAAA,OACTC,YAAA,eACAC,OACAwB,KAAA,aAEAA,KAAA,cACS5B,EAAAU,GAAAV,EAAA2B,GAAAH,EAAAhE,IAAA/B,iBAGNuE,EAAAU,GAAA,KAAAV,EAAAE,GAAA,mBACHE,OACA3E,MAAA,OACAyF,MAAA,SACAC,MAAA,MAEAC,YAAApB,EAAAqB,KACAC,IAAA,UACAC,GAAA,SAAAC,GACA,OAAAxB,EAAAE,GAAA,QAAAF,EAAAU,GAAAV,EAAA2B,GAAAH,EAAAhE,IAAAnI,WAAAgG,wBAGG2E,EAAAU,GAAA,KAAAV,EAAAE,GAAA,mBACHE,OACA3E,MAAA,YACAyF,MAAA,SACAC,MAAA,MAEAC,YAAApB,EAAAqB,KACAC,IAAA,UACAC,GAAA,SAAAC,GACA,OAAAxB,EAAAE,GAAA,QAAAF,EAAAU,GAAAV,EAAA2B,GAAAH,EAAAhE,IAAAnI,WAAAiG,cAAAuG,OAAA,iBAGG7B,EAAAU,GAAA,KAAAV,EAAAE,GAAA,mBACHE,OACA3E,MAAA,WACAyF,MAAA,SACAC,MAAA,MAEAC,YAAApB,EAAAqB,KACAC,IAAA,UACAC,GAAA,SAAAC,GACA,OAAAxB,EAAAE,GAAA,QAAAF,EAAAU,GAAAV,EAAA2B,GAAAH,EAAAhE,IAAAnI,WAAA4E,SAAA4H,OAAA,iBAGG7B,EAAAU,GAAA,KAAAV,EAAAE,GAAA,mBACHE,OACA3E,MAAA,OACAyF,MAAA,SACAC,MAAA,MAEAC,YAAApB,EAAAqB,KACAC,IAAA,UACAC,GAAA,SAAAC,GACA,OAAAxB,EAAAE,GAAA,QAAAF,EAAAU,GAAAV,EAAA2B,GAAAH,EAAAhE,IAAAnI,WAAA+E,gBAGG4F,EAAAU,GAAA,KAAAV,EAAAE,GAAA,mBACHE,OACA3E,MAAA,QACAyF,MAAA,SACAC,MAAA,MAEAC,YAAApB,EAAAqB,KACAC,IAAA,UACAC,GAAA,SAAAC,GACA,OAAAxB,EAAAE,GAAA,QAAAF,EAAAE,GAAA,eACAG,aACAzM,KAAA,OACA0M,QAAA,SACApO,MAAA8N,EAAArL,YAAA6M,EAAAhE,IAAAnI,WAAAkG,OACAuG,WAAA,4CAEAC,OACA7P,MAAAsP,EAAAhE,IAAAnI,WAAA,SACA2M,SAAA,SAAAC,GACAjC,EAAAkC,KAAAV,EAAAhE,IAAAnI,WAAA,WAAA4M,IAEAH,WAAA,oCAES,UAGN9B,EAAAU,GAAA,KAAAV,EAAAE,GAAA,mBACHE,OACAe,MAAA,MAEAC,YAAApB,EAAAqB,KACAC,IAAA,UACAC,GAAA,SAAAC,GACA,OAAAxB,EAAAE,GAAA,aACAG,aACAzM,KAAA,OACA0M,QAAA,SACApO,MAAA8N,EAAArL,YAAA6M,EAAAhE,IAAAnI,WAAAkG,OACAuG,WAAA,4CAEA1B,OACA+B,KAAA,OACA/K,KAAA,SACAgL,KAAA,kBAEAvK,IACAwK,MAAA,SAAAC,GACAtC,EAAA1C,aAAAkE,EAAAe,OAAAf,EAAAhE,iBAMG,SAAAwC,EAAAU,GAAA,KAAAV,EAAAE,GAAA,UACHC,YAAA,SACAC,OACAhJ,KAAA,OACAoL,QAAA,UAEGxC,EAAAE,GAAA,aACHuC,IAAA,SACArC,OACA9K,GAAA,6CACAiL,MAAA,sBACAnJ,KAAA,UACA+K,KAAA,OACAO,SAAA1C,EAAA1L,gBAEAuD,IACAwK,MAAA,SAAAC,GACAtC,EAAAnL,aAGGmL,EAAAE,GAAA,QAAAF,EAAAU,GAAA,mBAAAV,EAAAU,GAAA,KAAAV,EAAAE,GAAA,aACHC,YAAA,kBACAC,OACA9K,GAAA,iBACAiL,MAAA,+BACA4B,KAAA,QAEAtK,IACAwK,MAAArC,EAAAxL,WAEGwL,EAAAU,GAAA,uBACFZ","file":"static/js/15.js","sourcesContent":["webpackJsonp([15,27],{\n\n/***/ 248:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _loading = __webpack_require__(40);\n\t\n\tvar _loading2 = _interopRequireDefault(_loading);\n\t\n\tvar _loading3 = __webpack_require__(39);\n\t\n\tvar _loading4 = _interopRequireDefault(_loading3);\n\t\n\tvar _popover = __webpack_require__(180);\n\t\n\tvar _popover2 = _interopRequireDefault(_popover);\n\t\n\tvar _popover3 = __webpack_require__(176);\n\t\n\tvar _popover4 = _interopRequireDefault(_popover3);\n\t\n\tvar _row = __webpack_require__(38);\n\t\n\tvar _row2 = _interopRequireDefault(_row);\n\t\n\tvar _row3 = __webpack_require__(37);\n\t\n\tvar _row4 = _interopRequireDefault(_row3);\n\t\n\tvar _button = __webpack_require__(9);\n\t\n\tvar _button2 = _interopRequireDefault(_button);\n\t\n\tvar _base = __webpack_require__(6);\n\t\n\tvar _base2 = _interopRequireDefault(_base);\n\t\n\tvar _button3 = __webpack_require__(8);\n\t\n\tvar _button4 = _interopRequireDefault(_button3);\n\t\n\tvar _vue = __webpack_require__(1);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _getCoordTransform = __webpack_require__(60);\n\t\n\tvar _getCoordTransform2 = _interopRequireDefault(_getCoordTransform);\n\t\n\tvar _InfoWmsManager = __webpack_require__(31);\n\t\n\tvar _InfoWmsManager2 = _interopRequireDefault(_InfoWmsManager);\n\t\n\tvar _getFeatureInfo = __webpack_require__(105);\n\t\n\tvar _getFeatureInfo2 = _interopRequireDefault(_getFeatureInfo);\n\t\n\tvar _getWFSFeature = __webpack_require__(36);\n\t\n\tvar _getWFSFeature2 = _interopRequireDefault(_getWFSFeature);\n\t\n\tvar _insertParticelleGenio = __webpack_require__(359);\n\t\n\tvar _insertParticelleGenio2 = _interopRequireDefault(_insertParticelleGenio);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_vue2.default.use(_button4.default);\n\t_vue2.default.use(_row4.default);\n\t_vue2.default.use(_popover4.default);\n\t\n\texports.default = {\n\t  name: 'gv-genio-seleziona-particelle-panel',\n\t  data: function data() {\n\t    return {\n\t      particelleSelezionate: [],\n\t      hiliteLayer: null,\n\t      geojsonLayerList: [],\n\t      options: GV.config.getToolOptions('gv-genio-seleziona-particelle-button')\n\t    };\n\t  },\n\t\n\t  computed: {\n\t    buttonDisabled: function buttonDisabled() {\n\t      return false;\n\t    }\n\t  },\n\t  methods: {\n\t    refresh: function refresh() {\n\t      this.loadParticelle();\n\t    },\n\t    editableRow: function editableRow(stato) {\n\t      return stato === 'M';\n\t    },\n\t    submit: function submit() {\n\t      var r = confirm('Sei sicuro?');\n\t      if (r == true) {\n\t        this.saveData();\n\t      }\n\t      return;\n\t    },\n\t    saveData: function saveData() {\n\t      var _this = this;\n\t\n\t      var listaParticelle = this.particelleSelezionate.map(function (particella) {\n\t        particella.properties.id = particella.id;\n\t        return particella.properties;\n\t      });\n\t      var data = {\n\t        prov: this.options.prov,\n\t        codicePratica: this.options.codicePratica,\n\t        listaParticelle: listaParticelle,\n\t        idPunto: this.options.idPunto\n\t      };\n\t      var loading = _loading4.default.service({\n\t        text: 'Salvataggio dati...',\n\t        background: 'rgba(0, 0, 0, 0.8)'\n\t      });\n\t      (0, _insertParticelleGenio2.default)(data).then(function (resp) {\n\t        if (loading) loading.close();\n\t        if (resp.success) {\n\t          GV.utils.notification('Dati salvati correttamente', 'info');\n\t\n\t          _this.reloadLayer();\n\t        } else {\n\t          GV.utils.notification('Errore nella scrittura sul DB', 'error');\n\t        }\n\t      });\n\t    },\n\t    reloadLayer: function reloadLayer() {\n\t      var layer = GV.globals.GW_CONFIG[this.options.prov].idLayerPratica;\n\t      if (this.options.codicePratica.startsWith('GDE') || this.options.codicePratica.startsWith('IMD') || this.options.codicePratica.startsWith('SVD') || this.options.codicePratica.startsWith('SPD')) {\n\t        layer = GV.globals.GW_CONFIG[this.options.prov].idLayerPraticaDe;\n\t      }\n\t      if (this.options.idPunto) {\n\t        layer = GV.globals.GW_CONFIG[this.options.prov].idLayerEttariIrrigati;\n\t      }\n\t\n\t      var layerConfig = GV.config.getLayerConfig(layer);\n\t      GV.eventBus.$emit('set-layer-visible', {\n\t        layer: layerConfig,\n\t        checked: false\n\t      });\n\t      GV.eventBus.$emit('set-layer-visible', {\n\t        layer: layerConfig,\n\t        checked: true\n\t      });\n\t    },\n\t    loadLayer: function loadLayer() {\n\t      GV.app.map.loadLayers([{\n\t        name: 'SelezioneParticelle',\n\t        type: 'JSON',\n\t        style: {\n\t          color: '#ff0000',\n\t          fillOpacity: 0.0,\n\t          weight: 3,\n\t          opacity: 0.7\n\t        },\n\t        visible: true,\n\t        onEachFeature: function onEachFeature(feature, layer) {\n\t          layer.on('click', function (ev) {});\n\t        }\n\t      }]);\n\t      this.hiliteLayer = GV.app.map.getLayerByName('SelezioneParticelle');\n\t      this.loadParticelle();\n\t    },\n\t    loadParticelle: function loadParticelle() {\n\t      var _this2 = this;\n\t\n\t      this.hiliteLayer.clearLayers();\n\t      this.particelleSelezionate = [];\n\t      var workSpace = 'M' + this.options.idMap;\n\t      var cqlFilter = void 0,\n\t          layer = void 0;\n\t      if (this.options.idPunto) {\n\t        cqlFilter = 'SV06_CODICE_PRATICA = \\'' + this.options.codicePratica + '\\' AND SV06_COD_COM IS NOT NULL';\n\t        layer = this.options.idLayerEttariIrrigati;\n\t      } else {\n\t        cqlFilter = 'CODICE_PRATICA = \\'' + this.options.codicePratica + '\\' AND MAPPALE IS NOT NULL';\n\t        layer = this.options.idLayerPratica;\n\t      }\n\t      var wfsUrl = 'https://geoservizi.regione.liguria.it/geoserver/wfs?service=WFS&version=2.0.0&request=GetFeature&srsName=EPSG%3A4326&outputFormat=application%2Fjson&typeName=' + workSpace + ':' + layer + '&cql_filter=' + cqlFilter;\n\t      (0, _getWFSFeature2.default)(null, null, wfsUrl).then(function (features) {\n\t        features.forEach(function (feature) {\n\t          var codCom = feature.properties.COD_COM || feature.properties.SV06_COD_COM;\n\t          var sez = feature.properties.SEZ || feature.properties.SV06_SEZ;\n\t          var foglio = feature.properties.FOGLIO || feature.properties.SV06_FOGLIO;\n\t          var mappale = feature.properties.MAPPALE || feature.properties.SV06_MAPPALE;\n\t          var allegato = feature.properties.ALLEGATO || feature.properties.SV06_ALLEGATO;\n\t          var sviluppo = feature.properties.SVILUPPO || feature.properties.SV06_SVILUPPO;\n\t          var protDbti = feature.properties.PROT_DBTI || feature.properties.SV06_PROT_DBTI;\n\t          var dataDbti = feature.properties.DATA_DBTI || feature.properties.SV06_DATA_DBTI;\n\t          var dataSel = feature.properties.DATA_SEL || feature.properties.SV06_DATA_SEL;\n\t          var area = feature.properties.AREA || feature.properties.SV06_AREA;\n\t          var stato = feature.properties.G_STATO || feature.properties.SV06_STATO;\n\t          var mappaleParziale = feature.properties.MAPPALE_PARZIALE || feature.properties.SV06_MAPPALE_PARZIALE;\n\t\n\t          var particella = {\n\t            type: 'Feature',\n\t            id: feature.id,\n\t            geometry: feature.geometry,\n\t            bbox: feature.bbox,\n\t            geometry_name: feature.geometry_name,\n\t            properties: {\n\t              CT24_ID: null,\n\t              CT24_COD_COM: codCom,\n\t              CT24_SEZ: sez,\n\t              CT24_FOGLIO: foglio,\n\t              CT24_NUMERO: mappale,\n\t              CT24_ALLEGATO: allegato,\n\t              CT24_SVILUPPO: sviluppo,\n\t              CT24_PROT_IN: protDbti,\n\t              CT24_DATA_AGG: dataDbti,\n\t              DATA_SEL: dataSel,\n\t              AREA: area,\n\t              STATO: stato,\n\t              parziale: mappaleParziale ? true : false\n\t            }\n\t          };\n\t          particella.label = particella.properties.CT24_COD_COM + '/' + particella.properties.CT24_SEZ + '/' + particella.properties.CT24_FOGLIO + '/' + particella.properties.CT24_NUMERO.trim() + '/' + particella.properties.CT24_ALLEGATO + '/' + particella.properties.CT24_SVILUPPO;\n\t          particella.id = particella.label;\n\t          _this2.particelleSelezionate.push(particella);\n\t          _this2.hiliteLayer.addData(particella);\n\t        });\n\t      });\n\t    },\n\t    getWmsUrl: function getWmsUrl(event) {\n\t      if (!this.layerConfig) {\n\t        console.error('Configurazione Layer non trovata');\n\t        return;\n\t      }\n\t      var url = GV.globals.DEFAULT_PROXY + this.layerConfig.wmsParams.url;\n\t      var infoFormat = 'application/json';\n\t      var infoBuffer = 0;\n\t      var wmsUrl = _InfoWmsManager2.default.buildWMSOptions(url, this.layerConfig.wmsParams.name, event.latlng, infoFormat, infoBuffer);\n\t      return wmsUrl;\n\t    },\n\t    updateParticelleSelezionate: function updateParticelleSelezionate(features) {\n\t      var _this3 = this;\n\t\n\t      features.forEach(function (feature) {\n\t        _this3.setFeatureProperties(feature);\n\t        if (_this3.notEditable(feature)) {\n\t          return;\n\t        }\n\t        if (_this3.alreadySelected(feature)) {\n\t          _this3.particelleSelezionate = _this3.particelleSelezionate.filter(function (particella) {\n\t            return particella.id !== feature.id;\n\t          });\n\t          _this3.hiliteLayer.eachLayer(function (layer) {\n\t            if (layer.feature.id == feature.id) {\n\t              GV.app.map.removeLayer(layer);\n\t            }\n\t          });\n\t        } else {\n\t          _this3.particelleSelezionate.push(feature);\n\t          _this3.updateLayer(feature);\n\t        }\n\t      });\n\t    },\n\t    setFeatureProperties: function setFeatureProperties(feature) {\n\t      feature.properties.DATA_SEL = '';\n\t      feature.properties.STATO = 'M';\n\t      feature.label = feature.properties.CT24_COD_COM + '/' + feature.properties.CT24_SEZ + '/' + feature.properties.CT24_FOGLIO + '/' + feature.properties.CT24_NUMERO.trim() + '/' + feature.properties.CT24_ALLEGATO + '/' + feature.properties.CT24_SVILUPPO;\n\t      feature.id = feature.label;\n\t      feature.properties.parziale = false;\n\t      feature.properties.catalogo = true;\n\t      feature.properties.AREA = feature.properties.CT24_AREA;\n\t    },\n\t    updateLayer: function updateLayer(feature, type) {\n\t      var _this4 = this;\n\t\n\t      var cqlFilter = 'CT24_ID = ' + feature.properties.CT24_ID;\n\t      var wfsUrl = 'https://geoservizi.regione.liguria.it/geoserver/wfs?service=WFS&version=2.0.0&request=GetFeature&srsName=EPSG%3A4326&outputFormat=application%2Fjson&typeName=M1047:L2624&cql_filter=' + cqlFilter;\n\t      (0, _getWFSFeature2.default)(null, null, wfsUrl).then(function (features) {\n\t        features.forEach(function (feature) {\n\t          _this4.setFeatureProperties(feature);\n\t          _this4.hiliteLayer.addData(feature);\n\t        });\n\t      });\n\t    },\n\t    notEditable: function notEditable(feature) {\n\t      var notEditable = false;\n\t      this.particelleSelezionate.forEach(function (particella) {\n\t        if (feature.id === particella.id && particella.properties.STATO !== 'M') {\n\t          notEditable = true;\n\t        }\n\t      });\n\t      return notEditable;\n\t    },\n\t    alreadySelected: function alreadySelected(feature) {\n\t      var selected = false;\n\t      this.particelleSelezionate.forEach(function (particella) {\n\t        if (feature.id === particella.id) {\n\t          selected = true;\n\t        }\n\t      });\n\t      return selected;\n\t    },\n\t    handleDelete: function handleDelete(index, row) {\n\t      this.particelleSelezionate = this.particelleSelezionate.filter(function (particella) {\n\t        return particella.id !== row.id;\n\t      });\n\t      this.hiliteLayer.eachLayer(function (layer) {\n\t        if (layer.feature.id == row.id) {\n\t          GV.app.map.removeLayer(layer);\n\t        }\n\t      });\n\t    },\n\t    selectRiga: function selectRiga(row) {\n\t      if (row) {\n\t        this.hiliteLayer.eachLayer(function (layer) {\n\t          if (layer.feature.id == row.id) {\n\t            layer.setStyle({ fillOpacity: 0.4 });\n\t          } else {\n\t            layer.setStyle({ fillOpacity: 0.0 });\n\t          }\n\t        });\n\t      }\n\t    },\n\t    deselectRiga: function deselectRiga(row) {\n\t      if (row) {\n\t        this.hiliteLayer.eachLayer(function (layer) {\n\t          if (layer.feature.id == row.id) {\n\t            layer.setStyle({ fillOpacity: 0.0 });\n\t          }\n\t        });\n\t      }\n\t    },\n\t    subscribeMapEvent: function subscribeMapEvent(event) {\n\t      var _this5 = this;\n\t\n\t      GV.app.map.on('click', function (event) {\n\t        var wmsUrl = _this5.getWmsUrl(event);\n\t        (0, _getFeatureInfo2.default)(wmsUrl).then(function (features) {\n\t          return _this5.updateParticelleSelezionate(features);\n\t        });\n\t      });\n\t    },\n\t    hideLayer: function hideLayer() {\n\t      this.hiliteLayer.eachLayer(function (layer) {\n\t        layer.getElement().style.display = 'none';\n\t      });\n\t    },\n\t    showLayer: function showLayer() {\n\t      this.hiliteLayer.eachLayer(function (layer) {\n\t        layer.getElement().style.display = 'block';\n\t      });\n\t    }\n\t  },\n\t  mounted: function mounted() {\n\t    var _this6 = this;\n\t\n\t    this.layerConfig = GV.config.getLayerConfig(this.options.idLayerParticella);\n\t    if (!this.layerConfig) {\n\t      GV.eventBus.$on('gv-config-init', function (event) {\n\t        _this6.layerConfig = GV.config.getLayerConfig(_this6.options.idLayerParticella);\n\t      });\n\t    }\n\t    this.loadLayer();\n\t\n\t    GV.eventBus.$on('gv-control-genio-seleziona-particelle-activate', function (event) {\n\t      _this6.subscribeMapEvent(event);\n\t      _this6.showLayer();\n\t      _this6.loadParticelle();\n\t    });\n\t    GV.eventBus.$on('gv-control-genio-seleziona-particelle-deactivate', function (event) {\n\t      GV.app.map.off('click');\n\t      _this6.hideLayer();\n\t    });\n\t    this.subscribeMapEvent(event);\n\t  }\n\t};\n\n/***/ }),\n\n/***/ 359:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (data) {\n\t  return _axios2.default.post(\"/geoservices/REST/genioweb/insert_particelle\", {\n\t    headers: {\n\t      Accept: \"text/xml\"\n\t    },\n\t    data: data\n\t  }).then(function (response) {\n\t    return response.data;\n\t  });\n\t};\n\t\n\tvar _axios = __webpack_require__(4);\n\t\n\tvar _axios2 = _interopRequireDefault(_axios);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n\n/***/ 457:\n/***/ (function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(2)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \".gv-genio-seleziona-particelle-panel{position:absolute;width:560px;left:0;top:0;margin-left:10px;margin-top:50px;z-index:800}.gv-genio-seleziona-particelle-body{padding:5px;width:550px;height:350px}.gv-genio-seleziona-particelle-table{padding:5px;width:540px;height:200px;max-height:410px}.el-table__body-wrapper{max-height:300px!important}\", \"\", {\"version\":3,\"sources\":[\"/./src/components/GenioSelezionaParticelle.vue\"],\"names\":[],\"mappings\":\"AACA,qCACE,kBAAmB,AACnB,YAAa,AACb,OAAU,AACV,MAAS,AACT,iBAAkB,AAClB,gBAAiB,AACjB,WAAa,CACd,AACD,oCACE,YAAa,AACb,YAAa,AACb,YAAc,CACf,AACD,qCACE,YAAa,AACb,YAAa,AACb,aAAc,AACd,gBAAkB,CACnB,AACD,wBACE,0BAA6B,CAC9B\",\"file\":\"GenioSelezionaParticelle.vue\",\"sourcesContent\":[\"\\n.gv-genio-seleziona-particelle-panel {\\r\\n  position: absolute;\\r\\n  width: 560px;\\r\\n  left: 0px;\\r\\n  top: 0px;\\r\\n  margin-left: 10px;\\r\\n  margin-top: 50px;\\r\\n  z-index: 800;\\n}\\n.gv-genio-seleziona-particelle-body {\\r\\n  padding: 5px;\\r\\n  width: 550px;\\r\\n  height: 350px;\\n}\\n.gv-genio-seleziona-particelle-table {\\r\\n  padding: 5px;\\r\\n  width: 540px;\\r\\n  height: 200px;\\r\\n  max-height: 410px;\\n}\\n.el-table__body-wrapper {\\r\\n  max-height: 300px !important;\\n}\\r\\n\"],\"sourceRoot\":\"webpack://\"}]);\n\t\n\t// exports\n\n\n/***/ }),\n\n/***/ 569:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(457);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(3)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!./../../node_modules/css-loader/index.js?sourceMap!./../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-dae4e7ae!./../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./GenioSelezionaParticelle.vue\", function() {\n\t\t\t\tvar newContent = require(\"!!./../../node_modules/css-loader/index.js?sourceMap!./../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-dae4e7ae!./../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./GenioSelezionaParticelle.vue\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ }),\n\n/***/ 631:\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __vue_exports__, __vue_options__\n\tvar __vue_styles__ = {}\n\t\n\t/* styles */\n\t__webpack_require__(569)\n\t\n\t/* script */\n\t__vue_exports__ = __webpack_require__(248)\n\t\n\t/* template */\n\tvar __vue_template__ = __webpack_require__(755)\n\t__vue_options__ = __vue_exports__ = __vue_exports__ || {}\n\tif (\n\t  typeof __vue_exports__.default === \"object\" ||\n\t  typeof __vue_exports__.default === \"function\"\n\t) {\n\t__vue_options__ = __vue_exports__ = __vue_exports__.default\n\t}\n\tif (typeof __vue_options__ === \"function\") {\n\t  __vue_options__ = __vue_options__.options\n\t}\n\t\n\t__vue_options__.render = __vue_template__.render\n\t__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\t\n\tmodule.exports = __vue_exports__\n\n\n/***/ }),\n\n/***/ 755:\n/***/ (function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;\n\t  return _vm._c('div', {\n\t    staticClass: \"gv-genio-seleziona-particelle-panel\",\n\t    attrs: {\n\t      \"id\": \"gv-genio-seleziona-particelle-panel\"\n\t    }\n\t  }, [_vm._c('gv-title', {\n\t    directives: [{\n\t      name: \"draggable\",\n\t      rawName: \"v-draggable\"\n\t    }],\n\t    attrs: {\n\t      \"title\": \"Seleziona Particelle\",\n\t      \"divId\": 'gv-genio-seleziona-particelle-panel',\n\t      \"noClose\": true\n\t    }\n\t  }), _vm._v(\" \"), _vm._c('div', {\n\t    staticClass: \"gv-genio-seleziona-particelle-body gv-inverted-color-scheme\"\n\t  }, [_vm._c('div', {\n\t    staticClass: \"gv-genio-seleziona-particelle-table\"\n\t  }, [_vm._c('el-table', {\n\t    attrs: {\n\t      \"data\": _vm.particelleSelezionate,\n\t      \"empty-text\": \"Nessuna particella selezionata\",\n\t      \"highlight-current-row\": \"\",\n\t      \"cell-style\": {\n\t        padding: '2px',\n\t        maxHeight: '10px'\n\t      }\n\t    },\n\t    on: {\n\t      \"cell-mouse-enter\": _vm.selectRiga,\n\t      \"cell-mouse-leave\": _vm.deselectRiga\n\t    }\n\t  }, [_vm._c('el-table-column', {\n\t    attrs: {\n\t      \"label\": \"ESTREMI\",\n\t      \"align\": \"center\",\n\t      \"width\": \"140\"\n\t    },\n\t    scopedSlots: _vm._u([{\n\t      key: \"default\",\n\t      fn: function(scope) {\n\t        return [_vm._c('el-popover', {\n\t          attrs: {\n\t            \"trigger\": \"hover\",\n\t            \"placement\": \"bottom\"\n\t          }\n\t        }, [_vm._c('p', [_vm._v(\"COMUNE: \" + _vm._s(scope.row.properties.CT24_COD_COM))])]), _vm._v(\" \"), _vm._c('div', {\n\t          staticClass: \"name-wrapper\",\n\t          attrs: {\n\t            \"slot\": \"reference\"\n\t          },\n\t          slot: \"reference\"\n\t        }, [_vm._v(_vm._s(scope.row.label))])]\n\t      }\n\t    }])\n\t  }), _vm._v(\" \"), _vm._c('el-table-column', {\n\t    attrs: {\n\t      \"label\": \"PROT\",\n\t      \"align\": \"center\",\n\t      \"width\": \"60\"\n\t    },\n\t    scopedSlots: _vm._u([{\n\t      key: \"default\",\n\t      fn: function(scope) {\n\t        return [_vm._c('span', [_vm._v(_vm._s(scope.row.properties.CT24_PROT_IN))])]\n\t      }\n\t    }])\n\t  }), _vm._v(\" \"), _vm._c('el-table-column', {\n\t    attrs: {\n\t      \"label\": \"DATA DBTI\",\n\t      \"align\": \"center\",\n\t      \"width\": \"80\"\n\t    },\n\t    scopedSlots: _vm._u([{\n\t      key: \"default\",\n\t      fn: function(scope) {\n\t        return [_vm._c('span', [_vm._v(_vm._s(scope.row.properties.CT24_DATA_AGG.substr(0, 10)))])]\n\t      }\n\t    }])\n\t  }), _vm._v(\" \"), _vm._c('el-table-column', {\n\t    attrs: {\n\t      \"label\": \"DATA SEL\",\n\t      \"align\": \"center\",\n\t      \"width\": \"80\"\n\t    },\n\t    scopedSlots: _vm._u([{\n\t      key: \"default\",\n\t      fn: function(scope) {\n\t        return [_vm._c('span', [_vm._v(_vm._s(scope.row.properties.DATA_SEL.substr(0, 10)))])]\n\t      }\n\t    }])\n\t  }), _vm._v(\" \"), _vm._c('el-table-column', {\n\t    attrs: {\n\t      \"label\": \"AREA\",\n\t      \"align\": \"center\",\n\t      \"width\": \"50\"\n\t    },\n\t    scopedSlots: _vm._u([{\n\t      key: \"default\",\n\t      fn: function(scope) {\n\t        return [_vm._c('span', [_vm._v(_vm._s(scope.row.properties.AREA))])]\n\t      }\n\t    }])\n\t  }), _vm._v(\" \"), _vm._c('el-table-column', {\n\t    attrs: {\n\t      \"label\": \"PARZ.\",\n\t      \"align\": \"center\",\n\t      \"width\": \"60\"\n\t    },\n\t    scopedSlots: _vm._u([{\n\t      key: \"default\",\n\t      fn: function(scope) {\n\t        return [_vm._c('span', [_vm._c('el-checkbox', {\n\t          directives: [{\n\t            name: \"show\",\n\t            rawName: \"v-show\",\n\t            value: (_vm.editableRow(scope.row.properties.STATO)),\n\t            expression: \"editableRow(scope.row.properties.STATO)\"\n\t          }],\n\t          model: {\n\t            value: (scope.row.properties.parziale),\n\t            callback: function($$v) {\n\t              _vm.$set(scope.row.properties, \"parziale\", $$v)\n\t            },\n\t            expression: \"scope.row.properties.parziale\"\n\t          }\n\t        })], 1)]\n\t      }\n\t    }])\n\t  }), _vm._v(\" \"), _vm._c('el-table-column', {\n\t    attrs: {\n\t      \"width\": \"40\"\n\t    },\n\t    scopedSlots: _vm._u([{\n\t      key: \"default\",\n\t      fn: function(scope) {\n\t        return [_vm._c('el-button', {\n\t          directives: [{\n\t            name: \"show\",\n\t            rawName: \"v-show\",\n\t            value: (_vm.editableRow(scope.row.properties.STATO)),\n\t            expression: \"editableRow(scope.row.properties.STATO)\"\n\t          }],\n\t          attrs: {\n\t            \"size\": \"mini\",\n\t            \"type\": \"danger\",\n\t            \"icon\": \"el-icon-delete\"\n\t          },\n\t          on: {\n\t            \"click\": function($event) {\n\t              _vm.handleDelete(scope.$index, scope.row)\n\t            }\n\t          }\n\t        })]\n\t      }\n\t    }])\n\t  })], 1)], 1)]), _vm._v(\" \"), _vm._c('el-row', {\n\t    staticClass: \"row-bg\",\n\t    attrs: {\n\t      \"type\": \"flex\",\n\t      \"justify\": \"left\"\n\t    }\n\t  }, [_vm._c('el-button', {\n\t    ref: \"button\",\n\t    attrs: {\n\t      \"id\": \"gv-genio-seleziona-particelle-panel-submit\",\n\t      \"title\": \"Salva i dati sul DB\",\n\t      \"type\": \"primary\",\n\t      \"size\": \"mini\",\n\t      \"disabled\": _vm.buttonDisabled\n\t    },\n\t    on: {\n\t      \"click\": function($event) {\n\t        _vm.submit()\n\t      }\n\t    }\n\t  }, [_vm._c('span', [_vm._v(\"Salva su DB\")])]), _vm._v(\" \"), _vm._c('el-button', {\n\t    staticClass: \"gv-color-scheme\",\n\t    attrs: {\n\t      \"id\": \"gv-draw-cancel\",\n\t      \"title\": \"Ricarica dati salvati sul DB\",\n\t      \"size\": \"mini\"\n\t    },\n\t    on: {\n\t      \"click\": _vm.refresh\n\t    }\n\t  }, [_vm._v(\"Ricarica\")])], 1)], 1)\n\t},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/15.js","<template>\r\n  <div id=\"gv-genio-seleziona-particelle-panel\" class=\"gv-genio-seleziona-particelle-panel\">\r\n    <gv-title\r\n      title=\"Seleziona Particelle\"\r\n      :divId=\"'gv-genio-seleziona-particelle-panel'\"\r\n      :noClose=\"true\"\r\n      v-draggable\r\n    ></gv-title>\r\n    <div class=\"gv-genio-seleziona-particelle-body gv-inverted-color-scheme\">\r\n      <div class=\"gv-genio-seleziona-particelle-table\">\r\n        <el-table\r\n          :data=\"particelleSelezionate\"\r\n          empty-text=\"Nessuna particella selezionata\"\r\n          @cell-mouse-enter=\"selectRiga\"\r\n          @cell-mouse-leave=\"deselectRiga\"\r\n          highlight-current-row\r\n          :cell-style=\"{ padding: '2px', maxHeight: '10px' }\"\r\n        >\r\n          <el-table-column label=\"ESTREMI\" align=\"center\" width=\"140\">\r\n            <template slot-scope=\"scope\">\r\n              <el-popover trigger=\"hover\" placement=\"bottom\">\r\n                <p>COMUNE: {{ scope.row.properties.CT24_COD_COM }}</p>\r\n              </el-popover>\r\n              <div slot=\"reference\" class=\"name-wrapper\">{{ scope.row.label }}</div>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"PROT\" align=\"center\" width=\"60\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{ scope.row.properties.CT24_PROT_IN }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"DATA DBTI\" align=\"center\" width=\"80\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{ scope.row.properties.CT24_DATA_AGG.substr(0, 10) }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"DATA SEL\" align=\"center\" width=\"80\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{ scope.row.properties.DATA_SEL.substr(0, 10) }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"AREA\" align=\"center\" width=\"50\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{ scope.row.properties.AREA }}</span>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"PARZ.\" align=\"center\" width=\"60\">\r\n            <template slot-scope=\"scope\">\r\n              <span>\r\n                <el-checkbox\r\n                  v-show=\"editableRow(scope.row.properties.STATO)\"\r\n                  v-model=\"scope.row.properties.parziale\"\r\n                />\r\n              </span>\r\n            </template>\r\n          </el-table-column>\r\n          <!-- <el-table-column label=\"Catalogo\" align=\"center\" width=\"70\">\r\n            <template slot-scope=\"scope\">\r\n              <span>\r\n                <el-checkbox v-model=\"scope.row.properties.catalogo\" />\r\n              </span>\r\n            </template>\r\n          </el-table-column>-->\r\n          <el-table-column width=\"40\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button\r\n                v-show=\"editableRow(scope.row.properties.STATO)\"\r\n                size=\"mini\"\r\n                type=\"danger\"\r\n                @click=\"handleDelete(scope.$index, scope.row)\"\r\n                icon=\"el-icon-delete\"\r\n              ></el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n    </div>\r\n    <el-row type=\"flex\" class=\"row-bg\" justify=\"left\">\r\n      <el-button\r\n        id=\"gv-genio-seleziona-particelle-panel-submit\"\r\n        ref=\"button\"\r\n        title=\"Salva i dati sul DB\"\r\n        type=\"primary\"\r\n        @click=\"submit()\"\r\n        size=\"mini\"\r\n        :disabled=\"buttonDisabled\"\r\n      >\r\n        <span>Salva su DB</span>\r\n      </el-button>\r\n      <el-button\r\n        id=\"gv-draw-cancel\"\r\n        title=\"Ricarica dati salvati sul DB\"\r\n        @click=\"refresh\"\r\n        class=\"gv-color-scheme\"\r\n        size=\"mini\"\r\n        >Ricarica</el-button\r\n      >\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from 'vue';\r\nimport getCoordTransform from '../services/getCoordTransform';\r\nimport InfoWmsManager from '../controls/InfoWmsManager';\r\nimport getFeatureInfo from '../services/getFeatureInfo';\r\nimport getWFSFeature from '../services/getWFSFeature';\r\nimport insertParticelleGenio from '../services/insertParticelleGenio';\r\n\r\nimport { Button, Row, Loading, Notification, Popover } from 'element-ui';\r\nVue.use(Button);\r\nVue.use(Row);\r\nVue.use(Popover);\r\n\r\nexport default {\r\n  name: 'gv-genio-seleziona-particelle-panel',\r\n  data() {\r\n    return {\r\n      particelleSelezionate: [],\r\n      hiliteLayer: null,\r\n      geojsonLayerList: [],\r\n      options: GV.config.getToolOptions('gv-genio-seleziona-particelle-button'),\r\n    };\r\n  },\r\n  computed: {\r\n    buttonDisabled() {\r\n      return false;\r\n      // return this.particelleSelezionate.length === 0;\r\n    },\r\n  },\r\n  methods: {\r\n    refresh() {\r\n      this.loadParticelle();\r\n    },\r\n    editableRow(stato) {\r\n      return stato === 'M';\r\n    },\r\n    submit() {\r\n      var r = confirm('Sei sicuro?');\r\n      if (r == true) {\r\n        this.saveData();\r\n      }\r\n      return;\r\n    },\r\n    saveData() {\r\n      const listaParticelle = this.particelleSelezionate.map(particella => {\r\n        particella.properties.id = particella.id;\r\n        return particella.properties;\r\n      });\r\n      var data = {\r\n        prov: this.options.prov,\r\n        codicePratica: this.options.codicePratica,\r\n        listaParticelle: listaParticelle,\r\n        idPunto: this.options.idPunto,\r\n      };\r\n      const loading = Loading.service({\r\n        text: 'Salvataggio dati...',\r\n        background: 'rgba(0, 0, 0, 0.8)',\r\n      });\r\n      insertParticelleGenio(data).then(resp => {\r\n        if (loading) loading.close();\r\n        if (resp.success) {\r\n          GV.utils.notification('Dati salvati correttamente', 'info');\r\n          // this.loadParticelle();\r\n          this.reloadLayer();\r\n        } else {\r\n          GV.utils.notification('Errore nella scrittura sul DB', 'error');\r\n        }\r\n      });\r\n    },\r\n    reloadLayer() {\r\n      var layer = GV.globals.GW_CONFIG[this.options.prov].idLayerPratica;\r\n      if (\r\n        this.options.codicePratica.startsWith('GDE') ||\r\n        this.options.codicePratica.startsWith('IMD') ||\r\n        this.options.codicePratica.startsWith('SVD') ||\r\n        this.options.codicePratica.startsWith('SPD')\r\n      ) {\r\n        layer = GV.globals.GW_CONFIG[this.options.prov].idLayerPraticaDe;\r\n      }\r\n      if (this.options.idPunto) {\r\n        layer = GV.globals.GW_CONFIG[this.options.prov].idLayerEttariIrrigati;\r\n      }\r\n\r\n      var layerConfig = GV.config.getLayerConfig(layer);\r\n      GV.eventBus.$emit('set-layer-visible', {\r\n        layer: layerConfig,\r\n        checked: false,\r\n      });\r\n      GV.eventBus.$emit('set-layer-visible', {\r\n        layer: layerConfig,\r\n        checked: true,\r\n      });\r\n    },\r\n    loadLayer() {\r\n      GV.app.map.loadLayers([\r\n        {\r\n          name: 'SelezioneParticelle',\r\n          type: 'JSON',\r\n          style: {\r\n            color: '#ff0000',\r\n            fillOpacity: 0.0,\r\n            weight: 3,\r\n            opacity: 0.7,\r\n          },\r\n          visible: true,\r\n          onEachFeature: (feature, layer) => {\r\n            layer.on('click', ev => {\r\n              // this.hiliteLayer.removeLayer(layer);\r\n            });\r\n          },\r\n        },\r\n      ]);\r\n      this.hiliteLayer = GV.app.map.getLayerByName('SelezioneParticelle');\r\n      this.loadParticelle();\r\n    },\r\n    loadParticelle() {\r\n      this.hiliteLayer.clearLayers();\r\n      this.particelleSelezionate = [];\r\n      const workSpace = `M${this.options.idMap}`;\r\n      let cqlFilter, layer;\r\n      if (this.options.idPunto) {\r\n        cqlFilter = `SV06_CODICE_PRATICA = '${this.options.codicePratica}' AND SV06_COD_COM IS NOT NULL`;\r\n        layer = this.options.idLayerEttariIrrigati;\r\n      } else {\r\n        cqlFilter = `CODICE_PRATICA = '${this.options.codicePratica}' AND MAPPALE IS NOT NULL`;\r\n        layer = this.options.idLayerPratica;\r\n      }\r\n      const wfsUrl = `https://geoservizi.regione.liguria.it/geoserver/wfs?service=WFS&version=2.0.0&request=GetFeature&srsName=EPSG%3A4326&outputFormat=application%2Fjson&typeName=${workSpace}:${layer}&cql_filter=${cqlFilter}`;\r\n      getWFSFeature(null, null, wfsUrl).then(features => {\r\n        features.forEach(feature => {\r\n          const codCom = feature.properties.COD_COM || feature.properties.SV06_COD_COM;\r\n          const sez = feature.properties.SEZ || feature.properties.SV06_SEZ;\r\n          const foglio = feature.properties.FOGLIO || feature.properties.SV06_FOGLIO;\r\n          const mappale = feature.properties.MAPPALE || feature.properties.SV06_MAPPALE;\r\n          const allegato = feature.properties.ALLEGATO || feature.properties.SV06_ALLEGATO;\r\n          const sviluppo = feature.properties.SVILUPPO || feature.properties.SV06_SVILUPPO;\r\n          const protDbti = feature.properties.PROT_DBTI || feature.properties.SV06_PROT_DBTI;\r\n          const dataDbti = feature.properties.DATA_DBTI || feature.properties.SV06_DATA_DBTI;\r\n          const dataSel = feature.properties.DATA_SEL || feature.properties.SV06_DATA_SEL;\r\n          const area = feature.properties.AREA || feature.properties.SV06_AREA;\r\n          const stato = feature.properties.G_STATO || feature.properties.SV06_STATO;\r\n          const mappaleParziale =\r\n            feature.properties.MAPPALE_PARZIALE || feature.properties.SV06_MAPPALE_PARZIALE;\r\n\r\n          const particella = {\r\n            type: 'Feature',\r\n            id: feature.id,\r\n            geometry: feature.geometry,\r\n            bbox: feature.bbox,\r\n            geometry_name: feature.geometry_name,\r\n            properties: {\r\n              CT24_ID: null,\r\n              CT24_COD_COM: codCom,\r\n              CT24_SEZ: sez,\r\n              CT24_FOGLIO: foglio,\r\n              CT24_NUMERO: mappale,\r\n              CT24_ALLEGATO: allegato,\r\n              CT24_SVILUPPO: sviluppo,\r\n              CT24_PROT_IN: protDbti,\r\n              CT24_DATA_AGG: dataDbti,\r\n              DATA_SEL: dataSel,\r\n              AREA: area,\r\n              STATO: stato,\r\n              parziale: mappaleParziale ? true : false,\r\n            },\r\n          };\r\n          particella.label = `${particella.properties.CT24_COD_COM}/${\r\n            particella.properties.CT24_SEZ\r\n          }/${particella.properties.CT24_FOGLIO}/${particella.properties.CT24_NUMERO.trim()}/${\r\n            particella.properties.CT24_ALLEGATO\r\n          }/${particella.properties.CT24_SVILUPPO}`;\r\n          particella.id = particella.label;\r\n          this.particelleSelezionate.push(particella);\r\n          this.hiliteLayer.addData(particella);\r\n        });\r\n      });\r\n    },\r\n    getWmsUrl(event) {\r\n      if (!this.layerConfig) {\r\n        console.error('Configurazione Layer non trovata');\r\n        return;\r\n      }\r\n      let url = GV.globals.DEFAULT_PROXY + this.layerConfig.wmsParams.url;\r\n      const infoFormat = 'application/json';\r\n      const infoBuffer = 0;\r\n      const wmsUrl = InfoWmsManager.buildWMSOptions(\r\n        url,\r\n        this.layerConfig.wmsParams.name,\r\n        event.latlng,\r\n        infoFormat,\r\n        infoBuffer\r\n      );\r\n      return wmsUrl;\r\n    },\r\n    updateParticelleSelezionate(features) {\r\n      features.forEach(feature => {\r\n        this.setFeatureProperties(feature);\r\n        if (this.notEditable(feature)) {\r\n          return;\r\n        }\r\n        if (this.alreadySelected(feature)) {\r\n          this.particelleSelezionate = this.particelleSelezionate.filter(particella => {\r\n            return particella.id !== feature.id;\r\n          });\r\n          this.hiliteLayer.eachLayer(layer => {\r\n            if (layer.feature.id == feature.id) {\r\n              GV.app.map.removeLayer(layer);\r\n            }\r\n          });\r\n        } else {\r\n          this.particelleSelezionate.push(feature);\r\n          this.updateLayer(feature);\r\n        }\r\n      });\r\n    },\r\n    setFeatureProperties(feature) {\r\n      feature.properties.DATA_SEL = '';\r\n      feature.properties.STATO = 'M';\r\n      feature.label = `${feature.properties.CT24_COD_COM}/${feature.properties.CT24_SEZ}/${\r\n        feature.properties.CT24_FOGLIO\r\n      }/${feature.properties.CT24_NUMERO.trim()}/${feature.properties.CT24_ALLEGATO}/${\r\n        feature.properties.CT24_SVILUPPO\r\n      }`;\r\n      feature.id = feature.label;\r\n      feature.properties.parziale = false;\r\n      feature.properties.catalogo = true;\r\n      feature.properties.AREA = feature.properties.CT24_AREA;\r\n    },\r\n    updateLayer(feature, type) {\r\n      const cqlFilter = 'CT24_ID = ' + feature.properties.CT24_ID;\r\n      const wfsUrl =\r\n        'https://geoservizi.regione.liguria.it/geoserver/wfs?service=WFS&version=2.0.0&request=GetFeature&srsName=EPSG%3A4326&outputFormat=application%2Fjson&typeName=M1047:L2624&cql_filter=' +\r\n        cqlFilter;\r\n      getWFSFeature(null, null, wfsUrl).then(features => {\r\n        features.forEach(feature => {\r\n          this.setFeatureProperties(feature);\r\n          this.hiliteLayer.addData(feature);\r\n        });\r\n      });\r\n    },\r\n    notEditable(feature) {\r\n      let notEditable = false;\r\n      this.particelleSelezionate.forEach(particella => {\r\n        if (feature.id === particella.id && particella.properties.STATO !== 'M') {\r\n          notEditable = true;\r\n        }\r\n      });\r\n      return notEditable;\r\n    },\r\n    alreadySelected(feature) {\r\n      let selected = false;\r\n      this.particelleSelezionate.forEach(particella => {\r\n        if (feature.id === particella.id) {\r\n          selected = true;\r\n        }\r\n      });\r\n      return selected;\r\n    },\r\n    handleDelete(index, row) {\r\n      this.particelleSelezionate = this.particelleSelezionate.filter(particella => {\r\n        return particella.id !== row.id;\r\n      });\r\n      this.hiliteLayer.eachLayer(layer => {\r\n        if (layer.feature.id == row.id) {\r\n          GV.app.map.removeLayer(layer);\r\n        }\r\n      });\r\n    },\r\n    selectRiga(row) {\r\n      if (row) {\r\n        this.hiliteLayer.eachLayer(layer => {\r\n          if (layer.feature.id == row.id) {\r\n            layer.setStyle({ fillOpacity: 0.4 });\r\n          } else {\r\n            layer.setStyle({ fillOpacity: 0.0 });\r\n          }\r\n        });\r\n      }\r\n    },\r\n    deselectRiga(row) {\r\n      if (row) {\r\n        this.hiliteLayer.eachLayer(layer => {\r\n          if (layer.feature.id == row.id) {\r\n            layer.setStyle({ fillOpacity: 0.0 });\r\n          }\r\n        });\r\n      }\r\n    },\r\n    subscribeMapEvent(event) {\r\n      GV.app.map.on('click', event => {\r\n        const wmsUrl = this.getWmsUrl(event);\r\n        getFeatureInfo(wmsUrl).then(features => this.updateParticelleSelezionate(features));\r\n      });\r\n    },\r\n    hideLayer() {\r\n      this.hiliteLayer.eachLayer(layer => {\r\n        layer.getElement().style.display = 'none';\r\n      });\r\n    },\r\n    showLayer() {\r\n      this.hiliteLayer.eachLayer(layer => {\r\n        layer.getElement().style.display = 'block';\r\n      });\r\n    },\r\n  },\r\n  mounted() {\r\n    this.layerConfig = GV.config.getLayerConfig(this.options.idLayerParticella);\r\n    if (!this.layerConfig) {\r\n      GV.eventBus.$on('gv-config-init', event => {\r\n        this.layerConfig = GV.config.getLayerConfig(this.options.idLayerParticella);\r\n      });\r\n    }\r\n    this.loadLayer();\r\n\r\n    // GESTIONE EVENTI\r\n    GV.eventBus.$on('gv-control-genio-seleziona-particelle-activate', event => {\r\n      this.subscribeMapEvent(event);\r\n      this.showLayer();\r\n      this.loadParticelle();\r\n    });\r\n    GV.eventBus.$on('gv-control-genio-seleziona-particelle-deactivate', event => {\r\n      GV.app.map.off('click');\r\n      this.hideLayer();\r\n    });\r\n    this.subscribeMapEvent(event);\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.gv-genio-seleziona-particelle-panel {\r\n  position: absolute;\r\n  width: 560px;\r\n  left: 0px;\r\n  top: 0px;\r\n  margin-left: 10px;\r\n  margin-top: 50px;\r\n  z-index: 800;\r\n}\r\n\r\n.gv-genio-seleziona-particelle-body {\r\n  padding: 5px;\r\n  width: 550px;\r\n  height: 350px;\r\n}\r\n\r\n.gv-genio-seleziona-particelle-table {\r\n  padding: 5px;\r\n  width: 540px;\r\n  height: 200px;\r\n  max-height: 410px;\r\n}\r\n\r\n.el-table__body-wrapper {\r\n  max-height: 300px !important;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// GenioSelezionaParticelle.vue?64f00d43","import axios from \"axios\";\r\n\r\nexport default function (data) {\r\n  return axios\r\n    .post(\"/geoservices/REST/genioweb/insert_particelle\", {\r\n      headers: {\r\n        Accept: \"text/xml\"\r\n      },\r\n      data: data\r\n    })\r\n    .then(response => response.data);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./E:/geoviewer2/src/services/insertParticelleGenio.js","exports = module.exports = require(\"./../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".gv-genio-seleziona-particelle-panel{position:absolute;width:560px;left:0;top:0;margin-left:10px;margin-top:50px;z-index:800}.gv-genio-seleziona-particelle-body{padding:5px;width:550px;height:350px}.gv-genio-seleziona-particelle-table{padding:5px;width:540px;height:200px;max-height:410px}.el-table__body-wrapper{max-height:300px!important}\", \"\", {\"version\":3,\"sources\":[\"/./src/components/GenioSelezionaParticelle.vue\"],\"names\":[],\"mappings\":\"AACA,qCACE,kBAAmB,AACnB,YAAa,AACb,OAAU,AACV,MAAS,AACT,iBAAkB,AAClB,gBAAiB,AACjB,WAAa,CACd,AACD,oCACE,YAAa,AACb,YAAa,AACb,YAAc,CACf,AACD,qCACE,YAAa,AACb,YAAa,AACb,aAAc,AACd,gBAAkB,CACnB,AACD,wBACE,0BAA6B,CAC9B\",\"file\":\"GenioSelezionaParticelle.vue\",\"sourcesContent\":[\"\\n.gv-genio-seleziona-particelle-panel {\\r\\n  position: absolute;\\r\\n  width: 560px;\\r\\n  left: 0px;\\r\\n  top: 0px;\\r\\n  margin-left: 10px;\\r\\n  margin-top: 50px;\\r\\n  z-index: 800;\\n}\\n.gv-genio-seleziona-particelle-body {\\r\\n  padding: 5px;\\r\\n  width: 550px;\\r\\n  height: 350px;\\n}\\n.gv-genio-seleziona-particelle-table {\\r\\n  padding: 5px;\\r\\n  width: 540px;\\r\\n  height: 200px;\\r\\n  max-height: 410px;\\n}\\n.el-table__body-wrapper {\\r\\n  max-height: 300px !important;\\n}\\r\\n\"],\"sourceRoot\":\"webpack://\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?sourceMap!./~/vue-loader/lib/style-rewriter.js?id=data-v-dae4e7ae!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/GenioSelezionaParticelle.vue\n// module id = 457\n// module chunks = 15","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../node_modules/css-loader/index.js?sourceMap!./../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-dae4e7ae!./../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./GenioSelezionaParticelle.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../node_modules/vue-style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../node_modules/css-loader/index.js?sourceMap!./../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-dae4e7ae!./../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./GenioSelezionaParticelle.vue\", function() {\n\t\t\tvar newContent = require(\"!!./../../node_modules/css-loader/index.js?sourceMap!./../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-dae4e7ae!./../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./GenioSelezionaParticelle.vue\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"extract\":true,\"remove\":true}!./~/vue-style-loader!./~/css-loader?sourceMap!./~/vue-loader/lib/style-rewriter.js?id=data-v-dae4e7ae!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/GenioSelezionaParticelle.vue\n// module id = 569\n// module chunks = 15","var __vue_exports__, __vue_options__\nvar __vue_styles__ = {}\n\n/* styles */\nrequire(\"!!./../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!vue-loader/lib/style-rewriter?id=data-v-dae4e7ae!vue-loader/lib/selector?type=styles&index=0!./GenioSelezionaParticelle.vue\")\n\n/* script */\n__vue_exports__ = require(\"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./GenioSelezionaParticelle.vue\")\n\n/* template */\nvar __vue_template__ = require(\"!!vue-loader/lib/template-compiler?id=data-v-dae4e7ae!vue-loader/lib/selector?type=template&index=0!./GenioSelezionaParticelle.vue\")\n__vue_options__ = __vue_exports__ = __vue_exports__ || {}\nif (\n  typeof __vue_exports__.default === \"object\" ||\n  typeof __vue_exports__.default === \"function\"\n) {\n__vue_options__ = __vue_exports__ = __vue_exports__.default\n}\nif (typeof __vue_options__ === \"function\") {\n  __vue_options__ = __vue_options__.options\n}\n\n__vue_options__.render = __vue_template__.render\n__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\nmodule.exports = __vue_exports__\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/GenioSelezionaParticelle.vue\n// module id = 631\n// module chunks = 15","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;\n  return _vm._c('div', {\n    staticClass: \"gv-genio-seleziona-particelle-panel\",\n    attrs: {\n      \"id\": \"gv-genio-seleziona-particelle-panel\"\n    }\n  }, [_vm._c('gv-title', {\n    directives: [{\n      name: \"draggable\",\n      rawName: \"v-draggable\"\n    }],\n    attrs: {\n      \"title\": \"Seleziona Particelle\",\n      \"divId\": 'gv-genio-seleziona-particelle-panel',\n      \"noClose\": true\n    }\n  }), _vm._v(\" \"), _vm._c('div', {\n    staticClass: \"gv-genio-seleziona-particelle-body gv-inverted-color-scheme\"\n  }, [_vm._c('div', {\n    staticClass: \"gv-genio-seleziona-particelle-table\"\n  }, [_vm._c('el-table', {\n    attrs: {\n      \"data\": _vm.particelleSelezionate,\n      \"empty-text\": \"Nessuna particella selezionata\",\n      \"highlight-current-row\": \"\",\n      \"cell-style\": {\n        padding: '2px',\n        maxHeight: '10px'\n      }\n    },\n    on: {\n      \"cell-mouse-enter\": _vm.selectRiga,\n      \"cell-mouse-leave\": _vm.deselectRiga\n    }\n  }, [_vm._c('el-table-column', {\n    attrs: {\n      \"label\": \"ESTREMI\",\n      \"align\": \"center\",\n      \"width\": \"140\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_vm._c('el-popover', {\n          attrs: {\n            \"trigger\": \"hover\",\n            \"placement\": \"bottom\"\n          }\n        }, [_vm._c('p', [_vm._v(\"COMUNE: \" + _vm._s(scope.row.properties.CT24_COD_COM))])]), _vm._v(\" \"), _vm._c('div', {\n          staticClass: \"name-wrapper\",\n          attrs: {\n            \"slot\": \"reference\"\n          },\n          slot: \"reference\"\n        }, [_vm._v(_vm._s(scope.row.label))])]\n      }\n    }])\n  }), _vm._v(\" \"), _vm._c('el-table-column', {\n    attrs: {\n      \"label\": \"PROT\",\n      \"align\": \"center\",\n      \"width\": \"60\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_vm._c('span', [_vm._v(_vm._s(scope.row.properties.CT24_PROT_IN))])]\n      }\n    }])\n  }), _vm._v(\" \"), _vm._c('el-table-column', {\n    attrs: {\n      \"label\": \"DATA DBTI\",\n      \"align\": \"center\",\n      \"width\": \"80\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_vm._c('span', [_vm._v(_vm._s(scope.row.properties.CT24_DATA_AGG.substr(0, 10)))])]\n      }\n    }])\n  }), _vm._v(\" \"), _vm._c('el-table-column', {\n    attrs: {\n      \"label\": \"DATA SEL\",\n      \"align\": \"center\",\n      \"width\": \"80\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_vm._c('span', [_vm._v(_vm._s(scope.row.properties.DATA_SEL.substr(0, 10)))])]\n      }\n    }])\n  }), _vm._v(\" \"), _vm._c('el-table-column', {\n    attrs: {\n      \"label\": \"AREA\",\n      \"align\": \"center\",\n      \"width\": \"50\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_vm._c('span', [_vm._v(_vm._s(scope.row.properties.AREA))])]\n      }\n    }])\n  }), _vm._v(\" \"), _vm._c('el-table-column', {\n    attrs: {\n      \"label\": \"PARZ.\",\n      \"align\": \"center\",\n      \"width\": \"60\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_vm._c('span', [_vm._c('el-checkbox', {\n          directives: [{\n            name: \"show\",\n            rawName: \"v-show\",\n            value: (_vm.editableRow(scope.row.properties.STATO)),\n            expression: \"editableRow(scope.row.properties.STATO)\"\n          }],\n          model: {\n            value: (scope.row.properties.parziale),\n            callback: function($$v) {\n              _vm.$set(scope.row.properties, \"parziale\", $$v)\n            },\n            expression: \"scope.row.properties.parziale\"\n          }\n        })], 1)]\n      }\n    }])\n  }), _vm._v(\" \"), _vm._c('el-table-column', {\n    attrs: {\n      \"width\": \"40\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_vm._c('el-button', {\n          directives: [{\n            name: \"show\",\n            rawName: \"v-show\",\n            value: (_vm.editableRow(scope.row.properties.STATO)),\n            expression: \"editableRow(scope.row.properties.STATO)\"\n          }],\n          attrs: {\n            \"size\": \"mini\",\n            \"type\": \"danger\",\n            \"icon\": \"el-icon-delete\"\n          },\n          on: {\n            \"click\": function($event) {\n              _vm.handleDelete(scope.$index, scope.row)\n            }\n          }\n        })]\n      }\n    }])\n  })], 1)], 1)]), _vm._v(\" \"), _vm._c('el-row', {\n    staticClass: \"row-bg\",\n    attrs: {\n      \"type\": \"flex\",\n      \"justify\": \"left\"\n    }\n  }, [_vm._c('el-button', {\n    ref: \"button\",\n    attrs: {\n      \"id\": \"gv-genio-seleziona-particelle-panel-submit\",\n      \"title\": \"Salva i dati sul DB\",\n      \"type\": \"primary\",\n      \"size\": \"mini\",\n      \"disabled\": _vm.buttonDisabled\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.submit()\n      }\n    }\n  }, [_vm._c('span', [_vm._v(\"Salva su DB\")])]), _vm._v(\" \"), _vm._c('el-button', {\n    staticClass: \"gv-color-scheme\",\n    attrs: {\n      \"id\": \"gv-draw-cancel\",\n      \"title\": \"Ricarica dati salvati sul DB\",\n      \"size\": \"mini\"\n    },\n    on: {\n      \"click\": _vm.refresh\n    }\n  }, [_vm._v(\"Ricarica\")])], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-dae4e7ae!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/GenioSelezionaParticelle.vue\n// module id = 755\n// module chunks = 15"],"sourceRoot":""}