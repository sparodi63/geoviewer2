{"version":3,"sources":["webpack:///static/js/GV.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/index.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/globals.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/util/mountComponent.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/config.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/services/getConfig.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/services/getCatalog.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/util/getParamString.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/util/parseXML.js","webpack:///./src/components/InfoWmsManager.vue","webpack:///App.vue","webpack:///Header.vue","webpack:///InfoWmsManager.vue","webpack:///Legend.vue","webpack:///Map.vue","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/buttons/div.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/buttons/fullscreen.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/buttons/geocoder.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/buttons/locate.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/buttons/scalebar.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/buttons/search.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/buttons/zoom.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/layerFactory.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/leaflet/Map.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/leaflet/MarkerCluster.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/leaflet/NonTiledLayer.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/polyfill/find.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/polyfill/findIndex.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/polyfill/startsWith.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/services/getEnti.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/services/getFeatureHilite.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/services/getFeatureInfo.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/services/getFeatureXSLT.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/services/getGeoJSON.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/util/createElement.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/util/getProtocol.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/util/getTmsMaxLevel.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/util/getUrlParam.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/util/getZoomFromScaleDenom.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/util/interpolateString.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/util/isBrowserIE.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/util/isTouch.js","webpack:///./E:/Tomcat6/webapps/ROOT/geoviewer2/src/util/log.js","webpack:///./~/font-awesome/css/font-awesome.css","webpack:///./~/leaflet/dist/leaflet.css","webpack:///./src/assets/css/base.css","webpack:///./src/assets/css/mapskin/css/mapskin.css","webpack:///./src/components/App.vue","webpack:///./src/components/Header.vue","webpack:///./src/components/Legend.vue","webpack:///./src/components/Map.vue","webpack:///./src/components/Header.vue?b701","webpack:///./src/components/Map.vue?d8b5","webpack:///./src/components/App.vue?ddc1","webpack:///./src/components/InfoWmsManager.vue?e853","webpack:///./src/components/Legend.vue?a0ec","webpack:///./src/buttons ^(.*\\.(js$))[^.]*$/gi"],"names":["webpackJsonp","0","module","exports","__webpack_require__","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","call","default","_interopRequireDefault","_globals","_globals2","_getUrlParam","_getUrlParam2","_log","_log2","_mountComponent","_mountComponent2","_config","config","_vue","_vue2","_App","_App2","polyfill","component","eventBus","initConfig","options","GV","set","init","el","template","mountLegend","elId","clear","containerId","vm","window","globals","log","utils","getUrlParam","Buttons","req","keys","forEach","script","5","defineProperty","value","DEFAULT_PROXY","USE_SUBDOMAINS","RL_MAP_CONFIG_SERVICE","RL_DYN_MAP_CONFIG_SERVICE","RL_CREATE_SLD_SERVICE","RL_CATALOG_SERVICE","RL_CANALI_SERVICE","RL_SCHEDA_SERVICE","RL_ENTI_SERVICE","RL_METADATA_URL","GOOGLE_GEOCODE_PROXY","MAX_BOUNDS","X_MIN","Y_MIN","X_MAX","Y_MAX","LOADING_OPTIONS","target","spinner","background","INFO_WMS_MAX_FEATURES","BASE_SCALES","BASE_SCALE_LABELS","8","9","10","11","12","13","14","15","16","17","18","19","20","BASE_LAYERS","BLANK","label","icon","RL_ORTOFOTO_2013","RL_ORTOFOTO_2016","RL_CARTE_BASE","OSM","ESRI_IMAGERY","ESRI_TOPOGRAPHIC","ESRI_GRAY","ESRI_DARKGRAY","MAPBOX_STREETS","MAPBOX_SATELLITE","MAPBOX_OUTDOOR","MAPBOX_LIGHT","STAMEN_TERRAIN","STAMEN_TONER_LIGHT","GOOGLE_ROADMAP","GOOGLE_HYBRID","GOOGLE_TERRAIN","GOOGLE_SATELLITE","toggleEl","document","getElementById","style","display","_createElement2","$mount","_createElement","28","29","41","44","_this","this","Error","debug","idMap","geoserverUrl","application","layout","proxy","title","baseLayers","layer","name","type","callback","idMaps","split","id","addRlMap","$on","app","maps","mapConfig","addMapConfig","setTitle","event","layers","getAllLayersConfig","setLayerAttribute","map","layerInRange","getMapConfig","ancillaryMaps","minScale","inRange","opacityBase100","opacity","zIndex","_lastZIndex","reverse","unshift","$emit","push","layerName","attribute","getLayerConfig","foundLayer","find","getBaseLayerConfig","getButton","buttonName","button","toolbar","tb","items","item","getButtonOption","optionName","option","setButtonOption","getActiveBaseLayer","activeLayer","visible","setActiveBaseLayer","removeMap","index","findIndex","splice","removeLayer","idLayer","self","layerIndex","length","setBaseLayer","_this2","_getConfig2","then","response","data","success","message","changeBaseLayer","baseLayerSwitcher","activeBaseLayer","catch","error","console","_notification4","duration","offset","loadCatalog","params","_this3","_getCatalog2","catalog","catalogFull","children","_getEnti2","enti","showMapCatalogPanel","undefined","_notification","_base","_notification3","_getConfig","_getCatalog","_getEnti","57","getConfig","arguments","url","startsWith","location","href","_axios2","get","_axios","93","getCatalog","94","getParamString","existingUrl","uppercase","i","encodeURIComponent","toUpperCase","indexOf","join","95","parseXML","xml","_isBrowserIE2","xmlDoc","ActiveXObject","async","loadXML","parser","DOMParser","parseFromString","exception","_isBrowserIE","116","__vue_exports__","__vue_options__","__vue_template__","render","staticRenderFns","160","_promise","_promise2","_isTouch","_getProtocol","_Map","_Map2","_Legend","_Legend2","_Header","_Header2","resolve","e","require","showHeader","header","showTitle","showLegend","legend","created","mounted","addToolbars","loadingInstance","close","methods","getTitle","getMaps","position","addButton","addTo","buttons","vueComponent","mountBtnComponent","callBack","autoClick","setTimeout","click","162","computed","height","$el","innerHTML","html","166","_request","Date","_requestCount","_numRequests","_features","buildWMSOptions","latlng","point","latLngToContainerPoint","getZoom","size","getSize","bounds","getBounds","sw","crs","project","getSouthWest","ne","getNorthEast","request","service","styles","version","format","bbox","x","y","width","query_layers","FEATURE_COUNT","buffer","info_format","j","_getParamString2","layersArray","layerConfig","queryable","wmsParams","wmsUrl","_container","cursor","_getFeatureInfo2","features","_handleResponse","setFeatureProperties","properties","newProperties","getLayerByName","cachePostGIS","upperProperties","props","newProps","setFeatureLabel","attributes","infoLabelAttr","infoIdAttr","getField","getFirstAttribute","fieldName","infoOptions","feature","Array","apply","_showFeatureInfo","buildAndShowHtml","buildGml","baseXml","_parseXML2","layerNode","createElement","featureName","featureNode","text","createTextNode","attrNode","appendChild","documentElement","xslTransform","xslDoc","XSLTProcessor","xsltProcessor","importStylesheet","transformedDoc","transformToDocument","XMLSerializer","serializeToString","transformNode","infoUrl","infoTarget","_getFeatureXSLT2","slice","getElementsByTagName","ar","textContent","result","openPopup","showPanel","configOptions","infoWidth","infoHeight","popup","open","write","focus","substr","_getFeatureHilite2","geometry","clearLayers","addData","fitBounds","maxZoom","_parseXML","_getParamString","_getFeatureInfo","_getFeatureHilite","_getFeatureXSLT","activate","loadLayers","color","fillOpacity","weight","pointToLayer","L","circleMarker","radius","fillColor","fill","deactivate","$off","showFeatureInfo","168","_button","_button3","_button4","_option","_option3","_option4","_select","_select3","_select4","use","show","showAddMap","isDownloadable","metaData","flag_download","checkAddMap","hideLegend","showMapInfoPanel","schedaInfoCartografia","remove","download","link_download","addMap","layerTransparency","iconUrl","getClass","setLayerVisible","checked","currentTarget","showLegendPanel","multiClasse","popUpFlag","popUpUrl","matchMedia","matches","flagGeoserver","classes","cls","legendIcon","legendLabel","src","169","_InfoWmsManager","_InfoWmsManager2","events","clientHeight","registerMapEvents","subscribeConfigEvents","addEventListener","handleResize","mapOptions","$refs","info","getBoundingClientRect","top","eventName","exposedName","on","ev","extent_3857","setExtent","174","div","btnOptions","Button","Control","extend","onAdd","container","className","175","fullscreen","control","176","geocoder","componentId","DomEvent","disableClickPropagation","177","locate","Locate","178","scalebar","179","search","180","zoom","181","buildGeoJson","esParams","geoJson","geomField","hits","totalFeatures","total","coords","_source","_id","coordinates","geometry_name","JSON","parse","create","layerFactory","_assign","_assign2","_leaflet","_leaflet2","_interpolateString","_interpolateString2","_getZoomFromScaleDenom","_getZoomFromScaleDenom2","_getGeoJSON","_getGeoJSON2","_getTmsMaxLevel","_getTmsMaxLevel2","esriLink","tileLayer","attribution","attr","ESRI_STREETS","subdomains","accessToken","minZoom","ext","TMS","tmsParams","replace","tmsUrl","maxLevel","maxScale","TileLayer","setZIndex","WMS","geomType","cacheMinZoomLevel","isCached","transparent","FORMAT_OPTIONS","latLngBounds","latLng","tiled","TILESORIGIN","tileSize","CACHE_VERSION","cacheVersion","wms","pane","nonTiledLayer","wfsParams","tooltip","cluster","clusterLayer","geomSubType","filter","iconSize","iconAnchor","popupAnchor","marker","onEachFeature","bindPopup","setFilter","filters","eachLayer","setOpacity","parameters","typeName","srsName","outputFormat","format_options","field","q","query","pretty","clusterOptions","showCoverageOnHover","markerClusterGroup","addLayer","182","_layerFactory","Map","initialExtent","zoomControl","maxBounds","maxBoundsViscosity","initialize","setInitialExtent","setLoading","loadBaseLayers","loadControls","eventMngr","me","_zoom","extent","extArray","swPoint","nePoint","swLatLng","Projection","SphericalMercator","unproject","neLatLng","getScale","controls","cntrl","scale","imperial","loading","activeLayerName","getScaleLabel","_spinning","off","state","addMarker","markerConfig","opts","setView","zoomLevel","183","MarkerClusterGroup","FeatureGroup","maxClusterRadius","iconCreateFunction","spiderfyOnMaxZoom","zoomToBoundsOnClick","singleMarkerMode","disableClusteringAtZoom","removeOutsideVisibleBounds","animate","animateAddingMarkers","spiderfyDistanceMultiplier","spiderLegPolylineOptions","chunkedLoading","chunkInterval","chunkDelay","chunkProgress","polygonOptions","Util","setOptions","_defaultIconCreateFunction","_featureGroup","featureGroup","addEventParent","_nonPointGroup","_inZoomAnimation","_needsClustering","_needsRemoving","_currentShownBounds","_queue","DomUtil","TRANSITION","_withAnimation","_noAnimation","_markerCluster","MarkerCluster","MarkerClusterNonAnimated","LayerGroup","addLayers","getLatLng","_map","hasLayer","_unspiderfy","_addLayer","_maxZoom","_topClusterLevel","_recalculateBounds","visibleLayer","currentZoom","__parent","contains","_animationAddLayer","_animationAddLayerNonAnimated","removeLayers","_unspiderfyLayer","_removeLayer","_childMarkerMoved","clusterShow","_arraySplice","isArray","m","fg","npg","chunked","l","originalArray","started","getTime","process","bind","start","elapsed","_extractNonGroupLayers","getChildCount","markers","getAllChildMarkers","otherMarker","c","_iconNeedsUpdate","_updateIcon","_recursivelyAddChildrenToMap","needsClustering","layersArray2","l2","_gridClusters","_gridUnclustered","_noanimationUnspiderfy","_generateInitialClusters","LatLngBounds","_bounds","method","context","needsRemoving","getLayers","getLayer","parseInt","stamp","anArray","_group","zoomToShowLayer","showMarker","_icon","once","spiderfy","panTo","moveStart","zoomToBounds","isFinite","getMaxZoom","_maxLat","projection","MAX_LATITUDE","_getExpandedVisibleBounds","_zoomEnd","_moveEnd","_spiderfierOnAdd","_bindEvents","onRemove","_unbindEvents","_mapPane","_spiderfierOnRemove","_hideCoverage","getVisibleParent","vMarker","_removeFromGridUnclustered","z","gridUnclustered","removeObject","_ignoreMove","_latlng","oldLatLng","removeFromDistanceGrid","dontUpdateMap","gridClusters","_markers","_childCount","_boundsNeedUpdate","_cLatLng","addObject","_childClusters","_isOrIsParent","oel","parentNode","fire","propagate","originalEvent","relatedTarget","listens","childCount","DivIcon","Point","_zoomOrSpiderfy","_showCoverage","bottomCluster","keyCode","_shownPolygon","_spiderfied","Polygon","getConvexHull","_mergeSplitClusters","Math","round","newBounds","_recursivelyRemoveChildrenFromMap","radiusFn","DistanceGrid","markerPoint","_overrideMarkerIcon","closest","getNearObject","_addChild","parent","newCluster","lastParent","_enqueue","fn","_queueTimeout","_processQueue","clearTimeout","mapZoom","intersects","_animationStart","_animationZoomIn","_animationZoomOut","Browser","mobile","_checkBoundsMaxLat","pad","_mapBoundsInfinite","maxLat","getNorth","_northEast","lat","Infinity","getSouth","_southWest","_addToMap","group","output","include","LatLng","previousZoomLevel","newZoomLevel","_recursively","startPos","_isSingleParent","clusterHide","_forceLayout","_recursivelyBecomeVisible","n","_recursivelyRestoreChildPositions","_animationEnd","_animationZoomOutSingle","_setPos","latLngToLayerPoint","_recursivelyAnimateChildrenInAndAddSelfToMap","setLatLng","falseFn","body","offsetWidth","Marker","a","b","storageArray","childClusters","boundsZoom","getBoundsZoom","newClusters","concat","setIcon","createIcon","_iconObj","createShadow","new1","isNotificationFromChild","_setClusterCenter","child","_resetBounds","lng","childLatLng","latSum","lngSum","totalCount","_wLatLng","_backupLatlng","_recursivelyAnimateChildrenIn","center","cm","nm","_restorePosition","k","previousBounds","exceptBounds","boundsToApplyTo","zoomLevelToStart","zoomLevelToStop","runAtEveryLevel","runAtBottomLevel","opacityWhenUnclustered","ret","cellSize","_cellSize","_sqCellSize","_grid","_objectPoint","_getCoord","grid","row","cell","updateObject","len","eachObject","removed","dist","objectPoint","closestDistSq","_sqDist","floor","p","p2","dx","dy","QuickHull","getDistant","cpt","bl","vY","vX","findMostDistantPointFromBaseLine","baseLine","latLngs","pt","d","maxD","maxPt","newPoints","maxPoint","buildConvexHull","convexHullBaseLines","t","minLat","maxLng","minLng","maxLatPt","minLatPt","maxLngPt","minLngPt","minPt","ch","childMarkers","points","_2PI","PI","_circleFootSeparation","_circleStartAngle","_spiralFootSeparation","_spiralLengthStart","_spiralLengthFactor","_circleSpiralSwitchover","positions","_generatePointsSpiral","_generatePointsCircle","_animationSpiderfy","unspiderfy","zoomDetails","_animationUnspiderfy","count","centerPt","angle","circumference","legLength","angleStep","res","cos","sin","_round","separation","lengthFactor","_preSpiderfyLatlng","setZIndexOffset","_spiderLeg","leg","newPos","legOptions","layerPointToLatLng","Polyline","legPath","thisLayerLatLng","thisLayerPos","svg","Path","SVG","finalLegOpacity","_path","getTotalLength","strokeDasharray","strokeDashoffset","setStyle","nonAnimatable","_latLngToNewLayerPoint","stillThereChildCount","_unspiderfyWrapper","zoomAnimation","_unspiderfyZoomStart","touch","getRenderer","_unspiderfyZoomAnim","hasClass","refreshClusters","_layers","_flagParentsIconsNeedUpdate","_refreshClustersIcons","_refreshSingleMarkerModeMarkers","refreshIconOptions","directlyRefreshClusters","184","NonTiledLayer","Layer","includes","Evented","pointerEvents","errorImageUrl","_div","getPane","_bufferImage","_initImage","_currentImage","_update","removeChild","getEvents","moveend","_viewreset","_zoomAnimated","zoomanim","_animateZoom","getElement","bringToFront","_pane","bringToBack","insertBefore","firstChild","getAttribution","_image","any3d","addClass","galleryimg","onselectstart","onmousemove","onload","_onImageLoad","onerror","_onImageError","redraw","_animateImage","image","getZoomScale","getNorthWest","setTransform","_resetImage","Bounds","getSouthEast","setPosition","min","_getClippedBounds","wgsBounds","mSouth","mNorth","mWest","getWest","mEast","getEast","lSouth","lNorth","lWest","lEast","world1","world2","visibility","pix1","pix2","getImageUrl","getImageUrlAsync","tag","_onImageDone","removeClass","_addInteraction","tmp","defaultWmsParams","_wmsUrl","_crs","_wmsVersion","parseFloat","projectionKey","code","nw","se","CRS","EPSG4326","setParams","noRedraw","185","predicate","TypeError","list","thisArg","186","o","kValue","187","String","searchString","189","getEnti","190","buildWFSUrl","wsName","baseUrl","idAttr","toLowerCase","getFeatureHilite","191","getFeatureInfo","192","getFeatureXSLT","headers","Accept","xslUrl","ambiente","featureAttributes","193","196","elType","197","getProtocol","198","getTmsMaxLevel","199","paramName","results","RegExp","exec","decodeURIComponent","200","getZoomFromScaleDenom","scaleDenom","201","str","templateRe","202","isBrowserIE","navigator","userAgent","203","isTouch","204","msg","290","295","296","303","304","305","311","312","315","316","318","content","locals","319","320","321","327","329","_scopeId","334","335","343","_vm","$createElement","_c","attrs","_t","344","ref","345","_e","_v","directives","rawName","expression","staticClass","_s","351","352","_l","$event","class","domProps","_i","change","$$a","$$el","$$c","$$v","$$i","$set","355","webpackContext","webpackContextResolve","./div.js","./fullscreen.js","./geocoder.js","./locate.js","./scalebar.js","./search.js","./zoom.js","356"],"mappings":"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","file":"static/js/GV.js","sourcesContent":["webpackJsonp([13,11],{\n\n/***/ 0:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _globals = __webpack_require__(5);\n\t\n\tvar _globals2 = _interopRequireDefault(_globals);\n\t\n\tvar _getUrlParam = __webpack_require__(199);\n\t\n\tvar _getUrlParam2 = _interopRequireDefault(_getUrlParam);\n\t\n\tvar _log = __webpack_require__(204);\n\t\n\tvar _log2 = _interopRequireDefault(_log);\n\t\n\tvar _mountComponent = __webpack_require__(14);\n\t\n\tvar _mountComponent2 = _interopRequireDefault(_mountComponent);\n\t\n\tvar _config = __webpack_require__(44);\n\t\n\tvar config = _interopRequireWildcard(_config);\n\t\n\tvar _vue = __webpack_require__(1);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _App = __webpack_require__(327);\n\t\n\tvar _App2 = _interopRequireDefault(_App);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t__webpack_require__(319);\n\t__webpack_require__(320);\n\t__webpack_require__(321);\n\t__webpack_require__(318);\n\t\n\t__webpack_require__(186);\n\t__webpack_require__(185);\n\t__webpack_require__(187);\n\t__webpack_require__(286).polyfill();\n\t\n\t_vue2.default.component('gv-app', _App2.default);\n\t\n\tvar eventBus = new _vue2.default();\n\t\n\tvar initConfig = function initConfig(options) {\n\t  GV.config = config;\n\t  config.set(options);\n\t};\n\t\n\tvar init = function init(options) {\n\t  initConfig(options);\n\t  return new _vue2.default({\n\t    el: '#gv-container',\n\t    template: '<gv-app></gv-app>'\n\t  });\n\t};\n\t\n\tvar mountLegend = function mountLegend() {\n\t  (0, _mountComponent2.default)({\n\t    elId: 'gv-legend',\n\t    clear: true,\n\t    containerId: GV.config.containerId,\n\t    vm: new _vue2.default({\n\t      template: '<gv-legend ref=\"gv-legend\"></gv-legend>'\n\t    })\n\t  });\n\t};\n\t\n\twindow.GV = {\n\t  initConfig: initConfig,\n\t  init: init,\n\t  globals: _globals2.default,\n\t  log: _log2.default,\n\t  eventBus: eventBus,\n\t  mountLegend: mountLegend,\n\t  utils: {\n\t    getUrlParam: _getUrlParam2.default\n\t  },\n\t  Buttons: []\n\t};\n\t\n\tvar req = __webpack_require__(355);\n\treq.keys().forEach(function (script) {\n\t  req(script);\n\t});\n\n/***/ }),\n\n/***/ 5:\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar globals = {\n\t  DEFAULT_PROXY: '/geoservices/apps/proxy/proxy.jsp?url=',\n\t\n\t  USE_SUBDOMAINS: true,\n\t\n\t  RL_MAP_CONFIG_SERVICE: 'srvcarto.regione.liguria.it/geoservices/REST/geoportale/map/',\n\t  RL_DYN_MAP_CONFIG_SERVICE: '/geoservices/REST/config/map/',\n\t  RL_CREATE_SLD_SERVICE: 'srvcarto.regione.liguria.it/geoservices/REST/config/create_sld/',\n\t  RL_CATALOG_SERVICE: 'srvcarto.regione.liguria.it/geoservices/REST/geoportale/catalogo/',\n\t  RL_CANALI_SERVICE: 'srvcarto.regione.liguria.it/geoservices/REST/config/ag_app_canali_tree/',\n\t  RL_SCHEDA_SERVICE: 'srvcarto.regione.liguria.it/geoservices/REST/geoportale/scheda/',\n\t  RL_ENTI_SERVICE: 'srvcarto.regione.liguria.it/geoservices/REST/geoportale/enti/',\n\t\n\t  RL_METADATA_URL: '/geoservices/REST/metadata/scheda_xml/',\n\t\n\t  GOOGLE_GEOCODE_PROXY: 'geoportale.regione.liguria.it/geoservices/REST/proxy/google_geocode?region=it&language=it&sensor=false&bounds=7.43,43.75|10.00,44.70',\n\t\n\t  MAX_BOUNDS: {\n\t    X_MIN: 43.4,\n\t    Y_MIN: 7.3,\n\t    X_MAX: 44.8,\n\t    Y_MAX: 10.5\n\t  },\n\t\n\t  LOADING_OPTIONS: {\n\t    target: 'gv-map',\n\t    spinner: 'el-icon-loading',\n\t    background: 'rgba(0, 0, 0, 0.7)'\n\t  },\n\t\n\t  INFO_WMS_MAX_FEATURES: 10,\n\t\n\t  BASE_SCALES: [591657550.500000, 295828775.300000, 147914387.600000, 73957193.820000, 36978596.910000, 18489298.450000, 9244649.227000, 4622324.614000, 2311162.307000, 1155581.153000, 577790.576700, 288895.288400, 144447.644200, 72223.822090, 36111.911040, 18055.955520, 9027.977761, 4513.988880, 2256.994440, 1128.497220, 564.24861, 282.124305],\n\t\n\t  BASE_SCALE_LABELS: {\n\t    8: '1:1.600.000',\n\t    9: '1:800.000',\n\t    10: '1:400.000',\n\t    11: '1:200.000',\n\t    12: '1:100.000',\n\t    13: '1:50.000',\n\t    14: '1:25.000',\n\t    15: '1:12.500',\n\t    16: '1:6.250',\n\t    17: '1:3.125',\n\t    18: '1:1.560',\n\t    19: '1:800',\n\t    20: '1:400'\n\t  },\n\t\n\t  BASE_LAYERS: {\n\t    'BLANK': {\n\t      label: 'Sfondo Bianco',\n\t      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/bianco.gif'\n\t    },\n\t    'RL_ORTOFOTO_2013': {\n\t      label: 'AGEA: Ortofoto 2013',\n\t      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/sfondi_rl.jpg'\n\t    },\n\t    'RL_ORTOFOTO_2016': {\n\t      label: 'AGEA: Ortofoto 2016',\n\t      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/sfondi_rl.jpg'\n\t    },\n\t    'RL_CARTE_BASE': {\n\t      label: 'Carte di base regionali',\n\t      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/sfondi_rl.jpg'\n\t    },\n\t    'OSM': {\n\t      label: 'OpenStreetMap',\n\t      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/openstreetmap.png'\n\t    },\n\t    'ESRI_IMAGERY': {\n\t      label: 'ESRI Imagery',\n\t      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/esri.gif'\n\t    },\n\t    'ESRI_TOPOGRAPHIC': {\n\t      label: 'ESRI Topographic',\n\t      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/esri.gif'\n\t    },\n\t    'ESRI_GRAY': {\n\t      label: 'ESRI Gray',\n\t      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/esri.gif'\n\t    },\n\t    'ESRI_DARKGRAY': {\n\t      label: 'ESRI Dark Gray',\n\t      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/esri.gif'\n\t    },\n\t    'MAPBOX_STREETS': {\n\t      label: 'Mapbox Streets',\n\t      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/mapbox.png'\n\t    },\n\t    'MAPBOX_SATELLITE': {\n\t      label: 'Mapbox Satellite',\n\t      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/mapbox.png'\n\t    },\n\t    'MAPBOX_OUTDOOR': {\n\t      label: 'Mapbox Outdoor',\n\t      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/mapbox.png'\n\t    },\n\t    'MAPBOX_LIGHT': {\n\t      label: 'Mapbox Light',\n\t      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/mapbox.png'\n\t    },\n\t    'STAMEN_TERRAIN': {\n\t      label: 'Stamen Terrain',\n\t      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/mapbox.png'\n\t    },\n\t    'STAMEN_TONER_LIGHT': {\n\t      label: 'Stamen Toner Light',\n\t      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/mapbox.png'\n\t    },\n\t    'GOOGLE_ROADMAP': {\n\t      label: 'Google Stradario',\n\t      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/google.png'\n\t    },\n\t    'GOOGLE_HYBRID': {\n\t      label: 'Google Ibrido',\n\t      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/google.png'\n\t    },\n\t    'GOOGLE_TERRAIN': {\n\t      label: 'Google Terreno',\n\t      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/google.png'\n\t    },\n\t    'GOOGLE_SATELLITE': {\n\t      label: 'Google Satellite',\n\t      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/google.png'\n\t    }\n\t  }\n\t\n\t};\n\t\n\texports.default = globals;\n\n/***/ }),\n\n/***/ 12:\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 14:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (options) {\n\t  'use strict';\n\t\n\t  var elId = options.elId,\n\t      vm = options.vm,\n\t      toggleEl = options.toggleEl;\n\t\n\t\n\t  var el = document.getElementById(elId);\n\t\n\t  if (toggleEl && el) {\n\t    el.style.display = el.style.display === 'none' || !el.style.display ? 'block' : 'none';\n\t  } else {\n\t    var _el = (0, _createElement2.default)(options);\n\t    vm.$mount(_el);\n\t  }\n\t\n\t  return vm;\n\t};\n\t\n\tvar _createElement = __webpack_require__(196);\n\t\n\tvar _createElement2 = _interopRequireDefault(_createElement);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n\n/***/ 28:\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 29:\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 41:\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 44:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.containerId = exports.setActiveBaseLayer = exports.setLayerAttribute = exports.setButtonOption = exports.getButtonOption = exports.getButton = exports.removeLayer = exports.removeMap = exports.loadCatalog = exports.getMapConfig = exports.getActiveBaseLayer = exports.getBaseLayerConfig = exports.getLayerConfig = exports.getAllLayersConfig = exports.addRlMap = exports.addMapConfig = exports.set = exports.geoserverUrl = exports.title = exports.maps = exports.baseLayers = exports.application = exports.idMap = exports.debug = undefined;\n\t\n\tvar _notification = __webpack_require__(290);\n\t\n\tvar _notification2 = _interopRequireDefault(_notification);\n\t\n\tvar _base = __webpack_require__(12);\n\t\n\tvar _base2 = _interopRequireDefault(_base);\n\t\n\tvar _notification3 = __webpack_require__(273);\n\t\n\tvar _notification4 = _interopRequireDefault(_notification3);\n\t\n\tvar _vue = __webpack_require__(1);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _globals = __webpack_require__(5);\n\t\n\tvar _globals2 = _interopRequireDefault(_globals);\n\t\n\tvar _getConfig = __webpack_require__(57);\n\t\n\tvar _getConfig2 = _interopRequireDefault(_getConfig);\n\t\n\tvar _getCatalog = __webpack_require__(93);\n\t\n\tvar _getCatalog2 = _interopRequireDefault(_getCatalog);\n\t\n\tvar _getEnti = __webpack_require__(189);\n\t\n\tvar _getEnti2 = _interopRequireDefault(_getEnti);\n\t\n\tvar _mountComponent = __webpack_require__(14);\n\t\n\tvar _mountComponent2 = _interopRequireDefault(_mountComponent);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar _lastZIndex = 21;\n\tvar debug = false;\n\tvar containerId = 'gv-container';\n\tvar idMap = null;\n\tvar title = null;\n\tvar geoserverUrl = void 0;\n\tvar application = {};\n\tvar baseLayers = [{ type: 'ESRI_IMAGERY', visible: true }];\n\tvar maps = [];\n\t\n\tfunction set(options) {\n\t    var _this = this;\n\t\n\t    if (!options) {\n\t        throw new Error('Opzioni di inizializzazione non impostate!');\n\t    }\n\t\n\t    exports.debug = debug = options.debug;\n\t    exports.idMap = idMap = options.idMap;\n\t    exports.geoserverUrl = geoserverUrl = options.geoserverUrl;\n\t    if (options.application) {\n\t        exports.application = application = options.application;\n\t    }\n\t    if (options.containerId) {\n\t        exports.containerId = containerId = options.containerId;\n\t    }\n\t\n\t    application.layout = options.application && options.application.layout ? options.application.layout : {};\n\t\n\t    if (options.application) {\n\t        application.proxy = options.application.proxy || _globals2.default.DEFAULT_PROXY;\n\t    }\n\t    if (options.application && options.application.layout && options.application.layout.title) {\n\t        exports.title = title = options.application.layout.title;\n\t    }\n\t\n\t    exports.baseLayers = baseLayers = options.baseLayers;\n\t    baseLayers.forEach(function (layer) {\n\t        layer.name = layer.type;\n\t        layer.label = _globals2.default.BASE_LAYERS[layer.type].label;\n\t        layer.icon = _globals2.default.BASE_LAYERS[layer.type].icon;\n\t    });\n\t\n\t    if (options.idMap) {\n\t        (function () {\n\t            var callback = options.application ? options.application.callback : null;\n\t            var idMaps = options.idMap.split(',');\n\t            idMaps.forEach(function (id) {\n\t                return addRlMap(id, callback, true);\n\t            });\n\t        })();\n\t    } else {\n\t        GV.eventBus.$on('gv-app-mounted', function (app) {\n\t            options.maps.forEach(function (mapConfig) {\n\t                _this.addMapConfig(mapConfig);\n\t                GV.app.setTitle(mapConfig);\n\t            });\n\t            if (application && application.callback) {\n\t                application.callback(app);\n\t            }\n\t        });\n\t    }\n\t\n\t    GV.eventBus.$on('map-zoom', function (event) {\n\t        var layers = _this.getAllLayersConfig();\n\t        layers.forEach(function (layer) {\n\t            _this.setLayerAttribute(layer.name, 'inRange', GV.app.map.layerInRange(layer));\n\t        });\n\t    });\n\t}\n\t\n\tfunction addMapConfig(mapConfig) {\n\t    if (getMapConfig(mapConfig.id)) {\n\t        return;\n\t    }\n\t\n\t    if (mapConfig.ancillaryMaps) {\n\t        mapConfig.ancillaryMaps.forEach(function (map) {\n\t            return addMapConfig(map);\n\t        });\n\t    }\n\t\n\t    mapConfig.layers.forEach(function (layer) {\n\t        layer.minScale = layer.minScale === 0 ? 591657550 : layer.minScale;\n\t        layer.inRange = GV.app && GV.app.map ? GV.app.map.layerInRange(layer) : true;\n\t        layer.opacityBase100 = layer.opacity * 100;\n\t        layer.zIndex = _lastZIndex++;\n\t    });\n\t    mapConfig.layers.reverse();\n\t    maps.unshift(mapConfig);\n\t    GV.eventBus.$emit('config-add-map', {\n\t        config: mapConfig\n\t    });\n\t}\n\t\n\tfunction getAllLayersConfig() {\n\t    var layers = [];\n\t    maps.forEach(function (map) {\n\t        map.layers.forEach(function (layer) {\n\t            layers.push(layer);\n\t        });\n\t    });\n\t    return layers;\n\t}\n\t\n\tfunction setLayerAttribute(layerName, attribute, value) {\n\t    maps.forEach(function (map) {\n\t        var layers = map.layers;\n\t        layers.forEach(function (layer) {\n\t            if (layer.name === layerName) {\n\t                layer[attribute] = value;\n\t            }\n\t        });\n\t    });\n\t}\n\t\n\tfunction getLayerConfig(layerName) {\n\t    var foundLayer = null;\n\t    maps.forEach(function (map) {\n\t        var layers = map.layers;\n\t        foundLayer = layers.find(function (layer) {\n\t            return layer.name === layerName;\n\t        });\n\t    });\n\t    if (foundLayer) {\n\t        return foundLayer;\n\t    }\n\t}\n\t\n\tfunction getBaseLayerConfig(layerName) {\n\t    var foundLayer = baseLayers.find(function (layer) {\n\t        return layer.name === layerName;\n\t    });\n\t    return foundLayer;\n\t}\n\t\n\tfunction getMapConfig(idMap) {\n\t    return maps.find(function (map) {\n\t        return map.id == idMap;\n\t    });\n\t}\n\t\n\tfunction getButton(buttonName) {\n\t    var button = null;\n\t    if (!application.layout || !application.layout.toolbar) {\n\t        return null;\n\t    }\n\t    application.layout.toolbar.forEach(function (tb) {\n\t        tb.items.forEach(function (item) {\n\t            if (item.name === buttonName) {\n\t                button = item;\n\t            }\n\t        }, this);\n\t    }, this);\n\t    return button;\n\t}\n\t\n\tfunction getButtonOption(buttonName, optionName) {\n\t    var option = null;\n\t    if (!application.layout || !application.layout.toolbar) {\n\t        return null;\n\t    }\n\t    application.layout.toolbar.forEach(function (tb) {\n\t        tb.items.forEach(function (item) {\n\t            if (item.name === buttonName) {\n\t                option = item.options[optionName];\n\t            }\n\t        }, this);\n\t    }, this);\n\t    return option;\n\t}\n\t\n\tfunction setButtonOption(buttonName, optionName, value) {\n\t    var option = null;\n\t    if (!application.layout || !application.layout.toolbar) {\n\t        return null;\n\t    }\n\t    application.layout.toolbar.forEach(function (tb) {\n\t        tb.items.forEach(function (item) {\n\t            if (item.name === buttonName) {\n\t                item.options[optionName] = value;\n\t            }\n\t        }, this);\n\t    }, this);\n\t    return option;\n\t}\n\t\n\tfunction getActiveBaseLayer() {\n\t    var activeLayer = null;\n\t    baseLayers.forEach(function (layer) {\n\t        if (layer.visible) {\n\t            activeLayer = layer;\n\t        }\n\t    });\n\t    return activeLayer;\n\t}\n\t\n\tfunction setActiveBaseLayer(layerName) {\n\t    baseLayers.forEach(function (layer) {\n\t        layer.visible = layer.name === layerName;\n\t    });\n\t}\n\t\n\tfunction removeMap(idMap) {\n\t    var mapConfig = getMapConfig(idMap);\n\t    GV.eventBus.$emit('config-remove-map', {\n\t        config: mapConfig\n\t    });\n\t\n\t    var index = maps.findIndex(function (map) {\n\t        return map.id === idMap;\n\t    });\n\t    if (index > -1) {\n\t        maps.splice(index, 1);\n\t    }\n\t}\n\t\n\tfunction removeLayer(idLayer) {\n\t    var self = this;\n\t    maps.forEach(function (map) {\n\t        var layerIndex = -1;\n\t        map.layers.forEach(function (layer, index) {\n\t            if (layer.name === idLayer) {\n\t                layerIndex = index;\n\t            }\n\t        });\n\t        if (layerIndex > -1) {\n\t            map.layers.splice(layerIndex, 1);\n\t        }\n\t        if (map.layers.length === 0) {\n\t            self.removeMap(map.id);\n\t        }\n\t    });\n\t\n\t    GV.eventBus.$emit('config-remove-layer', {\n\t        config: idLayer\n\t    });\n\t}\n\t\n\tfunction addRlMap(idMap, callback, setBaseLayer) {\n\t    var _this2 = this;\n\t\n\t    if (getMapConfig(idMap)) {\n\t        return getMapConfig(idMap);\n\t    }\n\t\n\t    (0, _getConfig2.default)(idMap).then(function (response) {\n\t        if (!response.data.success) {\n\t            throw new Error('Errore Caricamento Mappa: ' + response.data.message);\n\t        }\n\t        if (!response.data.data) {\n\t            throw new Error('Errore Caricamento Mappa: configurazione non trovata');\n\t        }\n\t\n\t        var mapConfig = response.data.data;\n\t\n\t        addMapConfig(mapConfig);\n\t        if (GV.app && GV.app.setTitle) {\n\t            GV.app.setTitle(mapConfig);\n\t        }\n\t        if (GV.app && GV.app.map && mapConfig.type && mapConfig.type == 'R' && setBaseLayer && getBaseLayerConfig('BLANK')) {\n\t            GV.app.map.changeBaseLayer('BLANK');\n\t            GV.baseLayerSwitcher.activeBaseLayer = 'BLANK';\n\t        }\n\t\n\t        if (mapConfig.activeBaseLayer) {\n\t            GV.app.map.changeBaseLayer(mapConfig.activeBaseLayer);\n\t            GV.baseLayerSwitcher.activeBaseLayer = mapConfig.activeBaseLayer;\n\t        }\n\t\n\t        if (callback) {\n\t            callback(_this2);\n\t        }\n\t        return mapConfig;\n\t    }).catch(function (error) {\n\t        console.error(error);\n\t        _notification4.default.error({\n\t            title: 'Attenzione',\n\t            type: 'error',\n\t            duration: 5000,\n\t            offset: 70,\n\t            message: error.message\n\t        });\n\t    });\n\t}\n\t\n\tfunction loadCatalog(params) {\n\t    var _this3 = this;\n\t\n\t    (0, _getCatalog2.default)().then(function (data) {\n\t        _this3.catalog = _this3.catalogFull = data.children;\n\t        (0, _getEnti2.default)().then(function (data) {\n\t            _this3.enti = data;\n\t            if (params.showMapCatalogPanel) {\n\t                (0, _mountComponent2.default)({\n\t                    elId: 'gv-map-catalog-panel',\n\t                    toggleEl: false,\n\t                    vm: new _vue2.default({\n\t                        template: '<gv-map-catalog-panel></gv-map-catalog-panel>'\n\t                    })\n\t                });\n\t            }\n\t        });\n\t    });\n\t}\n\t\n\texports.debug = debug;\n\texports.idMap = idMap;\n\texports.application = application;\n\texports.baseLayers = baseLayers;\n\texports.maps = maps;\n\texports.title = title;\n\texports.geoserverUrl = geoserverUrl;\n\texports.set = set;\n\texports.addMapConfig = addMapConfig;\n\texports.addRlMap = addRlMap;\n\texports.getAllLayersConfig = getAllLayersConfig;\n\texports.getLayerConfig = getLayerConfig;\n\texports.getBaseLayerConfig = getBaseLayerConfig;\n\texports.getActiveBaseLayer = getActiveBaseLayer;\n\texports.getMapConfig = getMapConfig;\n\texports.loadCatalog = loadCatalog;\n\texports.removeMap = removeMap;\n\texports.removeLayer = removeLayer;\n\texports.getButton = getButton;\n\texports.getButtonOption = getButtonOption;\n\texports.setButtonOption = setButtonOption;\n\texports.setLayerAttribute = setLayerAttribute;\n\texports.setActiveBaseLayer = setActiveBaseLayer;\n\texports.containerId = containerId;\n\n/***/ }),\n\n/***/ 57:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = getConfig;\n\t\n\tvar _axios = __webpack_require__(13);\n\t\n\tvar _axios2 = _interopRequireDefault(_axios);\n\t\n\tvar _globals = __webpack_require__(5);\n\t\n\tvar _globals2 = _interopRequireDefault(_globals);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction getConfig(idMap) {\n\t  var app = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'generico';\n\t\n\t  if (!idMap || idMap === 'null') {\n\t    throw new Error('Parametro idMap mancante');\n\t  }\n\t\n\t  var url = idMap.startsWith('D') ? '' + _globals2.default.RL_DYN_MAP_CONFIG_SERVICE + idMap + '?app=' + app : window.location.href.split(':')[0] + '://' + _globals2.default.RL_MAP_CONFIG_SERVICE + idMap + '?app=' + app;\n\t\n\t  var params = {};\n\t\n\t  if (GV.config.geoserverUrl) {\n\t    params.geoserverUrl = GV.config.geoserverUrl;\n\t  }\n\t\n\t  return _axios2.default.get(url, {\n\t    params: params\n\t  });\n\t}\n\n/***/ }),\n\n/***/ 93:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = getCatalog;\n\t\n\tvar _axios = __webpack_require__(13);\n\t\n\tvar _axios2 = _interopRequireDefault(_axios);\n\t\n\tvar _globals = __webpack_require__(5);\n\t\n\tvar _globals2 = _interopRequireDefault(_globals);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction getCatalog() {\n\t  var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t  var url = window.location.href.split(':')[0] + '://' + _globals2.default.RL_CATALOG_SERVICE;\n\t  if (params.idMap) {\n\t    url += params.idMap;\n\t  }\n\t\n\t  return _axios2.default.get(url, {\n\t    params: params\n\t  }).then(function (response) {\n\t    return response.data.data;\n\t  });\n\t}\n\n/***/ }),\n\n/***/ 94:\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = getParamString;\n\tfunction getParamString(obj, existingUrl, uppercase) {\n\t  var params = [];\n\t  for (var i in obj) {\n\t    params.push(encodeURIComponent(uppercase ? i.toUpperCase() : i) + '=' + encodeURIComponent(obj[i]));\n\t  }\n\t  return (!existingUrl || existingUrl.indexOf('?') === -1 ? '?' : '&') + params.join('&');\n\t}\n\n/***/ }),\n\n/***/ 95:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = parseXML;\n\t\n\tvar _isBrowserIE = __webpack_require__(202);\n\t\n\tvar _isBrowserIE2 = _interopRequireDefault(_isBrowserIE);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction parseXML(data) {\n\t  try {\n\t    var xml = null;\n\t    if ((0, _isBrowserIE2.default)()) {\n\t      var xmlDoc = new ActiveXObject('Microsoft.XMLDOM');\n\t      xmlDoc.async = 'false';\n\t      xmlDoc.loadXML(data);\n\t      xml = xmlDoc;\n\t    } else {\n\t      var parser = new DOMParser();\n\t      xml = parser.parseFromString(data, 'text/xml');\n\t    }\n\t    return xml;\n\t  } catch (exception) {\n\t    console.error(exception);\n\t  }\n\t}\n\n/***/ }),\n\n/***/ 116:\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __vue_exports__, __vue_options__\n\tvar __vue_styles__ = {}\n\t\n\t/* styles */\n\t__webpack_require__(311)\n\t\n\t/* script */\n\t__vue_exports__ = __webpack_require__(166)\n\t\n\t/* template */\n\tvar __vue_template__ = __webpack_require__(351)\n\t__vue_options__ = __vue_exports__ = __vue_exports__ || {}\n\tif (\n\t  typeof __vue_exports__.default === \"object\" ||\n\t  typeof __vue_exports__.default === \"function\"\n\t) {\n\t__vue_options__ = __vue_exports__ = __vue_exports__.default\n\t}\n\tif (typeof __vue_options__ === \"function\") {\n\t  __vue_options__ = __vue_options__.options\n\t}\n\t\n\t__vue_options__.render = __vue_template__.render\n\t__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\t\n\tmodule.exports = __vue_exports__\n\n\n/***/ }),\n\n/***/ 160:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _promise = __webpack_require__(7);\n\t\n\tvar _promise2 = _interopRequireDefault(_promise);\n\t\n\tvar _globals = __webpack_require__(5);\n\t\n\tvar _globals2 = _interopRequireDefault(_globals);\n\t\n\tvar _isTouch = __webpack_require__(203);\n\t\n\tvar _isTouch2 = _interopRequireDefault(_isTouch);\n\t\n\tvar _getProtocol = __webpack_require__(197);\n\t\n\tvar _getProtocol2 = _interopRequireDefault(_getProtocol);\n\t\n\tvar _mountComponent = __webpack_require__(14);\n\t\n\tvar _mountComponent2 = _interopRequireDefault(_mountComponent);\n\t\n\tvar _vue = __webpack_require__(1);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _Map = __webpack_require__(335);\n\t\n\tvar _Map2 = _interopRequireDefault(_Map);\n\t\n\tvar _Legend = __webpack_require__(334);\n\t\n\tvar _Legend2 = _interopRequireDefault(_Legend);\n\t\n\tvar _Header = __webpack_require__(329);\n\t\n\tvar _Header2 = _interopRequireDefault(_Header);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_vue2.default.component('gv-map', _Map2.default);\n\t\n\t_vue2.default.component('gv-legend', _Legend2.default);\n\t\n\t_vue2.default.component('gv-header', _Header2.default);\n\t\n\t_vue2.default.component('gv-iframe-panel', function () {\n\t  return new _promise2.default(function (resolve) {\n\t    __webpack_require__.e/* nsure */(8, function (require) {\n\t      resolve(__webpack_require__(330));\n\t    });\n\t  });\n\t});\n\t_vue2.default.component('gv-info-wms-list', function () {\n\t  return new _promise2.default(function (resolve) {\n\t    __webpack_require__.e/* nsure */(6, function (require) {\n\t      resolve(__webpack_require__(332));\n\t    });\n\t  });\n\t});\n\t_vue2.default.component('gv-info-wms-html', function () {\n\t  return new _promise2.default(function (resolve) {\n\t    __webpack_require__.e/* nsure */(7, function (require) {\n\t      resolve(__webpack_require__(331));\n\t    });\n\t  });\n\t});\n\t\n\texports.default = {\n\t  name: 'gv-app',\n\t  data: function data() {\n\t    return {\n\t      showHeader: GV.config.application.layout.header,\n\t      showTitle: GV.config.application.layout.title,\n\t      showLegend: GV.config.application.layout.legend\n\t    };\n\t  },\n\t  created: function created() {\n\t    GV.log('gv-app: created');\n\t\n\t    GV.app = this;\n\t  },\n\t  mounted: function mounted() {\n\t    GV.log('gv-app: mounted');\n\t\n\t    this.addToolbars(GV.config.application.layout.toolbar);\n\t\n\t    GV.eventBus.$emit('gv-app-mounted', this);\n\t\n\t    if (GV.loadingInstance) {\n\t      GV.loadingInstance.close();\n\t    }\n\t  },\n\t\n\t  methods: {\n\t    getTitle: function getTitle() {\n\t      return GV.config.title;\n\t    },\n\t    getMaps: function getMaps() {\n\t      return GV.config.maps;\n\t    },\n\t    addToolbars: function addToolbars() {\n\t      var _this = this;\n\t\n\t      if (GV.config.application.layout.toolbar) {\n\t        var toolbar = GV.config.application.layout.toolbar;\n\t        toolbar.forEach(function (tb) {\n\t          var position = tb.position || 'topleft';\n\t          tb.items.forEach(function (item) {\n\t            item.options = item.options || {};\n\t            item.options.position = item.options.position || position;\n\t            _this.addButton(item);\n\t          });\n\t        });\n\t      }\n\t    },\n\t    addButton: function addButton(item) {\n\t      if (GV.Buttons[item.name]) {\n\t        var button = GV.Buttons[item.name](item.options, GV.app.map);\n\t        if (button) {\n\t          button.name = item.name;\n\t          button.addTo(GV.app.map);\n\t          GV.app.map.buttons.push(button);\n\t          if (button.options.vueComponent) {\n\t            this.mountBtnComponent(button.options.vueComponent);\n\t          }\n\t          if (button.options.callBack) {\n\t            button.options.callBack(button);\n\t          }\n\t          if (button.options.autoClick) {\n\t            setTimeout(function () {\n\t              button.button.click();\n\t            }, 1);\n\t          }\n\t        }\n\t      } else {\n\t        throw new Error('Bottone ' + item.name + ' non esistente');\n\t      }\n\t    },\n\t    mountBtnComponent: function mountBtnComponent(options) {\n\t      (0, _mountComponent2.default)({\n\t        containerId: options.containerId,\n\t        elId: options.id,\n\t        vm: new _vue2.default({\n\t          template: '<' + options.id + '></' + options.id + '>'\n\t        }),\n\t        toggleEl: false\n\t      });\n\t    },\n\t    setTitle: function setTitle(mapConfig) {\n\t      if (GV.config.application.layout.title === '{map.title}') {\n\t        GV.config.title = mapConfig.name;\n\t      }\n\t    }\n\t  }\n\t};\n\n/***/ }),\n\n/***/ 162:\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = {\n\t  name: 'gv-header',\n\t  computed: {\n\t    style: function style() {\n\t      return 'height:' + GV.config.application.layout.header.height;\n\t    }\n\t  },\n\t  mounted: function mounted() {\n\t    this.$el.innerHTML = GV.config.application.layout.header.html;\n\t  }\n\t};\n\n/***/ }),\n\n/***/ 166:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _globals = __webpack_require__(5);\n\t\n\tvar _globals2 = _interopRequireDefault(_globals);\n\t\n\tvar _vue = __webpack_require__(1);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _mountComponent = __webpack_require__(14);\n\t\n\tvar _mountComponent2 = _interopRequireDefault(_mountComponent);\n\t\n\tvar _parseXML = __webpack_require__(95);\n\t\n\tvar _parseXML2 = _interopRequireDefault(_parseXML);\n\t\n\tvar _getParamString = __webpack_require__(94);\n\t\n\tvar _getParamString2 = _interopRequireDefault(_getParamString);\n\t\n\tvar _getFeatureInfo = __webpack_require__(191);\n\t\n\tvar _getFeatureInfo2 = _interopRequireDefault(_getFeatureInfo);\n\t\n\tvar _getFeatureHilite = __webpack_require__(190);\n\t\n\tvar _getFeatureHilite2 = _interopRequireDefault(_getFeatureHilite);\n\t\n\tvar _getFeatureXSLT = __webpack_require__(192);\n\t\n\tvar _getFeatureXSLT2 = _interopRequireDefault(_getFeatureXSLT);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar _requestCount = 0;\n\tvar _numRequests = 0;\n\tvar _features = [];\n\t\n\tfunction _request(e) {\n\t  GV.log('start info request: ' + new Date());\n\t\n\t  _requestCount = 0;\n\t  _numRequests = 0;\n\t  _features = [];\n\t\n\t  var buildWMSOptions = function buildWMSOptions(url, layers, latlng) {\n\t    var point = GV.app.map.latLngToContainerPoint(latlng, GV.app.map.getZoom());\n\t    var size = GV.app.map.getSize();\n\t    var bounds = GV.app.map.getBounds();\n\t    var sw = GV.app.map.options.crs.project(bounds.getSouthWest());\n\t    var ne = GV.app.map.options.crs.project(bounds.getNorthEast());\n\t    var params = {\n\t      request: 'GetFeatureInfo',\n\t      service: 'WMS',\n\t      crs: 'EPSG:3857',\n\t      styles: '',\n\t      version: '1.3.0',\n\t      format: 'application/json',\n\t      bbox: sw.x + ',' + sw.y + ',' + ne.x + ',' + ne.y,\n\t      height: size.y,\n\t      width: size.x,\n\t      layers: layers,\n\t      query_layers: layers,\n\t      FEATURE_COUNT: 100,\n\t      buffer: 10,\n\t      info_format: 'application/json',\n\t      i: point.x,\n\t      j: point.y\n\t    };\n\t\n\t    return url + (0, _getParamString2.default)(params, url, true);\n\t  };\n\t\n\t  GV.config.maps.forEach(function (mapConfig) {\n\t    var url = null;\n\t    var layersArray = [];\n\t\n\t    mapConfig.layers.forEach(function (layerConfig) {\n\t      if (layerConfig.idMap === mapConfig.id && layerConfig.type === 'WMS' && layerConfig.queryable && layerConfig.visible && GV.app.map.layerInRange(layerConfig)) {\n\t        url = layerConfig.wmsParams.url;\n\t        url = _globals2.default.DEFAULT_PROXY + url;\n\t        layersArray.push(layerConfig.wmsParams.name);\n\t      }\n\t    });\n\t\n\t    if (url && layersArray.length > 0) {\n\t      var layers = layersArray.join(',');\n\t      var wmsUrl = buildWMSOptions(url, layers, e.latlng);\n\t      _numRequests++;\n\t      GV.app.map._container.style.cursor = 'progress';\n\t      (0, _getFeatureInfo2.default)(wmsUrl).then(function (features) {\n\t        return _handleResponse(features);\n\t      }).catch(function (error) {\n\t        return console.error(error);\n\t      });\n\t    } else {}\n\t  });\n\t}\n\t\n\tfunction _handleResponse(features) {\n\t  _requestCount++;\n\t  features.forEach(function (feature) {\n\t    var layerName = feature.id.split('.')[0];\n\t    feature.layerName = layerName;\n\t    feature.layer = GV.app.map.getLayerByName(layerName);\n\t\n\t    feature.properties = setFeatureProperties(layerName, feature.properties);\n\t    feature.label = setFeatureLabel(layerName, feature.properties);\n\t    feature.infoOptions = feature.layer.config.infoOptions;\n\t  });\n\t  Array.prototype.push.apply(_features, features);\n\t  if (_requestCount === _numRequests) {\n\t    GV.app.map._container.style.cursor = 'default';\n\t\n\t    if (_features.length === 0) {\n\t      GV.log('Nessun elemento trovato');\n\t      return;\n\t    }\n\t\n\t    if (_features.length === 1) {\n\t      _showFeatureInfo(_features[0]);\n\t    } else {\n\t      (0, _mountComponent2.default)({\n\t        elId: 'gv-info-wms-list',\n\t        clear: true,\n\t        vm: new _vue2.default({\n\t          template: '<gv-info-wms-list :items=\"items\"></gv-info-wms-list>',\n\t          data: {\n\t            items: _features\n\t          }\n\t        })\n\t      });\n\t    }\n\t\n\t    GV.log('end info request: ' + new Date());\n\t  }\n\t\n\t  function setFeatureProperties(layerName, properties) {\n\t    var layerConfig = GV.app.map.getLayerByName(layerName).config;\n\t    var newProperties;\n\t    if (layerConfig.cachePostGIS) {\n\t      newProperties = upperProperties(properties);\n\t    } else {\n\t      newProperties = properties;\n\t    }\n\t    return newProperties;\n\t  }\n\t\n\t  function upperProperties(props) {\n\t    var newProps = {};\n\t    for (var key in props) {\n\t      if (props.hasOwnProperty(key)) {\n\t        newProps[key.toUpperCase()] = props[key];\n\t      }\n\t    }\n\t    return newProps;\n\t  }\n\t\n\t  function setFeatureLabel(layerName, attributes) {\n\t    var infoLabelAttr, infoIdAttr;\n\t    infoLabelAttr = getField(layerName, 'infoLabelAttr');\n\t    infoIdAttr = getField(layerName, 'infoIdAttr');\n\t    if (infoLabelAttr && attributes[infoLabelAttr]) {\n\t      return attributes[infoLabelAttr];\n\t    }\n\t    if (infoIdAttr && attributes[infoIdAttr]) {\n\t      return attributes[infoIdAttr];\n\t    }\n\t    return attributes[getFirstAttribute(attributes)];\n\t  }\n\t\n\t  function getField(layerName, fieldName) {\n\t    var layerConfig = GV.app.map.getLayerByName(layerName).config;\n\t    return layerConfig && layerConfig.infoOptions && layerConfig.infoOptions[fieldName] ? layerConfig.infoOptions[fieldName] : null;\n\t  }\n\t\n\t  function getFirstAttribute(attributes) {\n\t    for (var i in attributes) {\n\t      if (attributes.hasOwnProperty(i) && typeof i !== 'function') {\n\t        return i;\n\t      }\n\t    }\n\t    return null;\n\t  }\n\t}\n\t\n\tfunction _showFeatureInfo(feature) {\n\t  var infoOptions = feature.infoOptions;\n\t  var infoUrl = infoOptions.infoUrl;\n\t\n\t  if (infoUrl.substr(infoUrl.length - 4) === '.xsl' || infoUrl.substr(infoUrl.length - 5) === '.xslt') {\n\t    buildAndShowHtml(infoOptions, feature);\n\t  } else {\n\t    if (!infoOptions.infoTarget || infoOptions.infoTarget === 'panel') {\n\t      showPanel(infoUrl, null, infoOptions);\n\t    } else {\n\t      openPopup(infoUrl, null, infoOptions);\n\t    }\n\t  }\n\t\n\t  function buildAndShowHtml(infoOptions, data) {\n\t    var xmlDoc = buildGml(data);\n\t    var infoUrl = infoOptions.infoUrl,\n\t        infoTarget = infoOptions.infoTarget;\n\t\n\t\n\t    (0, _getFeatureXSLT2.default)(infoUrl, data).then(function (xslDoc) {\n\t      Array.prototype.slice.call(xslDoc.getElementsByTagName('td')).forEach(function (value, index, ar) {\n\t        if (value.id === 'Titolo') {\n\t          value.textContent = data.layer.legend.label;\n\t          value.text = data.layer.legend.label;\n\t        }\n\t      });\n\t\n\t      var result = xslTransform(xmlDoc, xslDoc);\n\t\n\t      if (!infoTarget || infoTarget === 'panel') {\n\t        showPanel(result, null, infoOptions);\n\t      } else {\n\t        openPopup(result, null, infoOptions);\n\t      }\n\t    });\n\t\n\t    function buildGml(feature) {\n\t      try {\n\t        var baseXml = '<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?><msGMLOutput xmlns:gml=\"http://www.opengis.net/gml\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"></msGMLOutput>';\n\t        var xmlDoc = (0, _parseXML2.default)(baseXml);\n\t        var layerName = feature.layerName + '_layer';\n\t        var layerNode = xmlDoc.createElement(layerName);\n\t        var featureName = feature.layerName + '_feature';\n\t        var featureNode = xmlDoc.createElement(featureName);\n\t        var attributes = feature.properties;\n\t\n\t        for (var key in attributes) {\n\t          if (attributes.hasOwnProperty(key)) {\n\t            var text = null;\n\t            if (attributes[key]) {\n\t              text = xmlDoc.createTextNode(attributes[key]);\n\t            } else {\n\t              text = xmlDoc.createTextNode('');\n\t            }\n\t            var attrNode = xmlDoc.createElement(key);\n\t            attrNode.appendChild(text);\n\t            featureNode.appendChild(attrNode);\n\t          }\n\t        }\n\t        layerNode.appendChild(featureNode);\n\t        xmlDoc.documentElement.appendChild(layerNode);\n\t        return xmlDoc;\n\t      } catch (exception) {\n\t        console.error(exception);\n\t      }\n\t    }\n\t\n\t    function xslTransform(xmlDoc, xslDoc) {\n\t      try {\n\t        if (window.XSLTProcessor) {\n\t          var xsltProcessor = new XSLTProcessor();\n\t          xsltProcessor.importStylesheet(xslDoc);\n\t          var transformedDoc = xsltProcessor.transformToDocument(xmlDoc);\n\t          return new XMLSerializer().serializeToString(transformedDoc);\n\t        } else {\n\t          return xmlDoc.transformNode(xslDoc);\n\t        }\n\t      } catch (exception) {\n\t        console.error(exception);\n\t      }\n\t    }\n\t  }\n\t\n\t  function showPanel(html, url, configOptions) {\n\t    if (html) {\n\t      (0, _mountComponent2.default)({\n\t        elId: 'gv-info-wms-html',\n\t        vm: new _vue2.default({\n\t          template: '<gv-info-wms-html :html=\"html\" :height=\"height\" :width=\"width\" :title=\"title\"></gv-info-wms-html>',\n\t          data: {\n\t            title: 'Risultato Info',\n\t            html: html,\n\t            width: configOptions.infoWidth || 400,\n\t            height: configOptions.infoHeight || 400\n\t          }\n\t        })\n\t      });\n\t    } else {}\n\t  }\n\t\n\t  function openPopup(html, url, options) {\n\t    var width = options.infoWidth || 400;\n\t    var height = options.infoHeight || 500;\n\t    var popup = window.open(url, '', 'status=yes, toolbar=yes, menubar=no, width=' + width + ', height=' + height + ', resizable=yes, scrollbars=yes');\n\t\n\t    popup.document.open();\n\t    popup.document.write(html);\n\t    popup.document.close();\n\t    popup.focus();\n\t  }\n\t\n\t  (0, _getFeatureHilite2.default)(feature).then(function (features) {\n\t    var layer = GV.app.map.getLayerByName('InfoWmsHilite');\n\t    if (features && features[0] && features[0].geometry) {\n\t      layer.clearLayers();\n\t      layer.addData(features[0].geometry);\n\t      GV.app.map.fitBounds(layer.getBounds(), { maxZoom: 15 });\n\t      GV.app.map._container.style.cursor = 'default';\n\t    }\n\t  }).catch(function (error) {\n\t    console.error(error);\n\t  });\n\t}\n\t\n\texports.default = {\n\t  name: 'gv-info-wms-manager',\n\t  data: function data() {\n\t    return {};\n\t  },\n\t\n\t  methods: {\n\t    activate: function activate() {\n\t      GV.log('GV.app.infoWmsManager.activate');\n\t\n\t      GV.app.map.loadLayers([{\n\t        name: 'InfoWmsHilite',\n\t        type: 'JSON',\n\t        style: {\n\t          color: '#ffcc00',\n\t          fillOpacity: 0,\n\t          weight: 6,\n\t          opacity: 0.6\n\t        },\n\t        pointToLayer: function pointToLayer(feature, latlng) {\n\t          return L.circleMarker(latlng, {\n\t            radius: 8,\n\t            color: '#ffcc00',\n\t            fillColor: '#ffcc00',\n\t            fill: true,\n\t            fillOpacity: 0.6,\n\t            weight: 6,\n\t            opacity: 0.6\n\t          });\n\t        },\n\t        visible: true\n\t      }]);\n\t\n\t      GV.eventBus.$on('map-click', function (event) {\n\t        _request(event);\n\t      });\n\t    },\n\t\n\t    deactivate: function deactivate() {\n\t      GV.eventBus.$off('map-click', function (event) {});\n\t    },\n\t\n\t    showFeatureInfo: _showFeatureInfo\n\t  },\n\t  created: function created() {\n\t    GV.log('infoWmsManager mounted');\n\t  }\n\t};\n\n/***/ }),\n\n/***/ 168:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\n\t\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _button = __webpack_require__(41);\n\t\n\tvar _button2 = _interopRequireDefault(_button);\n\t\n\tvar _button3 = __webpack_require__(37);\n\t\n\tvar _button4 = _interopRequireDefault(_button3);\n\t\n\tvar _option = __webpack_require__(28);\n\t\n\tvar _option2 = _interopRequireDefault(_option);\n\t\n\tvar _option3 = __webpack_require__(25);\n\t\n\tvar _option4 = _interopRequireDefault(_option3);\n\t\n\tvar _select = __webpack_require__(29);\n\t\n\tvar _select2 = _interopRequireDefault(_select);\n\t\n\tvar _base = __webpack_require__(12);\n\t\n\tvar _base2 = _interopRequireDefault(_base);\n\t\n\tvar _select3 = __webpack_require__(26);\n\t\n\tvar _select4 = _interopRequireDefault(_select3);\n\t\n\tvar _promise = __webpack_require__(7);\n\t\n\tvar _promise2 = _interopRequireDefault(_promise);\n\t\n\tvar _vue = __webpack_require__(1);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _mountComponent = __webpack_require__(14);\n\t\n\tvar _mountComponent2 = _interopRequireDefault(_mountComponent);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_vue2.default.component('gv-map-info-panel', function () {\n\t  return new _promise2.default(function (resolve) {\n\t    __webpack_require__.e/* nsure */(1, function (require) {\n\t      resolve(__webpack_require__(85));\n\t    });\n\t  });\n\t});\n\t_vue2.default.component('gv-base-layer-switcher', function () {\n\t  return new _promise2.default(function (resolve) {\n\t    __webpack_require__.e/* nsure */(9, function (require) {\n\t      resolve(__webpack_require__(328));\n\t    });\n\t  });\n\t});\n\t_vue2.default.component('gv-multi-legend-panel', function () {\n\t  return new _promise2.default(function (resolve) {\n\t    __webpack_require__.e/* nsure */(5, function (require) {\n\t      resolve(__webpack_require__(337));\n\t    });\n\t  });\n\t});\n\t_vue2.default.component('gv-map-catalog-panel', function () {\n\t  return new _promise2.default(function (resolve) {\n\t    __webpack_require__.e/* nsure */(0, function (require) {\n\t      resolve(__webpack_require__(336));\n\t    });\n\t  });\n\t});\n\t_vue2.default.component('gv-layers-transparency', function () {\n\t  return new _promise2.default(function (resolve) {\n\t    __webpack_require__.e/* nsure */(2, function (require) {\n\t      resolve(__webpack_require__(333));\n\t    });\n\t  });\n\t});\n\t\n\t_vue2.default.use(_select4.default);\n\t_vue2.default.use(_option4.default);\n\t_vue2.default.use(_button4.default);\n\t\n\texports.default = {\n\t  name: 'gv-legend',\n\t  data: function data() {\n\t    return {\n\t      baseLayers: GV.config.baseLayers,\n\t      maps: GV.config.maps,\n\t      options: GV.config.application.layout.legend.options,\n\t      show: true\n\t    };\n\t  },\n\t  mounted: function mounted() {\n\t    GV.log('gv-legend: mounted');\n\t\n\t    GV.legend = this;\n\t\n\t    if (this.options.showAddMap) {\n\t      var showMapCatalogPanel = GV.config.idMap ? false : true;\n\t      GV.config.loadCatalog({ showMapCatalogPanel: showMapCatalogPanel });\n\t    }\n\t  },\n\t\n\t  methods: {\n\t    isDownloadable: function isDownloadable(map) {\n\t      return map.metaData.flag_download;\n\t    },\n\t    checkAddMap: function checkAddMap(map) {\n\t      return this.options.showAddMap && GV.config.getMapConfig(map.id).metaData;\n\t    },\n\t\n\t    hideLegend: function hideLegend(event) {\n\t      if (this.show) {\n\t        document.getElementById('gv-legend-wrapper').style.display = 'none';\n\t        document.getElementById('gv-legend').style.width = '220px';\n\t      } else {\n\t        document.getElementById('gv-legend-wrapper').style.display = 'block';\n\t        document.getElementById('gv-legend').style.width = '260px';\n\t      }\n\t      this.show = !this.show;\n\t    },\n\t    showMapInfoPanel: function showMapInfoPanel(map) {\n\t      GV.config.schedaInfoCartografia = GV.config.getMapConfig(map.id).metaData;\n\t      (0, _mountComponent2.default)({\n\t        elId: 'gv-map-info-panel',\n\t        containerId: GV.config.containerId,\n\t        clear: true,\n\t        vm: new _vue2.default({\n\t          template: '<gv-map-info-panel visible=\"true\" idMap=\"' + map.id + '\"></gv-map-info-panel>'\n\t        })\n\t      });\n\t    },\n\t    remove: function remove(map) {\n\t      GV.config.removeMap(map.id);\n\t    },\n\t    download: function download(map) {\n\t      window.open(map.metaData.link_download);\n\t    },\n\t\n\t    addMap: function addMap() {\n\t      (0, _mountComponent2.default)({\n\t        elId: 'gv-map-catalog-panel',\n\t        containerId: GV.config.containerId,\n\t        toggleEl: true,\n\t        vm: new _vue2.default({\n\t          template: '<gv-map-catalog-panel></gv-map-catalog-panel>'\n\t        })\n\t      });\n\t    },\n\t    layerTransparency: function layerTransparency(map) {\n\t      (0, _mountComponent2.default)({\n\t        elId: 'gv-layers-transparency',\n\t        containerId: GV.config.containerId,\n\t        toggleEl: false,\n\t        vm: new _vue2.default({\n\t          template: '<gv-layers-transparency idMap=\"' + map.id + '\"></gv-layers-transparency>'\n\t        })\n\t      });\n\t    },\n\t    iconUrl: function iconUrl(layer) {\n\t      return layer.legend.icon;\n\t    },\n\t    getClass: function getClass(layer) {\n\t      return layer.inRange ? 'gv-list-legend-layer-item' : 'gv-list-legend-layer-item gv-list-legend-layer-disabled-item';\n\t    },\n\t    setLayerVisible: function setLayerVisible(layer, event) {\n\t      GV.eventBus.$emit('set-layer-visible', {\n\t        layer: layer,\n\t        checked: event.currentTarget.checked\n\t      });\n\t    },\n\t    showLegendPanel: function showLegendPanel(layer) {\n\t      if (layer.inRange && (layer.multiClasse || layer.legend.popUpFlag)) {\n\t        var url = null,\n\t            html = null,\n\t            width,\n\t            height;\n\t        if (layer.legend.popUpUrl && layer.legend.popUpFlag) {\n\t          url = layer.legend.popUpUrl;\n\t          width = window.matchMedia('(max-width: 620px)').matches ? 400 : 600;\n\t          height = window.matchMedia('(max-height: 620px)').matches ? 400 : 600;\n\t        } else if (layer.multiClasse) {\n\t          if (layer.flagGeoserver) {\n\t            url = layer.wmsParams.url + 'LAYER=' + layer.name + '&REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&';\n\t            width = window.matchMedia('(max-width: 450px)').matches ? 300 : 400;\n\t            height = 350;\n\t          } else {\n\t            var classes = layer.classes;\n\t            html = '<table width=100% border=0>';\n\t            classes.forEach(function (cls) {\n\t              html += '<tr>';\n\t              html += '<td width=30><img src=\"' + cls.legendIcon + '\"></td>';\n\t              html += '<td >' + cls.legendLabel + '</td>';\n\t              html += '</tr>';\n\t            });\n\t            html += '</table>';\n\t          }\n\t        }\n\t        (0, _mountComponent2.default)({\n\t          elId: 'gv-multi-legend-panel',\n\t          containerId: GV.config.containerId,\n\t          vm: new _vue2.default({\n\t            template: '<gv-multi-legend-panel visible=\"true\" :src=\"src\" :html=\"html\" :height=\"height\" :width=\"width\" :title=\"title\"></gv-multi-legend-panel>',\n\t            data: {\n\t              title: 'LEGENDA - ' + layer.legend.label,\n\t              src: url,\n\t              html: html,\n\t              width: width,\n\t              height: height\n\t            }\n\t          })\n\t        });\n\t      }\n\t    }\n\t  }\n\t};\n\n/***/ }),\n\n/***/ 169:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _vue = __webpack_require__(1);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _Map = __webpack_require__(182);\n\t\n\tvar _Map2 = _interopRequireDefault(_Map);\n\t\n\tvar _InfoWmsManager = __webpack_require__(116);\n\t\n\tvar _InfoWmsManager2 = _interopRequireDefault(_InfoWmsManager);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_vue2.default.component('gv-info-wms-manager', _InfoWmsManager2.default);\n\t\n\tvar events = ['click', 'dblclick', 'mousedown', 'mouseup', 'mouseover', 'mouseout', 'mousemove', 'contextmenu', 'focus', 'blur', 'preclick', 'load', 'unload', 'viewreset', 'movestart', 'move', 'moveend', 'dragstart', 'drag', 'dragend', 'zoomstart', 'zoomend', 'zoomanim', 'zoomlevelschange', 'resize', 'autopanstart', 'layeradd', 'layerremove', 'baselayerchange', 'overlayadd', 'overlayremove', 'locationfound', 'locationerror', 'popupopen', 'popupclose'];\n\t\n\texports.default = {\n\t  name: 'gv-map',\n\t  data: function data() {\n\t    var height = document.documentElement.clientHeight;\n\t    return {\n\t      style: 'height:' + height + 'px'\n\t    };\n\t  },\n\t  mounted: function mounted() {\n\t    GV.app.map = new _Map2.default();\n\t\n\t    this.registerMapEvents();\n\t\n\t    this.subscribeConfigEvents();\n\t\n\t    window.addEventListener('resize', this.handleResize);\n\t    this.handleResize();\n\t\n\t    if (GV.config.application.mapOptions && GV.config.application.mapOptions.click) {\n\t      this.$refs.info.activate();\n\t    }\n\t\n\t    GV.log('gv-map: mounted');\n\t  },\n\t\n\t  methods: {\n\t    handleResize: function handleResize(event) {\n\t      var height = document.documentElement.clientHeight - document.getElementById('gv-map').getBoundingClientRect().top;\n\t      this.style = 'height:' + height + 'px';\n\t    },\n\t    registerMapEvents: function registerMapEvents() {\n\t      events.forEach(function (eventName) {\n\t        var exposedName = 'map-' + eventName;\n\t        GV.app.map.on(eventName, function (ev) {\n\t          GV.eventBus.$emit(exposedName, ev);\n\t        });\n\t      });\n\t    },\n\t    subscribeConfigEvents: function subscribeConfigEvents() {\n\t      GV.eventBus.$on('config-add-map', function (ev) {\n\t        var mapConfig = ev.config;\n\t\n\t        GV.app.map.loadLayers(mapConfig.layers);\n\t\n\t        if (mapConfig.extent_3857) {\n\t          GV.app.map.setExtent(mapConfig.extent_3857);\n\t        }\n\t      });\n\t\n\t      GV.eventBus.$on('config-remove-map', function (ev) {\n\t        var mapConfig = ev.config;\n\t\n\t        mapConfig.layers.forEach(function (layerConfig) {\n\t          var layer = GV.app.map.getLayerByName(layerConfig.name);\n\t          if (layer) {\n\t            GV.app.map.removeLayer(layer);\n\t          }\n\t        });\n\t      });\n\t    }\n\t  }\n\t};\n\n/***/ }),\n\n/***/ 174:\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tGV.Buttons.div = function (btnOptions, map) {\n\t\n\t  var containerId = 'gv-button-div';\n\t\n\t  var Button = L.Control.extend({\n\t    onAdd: function onAdd(map) {\n\t      var container = document.createElement('div');\n\t      container.id = containerId;\n\t      container.className = 'leaflet-bar leaflet-control';\n\t      container.innerHTML = btnOptions.html;\n\t      return container;\n\t    }\n\t  });\n\t\n\t  return new Button(btnOptions);\n\t};\n\n/***/ }),\n\n/***/ 175:\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tGV.Buttons.fullscreen = function (btnOptions, map) {\n\t  return L.control.fullscreen(btnOptions);\n\t};\n\n/***/ }),\n\n/***/ 176:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _promise = __webpack_require__(7);\n\t\n\tvar _promise2 = _interopRequireDefault(_promise);\n\t\n\tvar _vue = __webpack_require__(1);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tGV.Buttons.geocoder = function (btnOptions, map) {\n\t  var containerId = 'gv-button-geocoder';\n\t  var componentId = 'gv-geocoder';\n\t\n\t  var Button = L.Control.extend({\n\t    onAdd: function onAdd(map) {\n\t      var container = document.createElement('div');\n\t      container.id = containerId;\n\t      container.className = 'leaflet-bar leaflet-control';\n\t      L.DomEvent.disableClickPropagation(container);\n\t      return container;\n\t    }\n\t  });\n\t\n\t  _vue2.default.component('gv-geocoder', function () {\n\t    return new _promise2.default(function (resolve) {\n\t      __webpack_require__.e/* nsure */(4, function (require) {\n\t        resolve(__webpack_require__(324));\n\t      });\n\t    });\n\t  });\n\t  btnOptions.vueComponent = { containerId: containerId, id: componentId };\n\t\n\t  return new Button(btnOptions);\n\t};\n\n/***/ }),\n\n/***/ 177:\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tGV.Buttons.locate = function (btnOptions, map) {\n\t  return L.control.Locate(btnOptions);\n\t};\n\n/***/ }),\n\n/***/ 178:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _promise = __webpack_require__(7);\n\t\n\tvar _promise2 = _interopRequireDefault(_promise);\n\t\n\tvar _vue = __webpack_require__(1);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tGV.Buttons.scalebar = function (btnOptions, map) {\n\t  var containerId = 'gv-button-scalebar';\n\t  var componentId = 'gv-scalebar';\n\t\n\t  var Button = L.Control.extend({\n\t    onAdd: function onAdd(map) {\n\t      var container = document.createElement('div');\n\t      container.id = containerId;\n\t      container.className = 'leaflet-bar leaflet-control';\n\t      L.DomEvent.disableClickPropagation(container);\n\t      return container;\n\t    }\n\t  });\n\t\n\t  _vue2.default.component('gv-scalebar', function () {\n\t    return new _promise2.default(function (resolve) {\n\t      __webpack_require__.e/* nsure */(10, function (require) {\n\t        resolve(__webpack_require__(325));\n\t      });\n\t    });\n\t  });\n\t  btnOptions.vueComponent = { containerId: containerId, id: componentId };\n\t\n\t  return new Button(btnOptions);\n\t};\n\n/***/ }),\n\n/***/ 179:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _promise = __webpack_require__(7);\n\t\n\tvar _promise2 = _interopRequireDefault(_promise);\n\t\n\tvar _vue = __webpack_require__(1);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tGV.Buttons.search = function (btnOptions, map) {\n\t  var containerId = 'gv-button-search';\n\t  var componentId = 'gv-search';\n\t\n\t  var Button = L.Control.extend({\n\t    onAdd: function onAdd(map) {\n\t      var container = document.createElement('div');\n\t      container.id = containerId;\n\t      container.className = 'leaflet-control-search';\n\t      L.DomEvent.disableClickPropagation(container);\n\t      return container;\n\t    }\n\t  });\n\t\n\t  _vue2.default.component('gv-search', function () {\n\t    return new _promise2.default(function (resolve) {\n\t      __webpack_require__.e/* nsure */(3, function (require) {\n\t        resolve(__webpack_require__(326));\n\t      });\n\t    });\n\t  });\n\t  btnOptions.vueComponent = { containerId: containerId, id: componentId };\n\t\n\t  return new Button(btnOptions);\n\t};\n\n/***/ }),\n\n/***/ 180:\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tGV.Buttons.zoom = function (btnOptions, map) {\n\t  return L.control.zoom(btnOptions);\n\t};\n\n/***/ }),\n\n/***/ 181:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.create = undefined;\n\t\n\tvar _assign = __webpack_require__(58);\n\t\n\tvar _assign2 = _interopRequireDefault(_assign);\n\t\n\tvar _leaflet = __webpack_require__(115);\n\t\n\tvar _leaflet2 = _interopRequireDefault(_leaflet);\n\t\n\tvar _globals = __webpack_require__(5);\n\t\n\tvar _globals2 = _interopRequireDefault(_globals);\n\t\n\tvar _interpolateString = __webpack_require__(201);\n\t\n\tvar _interpolateString2 = _interopRequireDefault(_interpolateString);\n\t\n\tvar _getParamString = __webpack_require__(94);\n\t\n\tvar _getParamString2 = _interopRequireDefault(_getParamString);\n\t\n\tvar _getZoomFromScaleDenom = __webpack_require__(200);\n\t\n\tvar _getZoomFromScaleDenom2 = _interopRequireDefault(_getZoomFromScaleDenom);\n\t\n\tvar _getGeoJSON = __webpack_require__(193);\n\t\n\tvar _getGeoJSON2 = _interopRequireDefault(_getGeoJSON);\n\t\n\tvar _getTmsMaxLevel = __webpack_require__(198);\n\t\n\tvar _getTmsMaxLevel2 = _interopRequireDefault(_getTmsMaxLevel);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t__webpack_require__(183);\n\t__webpack_require__(184);\n\t\n\tvar esriLink = '<a href=\"http://www.esri.com/\">Esri</a>';\n\t\n\tfunction buildGeoJson(data, esParams) {\n\t    'use strict';\n\t\n\t    var geoJson = void 0;\n\t    if (esParams) {\n\t        var geomField = esParams.geomField || 'location';\n\t        var features = data.hits.hits;\n\t        geoJson = {\n\t            'type': 'FeatureCollection',\n\t            'totalFeatures': data.hits.total,\n\t            'features': [],\n\t            'crs': {\n\t                'type': 'name',\n\t                'properties': {\n\t                    'name': 'urn:ogc:def:crs:EPSG::4326'\n\t                }\n\t            }\n\t        };\n\t        features.forEach(function (feature) {\n\t            var coords = feature._source[geomField];\n\t            geoJson.features.push({\n\t                'type': 'Feature',\n\t                'id': feature._id,\n\t                'geometry': { 'type': 'Point', 'coordinates': coords },\n\t                'geometry_name': 'GEOMETRY',\n\t                'properties': feature._source\n\t            });\n\t        });\n\t    } else {\n\t        geoJson = typeof data === 'string' ? JSON.parse(data) : data;\n\t    }\n\t    return geoJson;\n\t}\n\t\n\tvar layerFactory = {\n\t    BLANK: function BLANK(layerConfig) {\n\t        layerConfig.legend = {\n\t            label: 'Sfondo Bianco'\n\t        };\n\t        return _leaflet2.default.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { opacity: 0.0 });\n\t    },\n\t    OSM: function OSM(layerConfig) {\n\t        layerConfig.legend = {\n\t            label: 'OpenStreetMap'\n\t        };\n\t        return _leaflet2.default.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n\t            attribution: 'Map data © <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors'\n\t        });\n\t    },\n\t    ESRI_IMAGERY: function ESRI_IMAGERY(layerConfig) {\n\t        layerConfig.legend = { label: 'ESRI Imagery' };\n\t        layerConfig.name = layerConfig.type;\n\t        var attr = 'DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community';\n\t        return _leaflet2.default.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {\n\t            attribution: '&copy; ' + esriLink + ', ' + attr,\n\t            maxZoom: 19 });\n\t    },\n\t    ESRI_STREETS: function ESRI_STREETS(layerConfig) {\n\t        layerConfig.legend = { label: 'ESRI Streets' };\n\t        layerConfig.name = layerConfig.type;\n\t        var attr = 'USGS, NOAA';\n\t        return _leaflet2.default.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}', {\n\t            attribution: '&copy; ' + esriLink + ', ' + attr,\n\t            maxZoom: 19 });\n\t    },\n\t    ESRI_TOPOGRAPHIC: function ESRI_TOPOGRAPHIC(layerConfig) {\n\t        layerConfig.legend = { label: 'ESRI Topographic' };\n\t        layerConfig.name = layerConfig.type;\n\t        var attr = 'USGS, NOAA';\n\t        return _leaflet2.default.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}', {\n\t            attribution: '&copy; ' + esriLink + ', ' + attr,\n\t            maxZoom: 19 });\n\t    },\n\t    ESRI_GRAY: function ESRI_GRAY(layerConfig) {\n\t        layerConfig.legend = { label: 'ESRI Gray' };\n\t        layerConfig.name = layerConfig.type;\n\t        var attr = 'HERE, DeLorme, MapmyIndia, OpenStreetMap contributors';\n\t        return _leaflet2.default.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}', {\n\t            attribution: '&copy; ' + esriLink + ', ' + attr,\n\t            maxZoom: 16 });\n\t    },\n\t    ESRI_DARKGRAY: function ESRI_DARKGRAY(layerConfig) {\n\t        layerConfig.legend = { label: 'ESRI Dark Gray' };\n\t        layerConfig.name = layerConfig.type;\n\t        var attr = 'HERE, DeLorme, MapmyIndia, OpenStreetMap contributors';\n\t        return _leaflet2.default.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}', {\n\t            attribution: '&copy; ' + esriLink + ', ' + attr,\n\t            maxZoom: 16 });\n\t    },\n\t    MAPBOX_STREETS: function MAPBOX_STREETS(layerConfig) {\n\t        layerConfig.legend = {\n\t            label: 'Mapbox Streets'\n\t        };\n\t        return _leaflet2.default.tileLayer('http://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g', {\n\t            attribution: 'Imagery from <a href=\"http://mapbox.com/about/maps/\">MapBox</a> &mdash; Map data &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>',\n\t            subdomains: 'abcd',\n\t            id: 'mapbox.streets',\n\t            accessToken: 'pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g'\n\t        });\n\t    },\n\t    MAPBOX_SATELLITE: function MAPBOX_SATELLITE(layerConfig) {\n\t        layerConfig.legend = {\n\t            label: 'Mapbox Satellite'\n\t        };\n\t        return _leaflet2.default.tileLayer('http://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g', {\n\t            attribution: 'Imagery from <a href=\"http://mapbox.com/about/maps/\">MapBox</a> &mdash; Map data &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>',\n\t            subdomains: 'abcd',\n\t            id: 'mapbox.satellite',\n\t            accessToken: 'pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g'\n\t        });\n\t    },\n\t    MAPBOX_OUTDOOR: function MAPBOX_OUTDOOR(layerConfig) {\n\t        layerConfig.legend = {\n\t            label: 'Mapox Outdoor'\n\t        };\n\t        return _leaflet2.default.tileLayer('http://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g', {\n\t            attribution: 'Imagery from <a href=\"http://mapbox.com/about/maps/\">MapBox</a> &mdash; Map data &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>',\n\t            subdomains: 'abcd',\n\t            id: 'mapbox.outdoors',\n\t            accessToken: 'pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g'\n\t        });\n\t    },\n\t    MAPBOX_LIGHT: function MAPBOX_LIGHT(layerConfig) {\n\t        layerConfig.legend = {\n\t            label: 'Mapox Light'\n\t        };\n\t        return _leaflet2.default.tileLayer('http://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g', {\n\t            attribution: 'Imagery from <a href=\"http://mapbox.com/about/maps/\">MapBox</a> &mdash; Map data &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>',\n\t            subdomains: 'abcd',\n\t            id: 'mapbox.light',\n\t            accessToken: 'pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g'\n\t        });\n\t    },\n\t    STAMEN_TERRAIN: function STAMEN_TERRAIN(layerConfig) {\n\t        layerConfig.legend = {\n\t            label: 'Stamen Terrain'\n\t        };\n\t        return _leaflet2.default.tileLayer('http://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}.{ext}', {\n\t            attribution: 'Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>, <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Map data &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>',\n\t            subdomains: 'abcd',\n\t            minZoom: 0,\n\t            maxZoom: 18,\n\t            ext: 'png'\n\t        });\n\t    },\n\t    STAMEN_TONER_LIGHT: function STAMEN_TONER_LIGHT(layerConfig) {\n\t        layerConfig.legend = {\n\t            label: 'Stamen Toner Light'\n\t        };\n\t        return _leaflet2.default.tileLayer('http://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.{ext}', {\n\t            attribution: 'Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>, <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Map data &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>',\n\t            subdomains: 'abcd',\n\t            minZoom: 0,\n\t            maxZoom: 20,\n\t            ext: 'png'\n\t        });\n\t    },\n\t    RL_ORTOFOTO_2013: function RL_ORTOFOTO_2013() {\n\t        return this.TMS({\n\t            visible: false,\n\t            tmsParams: {\n\t                name: 'L4419/webmercator',\n\t                url: 'http://mapproxy.regione.liguria.it/mapproxy/1661/tiles/'\n\t            },\n\t            zIndex: 1\n\t        });\n\t    },\n\t    RL_ORTOFOTO_2016: function RL_ORTOFOTO_2016() {\n\t        return this.TMS({\n\t            visible: false,\n\t            tmsParams: {\n\t                name: 'L5802/webmercator',\n\t                url: 'http://mapproxy.regione.liguria.it/mapproxy/1828/tiles/'\n\t            },\n\t            zIndex: 1\n\t        });\n\t    },\n\t    RL_CARTE_BASE: function RL_CARTE_BASE() {\n\t        return this.TMS({\n\t            visible: false,\n\t            tmsParams: {\n\t                name: 'C1623/webmercator',\n\t                url: 'http://mapproxy.regione.liguria.it/mapproxy/1623/tiles/'\n\t            },\n\t            zIndex: 1\n\t        });\n\t    },\n\t    TMS: function TMS(layerConfig) {\n\t        var url = layerConfig.tmsParams.url.replace('/tms/', '/tiles/');\n\t        var name = layerConfig.tmsParams.name;\n\t        var tmsUrl = url + '/1.0.0/' + name + '/{z}/{x}/{y}.png';\n\t        var maxLevel = (0, _getTmsMaxLevel2.default)(layerConfig.maxScale);\n\t        var layer = new _leaflet2.default.TileLayer(tmsUrl, {\n\t            minZoom: 1,\n\t            maxZoom: maxLevel\n\t        });\n\t        layer.setZIndex(layerConfig.zIndex);\n\t        layer.name = name.replace('/webmercator', '');\n\t        return layer;\n\t    },\n\t    WMS: function WMS(layerConfig) {\n\t        var name = layerConfig.name,\n\t            geomType = layerConfig.geomType,\n\t            cacheMinZoomLevel = layerConfig.cacheMinZoomLevel,\n\t            minScale = layerConfig.minScale,\n\t            maxScale = layerConfig.maxScale,\n\t            wmsParams = layerConfig.wmsParams,\n\t            flagGeoserver = layerConfig.flagGeoserver,\n\t            zIndex = layerConfig.zIndex;\n\t\n\t        GV.log('layerFactory - Creazione Layer WMS: ' + name);\n\t\n\t        var isCached = cacheMinZoomLevel ? true : false;\n\t        var format = geomType === 'VECTOR' ? 'image/png8' : cacheMinZoomLevel ? 'image/jpeg' : 'image/png';\n\t        var minZoom = minScale ? (0, _getZoomFromScaleDenom2.default)(minScale) : 8;\n\t        var maxZoom = maxScale ? (0, _getZoomFromScaleDenom2.default)(maxScale) : 20;\n\t        var url = wmsParams.url;\n\t\n\t        var opacity = layerConfig.opacity || 1;\n\t\n\t        if (!flagGeoserver) {\n\t            cacheMinZoomLevel = null;\n\t            format = geomType === 'VECTOR' ? 'image/png' : 'image/jpeg';\n\t        }\n\t\n\t        var options = {\n\t            'subdomains': ['1', '2'],\n\t            'transparent': true,\n\t            'FORMAT_OPTIONS': 'antialias:text',\n\t            'layers': name,\n\t            'format': format,\n\t            'opacity': opacity,\n\t            'minZoom': minZoom,\n\t            'maxZoom': maxZoom,\n\t\n\t            'bounds': _leaflet2.default.latLngBounds(_leaflet2.default.latLng(_globals2.default.MAX_BOUNDS.X_MIN, _globals2.default.MAX_BOUNDS.Y_MIN), _leaflet2.default.latLng(_globals2.default.MAX_BOUNDS.X_MAX, _globals2.default.MAX_BOUNDS.Y_MAX))\n\t        };\n\t\n\t        var layer = null;\n\t        if (isCached) {\n\t            if (_globals2.default.USE_SUBDOMAINS && url.indexOf('geoservizi.regione.liguria.it') > 0) {\n\t                url = url.replace('geoservizi', 'geoservizi{s}');\n\t            }\n\t            (0, _assign2.default)(options, {\n\t                'tiled': true,\n\t                'TILESORIGIN': '-20037508,-20037508',\n\t                'tileSize': 256,\n\t                'CACHE_VERSION': layerConfig.cacheVersion\n\t            });\n\t            layer = _leaflet2.default.tileLayer.wms(url, options);\n\t        } else {\n\t            (0, _assign2.default)(options, {\n\t                'tiled': false,\n\t                'pane': 'tilePane'\n\t            });\n\t            layer = _leaflet2.default.nonTiledLayer.wms(url, options);\n\t        }\n\t\n\t        layer.setZIndex(zIndex);\n\t        layer.type = 'WMS';\n\t        layer.name = name;\n\t\n\t        return layer;\n\t    },\n\t    JSON: function JSON(layerConfig) {\n\t        var data = layerConfig.data,\n\t            url = layerConfig.url,\n\t            name = layerConfig.name,\n\t            wfsParams = layerConfig.wfsParams,\n\t            esParams = layerConfig.esParams,\n\t            classes = layerConfig.classes,\n\t            style = layerConfig.style,\n\t            pointToLayer = layerConfig.pointToLayer,\n\t            tooltip = layerConfig.tooltip,\n\t            popup = layerConfig.popup,\n\t            cluster = layerConfig.cluster;\n\t\n\t        var clusterLayer = null;\n\t        var options = {};\n\t\n\t        if (classes && classes.length > 0) {\n\t            if (layerConfig.geomSubType === 'POINT') {\n\t                options.pointToLayer = function (feature, latlng) {\n\t                    var style;\n\t                    classes.forEach(function (cls) {\n\t                        if (cls.filter && cls.filter.key && cls.filter.value) {\n\t                            if (feature.properties[cls.filter.key] === cls.filter.value) {\n\t                                style = cls.style;\n\t                            }\n\t                        } else {\n\t                            style = cls.style;\n\t                        }\n\t                    });\n\t                    if (style.iconUrl) {\n\t                        var icon;\n\t                        switch (style.iconUrl) {\n\t                            case 'default':\n\t                                icon = _leaflet2.default.icon({\n\t                                    iconUrl: 'http://geoportale.regione.liguria.it/geoviewer2/static/img/marker-icon.png',\n\t                                    iconSize: [25, 41],\n\t                                    iconAnchor: [12, 41],\n\t                                    popupAnchor: [0, -41]\n\t                                });\n\t                                break;\n\t                            case 'default-small':\n\t                                icon = _leaflet2.default.icon({\n\t                                    iconUrl: 'http://geoportale.regione.liguria.it/geoviewer2/static/img/marker-icon.png',\n\t                                    iconSize: [12, 20],\n\t                                    iconAnchor: [6, 10],\n\t                                    popupAnchor: [0, -20]\n\t                                });\n\t                                break;\n\t                            default:\n\t                                icon = _leaflet2.default.icon({\n\t                                    iconUrl: style.iconUrl,\n\t                                    iconSize: style.iconSize,\n\t                                    iconAnchor: style.iconAnchor,\n\t                                    popupAnchor: style.popupAnchor\n\t                                });\n\t                        }\n\t                        return _leaflet2.default.marker(latlng, { icon: icon });\n\t                    } else {\n\t                        return _leaflet2.default.circleMarker(latlng, style);\n\t                    }\n\t                };\n\t            } else {\n\t                options.style = function (feature) {\n\t                    var style;\n\t                    classes.forEach(function (cls) {\n\t                        if (cls.filter && cls.filter.key && cls.filter.value) {\n\t                            if (feature.properties[cls.filter.key] === cls.filter.value) {\n\t                                style = cls.style;\n\t                            }\n\t                        } else {\n\t                            style = cls.style;\n\t                        }\n\t                    });\n\t                    return style;\n\t                };\n\t            }\n\t            options.filter = function (feature) {\n\t                var visible = false;\n\t                classes.forEach(function (cls) {\n\t                    if (!cls.filter) {\n\t                        visible = true;\n\t                    } else {\n\t                        if (cls.filter.key && cls.filter.value) {\n\t                            if (feature.properties[cls.filter.key] === cls.filter.value) {\n\t                                visible = true;\n\t                            }\n\t                        }\n\t                    }\n\t                });\n\t                return visible;\n\t            };\n\t        }\n\t\n\t        if (style) {\n\t            options.style = style;\n\t        }\n\t        if (pointToLayer) {\n\t            options.pointToLayer = pointToLayer;\n\t        }\n\t\n\t        if (tooltip || popup) {\n\t            options.onEachFeature = function (feature, layer) {\n\t                if (tooltip) {\n\t                    layer.options.title = (0, _interpolateString2.default)(tooltip, feature.properties);\n\t                }\n\t                if (popup) {\n\t                    layer.bindPopup((0, _interpolateString2.default)(popup, feature.properties));\n\t                }\n\t            };\n\t        }\n\t\n\t        var layer = _leaflet2.default.geoJson(data, options);\n\t        layer.name = name;\n\t\n\t        layer.setFilter = function (filters) {\n\t            layer.filter = filters;\n\t            if (filters) {\n\t                layer.eachLayer(function (marker) {\n\t                    var opacity = 0;\n\t                    filters.forEach(function (filter) {\n\t                        if (marker.feature.properties[filter.key] === filter.value) {\n\t                            opacity = layer.config.opacity || 1;\n\t                        }\n\t                    });\n\t                    marker.setOpacity(opacity);\n\t                });\n\t            } else {\n\t                layer.eachLayer(function (marker) {\n\t                    var opacity = layer.config.opacity || 1;\n\t                    marker.setOpacity(opacity);\n\t                });\n\t            }\n\t        };\n\t\n\t        var parameters;\n\t\n\t        if (wfsParams && wfsParams.typeName && wfsParams.url) {\n\t            parameters = {\n\t                service: 'WFS',\n\t                version: '2.0.0',\n\t                request: 'GetFeature',\n\t                srsName: 'EPSG:4326',\n\t                outputFormat: 'text/javascript',\n\t                format_options: 'callback: getJson',\n\t                typeName: wfsParams.typeName\n\t            };\n\t            url = wfsParams.url + (0, _getParamString2.default)(parameters);\n\t        }\n\t\n\t        if (esParams) {\n\t            parameters = {};\n\t            if (esParams.field) {\n\t                parameters.q = esParams.field + ':';\n\t                if (esParams.query) {\n\t                    parameters.q += esParams.query;\n\t                } else {\n\t                    parameters.q += '*';\n\t                }\n\t            } else {\n\t                if (esParams.query) {\n\t                    parameters.q = esParams.query;\n\t                }\n\t            }\n\t            parameters.pretty = 'true';\n\t            parameters.size = 100000;\n\t\n\t\n\t            url = GV.config.application.proxy + esParams.url + (0, _getParamString2.default)(parameters);\n\t        }\n\t\n\t        if (cluster) {\n\t            var clusterOptions = { showCoverageOnHover: false };\n\t            if (cluster.options) {\n\t                (0, _assign2.default)(clusterOptions, cluster.options);\n\t            }\n\t            clusterLayer = _leaflet2.default.markerClusterGroup(clusterOptions);\n\t            clusterLayer.name = name;\n\t        }\n\t\n\t        if (url) {\n\t            (0, _getGeoJSON2.default)(url).then(function (response) {\n\t                var geoJson = buildGeoJson(response.data, esParams);\n\t                layer.addData(geoJson);\n\t                if (cluster) {\n\t                    clusterLayer.addLayer(layer);\n\t                }\n\t                GV.eventBus.$emit('layer-loaded-json', layer);\n\t            }).catch(function (error) {\n\t                return console.error(error);\n\t            });\n\t        }\n\t\n\t        if (data) {\n\t            if (cluster) {\n\t                clusterLayer.addLayer(layer);\n\t            }\n\t        }\n\t\n\t        return cluster ? clusterLayer : layer;\n\t    }\n\t};\n\t\n\tfunction create(layerConfig, map) {\n\t    if (layerFactory[layerConfig.type]) {\n\t        var layer = layerFactory[layerConfig.type](layerConfig, map);\n\t        layer.legend = layerConfig.legend;\n\t        layer.config = layerConfig;\n\t        return layer;\n\t    } else {\n\t        throw new Error('Layer di tipo ' + layerConfig.type + ' non gestito');\n\t    }\n\t}\n\t\n\texports.create = create;\n\n/***/ }),\n\n/***/ 182:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _assign = __webpack_require__(58);\n\t\n\tvar _assign2 = _interopRequireDefault(_assign);\n\t\n\tvar _globals = __webpack_require__(5);\n\t\n\tvar _globals2 = _interopRequireDefault(_globals);\n\t\n\tvar _layerFactory = __webpack_require__(181);\n\t\n\tvar layerFactory = _interopRequireWildcard(_layerFactory);\n\t\n\tvar _leaflet = __webpack_require__(115);\n\t\n\tvar _leaflet2 = _interopRequireDefault(_leaflet);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Map = _leaflet2.default.Map.extend({\n\t    layers: [],\n\t\n\t    baseLayers: [],\n\t\n\t    initialExtent: [],\n\t\n\t    buttons: [],\n\t\n\t    mapOptions: {\n\t        zoomControl: false,\n\t        maxBounds: _leaflet2.default.latLngBounds(_leaflet2.default.latLng(_globals2.default.MAX_BOUNDS.X_MIN, _globals2.default.MAX_BOUNDS.Y_MIN), _leaflet2.default.latLng(_globals2.default.MAX_BOUNDS.X_MAX, _globals2.default.MAX_BOUNDS.Y_MAX)),\n\t        maxBoundsViscosity: 1.0,\n\t        minZoom: 7\n\t    },\n\t\n\t    initialize: function initialize() {\n\t        'use strict';\n\t\n\t        (0, _assign2.default)(this.mapOptions, GV.config.application.mapOptions);\n\t\n\t        _leaflet2.default.Map.prototype.initialize.call(this, 'gv-map', _leaflet2.default.extend(_leaflet2.default.Map.prototype.options, this.mapOptions));\n\t\n\t        this.setInitialExtent();\n\t\n\t        this.setLoading();\n\t\n\t        this.loadBaseLayers();\n\t\n\t        this.loadControls();\n\t\n\t        this.eventMngr();\n\t    },\n\t\n\t    eventMngr: function eventMngr() {\n\t        var _this = this;\n\t\n\t        var me = this;\n\t        this.on('zoom', function () {\n\t            GV.eventBus.$emit('map-zoom', this._zoom);\n\t        });\n\t        GV.eventBus.$on('set-layer-visible', function (event) {\n\t            me.setLayerVisible(event.layer, event.checked);\n\t        });\n\t        GV.eventBus.$on('set-layer-transparency', function (event) {\n\t            var layer = _this.getLayerByName(event.layerName);\n\t            layer.setOpacity(event.opacity);\n\t        });\n\t        GV.eventBus.$on('change-base-layer', function (event) {\n\t            me.changeBaseLayer(event.layer);\n\t        });\n\t    },\n\t\n\t    setInitialExtent: function setInitialExtent() {\n\t        'use strict';\n\t\n\t        var extent = this.mapOptions.initialExtent || '830036,5402959,1123018,5597635';\n\t        var extArray = extent.split(',');\n\t        var swPoint = _leaflet2.default.point(extArray[0], extArray[1]);\n\t        var nePoint = _leaflet2.default.point(extArray[2], extArray[3]);\n\t        var swLatLng = _leaflet2.default.Projection.SphericalMercator.unproject(swPoint);\n\t        var neLatLng = _leaflet2.default.Projection.SphericalMercator.unproject(nePoint);\n\t        this.initialExtent = _leaflet2.default.latLngBounds(swLatLng, neLatLng);\n\t        this.fitBounds(this.initialExtent);\n\t    },\n\t\n\t    setExtent: function setExtent(extent) {\n\t        'use strict';\n\t\n\t        var extArray = extent.split(',');\n\t        var swPoint = _leaflet2.default.point(extArray[0], extArray[1]);\n\t        var nePoint = _leaflet2.default.point(extArray[2], extArray[3]);\n\t        var swLatLng = _leaflet2.default.Projection.SphericalMercator.unproject(swPoint);\n\t        var neLatLng = _leaflet2.default.Projection.SphericalMercator.unproject(nePoint);\n\t        this.initialExtent = _leaflet2.default.latLngBounds(swLatLng, neLatLng);\n\t        this.fitBounds(this.initialExtent);\n\t    },\n\t\n\t    setLayerVisible: function setLayerVisible(layerConfig, visible) {\n\t        'use strict';\n\t\n\t        if (visible) {\n\t            layerConfig.visible = true;\n\t            this.loadLayers([layerConfig]);\n\t        } else {\n\t            this.removeLayer(this.getLayerByName(layerConfig.name));\n\t        }\n\t    },\n\t\n\t    layerInRange: function layerInRange(layerConfig) {\n\t        'use strict';\n\t\n\t        if (!layerConfig.minScale && !layerConfig.minScale) {\n\t            return true;\n\t        }\n\t        return this.getScale() < layerConfig.minScale && this.getScale() > layerConfig.maxScale;\n\t    },\n\t\n\t    loadControls: function loadControls() {\n\t        'use strict';\n\t\n\t        if (this.mapOptions.controls) {\n\t            var cntrl;\n\t            this.controls = {};\n\t            this.mapOptions.controls.forEach(function (control) {\n\t                switch (control.name) {\n\t                    case 'scale':\n\t                        cntrl = _leaflet2.default.control.scale({ imperial: false }).addTo(this);\n\t                        this.controls[control] = cntrl;\n\t                        break;\n\t                }\n\t            }, this);\n\t        }\n\t    },\n\t\n\t    loadBaseLayers: function loadBaseLayers() {\n\t        'use strict';\n\t\n\t        GV.config.baseLayers.forEach(function (layerConfig) {\n\t            var layer = layerFactory.create(layerConfig, this);\n\t            this.baseLayers[layer.config.type] = layer;\n\t            if (layer && layerConfig.visible) {\n\t                layer.on('loading', function () {\n\t                    this.loading(true, layer);\n\t                }, this);\n\t                layer.on('load', function () {\n\t                    this.loading(false, layer);\n\t                }, this);\n\t                layer.addTo(this);\n\t            }\n\t        }, this);\n\t    },\n\t\n\t    loadLayers: function loadLayers(layers) {\n\t        'use strict';\n\t\n\t        layers.forEach(function (layerConfig) {\n\t            if (!this.getLayerByName(layerConfig.name)) {\n\t                var layer = layerFactory.create(layerConfig, this);\n\t                if (layer && layerConfig.visible) {\n\t                    layer.on('loading', function () {\n\t                        this.loading(true, layer);\n\t                    }, this);\n\t                    layer.on('load', function () {\n\t                        this.loading(false, layer);\n\t                    }, this);\n\t                    layer.addTo(this);\n\t                }\n\t            }\n\t        }, this);\n\t    },\n\t\n\t    getLayerByName: function getLayerByName(layerName) {\n\t        var foundLayer = null;\n\t        this.eachLayer(function (layer) {\n\t            if (layer.config && layer.config.name && layer.config.name === layerName) {\n\t                foundLayer = layer;\n\t            }\n\t        });\n\t        return foundLayer;\n\t    },\n\t\n\t    changeBaseLayer: function changeBaseLayer(layerName) {\n\t        var activeLayerName = GV.config.getActiveBaseLayer().name;\n\t        if (activeLayerName !== layerName) {\n\t            this.removeLayer(this.baseLayers[activeLayerName]);\n\t            this.baseLayers[layerName].addTo(this);\n\t            GV.config.setActiveBaseLayer(layerName);\n\t        }\n\t    },\n\t\n\t    getScaleLabel: function getScaleLabel() {\n\t        'use strict';\n\t\n\t        return _globals2.default.BASE_SCALE_LABELS[this._zoom];\n\t    },\n\t\n\t    getScale: function getScale() {\n\t        'use strict';\n\t\n\t        return _globals2.default.BASE_SCALES[this._zoom];\n\t    },\n\t\n\t    setLoading: function setLoading() {\n\t        this._spinning = 0;\n\t        this.on('layerremove', function (e) {\n\t            if (e.layer.loading) {\n\t                this.loading(false);\n\t            }\n\t            if (typeof e.layer.on !== 'function') {\n\t                return;\n\t            }\n\t            e.layer.off('load');\n\t            e.layer.off('loading');\n\t        }, this);\n\t    },\n\t\n\t    loading: function loading(state, layer) {\n\t\n\t        if (state) {\n\t            if (this._spinning === 0) {\n\t                GV.log('start load: ' + layer.config.name);\n\t                this._container.style.cursor = 'progress';\n\t            }\n\t            this._spinning++;\n\t        } else {\n\t            this._spinning--;\n\t            if (this._spinning <= 0) {\n\t                GV.log('end load: ' + layer.config.name);\n\t                this._container.style.cursor = 'default';\n\t            }\n\t        }\n\t    },\n\t\n\t    addMarker: function addMarker(markerConfig) {\n\t        var icon = _leaflet2.default.icon({\n\t            iconUrl: 'http://srvcarto.regione.liguria.it/geoviewer2/static/img/marker-icon.png',\n\t            iconSize: [25, 41],\n\t            iconAnchor: [12, 41],\n\t            popupAnchor: [0, -41]\n\t        });\n\t        var opts = {\n\t            opacity: 0.8,\n\t            icon: icon,\n\t            title: markerConfig.label\n\t        };\n\t\n\t        if (markerConfig.type === 'circle') {\n\t            _leaflet2.default.circleMarker(markerConfig.location, opts).addTo(this);\n\t        } else {\n\t            _leaflet2.default.marker(markerConfig.location, opts).addTo(this);\n\t        }\n\t        this.setView(markerConfig.location, markerConfig.zoomLevel || 14);\n\t    }\n\t\n\t});\n\t\n\texports.default = Map;\n\n/***/ }),\n\n/***/ 183:\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t;(function (window, document, undefined) {\n\t\n\t  L.MarkerClusterGroup = L.FeatureGroup.extend({\n\t\n\t    options: {\n\t      maxClusterRadius: 80,\n\t      iconCreateFunction: null,\n\t\n\t      spiderfyOnMaxZoom: true,\n\t      showCoverageOnHover: true,\n\t      zoomToBoundsOnClick: true,\n\t      singleMarkerMode: false,\n\t\n\t      disableClusteringAtZoom: null,\n\t\n\t      removeOutsideVisibleBounds: true,\n\t\n\t      animate: true,\n\t\n\t      animateAddingMarkers: false,\n\t\n\t      spiderfyDistanceMultiplier: 1,\n\t\n\t      spiderLegPolylineOptions: { weight: 1.5, color: '#222', opacity: 0.5 },\n\t\n\t      chunkedLoading: false,\n\t      chunkInterval: 200,\n\t      chunkDelay: 50,\n\t      chunkProgress: null,\n\t      polygonOptions: {}\n\t    },\n\t\n\t    initialize: function initialize(options) {\n\t      L.Util.setOptions(this, options);\n\t      if (!this.options.iconCreateFunction) {\n\t        this.options.iconCreateFunction = this._defaultIconCreateFunction;\n\t      }\n\t\n\t      this._featureGroup = L.featureGroup();\n\t      this._featureGroup.addEventParent(this);\n\t\n\t      this._nonPointGroup = L.featureGroup();\n\t      this._nonPointGroup.addEventParent(this);\n\t\n\t      this._inZoomAnimation = 0;\n\t      this._needsClustering = [];\n\t      this._needsRemoving = [];\n\t      this._currentShownBounds = null;\n\t\n\t      this._queue = [];\n\t\n\t      var animate = L.DomUtil.TRANSITION && this.options.animate;\n\t      L.extend(this, animate ? this._withAnimation : this._noAnimation);\n\t\n\t      this._markerCluster = animate ? L.MarkerCluster : L.MarkerClusterNonAnimated;\n\t    },\n\t\n\t    addLayer: function addLayer(layer) {\n\t\n\t      if (layer instanceof L.LayerGroup) {\n\t        return this.addLayers([layer]);\n\t      }\n\t\n\t      if (!layer.getLatLng) {\n\t        this._nonPointGroup.addLayer(layer);\n\t        return this;\n\t      }\n\t\n\t      if (!this._map) {\n\t        this._needsClustering.push(layer);\n\t        return this;\n\t      }\n\t\n\t      if (this.hasLayer(layer)) {\n\t        return this;\n\t      }\n\t\n\t      if (this._unspiderfy) {\n\t        this._unspiderfy();\n\t      }\n\t\n\t      this._addLayer(layer, this._maxZoom);\n\t\n\t      this._topClusterLevel._recalculateBounds();\n\t\n\t      var visibleLayer = layer,\n\t          currentZoom = this._map.getZoom();\n\t      if (layer.__parent) {\n\t        while (visibleLayer.__parent._zoom >= currentZoom) {\n\t          visibleLayer = visibleLayer.__parent;\n\t        }\n\t      }\n\t\n\t      if (this._currentShownBounds.contains(visibleLayer.getLatLng())) {\n\t        if (this.options.animateAddingMarkers) {\n\t          this._animationAddLayer(layer, visibleLayer);\n\t        } else {\n\t          this._animationAddLayerNonAnimated(layer, visibleLayer);\n\t        }\n\t      }\n\t      return this;\n\t    },\n\t\n\t    removeLayer: function removeLayer(layer) {\n\t\n\t      if (layer instanceof L.LayerGroup) {\n\t        return this.removeLayers([layer]);\n\t      }\n\t\n\t      if (!layer.getLatLng) {\n\t        this._nonPointGroup.removeLayer(layer);\n\t        return this;\n\t      }\n\t\n\t      if (!this._map) {\n\t        if (!this._arraySplice(this._needsClustering, layer) && this.hasLayer(layer)) {\n\t          this._needsRemoving.push(layer);\n\t        }\n\t        return this;\n\t      }\n\t\n\t      if (!layer.__parent) {\n\t        return this;\n\t      }\n\t\n\t      if (this._unspiderfy) {\n\t        this._unspiderfy();\n\t        this._unspiderfyLayer(layer);\n\t      }\n\t\n\t      this._removeLayer(layer, true);\n\t\n\t      this._topClusterLevel._recalculateBounds();\n\t\n\t      layer.off('move', this._childMarkerMoved, this);\n\t\n\t      if (this._featureGroup.hasLayer(layer)) {\n\t        this._featureGroup.removeLayer(layer);\n\t        if (layer.clusterShow) {\n\t          layer.clusterShow();\n\t        }\n\t      }\n\t\n\t      return this;\n\t    },\n\t\n\t    addLayers: function addLayers(layersArray) {\n\t      if (!L.Util.isArray(layersArray)) {\n\t        return this.addLayer(layersArray);\n\t      }\n\t\n\t      var fg = this._featureGroup,\n\t          npg = this._nonPointGroup,\n\t          chunked = this.options.chunkedLoading,\n\t          chunkInterval = this.options.chunkInterval,\n\t          chunkProgress = this.options.chunkProgress,\n\t          l = layersArray.length,\n\t          offset = 0,\n\t          originalArray = true,\n\t          m;\n\t\n\t      if (this._map) {\n\t        var started = new Date().getTime();\n\t        var process = L.bind(function () {\n\t          var start = new Date().getTime();\n\t          for (; offset < l; offset++) {\n\t            if (chunked && offset % 200 === 0) {\n\t              var elapsed = new Date().getTime() - start;\n\t              if (elapsed > chunkInterval) {\n\t                break;\n\t              }\n\t            }\n\t\n\t            m = layersArray[offset];\n\t\n\t            if (m instanceof L.LayerGroup) {\n\t              if (originalArray) {\n\t                layersArray = layersArray.slice();\n\t                originalArray = false;\n\t              }\n\t              this._extractNonGroupLayers(m, layersArray);\n\t              l = layersArray.length;\n\t              continue;\n\t            }\n\t\n\t            if (!m.getLatLng) {\n\t              npg.addLayer(m);\n\t              continue;\n\t            }\n\t\n\t            if (this.hasLayer(m)) {\n\t              continue;\n\t            }\n\t\n\t            this._addLayer(m, this._maxZoom);\n\t\n\t            if (m.__parent) {\n\t              if (m.__parent.getChildCount() === 2) {\n\t                var markers = m.__parent.getAllChildMarkers(),\n\t                    otherMarker = markers[0] === m ? markers[1] : markers[0];\n\t                fg.removeLayer(otherMarker);\n\t              }\n\t            }\n\t          }\n\t\n\t          if (chunkProgress) {\n\t            chunkProgress(offset, l, new Date().getTime() - started);\n\t          }\n\t\n\t          if (offset === l) {\n\t            this._topClusterLevel._recalculateBounds();\n\t\n\t            this._featureGroup.eachLayer(function (c) {\n\t              if (c instanceof L.MarkerCluster && c._iconNeedsUpdate) {\n\t                c._updateIcon();\n\t              }\n\t            });\n\t\n\t            this._topClusterLevel._recursivelyAddChildrenToMap(null, this._zoom, this._currentShownBounds);\n\t          } else {\n\t            setTimeout(process, this.options.chunkDelay);\n\t          }\n\t        }, this);\n\t\n\t        process();\n\t      } else {\n\t        var needsClustering = this._needsClustering;\n\t\n\t        for (; offset < l; offset++) {\n\t          m = layersArray[offset];\n\t\n\t          if (m instanceof L.LayerGroup) {\n\t            if (originalArray) {\n\t              layersArray = layersArray.slice();\n\t              originalArray = false;\n\t            }\n\t            this._extractNonGroupLayers(m, layersArray);\n\t            l = layersArray.length;\n\t            continue;\n\t          }\n\t\n\t          if (!m.getLatLng) {\n\t            npg.addLayer(m);\n\t            continue;\n\t          }\n\t\n\t          if (this.hasLayer(m)) {\n\t            continue;\n\t          }\n\t\n\t          needsClustering.push(m);\n\t        }\n\t      }\n\t      return this;\n\t    },\n\t\n\t    removeLayers: function removeLayers(layersArray) {\n\t      var i,\n\t          m,\n\t          l = layersArray.length,\n\t          fg = this._featureGroup,\n\t          npg = this._nonPointGroup,\n\t          originalArray = true;\n\t\n\t      if (!this._map) {\n\t        for (i = 0; i < l; i++) {\n\t          m = layersArray[i];\n\t\n\t          if (m instanceof L.LayerGroup) {\n\t            if (originalArray) {\n\t              layersArray = layersArray.slice();\n\t              originalArray = false;\n\t            }\n\t            this._extractNonGroupLayers(m, layersArray);\n\t            l = layersArray.length;\n\t            continue;\n\t          }\n\t\n\t          this._arraySplice(this._needsClustering, m);\n\t          npg.removeLayer(m);\n\t          if (this.hasLayer(m)) {\n\t            this._needsRemoving.push(m);\n\t          }\n\t        }\n\t        return this;\n\t      }\n\t\n\t      if (this._unspiderfy) {\n\t        this._unspiderfy();\n\t\n\t        var layersArray2 = layersArray.slice(),\n\t            l2 = l;\n\t        for (i = 0; i < l2; i++) {\n\t          m = layersArray2[i];\n\t\n\t          if (m instanceof L.LayerGroup) {\n\t            this._extractNonGroupLayers(m, layersArray2);\n\t            l2 = layersArray2.length;\n\t            continue;\n\t          }\n\t\n\t          this._unspiderfyLayer(m);\n\t        }\n\t      }\n\t\n\t      for (i = 0; i < l; i++) {\n\t        m = layersArray[i];\n\t\n\t        if (m instanceof L.LayerGroup) {\n\t          if (originalArray) {\n\t            layersArray = layersArray.slice();\n\t            originalArray = false;\n\t          }\n\t          this._extractNonGroupLayers(m, layersArray);\n\t          l = layersArray.length;\n\t          continue;\n\t        }\n\t\n\t        if (!m.__parent) {\n\t          npg.removeLayer(m);\n\t          continue;\n\t        }\n\t\n\t        this._removeLayer(m, true, true);\n\t\n\t        if (fg.hasLayer(m)) {\n\t          fg.removeLayer(m);\n\t          if (m.clusterShow) {\n\t            m.clusterShow();\n\t          }\n\t        }\n\t      }\n\t\n\t      this._topClusterLevel._recalculateBounds();\n\t\n\t      this._topClusterLevel._recursivelyAddChildrenToMap(null, this._zoom, this._currentShownBounds);\n\t\n\t      fg.eachLayer(function (c) {\n\t        if (c instanceof L.MarkerCluster) {\n\t          c._updateIcon();\n\t        }\n\t      });\n\t\n\t      return this;\n\t    },\n\t\n\t    clearLayers: function clearLayers() {\n\t      if (!this._map) {\n\t        this._needsClustering = [];\n\t        delete this._gridClusters;\n\t        delete this._gridUnclustered;\n\t      }\n\t\n\t      if (this._noanimationUnspiderfy) {\n\t        this._noanimationUnspiderfy();\n\t      }\n\t\n\t      this._featureGroup.clearLayers();\n\t      this._nonPointGroup.clearLayers();\n\t\n\t      this.eachLayer(function (marker) {\n\t        marker.off('move', this._childMarkerMoved, this);\n\t        delete marker.__parent;\n\t      });\n\t\n\t      if (this._map) {\n\t        this._generateInitialClusters();\n\t      }\n\t\n\t      return this;\n\t    },\n\t\n\t    getBounds: function getBounds() {\n\t      var bounds = new L.LatLngBounds();\n\t\n\t      if (this._topClusterLevel) {\n\t        bounds.extend(this._topClusterLevel._bounds);\n\t      }\n\t\n\t      for (var i = this._needsClustering.length - 1; i >= 0; i--) {\n\t        bounds.extend(this._needsClustering[i].getLatLng());\n\t      }\n\t\n\t      bounds.extend(this._nonPointGroup.getBounds());\n\t\n\t      return bounds;\n\t    },\n\t\n\t    eachLayer: function eachLayer(method, context) {\n\t      var markers = this._needsClustering.slice(),\n\t          needsRemoving = this._needsRemoving,\n\t          i;\n\t\n\t      if (this._topClusterLevel) {\n\t        this._topClusterLevel.getAllChildMarkers(markers);\n\t      }\n\t\n\t      for (i = markers.length - 1; i >= 0; i--) {\n\t        if (needsRemoving.indexOf(markers[i]) === -1) {\n\t          method.call(context, markers[i]);\n\t        }\n\t      }\n\t\n\t      this._nonPointGroup.eachLayer(method, context);\n\t    },\n\t\n\t    getLayers: function getLayers() {\n\t      var layers = [];\n\t      this.eachLayer(function (l) {\n\t        layers.push(l);\n\t      });\n\t      return layers;\n\t    },\n\t\n\t    getLayer: function getLayer(id) {\n\t      var result = null;\n\t\n\t      id = parseInt(id, 10);\n\t\n\t      this.eachLayer(function (l) {\n\t        if (L.stamp(l) === id) {\n\t          result = l;\n\t        }\n\t      });\n\t\n\t      return result;\n\t    },\n\t\n\t    hasLayer: function hasLayer(layer) {\n\t      if (!layer) {\n\t        return false;\n\t      }\n\t\n\t      var i,\n\t          anArray = this._needsClustering;\n\t\n\t      for (i = anArray.length - 1; i >= 0; i--) {\n\t        if (anArray[i] === layer) {\n\t          return true;\n\t        }\n\t      }\n\t\n\t      anArray = this._needsRemoving;\n\t      for (i = anArray.length - 1; i >= 0; i--) {\n\t        if (anArray[i] === layer) {\n\t          return false;\n\t        }\n\t      }\n\t\n\t      return !!(layer.__parent && layer.__parent._group === this) || this._nonPointGroup.hasLayer(layer);\n\t    },\n\t\n\t    zoomToShowLayer: function zoomToShowLayer(layer, callback) {\n\t\n\t      if (typeof callback !== 'function') {\n\t        callback = function callback() {};\n\t      }\n\t\n\t      var showMarker = function showMarker() {\n\t        if ((layer._icon || layer.__parent._icon) && !this._inZoomAnimation) {\n\t          this._map.off('moveend', showMarker, this);\n\t          this.off('animationend', showMarker, this);\n\t\n\t          if (layer._icon) {\n\t            callback();\n\t          } else if (layer.__parent._icon) {\n\t            this.once('spiderfied', callback, this);\n\t            layer.__parent.spiderfy();\n\t          }\n\t        }\n\t      };\n\t\n\t      if (layer._icon && this._map.getBounds().contains(layer.getLatLng())) {\n\t        callback();\n\t      } else if (layer.__parent._zoom < this._map.getZoom()) {\n\t        this._map.on('moveend', showMarker, this);\n\t        this._map.panTo(layer.getLatLng());\n\t      } else {\n\t        var _moveStart = function moveStart() {\n\t          this._map.off('movestart', _moveStart, this);\n\t          _moveStart = null;\n\t        };\n\t\n\t        this._map.on('movestart', _moveStart, this);\n\t        this._map.on('moveend', showMarker, this);\n\t        this.on('animationend', showMarker, this);\n\t        layer.__parent.zoomToBounds();\n\t\n\t        if (_moveStart) {\n\t          showMarker.call(this);\n\t        }\n\t      }\n\t    },\n\t\n\t    onAdd: function onAdd(map) {\n\t      this._map = map;\n\t      var i, l, layer;\n\t\n\t      if (!isFinite(this._map.getMaxZoom())) {\n\t        throw \"Map has no maxZoom specified\";\n\t      }\n\t\n\t      this._featureGroup.addTo(map);\n\t      this._nonPointGroup.addTo(map);\n\t\n\t      if (!this._gridClusters) {\n\t        this._generateInitialClusters();\n\t      }\n\t\n\t      this._maxLat = map.options.crs.projection.MAX_LATITUDE;\n\t\n\t      for (i = 0, l = this._needsRemoving.length; i < l; i++) {\n\t        layer = this._needsRemoving[i];\n\t        this._removeLayer(layer, true);\n\t      }\n\t      this._needsRemoving = [];\n\t\n\t      this._zoom = this._map.getZoom();\n\t      this._currentShownBounds = this._getExpandedVisibleBounds();\n\t\n\t      this._map.on('zoomend', this._zoomEnd, this);\n\t      this._map.on('moveend', this._moveEnd, this);\n\t\n\t      if (this._spiderfierOnAdd) {\n\t        this._spiderfierOnAdd();\n\t      }\n\t\n\t      this._bindEvents();\n\t\n\t      l = this._needsClustering;\n\t      this._needsClustering = [];\n\t      this.addLayers(l);\n\t    },\n\t\n\t    onRemove: function onRemove(map) {\n\t      map.off('zoomend', this._zoomEnd, this);\n\t      map.off('moveend', this._moveEnd, this);\n\t\n\t      this._unbindEvents();\n\t\n\t      this._map._mapPane.className = this._map._mapPane.className.replace(' leaflet-cluster-anim', '');\n\t\n\t      if (this._spiderfierOnRemove) {\n\t        this._spiderfierOnRemove();\n\t      }\n\t\n\t      delete this._maxLat;\n\t\n\t      this._hideCoverage();\n\t      this._featureGroup.remove();\n\t      this._nonPointGroup.remove();\n\t\n\t      this._featureGroup.clearLayers();\n\t\n\t      this._map = null;\n\t    },\n\t\n\t    getVisibleParent: function getVisibleParent(marker) {\n\t      var vMarker = marker;\n\t      while (vMarker && !vMarker._icon) {\n\t        vMarker = vMarker.__parent;\n\t      }\n\t      return vMarker || null;\n\t    },\n\t\n\t    _arraySplice: function _arraySplice(anArray, obj) {\n\t      for (var i = anArray.length - 1; i >= 0; i--) {\n\t        if (anArray[i] === obj) {\n\t          anArray.splice(i, 1);\n\t          return true;\n\t        }\n\t      }\n\t    },\n\t\n\t    _removeFromGridUnclustered: function _removeFromGridUnclustered(marker, z) {\n\t      var map = this._map,\n\t          gridUnclustered = this._gridUnclustered;\n\t\n\t      for (; z >= 0; z--) {\n\t        if (!gridUnclustered[z].removeObject(marker, map.project(marker.getLatLng(), z))) {\n\t          break;\n\t        }\n\t      }\n\t    },\n\t\n\t    _childMarkerMoved: function _childMarkerMoved(e) {\n\t      if (!this._ignoreMove) {\n\t        e.target._latlng = e.oldLatLng;\n\t        this.removeLayer(e.target);\n\t\n\t        e.target._latlng = e.latlng;\n\t        this.addLayer(e.target);\n\t      }\n\t    },\n\t\n\t    _removeLayer: function _removeLayer(marker, removeFromDistanceGrid, dontUpdateMap) {\n\t      var gridClusters = this._gridClusters,\n\t          gridUnclustered = this._gridUnclustered,\n\t          fg = this._featureGroup,\n\t          map = this._map;\n\t\n\t      if (removeFromDistanceGrid) {\n\t        this._removeFromGridUnclustered(marker, this._maxZoom);\n\t      }\n\t\n\t      var cluster = marker.__parent,\n\t          markers = cluster._markers,\n\t          otherMarker;\n\t\n\t      this._arraySplice(markers, marker);\n\t\n\t      while (cluster) {\n\t        cluster._childCount--;\n\t        cluster._boundsNeedUpdate = true;\n\t\n\t        if (cluster._zoom < 0) {\n\t          break;\n\t        } else if (removeFromDistanceGrid && cluster._childCount <= 1) {\n\t          otherMarker = cluster._markers[0] === marker ? cluster._markers[1] : cluster._markers[0];\n\t\n\t          gridClusters[cluster._zoom].removeObject(cluster, map.project(cluster._cLatLng, cluster._zoom));\n\t          gridUnclustered[cluster._zoom].addObject(otherMarker, map.project(otherMarker.getLatLng(), cluster._zoom));\n\t\n\t          this._arraySplice(cluster.__parent._childClusters, cluster);\n\t          cluster.__parent._markers.push(otherMarker);\n\t          otherMarker.__parent = cluster.__parent;\n\t\n\t          if (cluster._icon) {\n\t            fg.removeLayer(cluster);\n\t            if (!dontUpdateMap) {\n\t              fg.addLayer(otherMarker);\n\t            }\n\t          }\n\t        } else {\n\t          if (!dontUpdateMap || !cluster._icon) {\n\t            cluster._updateIcon();\n\t          }\n\t        }\n\t\n\t        cluster = cluster.__parent;\n\t      }\n\t\n\t      delete marker.__parent;\n\t    },\n\t\n\t    _isOrIsParent: function _isOrIsParent(el, oel) {\n\t      while (oel) {\n\t        if (el === oel) {\n\t          return true;\n\t        }\n\t        oel = oel.parentNode;\n\t      }\n\t      return false;\n\t    },\n\t\n\t    fire: function fire(type, data, propagate) {\n\t      if (data && data.layer instanceof L.MarkerCluster) {\n\t        if (data.originalEvent && this._isOrIsParent(data.layer._icon, data.originalEvent.relatedTarget)) {\n\t          return;\n\t        }\n\t        type = 'cluster' + type;\n\t      }\n\t\n\t      L.FeatureGroup.prototype.fire.call(this, type, data, propagate);\n\t    },\n\t\n\t    listens: function listens(type, propagate) {\n\t      return L.FeatureGroup.prototype.listens.call(this, type, propagate) || L.FeatureGroup.prototype.listens.call(this, 'cluster' + type, propagate);\n\t    },\n\t\n\t    _defaultIconCreateFunction: function _defaultIconCreateFunction(cluster) {\n\t      var childCount = cluster.getChildCount();\n\t\n\t      var c = ' marker-cluster-';\n\t      if (childCount < 10) {\n\t        c += 'small';\n\t      } else if (childCount < 100) {\n\t        c += 'medium';\n\t      } else {\n\t        c += 'large';\n\t      }\n\t\n\t      return new L.DivIcon({\n\t        html: '<div><span>' + childCount + '</span></div>',\n\t        className: 'marker-cluster' + c,\n\t        iconSize: new L.Point(40, 40)\n\t      });\n\t    },\n\t\n\t    _bindEvents: function _bindEvents() {\n\t      var map = this._map,\n\t          spiderfyOnMaxZoom = this.options.spiderfyOnMaxZoom,\n\t          showCoverageOnHover = this.options.showCoverageOnHover,\n\t          zoomToBoundsOnClick = this.options.zoomToBoundsOnClick;\n\t\n\t      if (spiderfyOnMaxZoom || zoomToBoundsOnClick) {\n\t        this.on('clusterclick', this._zoomOrSpiderfy, this);\n\t      }\n\t\n\t      if (showCoverageOnHover) {\n\t        this.on('clustermouseover', this._showCoverage, this);\n\t        this.on('clustermouseout', this._hideCoverage, this);\n\t        map.on('zoomend', this._hideCoverage, this);\n\t      }\n\t    },\n\t\n\t    _zoomOrSpiderfy: function _zoomOrSpiderfy(e) {\n\t      var cluster = e.layer,\n\t          bottomCluster = cluster;\n\t\n\t      while (bottomCluster._childClusters.length === 1) {\n\t        bottomCluster = bottomCluster._childClusters[0];\n\t      }\n\t\n\t      if (bottomCluster._zoom === this._maxZoom && bottomCluster._childCount === cluster._childCount && this.options.spiderfyOnMaxZoom) {\n\t        cluster.spiderfy();\n\t      } else if (this.options.zoomToBoundsOnClick) {\n\t        cluster.zoomToBounds();\n\t      }\n\t\n\t      if (e.originalEvent && e.originalEvent.keyCode === 13) {\n\t        this._map._container.focus();\n\t      }\n\t    },\n\t\n\t    _showCoverage: function _showCoverage(e) {\n\t      var map = this._map;\n\t      if (this._inZoomAnimation) {\n\t        return;\n\t      }\n\t      if (this._shownPolygon) {\n\t        map.removeLayer(this._shownPolygon);\n\t      }\n\t      if (e.layer.getChildCount() > 2 && e.layer !== this._spiderfied) {\n\t        this._shownPolygon = new L.Polygon(e.layer.getConvexHull(), this.options.polygonOptions);\n\t        map.addLayer(this._shownPolygon);\n\t      }\n\t    },\n\t\n\t    _hideCoverage: function _hideCoverage() {\n\t      if (this._shownPolygon) {\n\t        this._map.removeLayer(this._shownPolygon);\n\t        this._shownPolygon = null;\n\t      }\n\t    },\n\t\n\t    _unbindEvents: function _unbindEvents() {\n\t      var spiderfyOnMaxZoom = this.options.spiderfyOnMaxZoom,\n\t          showCoverageOnHover = this.options.showCoverageOnHover,\n\t          zoomToBoundsOnClick = this.options.zoomToBoundsOnClick,\n\t          map = this._map;\n\t\n\t      if (spiderfyOnMaxZoom || zoomToBoundsOnClick) {\n\t        this.off('clusterclick', this._zoomOrSpiderfy, this);\n\t      }\n\t      if (showCoverageOnHover) {\n\t        this.off('clustermouseover', this._showCoverage, this);\n\t        this.off('clustermouseout', this._hideCoverage, this);\n\t        map.off('zoomend', this._hideCoverage, this);\n\t      }\n\t    },\n\t\n\t    _zoomEnd: function _zoomEnd() {\n\t      if (!this._map) {\n\t        return;\n\t      }\n\t      this._mergeSplitClusters();\n\t\n\t      this._zoom = Math.round(this._map._zoom);\n\t      this._currentShownBounds = this._getExpandedVisibleBounds();\n\t    },\n\t\n\t    _moveEnd: function _moveEnd() {\n\t      if (this._inZoomAnimation) {\n\t        return;\n\t      }\n\t\n\t      var newBounds = this._getExpandedVisibleBounds();\n\t\n\t      this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, this._zoom, newBounds);\n\t      this._topClusterLevel._recursivelyAddChildrenToMap(null, Math.round(this._map._zoom), newBounds);\n\t\n\t      this._currentShownBounds = newBounds;\n\t      return;\n\t    },\n\t\n\t    _generateInitialClusters: function _generateInitialClusters() {\n\t      var maxZoom = this._map.getMaxZoom(),\n\t          radius = this.options.maxClusterRadius,\n\t          radiusFn = radius;\n\t\n\t      if (typeof radius !== \"function\") {\n\t        radiusFn = function radiusFn() {\n\t          return radius;\n\t        };\n\t      }\n\t\n\t      if (this.options.disableClusteringAtZoom) {\n\t        maxZoom = this.options.disableClusteringAtZoom - 1;\n\t      }\n\t      this._maxZoom = maxZoom;\n\t      this._gridClusters = {};\n\t      this._gridUnclustered = {};\n\t\n\t      for (var zoom = maxZoom; zoom >= 0; zoom--) {\n\t        this._gridClusters[zoom] = new L.DistanceGrid(radiusFn(zoom));\n\t        this._gridUnclustered[zoom] = new L.DistanceGrid(radiusFn(zoom));\n\t      }\n\t\n\t      this._topClusterLevel = new this._markerCluster(this, -1);\n\t    },\n\t\n\t    _addLayer: function _addLayer(layer, zoom) {\n\t      var gridClusters = this._gridClusters,\n\t          gridUnclustered = this._gridUnclustered,\n\t          markerPoint,\n\t          z;\n\t\n\t      if (this.options.singleMarkerMode) {\n\t        this._overrideMarkerIcon(layer);\n\t      }\n\t\n\t      layer.on('move', this._childMarkerMoved, this);\n\t\n\t      for (; zoom >= 0; zoom--) {\n\t        markerPoint = this._map.project(layer.getLatLng(), zoom);\n\t        var closest = gridClusters[zoom].getNearObject(markerPoint);\n\t        if (closest) {\n\t          closest._addChild(layer);\n\t          layer.__parent = closest;\n\t          return;\n\t        }\n\t\n\t        closest = gridUnclustered[zoom].getNearObject(markerPoint);\n\t        if (closest) {\n\t          var parent = closest.__parent;\n\t          if (parent) {\n\t            this._removeLayer(closest, false);\n\t          }\n\t\n\t          var newCluster = new this._markerCluster(this, zoom, closest, layer);\n\t          gridClusters[zoom].addObject(newCluster, this._map.project(newCluster._cLatLng, zoom));\n\t          closest.__parent = newCluster;\n\t          layer.__parent = newCluster;\n\t\n\t          var lastParent = newCluster;\n\t          for (z = zoom - 1; z > parent._zoom; z--) {\n\t            lastParent = new this._markerCluster(this, z, lastParent);\n\t            gridClusters[z].addObject(lastParent, this._map.project(closest.getLatLng(), z));\n\t          }\n\t          parent._addChild(lastParent);\n\t\n\t          this._removeFromGridUnclustered(closest, zoom);\n\t\n\t          return;\n\t        }\n\t\n\t        gridUnclustered[zoom].addObject(layer, markerPoint);\n\t      }\n\t\n\t      this._topClusterLevel._addChild(layer);\n\t      layer.__parent = this._topClusterLevel;\n\t      return;\n\t    },\n\t\n\t    _enqueue: function _enqueue(fn) {\n\t      this._queue.push(fn);\n\t      if (!this._queueTimeout) {\n\t        this._queueTimeout = setTimeout(L.bind(this._processQueue, this), 300);\n\t      }\n\t    },\n\t    _processQueue: function _processQueue() {\n\t      for (var i = 0; i < this._queue.length; i++) {\n\t        this._queue[i].call(this);\n\t      }\n\t      this._queue.length = 0;\n\t      clearTimeout(this._queueTimeout);\n\t      this._queueTimeout = null;\n\t    },\n\t\n\t    _mergeSplitClusters: function _mergeSplitClusters() {\n\t      var mapZoom = Math.round(this._map._zoom);\n\t\n\t      this._processQueue();\n\t\n\t      if (this._zoom < mapZoom && this._currentShownBounds.intersects(this._getExpandedVisibleBounds())) {\n\t        this._animationStart();\n\t\n\t        this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, this._zoom, this._getExpandedVisibleBounds());\n\t\n\t        this._animationZoomIn(this._zoom, mapZoom);\n\t      } else if (this._zoom > mapZoom) {\n\t        this._animationStart();\n\t\n\t        this._animationZoomOut(this._zoom, mapZoom);\n\t      } else {\n\t        this._moveEnd();\n\t      }\n\t    },\n\t\n\t    _getExpandedVisibleBounds: function _getExpandedVisibleBounds() {\n\t      if (!this.options.removeOutsideVisibleBounds) {\n\t        return this._mapBoundsInfinite;\n\t      } else if (L.Browser.mobile) {\n\t        return this._checkBoundsMaxLat(this._map.getBounds());\n\t      }\n\t\n\t      return this._checkBoundsMaxLat(this._map.getBounds().pad(1));\n\t    },\n\t\n\t    _checkBoundsMaxLat: function _checkBoundsMaxLat(bounds) {\n\t      var maxLat = this._maxLat;\n\t\n\t      if (maxLat !== undefined) {\n\t        if (bounds.getNorth() >= maxLat) {\n\t          bounds._northEast.lat = Infinity;\n\t        }\n\t        if (bounds.getSouth() <= -maxLat) {\n\t          bounds._southWest.lat = -Infinity;\n\t        }\n\t      }\n\t\n\t      return bounds;\n\t    },\n\t\n\t    _animationAddLayerNonAnimated: function _animationAddLayerNonAnimated(layer, newCluster) {\n\t      if (newCluster === layer) {\n\t        this._featureGroup.addLayer(layer);\n\t      } else if (newCluster._childCount === 2) {\n\t        newCluster._addToMap();\n\t\n\t        var markers = newCluster.getAllChildMarkers();\n\t        this._featureGroup.removeLayer(markers[0]);\n\t        this._featureGroup.removeLayer(markers[1]);\n\t      } else {\n\t        newCluster._updateIcon();\n\t      }\n\t    },\n\t\n\t    _extractNonGroupLayers: function _extractNonGroupLayers(group, output) {\n\t      var layers = group.getLayers(),\n\t          i = 0,\n\t          layer;\n\t\n\t      output = output || [];\n\t\n\t      for (; i < layers.length; i++) {\n\t        layer = layers[i];\n\t\n\t        if (layer instanceof L.LayerGroup) {\n\t          this._extractNonGroupLayers(layer, output);\n\t          continue;\n\t        }\n\t\n\t        output.push(layer);\n\t      }\n\t\n\t      return output;\n\t    },\n\t\n\t    _overrideMarkerIcon: function _overrideMarkerIcon(layer) {\n\t      var icon = layer.options.icon = this.options.iconCreateFunction({\n\t        getChildCount: function getChildCount() {\n\t          return 1;\n\t        },\n\t        getAllChildMarkers: function getAllChildMarkers() {\n\t          return [layer];\n\t        }\n\t      });\n\t\n\t      return icon;\n\t    }\n\t  });\n\t\n\t  L.MarkerClusterGroup.include({\n\t    _mapBoundsInfinite: new L.LatLngBounds(new L.LatLng(-Infinity, -Infinity), new L.LatLng(Infinity, Infinity))\n\t  });\n\t\n\t  L.MarkerClusterGroup.include({\n\t    _noAnimation: {\n\t      _animationStart: function _animationStart() {},\n\t      _animationZoomIn: function _animationZoomIn(previousZoomLevel, newZoomLevel) {\n\t        this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, previousZoomLevel);\n\t        this._topClusterLevel._recursivelyAddChildrenToMap(null, newZoomLevel, this._getExpandedVisibleBounds());\n\t\n\t        this.fire('animationend');\n\t      },\n\t      _animationZoomOut: function _animationZoomOut(previousZoomLevel, newZoomLevel) {\n\t        this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, previousZoomLevel);\n\t        this._topClusterLevel._recursivelyAddChildrenToMap(null, newZoomLevel, this._getExpandedVisibleBounds());\n\t\n\t        this.fire('animationend');\n\t      },\n\t      _animationAddLayer: function _animationAddLayer(layer, newCluster) {\n\t        this._animationAddLayerNonAnimated(layer, newCluster);\n\t      }\n\t    },\n\t\n\t    _withAnimation: {\n\t      _animationStart: function _animationStart() {\n\t        this._map._mapPane.className += ' leaflet-cluster-anim';\n\t        this._inZoomAnimation++;\n\t      },\n\t\n\t      _animationZoomIn: function _animationZoomIn(previousZoomLevel, newZoomLevel) {\n\t        var bounds = this._getExpandedVisibleBounds(),\n\t            fg = this._featureGroup,\n\t            i;\n\t\n\t        this._ignoreMove = true;\n\t\n\t        this._topClusterLevel._recursively(bounds, previousZoomLevel, 0, function (c) {\n\t          var startPos = c._latlng,\n\t              markers = c._markers,\n\t              m;\n\t\n\t          if (!bounds.contains(startPos)) {\n\t            startPos = null;\n\t          }\n\t\n\t          if (c._isSingleParent() && previousZoomLevel + 1 === newZoomLevel) {\n\t            fg.removeLayer(c);\n\t            c._recursivelyAddChildrenToMap(null, newZoomLevel, bounds);\n\t          } else {\n\t            c.clusterHide();\n\t            c._recursivelyAddChildrenToMap(startPos, newZoomLevel, bounds);\n\t          }\n\t\n\t          for (i = markers.length - 1; i >= 0; i--) {\n\t            m = markers[i];\n\t            if (!bounds.contains(m._latlng)) {\n\t              fg.removeLayer(m);\n\t            }\n\t          }\n\t        });\n\t\n\t        this._forceLayout();\n\t\n\t        this._topClusterLevel._recursivelyBecomeVisible(bounds, newZoomLevel);\n\t\n\t        fg.eachLayer(function (n) {\n\t          if (!(n instanceof L.MarkerCluster) && n._icon) {\n\t            n.clusterShow();\n\t          }\n\t        });\n\t\n\t        this._topClusterLevel._recursively(bounds, previousZoomLevel, newZoomLevel, function (c) {\n\t          c._recursivelyRestoreChildPositions(newZoomLevel);\n\t        });\n\t\n\t        this._ignoreMove = false;\n\t\n\t        this._enqueue(function () {\n\t          this._topClusterLevel._recursively(bounds, previousZoomLevel, 0, function (c) {\n\t            fg.removeLayer(c);\n\t            c.clusterShow();\n\t          });\n\t\n\t          this._animationEnd();\n\t        });\n\t      },\n\t\n\t      _animationZoomOut: function _animationZoomOut(previousZoomLevel, newZoomLevel) {\n\t        this._animationZoomOutSingle(this._topClusterLevel, previousZoomLevel - 1, newZoomLevel);\n\t\n\t        this._topClusterLevel._recursivelyAddChildrenToMap(null, newZoomLevel, this._getExpandedVisibleBounds());\n\t\n\t        this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, previousZoomLevel, this._getExpandedVisibleBounds());\n\t      },\n\t\n\t      _animationAddLayer: function _animationAddLayer(layer, newCluster) {\n\t        var me = this,\n\t            fg = this._featureGroup;\n\t\n\t        fg.addLayer(layer);\n\t        if (newCluster !== layer) {\n\t          if (newCluster._childCount > 2) {\n\t\n\t            newCluster._updateIcon();\n\t            this._forceLayout();\n\t            this._animationStart();\n\t\n\t            layer._setPos(this._map.latLngToLayerPoint(newCluster.getLatLng()));\n\t            layer.clusterHide();\n\t\n\t            this._enqueue(function () {\n\t              fg.removeLayer(layer);\n\t              layer.clusterShow();\n\t\n\t              me._animationEnd();\n\t            });\n\t          } else {\n\t            this._forceLayout();\n\t\n\t            me._animationStart();\n\t            me._animationZoomOutSingle(newCluster, this._map.getMaxZoom(), this._map.getZoom());\n\t          }\n\t        }\n\t      }\n\t    },\n\t\n\t    _animationZoomOutSingle: function _animationZoomOutSingle(cluster, previousZoomLevel, newZoomLevel) {\n\t      var bounds = this._getExpandedVisibleBounds();\n\t\n\t      cluster._recursivelyAnimateChildrenInAndAddSelfToMap(bounds, previousZoomLevel + 1, newZoomLevel);\n\t\n\t      var me = this;\n\t\n\t      this._forceLayout();\n\t      cluster._recursivelyBecomeVisible(bounds, newZoomLevel);\n\t\n\t      this._enqueue(function () {\n\t        if (cluster._childCount === 1) {\n\t          var m = cluster._markers[0];\n\t\n\t          this._ignoreMove = true;\n\t          m.setLatLng(m.getLatLng());\n\t          this._ignoreMove = false;\n\t          if (m.clusterShow) {\n\t            m.clusterShow();\n\t          }\n\t        } else {\n\t          cluster._recursively(bounds, newZoomLevel, 0, function (c) {\n\t            c._recursivelyRemoveChildrenFromMap(bounds, previousZoomLevel + 1);\n\t          });\n\t        }\n\t        me._animationEnd();\n\t      });\n\t    },\n\t\n\t    _animationEnd: function _animationEnd() {\n\t      if (this._map) {\n\t        this._map._mapPane.className = this._map._mapPane.className.replace(' leaflet-cluster-anim', '');\n\t      }\n\t      this._inZoomAnimation--;\n\t      this.fire('animationend');\n\t    },\n\t\n\t    _forceLayout: function _forceLayout() {\n\t\n\t      L.Util.falseFn(document.body.offsetWidth);\n\t    }\n\t  });\n\t\n\t  L.markerClusterGroup = function (options) {\n\t    return new L.MarkerClusterGroup(options);\n\t  };\n\t\n\t  L.MarkerCluster = L.Marker.extend({\n\t    initialize: function initialize(group, zoom, a, b) {\n\t\n\t      L.Marker.prototype.initialize.call(this, a ? a._cLatLng || a.getLatLng() : new L.LatLng(0, 0), { icon: this });\n\t\n\t      this._group = group;\n\t      this._zoom = zoom;\n\t\n\t      this._markers = [];\n\t      this._childClusters = [];\n\t      this._childCount = 0;\n\t      this._iconNeedsUpdate = true;\n\t      this._boundsNeedUpdate = true;\n\t\n\t      this._bounds = new L.LatLngBounds();\n\t\n\t      if (a) {\n\t        this._addChild(a);\n\t      }\n\t      if (b) {\n\t        this._addChild(b);\n\t      }\n\t    },\n\t\n\t    getAllChildMarkers: function getAllChildMarkers(storageArray) {\n\t      storageArray = storageArray || [];\n\t\n\t      for (var i = this._childClusters.length - 1; i >= 0; i--) {\n\t        this._childClusters[i].getAllChildMarkers(storageArray);\n\t      }\n\t\n\t      for (var j = this._markers.length - 1; j >= 0; j--) {\n\t        storageArray.push(this._markers[j]);\n\t      }\n\t\n\t      return storageArray;\n\t    },\n\t\n\t    getChildCount: function getChildCount() {\n\t      return this._childCount;\n\t    },\n\t\n\t    zoomToBounds: function zoomToBounds() {\n\t      var childClusters = this._childClusters.slice(),\n\t          map = this._group._map,\n\t          boundsZoom = map.getBoundsZoom(this._bounds),\n\t          zoom = this._zoom + 1,\n\t          mapZoom = map.getZoom(),\n\t          i;\n\t\n\t      while (childClusters.length > 0 && boundsZoom > zoom) {\n\t        zoom++;\n\t        var newClusters = [];\n\t        for (i = 0; i < childClusters.length; i++) {\n\t          newClusters = newClusters.concat(childClusters[i]._childClusters);\n\t        }\n\t        childClusters = newClusters;\n\t      }\n\t\n\t      if (boundsZoom > zoom) {\n\t        this._group._map.setView(this._latlng, zoom);\n\t      } else if (boundsZoom <= mapZoom) {\n\t        this._group._map.setView(this._latlng, mapZoom + 1);\n\t      } else {\n\t        this._group._map.fitBounds(this._bounds);\n\t      }\n\t    },\n\t\n\t    getBounds: function getBounds() {\n\t      var bounds = new L.LatLngBounds();\n\t      bounds.extend(this._bounds);\n\t      return bounds;\n\t    },\n\t\n\t    _updateIcon: function _updateIcon() {\n\t      this._iconNeedsUpdate = true;\n\t      if (this._icon) {\n\t        this.setIcon(this);\n\t      }\n\t    },\n\t\n\t    createIcon: function createIcon() {\n\t      if (this._iconNeedsUpdate) {\n\t        this._iconObj = this._group.options.iconCreateFunction(this);\n\t        this._iconNeedsUpdate = false;\n\t      }\n\t      return this._iconObj.createIcon();\n\t    },\n\t    createShadow: function createShadow() {\n\t      return this._iconObj.createShadow();\n\t    },\n\t\n\t    _addChild: function _addChild(new1, isNotificationFromChild) {\n\t\n\t      this._iconNeedsUpdate = true;\n\t\n\t      this._boundsNeedUpdate = true;\n\t      this._setClusterCenter(new1);\n\t\n\t      if (new1 instanceof L.MarkerCluster) {\n\t        if (!isNotificationFromChild) {\n\t          this._childClusters.push(new1);\n\t          new1.__parent = this;\n\t        }\n\t        this._childCount += new1._childCount;\n\t      } else {\n\t        if (!isNotificationFromChild) {\n\t          this._markers.push(new1);\n\t        }\n\t        this._childCount++;\n\t      }\n\t\n\t      if (this.__parent) {\n\t        this.__parent._addChild(new1, true);\n\t      }\n\t    },\n\t\n\t    _setClusterCenter: function _setClusterCenter(child) {\n\t      if (!this._cLatLng) {\n\t        this._cLatLng = child._cLatLng || child._latlng;\n\t      }\n\t    },\n\t\n\t    _resetBounds: function _resetBounds() {\n\t      var bounds = this._bounds;\n\t\n\t      if (bounds._southWest) {\n\t        bounds._southWest.lat = Infinity;\n\t        bounds._southWest.lng = Infinity;\n\t      }\n\t      if (bounds._northEast) {\n\t        bounds._northEast.lat = -Infinity;\n\t        bounds._northEast.lng = -Infinity;\n\t      }\n\t    },\n\t\n\t    _recalculateBounds: function _recalculateBounds() {\n\t      var markers = this._markers,\n\t          childClusters = this._childClusters,\n\t          latSum = 0,\n\t          lngSum = 0,\n\t          totalCount = this._childCount,\n\t          i,\n\t          child,\n\t          childLatLng,\n\t          childCount;\n\t\n\t      if (totalCount === 0) {\n\t        return;\n\t      }\n\t\n\t      this._resetBounds();\n\t\n\t      for (i = 0; i < markers.length; i++) {\n\t        childLatLng = markers[i]._latlng;\n\t\n\t        this._bounds.extend(childLatLng);\n\t\n\t        latSum += childLatLng.lat;\n\t        lngSum += childLatLng.lng;\n\t      }\n\t\n\t      for (i = 0; i < childClusters.length; i++) {\n\t        child = childClusters[i];\n\t\n\t        if (child._boundsNeedUpdate) {\n\t          child._recalculateBounds();\n\t        }\n\t\n\t        this._bounds.extend(child._bounds);\n\t\n\t        childLatLng = child._wLatLng;\n\t        childCount = child._childCount;\n\t\n\t        latSum += childLatLng.lat * childCount;\n\t        lngSum += childLatLng.lng * childCount;\n\t      }\n\t\n\t      this._latlng = this._wLatLng = new L.LatLng(latSum / totalCount, lngSum / totalCount);\n\t\n\t      this._boundsNeedUpdate = false;\n\t    },\n\t\n\t    _addToMap: function _addToMap(startPos) {\n\t      if (startPos) {\n\t        this._backupLatlng = this._latlng;\n\t        this.setLatLng(startPos);\n\t      }\n\t      this._group._featureGroup.addLayer(this);\n\t    },\n\t\n\t    _recursivelyAnimateChildrenIn: function _recursivelyAnimateChildrenIn(bounds, center, maxZoom) {\n\t      this._recursively(bounds, 0, maxZoom - 1, function (c) {\n\t        var markers = c._markers,\n\t            i,\n\t            m;\n\t        for (i = markers.length - 1; i >= 0; i--) {\n\t          m = markers[i];\n\t\n\t          if (m._icon) {\n\t            m._setPos(center);\n\t            m.clusterHide();\n\t          }\n\t        }\n\t      }, function (c) {\n\t        var childClusters = c._childClusters,\n\t            j,\n\t            cm;\n\t        for (j = childClusters.length - 1; j >= 0; j--) {\n\t          cm = childClusters[j];\n\t          if (cm._icon) {\n\t            cm._setPos(center);\n\t            cm.clusterHide();\n\t          }\n\t        }\n\t      });\n\t    },\n\t\n\t    _recursivelyAnimateChildrenInAndAddSelfToMap: function _recursivelyAnimateChildrenInAndAddSelfToMap(bounds, previousZoomLevel, newZoomLevel) {\n\t      this._recursively(bounds, newZoomLevel, 0, function (c) {\n\t        c._recursivelyAnimateChildrenIn(bounds, c._group._map.latLngToLayerPoint(c.getLatLng()).round(), previousZoomLevel);\n\t\n\t        if (c._isSingleParent() && previousZoomLevel - 1 === newZoomLevel) {\n\t          c.clusterShow();\n\t          c._recursivelyRemoveChildrenFromMap(bounds, previousZoomLevel);\n\t        } else {\n\t          c.clusterHide();\n\t        }\n\t\n\t        c._addToMap();\n\t      });\n\t    },\n\t\n\t    _recursivelyBecomeVisible: function _recursivelyBecomeVisible(bounds, zoomLevel) {\n\t      this._recursively(bounds, 0, zoomLevel, null, function (c) {\n\t        c.clusterShow();\n\t      });\n\t    },\n\t\n\t    _recursivelyAddChildrenToMap: function _recursivelyAddChildrenToMap(startPos, zoomLevel, bounds) {\n\t      this._recursively(bounds, -1, zoomLevel, function (c) {\n\t        if (zoomLevel === c._zoom) {\n\t          return;\n\t        }\n\t\n\t        for (var i = c._markers.length - 1; i >= 0; i--) {\n\t          var nm = c._markers[i];\n\t\n\t          if (!bounds.contains(nm._latlng)) {\n\t            continue;\n\t          }\n\t\n\t          if (startPos) {\n\t            nm._backupLatlng = nm.getLatLng();\n\t\n\t            nm.setLatLng(startPos);\n\t            if (nm.clusterHide) {\n\t              nm.clusterHide();\n\t            }\n\t          }\n\t\n\t          c._group._featureGroup.addLayer(nm);\n\t        }\n\t      }, function (c) {\n\t        c._addToMap(startPos);\n\t      });\n\t    },\n\t\n\t    _recursivelyRestoreChildPositions: function _recursivelyRestoreChildPositions(zoomLevel) {\n\t      for (var i = this._markers.length - 1; i >= 0; i--) {\n\t        var nm = this._markers[i];\n\t        if (nm._backupLatlng) {\n\t          nm.setLatLng(nm._backupLatlng);\n\t          delete nm._backupLatlng;\n\t        }\n\t      }\n\t\n\t      if (zoomLevel - 1 === this._zoom) {\n\t        for (var j = this._childClusters.length - 1; j >= 0; j--) {\n\t          this._childClusters[j]._restorePosition();\n\t        }\n\t      } else {\n\t        for (var k = this._childClusters.length - 1; k >= 0; k--) {\n\t          this._childClusters[k]._recursivelyRestoreChildPositions(zoomLevel);\n\t        }\n\t      }\n\t    },\n\t\n\t    _restorePosition: function _restorePosition() {\n\t      if (this._backupLatlng) {\n\t        this.setLatLng(this._backupLatlng);\n\t        delete this._backupLatlng;\n\t      }\n\t    },\n\t\n\t    _recursivelyRemoveChildrenFromMap: function _recursivelyRemoveChildrenFromMap(previousBounds, zoomLevel, exceptBounds) {\n\t      var m, i;\n\t      this._recursively(previousBounds, -1, zoomLevel - 1, function (c) {\n\t        for (i = c._markers.length - 1; i >= 0; i--) {\n\t          m = c._markers[i];\n\t          if (!exceptBounds || !exceptBounds.contains(m._latlng)) {\n\t            c._group._featureGroup.removeLayer(m);\n\t            if (m.clusterShow) {\n\t              m.clusterShow();\n\t            }\n\t          }\n\t        }\n\t      }, function (c) {\n\t        for (i = c._childClusters.length - 1; i >= 0; i--) {\n\t          m = c._childClusters[i];\n\t          if (!exceptBounds || !exceptBounds.contains(m._latlng)) {\n\t            c._group._featureGroup.removeLayer(m);\n\t            if (m.clusterShow) {\n\t              m.clusterShow();\n\t            }\n\t          }\n\t        }\n\t      });\n\t    },\n\t\n\t    _recursively: function _recursively(boundsToApplyTo, zoomLevelToStart, zoomLevelToStop, runAtEveryLevel, runAtBottomLevel) {\n\t      var childClusters = this._childClusters,\n\t          zoom = this._zoom,\n\t          i,\n\t          c;\n\t\n\t      if (zoomLevelToStart > zoom) {\n\t        for (i = childClusters.length - 1; i >= 0; i--) {\n\t          c = childClusters[i];\n\t          if (boundsToApplyTo.intersects(c._bounds)) {\n\t            c._recursively(boundsToApplyTo, zoomLevelToStart, zoomLevelToStop, runAtEveryLevel, runAtBottomLevel);\n\t          }\n\t        }\n\t      } else {\n\t\n\t        if (runAtEveryLevel) {\n\t          runAtEveryLevel(this);\n\t        }\n\t        if (runAtBottomLevel && this._zoom === zoomLevelToStop) {\n\t          runAtBottomLevel(this);\n\t        }\n\t\n\t        if (zoomLevelToStop > zoom) {\n\t          for (i = childClusters.length - 1; i >= 0; i--) {\n\t            c = childClusters[i];\n\t            if (boundsToApplyTo.intersects(c._bounds)) {\n\t              c._recursively(boundsToApplyTo, zoomLevelToStart, zoomLevelToStop, runAtEveryLevel, runAtBottomLevel);\n\t            }\n\t          }\n\t        }\n\t      }\n\t    },\n\t\n\t    _isSingleParent: function _isSingleParent() {\n\t      return this._childClusters.length > 0 && this._childClusters[0]._childCount === this._childCount;\n\t    }\n\t  });\n\t\n\t  L.Marker.include({\n\t\n\t    clusterHide: function clusterHide() {\n\t      this.options.opacityWhenUnclustered = this.options.opacity || 1;\n\t      return this.setOpacity(0);\n\t    },\n\t\n\t    clusterShow: function clusterShow() {\n\t      var ret = this.setOpacity(this.options.opacity || this.options.opacityWhenUnclustered);\n\t      delete this.options.opacityWhenUnclustered;\n\t      return ret;\n\t    }\n\t\n\t  });\n\t\n\t  L.DistanceGrid = function (cellSize) {\n\t    this._cellSize = cellSize;\n\t    this._sqCellSize = cellSize * cellSize;\n\t    this._grid = {};\n\t    this._objectPoint = {};\n\t  };\n\t\n\t  L.DistanceGrid.prototype = {\n\t\n\t    addObject: function addObject(obj, point) {\n\t      var x = this._getCoord(point.x),\n\t          y = this._getCoord(point.y),\n\t          grid = this._grid,\n\t          row = grid[y] = grid[y] || {},\n\t          cell = row[x] = row[x] || [],\n\t          stamp = L.Util.stamp(obj);\n\t\n\t      this._objectPoint[stamp] = point;\n\t\n\t      cell.push(obj);\n\t    },\n\t\n\t    updateObject: function updateObject(obj, point) {\n\t      this.removeObject(obj);\n\t      this.addObject(obj, point);\n\t    },\n\t\n\t    removeObject: function removeObject(obj, point) {\n\t      var x = this._getCoord(point.x),\n\t          y = this._getCoord(point.y),\n\t          grid = this._grid,\n\t          row = grid[y] = grid[y] || {},\n\t          cell = row[x] = row[x] || [],\n\t          i,\n\t          len;\n\t\n\t      delete this._objectPoint[L.Util.stamp(obj)];\n\t\n\t      for (i = 0, len = cell.length; i < len; i++) {\n\t        if (cell[i] === obj) {\n\t\n\t          cell.splice(i, 1);\n\t\n\t          if (len === 1) {\n\t            delete row[x];\n\t          }\n\t\n\t          return true;\n\t        }\n\t      }\n\t    },\n\t\n\t    eachObject: function eachObject(fn, context) {\n\t      var i,\n\t          j,\n\t          k,\n\t          len,\n\t          row,\n\t          cell,\n\t          removed,\n\t          grid = this._grid;\n\t\n\t      for (i in grid) {\n\t        row = grid[i];\n\t\n\t        for (j in row) {\n\t          cell = row[j];\n\t\n\t          for (k = 0, len = cell.length; k < len; k++) {\n\t            removed = fn.call(context, cell[k]);\n\t            if (removed) {\n\t              k--;\n\t              len--;\n\t            }\n\t          }\n\t        }\n\t      }\n\t    },\n\t\n\t    getNearObject: function getNearObject(point) {\n\t      var x = this._getCoord(point.x),\n\t          y = this._getCoord(point.y),\n\t          i,\n\t          j,\n\t          k,\n\t          row,\n\t          cell,\n\t          len,\n\t          obj,\n\t          dist,\n\t          objectPoint = this._objectPoint,\n\t          closestDistSq = this._sqCellSize,\n\t          closest = null;\n\t\n\t      for (i = y - 1; i <= y + 1; i++) {\n\t        row = this._grid[i];\n\t        if (row) {\n\t\n\t          for (j = x - 1; j <= x + 1; j++) {\n\t            cell = row[j];\n\t            if (cell) {\n\t\n\t              for (k = 0, len = cell.length; k < len; k++) {\n\t                obj = cell[k];\n\t                dist = this._sqDist(objectPoint[L.Util.stamp(obj)], point);\n\t                if (dist < closestDistSq) {\n\t                  closestDistSq = dist;\n\t                  closest = obj;\n\t                }\n\t              }\n\t            }\n\t          }\n\t        }\n\t      }\n\t      return closest;\n\t    },\n\t\n\t    _getCoord: function _getCoord(x) {\n\t      return Math.floor(x / this._cellSize);\n\t    },\n\t\n\t    _sqDist: function _sqDist(p, p2) {\n\t      var dx = p2.x - p.x,\n\t          dy = p2.y - p.y;\n\t      return dx * dx + dy * dy;\n\t    }\n\t  };\n\t\n\t  (function () {\n\t    L.QuickHull = {\n\t      getDistant: function getDistant(cpt, bl) {\n\t        var vY = bl[1].lat - bl[0].lat,\n\t            vX = bl[0].lng - bl[1].lng;\n\t        return vX * (cpt.lat - bl[0].lat) + vY * (cpt.lng - bl[0].lng);\n\t      },\n\t\n\t      findMostDistantPointFromBaseLine: function findMostDistantPointFromBaseLine(baseLine, latLngs) {\n\t        var maxD = 0,\n\t            maxPt = null,\n\t            newPoints = [],\n\t            i,\n\t            pt,\n\t            d;\n\t\n\t        for (i = latLngs.length - 1; i >= 0; i--) {\n\t          pt = latLngs[i];\n\t          d = this.getDistant(pt, baseLine);\n\t\n\t          if (d > 0) {\n\t            newPoints.push(pt);\n\t          } else {\n\t            continue;\n\t          }\n\t\n\t          if (d > maxD) {\n\t            maxD = d;\n\t            maxPt = pt;\n\t          }\n\t        }\n\t\n\t        return { maxPoint: maxPt, newPoints: newPoints };\n\t      },\n\t\n\t      buildConvexHull: function buildConvexHull(baseLine, latLngs) {\n\t        var convexHullBaseLines = [],\n\t            t = this.findMostDistantPointFromBaseLine(baseLine, latLngs);\n\t\n\t        if (t.maxPoint) {\n\t          convexHullBaseLines = convexHullBaseLines.concat(this.buildConvexHull([baseLine[0], t.maxPoint], t.newPoints));\n\t          convexHullBaseLines = convexHullBaseLines.concat(this.buildConvexHull([t.maxPoint, baseLine[1]], t.newPoints));\n\t          return convexHullBaseLines;\n\t        } else {\n\t          return [baseLine[0]];\n\t        }\n\t      },\n\t\n\t      getConvexHull: function getConvexHull(latLngs) {\n\t        var maxLat = false,\n\t            minLat = false,\n\t            maxLng = false,\n\t            minLng = false,\n\t            maxLatPt = null,\n\t            minLatPt = null,\n\t            maxLngPt = null,\n\t            minLngPt = null,\n\t            maxPt = null,\n\t            minPt = null,\n\t            i;\n\t\n\t        for (i = latLngs.length - 1; i >= 0; i--) {\n\t          var pt = latLngs[i];\n\t          if (maxLat === false || pt.lat > maxLat) {\n\t            maxLatPt = pt;\n\t            maxLat = pt.lat;\n\t          }\n\t          if (minLat === false || pt.lat < minLat) {\n\t            minLatPt = pt;\n\t            minLat = pt.lat;\n\t          }\n\t          if (maxLng === false || pt.lng > maxLng) {\n\t            maxLngPt = pt;\n\t            maxLng = pt.lng;\n\t          }\n\t          if (minLng === false || pt.lng < minLng) {\n\t            minLngPt = pt;\n\t            minLng = pt.lng;\n\t          }\n\t        }\n\t\n\t        if (minLat !== maxLat) {\n\t          minPt = minLatPt;\n\t          maxPt = maxLatPt;\n\t        } else {\n\t          minPt = minLngPt;\n\t          maxPt = maxLngPt;\n\t        }\n\t\n\t        var ch = [].concat(this.buildConvexHull([minPt, maxPt], latLngs), this.buildConvexHull([maxPt, minPt], latLngs));\n\t        return ch;\n\t      }\n\t    };\n\t  })();\n\t\n\t  L.MarkerCluster.include({\n\t    getConvexHull: function getConvexHull() {\n\t      var childMarkers = this.getAllChildMarkers(),\n\t          points = [],\n\t          p,\n\t          i;\n\t\n\t      for (i = childMarkers.length - 1; i >= 0; i--) {\n\t        p = childMarkers[i].getLatLng();\n\t        points.push(p);\n\t      }\n\t\n\t      return L.QuickHull.getConvexHull(points);\n\t    }\n\t  });\n\t\n\t  L.MarkerCluster.include({\n\t\n\t    _2PI: Math.PI * 2,\n\t    _circleFootSeparation: 25,\n\t    _circleStartAngle: Math.PI / 6,\n\t\n\t    _spiralFootSeparation: 28,\n\t    _spiralLengthStart: 11,\n\t    _spiralLengthFactor: 5,\n\t\n\t    _circleSpiralSwitchover: 9,\n\t\n\t    spiderfy: function spiderfy() {\n\t      if (this._group._spiderfied === this || this._group._inZoomAnimation) {\n\t        return;\n\t      }\n\t\n\t      var childMarkers = this.getAllChildMarkers(),\n\t          group = this._group,\n\t          map = group._map,\n\t          center = map.latLngToLayerPoint(this._latlng),\n\t          positions;\n\t\n\t      this._group._unspiderfy();\n\t      this._group._spiderfied = this;\n\t\n\t      if (childMarkers.length >= this._circleSpiralSwitchover) {\n\t        positions = this._generatePointsSpiral(childMarkers.length, center);\n\t      } else {\n\t        center.y += 10;\n\t        positions = this._generatePointsCircle(childMarkers.length, center);\n\t      }\n\t\n\t      this._animationSpiderfy(childMarkers, positions);\n\t    },\n\t\n\t    unspiderfy: function unspiderfy(zoomDetails) {\n\t      if (this._group._inZoomAnimation) {\n\t        return;\n\t      }\n\t      this._animationUnspiderfy(zoomDetails);\n\t\n\t      this._group._spiderfied = null;\n\t    },\n\t\n\t    _generatePointsCircle: function _generatePointsCircle(count, centerPt) {\n\t      var circumference = this._group.options.spiderfyDistanceMultiplier * this._circleFootSeparation * (2 + count),\n\t          legLength = circumference / this._2PI,\n\t          angleStep = this._2PI / count,\n\t          res = [],\n\t          i,\n\t          angle;\n\t\n\t      res.length = count;\n\t\n\t      for (i = count - 1; i >= 0; i--) {\n\t        angle = this._circleStartAngle + i * angleStep;\n\t        res[i] = new L.Point(centerPt.x + legLength * Math.cos(angle), centerPt.y + legLength * Math.sin(angle))._round();\n\t      }\n\t\n\t      return res;\n\t    },\n\t\n\t    _generatePointsSpiral: function _generatePointsSpiral(count, centerPt) {\n\t      var spiderfyDistanceMultiplier = this._group.options.spiderfyDistanceMultiplier,\n\t          legLength = spiderfyDistanceMultiplier * this._spiralLengthStart,\n\t          separation = spiderfyDistanceMultiplier * this._spiralFootSeparation,\n\t          lengthFactor = spiderfyDistanceMultiplier * this._spiralLengthFactor * this._2PI,\n\t          angle = 0,\n\t          res = [],\n\t          i;\n\t\n\t      res.length = count;\n\t\n\t      for (i = count - 1; i >= 0; i--) {\n\t        angle += separation / legLength + i * 0.0005;\n\t        res[i] = new L.Point(centerPt.x + legLength * Math.cos(angle), centerPt.y + legLength * Math.sin(angle))._round();\n\t        legLength += lengthFactor / angle;\n\t      }\n\t      return res;\n\t    },\n\t\n\t    _noanimationUnspiderfy: function _noanimationUnspiderfy() {\n\t      var group = this._group,\n\t          map = group._map,\n\t          fg = group._featureGroup,\n\t          childMarkers = this.getAllChildMarkers(),\n\t          m,\n\t          i;\n\t\n\t      group._ignoreMove = true;\n\t\n\t      this.setOpacity(1);\n\t      for (i = childMarkers.length - 1; i >= 0; i--) {\n\t        m = childMarkers[i];\n\t\n\t        fg.removeLayer(m);\n\t\n\t        if (m._preSpiderfyLatlng) {\n\t          m.setLatLng(m._preSpiderfyLatlng);\n\t          delete m._preSpiderfyLatlng;\n\t        }\n\t        if (m.setZIndexOffset) {\n\t          m.setZIndexOffset(0);\n\t        }\n\t\n\t        if (m._spiderLeg) {\n\t          map.removeLayer(m._spiderLeg);\n\t          delete m._spiderLeg;\n\t        }\n\t      }\n\t\n\t      group.fire('unspiderfied', {\n\t        cluster: this,\n\t        markers: childMarkers\n\t      });\n\t      group._ignoreMove = false;\n\t      group._spiderfied = null;\n\t    }\n\t  });\n\t\n\t  L.MarkerClusterNonAnimated = L.MarkerCluster.extend({\n\t    _animationSpiderfy: function _animationSpiderfy(childMarkers, positions) {\n\t      var group = this._group,\n\t          map = group._map,\n\t          fg = group._featureGroup,\n\t          legOptions = this._group.options.spiderLegPolylineOptions,\n\t          i,\n\t          m,\n\t          leg,\n\t          newPos;\n\t\n\t      group._ignoreMove = true;\n\t\n\t      for (i = 0; i < childMarkers.length; i++) {\n\t        newPos = map.layerPointToLatLng(positions[i]);\n\t        m = childMarkers[i];\n\t\n\t        leg = new L.Polyline([this._latlng, newPos], legOptions);\n\t        map.addLayer(leg);\n\t        m._spiderLeg = leg;\n\t\n\t        m._preSpiderfyLatlng = m._latlng;\n\t        m.setLatLng(newPos);\n\t        if (m.setZIndexOffset) {\n\t          m.setZIndexOffset(1000000);\n\t        }\n\t\n\t        fg.addLayer(m);\n\t      }\n\t      this.setOpacity(0.3);\n\t\n\t      group._ignoreMove = false;\n\t      group.fire('spiderfied', {\n\t        cluster: this,\n\t        markers: childMarkers\n\t      });\n\t    },\n\t\n\t    _animationUnspiderfy: function _animationUnspiderfy() {\n\t      this._noanimationUnspiderfy();\n\t    }\n\t  });\n\t\n\t  L.MarkerCluster.include({\n\t\n\t    _animationSpiderfy: function _animationSpiderfy(childMarkers, positions) {\n\t      var me = this,\n\t          group = this._group,\n\t          map = group._map,\n\t          fg = group._featureGroup,\n\t          thisLayerLatLng = this._latlng,\n\t          thisLayerPos = map.latLngToLayerPoint(thisLayerLatLng),\n\t          svg = L.Path.SVG,\n\t          legOptions = L.extend({}, this._group.options.spiderLegPolylineOptions),\n\t          finalLegOpacity = legOptions.opacity,\n\t          i,\n\t          m,\n\t          leg,\n\t          legPath,\n\t          legLength,\n\t          newPos;\n\t\n\t      if (finalLegOpacity === undefined) {\n\t        finalLegOpacity = L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity;\n\t      }\n\t\n\t      if (svg) {\n\t        legOptions.opacity = 0;\n\t\n\t        legOptions.className = (legOptions.className || '') + ' leaflet-cluster-spider-leg';\n\t      } else {\n\t        legOptions.opacity = finalLegOpacity;\n\t      }\n\t\n\t      group._ignoreMove = true;\n\t\n\t      for (i = 0; i < childMarkers.length; i++) {\n\t        m = childMarkers[i];\n\t\n\t        newPos = map.layerPointToLatLng(positions[i]);\n\t\n\t        leg = new L.Polyline([thisLayerLatLng, newPos], legOptions);\n\t        map.addLayer(leg);\n\t        m._spiderLeg = leg;\n\t\n\t        if (svg) {\n\t          legPath = leg._path;\n\t          legLength = legPath.getTotalLength() + 0.1;\n\t          legPath.style.strokeDasharray = legLength;\n\t          legPath.style.strokeDashoffset = legLength;\n\t        }\n\t\n\t        if (m.setZIndexOffset) {\n\t          m.setZIndexOffset(1000000);\n\t        }\n\t        if (m.clusterHide) {\n\t          m.clusterHide();\n\t        }\n\t\n\t        fg.addLayer(m);\n\t\n\t        if (m._setPos) {\n\t          m._setPos(thisLayerPos);\n\t        }\n\t      }\n\t\n\t      group._forceLayout();\n\t      group._animationStart();\n\t\n\t      for (i = childMarkers.length - 1; i >= 0; i--) {\n\t        newPos = map.layerPointToLatLng(positions[i]);\n\t        m = childMarkers[i];\n\t\n\t        m._preSpiderfyLatlng = m._latlng;\n\t        m.setLatLng(newPos);\n\t\n\t        if (m.clusterShow) {\n\t          m.clusterShow();\n\t        }\n\t\n\t        if (svg) {\n\t          leg = m._spiderLeg;\n\t          legPath = leg._path;\n\t          legPath.style.strokeDashoffset = 0;\n\t\n\t          leg.setStyle({ opacity: finalLegOpacity });\n\t        }\n\t      }\n\t      this.setOpacity(0.3);\n\t\n\t      group._ignoreMove = false;\n\t\n\t      setTimeout(function () {\n\t        group._animationEnd();\n\t        group.fire('spiderfied', {\n\t          cluster: me,\n\t          markers: childMarkers\n\t        });\n\t      }, 200);\n\t    },\n\t\n\t    _animationUnspiderfy: function _animationUnspiderfy(zoomDetails) {\n\t      var me = this,\n\t          group = this._group,\n\t          map = group._map,\n\t          fg = group._featureGroup,\n\t          thisLayerPos = zoomDetails ? map._latLngToNewLayerPoint(this._latlng, zoomDetails.zoom, zoomDetails.center) : map.latLngToLayerPoint(this._latlng),\n\t          childMarkers = this.getAllChildMarkers(),\n\t          svg = L.Path.SVG,\n\t          m,\n\t          i,\n\t          leg,\n\t          legPath,\n\t          legLength,\n\t          nonAnimatable;\n\t\n\t      group._ignoreMove = true;\n\t      group._animationStart();\n\t\n\t      this.setOpacity(1);\n\t      for (i = childMarkers.length - 1; i >= 0; i--) {\n\t        m = childMarkers[i];\n\t\n\t        if (!m._preSpiderfyLatlng) {\n\t          continue;\n\t        }\n\t\n\t        m.setLatLng(m._preSpiderfyLatlng);\n\t        delete m._preSpiderfyLatlng;\n\t\n\t        nonAnimatable = true;\n\t        if (m._setPos) {\n\t          m._setPos(thisLayerPos);\n\t          nonAnimatable = false;\n\t        }\n\t        if (m.clusterHide) {\n\t          m.clusterHide();\n\t          nonAnimatable = false;\n\t        }\n\t        if (nonAnimatable) {\n\t          fg.removeLayer(m);\n\t        }\n\t\n\t        if (svg) {\n\t          leg = m._spiderLeg;\n\t          legPath = leg._path;\n\t          legLength = legPath.getTotalLength() + 0.1;\n\t          legPath.style.strokeDashoffset = legLength;\n\t          leg.setStyle({ opacity: 0 });\n\t        }\n\t      }\n\t\n\t      group._ignoreMove = false;\n\t\n\t      setTimeout(function () {\n\t        var stillThereChildCount = 0;\n\t        for (i = childMarkers.length - 1; i >= 0; i--) {\n\t          m = childMarkers[i];\n\t          if (m._spiderLeg) {\n\t            stillThereChildCount++;\n\t          }\n\t        }\n\t\n\t        for (i = childMarkers.length - 1; i >= 0; i--) {\n\t          m = childMarkers[i];\n\t\n\t          if (!m._spiderLeg) {\n\t            continue;\n\t          }\n\t\n\t          if (m.clusterShow) {\n\t            m.clusterShow();\n\t          }\n\t          if (m.setZIndexOffset) {\n\t            m.setZIndexOffset(0);\n\t          }\n\t\n\t          if (stillThereChildCount > 1) {\n\t            fg.removeLayer(m);\n\t          }\n\t\n\t          map.removeLayer(m._spiderLeg);\n\t          delete m._spiderLeg;\n\t        }\n\t        group._animationEnd();\n\t        group.fire('unspiderfied', {\n\t          cluster: me,\n\t          markers: childMarkers\n\t        });\n\t      }, 200);\n\t    }\n\t  });\n\t\n\t  L.MarkerClusterGroup.include({\n\t    _spiderfied: null,\n\t\n\t    unspiderfy: function unspiderfy() {\n\t      this._unspiderfy.apply(this, arguments);\n\t    },\n\t\n\t    _spiderfierOnAdd: function _spiderfierOnAdd() {\n\t      this._map.on('click', this._unspiderfyWrapper, this);\n\t\n\t      if (this._map.options.zoomAnimation) {\n\t        this._map.on('zoomstart', this._unspiderfyZoomStart, this);\n\t      }\n\t\n\t      this._map.on('zoomend', this._noanimationUnspiderfy, this);\n\t\n\t      if (!L.Browser.touch) {\n\t        this._map.getRenderer(this);\n\t      }\n\t    },\n\t\n\t    _spiderfierOnRemove: function _spiderfierOnRemove() {\n\t      this._map.off('click', this._unspiderfyWrapper, this);\n\t      this._map.off('zoomstart', this._unspiderfyZoomStart, this);\n\t      this._map.off('zoomanim', this._unspiderfyZoomAnim, this);\n\t      this._map.off('zoomend', this._noanimationUnspiderfy, this);\n\t\n\t      this._noanimationUnspiderfy();\n\t    },\n\t\n\t    _unspiderfyZoomStart: function _unspiderfyZoomStart() {\n\t      if (!this._map) {\n\t        return;\n\t      }\n\t\n\t      this._map.on('zoomanim', this._unspiderfyZoomAnim, this);\n\t    },\n\t\n\t    _unspiderfyZoomAnim: function _unspiderfyZoomAnim(zoomDetails) {\n\t      if (L.DomUtil.hasClass(this._map._mapPane, 'leaflet-touching')) {\n\t        return;\n\t      }\n\t\n\t      this._map.off('zoomanim', this._unspiderfyZoomAnim, this);\n\t      this._unspiderfy(zoomDetails);\n\t    },\n\t\n\t    _unspiderfyWrapper: function _unspiderfyWrapper() {\n\t      this._unspiderfy();\n\t    },\n\t\n\t    _unspiderfy: function _unspiderfy(zoomDetails) {\n\t      if (this._spiderfied) {\n\t        this._spiderfied.unspiderfy(zoomDetails);\n\t      }\n\t    },\n\t\n\t    _noanimationUnspiderfy: function _noanimationUnspiderfy() {\n\t      if (this._spiderfied) {\n\t        this._spiderfied._noanimationUnspiderfy();\n\t      }\n\t    },\n\t\n\t    _unspiderfyLayer: function _unspiderfyLayer(layer) {\n\t      if (layer._spiderLeg) {\n\t        this._featureGroup.removeLayer(layer);\n\t\n\t        if (layer.clusterShow) {\n\t          layer.clusterShow();\n\t        }\n\t\n\t        if (layer.setZIndexOffset) {\n\t          layer.setZIndexOffset(0);\n\t        }\n\t\n\t        this._map.removeLayer(layer._spiderLeg);\n\t        delete layer._spiderLeg;\n\t      }\n\t    }\n\t  });\n\t\n\t  L.MarkerClusterGroup.include({\n\t    refreshClusters: function refreshClusters(layers) {\n\t      if (!layers) {\n\t        layers = this._topClusterLevel.getAllChildMarkers();\n\t      } else if (layers instanceof L.MarkerClusterGroup) {\n\t        layers = layers._topClusterLevel.getAllChildMarkers();\n\t      } else if (layers instanceof L.LayerGroup) {\n\t        layers = layers._layers;\n\t      } else if (layers instanceof L.MarkerCluster) {\n\t        layers = layers.getAllChildMarkers();\n\t      } else if (layers instanceof L.Marker) {\n\t        layers = [layers];\n\t      }\n\t      this._flagParentsIconsNeedUpdate(layers);\n\t      this._refreshClustersIcons();\n\t\n\t      if (this.options.singleMarkerMode) {\n\t        this._refreshSingleMarkerModeMarkers(layers);\n\t      }\n\t\n\t      return this;\n\t    },\n\t\n\t    _flagParentsIconsNeedUpdate: function _flagParentsIconsNeedUpdate(layers) {\n\t      var id, parent;\n\t\n\t      for (id in layers) {\n\t        parent = layers[id].__parent;\n\t        while (parent) {\n\t          parent._iconNeedsUpdate = true;\n\t          parent = parent.__parent;\n\t        }\n\t      }\n\t    },\n\t\n\t    _refreshClustersIcons: function _refreshClustersIcons() {\n\t      this._featureGroup.eachLayer(function (c) {\n\t        if (c instanceof L.MarkerCluster && c._iconNeedsUpdate) {\n\t          c._updateIcon();\n\t        }\n\t      });\n\t    },\n\t\n\t    _refreshSingleMarkerModeMarkers: function _refreshSingleMarkerModeMarkers(layers) {\n\t      var id, layer;\n\t\n\t      for (id in layers) {\n\t        layer = layers[id];\n\t\n\t        if (this.hasLayer(layer)) {\n\t          layer.setIcon(this._overrideMarkerIcon(layer));\n\t        }\n\t      }\n\t    }\n\t  });\n\t\n\t  L.Marker.include({\n\t    refreshIconOptions: function refreshIconOptions(options, directlyRefreshClusters) {\n\t      var icon = this.options.icon;\n\t\n\t      L.setOptions(icon, options);\n\t\n\t      this.setIcon(icon);\n\t\n\t      if (directlyRefreshClusters && this.__parent) {\n\t        this.__parent._group.refreshClusters(this);\n\t      }\n\t\n\t      return this;\n\t    }\n\t  });\n\t})(window, document);\n\n/***/ }),\n\n/***/ 184:\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tL.NonTiledLayer = L.Layer.extend({\n\t  includes: L.Evented,\n\t  options: {\n\t    attribution: '',\n\t    opacity: 1.0,\n\t    zIndex: undefined,\n\t    minZoom: 0,\n\t    maxZoom: 18,\n\t    pointerEvents: null,\n\t    errorImageUrl: 'data:image/gif;base64,R0lGODlhAQABAHAAACH5BAUAAAAALAAAAAABAAEAAAICRAEAOw==',\n\t    bounds: L.latLngBounds([-85.05, -180], [85.05, 180])\n\t  },\n\t  url: '',\n\t\n\t  initialize: function initialize(options) {\n\t    L.setOptions(this, options);\n\t  },\n\t\n\t  onAdd: function onAdd(map) {\n\t    this._map = map;\n\t\n\t    if (!this._div) {\n\t      this._div = L.DomUtil.create('div', 'leaflet-image-layer');\n\t      if (this.options.pointerEvents) {\n\t        this._div.style['pointer-events'] = this.options.pointerEvents;\n\t      }\n\t      if (this.options.zIndex !== undefined) {\n\t        this._div.style.zIndex = this.options.zIndex;\n\t      }\n\t      if (this.options.opacity !== undefined) {\n\t        this._div.style.opacity = this.options.opacity;\n\t      }\n\t    }\n\t\n\t    this.getPane().appendChild(this._div);\n\t\n\t    this._bufferImage = this._initImage();\n\t    this._currentImage = this._initImage();\n\t\n\t    this._update();\n\t  },\n\t\n\t  onRemove: function onRemove(map) {\n\t    this.getPane().removeChild(this._div);\n\t\n\t    this._div.removeChild(this._bufferImage);\n\t    this._div.removeChild(this._currentImage);\n\t  },\n\t\n\t  addTo: function addTo(map) {\n\t    map.addLayer(this);\n\t    return this;\n\t  },\n\t\n\t  getEvents: function getEvents() {\n\t    var events = {\n\t      moveend: this._update,\n\t      zoom: this._viewreset\n\t    };\n\t\n\t    if (this._zoomAnimated) {\n\t      events.zoomanim = this._animateZoom;\n\t    }\n\t\n\t    return events;\n\t  },\n\t\n\t  getElement: function getElement() {\n\t    return this._div;\n\t  },\n\t\n\t  setOpacity: function setOpacity(opacity) {\n\t    this.options.opacity = opacity;\n\t    if (this._div) {\n\t      L.DomUtil.setOpacity(this._div, this.options.opacity);\n\t    }\n\t    return this;\n\t  },\n\t\n\t  setZIndex: function setZIndex(zIndex) {\n\t    if (zIndex) {\n\t      this.options.zIndex = zIndex;\n\t      if (this._div) {\n\t        this._div.style.zIndex = zIndex;\n\t      }\n\t    }\n\t    return this;\n\t  },\n\t\n\t  bringToFront: function bringToFront() {\n\t    if (this._div) {\n\t      this._pane.appendChild(this._div);\n\t    }\n\t    return this;\n\t  },\n\t\n\t  bringToBack: function bringToBack() {\n\t    if (this._div) {\n\t      this._pane.insertBefore(this._div, this._pane.firstChild);\n\t    }\n\t    return this;\n\t  },\n\t\n\t  getAttribution: function getAttribution() {\n\t    return this.options.attribution;\n\t  },\n\t\n\t  _initImage: function _initImage(_image) {\n\t    var _image = L.DomUtil.create('img', 'leaflet-image-layer');\n\t\n\t    this._div.appendChild(_image);\n\t\n\t    if (this._map.options.zoomAnimation && L.Browser.any3d) {\n\t      L.DomUtil.addClass(_image, 'leaflet-zoom-animated');\n\t    } else {\n\t      L.DomUtil.addClass(_image, 'leaflet-zoom-hide');\n\t    }\n\t\n\t    L.extend(_image, {\n\t      galleryimg: 'no',\n\t      onselectstart: L.Util.falseFn,\n\t      onmousemove: L.Util.falseFn,\n\t      onload: L.bind(this._onImageLoad, this),\n\t      onerror: L.bind(this._onImageError, this)\n\t    });\n\t\n\t    return _image;\n\t  },\n\t\n\t  redraw: function redraw() {\n\t    if (this._map) {\n\t      this._update();\n\t    }\n\t    return this;\n\t  },\n\t\n\t  _animateZoom: function _animateZoom(e) {\n\t    if (this._currentImage._bounds) {\n\t      this._animateImage(this._currentImage, e);\n\t    }\n\t    if (this._bufferImage._bounds) {\n\t      this._animateImage(this._bufferImage, e);\n\t    }\n\t  },\n\t\n\t  _animateImage: function _animateImage(image, e) {\n\t    var scale = this._map.getZoomScale(e.zoom),\n\t        offset = this._map._latLngToNewLayerPoint(image._bounds.getNorthWest(), e.zoom, e.center);\n\t\n\t    L.DomUtil.setTransform(image, offset, scale);\n\t  },\n\t\n\t  _resetImage: function _resetImage(image) {\n\t    var bounds = new L.Bounds(this._map.latLngToLayerPoint(image._bounds.getNorthWest()), this._map.latLngToLayerPoint(image._bounds.getSouthEast())),\n\t        size = bounds.getSize();\n\t\n\t    L.DomUtil.setPosition(image, bounds.min);\n\t\n\t    image.style.width = size.x + 'px';\n\t    image.style.height = size.y + 'px';\n\t  },\n\t\n\t  _getClippedBounds: function _getClippedBounds() {\n\t    var wgsBounds = this._map.getBounds();\n\t\n\t    var mSouth = wgsBounds.getSouth();\n\t    var mNorth = wgsBounds.getNorth();\n\t    var mWest = wgsBounds.getWest();\n\t    var mEast = wgsBounds.getEast();\n\t\n\t    var lSouth = this.options.bounds.getSouth();\n\t    var lNorth = this.options.bounds.getNorth();\n\t    var lWest = this.options.bounds.getWest();\n\t    var lEast = this.options.bounds.getEast();\n\t\n\t    if (mSouth < lSouth) {\n\t      mSouth = lSouth;\n\t    }\n\t    if (mNorth > lNorth) {\n\t      mNorth = lNorth;\n\t    }\n\t    if (mWest < lWest) {\n\t      mWest = lWest;\n\t    }\n\t    if (mEast > lEast) {\n\t      mEast = lEast;\n\t    }\n\t\n\t    var world1 = new L.LatLng(mNorth, mWest);\n\t    var world2 = new L.LatLng(mSouth, mEast);\n\t\n\t    return new L.LatLngBounds(world1, world2);\n\t  },\n\t\n\t  _viewreset: function _viewreset() {\n\t    if (this._bufferImage._bounds) {\n\t      this._resetImage(this._bufferImage);\n\t    }\n\t    if (this._currentImage._bounds) {\n\t      this._resetImage(this._currentImage);\n\t    }\n\t  },\n\t\n\t  _update: function _update() {\n\t    if (this._map.getZoom() < this.options.minZoom || this._map.getZoom() > this.options.maxZoom) {\n\t      this._div.style.visibility = 'hidden';\n\t      return;\n\t    } else {\n\t      this._div.style.visibility = 'visible';\n\t    }\n\t\n\t    if (this._bufferImage._bounds) {\n\t      this._resetImage(this._bufferImage);\n\t    }\n\t\n\t    var bounds = this._getClippedBounds();\n\t\n\t    var pix1 = this._map.latLngToContainerPoint(bounds.getNorthWest());\n\t    var pix2 = this._map.latLngToContainerPoint(bounds.getSouthEast());\n\t\n\t    var width = pix2.x - pix1.x;\n\t    var height = pix2.y - pix1.y;\n\t\n\t    if (width < 32 || height < 32) {\n\t      return;\n\t    }\n\t\n\t    this._currentImage._bounds = bounds;\n\t\n\t    this._resetImage(this._currentImage);\n\t\n\t    var i = this._currentImage;\n\t    if (this.getImageUrl) {\n\t      i.src = this.getImageUrl(bounds.getNorthWest(), bounds.getSouthEast(), width, height);\n\t    } else {\n\t      this.getImageUrlAsync(bounds.getNorthWest(), bounds.getSouthEast(), width, height, function (url, tag) {\n\t        i.src = url;\n\t        i.tag = tag;\n\t      });\n\t    }\n\t\n\t    this.url = i.src;\n\t\n\t    L.DomUtil.setOpacity(this._currentImage, 0);\n\t  },\n\t  _onImageError: function _onImageError(e) {\n\t    this.fire('error', e);\n\t    L.DomUtil.addClass(e.target, 'invalid');\n\t    if (e.target.src !== this.options.errorImageUrl) {\n\t      e.target.src = this.options.errorImageUrl;\n\t      this._onImageDone(false, e);\n\t    }\n\t  },\n\t  _onImageLoad: function _onImageLoad(e) {\n\t    if (e.target.src !== this.options.errorImageUrl) {\n\t      L.DomUtil.removeClass(e.target, 'invalid');\n\t      if (e.target.src !== this.url) {\n\t        return;\n\t      }\n\t      this._onImageDone(true, e);\n\t    }\n\t  },\n\t  _onImageDone: function _onImageDone(success, e) {\n\t    L.DomUtil.setOpacity(this._currentImage, 1);\n\t    L.DomUtil.setOpacity(this._bufferImage, 0);\n\t\n\t    if (this._addInteraction) {\n\t      this._addInteraction(this._currentImage.tag);\n\t    }\n\t\n\t    var tmp = this._bufferImage;\n\t    this._bufferImage = this._currentImage;\n\t    this._currentImage = tmp;\n\t    this.fire('load', e);\n\t  }\n\t});\n\t\n\tL.nonTiledLayer = function () {\n\t  return new L.NonTiledLayer();\n\t};\n\t\n\tL.NonTiledLayer.WMS = L.NonTiledLayer.extend({\n\t\n\t  defaultWmsParams: {\n\t    service: 'WMS',\n\t    request: 'GetMap',\n\t    version: '1.1.1',\n\t    layers: '',\n\t    styles: '',\n\t    format: 'image/jpeg',\n\t    transparent: false\n\t  },\n\t\n\t  options: {\n\t    crs: null,\n\t    uppercase: false\n\t  },\n\t\n\t  initialize: function initialize(url, options) {\n\t    this._wmsUrl = url;\n\t\n\t    var wmsParams = L.extend({}, this.defaultWmsParams);\n\t\n\t    for (var i in options) {\n\t      if (!L.NonTiledLayer.prototype.options.hasOwnProperty(i) && !L.Layer.prototype.options.hasOwnProperty(i)) {\n\t        wmsParams[i] = options[i];\n\t      }\n\t    }\n\t\n\t    this.wmsParams = wmsParams;\n\t\n\t    L.setOptions(this, options);\n\t  },\n\t\n\t  onAdd: function onAdd(map) {\n\t\n\t    this._crs = this.options.crs || map.options.crs;\n\t    this._wmsVersion = parseFloat(this.wmsParams.version);\n\t\n\t    var projectionKey = this._wmsVersion >= 1.3 ? 'crs' : 'srs';\n\t    this.wmsParams[projectionKey] = this._crs.code;\n\t\n\t    L.NonTiledLayer.prototype.onAdd.call(this, map);\n\t  },\n\t\n\t  getImageUrl: function getImageUrl(world1, world2, width, height) {\n\t    var wmsParams = this.wmsParams;\n\t    wmsParams.width = width;\n\t    wmsParams.height = height;\n\t\n\t    var nw = this._crs.project(world1);\n\t    var se = this._crs.project(world2);\n\t\n\t    var url = this._wmsUrl;\n\t\n\t    var bbox = bbox = (this._wmsVersion >= 1.3 && this._crs === L.CRS.EPSG4326 ? [se.y, nw.x, nw.y, se.x] : [nw.x, se.y, se.x, nw.y]).join(',');\n\t\n\t    return url + L.Util.getParamString(this.wmsParams, url, this.options.uppercase) + (this.options.uppercase ? '&BBOX=' : '&bbox=') + bbox;\n\t  },\n\t\n\t  setParams: function setParams(params, noRedraw) {\n\t\n\t    L.extend(this.wmsParams, params);\n\t\n\t    if (!noRedraw) {\n\t      this.redraw();\n\t    }\n\t\n\t    return this;\n\t  }\n\t});\n\t\n\tL.nonTiledLayer.wms = function (url, options) {\n\t  return new L.NonTiledLayer.WMS(url, options);\n\t};\n\n/***/ }),\n\n/***/ 185:\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tif (!Array.prototype.find) {\n\t  Object.defineProperty(Array.prototype, 'find', {\n\t    value: function value(predicate) {\n\t      'use strict';\n\t\n\t      if (this == null) {\n\t        throw new TypeError('Array.prototype.find called on null or undefined');\n\t      }\n\t      if (typeof predicate !== 'function') {\n\t        throw new TypeError('predicate must be a function');\n\t      }\n\t      var list = Object(this);\n\t      var length = list.length >>> 0;\n\t      var thisArg = arguments[1];\n\t\n\t      for (var i = 0; i !== length; i++) {\n\t        if (predicate.call(thisArg, this[i], i, list)) {\n\t          return this[i];\n\t        }\n\t      }\n\t      return undefined;\n\t    }\n\t  });\n\t}\n\n/***/ }),\n\n/***/ 186:\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tif (!Array.prototype.findIndex) {\n\t  Object.defineProperty(Array.prototype, 'findIndex', {\n\t    value: function value(predicate) {\n\t      if (this == null) {\n\t        throw new TypeError('\"this\" is null or not defined');\n\t      }\n\t\n\t      var o = Object(this);\n\t\n\t      var len = o.length >>> 0;\n\t\n\t      if (typeof predicate !== 'function') {\n\t        throw new TypeError('predicate must be a function');\n\t      }\n\t\n\t      var thisArg = arguments[1];\n\t\n\t      var k = 0;\n\t\n\t      while (k < len) {\n\t        var kValue = o[k];\n\t        if (predicate.call(thisArg, kValue, k, o)) {\n\t          return k;\n\t        }\n\t\n\t        k++;\n\t      }\n\t\n\t      return -1;\n\t    }\n\t  });\n\t}\n\n/***/ }),\n\n/***/ 187:\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tif (!String.prototype.startsWith) {\n\t  String.prototype.startsWith = function (searchString, position) {\n\t    return this.substr(position || 0, searchString.length) === searchString;\n\t  };\n\t}\n\n/***/ }),\n\n/***/ 189:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = getEnti;\n\t\n\tvar _axios = __webpack_require__(13);\n\t\n\tvar _axios2 = _interopRequireDefault(_axios);\n\t\n\tvar _globals = __webpack_require__(5);\n\t\n\tvar _globals2 = _interopRequireDefault(_globals);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction getEnti() {\n\t  var url = window.location.href.split(':')[0] + '://' + _globals2.default.RL_ENTI_SERVICE;\n\t\n\t  return _axios2.default.get(url).then(function (response) {\n\t    return response.data.data;\n\t  });\n\t}\n\n/***/ }),\n\n/***/ 190:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = getFeatureHilite;\n\t\n\tvar _axios = __webpack_require__(13);\n\t\n\tvar _axios2 = _interopRequireDefault(_axios);\n\t\n\tvar _globals = __webpack_require__(5);\n\t\n\tvar _globals2 = _interopRequireDefault(_globals);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction buildWFSUrl(feature) {\n\t  var layerConfig = feature.layer.config;\n\t  var wsName = 'M' + layerConfig.idMap;\n\t  var baseUrl = _globals2.default.DEFAULT_PROXY + layerConfig.wfsParams.url.replace('/' + wsName, '') + 'service=WFS&version=2.0.0&request=GetFeature&srsName=EPSG%3A4326&outputFormat=application%2Fjson';\n\t  var idAttr = layerConfig.cachePostGIS ? layerConfig.infoOptions.infoIdAttr.toLowerCase() : layerConfig.infoOptions.infoIdAttr;\n\t\n\t  return baseUrl + '&typeName=' + wsName + ':' + layerConfig.wfsParams.typeName + '&cql_filter=' + idAttr + '=' + feature.properties[layerConfig.infoOptions.infoIdAttr];\n\t}\n\t\n\tfunction getFeatureHilite(feature) {\n\t  var url = buildWFSUrl(feature);\n\t  var params = {};\n\t\n\t  return _axios2.default.get(url, {\n\t    params: params\n\t  }).then(function (response) {\n\t    return response.data.features;\n\t  });\n\t}\n\n/***/ }),\n\n/***/ 191:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = getFeatureInfo;\n\t\n\tvar _axios = __webpack_require__(13);\n\t\n\tvar _axios2 = _interopRequireDefault(_axios);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction getFeatureInfo(url) {\n\t  var params = {};\n\t\n\t  return _axios2.default.get(url, {\n\t    params: params\n\t  }).then(function (response) {\n\t    return response.data.features;\n\t  });\n\t}\n\n/***/ }),\n\n/***/ 192:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = getFeatureXSLT;\n\t\n\tvar _axios = __webpack_require__(13);\n\t\n\tvar _axios2 = _interopRequireDefault(_axios);\n\t\n\tvar _parseXML = __webpack_require__(95);\n\t\n\tvar _parseXML2 = _interopRequireDefault(_parseXML);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction getFeatureXSLT(infoUrl, data) {\n\t  return _axios2.default.get('/geoservices/REST/config/xsl_info_service?', {\n\t    headers: {\n\t      'Accept': 'text/xml'\n\t    },\n\t\n\t    params: {\n\t      xslUrl: infoUrl,\n\t      ambiente: null,\n\t      idLayer: data.layerName.replace('L', ''),\n\t      featureAttributes: data.properties\n\t    }\n\t  }).then(function (response) {\n\t    return response.data;\n\t  }).then(function (data) {\n\t    return (0, _parseXML2.default)(data);\n\t  });\n\t}\n\n/***/ }),\n\n/***/ 193:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = getConfig;\n\t\n\tvar _axios = __webpack_require__(13);\n\t\n\tvar _axios2 = _interopRequireDefault(_axios);\n\t\n\tvar _config = __webpack_require__(44);\n\t\n\tvar config = _interopRequireWildcard(_config);\n\t\n\tvar _globals = __webpack_require__(5);\n\t\n\tvar _globals2 = _interopRequireDefault(_globals);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction getConfig(url) {\n\t  var params = {};\n\t\n\t  return _axios2.default.get(url, {\n\t    params: params\n\t  });\n\t}\n\n/***/ }),\n\n/***/ 196:\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (options) {\n\t  var elType = options.elType || 'div';\n\t  var containerId = options.containerId || 'gv-container';\n\t  var elId = options.elId;\n\t  var clear = options.clear;\n\t\n\t  if (clear && document.getElementById(elId)) {\n\t    document.getElementById(elId).remove();\n\t  }\n\t\n\t  var el = document.createElement(elType);\n\t  el.id = elId;\n\t  if (document.getElementById(containerId)) {\n\t    document.getElementById(containerId).appendChild(el);\n\t  } else {\n\t    console.log('Elemento ' + containerId + ' non trovato faccio mount su body');\n\t    document.body.appendChild(el);\n\t  }\n\t\n\t  return el;\n\t};\n\n/***/ }),\n\n/***/ 197:\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = getProtocol;\n\tfunction getProtocol() {\n\t  'use strict';\n\t\n\t  return window.location.href.split(':')[0];\n\t}\n\n/***/ }),\n\n/***/ 198:\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = getTmsMaxLevel;\n\tfunction getTmsMaxLevel(maxScale) {\n\t  var maxLevel = 12;\n\t  if (maxScale <= 2000 || maxScale == null) {\n\t    maxLevel = 17;\n\t  }\n\t  if (maxScale > 2000 && maxScale <= 6250) {\n\t    maxLevel = 16;\n\t  }\n\t  if (maxScale > 6250 && maxScale <= 12500) {\n\t    maxLevel = 15;\n\t  }\n\t  if (maxScale > 12500 && maxScale <= 25000) {\n\t    maxLevel = 14;\n\t  }\n\t  if (maxScale > 25000 && maxScale <= 50000) {\n\t    maxLevel = 13;\n\t  }\n\t  return maxLevel;\n\t}\n\n/***/ }),\n\n/***/ 199:\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = getUrlParam;\n\tfunction getUrlParam(paramName) {\n\t  var results = new RegExp('[\\\\?&]' + paramName + '=([^&#]*)').exec(window.location.href);\n\t  return results ? decodeURIComponent(results[1]) : null;\n\t}\n\n/***/ }),\n\n/***/ 200:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = getZoomFromScaleDenom;\n\t\n\tvar _globals = __webpack_require__(5);\n\t\n\tvar _globals2 = _interopRequireDefault(_globals);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction getZoomFromScaleDenom(scaleDenom) {\n\t  var zoom = _globals2.default.BASE_SCALES.findIndex(function (scale) {\n\t    return scaleDenom > scale;\n\t  });\n\t  return zoom - 1;\n\t}\n\n/***/ }),\n\n/***/ 201:\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (str, data) {\n\t  var templateRe = /\\{ *([\\w_\\-]+) *\\}/g;\n\t  return str.replace(templateRe, function (str, key) {\n\t    var value = data[key];\n\t\n\t    if (value === undefined) {\n\t      throw new Error('No value provided for variable ' + str);\n\t    } else if (typeof value === 'function') {\n\t      value = value(data);\n\t    }\n\t    return value;\n\t  });\n\t};\n\n/***/ }),\n\n/***/ 202:\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = isBrowserIE;\n\tfunction isBrowserIE() {\n\t  return navigator.userAgent.indexOf('MSIE ') > 0 || navigator.userAgent.indexOf('Trident') > 0 || navigator.userAgent.indexOf('Edge') > 0;\n\t}\n\n/***/ }),\n\n/***/ 203:\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = isTouch;\n\tfunction isTouch() {\n\t  return window.matchMedia('(pointer: coarse)').matches;\n\t}\n\n/***/ }),\n\n/***/ 204:\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = log;\n\tfunction log(msg) {\n\t  if (GV.config.debug) {\n\t    console.log(msg);\n\t  }\n\t}\n\n/***/ }),\n\n/***/ 290:\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 295:\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 296:\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 303:\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 304:\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 305:\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 311:\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 312:\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 315:\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 316:\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 318:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(295);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(54)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!./../../extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!./../../vue-style-loader/index.js!./../../css-loader/index.js?sourceMap!./font-awesome.css\", function() {\n\t\t\t\tvar newContent = require(\"!!./../../extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!./../../vue-style-loader/index.js!./../../css-loader/index.js?sourceMap!./font-awesome.css\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ }),\n\n/***/ 319:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(296);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(54)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!./../../extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!./../../vue-style-loader/index.js!./../../css-loader/index.js?sourceMap!./leaflet.css\", function() {\n\t\t\t\tvar newContent = require(\"!!./../../extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!./../../vue-style-loader/index.js!./../../css-loader/index.js?sourceMap!./leaflet.css\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ }),\n\n/***/ 320:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(315);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(54)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!./../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!./../../../node_modules/vue-style-loader/index.js!./../../../node_modules/css-loader/index.js?sourceMap!./base.css\", function() {\n\t\t\t\tvar newContent = require(\"!!./../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!./../../../node_modules/vue-style-loader/index.js!./../../../node_modules/css-loader/index.js?sourceMap!./base.css\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ }),\n\n/***/ 321:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(316);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(54)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!./../../../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!./../../../../../node_modules/vue-style-loader/index.js!./../../../../../node_modules/css-loader/index.js?sourceMap!./mapskin.css\", function() {\n\t\t\t\tvar newContent = require(\"!!./../../../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!./../../../../../node_modules/vue-style-loader/index.js!./../../../../../node_modules/css-loader/index.js?sourceMap!./mapskin.css\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ }),\n\n/***/ 327:\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __vue_exports__, __vue_options__\n\tvar __vue_styles__ = {}\n\t\n\t/* styles */\n\t__webpack_require__(305)\n\t\n\t/* script */\n\t__vue_exports__ = __webpack_require__(160)\n\t\n\t/* template */\n\tvar __vue_template__ = __webpack_require__(345)\n\t__vue_options__ = __vue_exports__ = __vue_exports__ || {}\n\tif (\n\t  typeof __vue_exports__.default === \"object\" ||\n\t  typeof __vue_exports__.default === \"function\"\n\t) {\n\t__vue_options__ = __vue_exports__ = __vue_exports__.default\n\t}\n\tif (typeof __vue_options__ === \"function\") {\n\t  __vue_options__ = __vue_options__.options\n\t}\n\t\n\t__vue_options__.render = __vue_template__.render\n\t__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\t\n\tmodule.exports = __vue_exports__\n\n\n/***/ }),\n\n/***/ 329:\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __vue_exports__, __vue_options__\n\tvar __vue_styles__ = {}\n\t\n\t/* styles */\n\t__webpack_require__(303)\n\t\n\t/* script */\n\t__vue_exports__ = __webpack_require__(162)\n\t\n\t/* template */\n\tvar __vue_template__ = __webpack_require__(343)\n\t__vue_options__ = __vue_exports__ = __vue_exports__ || {}\n\tif (\n\t  typeof __vue_exports__.default === \"object\" ||\n\t  typeof __vue_exports__.default === \"function\"\n\t) {\n\t__vue_options__ = __vue_exports__ = __vue_exports__.default\n\t}\n\tif (typeof __vue_options__ === \"function\") {\n\t  __vue_options__ = __vue_options__.options\n\t}\n\t\n\t__vue_options__.render = __vue_template__.render\n\t__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\t__vue_options__._scopeId = \"data-v-3f78502f\"\n\t\n\tmodule.exports = __vue_exports__\n\n\n/***/ }),\n\n/***/ 334:\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __vue_exports__, __vue_options__\n\tvar __vue_styles__ = {}\n\t\n\t/* styles */\n\t__webpack_require__(312)\n\t\n\t/* script */\n\t__vue_exports__ = __webpack_require__(168)\n\t\n\t/* template */\n\tvar __vue_template__ = __webpack_require__(352)\n\t__vue_options__ = __vue_exports__ = __vue_exports__ || {}\n\tif (\n\t  typeof __vue_exports__.default === \"object\" ||\n\t  typeof __vue_exports__.default === \"function\"\n\t) {\n\t__vue_options__ = __vue_exports__ = __vue_exports__.default\n\t}\n\tif (typeof __vue_options__ === \"function\") {\n\t  __vue_options__ = __vue_options__.options\n\t}\n\t\n\t__vue_options__.render = __vue_template__.render\n\t__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\t\n\tmodule.exports = __vue_exports__\n\n\n/***/ }),\n\n/***/ 335:\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __vue_exports__, __vue_options__\n\tvar __vue_styles__ = {}\n\t\n\t/* styles */\n\t__webpack_require__(304)\n\t\n\t/* script */\n\t__vue_exports__ = __webpack_require__(169)\n\t\n\t/* template */\n\tvar __vue_template__ = __webpack_require__(344)\n\t__vue_options__ = __vue_exports__ = __vue_exports__ || {}\n\tif (\n\t  typeof __vue_exports__.default === \"object\" ||\n\t  typeof __vue_exports__.default === \"function\"\n\t) {\n\t__vue_options__ = __vue_exports__ = __vue_exports__.default\n\t}\n\tif (typeof __vue_options__ === \"function\") {\n\t  __vue_options__ = __vue_options__.options\n\t}\n\t\n\t__vue_options__.render = __vue_template__.render\n\t__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\t__vue_options__._scopeId = \"data-v-4020fcaa\"\n\t\n\tmodule.exports = __vue_exports__\n\n\n/***/ }),\n\n/***/ 343:\n/***/ (function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;\n\t  return _vm._c('div', {\n\t    style: (_vm.style),\n\t    attrs: {\n\t      \"id\": \"gv-header\"\n\t    }\n\t  }, [_vm._t(\"default\")], 2)\n\t},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 344:\n/***/ (function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;\n\t  return _vm._c('div', {\n\t    style: (_vm.style),\n\t    attrs: {\n\t      \"id\": \"gv-map\"\n\t    }\n\t  }, [_vm._c('gv-info-wms-manager', {\n\t    ref: \"info\"\n\t  })], 1)\n\t},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 345:\n/***/ (function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;\n\t  return _vm._c('div', {\n\t    attrs: {\n\t      \"id\": \"gv-container\"\n\t    }\n\t  }, [(_vm.showHeader) ? _vm._c('gv-header') : _vm._e(), _vm._v(\" \"), _vm._c('gv-map', {\n\t    ref: \"gv-map\"\n\t  }), _vm._v(\" \"), _vm._c('div', {\n\t    directives: [{\n\t      name: \"show\",\n\t      rawName: \"v-show\",\n\t      value: (_vm.showTitle),\n\t      expression: \"showTitle\"\n\t    }],\n\t    staticClass: \"gv-color-scheme\",\n\t    attrs: {\n\t      \"id\": \"gv-title\"\n\t    }\n\t  }, [_vm._v(_vm._s(this.getTitle()))]), _vm._v(\" \"), (_vm.showLegend) ? _vm._c('gv-legend', {\n\t    ref: \"gv-legend\"\n\t  }) : _vm._e()], 1)\n\t},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 351:\n/***/ (function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;\n\t  return _vm._c(\"div\")\n\t},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 352:\n/***/ (function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;\n\t  return _vm._c('div', {\n\t    staticClass: \"gv-inverted-color-scheme\",\n\t    attrs: {\n\t      \"id\": \"gv-legend\"\n\t    }\n\t  }, [_vm._c('div', {\n\t    staticClass: \"gv-legend-title gv-color-scheme\"\n\t  }, [_vm._c('b', [_vm._v(\"LEGENDA\")]), _vm._v(\" \"), _vm._c('button', {\n\t    staticClass: \"gv-legend-close\",\n\t    attrs: {\n\t      \"type\": \"button\"\n\t    },\n\t    on: {\n\t      \"click\": _vm.hideLegend\n\t    }\n\t  }, [_vm._v(\"×\")]), _vm._v(\" \"), _vm._c('el-button', {\n\t    directives: [{\n\t      name: \"show\",\n\t      rawName: \"v-show\",\n\t      value: (_vm.options.showAddMap),\n\t      expression: \"options.showAddMap\"\n\t    }],\n\t    staticClass: \"gv-inverted-color-scheme gv-legend-buttons ms ms-layers-add\",\n\t    attrs: {\n\t      \"title\": \"Aggiungi Mappe\",\n\t      \"type\": \"primary\",\n\t      \"size\": \"mini\"\n\t    },\n\t    on: {\n\t      \"click\": _vm.addMap\n\t    }\n\t  })], 1), _vm._v(\" \"), _vm._c('div', {\n\t    staticClass: \"gv-legend-wrapper\",\n\t    attrs: {\n\t      \"id\": \"gv-legend-wrapper\"\n\t    }\n\t  }, [_vm._c('div', {\n\t    attrs: {\n\t      \"id\": \"gv-legend-body\"\n\t    }\n\t  }, _vm._l((_vm.maps), function(map) {\n\t    return _vm._c('ul', {\n\t      key: map.id,\n\t      staticClass: \"gv-list-group\"\n\t    }, [_vm._c('div', {\n\t      staticClass: \"gv-list-legend-map-item gv-inverted-color-scheme\"\n\t    }, [_vm._c('li', [_vm._v(\"\\n                        \" + _vm._s(map.name) + \"\\n                    \")]), _vm._v(\" \"), _vm._c('div', {\n\t      staticClass: \"gv-legend-map-tools gv-inverted-color-scheme\"\n\t    }, [(_vm.checkAddMap(map)) ? _vm._c('el-button', {\n\t      staticClass: \"gv-legend-map-tools-add fa fa-file-text-o\",\n\t      attrs: {\n\t        \"title\": \"Visualizza scheda\",\n\t        \"type\": \"primary\",\n\t        \"size\": \"mini\"\n\t      },\n\t      on: {\n\t        \"click\": function($event) {\n\t          _vm.showMapInfoPanel(map)\n\t        }\n\t      }\n\t    }) : _vm._e(), _vm._v(\" \"), (_vm.isDownloadable(map)) ? _vm._c('el-button', {\n\t      staticClass: \"gv-button-download fa fa-download\",\n\t      attrs: {\n\t        \"title\": \"Download\",\n\t        \"type\": \"primary\",\n\t        \"size\": \"mini\"\n\t      },\n\t      on: {\n\t        \"click\": function($event) {\n\t          _vm.download(map)\n\t        }\n\t      }\n\t    }) : _vm._e(), _vm._v(\" \"), _vm._c('el-button', {\n\t      staticClass: \"gv-legend-map-tools-add fa fa-trash\",\n\t      attrs: {\n\t        \"title\": \"Cancella\",\n\t        \"type\": \"primary\",\n\t        \"size\": \"mini\"\n\t      },\n\t      on: {\n\t        \"click\": function($event) {\n\t          _vm.remove(map)\n\t        }\n\t      }\n\t    }), _vm._v(\" \"), _vm._c('el-button', {\n\t      staticClass: \"gv-legend-map-tools-add ms ms-transparency\",\n\t      attrs: {\n\t        \"title\": \"Trasparenza Livelli\",\n\t        \"type\": \"primary\",\n\t        \"size\": \"mini\"\n\t      },\n\t      on: {\n\t        \"click\": function($event) {\n\t          _vm.layerTransparency(map)\n\t        }\n\t      }\n\t    })], 1)]), _vm._v(\" \"), _vm._c('ul', {\n\t      staticClass: \"gv-list-group\"\n\t    }, _vm._l((map.layers), function(layer) {\n\t      return _vm._c('li', {\n\t        key: layer.id,\n\t        class: _vm.getClass(layer),\n\t        attrs: {\n\t          \"layer\": layer\n\t        }\n\t      }, [_vm._c('img', {\n\t        staticClass: \"gv-legend-layer-icon\",\n\t        attrs: {\n\t          \"src\": _vm.iconUrl(layer)\n\t        },\n\t        on: {\n\t          \"click\": function($event) {\n\t            _vm.showLegendPanel(layer)\n\t          }\n\t        }\n\t      }), _vm._v(\" \"), _vm._c('span', {\n\t        staticClass: \"gv-layer-visibility-span\"\n\t      }, [_vm._c('input', {\n\t        directives: [{\n\t          name: \"model\",\n\t          rawName: \"v-model\",\n\t          value: (layer.visible),\n\t          expression: \"layer.visible\"\n\t        }],\n\t        staticClass: \"gv-layer-visibility-cb\",\n\t        attrs: {\n\t          \"type\": \"checkbox\"\n\t        },\n\t        domProps: {\n\t          \"checked\": Array.isArray(layer.visible) ? _vm._i(layer.visible, null) > -1 : (layer.visible)\n\t        },\n\t        on: {\n\t          \"click\": function($event) {\n\t            _vm.setLayerVisible(layer, $event)\n\t          },\n\t          \"change\": function($event) {\n\t            var $$a = layer.visible,\n\t              $$el = $event.target,\n\t              $$c = $$el.checked ? (true) : (false);\n\t            if (Array.isArray($$a)) {\n\t              var $$v = null,\n\t                $$i = _vm._i($$a, $$v);\n\t              if ($$el.checked) {\n\t                $$i < 0 && (layer.visible = $$a.concat([$$v]))\n\t              } else {\n\t                $$i > -1 && (layer.visible = $$a.slice(0, $$i).concat($$a.slice($$i + 1)))\n\t              }\n\t            } else {\n\t              _vm.$set(layer, \"visible\", $$c)\n\t            }\n\t          }\n\t        }\n\t      })]), _vm._v(\" \"), _vm._c('span', {\n\t        staticClass: \"gv-layer-title-span\"\n\t      }, [_vm._v(_vm._s(layer.legend.label))])])\n\t    }))])\n\t  })), _vm._v(\" \"), _vm._c('div', {\n\t    staticClass: \"gv-legend-footer gv-inverted-color-scheme\"\n\t  }, [_vm._c('gv-base-layer-switcher', {\n\t    directives: [{\n\t      name: \"show\",\n\t      rawName: \"v-show\",\n\t      value: (_vm.options.showBaseLayerSwitcher),\n\t      expression: \"options.showBaseLayerSwitcher\"\n\t    }],\n\t    ref: \"gv-base-layer-switcher\"\n\t  })], 1)])])\n\t},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 355:\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar map = {\n\t\t\"./div.js\": 174,\n\t\t\"./fullscreen.js\": 175,\n\t\t\"./geocoder.js\": 176,\n\t\t\"./locate.js\": 177,\n\t\t\"./scalebar.js\": 178,\n\t\t\"./search.js\": 179,\n\t\t\"./zoom.js\": 180\n\t};\n\tfunction webpackContext(req) {\n\t\treturn __webpack_require__(webpackContextResolve(req));\n\t};\n\tfunction webpackContextResolve(req) {\n\t\treturn map[req] || (function() { throw new Error(\"Cannot find module '\" + req + \"'.\") }());\n\t};\n\twebpackContext.keys = function webpackContextKeys() {\n\t\treturn Object.keys(map);\n\t};\n\twebpackContext.resolve = webpackContextResolve;\n\tmodule.exports = webpackContext;\n\twebpackContext.id = 355;\n\n\n/***/ }),\n\n/***/ 356:\n/***/ (function(module, exports) {\n\n\t/* (ignored) */\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/GV.js","// -------------------------------------------------------------------------------- //\r\n// CSS\r\nrequire('style!../node_modules/leaflet/dist/leaflet.css')\r\nrequire('style!./assets/css/base.css')\r\nrequire('style!./assets/css/mapskin/css/mapskin.css')\r\nrequire('style!font-awesome/css/font-awesome.css')\r\n// -------------------------------------------------------------------------------- //\r\n// Shims/Polyfill\r\nrequire('./polyfill/findIndex')\r\nrequire('./polyfill/find')\r\nrequire('./polyfill/startsWith')\r\nrequire('es6-promise').polyfill()\r\n\r\n//\r\nimport globals from './globals'\r\nimport getUrlParam from './util/getUrlParam'\r\nimport log from './util/log'\r\nimport mountComponent from './util/mountComponent'\r\nimport * as config from './config'\r\nimport Vue from 'vue'\r\nimport App from './components/App.vue'\r\nVue.component('gv-app', App)\r\n\r\nconst eventBus = new Vue()\r\n\r\nconst initConfig = function(options) {\r\n  GV.config = config\r\n  config.set(options)\r\n}\r\n\r\nconst init = function(options) {\r\n  initConfig(options)\r\n  return new Vue({\r\n    el: '#gv-container',\r\n    template: '<gv-app></gv-app>',\r\n  })\r\n}\r\n\r\nconst mountLegend = function() {\r\n  mountComponent({\r\n    elId: 'gv-legend',\r\n    clear: true,\r\n    containerId: GV.config.containerId,\r\n    vm: new Vue({\r\n      template: `<gv-legend ref=\"gv-legend\"></gv-legend>`,\r\n    }),\r\n  })\r\n}\r\n\r\nwindow.GV = {\r\n  initConfig,\r\n  init,\r\n  globals,\r\n  log,\r\n  eventBus,\r\n  mountLegend,\r\n  utils: {\r\n    getUrlParam: getUrlParam,\r\n  },\r\n  Buttons: [],\r\n}\r\n\r\n// -------------------------------------------------------------------------------- //\r\n// Bottoni\r\nvar req = require.context('./buttons', true, /^(.*\\.(js$))[^.]*$/gim)\r\nreq.keys().forEach(function(script) {\r\n  //   console.log(script.replace('./','').replace('.js',''))\r\n  req(script)\r\n})\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/index.js","var globals = {\r\n  DEFAULT_PROXY: '/geoservices/apps/proxy/proxy.jsp?url=',\r\n\r\n  USE_SUBDOMAINS: true,\r\n\r\n//  RL_MAP_CONFIG_SERVICE: 'srvcarto.regione.liguria.it/geoservices/REST/config/map/',\r\n  RL_MAP_CONFIG_SERVICE: 'srvcarto.regione.liguria.it/geoservices/REST/geoportale/map/',\r\n  RL_DYN_MAP_CONFIG_SERVICE: '/geoservices/REST/config/map/',\r\n  RL_CREATE_SLD_SERVICE: 'srvcarto.regione.liguria.it/geoservices/REST/config/create_sld/',\r\n  RL_CATALOG_SERVICE: 'srvcarto.regione.liguria.it/geoservices/REST/geoportale/catalogo/',\r\n  RL_CANALI_SERVICE: 'srvcarto.regione.liguria.it/geoservices/REST/config/ag_app_canali_tree/',\r\n  RL_SCHEDA_SERVICE: 'srvcarto.regione.liguria.it/geoservices/REST/geoportale/scheda/',\r\n  RL_ENTI_SERVICE: 'srvcarto.regione.liguria.it/geoservices/REST/geoportale/enti/',\r\n\r\n  RL_METADATA_URL: '/geoservices/REST/metadata/scheda_xml/',\r\n\r\n  GOOGLE_GEOCODE_PROXY: 'geoportale.regione.liguria.it/geoservices/REST/proxy/google_geocode?region=it&language=it&sensor=false&bounds=7.43,43.75|10.00,44.70',\r\n\r\n  MAX_BOUNDS: {\r\n    X_MIN: 43.4,\r\n    Y_MIN: 7.3,\r\n    X_MAX: 44.8,\r\n    Y_MAX: 10.5\r\n  },\r\n\r\n  LOADING_OPTIONS: {\r\n    target: 'gv-map',\r\n    spinner: 'el-icon-loading',\r\n    background: 'rgba(0, 0, 0, 0.7)',\r\n  },\r\n\r\n  INFO_WMS_MAX_FEATURES: 10,\r\n\r\n  BASE_SCALES: [\r\n    591657550.500000,\r\n    295828775.300000,\r\n    147914387.600000,\r\n    73957193.820000,\r\n    36978596.910000,\r\n    18489298.450000,\r\n    9244649.227000,\r\n    4622324.614000,\r\n    2311162.307000,\r\n    1155581.153000,\r\n    577790.576700,\r\n    288895.288400,\r\n    144447.644200,\r\n    72223.822090,\r\n    36111.911040,\r\n    18055.955520,\r\n    9027.977761,\r\n    4513.988880,\r\n    2256.994440,\r\n    1128.497220,\r\n    564.24861,\r\n    282.124305\r\n  ],\r\n\r\n  BASE_SCALE_LABELS: {\r\n    8: '1:1.600.000',\r\n    9: '1:800.000',\r\n    10: '1:400.000',\r\n    11: '1:200.000',\r\n    12: '1:100.000',\r\n    13: '1:50.000',\r\n    14: '1:25.000',\r\n    15: '1:12.500',\r\n    16: '1:6.250',\r\n    17: '1:3.125',\r\n    18: '1:1.560',\r\n    19: '1:800',\r\n    20: '1:400'\r\n  },\r\n\r\n  BASE_LAYERS: {\r\n    'BLANK': {\r\n      label: 'Sfondo Bianco',\r\n      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/bianco.gif'\r\n    },\r\n    'RL_ORTOFOTO_2013': {\r\n      label: 'AGEA: Ortofoto 2013',\r\n      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/sfondi_rl.jpg'\r\n    },\r\n    'RL_ORTOFOTO_2016': {\r\n      label: 'AGEA: Ortofoto 2016',\r\n      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/sfondi_rl.jpg'\r\n    },\r\n    'RL_CARTE_BASE': {\r\n      label: 'Carte di base regionali',\r\n      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/sfondi_rl.jpg'\r\n    },\r\n    'OSM': {\r\n      label: 'OpenStreetMap',\r\n      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/openstreetmap.png'\r\n    },\r\n    'ESRI_IMAGERY': {\r\n      label: 'ESRI Imagery',\r\n      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/esri.gif'\r\n    },\r\n    'ESRI_TOPOGRAPHIC': {\r\n      label: 'ESRI Topographic',\r\n      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/esri.gif'\r\n    },\r\n    'ESRI_GRAY': {\r\n      label: 'ESRI Gray',\r\n      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/esri.gif'\r\n    },\r\n    'ESRI_DARKGRAY': {\r\n      label: 'ESRI Dark Gray',\r\n      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/esri.gif'\r\n    },\r\n    'MAPBOX_STREETS': {\r\n      label: 'Mapbox Streets',\r\n      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/mapbox.png'\r\n    },\r\n    'MAPBOX_SATELLITE': {\r\n      label: 'Mapbox Satellite',\r\n      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/mapbox.png'\r\n    },\r\n    'MAPBOX_OUTDOOR': {\r\n      label: 'Mapbox Outdoor',\r\n      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/mapbox.png'\r\n    },\r\n    'MAPBOX_LIGHT': {\r\n      label: 'Mapbox Light',\r\n      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/mapbox.png'\r\n    },\r\n    'STAMEN_TERRAIN': {\r\n      label: 'Stamen Terrain',\r\n      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/mapbox.png'\r\n    },\r\n    'STAMEN_TONER_LIGHT': {\r\n      label: 'Stamen Toner Light',\r\n      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/mapbox.png'\r\n    },\r\n    'GOOGLE_ROADMAP': {\r\n      label: 'Google Stradario',\r\n      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/google.png'\r\n    },\r\n    'GOOGLE_HYBRID': {\r\n      label: 'Google Ibrido',\r\n      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/google.png'\r\n    },\r\n    'GOOGLE_TERRAIN': {\r\n      label: 'Google Terreno',\r\n      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/google.png'\r\n    },\r\n    'GOOGLE_SATELLITE': {\r\n      label: 'Google Satellite',\r\n      icon: 'http://srvcarto.regione.liguria.it/geoviewer/img/legend/google.png'\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport default globals\r\n\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/globals.js","import createElement from './createElement'\r\n\r\nexport default function (options) {\r\n  'use strict'\r\n  let { elId, vm, toggleEl } = options\r\n\r\n  const el = document.getElementById(elId)\r\n  // Flag toggleEl determina comportamento nel caso componente esiste già\r\n  // Se toggleEl=true e componente esiste già non lo sostituisco ma lo rendo visibile/invisibile\r\n  if (toggleEl && el) {\r\n    el.style.display = (el.style.display === 'none' || !el.style.display) ? 'block' : 'none'\r\n  } else {\r\n    const el = createElement(options)\r\n    vm.$mount(el)\r\n  }\r\n\r\n  return vm\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/util/mountComponent.js","import Vue from 'vue'\nimport globals from './globals'\nimport getConfig from './services/getConfig'\nimport getCatalog from './services/getCatalog'\nimport getEnti from './services/getEnti'\nimport mountComponent from './util/mountComponent'\nimport { Notification } from 'element-ui'\n\nlet _lastZIndex = 21\nlet debug = false\nlet containerId = 'gv-container'\nlet idMap = null\nlet title = null\nlet geoserverUrl\nlet application = {}\nlet baseLayers = [{ type: 'ESRI_IMAGERY', visible: true }]\nlet maps = []\n\nfunction set(options) {\n    if (!options) {\n        throw new Error('Opzioni di inizializzazione non impostate!')\n    }\n\n    debug = options.debug\n    idMap = options.idMap\n    geoserverUrl = options.geoserverUrl\n    if (options.application) {\n        application = options.application\n    }\n    if (options.containerId) {\n        containerId = options.containerId\n    }\n\n    application.layout = options.application && options.application.layout ? options.application.layout : {}\n\n    if (options.application) {\n        application.proxy = options.application.proxy || globals.DEFAULT_PROXY\n    }\n    if (options.application && options.application.layout && options.application.layout.title) {\n        title = options.application.layout.title\n    }\n\n    // Gestione BaseLayers\n    baseLayers = options.baseLayers\n    baseLayers.forEach(layer => {\n        layer.name = layer.type\n        layer.label = globals.BASE_LAYERS[layer.type].label\n        layer.icon = globals.BASE_LAYERS[layer.type].icon\n    })\n\n    if (options.idMap) {\n        const callback = options.application ? options.application.callback : null\n        const idMaps = options.idMap.split(',')\n        idMaps.forEach(id => addRlMap(id, callback, true))\n            // addRlMap(options.idMap, callback, true)\n    } else {\n        GV.eventBus.$on('gv-app-mounted', app => {\n            options.maps.forEach(mapConfig => {\n                this.addMapConfig(mapConfig)\n                GV.app.setTitle(mapConfig)\n            })\n            if (application && application.callback) {\n                application.callback(app)\n            }\n        })\n    }\n\n    GV.eventBus.$on('map-zoom', event => {\n        var layers = this.getAllLayersConfig()\n        layers.forEach(layer => {\n            this.setLayerAttribute(layer.name, 'inRange', GV.app.map.layerInRange(layer))\n        })\n    })\n}\n\nfunction addMapConfig(mapConfig) {\n    if (getMapConfig(mapConfig.id)) {\n        return\n    }\n\n    if (mapConfig.ancillaryMaps) {\n        mapConfig.ancillaryMaps.forEach(map => addMapConfig(map))\n    }\n\n    mapConfig.layers.forEach(function(layer) {\n        layer.minScale = layer.minScale === 0 ? 591657550 : layer.minScale\n        layer.inRange = GV.app && GV.app.map ? GV.app.map.layerInRange(layer) : true\n        layer.opacityBase100 = layer.opacity * 100\n        layer.zIndex = _lastZIndex++\n    })\n    mapConfig.layers.reverse()\n    maps.unshift(mapConfig)\n    GV.eventBus.$emit('config-add-map', {\n        config: mapConfig,\n    })\n}\n\nfunction getAllLayersConfig() {\n    let layers = []\n    maps.forEach(function(map) {\n        map.layers.forEach(function(layer) {\n            layers.push(layer)\n        })\n    })\n    return layers\n}\n\nfunction setLayerAttribute(layerName, attribute, value) {\n    maps.forEach(function(map) {\n        let layers = map.layers\n        layers.forEach(function(layer) {\n            if (layer.name === layerName) {\n                layer[attribute] = value\n            }\n        })\n    })\n}\n\n/**\n * @param {string} layerName\n * @return {boolean}\n */\n\nfunction getLayerConfig(layerName) {\n    let foundLayer = null\n    maps.forEach(function(map) {\n        let layers = map.layers\n        foundLayer = layers.find(function(layer) {\n            return layer.name === layerName\n        })\n    })\n    if (foundLayer) {\n        return foundLayer\n    }\n}\n\nfunction getBaseLayerConfig(layerName) {\n    let foundLayer = baseLayers.find(function(layer) {\n        return layer.name === layerName\n    })\n    return foundLayer\n}\n\nfunction getMapConfig(idMap) {\n    return maps.find(function(map) {\n        return map.id == idMap\n    })\n}\n\nfunction getButton(buttonName) {\n    let button = null\n    if (!application.layout || !application.layout.toolbar) {\n        return null\n    }\n    application.layout.toolbar.forEach(function(tb) {\n        tb.items.forEach(function(item) {\n            if (item.name === buttonName) {\n                button = item\n            }\n        }, this)\n    }, this)\n    return button\n}\n\nfunction getButtonOption(buttonName, optionName) {\n    let option = null\n    if (!application.layout || !application.layout.toolbar) {\n        return null\n    }\n    application.layout.toolbar.forEach(function(tb) {\n        tb.items.forEach(function(item) {\n            if (item.name === buttonName) {\n                option = item.options[optionName]\n            }\n        }, this)\n    }, this)\n    return option\n}\n\nfunction setButtonOption(buttonName, optionName, value) {\n    let option = null\n    if (!application.layout || !application.layout.toolbar) {\n        return null\n    }\n    application.layout.toolbar.forEach(function(tb) {\n        tb.items.forEach(function(item) {\n            if (item.name === buttonName) {\n                item.options[optionName] = value\n            }\n        }, this)\n    }, this)\n    return option\n}\n\nfunction getActiveBaseLayer() {\n    let activeLayer = null\n    baseLayers.forEach(layer => {\n        if (layer.visible) {\n            activeLayer = layer\n        }\n    })\n    return activeLayer\n}\n\nfunction setActiveBaseLayer(layerName) {\n    baseLayers.forEach(layer => {\n        layer.visible = layer.name === layerName\n    })\n}\n\nfunction removeMap(idMap) {\n    const mapConfig = getMapConfig(idMap)\n    GV.eventBus.$emit('config-remove-map', {\n        config: mapConfig,\n    })\n\n    const index = maps.findIndex(function(map) {\n        return map.id === idMap\n    })\n    if (index > -1) {\n        maps.splice(index, 1)\n    }\n}\n\nfunction removeLayer(idLayer) {\n    var self = this\n    maps.forEach(function(map) {\n        let layerIndex = -1\n        map.layers.forEach(function(layer, index) {\n            if (layer.name === idLayer) {\n                layerIndex = index\n            }\n        })\n        if (layerIndex > -1) {\n            map.layers.splice(layerIndex, 1)\n        }\n        if (map.layers.length === 0) {\n            self.removeMap(map.id)\n        }\n    })\n\n    GV.eventBus.$emit('config-remove-layer', {\n        config: idLayer,\n    })\n}\n\nfunction addRlMap(idMap, callback, setBaseLayer) {\n    if (getMapConfig(idMap)) {\n        return getMapConfig(idMap)\n    }\n\n    getConfig(idMap)\n        .then(response => {\n            if (!response.data.success) {\n                throw new Error('Errore Caricamento Mappa: ' + response.data.message)\n            }\n            if (!response.data.data) {\n                throw new Error('Errore Caricamento Mappa: configurazione non trovata')\n            }\n\n            const mapConfig = response.data.data\n\n            // Aggiorno array delle mappe\n            addMapConfig(mapConfig)\n            if (GV.app && GV.app.setTitle) {\n                GV.app.setTitle(mapConfig)\n            }\n            if (GV.app && GV.app.map && mapConfig.type && mapConfig.type == 'R' && setBaseLayer && getBaseLayerConfig('BLANK')) {\n                GV.app.map.changeBaseLayer('BLANK')\n                GV.baseLayerSwitcher.activeBaseLayer = 'BLANK'\n            }\n\n            // Aggiorno layer base\n            if (mapConfig.activeBaseLayer) {\n                GV.app.map.changeBaseLayer(mapConfig.activeBaseLayer)\n                GV.baseLayerSwitcher.activeBaseLayer = mapConfig.activeBaseLayer\n            }\n\n            // Gestione callback\n            if (callback) {\n                callback(this)\n            }\n            return mapConfig\n        })\n        .catch(error => {\n            console.error(error)\n            Notification.error({\n                title: 'Attenzione',\n                type: 'error',\n                duration: 5000,\n                offset: 70,\n                message: error.message,\n            })\n        })\n}\n\nfunction loadCatalog(params) {\n    getCatalog().then(data => {\n        this.catalog = this.catalogFull = data.children\n        getEnti().then(data => {\n            this.enti = data\n            if (params.showMapCatalogPanel) {\n                // Mount Pannello\n                mountComponent({\n                    elId: 'gv-map-catalog-panel',\n                    toggleEl: false,\n                    vm: new Vue({\n                        template: `<gv-map-catalog-panel></gv-map-catalog-panel>`,\n                    }),\n                })\n            }\n        })\n    })\n}\n\nexport {\n    debug,\n    idMap,\n    application,\n    baseLayers,\n    maps,\n    title,\n    geoserverUrl,\n    set,\n    addMapConfig,\n    addRlMap,\n    getAllLayersConfig,\n    getLayerConfig,\n    getBaseLayerConfig,\n    getActiveBaseLayer,\n    getMapConfig,\n    loadCatalog,\n    removeMap,\n    removeLayer,\n    getButton,\n    getButtonOption,\n    setButtonOption,\n    setLayerAttribute,\n    setActiveBaseLayer,\n    containerId,\n}\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/config.js","import axios from 'axios'\r\nimport globals from '../globals'\r\n\r\nexport default function getConfig(idMap, app = 'generico') {\r\n  if (!idMap || idMap === 'null') {\r\n    throw new Error('Parametro idMap mancante')\r\n  }\r\n\r\n  let url = idMap.startsWith('D') ? `${globals.RL_DYN_MAP_CONFIG_SERVICE}${idMap}?app=${app}` : `${window.location.href.split(':')[0]}://${globals.RL_MAP_CONFIG_SERVICE}${idMap}?app=${app}`\r\n\r\n\r\n  let params = {}\r\n\r\n  if (GV.config.geoserverUrl) {\r\n    params.geoserverUrl = GV.config.geoserverUrl\r\n  }\r\n\r\n  return axios.get(url, {\r\n    params: params,\r\n  })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/services/getConfig.js","\r\nimport axios from 'axios'\r\nimport globals from '../globals'\r\n\r\nexport default function getCatalog (params = {}) {\r\n  let url = `${window.location.href.split(':')[0]}://${globals.RL_CATALOG_SERVICE}`\r\n  if (params.idMap) {\r\n    url += params.idMap\r\n  }\r\n\r\n  return axios.get(url, {\r\n    params: params\r\n  }).then(response => response.data.data)\r\n}\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/services/getCatalog.js","export default function getParamString (obj, existingUrl, uppercase) {\r\n  var params = []\r\n  for (var i in obj) {\r\n    params.push(encodeURIComponent(uppercase ? i.toUpperCase() : i) + '=' + encodeURIComponent(obj[i]))\r\n  }\r\n  return ((!existingUrl || existingUrl.indexOf('?') === -1) ? '?' : '&') + params.join('&')\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/util/getParamString.js","import isBrowserIE from './isBrowserIE'\r\n\r\nexport default function parseXML (data) {\r\n  try {\r\n    let xml = null\r\n    if (isBrowserIE()) {\r\n      let xmlDoc = new ActiveXObject('Microsoft.XMLDOM')\r\n      xmlDoc.async = 'false'\r\n      xmlDoc.loadXML(data)\r\n      xml = xmlDoc\r\n    } else {\r\n      var parser = new DOMParser()\r\n      xml = parser.parseFromString(data, 'text/xml')\r\n    }\r\n    return xml\r\n  } catch (exception) {\r\n    console.error(exception)\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/util/parseXML.js","var __vue_exports__, __vue_options__\nvar __vue_styles__ = {}\n\n/* styles */\nrequire(\"!!./../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!vue-loader/lib/style-rewriter?id=data-v-71709b00!vue-loader/lib/selector?type=styles&index=0!./InfoWmsManager.vue\")\n\n/* script */\n__vue_exports__ = require(\"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./InfoWmsManager.vue\")\n\n/* template */\nvar __vue_template__ = require(\"!!vue-loader/lib/template-compiler?id=data-v-71709b00!vue-loader/lib/selector?type=template&index=0!./InfoWmsManager.vue\")\n__vue_options__ = __vue_exports__ = __vue_exports__ || {}\nif (\n  typeof __vue_exports__.default === \"object\" ||\n  typeof __vue_exports__.default === \"function\"\n) {\n__vue_options__ = __vue_exports__ = __vue_exports__.default\n}\nif (typeof __vue_options__ === \"function\") {\n  __vue_options__ = __vue_options__.options\n}\n\n__vue_options__.render = __vue_template__.render\n__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\nmodule.exports = __vue_exports__\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/InfoWmsManager.vue\n// module id = 116\n// module chunks = 13","<template>\n    <div id=\"gv-container\">\n        <gv-header v-if=\"showHeader\"></gv-header>\n        <gv-map ref=\"gv-map\"></gv-map>\n        <div v-show=\"showTitle\" class=\"gv-color-scheme\" id=\"gv-title\">{{this.getTitle()}}</div>\n        <gv-legend ref=\"gv-legend\" v-if=\"showLegend\"></gv-legend>\n    </div>\n</template>\n\n\n<script>\nimport globals from '../globals'\n\nimport isTouch from '../util/isTouch'\nimport getProtocol from '../util/getProtocol'\nimport mountComponent from '../util/mountComponent'\nimport Vue from 'vue'\n\n// Componenti Vue\nimport Map from './Map'\nVue.component('gv-map', Map)\nimport Legend from './Legend'\nVue.component('gv-legend', Legend)\nimport Header from './Header'\nVue.component('gv-header', Header)\n// Componenti lazy\nVue.component('gv-iframe-panel', () => import('./IFrame.vue'))\nVue.component('gv-info-wms-list', () => import('./InfoWmsList.vue'))\nVue.component('gv-info-wms-html', () => import('./InfoWmsHtml.vue'))\n\nexport default {\n  name: 'gv-app',\n  data() {\n    return {\n      showHeader: GV.config.application.layout.header,\n      showTitle: GV.config.application.layout.title,\n      showLegend: GV.config.application.layout.legend,\n    }\n  },\n  created() {\n    GV.log('gv-app: created')\n    // imposto GV.app in modo da averlo a disposizione appena creato il componente\n    GV.app = this\n  },\n  mounted() {\n    GV.log('gv-app: mounted')\n    // gestione toolbar\n    this.addToolbars(GV.config.application.layout.toolbar)\n\n    GV.eventBus.$emit('gv-app-mounted', this)\n\n    if (GV.loadingInstance) {\n      GV.loadingInstance.close()\n    }\n  },\n  methods: {\n    getTitle() {\n      return GV.config.title\n    },\n    getMaps() {\n      return GV.config.maps\n    },\n    addToolbars() {\n      if (GV.config.application.layout.toolbar) {\n        var toolbar = GV.config.application.layout.toolbar\n        toolbar.forEach(tb => {\n          const position = tb.position || 'topleft'\n          tb.items.forEach(item => {\n            item.options = item.options || {}\n            item.options.position = item.options.position || position\n            this.addButton(item)\n          })\n        })\n      }\n    },\n    addButton(item) {\n      if (GV.Buttons[item.name]) {\n        var button = GV.Buttons[item.name](item.options, GV.app.map)\n        if (button) {\n          button.name = item.name\n          button.addTo(GV.app.map)\n          GV.app.map.buttons.push(button)\n          if (button.options.vueComponent) {\n            this.mountBtnComponent(button.options.vueComponent)\n          }\n          if (button.options.callBack) {\n            button.options.callBack(button)\n          }\n          if (button.options.autoClick) {\n            setTimeout(function() {\n              button.button.click()\n            }, 1)\n          }\n        }\n      } else {\n        throw new Error('Bottone ' + item.name + ' non esistente')\n      }\n    },\n    mountBtnComponent(options) {\n      mountComponent({\n        containerId: options.containerId,\n        elId: options.id,\n        vm: new Vue({\n          template: `<${options.id}></${options.id}>`,\n        }),\n        toggleEl: false,\n      })\n    },\n    setTitle(mapConfig) {\n      // Imposto titolo\n      if (GV.config.application.layout.title === '{map.title}') {\n        GV.config.title = mapConfig.name\n      }\n    },\n  },\n}\n</script>\n\n\n<style>\n\n</style>\n\n\n// WEBPACK FOOTER //\n// App.vue?3e914259","<template>\r\n        <div id=\"gv-header\" :style=\"style\">\r\n          <slot></slot>\r\n        </div>\r\n</template>\r\n\r\n\r\n<script>\r\n\r\nexport default {\r\n  name: 'gv-header',\r\n  computed: {\r\n    style() { return `height:${GV.config.application.layout.header.height}`}\r\n  },\r\n  mounted() {\r\n    this.$el.innerHTML=GV.config.application.layout.header.html\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>\n\n\n// WEBPACK FOOTER //\n// Header.vue?173047e2","<script>\r\n\r\nimport globals from '../globals'\r\nimport Vue from 'vue'\r\nimport mountComponent from '../util/mountComponent'\r\nimport parseXML from '../util/parseXML'\r\nimport getParamString from '../util/getParamString'\r\nimport getFeatureInfo from '../services/getFeatureInfo'\r\nimport getFeatureHilite from '../services/getFeatureHilite'\r\nimport getFeatureXSLT from '../services/getFeatureXSLT'\r\n// import startLoadingService from './util/startLoadingService'\r\n// import stopLoadingService from './util/stopLoadingService'\r\n\r\nvar _requestCount = 0\r\nvar _numRequests = 0\r\nvar _features = []\r\n\r\nfunction _request(e) {\r\n  GV.log('start info request: ' + new Date())\r\n\r\n  _requestCount = 0\r\n  _numRequests = 0\r\n  _features = []\r\n\r\n  // startLoadingService('Interrogazione livello...')\r\n\r\n  var buildWMSOptions = function(url, layers, latlng) {\r\n    var point = GV.app.map.latLngToContainerPoint(latlng, GV.app.map.getZoom())\r\n    var size = GV.app.map.getSize()\r\n    var bounds = GV.app.map.getBounds()\r\n    var sw = GV.app.map.options.crs.project(bounds.getSouthWest())\r\n    var ne = GV.app.map.options.crs.project(bounds.getNorthEast())\r\n    var params = {\r\n      request: 'GetFeatureInfo',\r\n      service: 'WMS',\r\n      crs: 'EPSG:3857',\r\n      styles: '',\r\n      version: '1.3.0',\r\n      format: 'application/json',\r\n      bbox: `${sw.x},${sw.y},${ne.x},${ne.y}`,\r\n      height: size.y,\r\n      width: size.x,\r\n      layers: layers,\r\n      query_layers: layers,\r\n      FEATURE_COUNT: 100,\r\n      buffer: 10,\r\n      info_format: 'application/json',\r\n      i: point.x,\r\n      j: point.y,\r\n    }\r\n\r\n    return url + getParamString(params, url, true)\r\n  }\r\n\r\n  // Ciclo sulle mappe caricate\r\n  GV.config.maps.forEach(function(mapConfig) {\r\n    var url = null\r\n    var layersArray = []\r\n\r\n    // Ciclo sui layer caricati sulla mappa\r\n    mapConfig.layers.forEach(function(layerConfig) {\r\n      if (\r\n        layerConfig.idMap === mapConfig.id &&\r\n        layerConfig.type === 'WMS' &&\r\n        layerConfig.queryable &&\r\n        layerConfig.visible &&\r\n        GV.app.map.layerInRange(layerConfig)\r\n      ) {\r\n        url = layerConfig.wmsParams.url\r\n        url = globals.DEFAULT_PROXY + url\r\n        layersArray.push(layerConfig.wmsParams.name)\r\n      }\r\n    })\r\n\r\n    if (url && layersArray.length > 0) {\r\n      const layers = layersArray.join(',')\r\n      var wmsUrl = buildWMSOptions(url, layers, e.latlng)\r\n      _numRequests++\r\n      GV.app.map._container.style.cursor = 'progress'\r\n      getFeatureInfo(wmsUrl)\r\n        .then(features => _handleResponse(features))\r\n        .catch(error => console.error(error))\r\n    } else {\r\n      // stopLoadingService()\r\n    }\r\n  })\r\n}\r\n\r\nfunction _handleResponse(features) {\r\n  _requestCount++\r\n  features.forEach(function(feature) {\r\n    var layerName = feature.id.split('.')[0]\r\n    feature.layerName = layerName\r\n    feature.layer = GV.app.map.getLayerByName(layerName)\r\n    // TODO gestione attributi per livelli PostGIS\r\n    feature.properties = setFeatureProperties(layerName, feature.properties)\r\n    feature.label = setFeatureLabel(layerName, feature.properties)\r\n    feature.infoOptions = feature.layer.config.infoOptions\r\n  })\r\n  Array.prototype.push.apply(_features, features)\r\n  if (_requestCount === _numRequests) {\r\n    GV.app.map._container.style.cursor = 'default'\r\n\r\n    if (_features.length === 0) {\r\n      GV.log('Nessun elemento trovato')\r\n      return\r\n    }\r\n\r\n    if (_features.length === 1) {\r\n      _showFeatureInfo(_features[0])\r\n    } else {\r\n      mountComponent({\r\n        elId: 'gv-info-wms-list',\r\n        clear: true,\r\n        vm: new Vue({\r\n          template: `<gv-info-wms-list :items=\"items\"></gv-info-wms-list>`,\r\n          data: {\r\n            items: _features,\r\n          },\r\n        }),\r\n      })\r\n    }\r\n\r\n    GV.log('end info request: ' + new Date())\r\n    // stopLoadingService()\r\n  }\r\n\r\n  function setFeatureProperties(layerName, properties) {\r\n    var layerConfig = GV.app.map.getLayerByName(layerName).config\r\n    var newProperties\r\n    if (layerConfig.cachePostGIS) {\r\n      newProperties = upperProperties(properties)\r\n    } else {\r\n      newProperties = properties\r\n    }\r\n    return newProperties\r\n  }\r\n\r\n  function upperProperties(props) {\r\n    var newProps = {}\r\n    for (var key in props) {\r\n      if (props.hasOwnProperty(key)) {\r\n        newProps[key.toUpperCase()] = props[key]\r\n      }\r\n    }\r\n    return newProps\r\n  }\r\n\r\n  function setFeatureLabel(layerName, attributes) {\r\n    var infoLabelAttr, infoIdAttr\r\n    infoLabelAttr = getField(layerName, 'infoLabelAttr')\r\n    infoIdAttr = getField(layerName, 'infoIdAttr')\r\n    if (infoLabelAttr && attributes[infoLabelAttr]) {\r\n      return attributes[infoLabelAttr]\r\n    }\r\n    if (infoIdAttr && attributes[infoIdAttr]) {\r\n      return attributes[infoIdAttr]\r\n    }\r\n    return attributes[getFirstAttribute(attributes)]\r\n  }\r\n\r\n  function getField(layerName, fieldName) {\r\n    var layerConfig = GV.app.map.getLayerByName(layerName).config\r\n    return layerConfig && layerConfig.infoOptions && layerConfig.infoOptions[fieldName] ? layerConfig.infoOptions[fieldName] : null\r\n  }\r\n\r\n  function getFirstAttribute(attributes) {\r\n    for (var i in attributes) {\r\n      if (attributes.hasOwnProperty(i) && typeof i !== 'function') {\r\n        return i\r\n      }\r\n    }\r\n    return null\r\n  }\r\n}\r\n\r\nfunction _showFeatureInfo(feature) {\r\n  var infoOptions = feature.infoOptions\r\n  var infoUrl = infoOptions.infoUrl\r\n\r\n  if (infoUrl.substr(infoUrl.length - 4) === '.xsl' || infoUrl.substr(infoUrl.length - 5) === '.xslt') {\r\n    // Gestione xsl\r\n    buildAndShowHtml(infoOptions, feature)\r\n  } else {\r\n    // Gestione html/asp\r\n    if (!infoOptions.infoTarget || infoOptions.infoTarget === 'panel') {\r\n      showPanel(infoUrl, null, infoOptions)\r\n    } else {\r\n      openPopup(infoUrl, null, infoOptions)\r\n    }\r\n  }\r\n\r\n  function buildAndShowHtml(infoOptions, data) {\r\n    // costruisco il gml in formato getFeatureInfo Mapserver\r\n    let xmlDoc = buildGml(data)\r\n    let { infoUrl, infoTarget } = infoOptions\r\n\r\n    getFeatureXSLT(infoUrl, data).then(xslDoc => {\r\n      // Aggiungo Nome Layer\r\n      Array.prototype.slice.call(xslDoc.getElementsByTagName('td')).forEach(function(value, index, ar) {\r\n        if (value.id === 'Titolo') {\r\n          value.textContent = data.layer.legend.label\r\n          value.text = data.layer.legend.label\r\n        }\r\n      })\r\n\r\n      // applico la trasformazione xslt\r\n      var result = xslTransform(xmlDoc, xslDoc)\r\n      // levo i caratteri di encoding %0A e %09 dai link\r\n      // result = result.replace(new RegExp('%0A', 'g'), '').replace(new RegExp('%09', 'g'), '').replace(new RegExp('%20', 'g'), '')\r\n      // visualizzo il risultato\r\n      if (!infoTarget || infoTarget === 'panel') {\r\n        showPanel(result, null, infoOptions)\r\n      } else {\r\n        openPopup(result, null, infoOptions)\r\n      }\r\n    })\r\n\r\n    // costruisce un documento GML in formato getFeatureInfo Mapserver\r\n    function buildGml(feature) {\r\n      try {\r\n        var baseXml =\r\n          '<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?><msGMLOutput xmlns:gml=\"http://www.opengis.net/gml\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"></msGMLOutput>'\r\n        var xmlDoc = parseXML(baseXml)\r\n        var layerName = `${feature.layerName}_layer`\r\n        var layerNode = xmlDoc.createElement(layerName)\r\n        var featureName = `${feature.layerName}_feature`\r\n        var featureNode = xmlDoc.createElement(featureName)\r\n        var attributes = feature.properties\r\n\r\n        for (var key in attributes) {\r\n          if (attributes.hasOwnProperty(key)) {\r\n            var text = null\r\n            if (attributes[key]) {\r\n              text = xmlDoc.createTextNode(attributes[key])\r\n            } else {\r\n              text = xmlDoc.createTextNode('')\r\n            }\r\n            var attrNode = xmlDoc.createElement(key)\r\n            attrNode.appendChild(text)\r\n            featureNode.appendChild(attrNode)\r\n          }\r\n        }\r\n        layerNode.appendChild(featureNode)\r\n        xmlDoc.documentElement.appendChild(layerNode)\r\n        return xmlDoc\r\n      } catch (exception) {\r\n        console.error(exception)\r\n      }\r\n    }\r\n\r\n    // trasformo xml in html applicando xslt\r\n    function xslTransform(xmlDoc, xslDoc) {\r\n      try {\r\n        if (window.XSLTProcessor) {\r\n          var xsltProcessor = new XSLTProcessor()\r\n          xsltProcessor.importStylesheet(xslDoc)\r\n          var transformedDoc = xsltProcessor.transformToDocument(xmlDoc)\r\n          return new XMLSerializer().serializeToString(transformedDoc)\r\n        } else {\r\n          return xmlDoc.transformNode(xslDoc)\r\n        }\r\n      } catch (exception) {\r\n        console.error(exception)\r\n      }\r\n    }\r\n  }\r\n\r\n  // apre una panel div con un documento html\r\n  function showPanel(html, url, configOptions) {\r\n    if (html) {\r\n      mountComponent({\r\n        elId: 'gv-info-wms-html',\r\n        vm: new Vue({\r\n          template: '<gv-info-wms-html :html=\"html\" :height=\"height\" :width=\"width\" :title=\"title\"></gv-info-wms-html>',\r\n          data: {\r\n            title: 'Risultato Info',\r\n            html: html,\r\n            width: configOptions.infoWidth || 400,\r\n            height: configOptions.infoHeight || 400,\r\n          },\r\n        }),\r\n      })\r\n    } else {\r\n      // TODO\r\n      // 1 - faccio request dell'html\r\n      // 2 - sostituisco variabile con valore - prerequisito: deve esistere un attributo con nome uguale alla variabile\r\n      // es: se infoUrl e' http://pippo/pluto.asp?id=${gid} deve esistere attributo \"gid\" in attributes della feature\r\n      // var infoUrl = OpenLayers.String.format(configOptions.infoUrl, data.attributes)\r\n      // 3 - creo il pannello html\r\n      // createHtmlPanel (html, configOptions)\r\n    }\r\n  }\r\n\r\n  function openPopup(html, url, options) {\r\n    var width = options.infoWidth || 400\r\n    var height = options.infoHeight || 500\r\n    var popup = window.open(url, '', `status=yes, toolbar=yes, menubar=no, width=${width}, height=${height}, resizable=yes, scrollbars=yes`)\r\n\r\n    popup.document.open()\r\n    popup.document.write(html)\r\n    popup.document.close()\r\n    popup.focus()\r\n  }\r\n\r\n  getFeatureHilite(feature)\r\n    .then(features => {\r\n      const layer = GV.app.map.getLayerByName('InfoWmsHilite')\r\n      if (features && features[0] && features[0].geometry) {\r\n        layer.clearLayers()\r\n        layer.addData(features[0].geometry)\r\n        GV.app.map.fitBounds(layer.getBounds(), { maxZoom: 15 })\r\n        GV.app.map._container.style.cursor = 'default'\r\n      }\r\n    })\r\n    .catch(error => {\r\n      console.error(error)\r\n    })\r\n}\r\n\r\nexport default {\r\n  name: 'gv-info-wms-manager',\r\n  data() {\r\n    return {}\r\n  },\r\n  methods: {\r\n    activate: function() {\r\n      GV.log('GV.app.infoWmsManager.activate')\r\n\r\n      // Aggiungo layer per evidenziazione\r\n      GV.app.map.loadLayers([\r\n        {\r\n          name: 'InfoWmsHilite',\r\n          type: 'JSON',\r\n          style: {\r\n            color: '#ffcc00',\r\n            fillOpacity: 0,\r\n            weight: 6,\r\n            opacity: 0.6,\r\n          },\r\n          pointToLayer: function(feature, latlng) {\r\n            return L.circleMarker(latlng, {\r\n              radius: 8,\r\n              color: '#ffcc00',\r\n              fillColor: '#ffcc00',\r\n              fill: true,\r\n              fillOpacity: 0.6,\r\n              weight: 6,\r\n              opacity: 0.6,\r\n            })\r\n          },\r\n          visible: true,\r\n        },\r\n      ])\r\n      // Attivo evento click\r\n      GV.eventBus.$on('map-click', event => {\r\n        _request(event)\r\n      })\r\n    },\r\n\r\n    deactivate: function() {\r\n      GV.eventBus.$off('map-click', event => {\r\n      })\r\n    },\r\n\r\n    showFeatureInfo: _showFeatureInfo,\r\n  },\r\n  created() {\r\n    GV.log('infoWmsManager mounted')\r\n  },\r\n}\r\n</script>\r\n\r\n<template>\r\n</template>\r\n\r\n<style>\r\n\r\n</style>\n\n\n// WEBPACK FOOTER //\n// InfoWmsManager.vue?1da23327","<template>\r\n    <div id=\"gv-legend\" class=\"gv-inverted-color-scheme\">\r\n        <div class=\"gv-legend-title gv-color-scheme\">\r\n            <b>LEGENDA</b>\r\n            <button class=\"gv-legend-close\" type=\"button\" @click=\"hideLegend\">×</button>\r\n            <el-button title=\"Aggiungi Mappe\" v-show=\"options.showAddMap\" type=\"primary\" @click=\"addMap\" class=\"gv-inverted-color-scheme gv-legend-buttons ms ms-layers-add\" size=\"mini\" />\r\n                <!-- <span> CATALOGO </span> -->\r\n                <!-- </el-button> -->\r\n            <!-- <el-button title=\"Trasparenza Livelli\" v-show=\"options.showLayersTransparency\" type=\"primary\" @click=\"layerTransparency\" class=\"gv-inverted-color-scheme gv-legend-buttons ms ms-transparency\" size=\"mini\" /> -->\r\n        </div>\r\n        <div id=\"gv-legend-wrapper\" class=\"gv-legend-wrapper\">\r\n            <div id=\"gv-legend-body\">\r\n                <!-- MAPPE -->\r\n                <ul v-for=\"map in maps\" class=\"gv-list-group\" :key=\"map.id\">\r\n                    <div class=\"gv-list-legend-map-item gv-inverted-color-scheme\">\r\n                        <li>\r\n                            {{map.name}}\r\n                        </li>\r\n                        <div class=\"gv-legend-map-tools gv-inverted-color-scheme\">\r\n                            <el-button v-if=\"checkAddMap(map)\" title=\"Visualizza scheda\" type=\"primary\" @click=\"showMapInfoPanel(map)\" class=\"gv-legend-map-tools-add fa fa-file-text-o\" size=\"mini\"></el-button>\r\n                            <el-button title=\"Download\" v-if=\"isDownloadable(map)\" type=\"primary\" @click=\"download(map)\" class=\"gv-button-download fa fa-download\" size=\"mini\"></el-button>\r\n                            <el-button title=\"Cancella\" type=\"primary\" @click=\"remove(map)\" class=\"gv-legend-map-tools-add fa fa-trash\" size=\"mini\"></el-button>\r\n                            <el-button title=\"Trasparenza Livelli\" type=\"primary\" @click=\"layerTransparency(map)\" class=\"gv-legend-map-tools-add ms ms-transparency\" size=\"mini\"></el-button>\r\n                        </div>\r\n                    </div>\r\n                    <!-- LIVELLI -->\r\n                    <ul class=\"gv-list-group\">\r\n                        <li v-for=\"layer in map.layers\" :layer=\"layer\" :class=\"getClass(layer)\" :key=\"layer.id\">\r\n                            <img class=\"gv-legend-layer-icon\" :src=\"iconUrl(layer)\" @click=\"showLegendPanel(layer)\">\r\n                            <span class=\"gv-layer-visibility-span\"><input type=\"checkbox\" class=\"gv-layer-visibility-cb\" v-model=\"layer.visible\" @click=\"setLayerVisible(layer, $event)\"></span>\r\n                            <span class=\"gv-layer-title-span\">{{layer.legend.label}}</span>\r\n                        </li>\r\n                    </ul>\r\n                </ul>\r\n            </div>\r\n            <div class=\"gv-legend-footer gv-inverted-color-scheme\">\r\n                <gv-base-layer-switcher ref=\"gv-base-layer-switcher\" v-show=\"options.showBaseLayerSwitcher\"></gv-base-layer-switcher>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\n'use strict'\r\nimport Vue from 'vue'\r\nimport mountComponent from '../util/mountComponent'\r\n\r\nVue.component('gv-map-info-panel', () => import('./MapInfoPanel.vue'))\r\nVue.component('gv-base-layer-switcher', () => import('./BaseLayerSwitcher.vue'))\r\nVue.component('gv-multi-legend-panel', () => import('./MultiLegendPanel.vue'))\r\nVue.component('gv-map-catalog-panel',  () => import('./MapCatalogPanel.vue'))\r\nVue.component('gv-layers-transparency',  () => import('./LayersTransparency.vue'))\r\n\r\nimport { Select, Option, Button } from 'element-ui'\r\nVue.use(Select)\r\nVue.use(Option)\r\nVue.use(Button)\r\n\r\nexport default {\r\n  name: 'gv-legend',\r\n  data() {\r\n    return {\r\n      baseLayers: GV.config.baseLayers,\r\n      maps: GV.config.maps,\r\n      options: GV.config.application.layout.legend.options,\r\n      show: true,\r\n    }\r\n  },\r\n  mounted() {\r\n    GV.log('gv-legend: mounted')\r\n\r\n    GV.legend = this\r\n\r\n    if (this.options.showAddMap) {\r\n      const showMapCatalogPanel = GV.config.idMap ? false : true\r\n      GV.config.loadCatalog({ showMapCatalogPanel: showMapCatalogPanel })\r\n    }\r\n  },\r\n  methods: {\r\n    isDownloadable(map) {\r\n      return map.metaData.flag_download\r\n    },\r\n    checkAddMap(map) {\r\n      return this.options.showAddMap && GV.config.getMapConfig(map.id).metaData\r\n    },\r\n    hideLegend: function(event) {\r\n      if (this.show) {\r\n        document.getElementById('gv-legend-wrapper').style.display = 'none'\r\n        document.getElementById('gv-legend').style.width = '220px'\r\n      } else {\r\n        document.getElementById('gv-legend-wrapper').style.display = 'block'\r\n        document.getElementById('gv-legend').style.width = '260px'\r\n      }\r\n      this.show = !this.show\r\n    },\r\n    showMapInfoPanel: function(map) {\r\n      GV.config.schedaInfoCartografia = GV.config.getMapConfig(map.id).metaData\r\n      mountComponent({\r\n        elId: 'gv-map-info-panel',\r\n        containerId: GV.config.containerId,\r\n        clear: true,\r\n        vm: new Vue({\r\n          template: `<gv-map-info-panel visible=\"true\" idMap=\"${map.id}\"></gv-map-info-panel>`,\r\n        }),\r\n      })\r\n    },\r\n    remove: function(map) {\r\n      GV.config.removeMap(map.id)\r\n    },\r\n    download(map) {\r\n      window.open(map.metaData.link_download)\r\n    },\r\n    addMap: function() {\r\n      mountComponent({\r\n        elId: 'gv-map-catalog-panel',\r\n        containerId: GV.config.containerId,\r\n        toggleEl: true,\r\n        vm: new Vue({\r\n          template: `<gv-map-catalog-panel></gv-map-catalog-panel>`,\r\n        }),\r\n      })\r\n    },\r\n    layerTransparency: function(map) {\r\n      mountComponent({\r\n        elId: 'gv-layers-transparency',\r\n        containerId: GV.config.containerId,\r\n        toggleEl: false,\r\n        vm: new Vue({\r\n          template: `<gv-layers-transparency idMap=\"${map.id}\"></gv-layers-transparency>`,\r\n        }),\r\n      })\r\n    },\r\n    iconUrl: function(layer) {\r\n      return layer.legend.icon\r\n    },\r\n    getClass: function(layer) {\r\n      return layer.inRange ? 'gv-list-legend-layer-item' : 'gv-list-legend-layer-item gv-list-legend-layer-disabled-item'\r\n    },\r\n    setLayerVisible: function(layer, event) {\r\n      GV.eventBus.$emit('set-layer-visible', {\r\n        layer: layer,\r\n        checked: event.currentTarget.checked,\r\n      })\r\n    },\r\n    showLegendPanel: function(layer) {\r\n      if (layer.inRange && (layer.multiClasse || layer.legend.popUpFlag)) {\r\n        var url = null,\r\n          html = null,\r\n          width,\r\n          height\r\n        if (layer.legend.popUpUrl && layer.legend.popUpFlag) {\r\n          // se impostato attributo legendPopupUrl apro una finestra con il documento\r\n          url = layer.legend.popUpUrl\r\n          width = (window.matchMedia('(max-width: 620px)').matches) ? 400 : 600\r\n          height = (window.matchMedia('(max-height: 620px)').matches)? 400 : 600\r\n        } else if (layer.multiClasse) {\r\n          // se livello multiclasse apro una finestra con la legenda dei livelli multiclasse\r\n          if (layer.flagGeoserver) {\r\n            url = `${layer.wmsParams.url}LAYER=${layer.name}&REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&`\r\n            width = (window.matchMedia('(max-width: 450px)').matches) ? 300 : 400\r\n            height = 350\r\n          } else {\r\n            var classes = layer.classes\r\n            html = '<table width=100% border=0>'\r\n            classes.forEach(function(cls) {\r\n              html += '<tr>'\r\n              html += '<td width=30><img src=\"' + cls.legendIcon + '\"></td>'\r\n              html += '<td >' + cls.legendLabel + '</td>'\r\n              html += '</tr>'\r\n            })\r\n            html += '</table>'\r\n          }\r\n        }\r\n        mountComponent({\r\n          elId: 'gv-multi-legend-panel',\r\n          containerId: GV.config.containerId,\r\n          vm: new Vue({\r\n            template: `<gv-multi-legend-panel visible=\"true\" :src=\"src\" :html=\"html\" :height=\"height\" :width=\"width\" :title=\"title\"></gv-multi-legend-panel>`,\r\n            data: {\r\n              title: `LEGENDA - ${layer.legend.label}`,\r\n              src: url,\r\n              html: html,\r\n              width: width,\r\n              height: height,\r\n            },\r\n          }),\r\n        })\r\n      }\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\n.gv-legend-title {\r\n  position: relative;\r\n  display: block;\r\n  padding: 0.3rem 0.5rem;\r\n  margin-bottom: -1px;\r\n  color: #ccc;\r\n  cursor: default;\r\n  font-weight: bold;\r\n  \r\nfont-family: 'Raleway', Arial, sans-serif !important;\r\nfont-size: 14px;\r\n\r\n\r\n}\r\n\r\n.gv-legend-title span {\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n}\r\n\r\n.gv-legend-close {\r\n  cursor: pointer;\r\n  background: transparent;\r\n  border: 0;\r\n  -webkit-appearance: none;\r\n  float: right;\r\n  font-size: 24px;\r\n  line-height: 1;\r\n  color: #ffffff;\r\n  margin-right: -8px;\r\n  margin-top: -2px;\r\n  opacity: 0.5;\r\n}\r\n\r\n.gv-legend-buttons {\r\n  cursor: pointer;\r\n  border: 0;\r\n  -webkit-appearance: none;\r\n  float: right;\r\n  line-height: 1;\r\n  font-size: 12px !important;\r\n  padding-top: 3px !important;\r\n  padding-left: 0px !important;\r\n}\r\n\r\n/* .gv-legend-buttons span {\r\n  font-family: 'Raleway', Arial, sans-serif !important;\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n  vertical-align: top;\r\n} */\r\n\r\n.gv-list-group {\r\n  padding-left: 0;\r\n  margin-top: 0;\r\n  margin-bottom: 0;\r\n  background-color: #fff;\r\n  width: 260px;\r\n}\r\n\r\n.gv-list-legend-layer-item {\r\n  position: relative;\r\n  display: block;\r\n  /* padding: 0.1rem 0.5rem; */\r\n  padding-left: 0.3rem;\r\n  margin-bottom: -2px;\r\n  margin-top: -2px;\r\n  background-color: #fff;\r\n  border: 1px solid #ddd;\r\n}\r\n\r\n.gv-list-legend-layer-disabled-item {\r\n  opacity: 0.3;\r\n  filter: alpha(opacity=30);\r\n}\r\n\r\n.gv-legend-layer-icon {\r\n  /* padding: 2px 2px 2px 2px; */\r\n  padding-top: 3px;\r\n}\r\n\r\n.gv-legend-layer-icon img {\r\n  width: 24px;\r\n  height: 24px;\r\n}\r\n\r\n.gv-legend-map-tools {\r\n  position: relative;\r\n  padding-top: 2px;\r\n  padding-bottom: 2px;\r\n  /* ALlineato a destra\r\n        padding: 0rem 13.5rem;\r\n*/\r\n  width: 260px;\r\n}\r\n\r\n.gv-list-legend-map-item {\r\n  position: relative;\r\n  display: block;\r\n  padding: 0.1rem 0.5rem;\r\n  margin-bottom: -1px;\r\n  border: 1px solid #ddd;\r\n  font-size: 13px;\r\n  font-weight: bold;\r\n}\r\n\r\n.gv-legend-map-tools-add {\r\n  position: relative;\r\n  right: 0;\r\n  bottom: 0;\r\n  margin-bottom: 5px;\r\n  font-size: 14px;\r\n}\r\n\r\n.gv-legend-map-tools span {\r\n  font-family: 'Raleway', Arial, sans-serif !important;\r\n  font-size: 12px;\r\n  font-weight: bold;\r\n}\r\n\r\n.gv-layer-visibility-span {\r\n  position: absolute;\r\n  top: 16%;\r\n  left: 29px;\r\n}\r\n\r\n.gv-layer-title-span {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 55px;\r\n  margin-top: -7px;\r\n  font-size: 12px;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  max-width: 180px;\r\n}\r\n\r\n.gv-legend-footer {\r\n  display: block;\r\n  padding: 0.3rem 0.5rem;\r\n  margin-bottom: -1px;\r\n  cursor: default;\r\n}\r\n\r\n#gv-legend {\r\n  position: relative;\r\n  float: right;\r\n  right: 0;\r\n  top: 0;\r\n  margin-right: 10px;\r\n  margin-top: 10px;\r\n  width: 260px;\r\n  z-index: 800;\r\n  max-height: 430px;\r\n}\r\n\r\n#gv-legend-title {\r\n  height: 30px;\r\n}\r\n\r\n\r\n#gv-legend-body {\r\n  width: 260px;\r\n  max-height: 400px;\r\n  cursor: default;\r\n  overflow: hidden;\r\n}\r\n\r\n#gv-legend-body:hover {\r\n  overflow-y: scroll;\r\n}\r\n\r\n\r\n@media (max-height: 500px) {\r\n  #gv-legend-body {\r\n    overflow-y: scroll;\r\n    max-height: 200px;\r\n  }\r\n}\r\n\r\n#gv-legend-wrapper {\r\n  display: block;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// Legend.vue?47cc08a2","<template>\r\n    <div id=\"gv-map\" :style=\"style\">\r\n      <gv-info-wms-manager ref=\"info\"></gv-info-wms-manager>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from 'vue'\r\nimport Map from '../leaflet/Map.js'\r\n\r\n\r\nimport InfoWmsManager from './InfoWmsManager'\r\nVue.component('gv-info-wms-manager', InfoWmsManager)\r\n\r\nconst events = [\r\n  'click',\r\n  'dblclick',\r\n  'mousedown',\r\n  'mouseup',\r\n  'mouseover',\r\n  'mouseout',\r\n  'mousemove',\r\n  'contextmenu',\r\n  'focus',\r\n  'blur',\r\n  'preclick',\r\n  'load',\r\n  'unload',\r\n  'viewreset',\r\n  'movestart',\r\n  'move',\r\n  'moveend',\r\n  'dragstart',\r\n  'drag',\r\n  'dragend',\r\n  'zoomstart',\r\n  'zoomend',\r\n  'zoomanim',\r\n  'zoomlevelschange',\r\n  'resize',\r\n  'autopanstart',\r\n  'layeradd',\r\n  'layerremove',\r\n  'baselayerchange',\r\n  'overlayadd',\r\n  'overlayremove',\r\n  'locationfound',\r\n  'locationerror',\r\n  'popupopen',\r\n  'popupclose',\r\n]\r\n\r\nexport default {\r\n  name: 'gv-map',\r\n  data () {\r\n      const height = document.documentElement.clientHeight\r\n      return {\r\n          style: `height:${height}px`\r\n      }\r\n  },\r\n  mounted() {\r\n    GV.app.map = new Map()\r\n\r\n    this.registerMapEvents()\r\n\r\n    this.subscribeConfigEvents()\r\n\r\n    window.addEventListener('resize', this.handleResize)\r\n    this.handleResize()\r\n\r\n    if (GV.config.application.mapOptions && GV.config.application.mapOptions.click) {\r\n      this.$refs.info.activate()\r\n    }\r\n    \r\n    GV.log('gv-map: mounted')\r\n  },\r\n  methods: {\r\n    handleResize (event) {\r\n        const height = document.documentElement.clientHeight - document.getElementById('gv-map').getBoundingClientRect().top \r\n        this.style = `height:${height}px`\r\n    },\r\n    registerMapEvents() {\r\n      events.forEach(eventName => {\r\n        const exposedName = 'map-' + eventName\r\n        GV.app.map.on(eventName, ev => {\r\n          GV.eventBus.$emit(exposedName, ev)\r\n        })\r\n      })\r\n    },\r\n    subscribeConfigEvents() {\r\n      // Ascolto evento config-add-map e aggiungo layer alla mappa\r\n      GV.eventBus.$on('config-add-map', ev => {\r\n        const mapConfig = ev.config\r\n        // Aggiungo livelli alla mappa\r\n        GV.app.map.loadLayers(mapConfig.layers)\r\n        //gestione extent\r\n        if (mapConfig.extent_3857) {\r\n          GV.app.map.setExtent(mapConfig.extent_3857)\r\n        }\r\n      })\r\n      // Ascolto evento config-remove-map e levo layer alla mappa\r\n      GV.eventBus.$on('config-remove-map', ev => {\r\n        const mapConfig = ev.config\r\n        // Levo i livelli dalla mappa\r\n        mapConfig.layers.forEach(layerConfig => {\r\n          const layer = GV.app.map.getLayerByName(layerConfig.name)\r\n          if (layer) {\r\n            GV.app.map.removeLayer(layer)\r\n          }\r\n        })\r\n      })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#gv-map {\r\n  position: absolute;\r\n  width: 100%;\r\n  margin-top: 0px;\r\n  z-index: 1;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// Map.vue?77a59614","GV.Buttons.div = function(btnOptions, map) {\r\n\r\n  const containerId = 'gv-button-div'\r\n\r\n  const Button = L.Control.extend({\r\n    onAdd: function(map) {\r\n      let container = document.createElement('div')\r\n      container.id = containerId\r\n      container.className = 'leaflet-bar leaflet-control'\r\n      container.innerHTML = btnOptions.html\r\n      return container\r\n    },\r\n  })\r\n\r\n  return new Button(btnOptions)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/buttons/div.js","GV.Buttons.fullscreen = function (btnOptions, map) {\r\n  return L.control.fullscreen(btnOptions)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/buttons/fullscreen.js","import Vue from 'vue'\r\n\r\nGV.Buttons.geocoder = function(btnOptions, map) {\r\n  const containerId = 'gv-button-geocoder'\r\n  const componentId = 'gv-geocoder'\r\n\r\n  const Button = L.Control.extend({\r\n    onAdd: function(map) {\r\n      let container = document.createElement('div')\r\n      container.id = containerId\r\n      container.className = 'leaflet-bar leaflet-control'\r\n      L.DomEvent.disableClickPropagation(container)\r\n      return container\r\n    },\r\n  })\r\n\r\n  Vue.component('gv-geocoder', () => import('../Components/Geocoder.vue'))\r\n  btnOptions.vueComponent = { containerId: containerId, id: componentId }\r\n\r\n  return new Button(btnOptions)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/buttons/geocoder.js","GV.Buttons.locate = function (btnOptions, map) {\r\n  return L.control.Locate(btnOptions)\r\n}\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/buttons/locate.js","import Vue from 'vue'\r\n\r\nGV.Buttons.scalebar = function(btnOptions, map) {\r\n  const containerId = 'gv-button-scalebar'\r\n  const componentId = 'gv-scalebar'\r\n\r\n  const Button = L.Control.extend({\r\n    onAdd: function(map) {\r\n      let container = document.createElement('div')\r\n      container.id = containerId\r\n      container.className = 'leaflet-bar leaflet-control'\r\n      L.DomEvent.disableClickPropagation(container)\r\n      return container\r\n    },\r\n  })\r\n\r\n  Vue.component('gv-scalebar', () => import('../Components/Scalebar.vue'))\r\n  btnOptions.vueComponent = { containerId: containerId, id: componentId }\r\n\r\n  return new Button(btnOptions)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/buttons/scalebar.js","import Vue from 'vue'\r\n\r\nGV.Buttons.search = function(btnOptions, map) {\r\n  const containerId = 'gv-button-search'\r\n  const componentId = 'gv-search'\r\n\r\n  const Button = L.Control.extend({\r\n    onAdd: function(map) {\r\n      let container = document.createElement('div')\r\n      container.id = containerId\r\n      container.className = 'leaflet-control-search'\r\n      L.DomEvent.disableClickPropagation(container)\r\n      return container\r\n    },\r\n  })\r\n\r\n  Vue.component('gv-search', () => import('../Components/Search.vue'))\r\n  btnOptions.vueComponent = { containerId: containerId, id: componentId }\r\n\r\n  return new Button(btnOptions)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/buttons/search.js","GV.Buttons.zoom = function (btnOptions, map) {\r\n  return L.control.zoom(btnOptions)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/buttons/zoom.js","import L from 'leaflet'\nrequire('./leaflet/MarkerCluster.js')\nrequire('./leaflet/NonTiledLayer.js')\n\nimport globals from './globals'\nimport interpolateString from './util/interpolateString'\nimport getParamString from './util/getParamString'\nimport getZoomFromScaleDenom from './util/getZoomFromScaleDenom'\nimport getGeoJSON from './services/getGeoJSON'\nimport getTmsMaxLevel from './util/getTmsMaxLevel'\n\nvar esriLink = '<a href=\"http://www.esri.com/\">Esri</a>'\n\n// Funzione di costruzione geoJson\nfunction buildGeoJson(data, esParams) {\n    'use strict'\n    let geoJson\n    if (esParams) {\n        var geomField = esParams.geomField || 'location'\n        var features = data.hits.hits\n        geoJson = {\n            'type': 'FeatureCollection',\n            'totalFeatures': data.hits.total,\n            'features': [],\n            'crs': {\n                'type': 'name',\n                'properties': {\n                    'name': 'urn:ogc:def:crs:EPSG::4326'\n                }\n            }\n        }\n        features.forEach(function(feature) {\n            var coords = feature._source[geomField]\n            geoJson.features.push({\n                'type': 'Feature',\n                'id': feature._id,\n                'geometry': { 'type': 'Point', 'coordinates': coords },\n                'geometry_name': 'GEOMETRY',\n                'properties': feature._source\n            })\n        })\n    } else {\n        geoJson = (typeof data === 'string') ? JSON.parse(data) : data\n    }\n    return geoJson\n}\n\nvar layerFactory = {\n\n    BLANK(layerConfig) {\n        layerConfig.legend = {\n            label: 'Sfondo Bianco'\n        }\n        return L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { opacity: 0.0 })\n    },\n\n    OSM(layerConfig) {\n        layerConfig.legend = {\n            label: 'OpenStreetMap'\n        }\n        return L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n            attribution: 'Map data © <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors'\n        })\n    },\n\n    ESRI_IMAGERY(layerConfig) {\n        layerConfig.legend = { label: 'ESRI Imagery' }\n        layerConfig.name = layerConfig.type\n        var attr = 'DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community'\n        return L.tileLayer(\n            'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {\n                attribution: `&copy; ${esriLink}, ${attr}`,\n                maxZoom: 19 //, pane: layerConfig.name\n            }\n        )\n    },\n\n    ESRI_STREETS(layerConfig) {\n        layerConfig.legend = { label: 'ESRI Streets' }\n        layerConfig.name = layerConfig.type\n        var attr = 'USGS, NOAA'\n        return L.tileLayer(\n            'http://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}', {\n                attribution: `&copy; ${esriLink}, ${attr}`,\n                maxZoom: 19 //, pane: layerConfig.name\n            }\n        )\n    },\n\n    ESRI_TOPOGRAPHIC(layerConfig) {\n        layerConfig.legend = { label: 'ESRI Topographic' }\n        layerConfig.name = layerConfig.type\n        var attr = 'USGS, NOAA'\n        return L.tileLayer(\n            'http://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}', {\n                attribution: `&copy; ${esriLink}, ${attr}`,\n                maxZoom: 19 //, pane: layerConfig.name\n            }\n        )\n    },\n\n    ESRI_GRAY(layerConfig) {\n        layerConfig.legend = { label: 'ESRI Gray' }\n        layerConfig.name = layerConfig.type\n        var attr = 'HERE, DeLorme, MapmyIndia, OpenStreetMap contributors'\n        return L.tileLayer(\n            'http://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}', {\n                attribution: `&copy; ${esriLink}, ${attr}`,\n                maxZoom: 16 //, pane: layerConfig.name\n            }\n        )\n    },\n\n    ESRI_DARKGRAY(layerConfig) {\n        layerConfig.legend = { label: 'ESRI Dark Gray' }\n        layerConfig.name = layerConfig.type\n        var attr = 'HERE, DeLorme, MapmyIndia, OpenStreetMap contributors'\n        return L.tileLayer(\n            'http://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}', {\n                attribution: `&copy; ${esriLink}, ${attr}`,\n                maxZoom: 16 //, pane: layerConfig.name\n            }\n        )\n    },\n\n    MAPBOX_STREETS(layerConfig) {\n        layerConfig.legend = {\n            label: 'Mapbox Streets'\n        }\n        return L.tileLayer('http://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g', {\n            attribution: 'Imagery from <a href=\"http://mapbox.com/about/maps/\">MapBox</a> &mdash; Map data &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>',\n            subdomains: 'abcd',\n            id: 'mapbox.streets',\n            accessToken: 'pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g'\n        })\n    },\n\n    MAPBOX_SATELLITE(layerConfig) {\n        layerConfig.legend = {\n            label: 'Mapbox Satellite'\n        }\n        return L.tileLayer('http://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g', {\n            attribution: 'Imagery from <a href=\"http://mapbox.com/about/maps/\">MapBox</a> &mdash; Map data &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>',\n            subdomains: 'abcd',\n            id: 'mapbox.satellite',\n            accessToken: 'pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g'\n        })\n    },\n\n    MAPBOX_OUTDOOR(layerConfig) {\n        layerConfig.legend = {\n            label: 'Mapox Outdoor'\n        }\n        return L.tileLayer('http://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g', {\n            attribution: 'Imagery from <a href=\"http://mapbox.com/about/maps/\">MapBox</a> &mdash; Map data &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>',\n            subdomains: 'abcd',\n            id: 'mapbox.outdoors',\n            accessToken: 'pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g'\n        })\n    },\n\n    MAPBOX_LIGHT(layerConfig) {\n        layerConfig.legend = {\n            label: 'Mapox Light'\n        }\n        return L.tileLayer('http://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g', {\n            attribution: 'Imagery from <a href=\"http://mapbox.com/about/maps/\">MapBox</a> &mdash; Map data &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>',\n            subdomains: 'abcd',\n            id: 'mapbox.light',\n            accessToken: 'pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g'\n        })\n    },\n\n    STAMEN_TERRAIN(layerConfig) {\n        layerConfig.legend = {\n            label: 'Stamen Terrain'\n        }\n        return L.tileLayer('http://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}.{ext}', {\n            attribution: 'Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>, <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Map data &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>',\n            subdomains: 'abcd',\n            minZoom: 0,\n            maxZoom: 18,\n            ext: 'png'\n        })\n    },\n\n    STAMEN_TONER_LIGHT(layerConfig) {\n        layerConfig.legend = {\n            label: 'Stamen Toner Light'\n        }\n        return L.tileLayer('http://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.{ext}', {\n            attribution: 'Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>, <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Map data &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>',\n            subdomains: 'abcd',\n            minZoom: 0,\n            maxZoom: 20,\n            ext: 'png'\n        })\n    },\n\n    /*\n  CARTODB_POSITRON (layerConfig) {\n    layerConfig.legend = {\n      label: 'CartoDb Positron'\n    }\n    return L.tileLayer('http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png', {\n      attribution: '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> &copy; <a href=\"http://cartodb.com/attributions\">CartoDB</a>',\n      subdomains: 'abcd',\n      maxZoom: 19\n    })\n  },\n  CARTODB_DARKMATTER (layerConfig) {\n    layerConfig.legend = {\n      label: 'CartoDb DarkMatter'\n    }\n    return L.tileLayer('http://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png', {\n      attribution: '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> &copy; <a href=\"http://cartodb.com/attributions\">CartoDB</a>',\n      subdomains: 'abcd',\n      maxZoom: 19\n    })\n  },\n  OPENMAPSURFER_ROADS (layerConfig) {\n    layerConfig.legend = {\n      label: 'OpenMapSurfer Roads'\n    }\n    return L.tileLayer('http://korona.geog.uni-heidelberg.de/tiles/roads/x={x}&y={y}&z={z}', {\n      maxZoom: 20,\n      attribution: 'Imagery from <a href=\"http://giscience.uni-hd.de/\">GIScience Research Group @ University of Heidelberg</a> &mdash; Map data &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\n    })\n  },\n  HYDDA (layerConfig) {\n    layerConfig.legend = {\n      label: 'Hydda'\n    }\n    return L.tileLayer('http://{s}.tile.openstreetmap.se/hydda/full/{z}/{x}/{y}.png', {\n      attribution: 'Tiles courtesy of <a href=\"http://openstreetmap.se/\" target=\"_blank\">OpenStreetMap Sweden</a> &mdash; Map data &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\n    })\n  },\n\n*/\n\n    RL_ORTOFOTO_2013() {\n        return this.TMS({\n            visible: false,\n            tmsParams: {\n                name: 'L4419/webmercator',\n                url: 'http://mapproxy.regione.liguria.it/mapproxy/1661/tiles/'\n            },\n            zIndex: 1\n        })\n    },\n\n    RL_ORTOFOTO_2016() {\n        return this.TMS({\n            visible: false,\n            tmsParams: {\n                name: 'L5802/webmercator',\n                url: 'http://mapproxy.regione.liguria.it/mapproxy/1828/tiles/'\n            },\n            zIndex: 1\n        })\n    },\n\n    RL_CARTE_BASE() {\n        return this.TMS({\n            visible: false,\n            tmsParams: {\n                name: 'C1623/webmercator',\n                url: 'http://mapproxy.regione.liguria.it/mapproxy/1623/tiles/'\n            },\n            zIndex: 1\n        })\n    },\n\n    TMS(layerConfig) {\n        const url = layerConfig.tmsParams.url.replace('/tms/', '/tiles/')\n        const name = layerConfig.tmsParams.name\n        const tmsUrl = `${url}/1.0.0/${name}/{z}/{x}/{y}.png`\n        const maxLevel = getTmsMaxLevel(layerConfig.maxScale)\n        const layer = new L.TileLayer(tmsUrl, {\n            minZoom: 1,\n            maxZoom: maxLevel\n        })\n        layer.setZIndex(layerConfig.zIndex)\n        layer.name = name.replace('/webmercator', '')\n        return layer\n    },\n\n    WMS(layerConfig) {\n        let { name, geomType, cacheMinZoomLevel, minScale, maxScale, wmsParams, flagGeoserver, zIndex } = layerConfig\n        GV.log('layerFactory - Creazione Layer WMS: ' + name)\n\n        let isCached = (cacheMinZoomLevel) ? true : false\n        let format = (geomType === 'VECTOR') ? 'image/png8' : (cacheMinZoomLevel) ? 'image/jpeg' : 'image/png'\n        let minZoom = (minScale) ? getZoomFromScaleDenom(minScale) : 8\n        let maxZoom = (maxScale) ? getZoomFromScaleDenom(maxScale) : 20\n        let url = wmsParams.url\n\n        let opacity = layerConfig.opacity || 1\n\n        if (!flagGeoserver) {\n            cacheMinZoomLevel = null\n            format = (geomType === 'VECTOR') ? 'image/png' : 'image/jpeg'\n        }\n\n        let options = {\n            'subdomains': ['1', '2'],\n            'transparent': true,\n            'FORMAT_OPTIONS': 'antialias:text',\n            'layers': name,\n            'format': format,\n            'opacity': opacity,\n            'minZoom': minZoom,\n            'maxZoom': maxZoom,\n            //      'bounds': globals.MAX_BOUNDS\n            'bounds': L.latLngBounds(L.latLng(globals.MAX_BOUNDS.X_MIN, globals.MAX_BOUNDS.Y_MIN), L.latLng(globals.MAX_BOUNDS.X_MAX, globals.MAX_BOUNDS.Y_MAX))\n        }\n\n        let layer = null\n        if (isCached) {\n            if (globals.USE_SUBDOMAINS && url.indexOf('geoservizi.regione.liguria.it') > 0) {\n                url = url.replace('geoservizi', 'geoservizi{s}')\n            }\n            Object.assign(options, {\n                'tiled': true,\n                'TILESORIGIN': '-20037508,-20037508',\n                'tileSize': 256,\n                'CACHE_VERSION': layerConfig.cacheVersion\n            })\n            layer = L.tileLayer.wms(url, options)\n        } else {\n            Object.assign(options, {\n                'tiled': false,\n                'pane': 'tilePane'\n            })\n            layer = L.nonTiledLayer.wms(url, options)\n        }\n\n        layer.setZIndex(zIndex)\n        layer.type = 'WMS'\n        layer.name = name\n\n        return layer\n    },\n\n    JSON(layerConfig) {\n        let { data, url, name, wfsParams, esParams, classes, style, pointToLayer, tooltip, popup, cluster } = layerConfig\n        let clusterLayer = null\n        let options = {}\n\n        if (classes && classes.length > 0) {\n            if (layerConfig.geomSubType === 'POINT') {\n                options.pointToLayer = function(feature, latlng) {\n                    var style\n                    classes.forEach(function(cls) {\n                        if (cls.filter && cls.filter.key && cls.filter.value) {\n                            if (feature.properties[cls.filter.key] === cls.filter.value) {\n                                style = cls.style\n                            }\n                        } else {\n                            style = cls.style\n                        }\n                    })\n                    if (style.iconUrl) {\n                        var icon\n                        switch (style.iconUrl) {\n                            case 'default':\n                                icon = L.icon({\n                                    iconUrl: 'http://geoportale.regione.liguria.it/geoviewer2/static/img/marker-icon.png',\n                                    iconSize: [25, 41],\n                                    iconAnchor: [12, 41],\n                                    popupAnchor: [0, -41]\n                                })\n                                break\n                            case 'default-small':\n                                icon = L.icon({\n                                    iconUrl: 'http://geoportale.regione.liguria.it/geoviewer2/static/img/marker-icon.png',\n                                    iconSize: [12, 20],\n                                    iconAnchor: [6, 10],\n                                    popupAnchor: [0, -20]\n                                })\n                                break\n                            default:\n                                icon = L.icon({\n                                    iconUrl: style.iconUrl,\n                                    iconSize: style.iconSize,\n                                    iconAnchor: style.iconAnchor,\n                                    popupAnchor: style.popupAnchor\n                                })\n                        }\n                        return L.marker(latlng, { icon: icon })\n                    } else {\n                        return L.circleMarker(latlng, style)\n                    }\n                }\n            } else {\n                options.style = function(feature) {\n                    var style\n                    classes.forEach(function(cls) {\n                        if (cls.filter && cls.filter.key && cls.filter.value) {\n                            if (feature.properties[cls.filter.key] === cls.filter.value) {\n                                style = cls.style\n                            }\n                        } else {\n                            style = cls.style\n                        }\n                    })\n                    return style\n                }\n            }\n            options.filter = function(feature) {\n                var visible = false\n                classes.forEach(function(cls) {\n                    if (!cls.filter) {\n                        visible = true\n                    } else {\n                        if (cls.filter.key && cls.filter.value) {\n                            if (feature.properties[cls.filter.key] === cls.filter.value) {\n                                visible = true\n                            }\n                        }\n                    }\n                })\n                return visible\n            }\n        }\n\n        if (style) {\n            options.style = style\n        }\n        if (pointToLayer) {\n            options.pointToLayer = pointToLayer\n        }\n\n        if (tooltip || popup) {\n            options.onEachFeature = function(feature, layer) {\n                if (tooltip) {\n                    layer.options.title = interpolateString(tooltip, feature.properties)\n                }\n                if (popup) {\n                    layer.bindPopup(interpolateString(popup, feature.properties))\n                }\n            }\n        }\n\n        var layer = L.geoJson(data, options)\n        layer.name = name\n\n        layer.setFilter = function(filters) {\n            layer.filter = filters\n            if (filters) {\n                layer.eachLayer(function(marker) {\n                    var opacity = 0\n                    filters.forEach(function(filter) {\n                        if (marker.feature.properties[filter.key] === filter.value) {\n                            opacity = layer.config.opacity || 1\n                        }\n                    })\n                    marker.setOpacity(opacity)\n                })\n            } else {\n                layer.eachLayer(function(marker) {\n                    var opacity = layer.config.opacity || 1\n                    marker.setOpacity(opacity)\n                })\n            }\n        }\n\n        var parameters\n\n        if (wfsParams && wfsParams.typeName && wfsParams.url) {\n            parameters = {\n                service: 'WFS',\n                version: '2.0.0',\n                request: 'GetFeature',\n                srsName: 'EPSG:4326',\n                outputFormat: 'text/javascript',\n                format_options: 'callback: getJson',\n                typeName: wfsParams.typeName\n            }\n            url = wfsParams.url + getParamString(parameters)\n        }\n\n        // Gestione livelli puntuali su ElasticSearch\n        if (esParams) {\n            parameters = {}\n            if (esParams.field) {\n                parameters.q = esParams.field + ':'\n                if (esParams.query) {\n                    parameters.q += esParams.query\n                } else {\n                    parameters.q += '*'\n                }\n            } else {\n                if (esParams.query) {\n                    parameters.q = esParams.query\n                }\n            }\n            parameters.pretty = 'true'\n            parameters.size = 100000\n                // TODO parametro bbox. https://www.elastic.co/guide/en/elasticsearch/reference/1.4/query-dsl-geo-bounding-box-filter.html\n\n            url = GV.config.application.proxy + esParams.url + getParamString(parameters)\n        }\n\n        if (cluster) {\n            var clusterOptions = { showCoverageOnHover: false }\n            if (cluster.options) {\n                Object.assign(clusterOptions, cluster.options)\n            }\n            clusterLayer = L.markerClusterGroup(clusterOptions)\n            clusterLayer.name = name\n        }\n\n        if (url) {\n            getGeoJSON(url).then(response => {\n                const geoJson = buildGeoJson(response.data, esParams)\n                layer.addData(geoJson)\n                if (cluster) {\n                    clusterLayer.addLayer(layer)\n                }\n                GV.eventBus.$emit('layer-loaded-json', layer)\n            }).catch(error => console.error(error))\n        }\n\n        if (data) {\n            if (cluster) {\n                clusterLayer.addLayer(layer)\n            }\n        }\n\n        return (cluster) ? clusterLayer : layer\n\n    }\n}\n\nfunction create(layerConfig, map) {\n    if (layerFactory[layerConfig.type]) {\n        let layer = layerFactory[layerConfig.type](layerConfig, map)\n        layer.legend = layerConfig.legend\n        layer.config = layerConfig\n        return layer\n    } else {\n        throw new Error(`Layer di tipo ${layerConfig.type} non gestito`)\n    }\n}\n\nexport { create }\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/layerFactory.js","import globals from '../globals'\r\nimport * as layerFactory from '../layerFactory'\r\n\r\nimport L from 'leaflet'\r\n//const L = () => import(/* webpackChunkName: \"gv-map-info-panel\" */ 'leaflet')\r\n\r\nconst Map = L.Map.extend({\r\n    layers: [],\r\n\r\n    baseLayers: [],\r\n\r\n    initialExtent: [],\r\n\r\n    buttons: [],\r\n\r\n    mapOptions: {\r\n        zoomControl: false,\r\n        maxBounds: L.latLngBounds(L.latLng(globals.MAX_BOUNDS.X_MIN, globals.MAX_BOUNDS.Y_MIN), L.latLng(globals.MAX_BOUNDS.X_MAX, globals.MAX_BOUNDS.Y_MAX)),\r\n        maxBoundsViscosity: 1.0,\r\n        minZoom: 7\r\n    },\r\n\r\n    initialize: function() {\r\n        'use strict'\r\n\r\n        Object.assign(this.mapOptions, GV.config.application.mapOptions)\r\n\r\n        L.Map.prototype.initialize.call(this, 'gv-map', L.extend(L.Map.prototype.options, this.mapOptions))\r\n\r\n        this.setInitialExtent()\r\n\r\n        this.setLoading()\r\n\r\n        this.loadBaseLayers()\r\n\r\n        this.loadControls()\r\n\r\n        this.eventMngr()\r\n    },\r\n\r\n    eventMngr: function() {\r\n        const me = this\r\n        this.on('zoom', function() {\r\n            GV.eventBus.$emit('map-zoom', this._zoom)\r\n        })\r\n        GV.eventBus.$on('set-layer-visible', function(event) {\r\n            me.setLayerVisible(event.layer, event.checked)\r\n        })\r\n        GV.eventBus.$on('set-layer-transparency', event => {\r\n            const layer = this.getLayerByName(event.layerName)\r\n            layer.setOpacity(event.opacity)\r\n        })\r\n        GV.eventBus.$on('change-base-layer', function(event) {\r\n            me.changeBaseLayer(event.layer)\r\n        })\r\n\r\n    },\r\n\r\n    setInitialExtent: function() {\r\n        'use strict'\r\n        var extent = this.mapOptions.initialExtent || '830036,5402959,1123018,5597635'\r\n        var extArray = extent.split(',')\r\n        var swPoint = L.point(extArray[0], extArray[1])\r\n        var nePoint = L.point(extArray[2], extArray[3])\r\n        var swLatLng = L.Projection.SphericalMercator.unproject(swPoint)\r\n        var neLatLng = L.Projection.SphericalMercator.unproject(nePoint)\r\n        this.initialExtent = L.latLngBounds(swLatLng, neLatLng)\r\n        this.fitBounds(this.initialExtent)\r\n    },\r\n\r\n    setExtent: function(extent) {\r\n        'use strict'\r\n        var extArray = extent.split(',')\r\n        var swPoint = L.point(extArray[0], extArray[1])\r\n        var nePoint = L.point(extArray[2], extArray[3])\r\n        var swLatLng = L.Projection.SphericalMercator.unproject(swPoint)\r\n        var neLatLng = L.Projection.SphericalMercator.unproject(nePoint)\r\n        this.initialExtent = L.latLngBounds(swLatLng, neLatLng)\r\n        this.fitBounds(this.initialExtent)\r\n    },\r\n\r\n    setLayerVisible: function(layerConfig, visible) {\r\n        'use strict'\r\n        if (visible) {\r\n            // Muta lo stato del layer\r\n            layerConfig.visible = true\r\n            this.loadLayers([layerConfig])\r\n        } else {\r\n            this.removeLayer(this.getLayerByName(layerConfig.name))\r\n        }\r\n    },\r\n\r\n    layerInRange: function(layerConfig) {\r\n        'use strict'\r\n        if (!layerConfig.minScale && !layerConfig.minScale) {\r\n            return true\r\n        }\r\n        return (this.getScale() < layerConfig.minScale && this.getScale() > layerConfig.maxScale)\r\n    },\r\n\r\n    loadControls: function() {\r\n        'use strict'\r\n        if (this.mapOptions.controls) {\r\n            var cntrl\r\n            this.controls = {}\r\n            this.mapOptions.controls.forEach(function(control) {\r\n                switch (control.name) {\r\n                    case 'scale':\r\n                        cntrl = L.control.scale({ imperial: false }).addTo(this)\r\n                        this.controls[control] = cntrl\r\n                        break\r\n                }\r\n            }, this)\r\n        }\r\n    },\r\n\r\n    loadBaseLayers: function() {\r\n        'use strict'\r\n\r\n        GV.config.baseLayers.forEach(function(layerConfig) {\r\n            var layer = layerFactory.create(layerConfig, this)\r\n            this.baseLayers[layer.config.type] = layer\r\n            if (layer && layerConfig.visible) {\r\n                layer.on('loading', function() {\r\n                    this.loading(true, layer)\r\n                }, this)\r\n                layer.on('load', function() {\r\n                    this.loading(false, layer)\r\n                }, this)\r\n                layer.addTo(this)\r\n            }\r\n        }, this)\r\n    },\r\n\r\n    loadLayers: function(layers) {\r\n        'use strict'\r\n        layers.forEach(function(layerConfig) {\r\n            if (!this.getLayerByName(layerConfig.name)) {\r\n                var layer = layerFactory.create(layerConfig, this)\r\n                if (layer && layerConfig.visible) {\r\n                    layer.on('loading', function() {\r\n                        this.loading(true, layer)\r\n                    }, this)\r\n                    layer.on('load', function() {\r\n                        this.loading(false, layer)\r\n                    }, this)\r\n                    layer.addTo(this)\r\n                }\r\n            }\r\n        }, this)\r\n    },\r\n\r\n    getLayerByName: function(layerName) {\r\n        var foundLayer = null\r\n        this.eachLayer(function(layer) {\r\n            if (layer.config && layer.config.name && layer.config.name === layerName) {\r\n                foundLayer = layer\r\n            }\r\n        })\r\n        return foundLayer\r\n    },\r\n\r\n    changeBaseLayer: function(layerName) {\r\n        // se livello è presente in mappa e visibile non faccio niente\r\n        // altrimenti levo layer precedente e carico livello in mappa e rendo visibile\r\n        const activeLayerName = GV.config.getActiveBaseLayer().name\r\n        if (activeLayerName !== layerName) {\r\n            this.removeLayer(this.baseLayers[activeLayerName])\r\n            this.baseLayers[layerName].addTo(this)\r\n            GV.config.setActiveBaseLayer(layerName)\r\n        }\r\n    },\r\n\r\n    getScaleLabel: function() {\r\n        'use strict'\r\n        return globals.BASE_SCALE_LABELS[this._zoom]\r\n    },\r\n\r\n    getScale: function() {\r\n        'use strict'\r\n        return globals.BASE_SCALES[this._zoom]\r\n    },\r\n\r\n    setLoading: function() {\r\n        this._spinning = 0\r\n        this.on('layerremove', function(e) {\r\n            // Clean-up\r\n            if (e.layer.loading) {\r\n                this.loading(false)\r\n            }\r\n            if (typeof e.layer.on !== 'function') {\r\n                return\r\n            }\r\n            e.layer.off('load')\r\n            e.layer.off('loading')\r\n        }, this)\r\n    },\r\n\r\n    loading: function(state, layer) {\r\n        // if (!!state) {\r\n\r\n        if (state) {\r\n            if (this._spinning === 0) {\r\n                GV.log('start load: ' + layer.config.name)\r\n                this._container.style.cursor = 'progress'\r\n            }\r\n            this._spinning++\r\n        } else {\r\n            this._spinning--\r\n                if (this._spinning <= 0) {\r\n                    GV.log('end load: ' + layer.config.name)\r\n                    this._container.style.cursor = 'default'\r\n                }\r\n        }\r\n    },\r\n\r\n    addMarker: function(markerConfig) {\r\n        const icon = L.icon({\r\n            iconUrl: 'http://srvcarto.regione.liguria.it/geoviewer2/static/img/marker-icon.png',\r\n            iconSize: [25, 41],\r\n            iconAnchor: [12, 41],\r\n            popupAnchor: [0, -41]\r\n        })\r\n        const opts = {\r\n            opacity: 0.8,\r\n            icon: icon,\r\n            title: markerConfig.label\r\n        }\r\n\r\n        if (markerConfig.type === 'circle') {\r\n            L.circleMarker(markerConfig.location, opts).addTo(this)\r\n        } else {\r\n            L.marker(markerConfig.location, opts).addTo(this)\r\n        }\r\n        this.setView(markerConfig.location, markerConfig.zoomLevel || 14)\r\n    }\r\n\r\n})\r\n\r\nexport default Map\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/leaflet/Map.js",";(function (window, document, undefined) {/*\r\n * L.MarkerClusterGroup extends L.FeatureGroup by clustering the markers contained within\r\n */\r\n\r\n  L.MarkerClusterGroup = L.FeatureGroup.extend({\r\n\r\n    options: {\r\n      maxClusterRadius: 80, //A cluster will cover at most this many pixels from its center\r\n      iconCreateFunction: null,\r\n\r\n      spiderfyOnMaxZoom: true,\r\n      showCoverageOnHover: true,\r\n      zoomToBoundsOnClick: true,\r\n      singleMarkerMode: false,\r\n\r\n      disableClusteringAtZoom: null,\r\n\r\n      // Setting this to false prevents the removal of any clusters outside of the viewpoint, which\r\n      // is the default behaviour for performance reasons.\r\n      removeOutsideVisibleBounds: true,\r\n\r\n      // Set to false to disable all animations (zoom and spiderfy).\r\n      // If false, option animateAddingMarkers below has no effect.\r\n      // If L.DomUtil.TRANSITION is falsy, this option has no effect.\r\n      animate: true,\r\n\r\n      //Whether to animate adding markers after adding the MarkerClusterGroup to the map\r\n      // If you are adding individual markers set to true, if adding bulk markers leave false for massive performance gains.\r\n      animateAddingMarkers: false,\r\n\r\n      //Increase to increase the distance away that spiderfied markers appear from the center\r\n      spiderfyDistanceMultiplier: 1,\r\n\r\n      // Make it possible to specify a polyline options on a spider leg\r\n      spiderLegPolylineOptions: {weight: 1.5, color: '#222', opacity: 0.5},\r\n\r\n      // When bulk adding layers, adds markers in chunks. Means addLayers may not add all the layers in the call, others will be loaded during setTimeouts\r\n      chunkedLoading: false,\r\n      chunkInterval: 200, // process markers for a maximum of ~ n milliseconds (then trigger the chunkProgress callback)\r\n      chunkDelay: 50, // at the end of each interval, give n milliseconds back to system/browser\r\n      chunkProgress: null, // progress callback: function(processed, total, elapsed) (e.g. for a progress indicator)\r\n\r\n      //Options to pass to the L.Polygon constructor\r\n      polygonOptions: {}\r\n    },\r\n\r\n    initialize: function (options) {\r\n      L.Util.setOptions(this, options);\r\n      if (!this.options.iconCreateFunction) {\r\n        this.options.iconCreateFunction = this._defaultIconCreateFunction;\r\n      }\r\n\r\n      this._featureGroup = L.featureGroup();\r\n      this._featureGroup.addEventParent(this);\r\n\r\n      this._nonPointGroup = L.featureGroup();\r\n      this._nonPointGroup.addEventParent(this);\r\n\r\n      this._inZoomAnimation = 0;\r\n      this._needsClustering = [];\r\n      this._needsRemoving = []; //Markers removed while we aren't on the map need to be kept track of\r\n      //The bounds of the currently shown area (from _getExpandedVisibleBounds) Updated on zoom/move\r\n      this._currentShownBounds = null;\r\n\r\n      this._queue = [];\r\n\r\n      // Hook the appropriate animation methods.\r\n      var animate = L.DomUtil.TRANSITION && this.options.animate;\r\n      L.extend(this, animate ? this._withAnimation : this._noAnimation);\r\n      // Remember which MarkerCluster class to instantiate (animated or not).\r\n      this._markerCluster = animate ? L.MarkerCluster : L.MarkerClusterNonAnimated;\r\n    },\r\n\r\n    addLayer: function (layer) {\r\n\r\n      if (layer instanceof L.LayerGroup) {\r\n        return this.addLayers([layer]);\r\n      }\r\n\r\n      //Don't cluster non point data\r\n      if (!layer.getLatLng) {\r\n        this._nonPointGroup.addLayer(layer);\r\n        return this;\r\n      }\r\n\r\n      if (!this._map) {\r\n        this._needsClustering.push(layer);\r\n        return this;\r\n      }\r\n\r\n      if (this.hasLayer(layer)) {\r\n        return this;\r\n      }\r\n\r\n      //If we have already clustered we'll need to add this one to a cluster\r\n\r\n      if (this._unspiderfy) {\r\n        this._unspiderfy();\r\n      }\r\n\r\n      this._addLayer(layer, this._maxZoom);\r\n\r\n      // Refresh bounds and weighted positions.\r\n      this._topClusterLevel._recalculateBounds();\r\n\r\n      //Work out what is visible\r\n      var visibleLayer = layer,\r\n          currentZoom  = this._map.getZoom();\r\n      if (layer.__parent) {\r\n        while (visibleLayer.__parent._zoom >= currentZoom) {\r\n          visibleLayer = visibleLayer.__parent;\r\n        }\r\n      }\r\n\r\n      if (this._currentShownBounds.contains(visibleLayer.getLatLng())) {\r\n        if (this.options.animateAddingMarkers) {\r\n          this._animationAddLayer(layer, visibleLayer);\r\n        } else {\r\n          this._animationAddLayerNonAnimated(layer, visibleLayer);\r\n        }\r\n      }\r\n      return this;\r\n    },\r\n\r\n    removeLayer: function (layer) {\r\n\r\n      if (layer instanceof L.LayerGroup) {\r\n        return this.removeLayers([layer]);\r\n      }\r\n\r\n      //Non point layers\r\n      if (!layer.getLatLng) {\r\n        this._nonPointGroup.removeLayer(layer);\r\n        return this;\r\n      }\r\n\r\n      if (!this._map) {\r\n        if (!this._arraySplice(this._needsClustering, layer) && this.hasLayer(layer)) {\r\n          this._needsRemoving.push(layer);\r\n        }\r\n        return this;\r\n      }\r\n\r\n      if (!layer.__parent) {\r\n        return this;\r\n      }\r\n\r\n      if (this._unspiderfy) {\r\n        this._unspiderfy();\r\n        this._unspiderfyLayer(layer);\r\n      }\r\n\r\n      //Remove the marker from clusters\r\n      this._removeLayer(layer, true);\r\n\r\n      // Refresh bounds and weighted positions.\r\n      this._topClusterLevel._recalculateBounds();\r\n\r\n      layer.off('move', this._childMarkerMoved, this);\r\n\r\n      if (this._featureGroup.hasLayer(layer)) {\r\n        this._featureGroup.removeLayer(layer);\r\n        if (layer.clusterShow) {\r\n          layer.clusterShow();\r\n        }\r\n      }\r\n\r\n      return this;\r\n    },\r\n\r\n    //Takes an array of markers and adds them in bulk\r\n    addLayers: function (layersArray) {\r\n      if (!L.Util.isArray(layersArray)) {\r\n        return this.addLayer(layersArray);\r\n      }\r\n\r\n      var fg            = this._featureGroup,\r\n          npg           = this._nonPointGroup,\r\n          chunked       = this.options.chunkedLoading,\r\n          chunkInterval = this.options.chunkInterval,\r\n          chunkProgress = this.options.chunkProgress,\r\n          l             = layersArray.length,\r\n          offset        = 0,\r\n          originalArray = true,\r\n          m;\r\n\r\n      if (this._map) {\r\n        var started = (new Date()).getTime();\r\n        var process = L.bind(function () {\r\n          var start = (new Date()).getTime();\r\n          for (; offset < l; offset++) {\r\n            if (chunked && offset % 200 === 0) {\r\n              // every couple hundred markers, instrument the time elapsed since processing started:\r\n              var elapsed = (new Date()).getTime() - start;\r\n              if (elapsed > chunkInterval) {\r\n                break; // been working too hard, time to take a break :-)\r\n              }\r\n            }\r\n\r\n            m = layersArray[offset];\r\n\r\n            // Group of layers, append children to layersArray and skip.\r\n            // Side effects:\r\n            // - Total increases, so chunkProgress ratio jumps backward.\r\n            // - Groups are not included in this group, only their non-group child layers (hasLayer).\r\n            // Changing array length while looping does not affect performance in current browsers:\r\n            // http://jsperf.com/for-loop-changing-length/6\r\n            if (m instanceof L.LayerGroup) {\r\n              if (originalArray) {\r\n                layersArray = layersArray.slice();\r\n                originalArray = false;\r\n              }\r\n              this._extractNonGroupLayers(m, layersArray);\r\n              l = layersArray.length;\r\n              continue;\r\n            }\r\n\r\n            //Not point data, can't be clustered\r\n            if (!m.getLatLng) {\r\n              npg.addLayer(m);\r\n              continue;\r\n            }\r\n\r\n            if (this.hasLayer(m)) {\r\n              continue;\r\n            }\r\n\r\n            this._addLayer(m, this._maxZoom);\r\n\r\n            //If we just made a cluster of size 2 then we need to remove the other marker from the map (if it is) or we never will\r\n            if (m.__parent) {\r\n              if (m.__parent.getChildCount() === 2) {\r\n                var markers     = m.__parent.getAllChildMarkers(),\r\n                    otherMarker = markers[0] === m ? markers[1] : markers[0];\r\n                fg.removeLayer(otherMarker);\r\n              }\r\n            }\r\n          }\r\n\r\n          if (chunkProgress) {\r\n            // report progress and time elapsed:\r\n            chunkProgress(offset, l, (new Date()).getTime() - started);\r\n          }\r\n\r\n          // Completed processing all markers.\r\n          if (offset === l) {\r\n\r\n            // Refresh bounds and weighted positions.\r\n            this._topClusterLevel._recalculateBounds();\r\n\r\n            //Update the icons of all those visible clusters that were affected\r\n            this._featureGroup.eachLayer(function (c) {\r\n              if (c instanceof L.MarkerCluster && c._iconNeedsUpdate) {\r\n                c._updateIcon();\r\n              }\r\n            });\r\n\r\n            this._topClusterLevel._recursivelyAddChildrenToMap(null, this._zoom, this._currentShownBounds);\r\n          } else {\r\n            setTimeout(process, this.options.chunkDelay);\r\n          }\r\n        }, this);\r\n\r\n        process();\r\n      } else {\r\n        var needsClustering = this._needsClustering;\r\n\r\n        for (; offset < l; offset++) {\r\n          m = layersArray[offset];\r\n\r\n          // Group of layers, append children to layersArray and skip.\r\n          if (m instanceof L.LayerGroup) {\r\n            if (originalArray) {\r\n              layersArray = layersArray.slice();\r\n              originalArray = false;\r\n            }\r\n            this._extractNonGroupLayers(m, layersArray);\r\n            l = layersArray.length;\r\n            continue;\r\n          }\r\n\r\n          //Not point data, can't be clustered\r\n          if (!m.getLatLng) {\r\n            npg.addLayer(m);\r\n            continue;\r\n          }\r\n\r\n          if (this.hasLayer(m)) {\r\n            continue;\r\n          }\r\n\r\n          needsClustering.push(m);\r\n        }\r\n      }\r\n      return this;\r\n    },\r\n\r\n    //Takes an array of markers and removes them in bulk\r\n    removeLayers: function (layersArray) {\r\n      var i, m,\r\n          l             = layersArray.length,\r\n          fg            = this._featureGroup,\r\n          npg           = this._nonPointGroup,\r\n          originalArray = true;\r\n\r\n      if (!this._map) {\r\n        for (i = 0; i < l; i++) {\r\n          m = layersArray[i];\r\n\r\n          // Group of layers, append children to layersArray and skip.\r\n          if (m instanceof L.LayerGroup) {\r\n            if (originalArray) {\r\n              layersArray = layersArray.slice();\r\n              originalArray = false;\r\n            }\r\n            this._extractNonGroupLayers(m, layersArray);\r\n            l = layersArray.length;\r\n            continue;\r\n          }\r\n\r\n          this._arraySplice(this._needsClustering, m);\r\n          npg.removeLayer(m);\r\n          if (this.hasLayer(m)) {\r\n            this._needsRemoving.push(m);\r\n          }\r\n        }\r\n        return this;\r\n      }\r\n\r\n      if (this._unspiderfy) {\r\n        this._unspiderfy();\r\n\r\n        // Work on a copy of the array, so that next loop is not affected.\r\n        var layersArray2 = layersArray.slice(),\r\n            l2           = l;\r\n        for (i = 0; i < l2; i++) {\r\n          m = layersArray2[i];\r\n\r\n          // Group of layers, append children to layersArray and skip.\r\n          if (m instanceof L.LayerGroup) {\r\n            this._extractNonGroupLayers(m, layersArray2);\r\n            l2 = layersArray2.length;\r\n            continue;\r\n          }\r\n\r\n          this._unspiderfyLayer(m);\r\n        }\r\n      }\r\n\r\n      for (i = 0; i < l; i++) {\r\n        m = layersArray[i];\r\n\r\n        // Group of layers, append children to layersArray and skip.\r\n        if (m instanceof L.LayerGroup) {\r\n          if (originalArray) {\r\n            layersArray = layersArray.slice();\r\n            originalArray = false;\r\n          }\r\n          this._extractNonGroupLayers(m, layersArray);\r\n          l = layersArray.length;\r\n          continue;\r\n        }\r\n\r\n        if (!m.__parent) {\r\n          npg.removeLayer(m);\r\n          continue;\r\n        }\r\n\r\n        this._removeLayer(m, true, true);\r\n\r\n        if (fg.hasLayer(m)) {\r\n          fg.removeLayer(m);\r\n          if (m.clusterShow) {\r\n            m.clusterShow();\r\n          }\r\n        }\r\n      }\r\n\r\n      // Refresh bounds and weighted positions.\r\n      this._topClusterLevel._recalculateBounds();\r\n\r\n      //Fix up the clusters and markers on the map\r\n      this._topClusterLevel._recursivelyAddChildrenToMap(null, this._zoom, this._currentShownBounds);\r\n\r\n      fg.eachLayer(function (c) {\r\n        if (c instanceof L.MarkerCluster) {\r\n          c._updateIcon();\r\n        }\r\n      });\r\n\r\n      return this;\r\n    },\r\n\r\n    //Removes all layers from the MarkerClusterGroup\r\n    clearLayers: function () {\r\n      //Need our own special implementation as the LayerGroup one doesn't work for us\r\n\r\n      //If we aren't on the map (yet), blow away the markers we know of\r\n      if (!this._map) {\r\n        this._needsClustering = [];\r\n        delete this._gridClusters;\r\n        delete this._gridUnclustered;\r\n      }\r\n\r\n      if (this._noanimationUnspiderfy) {\r\n        this._noanimationUnspiderfy();\r\n      }\r\n\r\n      //Remove all the visible layers\r\n      this._featureGroup.clearLayers();\r\n      this._nonPointGroup.clearLayers();\r\n\r\n      this.eachLayer(function (marker) {\r\n        marker.off('move', this._childMarkerMoved, this);\r\n        delete marker.__parent;\r\n      });\r\n\r\n      if (this._map) {\r\n        //Reset _topClusterLevel and the DistanceGrids\r\n        this._generateInitialClusters();\r\n      }\r\n\r\n      return this;\r\n    },\r\n\r\n    //Override FeatureGroup.getBounds as it doesn't work\r\n    getBounds: function () {\r\n      var bounds = new L.LatLngBounds();\r\n\r\n      if (this._topClusterLevel) {\r\n        bounds.extend(this._topClusterLevel._bounds);\r\n      }\r\n\r\n      for (var i = this._needsClustering.length - 1; i >= 0; i--) {\r\n        bounds.extend(this._needsClustering[i].getLatLng());\r\n      }\r\n\r\n      bounds.extend(this._nonPointGroup.getBounds());\r\n\r\n      return bounds;\r\n    },\r\n\r\n    //Overrides LayerGroup.eachLayer\r\n    eachLayer: function (method, context) {\r\n      var markers       = this._needsClustering.slice(),\r\n          needsRemoving = this._needsRemoving,\r\n          i;\r\n\r\n      if (this._topClusterLevel) {\r\n        this._topClusterLevel.getAllChildMarkers(markers);\r\n      }\r\n\r\n      for (i = markers.length - 1; i >= 0; i--) {\r\n        if (needsRemoving.indexOf(markers[i]) === -1) {\r\n          method.call(context, markers[i]);\r\n        }\r\n      }\r\n\r\n      this._nonPointGroup.eachLayer(method, context);\r\n    },\r\n\r\n    //Overrides LayerGroup.getLayers\r\n    getLayers: function () {\r\n      var layers = [];\r\n      this.eachLayer(function (l) {\r\n        layers.push(l);\r\n      });\r\n      return layers;\r\n    },\r\n\r\n    //Overrides LayerGroup.getLayer, WARNING: Really bad performance\r\n    getLayer: function (id) {\r\n      var result = null;\r\n\r\n      id = parseInt(id, 10);\r\n\r\n      this.eachLayer(function (l) {\r\n        if (L.stamp(l) === id) {\r\n          result = l;\r\n        }\r\n      });\r\n\r\n      return result;\r\n    },\r\n\r\n    //Returns true if the given layer is in this MarkerClusterGroup\r\n    hasLayer: function (layer) {\r\n      if (!layer) {\r\n        return false;\r\n      }\r\n\r\n      var i, anArray = this._needsClustering;\r\n\r\n      for (i = anArray.length - 1; i >= 0; i--) {\r\n        if (anArray[i] === layer) {\r\n          return true;\r\n        }\r\n      }\r\n\r\n      anArray = this._needsRemoving;\r\n      for (i = anArray.length - 1; i >= 0; i--) {\r\n        if (anArray[i] === layer) {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      return !!(layer.__parent && layer.__parent._group === this) || this._nonPointGroup.hasLayer(layer);\r\n    },\r\n\r\n    //Zoom down to show the given layer (spiderfying if necessary) then calls the callback\r\n    zoomToShowLayer: function (layer, callback) {\r\n\r\n      if (typeof callback !== 'function') {\r\n        callback = function () {\r\n        };\r\n      }\r\n\r\n      var showMarker = function () {\r\n        if ((layer._icon || layer.__parent._icon) && !this._inZoomAnimation) {\r\n          this._map.off('moveend', showMarker, this);\r\n          this.off('animationend', showMarker, this);\r\n\r\n          if (layer._icon) {\r\n            callback();\r\n          } else if (layer.__parent._icon) {\r\n            this.once('spiderfied', callback, this);\r\n            layer.__parent.spiderfy();\r\n          }\r\n        }\r\n      };\r\n\r\n      if (layer._icon && this._map.getBounds().contains(layer.getLatLng())) {\r\n        //Layer is visible ond on screen, immediate return\r\n        callback();\r\n      } else if (layer.__parent._zoom < this._map.getZoom()) {\r\n        //Layer should be visible at this zoom level. It must not be on screen so just pan over to it\r\n        this._map.on('moveend', showMarker, this);\r\n        this._map.panTo(layer.getLatLng());\r\n      } else {\r\n        var moveStart = function () {\r\n          this._map.off('movestart', moveStart, this);\r\n          moveStart = null;\r\n        };\r\n\r\n        this._map.on('movestart', moveStart, this);\r\n        this._map.on('moveend', showMarker, this);\r\n        this.on('animationend', showMarker, this);\r\n        layer.__parent.zoomToBounds();\r\n\r\n        if (moveStart) {\r\n          //Never started moving, must already be there, probably need clustering however\r\n          showMarker.call(this);\r\n        }\r\n      }\r\n    },\r\n\r\n    //Overrides FeatureGroup.onAdd\r\n    onAdd: function (map) {\r\n      this._map = map;\r\n      var i, l, layer;\r\n\r\n      if (!isFinite(this._map.getMaxZoom())) {\r\n        throw \"Map has no maxZoom specified\";\r\n      }\r\n\r\n      this._featureGroup.addTo(map);\r\n      this._nonPointGroup.addTo(map);\r\n\r\n      if (!this._gridClusters) {\r\n        this._generateInitialClusters();\r\n      }\r\n\r\n      this._maxLat = map.options.crs.projection.MAX_LATITUDE;\r\n\r\n      for (i = 0, l = this._needsRemoving.length; i < l; i++) {\r\n        layer = this._needsRemoving[i];\r\n        this._removeLayer(layer, true);\r\n      }\r\n      this._needsRemoving = [];\r\n\r\n      //Remember the current zoom level and bounds\r\n      this._zoom = this._map.getZoom();\r\n      this._currentShownBounds = this._getExpandedVisibleBounds();\r\n\r\n      this._map.on('zoomend', this._zoomEnd, this);\r\n      this._map.on('moveend', this._moveEnd, this);\r\n\r\n      if (this._spiderfierOnAdd) { //TODO FIXME: Not sure how to have spiderfier add something on here nicely\r\n        this._spiderfierOnAdd();\r\n      }\r\n\r\n      this._bindEvents();\r\n\r\n      //Actually add our markers to the map:\r\n      l = this._needsClustering;\r\n      this._needsClustering = [];\r\n      this.addLayers(l);\r\n    },\r\n\r\n    //Overrides FeatureGroup.onRemove\r\n    onRemove: function (map) {\r\n      map.off('zoomend', this._zoomEnd, this);\r\n      map.off('moveend', this._moveEnd, this);\r\n\r\n      this._unbindEvents();\r\n\r\n      //In case we are in a cluster animation\r\n      this._map._mapPane.className = this._map._mapPane.className.replace(' leaflet-cluster-anim', '');\r\n\r\n      if (this._spiderfierOnRemove) { //TODO FIXME: Not sure how to have spiderfier add something on here nicely\r\n        this._spiderfierOnRemove();\r\n      }\r\n\r\n      delete this._maxLat;\r\n\r\n      //Clean up all the layers we added to the map\r\n      this._hideCoverage();\r\n      this._featureGroup.remove();\r\n      this._nonPointGroup.remove();\r\n\r\n      this._featureGroup.clearLayers();\r\n\r\n      this._map = null;\r\n    },\r\n\r\n    getVisibleParent: function (marker) {\r\n      var vMarker = marker;\r\n      while (vMarker && !vMarker._icon) {\r\n        vMarker = vMarker.__parent;\r\n      }\r\n      return vMarker || null;\r\n    },\r\n\r\n    //Remove the given object from the given array\r\n    _arraySplice: function (anArray, obj) {\r\n      for (var i = anArray.length - 1; i >= 0; i--) {\r\n        if (anArray[i] === obj) {\r\n          anArray.splice(i, 1);\r\n          return true;\r\n        }\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Removes a marker from all _gridUnclustered zoom levels, starting at the supplied zoom.\r\n     * @param marker to be removed from _gridUnclustered.\r\n     * @param z integer bottom start zoom level (included)\r\n     * @private\r\n     */\r\n    _removeFromGridUnclustered: function (marker, z) {\r\n      var map             = this._map,\r\n          gridUnclustered = this._gridUnclustered;\r\n\r\n      for (; z >= 0; z--) {\r\n        if (!gridUnclustered[z].removeObject(marker, map.project(marker.getLatLng(), z))) {\r\n          break;\r\n        }\r\n      }\r\n    },\r\n\r\n    _childMarkerMoved: function (e) {\r\n      if (!this._ignoreMove) {\r\n        e.target._latlng = e.oldLatLng;\r\n        this.removeLayer(e.target);\r\n\r\n        e.target._latlng = e.latlng;\r\n        this.addLayer(e.target);\r\n      }\r\n    },\r\n\r\n    //Internal function for removing a marker from everything.\r\n    //dontUpdateMap: set to true if you will handle updating the map manually (for bulk functions)\r\n    _removeLayer: function (marker, removeFromDistanceGrid, dontUpdateMap) {\r\n      var gridClusters    = this._gridClusters,\r\n          gridUnclustered = this._gridUnclustered,\r\n          fg              = this._featureGroup,\r\n          map             = this._map;\r\n\r\n      //Remove the marker from distance clusters it might be in\r\n      if (removeFromDistanceGrid) {\r\n        this._removeFromGridUnclustered(marker, this._maxZoom);\r\n      }\r\n\r\n      //Work our way up the clusters removing them as we go if required\r\n      var cluster = marker.__parent,\r\n          markers = cluster._markers,\r\n          otherMarker;\r\n\r\n      //Remove the marker from the immediate parents marker list\r\n      this._arraySplice(markers, marker);\r\n\r\n      while (cluster) {\r\n        cluster._childCount--;\r\n        cluster._boundsNeedUpdate = true;\r\n\r\n        if (cluster._zoom < 0) {\r\n          //Top level, do nothing\r\n          break;\r\n        } else if (removeFromDistanceGrid && cluster._childCount <= 1) { //Cluster no longer required\r\n          //We need to push the other marker up to the parent\r\n          otherMarker = cluster._markers[0] === marker ? cluster._markers[1] : cluster._markers[0];\r\n\r\n          //Update distance grid\r\n          gridClusters[cluster._zoom].removeObject(cluster, map.project(cluster._cLatLng, cluster._zoom));\r\n          gridUnclustered[cluster._zoom].addObject(otherMarker, map.project(otherMarker.getLatLng(), cluster._zoom));\r\n\r\n          //Move otherMarker up to parent\r\n          this._arraySplice(cluster.__parent._childClusters, cluster);\r\n          cluster.__parent._markers.push(otherMarker);\r\n          otherMarker.__parent = cluster.__parent;\r\n\r\n          if (cluster._icon) {\r\n            //Cluster is currently on the map, need to put the marker on the map instead\r\n            fg.removeLayer(cluster);\r\n            if (!dontUpdateMap) {\r\n              fg.addLayer(otherMarker);\r\n            }\r\n          }\r\n        } else {\r\n          if (!dontUpdateMap || !cluster._icon) {\r\n            cluster._updateIcon();\r\n          }\r\n        }\r\n\r\n        cluster = cluster.__parent;\r\n      }\r\n\r\n      delete marker.__parent;\r\n    },\r\n\r\n    _isOrIsParent: function (el, oel) {\r\n      while (oel) {\r\n        if (el === oel) {\r\n          return true;\r\n        }\r\n        oel = oel.parentNode;\r\n      }\r\n      return false;\r\n    },\r\n\r\n    //Override L.Evented.fire\r\n    fire: function (type, data, propagate) {\r\n      if (data && data.layer instanceof L.MarkerCluster) {\r\n        //Prevent multiple clustermouseover/off events if the icon is made up of stacked divs (Doesn't work in ie <= 8, no relatedTarget)\r\n        if (data.originalEvent && this._isOrIsParent(data.layer._icon, data.originalEvent.relatedTarget)) {\r\n          return;\r\n        }\r\n        type = 'cluster' + type;\r\n      }\r\n\r\n      L.FeatureGroup.prototype.fire.call(this, type, data, propagate);\r\n    },\r\n\r\n    //Override L.Evented.listens\r\n    listens: function (type, propagate) {\r\n      return L.FeatureGroup.prototype.listens.call(this, type, propagate) || L.FeatureGroup.prototype.listens.call(this, 'cluster' + type, propagate);\r\n    },\r\n\r\n    //Default functionality\r\n    _defaultIconCreateFunction: function (cluster) {\r\n      var childCount = cluster.getChildCount();\r\n\r\n      var c = ' marker-cluster-';\r\n      if (childCount < 10) {\r\n        c += 'small';\r\n      } else if (childCount < 100) {\r\n        c += 'medium';\r\n      } else {\r\n        c += 'large';\r\n      }\r\n\r\n      return new L.DivIcon({\r\n        html: '<div><span>' + childCount + '</span></div>',\r\n        className: 'marker-cluster' + c,\r\n        iconSize: new L.Point(40, 40)\r\n      });\r\n    },\r\n\r\n    _bindEvents: function () {\r\n      var map                 = this._map,\r\n          spiderfyOnMaxZoom   = this.options.spiderfyOnMaxZoom,\r\n          showCoverageOnHover = this.options.showCoverageOnHover,\r\n          zoomToBoundsOnClick = this.options.zoomToBoundsOnClick;\r\n\r\n      //Zoom on cluster click or spiderfy if we are at the lowest level\r\n      if (spiderfyOnMaxZoom || zoomToBoundsOnClick) {\r\n        this.on('clusterclick', this._zoomOrSpiderfy, this);\r\n      }\r\n\r\n      //Show convex hull (boundary) polygon on mouse over\r\n      if (showCoverageOnHover) {\r\n        this.on('clustermouseover', this._showCoverage, this);\r\n        this.on('clustermouseout', this._hideCoverage, this);\r\n        map.on('zoomend', this._hideCoverage, this);\r\n      }\r\n    },\r\n\r\n    _zoomOrSpiderfy: function (e) {\r\n      var cluster       = e.layer,\r\n          bottomCluster = cluster;\r\n\r\n      while (bottomCluster._childClusters.length === 1) {\r\n        bottomCluster = bottomCluster._childClusters[0];\r\n      }\r\n\r\n      if (bottomCluster._zoom === this._maxZoom &&\r\n          bottomCluster._childCount === cluster._childCount &&\r\n          this.options.spiderfyOnMaxZoom) {\r\n\r\n        // All child markers are contained in a single cluster from this._maxZoom to this cluster.\r\n        cluster.spiderfy();\r\n      } else if (this.options.zoomToBoundsOnClick) {\r\n        cluster.zoomToBounds();\r\n      }\r\n\r\n      // Focus the map again for keyboard users.\r\n      if (e.originalEvent && e.originalEvent.keyCode === 13) {\r\n        this._map._container.focus();\r\n      }\r\n    },\r\n\r\n    _showCoverage: function (e) {\r\n      var map = this._map;\r\n      if (this._inZoomAnimation) {\r\n        return;\r\n      }\r\n      if (this._shownPolygon) {\r\n        map.removeLayer(this._shownPolygon);\r\n      }\r\n      if (e.layer.getChildCount() > 2 && e.layer !== this._spiderfied) {\r\n        this._shownPolygon = new L.Polygon(e.layer.getConvexHull(), this.options.polygonOptions);\r\n        map.addLayer(this._shownPolygon);\r\n      }\r\n    },\r\n\r\n    _hideCoverage: function () {\r\n      if (this._shownPolygon) {\r\n        this._map.removeLayer(this._shownPolygon);\r\n        this._shownPolygon = null;\r\n      }\r\n    },\r\n\r\n    _unbindEvents: function () {\r\n      var spiderfyOnMaxZoom   = this.options.spiderfyOnMaxZoom,\r\n          showCoverageOnHover = this.options.showCoverageOnHover,\r\n          zoomToBoundsOnClick = this.options.zoomToBoundsOnClick,\r\n          map                 = this._map;\r\n\r\n      if (spiderfyOnMaxZoom || zoomToBoundsOnClick) {\r\n        this.off('clusterclick', this._zoomOrSpiderfy, this);\r\n      }\r\n      if (showCoverageOnHover) {\r\n        this.off('clustermouseover', this._showCoverage, this);\r\n        this.off('clustermouseout', this._hideCoverage, this);\r\n        map.off('zoomend', this._hideCoverage, this);\r\n      }\r\n    },\r\n\r\n    _zoomEnd: function () {\r\n      if (!this._map) { //May have been removed from the map by a zoomEnd handler\r\n        return;\r\n      }\r\n      this._mergeSplitClusters();\r\n\r\n      this._zoom = Math.round(this._map._zoom);\r\n      this._currentShownBounds = this._getExpandedVisibleBounds();\r\n    },\r\n\r\n    _moveEnd: function () {\r\n      if (this._inZoomAnimation) {\r\n        return;\r\n      }\r\n\r\n      var newBounds = this._getExpandedVisibleBounds();\r\n\r\n      this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, this._zoom, newBounds);\r\n      this._topClusterLevel._recursivelyAddChildrenToMap(null, Math.round(this._map._zoom), newBounds);\r\n\r\n      this._currentShownBounds = newBounds;\r\n      return;\r\n    },\r\n\r\n    _generateInitialClusters: function () {\r\n      var maxZoom  = this._map.getMaxZoom(),\r\n          radius   = this.options.maxClusterRadius,\r\n          radiusFn = radius;\r\n\r\n      //If we just set maxClusterRadius to a single number, we need to create\r\n      //a simple function to return that number. Otherwise, we just have to\r\n      //use the function we've passed in.\r\n      if (typeof radius !== \"function\") {\r\n        radiusFn = function () {\r\n          return radius;\r\n        };\r\n      }\r\n\r\n      if (this.options.disableClusteringAtZoom) {\r\n        maxZoom = this.options.disableClusteringAtZoom - 1;\r\n      }\r\n      this._maxZoom = maxZoom;\r\n      this._gridClusters = {};\r\n      this._gridUnclustered = {};\r\n\r\n      //Set up DistanceGrids for each zoom\r\n      for (var zoom = maxZoom; zoom >= 0; zoom--) {\r\n        this._gridClusters[zoom] = new L.DistanceGrid(radiusFn(zoom));\r\n        this._gridUnclustered[zoom] = new L.DistanceGrid(radiusFn(zoom));\r\n      }\r\n\r\n      // Instantiate the appropriate L.MarkerCluster class (animated or not).\r\n      this._topClusterLevel = new this._markerCluster(this, -1);\r\n    },\r\n\r\n    //Zoom: Zoom to start adding at (Pass this._maxZoom to start at the bottom)\r\n    _addLayer: function (layer, zoom) {\r\n      var gridClusters    = this._gridClusters,\r\n          gridUnclustered = this._gridUnclustered,\r\n          markerPoint, z;\r\n\r\n      if (this.options.singleMarkerMode) {\r\n        this._overrideMarkerIcon(layer);\r\n      }\r\n\r\n      layer.on('move', this._childMarkerMoved, this);\r\n\r\n      //Find the lowest zoom level to slot this one in\r\n      for (; zoom >= 0; zoom--) {\r\n        markerPoint = this._map.project(layer.getLatLng(), zoom); // calculate pixel position\r\n\r\n        //Try find a cluster close by\r\n        var closest = gridClusters[zoom].getNearObject(markerPoint);\r\n        if (closest) {\r\n          closest._addChild(layer);\r\n          layer.__parent = closest;\r\n          return;\r\n        }\r\n\r\n        //Try find a marker close by to form a new cluster with\r\n        closest = gridUnclustered[zoom].getNearObject(markerPoint);\r\n        if (closest) {\r\n          var parent = closest.__parent;\r\n          if (parent) {\r\n            this._removeLayer(closest, false);\r\n          }\r\n\r\n          //Create new cluster with these 2 in it\r\n\r\n          var newCluster = new this._markerCluster(this, zoom, closest, layer);\r\n          gridClusters[zoom].addObject(newCluster, this._map.project(newCluster._cLatLng, zoom));\r\n          closest.__parent = newCluster;\r\n          layer.__parent = newCluster;\r\n\r\n          //First create any new intermediate parent clusters that don't exist\r\n          var lastParent = newCluster;\r\n          for (z = zoom - 1; z > parent._zoom; z--) {\r\n            lastParent = new this._markerCluster(this, z, lastParent);\r\n            gridClusters[z].addObject(lastParent, this._map.project(closest.getLatLng(), z));\r\n          }\r\n          parent._addChild(lastParent);\r\n\r\n          //Remove closest from this zoom level and any above that it is in, replace with newCluster\r\n          this._removeFromGridUnclustered(closest, zoom);\r\n\r\n          return;\r\n        }\r\n\r\n        //Didn't manage to cluster in at this zoom, record us as a marker here and continue upwards\r\n        gridUnclustered[zoom].addObject(layer, markerPoint);\r\n      }\r\n\r\n      //Didn't get in anything, add us to the top\r\n      this._topClusterLevel._addChild(layer);\r\n      layer.__parent = this._topClusterLevel;\r\n      return;\r\n    },\r\n\r\n    //Enqueue code to fire after the marker expand/contract has happened\r\n    _enqueue: function (fn) {\r\n      this._queue.push(fn);\r\n      if (!this._queueTimeout) {\r\n        this._queueTimeout = setTimeout(L.bind(this._processQueue, this), 300);\r\n      }\r\n    },\r\n    _processQueue: function () {\r\n      for (var i = 0; i < this._queue.length; i++) {\r\n        this._queue[i].call(this);\r\n      }\r\n      this._queue.length = 0;\r\n      clearTimeout(this._queueTimeout);\r\n      this._queueTimeout = null;\r\n    },\r\n\r\n    //Merge and split any existing clusters that are too big or small\r\n    _mergeSplitClusters: function () {\r\n      var mapZoom = Math.round(this._map._zoom);\r\n\r\n      //In case we are starting to split before the animation finished\r\n      this._processQueue();\r\n\r\n      if (this._zoom < mapZoom && this._currentShownBounds.intersects(this._getExpandedVisibleBounds())) { //Zoom in, split\r\n        this._animationStart();\r\n        //Remove clusters now off screen\r\n        this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, this._zoom, this._getExpandedVisibleBounds());\r\n\r\n        this._animationZoomIn(this._zoom, mapZoom);\r\n\r\n      } else if (this._zoom > mapZoom) { //Zoom out, merge\r\n        this._animationStart();\r\n\r\n        this._animationZoomOut(this._zoom, mapZoom);\r\n      } else {\r\n        this._moveEnd();\r\n      }\r\n    },\r\n\r\n    //Gets the maps visible bounds expanded in each direction by the size of the screen (so the user cannot see an area we do not cover in one pan)\r\n    _getExpandedVisibleBounds: function () {\r\n      if (!this.options.removeOutsideVisibleBounds) {\r\n        return this._mapBoundsInfinite;\r\n      } else if (L.Browser.mobile) {\r\n        return this._checkBoundsMaxLat(this._map.getBounds());\r\n      }\r\n\r\n      return this._checkBoundsMaxLat(this._map.getBounds().pad(1)); // Padding expands the bounds by its own dimensions but scaled with the given factor.\r\n    },\r\n\r\n    /**\r\n     * Expands the latitude to Infinity (or -Infinity) if the input bounds reach the map projection maximum defined latitude\r\n     * (in the case of Web/Spherical Mercator, it is 85.0511287798 / see https://en.wikipedia.org/wiki/Web_Mercator#Formulas).\r\n     * Otherwise, the removeOutsideVisibleBounds option will remove markers beyond that limit, whereas the same markers without\r\n     * this option (or outside MCG) will have their position floored (ceiled) by the projection and rendered at that limit,\r\n     * making the user think that MCG \"eats\" them and never displays them again.\r\n     * @param bounds L.LatLngBounds\r\n     * @returns {L.LatLngBounds}\r\n     * @private\r\n     */\r\n    _checkBoundsMaxLat: function (bounds) {\r\n      var maxLat = this._maxLat;\r\n\r\n      if (maxLat !== undefined) {\r\n        if (bounds.getNorth() >= maxLat) {\r\n          bounds._northEast.lat = Infinity;\r\n        }\r\n        if (bounds.getSouth() <= -maxLat) {\r\n          bounds._southWest.lat = -Infinity;\r\n        }\r\n      }\r\n\r\n      return bounds;\r\n    },\r\n\r\n    //Shared animation code\r\n    _animationAddLayerNonAnimated: function (layer, newCluster) {\r\n      if (newCluster === layer) {\r\n        this._featureGroup.addLayer(layer);\r\n      } else if (newCluster._childCount === 2) {\r\n        newCluster._addToMap();\r\n\r\n        var markers = newCluster.getAllChildMarkers();\r\n        this._featureGroup.removeLayer(markers[0]);\r\n        this._featureGroup.removeLayer(markers[1]);\r\n      } else {\r\n        newCluster._updateIcon();\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Extracts individual (i.e. non-group) layers from a Layer Group.\r\n     * @param group to extract layers from.\r\n     * @param output {Array} in which to store the extracted layers.\r\n     * @returns {*|Array}\r\n     * @private\r\n     */\r\n    _extractNonGroupLayers: function (group, output) {\r\n      var layers = group.getLayers(),\r\n          i      = 0,\r\n          layer;\r\n\r\n      output = output || [];\r\n\r\n      for (; i < layers.length; i++) {\r\n        layer = layers[i];\r\n\r\n        if (layer instanceof L.LayerGroup) {\r\n          this._extractNonGroupLayers(layer, output);\r\n          continue;\r\n        }\r\n\r\n        output.push(layer);\r\n      }\r\n\r\n      return output;\r\n    },\r\n\r\n    /**\r\n     * Implements the singleMarkerMode option.\r\n     * @param layer Marker to re-style using the Clusters iconCreateFunction.\r\n     * @returns {L.Icon} The newly created icon.\r\n     * @private\r\n     */\r\n    _overrideMarkerIcon: function (layer) {\r\n      var icon = layer.options.icon = this.options.iconCreateFunction({\r\n        getChildCount: function () {\r\n          return 1;\r\n        },\r\n        getAllChildMarkers: function () {\r\n          return [layer];\r\n        }\r\n      });\r\n\r\n      return icon;\r\n    }\r\n  });\r\n\r\n// Constant bounds used in case option \"removeOutsideVisibleBounds\" is set to false.\r\n  L.MarkerClusterGroup.include({\r\n    _mapBoundsInfinite: new L.LatLngBounds(new L.LatLng(-Infinity, -Infinity), new L.LatLng(Infinity, Infinity))\r\n  });\r\n\r\n  L.MarkerClusterGroup.include({\r\n    _noAnimation: {\r\n      //Non Animated versions of everything\r\n      _animationStart: function () {\r\n        //Do nothing...\r\n      },\r\n      _animationZoomIn: function (previousZoomLevel, newZoomLevel) {\r\n        this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, previousZoomLevel);\r\n        this._topClusterLevel._recursivelyAddChildrenToMap(null, newZoomLevel, this._getExpandedVisibleBounds());\r\n\r\n        //We didn't actually animate, but we use this event to mean \"clustering animations have finished\"\r\n        this.fire('animationend');\r\n      },\r\n      _animationZoomOut: function (previousZoomLevel, newZoomLevel) {\r\n        this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, previousZoomLevel);\r\n        this._topClusterLevel._recursivelyAddChildrenToMap(null, newZoomLevel, this._getExpandedVisibleBounds());\r\n\r\n        //We didn't actually animate, but we use this event to mean \"clustering animations have finished\"\r\n        this.fire('animationend');\r\n      },\r\n      _animationAddLayer: function (layer, newCluster) {\r\n        this._animationAddLayerNonAnimated(layer, newCluster);\r\n      }\r\n    },\r\n\r\n    _withAnimation: {\r\n      //Animated versions here\r\n      _animationStart: function () {\r\n        this._map._mapPane.className += ' leaflet-cluster-anim';\r\n        this._inZoomAnimation++;\r\n      },\r\n\r\n      _animationZoomIn: function (previousZoomLevel, newZoomLevel) {\r\n        var bounds = this._getExpandedVisibleBounds(),\r\n            fg     = this._featureGroup,\r\n            i;\r\n\r\n        this._ignoreMove = true;\r\n\r\n        //Add all children of current clusters to map and remove those clusters from map\r\n        this._topClusterLevel._recursively(bounds, previousZoomLevel, 0, function (c) {\r\n          var startPos = c._latlng,\r\n              markers  = c._markers,\r\n              m;\r\n\r\n          if (!bounds.contains(startPos)) {\r\n            startPos = null;\r\n          }\r\n\r\n          if (c._isSingleParent() && previousZoomLevel + 1 === newZoomLevel) { //Immediately add the new child and remove us\r\n            fg.removeLayer(c);\r\n            c._recursivelyAddChildrenToMap(null, newZoomLevel, bounds);\r\n          } else {\r\n            //Fade out old cluster\r\n            c.clusterHide();\r\n            c._recursivelyAddChildrenToMap(startPos, newZoomLevel, bounds);\r\n          }\r\n\r\n          //Remove all markers that aren't visible any more\r\n          //TODO: Do we actually need to do this on the higher levels too?\r\n          for (i = markers.length - 1; i >= 0; i--) {\r\n            m = markers[i];\r\n            if (!bounds.contains(m._latlng)) {\r\n              fg.removeLayer(m);\r\n            }\r\n          }\r\n\r\n        });\r\n\r\n        this._forceLayout();\r\n\r\n        //Update opacities\r\n        this._topClusterLevel._recursivelyBecomeVisible(bounds, newZoomLevel);\r\n        //TODO Maybe? Update markers in _recursivelyBecomeVisible\r\n        fg.eachLayer(function (n) {\r\n          if (!(n instanceof L.MarkerCluster) && n._icon) {\r\n            n.clusterShow();\r\n          }\r\n        });\r\n\r\n        //update the positions of the just added clusters/markers\r\n        this._topClusterLevel._recursively(bounds, previousZoomLevel, newZoomLevel, function (c) {\r\n          c._recursivelyRestoreChildPositions(newZoomLevel);\r\n        });\r\n\r\n        this._ignoreMove = false;\r\n\r\n        //Remove the old clusters and close the zoom animation\r\n        this._enqueue(function () {\r\n          //update the positions of the just added clusters/markers\r\n          this._topClusterLevel._recursively(bounds, previousZoomLevel, 0, function (c) {\r\n            fg.removeLayer(c);\r\n            c.clusterShow();\r\n          });\r\n\r\n          this._animationEnd();\r\n        });\r\n      },\r\n\r\n      _animationZoomOut: function (previousZoomLevel, newZoomLevel) {\r\n        this._animationZoomOutSingle(this._topClusterLevel, previousZoomLevel - 1, newZoomLevel);\r\n\r\n        //Need to add markers for those that weren't on the map before but are now\r\n        this._topClusterLevel._recursivelyAddChildrenToMap(null, newZoomLevel, this._getExpandedVisibleBounds());\r\n        //Remove markers that were on the map before but won't be now\r\n        this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, previousZoomLevel, this._getExpandedVisibleBounds());\r\n      },\r\n\r\n      _animationAddLayer: function (layer, newCluster) {\r\n        var me = this,\r\n            fg = this._featureGroup;\r\n\r\n        fg.addLayer(layer);\r\n        if (newCluster !== layer) {\r\n          if (newCluster._childCount > 2) { //Was already a cluster\r\n\r\n            newCluster._updateIcon();\r\n            this._forceLayout();\r\n            this._animationStart();\r\n\r\n            layer._setPos(this._map.latLngToLayerPoint(newCluster.getLatLng()));\r\n            layer.clusterHide();\r\n\r\n            this._enqueue(function () {\r\n              fg.removeLayer(layer);\r\n              layer.clusterShow();\r\n\r\n              me._animationEnd();\r\n            });\r\n\r\n          } else { //Just became a cluster\r\n            this._forceLayout();\r\n\r\n            me._animationStart();\r\n            me._animationZoomOutSingle(newCluster, this._map.getMaxZoom(), this._map.getZoom());\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    // Private methods for animated versions.\r\n    _animationZoomOutSingle: function (cluster, previousZoomLevel, newZoomLevel) {\r\n      var bounds = this._getExpandedVisibleBounds();\r\n\r\n      //Animate all of the markers in the clusters to move to their cluster center point\r\n      cluster._recursivelyAnimateChildrenInAndAddSelfToMap(bounds, previousZoomLevel + 1, newZoomLevel);\r\n\r\n      var me = this;\r\n\r\n      //Update the opacity (If we immediately set it they won't animate)\r\n      this._forceLayout();\r\n      cluster._recursivelyBecomeVisible(bounds, newZoomLevel);\r\n\r\n      //TODO: Maybe use the transition timing stuff to make this more reliable\r\n      //When the animations are done, tidy up\r\n      this._enqueue(function () {\r\n\r\n        //This cluster stopped being a cluster before the timeout fired\r\n        if (cluster._childCount === 1) {\r\n          var m = cluster._markers[0];\r\n          //If we were in a cluster animation at the time then the opacity and position of our child could be wrong now, so fix it\r\n          this._ignoreMove = true;\r\n          m.setLatLng(m.getLatLng());\r\n          this._ignoreMove = false;\r\n          if (m.clusterShow) {\r\n            m.clusterShow();\r\n          }\r\n        } else {\r\n          cluster._recursively(bounds, newZoomLevel, 0, function (c) {\r\n            c._recursivelyRemoveChildrenFromMap(bounds, previousZoomLevel + 1);\r\n          });\r\n        }\r\n        me._animationEnd();\r\n      });\r\n    },\r\n\r\n    _animationEnd: function () {\r\n      if (this._map) {\r\n        this._map._mapPane.className = this._map._mapPane.className.replace(' leaflet-cluster-anim', '');\r\n      }\r\n      this._inZoomAnimation--;\r\n      this.fire('animationend');\r\n    },\r\n\r\n    //Force a browser layout of stuff in the map\r\n    // Should apply the current opacity and location to all elements so we can update them again for an animation\r\n    _forceLayout: function () {\r\n      //In my testing this works, infact offsetWidth of any element seems to work.\r\n      //Could loop all this._layers and do this for each _icon if it stops working\r\n\r\n      L.Util.falseFn(document.body.offsetWidth);\r\n    }\r\n  });\r\n\r\n  L.markerClusterGroup = function (options) {\r\n    return new L.MarkerClusterGroup(options);\r\n  };\r\n\r\n  L.MarkerCluster = L.Marker.extend({\r\n    initialize: function (group, zoom, a, b) {\r\n\r\n      L.Marker.prototype.initialize.call(this, a ? (a._cLatLng || a.getLatLng()) : new L.LatLng(0, 0), {icon: this});\r\n\r\n      this._group = group;\r\n      this._zoom = zoom;\r\n\r\n      this._markers = [];\r\n      this._childClusters = [];\r\n      this._childCount = 0;\r\n      this._iconNeedsUpdate = true;\r\n      this._boundsNeedUpdate = true;\r\n\r\n      this._bounds = new L.LatLngBounds();\r\n\r\n      if (a) {\r\n        this._addChild(a);\r\n      }\r\n      if (b) {\r\n        this._addChild(b);\r\n      }\r\n    },\r\n\r\n    //Recursively retrieve all child markers of this cluster\r\n    getAllChildMarkers: function (storageArray) {\r\n      storageArray = storageArray || [];\r\n\r\n      for (var i = this._childClusters.length - 1; i >= 0; i--) {\r\n        this._childClusters[i].getAllChildMarkers(storageArray);\r\n      }\r\n\r\n      for (var j = this._markers.length - 1; j >= 0; j--) {\r\n        storageArray.push(this._markers[j]);\r\n      }\r\n\r\n      return storageArray;\r\n    },\r\n\r\n    //Returns the count of how many child markers we have\r\n    getChildCount: function () {\r\n      return this._childCount;\r\n    },\r\n\r\n    //Zoom to the minimum of showing all of the child markers, or the extents of this cluster\r\n    zoomToBounds: function () {\r\n      var childClusters = this._childClusters.slice(),\r\n          map           = this._group._map,\r\n          boundsZoom    = map.getBoundsZoom(this._bounds),\r\n          zoom          = this._zoom + 1,\r\n          mapZoom       = map.getZoom(),\r\n          i;\r\n\r\n      //calculate how far we need to zoom down to see all of the markers\r\n      while (childClusters.length > 0 && boundsZoom > zoom) {\r\n        zoom++;\r\n        var newClusters = [];\r\n        for (i = 0; i < childClusters.length; i++) {\r\n          newClusters = newClusters.concat(childClusters[i]._childClusters);\r\n        }\r\n        childClusters = newClusters;\r\n      }\r\n\r\n      if (boundsZoom > zoom) {\r\n        this._group._map.setView(this._latlng, zoom);\r\n      } else if (boundsZoom <= mapZoom) { //If fitBounds wouldn't zoom us down, zoom us down instead\r\n        this._group._map.setView(this._latlng, mapZoom + 1);\r\n      } else {\r\n        this._group._map.fitBounds(this._bounds);\r\n      }\r\n    },\r\n\r\n    getBounds: function () {\r\n      var bounds = new L.LatLngBounds();\r\n      bounds.extend(this._bounds);\r\n      return bounds;\r\n    },\r\n\r\n    _updateIcon: function () {\r\n      this._iconNeedsUpdate = true;\r\n      if (this._icon) {\r\n        this.setIcon(this);\r\n      }\r\n    },\r\n\r\n    //Cludge for Icon, we pretend to be an icon for performance\r\n    createIcon: function () {\r\n      if (this._iconNeedsUpdate) {\r\n        this._iconObj = this._group.options.iconCreateFunction(this);\r\n        this._iconNeedsUpdate = false;\r\n      }\r\n      return this._iconObj.createIcon();\r\n    },\r\n    createShadow: function () {\r\n      return this._iconObj.createShadow();\r\n    },\r\n\r\n    _addChild: function (new1, isNotificationFromChild) {\r\n\r\n      this._iconNeedsUpdate = true;\r\n\r\n      this._boundsNeedUpdate = true;\r\n      this._setClusterCenter(new1);\r\n\r\n      if (new1 instanceof L.MarkerCluster) {\r\n        if (!isNotificationFromChild) {\r\n          this._childClusters.push(new1);\r\n          new1.__parent = this;\r\n        }\r\n        this._childCount += new1._childCount;\r\n      } else {\r\n        if (!isNotificationFromChild) {\r\n          this._markers.push(new1);\r\n        }\r\n        this._childCount++;\r\n      }\r\n\r\n      if (this.__parent) {\r\n        this.__parent._addChild(new1, true);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Makes sure the cluster center is set. If not, uses the child center if it is a cluster, or the marker position.\r\n     * @param child L.MarkerCluster|L.Marker that will be used as cluster center if not defined yet.\r\n     * @private\r\n     */\r\n    _setClusterCenter: function (child) {\r\n      if (!this._cLatLng) {\r\n        // when clustering, take position of the first point as the cluster center\r\n        this._cLatLng = child._cLatLng || child._latlng;\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Assigns impossible bounding values so that the next extend entirely determines the new bounds.\r\n     * This method avoids having to trash the previous L.LatLngBounds object and to create a new one, which is much slower for this class.\r\n     * As long as the bounds are not extended, most other methods would probably fail, as they would with bounds initialized but not extended.\r\n     * @private\r\n     */\r\n    _resetBounds: function () {\r\n      var bounds = this._bounds;\r\n\r\n      if (bounds._southWest) {\r\n        bounds._southWest.lat = Infinity;\r\n        bounds._southWest.lng = Infinity;\r\n      }\r\n      if (bounds._northEast) {\r\n        bounds._northEast.lat = -Infinity;\r\n        bounds._northEast.lng = -Infinity;\r\n      }\r\n    },\r\n\r\n    _recalculateBounds: function () {\r\n      var markers       = this._markers,\r\n          childClusters = this._childClusters,\r\n          latSum        = 0,\r\n          lngSum        = 0,\r\n          totalCount    = this._childCount,\r\n          i, child, childLatLng, childCount;\r\n\r\n      // Case where all markers are removed from the map and we are left with just an empty _topClusterLevel.\r\n      if (totalCount === 0) {\r\n        return;\r\n      }\r\n\r\n      // Reset rather than creating a new object, for performance.\r\n      this._resetBounds();\r\n\r\n      // Child markers.\r\n      for (i = 0; i < markers.length; i++) {\r\n        childLatLng = markers[i]._latlng;\r\n\r\n        this._bounds.extend(childLatLng);\r\n\r\n        latSum += childLatLng.lat;\r\n        lngSum += childLatLng.lng;\r\n      }\r\n\r\n      // Child clusters.\r\n      for (i = 0; i < childClusters.length; i++) {\r\n        child = childClusters[i];\r\n\r\n        // Re-compute child bounds and weighted position first if necessary.\r\n        if (child._boundsNeedUpdate) {\r\n          child._recalculateBounds();\r\n        }\r\n\r\n        this._bounds.extend(child._bounds);\r\n\r\n        childLatLng = child._wLatLng;\r\n        childCount = child._childCount;\r\n\r\n        latSum += childLatLng.lat * childCount;\r\n        lngSum += childLatLng.lng * childCount;\r\n      }\r\n\r\n      this._latlng = this._wLatLng = new L.LatLng(latSum / totalCount, lngSum / totalCount);\r\n\r\n      // Reset dirty flag.\r\n      this._boundsNeedUpdate = false;\r\n    },\r\n\r\n    //Set our markers position as given and add it to the map\r\n    _addToMap: function (startPos) {\r\n      if (startPos) {\r\n        this._backupLatlng = this._latlng;\r\n        this.setLatLng(startPos);\r\n      }\r\n      this._group._featureGroup.addLayer(this);\r\n    },\r\n\r\n    _recursivelyAnimateChildrenIn: function (bounds, center, maxZoom) {\r\n      this._recursively(bounds, 0, maxZoom - 1,\r\n          function (c) {\r\n            var markers = c._markers,\r\n                i, m;\r\n            for (i = markers.length - 1; i >= 0; i--) {\r\n              m = markers[i];\r\n\r\n              //Only do it if the icon is still on the map\r\n              if (m._icon) {\r\n                m._setPos(center);\r\n                m.clusterHide();\r\n              }\r\n            }\r\n          },\r\n          function (c) {\r\n            var childClusters = c._childClusters,\r\n                j, cm;\r\n            for (j = childClusters.length - 1; j >= 0; j--) {\r\n              cm = childClusters[j];\r\n              if (cm._icon) {\r\n                cm._setPos(center);\r\n                cm.clusterHide();\r\n              }\r\n            }\r\n          }\r\n      );\r\n    },\r\n\r\n    _recursivelyAnimateChildrenInAndAddSelfToMap: function (bounds, previousZoomLevel, newZoomLevel) {\r\n      this._recursively(bounds, newZoomLevel, 0,\r\n          function (c) {\r\n            c._recursivelyAnimateChildrenIn(bounds, c._group._map.latLngToLayerPoint(c.getLatLng()).round(), previousZoomLevel);\r\n\r\n            //TODO: depthToAnimateIn affects _isSingleParent, if there is a multizoom we may/may not be.\r\n            //As a hack we only do a animation free zoom on a single level zoom, if someone does multiple levels then we always animate\r\n            if (c._isSingleParent() && previousZoomLevel - 1 === newZoomLevel) {\r\n              c.clusterShow();\r\n              c._recursivelyRemoveChildrenFromMap(bounds, previousZoomLevel); //Immediately remove our children as we are replacing them. TODO previousBounds not bounds\r\n            } else {\r\n              c.clusterHide();\r\n            }\r\n\r\n            c._addToMap();\r\n          }\r\n      );\r\n    },\r\n\r\n    _recursivelyBecomeVisible: function (bounds, zoomLevel) {\r\n      this._recursively(bounds, 0, zoomLevel, null, function (c) {\r\n        c.clusterShow();\r\n      });\r\n    },\r\n\r\n    _recursivelyAddChildrenToMap: function (startPos, zoomLevel, bounds) {\r\n      this._recursively(bounds, -1, zoomLevel,\r\n          function (c) {\r\n            if (zoomLevel === c._zoom) {\r\n              return;\r\n            }\r\n\r\n            //Add our child markers at startPos (so they can be animated out)\r\n            for (var i = c._markers.length - 1; i >= 0; i--) {\r\n              var nm = c._markers[i];\r\n\r\n              if (!bounds.contains(nm._latlng)) {\r\n                continue;\r\n              }\r\n\r\n              if (startPos) {\r\n                nm._backupLatlng = nm.getLatLng();\r\n\r\n                nm.setLatLng(startPos);\r\n                if (nm.clusterHide) {\r\n                  nm.clusterHide();\r\n                }\r\n              }\r\n\r\n              c._group._featureGroup.addLayer(nm);\r\n            }\r\n          },\r\n          function (c) {\r\n            c._addToMap(startPos);\r\n          }\r\n      );\r\n    },\r\n\r\n    _recursivelyRestoreChildPositions: function (zoomLevel) {\r\n      //Fix positions of child markers\r\n      for (var i = this._markers.length - 1; i >= 0; i--) {\r\n        var nm = this._markers[i];\r\n        if (nm._backupLatlng) {\r\n          nm.setLatLng(nm._backupLatlng);\r\n          delete nm._backupLatlng;\r\n        }\r\n      }\r\n\r\n      if (zoomLevel - 1 === this._zoom) {\r\n        //Reposition child clusters\r\n        for (var j = this._childClusters.length - 1; j >= 0; j--) {\r\n          this._childClusters[j]._restorePosition();\r\n        }\r\n      } else {\r\n        for (var k = this._childClusters.length - 1; k >= 0; k--) {\r\n          this._childClusters[k]._recursivelyRestoreChildPositions(zoomLevel);\r\n        }\r\n      }\r\n    },\r\n\r\n    _restorePosition: function () {\r\n      if (this._backupLatlng) {\r\n        this.setLatLng(this._backupLatlng);\r\n        delete this._backupLatlng;\r\n      }\r\n    },\r\n\r\n    //exceptBounds: If set, don't remove any markers/clusters in it\r\n    _recursivelyRemoveChildrenFromMap: function (previousBounds, zoomLevel, exceptBounds) {\r\n      var m, i;\r\n      this._recursively(previousBounds, -1, zoomLevel - 1,\r\n          function (c) {\r\n            //Remove markers at every level\r\n            for (i = c._markers.length - 1; i >= 0; i--) {\r\n              m = c._markers[i];\r\n              if (!exceptBounds || !exceptBounds.contains(m._latlng)) {\r\n                c._group._featureGroup.removeLayer(m);\r\n                if (m.clusterShow) {\r\n                  m.clusterShow();\r\n                }\r\n              }\r\n            }\r\n          },\r\n          function (c) {\r\n            //Remove child clusters at just the bottom level\r\n            for (i = c._childClusters.length - 1; i >= 0; i--) {\r\n              m = c._childClusters[i];\r\n              if (!exceptBounds || !exceptBounds.contains(m._latlng)) {\r\n                c._group._featureGroup.removeLayer(m);\r\n                if (m.clusterShow) {\r\n                  m.clusterShow();\r\n                }\r\n              }\r\n            }\r\n          }\r\n      );\r\n    },\r\n\r\n    //Run the given functions recursively to this and child clusters\r\n    // boundsToApplyTo: a L.LatLngBounds representing the bounds of what clusters to recurse in to\r\n    // zoomLevelToStart: zoom level to start running functions (inclusive)\r\n    // zoomLevelToStop: zoom level to stop running functions (inclusive)\r\n    // runAtEveryLevel: function that takes an L.MarkerCluster as an argument that should be applied on every level\r\n    // runAtBottomLevel: function that takes an L.MarkerCluster as an argument that should be applied at only the bottom level\r\n    _recursively: function (boundsToApplyTo, zoomLevelToStart, zoomLevelToStop, runAtEveryLevel, runAtBottomLevel) {\r\n      var childClusters = this._childClusters,\r\n          zoom          = this._zoom,\r\n          i, c;\r\n\r\n      if (zoomLevelToStart > zoom) { //Still going down to required depth, just recurse to child clusters\r\n        for (i = childClusters.length - 1; i >= 0; i--) {\r\n          c = childClusters[i];\r\n          if (boundsToApplyTo.intersects(c._bounds)) {\r\n            c._recursively(boundsToApplyTo, zoomLevelToStart, zoomLevelToStop, runAtEveryLevel, runAtBottomLevel);\r\n          }\r\n        }\r\n      } else { //In required depth\r\n\r\n        if (runAtEveryLevel) {\r\n          runAtEveryLevel(this);\r\n        }\r\n        if (runAtBottomLevel && this._zoom === zoomLevelToStop) {\r\n          runAtBottomLevel(this);\r\n        }\r\n\r\n        //TODO: This loop is almost the same as above\r\n        if (zoomLevelToStop > zoom) {\r\n          for (i = childClusters.length - 1; i >= 0; i--) {\r\n            c = childClusters[i];\r\n            if (boundsToApplyTo.intersects(c._bounds)) {\r\n              c._recursively(boundsToApplyTo, zoomLevelToStart, zoomLevelToStop, runAtEveryLevel, runAtBottomLevel);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    //Returns true if we are the parent of only one cluster and that cluster is the same as us\r\n    _isSingleParent: function () {\r\n      //Don't need to check this._markers as the rest won't work if there are any\r\n      return this._childClusters.length > 0 && this._childClusters[0]._childCount === this._childCount;\r\n    }\r\n  });\r\n\r\n  /*\r\n   * Extends L.Marker to include two extra methods: clusterHide and clusterShow.\r\n   *\r\n   * They work as setOpacity(0) and setOpacity(1) respectively, but\r\n   * they will remember the marker's opacity when hiding and showing it again.\r\n   *\r\n   */\r\n\r\n  L.Marker.include({\r\n\r\n    clusterHide: function () {\r\n      this.options.opacityWhenUnclustered = this.options.opacity || 1;\r\n      return this.setOpacity(0);\r\n    },\r\n\r\n    clusterShow: function () {\r\n      var ret = this.setOpacity(this.options.opacity || this.options.opacityWhenUnclustered);\r\n      delete this.options.opacityWhenUnclustered;\r\n      return ret;\r\n    }\r\n\r\n  });\r\n\r\n  L.DistanceGrid = function (cellSize) {\r\n    this._cellSize = cellSize;\r\n    this._sqCellSize = cellSize * cellSize;\r\n    this._grid = {};\r\n    this._objectPoint = {};\r\n  };\r\n\r\n  L.DistanceGrid.prototype = {\r\n\r\n    addObject: function (obj, point) {\r\n      var x    = this._getCoord(point.x),\r\n          y    = this._getCoord(point.y),\r\n          grid = this._grid,\r\n          row  = grid[y] = grid[y] || {},\r\n          cell = row[x] = row[x] || [],\r\n          stamp = L.Util.stamp(obj);\r\n\r\n      this._objectPoint[stamp] = point;\r\n\r\n      cell.push(obj);\r\n    },\r\n\r\n    updateObject: function (obj, point) {\r\n      this.removeObject(obj);\r\n      this.addObject(obj, point);\r\n    },\r\n\r\n    //Returns true if the object was found\r\n    removeObject: function (obj, point) {\r\n      var x    = this._getCoord(point.x),\r\n          y    = this._getCoord(point.y),\r\n          grid = this._grid,\r\n          row  = grid[y] = grid[y] || {},\r\n          cell = row[x] = row[x] || [],\r\n          i, len;\r\n\r\n      delete this._objectPoint[L.Util.stamp(obj)];\r\n\r\n      for (i = 0, len = cell.length; i < len; i++) {\r\n        if (cell[i] === obj) {\r\n\r\n          cell.splice(i, 1);\r\n\r\n          if (len === 1) {\r\n            delete row[x];\r\n          }\r\n\r\n          return true;\r\n        }\r\n      }\r\n\r\n    },\r\n\r\n    eachObject: function (fn, context) {\r\n      var i, j, k, len, row, cell, removed,\r\n          grid = this._grid;\r\n\r\n      for (i in grid) {\r\n        row = grid[i];\r\n\r\n        for (j in row) {\r\n          cell = row[j];\r\n\r\n          for (k = 0, len = cell.length; k < len; k++) {\r\n            removed = fn.call(context, cell[k]);\r\n            if (removed) {\r\n              k--;\r\n              len--;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    getNearObject: function (point) {\r\n      var x             = this._getCoord(point.x),\r\n          y             = this._getCoord(point.y),\r\n          i, j, k, row, cell, len, obj, dist,\r\n          objectPoint   = this._objectPoint,\r\n          closestDistSq = this._sqCellSize,\r\n          closest       = null;\r\n\r\n      for (i = y - 1; i <= y + 1; i++) {\r\n        row = this._grid[i];\r\n        if (row) {\r\n\r\n          for (j = x - 1; j <= x + 1; j++) {\r\n            cell = row[j];\r\n            if (cell) {\r\n\r\n              for (k = 0, len = cell.length; k < len; k++) {\r\n                obj = cell[k];\r\n                dist = this._sqDist(objectPoint[L.Util.stamp(obj)], point);\r\n                if (dist < closestDistSq) {\r\n                  closestDistSq = dist;\r\n                  closest = obj;\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return closest;\r\n    },\r\n\r\n    _getCoord: function (x) {\r\n      return Math.floor(x / this._cellSize);\r\n    },\r\n\r\n    _sqDist: function (p, p2) {\r\n      var dx = p2.x - p.x,\r\n          dy = p2.y - p.y;\r\n      return dx * dx + dy * dy;\r\n    }\r\n  };\r\n\r\n  /* Copyright (c) 2012 the authors listed at the following URL, and/or\r\n   the authors of referenced articles or incorporated external code:\r\n   http://en.literateprograms.org/Quickhull_(Javascript)?action=history&offset=20120410175256\r\n\r\n   Permission is hereby granted, free of charge, to any person obtaining\r\n   a copy of this software and associated documentation files (the\r\n   \"Software\"), to deal in the Software without restriction, including\r\n   without limitation the rights to use, copy, modify, merge, publish,\r\n   distribute, sublicense, and/or sell copies of the Software, and to\r\n   permit persons to whom the Software is furnished to do so, subject to\r\n   the following conditions:\r\n\r\n   The above copyright notice and this permission notice shall be\r\n   included in all copies or substantial portions of the Software.\r\n\r\n   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n   EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\r\n   IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\r\n   CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\r\n   TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\r\n   SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n   Retrieved from: http://en.literateprograms.org/Quickhull_(Javascript)?oldid=18434\r\n   */\r\n\r\n  (function () {\r\n    L.QuickHull = {\r\n\r\n      /*\r\n       * @param {Object} cpt a point to be measured from the baseline\r\n       * @param {Array} bl the baseline, as represented by a two-element\r\n       *   array of latlng objects.\r\n       * @returns {Number} an approximate distance measure\r\n       */\r\n      getDistant: function (cpt, bl) {\r\n        var vY = bl[1].lat - bl[0].lat,\r\n            vX = bl[0].lng - bl[1].lng;\r\n        return (vX * (cpt.lat - bl[0].lat) + vY * (cpt.lng - bl[0].lng));\r\n      },\r\n\r\n      /*\r\n       * @param {Array} baseLine a two-element array of latlng objects\r\n       *   representing the baseline to project from\r\n       * @param {Array} latLngs an array of latlng objects\r\n       * @returns {Object} the maximum point and all new points to stay\r\n       *   in consideration for the hull.\r\n       */\r\n      findMostDistantPointFromBaseLine: function (baseLine, latLngs) {\r\n        var maxD      = 0,\r\n            maxPt     = null,\r\n            newPoints = [],\r\n            i, pt, d;\r\n\r\n        for (i = latLngs.length - 1; i >= 0; i--) {\r\n          pt = latLngs[i];\r\n          d = this.getDistant(pt, baseLine);\r\n\r\n          if (d > 0) {\r\n            newPoints.push(pt);\r\n          } else {\r\n            continue;\r\n          }\r\n\r\n          if (d > maxD) {\r\n            maxD = d;\r\n            maxPt = pt;\r\n          }\r\n        }\r\n\r\n        return {maxPoint: maxPt, newPoints: newPoints};\r\n      },\r\n\r\n      /*\r\n       * Given a baseline, compute the convex hull of latLngs as an array\r\n       * of latLngs.\r\n       *\r\n       * @param {Array} latLngs\r\n       * @returns {Array}\r\n       */\r\n      buildConvexHull: function (baseLine, latLngs) {\r\n        var convexHullBaseLines = [],\r\n            t                   = this.findMostDistantPointFromBaseLine(baseLine, latLngs);\r\n\r\n        if (t.maxPoint) { // if there is still a point \"outside\" the base line\r\n          convexHullBaseLines =\r\n              convexHullBaseLines.concat(\r\n                  this.buildConvexHull([baseLine[0], t.maxPoint], t.newPoints)\r\n              );\r\n          convexHullBaseLines =\r\n              convexHullBaseLines.concat(\r\n                  this.buildConvexHull([t.maxPoint, baseLine[1]], t.newPoints)\r\n              );\r\n          return convexHullBaseLines;\r\n        } else {  // if there is no more point \"outside\" the base line, the current base line is part of the convex hull\r\n          return [baseLine[0]];\r\n        }\r\n      },\r\n\r\n      /*\r\n       * Given an array of latlngs, compute a convex hull as an array\r\n       * of latlngs\r\n       *\r\n       * @param {Array} latLngs\r\n       * @returns {Array}\r\n       */\r\n      getConvexHull: function (latLngs) {\r\n        // find first baseline\r\n        var maxLat                    = false, minLat    = false,\r\n            maxLng                    = false, minLng = false,\r\n            maxLatPt = null, minLatPt = null,\r\n            maxLngPt                  = null, minLngPt = null,\r\n            maxPt                     = null, minPt       = null,\r\n            i;\r\n\r\n        for (i = latLngs.length - 1; i >= 0; i--) {\r\n          var pt = latLngs[i];\r\n          if (maxLat === false || pt.lat > maxLat) {\r\n            maxLatPt = pt;\r\n            maxLat = pt.lat;\r\n          }\r\n          if (minLat === false || pt.lat < minLat) {\r\n            minLatPt = pt;\r\n            minLat = pt.lat;\r\n          }\r\n          if (maxLng === false || pt.lng > maxLng) {\r\n            maxLngPt = pt;\r\n            maxLng = pt.lng;\r\n          }\r\n          if (minLng === false || pt.lng < minLng) {\r\n            minLngPt = pt;\r\n            minLng = pt.lng;\r\n          }\r\n        }\r\n\r\n        if (minLat !== maxLat) {\r\n          minPt = minLatPt;\r\n          maxPt = maxLatPt;\r\n        } else {\r\n          minPt = minLngPt;\r\n          maxPt = maxLngPt;\r\n        }\r\n\r\n        var ch = [].concat(this.buildConvexHull([minPt, maxPt], latLngs),\r\n            this.buildConvexHull([maxPt, minPt], latLngs));\r\n        return ch;\r\n      }\r\n    };\r\n  }());\r\n\r\n  L.MarkerCluster.include({\r\n    getConvexHull: function () {\r\n      var childMarkers = this.getAllChildMarkers(),\r\n          points       = [],\r\n          p, i;\r\n\r\n      for (i = childMarkers.length - 1; i >= 0; i--) {\r\n        p = childMarkers[i].getLatLng();\r\n        points.push(p);\r\n      }\r\n\r\n      return L.QuickHull.getConvexHull(points);\r\n    }\r\n  });\r\n\r\n//This code is 100% based on https://github.com/jawj/OverlappingMarkerSpiderfier-Leaflet\r\n//Huge thanks to jawj for implementing it first to make my job easy :-)\r\n\r\n  L.MarkerCluster.include({\r\n\r\n    _2PI: Math.PI * 2,\r\n    _circleFootSeparation: 25, //related to circumference of circle\r\n    _circleStartAngle: Math.PI / 6,\r\n\r\n    _spiralFootSeparation: 28, //related to size of spiral (experiment!)\r\n    _spiralLengthStart: 11,\r\n    _spiralLengthFactor: 5,\r\n\r\n    _circleSpiralSwitchover: 9, //show spiral instead of circle from this marker count upwards.\r\n                                // 0 -> always spiral; Infinity -> always circle\r\n\r\n    spiderfy: function () {\r\n      if (this._group._spiderfied === this || this._group._inZoomAnimation) {\r\n        return;\r\n      }\r\n\r\n      var childMarkers = this.getAllChildMarkers(),\r\n          group        = this._group,\r\n          map          = group._map,\r\n          center       = map.latLngToLayerPoint(this._latlng),\r\n          positions;\r\n\r\n      this._group._unspiderfy();\r\n      this._group._spiderfied = this;\r\n\r\n      //TODO Maybe: childMarkers order by distance to center\r\n\r\n      if (childMarkers.length >= this._circleSpiralSwitchover) {\r\n        positions = this._generatePointsSpiral(childMarkers.length, center);\r\n      } else {\r\n        center.y += 10; // Otherwise circles look wrong => hack for standard blue icon, renders differently for other icons.\r\n        positions = this._generatePointsCircle(childMarkers.length, center);\r\n      }\r\n\r\n      this._animationSpiderfy(childMarkers, positions);\r\n    },\r\n\r\n    unspiderfy: function (zoomDetails) {\r\n      /// <param Name=\"zoomDetails\">Argument from zoomanim if being called in a zoom animation or null otherwise</param>\r\n      if (this._group._inZoomAnimation) {\r\n        return;\r\n      }\r\n      this._animationUnspiderfy(zoomDetails);\r\n\r\n      this._group._spiderfied = null;\r\n    },\r\n\r\n    _generatePointsCircle: function (count, centerPt) {\r\n      var circumference = this._group.options.spiderfyDistanceMultiplier * this._circleFootSeparation * (2 + count),\r\n          legLength     = circumference / this._2PI,  //radius from circumference\r\n          angleStep     = this._2PI / count,\r\n          res           = [],\r\n          i, angle;\r\n\r\n      res.length = count;\r\n\r\n      for (i = count - 1; i >= 0; i--) {\r\n        angle = this._circleStartAngle + i * angleStep;\r\n        res[i] = new L.Point(centerPt.x + legLength * Math.cos(angle), centerPt.y + legLength * Math.sin(angle))._round();\r\n      }\r\n\r\n      return res;\r\n    },\r\n\r\n    _generatePointsSpiral: function (count, centerPt) {\r\n      var spiderfyDistanceMultiplier = this._group.options.spiderfyDistanceMultiplier,\r\n          legLength                  = spiderfyDistanceMultiplier * this._spiralLengthStart,\r\n          separation                 = spiderfyDistanceMultiplier * this._spiralFootSeparation,\r\n          lengthFactor               = spiderfyDistanceMultiplier * this._spiralLengthFactor * this._2PI,\r\n          angle                      = 0,\r\n          res                        = [],\r\n          i;\r\n\r\n      res.length = count;\r\n\r\n      // Higher index, closer position to cluster center.\r\n      for (i = count - 1; i >= 0; i--) {\r\n        angle += separation / legLength + i * 0.0005;\r\n        res[i] = new L.Point(centerPt.x + legLength * Math.cos(angle), centerPt.y + legLength * Math.sin(angle))._round();\r\n        legLength += lengthFactor / angle;\r\n      }\r\n      return res;\r\n    },\r\n\r\n    _noanimationUnspiderfy: function () {\r\n      var group        = this._group,\r\n          map          = group._map,\r\n          fg           = group._featureGroup,\r\n          childMarkers = this.getAllChildMarkers(),\r\n          m, i;\r\n\r\n      group._ignoreMove = true;\r\n\r\n      this.setOpacity(1);\r\n      for (i = childMarkers.length - 1; i >= 0; i--) {\r\n        m = childMarkers[i];\r\n\r\n        fg.removeLayer(m);\r\n\r\n        if (m._preSpiderfyLatlng) {\r\n          m.setLatLng(m._preSpiderfyLatlng);\r\n          delete m._preSpiderfyLatlng;\r\n        }\r\n        if (m.setZIndexOffset) {\r\n          m.setZIndexOffset(0);\r\n        }\r\n\r\n        if (m._spiderLeg) {\r\n          map.removeLayer(m._spiderLeg);\r\n          delete m._spiderLeg;\r\n        }\r\n      }\r\n\r\n      group.fire('unspiderfied', {\r\n        cluster: this,\r\n        markers: childMarkers\r\n      });\r\n      group._ignoreMove = false;\r\n      group._spiderfied = null;\r\n    }\r\n  });\r\n\r\n//Non Animated versions of everything\r\n  L.MarkerClusterNonAnimated = L.MarkerCluster.extend({\r\n    _animationSpiderfy: function (childMarkers, positions) {\r\n      var group      = this._group,\r\n          map        = group._map,\r\n          fg         = group._featureGroup,\r\n          legOptions = this._group.options.spiderLegPolylineOptions,\r\n          i, m, leg, newPos;\r\n\r\n      group._ignoreMove = true;\r\n\r\n      // Traverse in ascending order to make sure that inner circleMarkers are on top of further legs. Normal markers are re-ordered by newPosition.\r\n      // The reverse order trick no longer improves performance on modern browsers.\r\n      for (i = 0; i < childMarkers.length; i++) {\r\n        newPos = map.layerPointToLatLng(positions[i]);\r\n        m = childMarkers[i];\r\n\r\n        // Add the leg before the marker, so that in case the latter is a circleMarker, the leg is behind it.\r\n        leg = new L.Polyline([this._latlng, newPos], legOptions);\r\n        map.addLayer(leg);\r\n        m._spiderLeg = leg;\r\n\r\n        // Now add the marker.\r\n        m._preSpiderfyLatlng = m._latlng;\r\n        m.setLatLng(newPos);\r\n        if (m.setZIndexOffset) {\r\n          m.setZIndexOffset(1000000); //Make these appear on top of EVERYTHING\r\n        }\r\n\r\n        fg.addLayer(m);\r\n      }\r\n      this.setOpacity(0.3);\r\n\r\n      group._ignoreMove = false;\r\n      group.fire('spiderfied', {\r\n        cluster: this,\r\n        markers: childMarkers\r\n      });\r\n    },\r\n\r\n    _animationUnspiderfy: function () {\r\n      this._noanimationUnspiderfy();\r\n    }\r\n  });\r\n\r\n//Animated versions here\r\n  L.MarkerCluster.include({\r\n\r\n    _animationSpiderfy: function (childMarkers, positions) {\r\n      var me              = this,\r\n          group           = this._group,\r\n          map             = group._map,\r\n          fg              = group._featureGroup,\r\n          thisLayerLatLng = this._latlng,\r\n          thisLayerPos    = map.latLngToLayerPoint(thisLayerLatLng),\r\n          svg             = L.Path.SVG,\r\n          legOptions      = L.extend({}, this._group.options.spiderLegPolylineOptions), // Copy the options so that we can modify them for animation.\r\n          finalLegOpacity = legOptions.opacity,\r\n          i, m, leg, legPath, legLength, newPos;\r\n\r\n      if (finalLegOpacity === undefined) {\r\n        finalLegOpacity = L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity;\r\n      }\r\n\r\n      if (svg) {\r\n        // If the initial opacity of the spider leg is not 0 then it appears before the animation starts.\r\n        legOptions.opacity = 0;\r\n\r\n        // Add the class for CSS transitions.\r\n        legOptions.className = (legOptions.className || '') + ' leaflet-cluster-spider-leg';\r\n      } else {\r\n        // Make sure we have a defined opacity.\r\n        legOptions.opacity = finalLegOpacity;\r\n      }\r\n\r\n      group._ignoreMove = true;\r\n\r\n      // Add markers and spider legs to map, hidden at our center point.\r\n      // Traverse in ascending order to make sure that inner circleMarkers are on top of further legs. Normal markers are re-ordered by newPosition.\r\n      // The reverse order trick no longer improves performance on modern browsers.\r\n      for (i = 0; i < childMarkers.length; i++) {\r\n        m = childMarkers[i];\r\n\r\n        newPos = map.layerPointToLatLng(positions[i]);\r\n\r\n        // Add the leg before the marker, so that in case the latter is a circleMarker, the leg is behind it.\r\n        leg = new L.Polyline([thisLayerLatLng, newPos], legOptions);\r\n        map.addLayer(leg);\r\n        m._spiderLeg = leg;\r\n\r\n        // Explanations: https://jakearchibald.com/2013/animated-line-drawing-svg/\r\n        // In our case the transition property is declared in the CSS file.\r\n        if (svg) {\r\n          legPath = leg._path;\r\n          legLength = legPath.getTotalLength() + 0.1; // Need a small extra length to avoid remaining dot in Firefox.\r\n          legPath.style.strokeDasharray = legLength; // Just 1 length is enough, it will be duplicated.\r\n          legPath.style.strokeDashoffset = legLength;\r\n        }\r\n\r\n        // If it is a marker, add it now and we'll animate it out\r\n        if (m.setZIndexOffset) {\r\n          m.setZIndexOffset(1000000); // Make normal markers appear on top of EVERYTHING\r\n        }\r\n        if (m.clusterHide) {\r\n          m.clusterHide();\r\n        }\r\n\r\n        // Vectors just get immediately added\r\n        fg.addLayer(m);\r\n\r\n        if (m._setPos) {\r\n          m._setPos(thisLayerPos);\r\n        }\r\n      }\r\n\r\n      group._forceLayout();\r\n      group._animationStart();\r\n\r\n      // Reveal markers and spider legs.\r\n      for (i = childMarkers.length - 1; i >= 0; i--) {\r\n        newPos = map.layerPointToLatLng(positions[i]);\r\n        m = childMarkers[i];\r\n\r\n        //Move marker to new position\r\n        m._preSpiderfyLatlng = m._latlng;\r\n        m.setLatLng(newPos);\r\n\r\n        if (m.clusterShow) {\r\n          m.clusterShow();\r\n        }\r\n\r\n        // Animate leg (animation is actually delegated to CSS transition).\r\n        if (svg) {\r\n          leg = m._spiderLeg;\r\n          legPath = leg._path;\r\n          legPath.style.strokeDashoffset = 0;\r\n          //legPath.style.strokeOpacity = finalLegOpacity;\r\n          leg.setStyle({opacity: finalLegOpacity});\r\n        }\r\n      }\r\n      this.setOpacity(0.3);\r\n\r\n      group._ignoreMove = false;\r\n\r\n      setTimeout(function () {\r\n        group._animationEnd();\r\n        group.fire('spiderfied', {\r\n          cluster: me,\r\n          markers: childMarkers\r\n        });\r\n      }, 200);\r\n    },\r\n\r\n    _animationUnspiderfy: function (zoomDetails) {\r\n      var me           = this,\r\n          group        = this._group,\r\n          map          = group._map,\r\n          fg           = group._featureGroup,\r\n          thisLayerPos = zoomDetails ? map._latLngToNewLayerPoint(this._latlng, zoomDetails.zoom, zoomDetails.center) : map.latLngToLayerPoint(this._latlng),\r\n          childMarkers = this.getAllChildMarkers(),\r\n          svg          = L.Path.SVG,\r\n          m, i, leg, legPath, legLength, nonAnimatable;\r\n\r\n      group._ignoreMove = true;\r\n      group._animationStart();\r\n\r\n      //Make us visible and bring the child markers back in\r\n      this.setOpacity(1);\r\n      for (i = childMarkers.length - 1; i >= 0; i--) {\r\n        m = childMarkers[i];\r\n\r\n        //Marker was added to us after we were spiderfied\r\n        if (!m._preSpiderfyLatlng) {\r\n          continue;\r\n        }\r\n\r\n        //Fix up the location to the real one\r\n        m.setLatLng(m._preSpiderfyLatlng);\r\n        delete m._preSpiderfyLatlng;\r\n\r\n        //Hack override the location to be our center\r\n        nonAnimatable = true;\r\n        if (m._setPos) {\r\n          m._setPos(thisLayerPos);\r\n          nonAnimatable = false;\r\n        }\r\n        if (m.clusterHide) {\r\n          m.clusterHide();\r\n          nonAnimatable = false;\r\n        }\r\n        if (nonAnimatable) {\r\n          fg.removeLayer(m);\r\n        }\r\n\r\n        // Animate the spider leg back in (animation is actually delegated to CSS transition).\r\n        if (svg) {\r\n          leg = m._spiderLeg;\r\n          legPath = leg._path;\r\n          legLength = legPath.getTotalLength() + 0.1;\r\n          legPath.style.strokeDashoffset = legLength;\r\n          leg.setStyle({opacity: 0});\r\n        }\r\n      }\r\n\r\n      group._ignoreMove = false;\r\n\r\n      setTimeout(function () {\r\n        //If we have only <= one child left then that marker will be shown on the map so don't remove it!\r\n        var stillThereChildCount = 0;\r\n        for (i = childMarkers.length - 1; i >= 0; i--) {\r\n          m = childMarkers[i];\r\n          if (m._spiderLeg) {\r\n            stillThereChildCount++;\r\n          }\r\n        }\r\n\r\n        for (i = childMarkers.length - 1; i >= 0; i--) {\r\n          m = childMarkers[i];\r\n\r\n          if (!m._spiderLeg) { //Has already been unspiderfied\r\n            continue;\r\n          }\r\n\r\n          if (m.clusterShow) {\r\n            m.clusterShow();\r\n          }\r\n          if (m.setZIndexOffset) {\r\n            m.setZIndexOffset(0);\r\n          }\r\n\r\n          if (stillThereChildCount > 1) {\r\n            fg.removeLayer(m);\r\n          }\r\n\r\n          map.removeLayer(m._spiderLeg);\r\n          delete m._spiderLeg;\r\n        }\r\n        group._animationEnd();\r\n        group.fire('unspiderfied', {\r\n          cluster: me,\r\n          markers: childMarkers\r\n        });\r\n      }, 200);\r\n    }\r\n  });\r\n\r\n  L.MarkerClusterGroup.include({\r\n    //The MarkerCluster currently spiderfied (if any)\r\n    _spiderfied: null,\r\n\r\n    unspiderfy: function () {\r\n      this._unspiderfy.apply(this, arguments);\r\n    },\r\n\r\n    _spiderfierOnAdd: function () {\r\n      this._map.on('click', this._unspiderfyWrapper, this);\r\n\r\n      if (this._map.options.zoomAnimation) {\r\n        this._map.on('zoomstart', this._unspiderfyZoomStart, this);\r\n      }\r\n      //Browsers without zoomAnimation or a big zoom don't fire zoomstart\r\n      this._map.on('zoomend', this._noanimationUnspiderfy, this);\r\n\r\n      if (!L.Browser.touch) {\r\n        this._map.getRenderer(this);\r\n        //Needs to happen in the pageload, not after, or animations don't work in webkit\r\n        //  http://stackoverflow.com/questions/8455200/svg-animate-with-dynamically-added-elements\r\n        //Disable on touch browsers as the animation messes up on a touch zoom and isn't very noticable\r\n      }\r\n    },\r\n\r\n    _spiderfierOnRemove: function () {\r\n      this._map.off('click', this._unspiderfyWrapper, this);\r\n      this._map.off('zoomstart', this._unspiderfyZoomStart, this);\r\n      this._map.off('zoomanim', this._unspiderfyZoomAnim, this);\r\n      this._map.off('zoomend', this._noanimationUnspiderfy, this);\r\n\r\n      //Ensure that markers are back where they should be\r\n      // Use no animation to avoid a sticky leaflet-cluster-anim class on mapPane\r\n      this._noanimationUnspiderfy();\r\n    },\r\n\r\n    //On zoom start we add a zoomanim handler so that we are guaranteed to be last (after markers are animated)\r\n    //This means we can define the animation they do rather than Markers doing an animation to their actual location\r\n    _unspiderfyZoomStart: function () {\r\n      if (!this._map) { //May have been removed from the map by a zoomEnd handler\r\n        return;\r\n      }\r\n\r\n      this._map.on('zoomanim', this._unspiderfyZoomAnim, this);\r\n    },\r\n\r\n    _unspiderfyZoomAnim: function (zoomDetails) {\r\n      //Wait until the first zoomanim after the user has finished touch-zooming before running the animation\r\n      if (L.DomUtil.hasClass(this._map._mapPane, 'leaflet-touching')) {\r\n        return;\r\n      }\r\n\r\n      this._map.off('zoomanim', this._unspiderfyZoomAnim, this);\r\n      this._unspiderfy(zoomDetails);\r\n    },\r\n\r\n    _unspiderfyWrapper: function () {\r\n      /// <summary>_unspiderfy but passes no arguments</summary>\r\n      this._unspiderfy();\r\n    },\r\n\r\n    _unspiderfy: function (zoomDetails) {\r\n      if (this._spiderfied) {\r\n        this._spiderfied.unspiderfy(zoomDetails);\r\n      }\r\n    },\r\n\r\n    _noanimationUnspiderfy: function () {\r\n      if (this._spiderfied) {\r\n        this._spiderfied._noanimationUnspiderfy();\r\n      }\r\n    },\r\n\r\n    //If the given layer is currently being spiderfied then we unspiderfy it so it isn't on the map anymore etc\r\n    _unspiderfyLayer: function (layer) {\r\n      if (layer._spiderLeg) {\r\n        this._featureGroup.removeLayer(layer);\r\n\r\n        if (layer.clusterShow) {\r\n          layer.clusterShow();\r\n        }\r\n        //Position will be fixed up immediately in _animationUnspiderfy\r\n        if (layer.setZIndexOffset) {\r\n          layer.setZIndexOffset(0);\r\n        }\r\n\r\n        this._map.removeLayer(layer._spiderLeg);\r\n        delete layer._spiderLeg;\r\n      }\r\n    }\r\n  });\r\n\r\n  /**\r\n   * Adds 1 public method to MCG and 1 to L.Marker to facilitate changing\r\n   * markers' icon options and refreshing their icon and their parent clusters\r\n   * accordingly (case where their iconCreateFunction uses data of childMarkers\r\n   * to make up the cluster icon).\r\n   */\r\n\r\n\r\n  L.MarkerClusterGroup.include({\r\n    /**\r\n     * Updates the icon of all clusters which are parents of the given marker(s).\r\n     * In singleMarkerMode, also updates the given marker(s) icon.\r\n     * @param layers L.MarkerClusterGroup|L.LayerGroup|Array(L.Marker)|Map(L.Marker)|\r\n     * L.MarkerCluster|L.Marker (optional) list of markers (or single marker) whose parent\r\n     * clusters need to be updated. If not provided, retrieves all child markers of this.\r\n     * @returns {L.MarkerClusterGroup}\r\n     */\r\n    refreshClusters: function (layers) {\r\n      if (!layers) {\r\n        layers = this._topClusterLevel.getAllChildMarkers();\r\n      } else if (layers instanceof L.MarkerClusterGroup) {\r\n        layers = layers._topClusterLevel.getAllChildMarkers();\r\n      } else if (layers instanceof L.LayerGroup) {\r\n        layers = layers._layers;\r\n      } else if (layers instanceof L.MarkerCluster) {\r\n        layers = layers.getAllChildMarkers();\r\n      } else if (layers instanceof L.Marker) {\r\n        layers = [layers];\r\n      } // else: must be an Array(L.Marker)|Map(L.Marker)\r\n      this._flagParentsIconsNeedUpdate(layers);\r\n      this._refreshClustersIcons();\r\n\r\n      // In case of singleMarkerMode, also re-draw the markers.\r\n      if (this.options.singleMarkerMode) {\r\n        this._refreshSingleMarkerModeMarkers(layers);\r\n      }\r\n\r\n      return this;\r\n    },\r\n\r\n    /**\r\n     * Simply flags all parent clusters of the given markers as having a \"dirty\" icon.\r\n     * @param layers Array(L.Marker)|Map(L.Marker) list of markers.\r\n     * @private\r\n     */\r\n    _flagParentsIconsNeedUpdate: function (layers) {\r\n      var id, parent;\r\n\r\n      // Assumes layers is an Array or an Object whose prototype is non-enumerable.\r\n      for (id in layers) {\r\n        // Flag parent clusters' icon as \"dirty\", all the way up.\r\n        // Dumb process that flags multiple times upper parents, but still\r\n        // much more efficient than trying to be smart and make short lists,\r\n        // at least in the case of a hierarchy following a power law:\r\n        // http://jsperf.com/flag-nodes-in-power-hierarchy/2\r\n        parent = layers[id].__parent;\r\n        while (parent) {\r\n          parent._iconNeedsUpdate = true;\r\n          parent = parent.__parent;\r\n        }\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Refreshes the icon of all \"dirty\" visible clusters.\r\n     * Non-visible \"dirty\" clusters will be updated when they are added to the map.\r\n     * @private\r\n     */\r\n    _refreshClustersIcons: function () {\r\n      this._featureGroup.eachLayer(function (c) {\r\n        if (c instanceof L.MarkerCluster && c._iconNeedsUpdate) {\r\n          c._updateIcon();\r\n        }\r\n      });\r\n    },\r\n\r\n    /**\r\n     * Re-draws the icon of the supplied markers.\r\n     * To be used in singleMarkerMode only.\r\n     * @param layers Array(L.Marker)|Map(L.Marker) list of markers.\r\n     * @private\r\n     */\r\n    _refreshSingleMarkerModeMarkers: function (layers) {\r\n      var id, layer;\r\n\r\n      for (id in layers) {\r\n        layer = layers[id];\r\n\r\n        // Make sure we do not override markers that do not belong to THIS group.\r\n        if (this.hasLayer(layer)) {\r\n          // Need to re-create the icon first, then re-draw the marker.\r\n          layer.setIcon(this._overrideMarkerIcon(layer));\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  L.Marker.include({\r\n    /**\r\n     * Updates the given options in the marker's icon and refreshes the marker.\r\n     * @param options map object of icon options.\r\n     * @param directlyRefreshClusters boolean (optional) true to trigger\r\n     * MCG.refreshClustersOf() right away with this single marker.\r\n     * @returns {L.Marker}\r\n     */\r\n    refreshIconOptions: function (options, directlyRefreshClusters) {\r\n      var icon = this.options.icon;\r\n\r\n      L.setOptions(icon, options);\r\n\r\n      this.setIcon(icon);\r\n\r\n      // Shortcut to refresh the associated MCG clusters right away.\r\n      // To be used when refreshing a single marker.\r\n      // Otherwise, better use MCG.refreshClusters() once at the end with\r\n      // the list of modified markers.\r\n      if (directlyRefreshClusters && this.__parent) {\r\n        this.__parent._group.refreshClusters(this);\r\n      }\r\n\r\n      return this;\r\n    }\r\n  });\r\n\r\n}(window, document));\r\n\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/leaflet/MarkerCluster.js","\r\nL.NonTiledLayer = L.Layer.extend({\r\n  includes: L.Evented,\r\n  options: {\r\n    attribution: '',\r\n    opacity: 1.0,\r\n    zIndex: undefined,\r\n    minZoom: 0,\r\n    maxZoom: 18,\r\n    pointerEvents: null,\r\n    errorImageUrl: 'data:image/gif;base64,R0lGODlhAQABAHAAACH5BAUAAAAALAAAAAABAAEAAAICRAEAOw==', //1px transparent GIF\r\n    bounds: L.latLngBounds([-85.05, -180], [85.05, 180])\r\n  },\r\n  url: '',\r\n\r\n  // override this method in the inherited class\r\n  //getImageUrl: function (world1, world2, width, height) {},\r\n  //getImageUrlAsync: function (world1, world2, width, height, f) {},\r\n\r\n  initialize: function (options) {\r\n    L.setOptions(this, options);\r\n  },\r\n\r\n  onAdd: function (map) {\r\n    this._map = map;\r\n\r\n    if (!this._div) {\r\n      this._div = L.DomUtil.create('div', 'leaflet-image-layer');\r\n      if (this.options.pointerEvents) {\r\n        this._div.style['pointer-events'] = this.options.pointerEvents;\r\n      }\r\n      if (this.options.zIndex !== undefined) {\r\n        this._div.style.zIndex = this.options.zIndex;\r\n      }\r\n      if (this.options.opacity !== undefined) {\r\n        this._div.style.opacity = this.options.opacity;\r\n      }\r\n    }\r\n\r\n    this.getPane().appendChild(this._div);\r\n\r\n    this._bufferImage = this._initImage();\r\n    this._currentImage = this._initImage();\r\n\r\n    this._update();\r\n  },\r\n\r\n  onRemove: function (map) {\r\n    this.getPane().removeChild(this._div);\r\n\r\n    this._div.removeChild(this._bufferImage);\r\n    this._div.removeChild(this._currentImage);\r\n  },\r\n\r\n  addTo: function (map) {\r\n    map.addLayer(this);\r\n    return this;\r\n  },\r\n\r\n  getEvents: function () {\r\n    var events = {\r\n      moveend: this._update,\r\n      zoom: this._viewreset\r\n    };\r\n\r\n    if (this._zoomAnimated) {\r\n      events.zoomanim = this._animateZoom;\r\n    }\r\n\r\n    return events;\r\n  },\r\n\r\n  getElement: function () {\r\n    return this._div;\r\n  },\r\n\r\n  setOpacity: function (opacity) {\r\n    this.options.opacity = opacity;\r\n    if (this._div) {\r\n      L.DomUtil.setOpacity(this._div, this.options.opacity);\r\n    }\r\n    return this;\r\n  },\r\n\r\n  setZIndex: function (zIndex) {\r\n    if (zIndex) {\r\n      this.options.zIndex = zIndex;\r\n      if (this._div) {\r\n        this._div.style.zIndex = zIndex;\r\n      }\r\n    }\r\n    return this;\r\n  },\r\n\r\n  // TODO remove bringToFront/bringToBack duplication from TileLayer/Path\r\n  bringToFront: function () {\r\n    if (this._div) {\r\n      this._pane.appendChild(this._div);\r\n    }\r\n    return this;\r\n  },\r\n\r\n  bringToBack: function () {\r\n    if (this._div) {\r\n      this._pane.insertBefore(this._div, this._pane.firstChild);\r\n    }\r\n    return this;\r\n  },\r\n\r\n  getAttribution: function () {\r\n    return this.options.attribution;\r\n  },\r\n\r\n  _initImage: function (_image) {\r\n    var _image = L.DomUtil.create('img', 'leaflet-image-layer');\r\n\r\n    this._div.appendChild(_image);\r\n\r\n    if (this._map.options.zoomAnimation && L.Browser.any3d) {\r\n      L.DomUtil.addClass(_image, 'leaflet-zoom-animated');\r\n    } else {\r\n      L.DomUtil.addClass(_image, 'leaflet-zoom-hide');\r\n    }\r\n\r\n    //TODO createImage util method to remove duplication\r\n    L.extend(_image, {\r\n      galleryimg: 'no',\r\n      onselectstart: L.Util.falseFn,\r\n      onmousemove: L.Util.falseFn,\r\n      onload: L.bind(this._onImageLoad, this),\r\n      onerror: L.bind(this._onImageError, this)\r\n    });\r\n\r\n    return _image;\r\n  },\r\n\r\n  redraw: function () {\r\n    if (this._map) {\r\n      this._update();\r\n    }\r\n    return this;\r\n  },\r\n\r\n  _animateZoom: function (e) {\r\n    if (this._currentImage._bounds) {\r\n      this._animateImage(this._currentImage, e);\r\n    }\r\n    if (this._bufferImage._bounds) {\r\n      this._animateImage(this._bufferImage, e);\r\n    }\r\n  },\r\n\r\n  _animateImage: function (image, e) {\r\n    var scale  = this._map.getZoomScale(e.zoom),\r\n        offset = this._map._latLngToNewLayerPoint(image._bounds.getNorthWest(), e.zoom, e.center);\r\n\r\n    L.DomUtil.setTransform(image, offset, scale);\r\n  },\r\n\r\n  _resetImage: function (image) {\r\n    var bounds = new L.Bounds(\r\n        this._map.latLngToLayerPoint(image._bounds.getNorthWest()),\r\n        this._map.latLngToLayerPoint(image._bounds.getSouthEast())),\r\n        size   = bounds.getSize();\r\n\r\n    L.DomUtil.setPosition(image, bounds.min);\r\n\r\n    image.style.width = size.x + 'px';\r\n    image.style.height = size.y + 'px';\r\n  },\r\n\r\n  _getClippedBounds: function () {\r\n    var wgsBounds = this._map.getBounds();\r\n\r\n    // truncate bounds to valid wgs bounds\r\n    var mSouth = wgsBounds.getSouth();\r\n    var mNorth = wgsBounds.getNorth();\r\n    var mWest = wgsBounds.getWest();\r\n    var mEast = wgsBounds.getEast();\r\n\r\n    var lSouth = this.options.bounds.getSouth();\r\n    var lNorth = this.options.bounds.getNorth();\r\n    var lWest = this.options.bounds.getWest();\r\n    var lEast = this.options.bounds.getEast();\r\n\r\n    //mWest = (mWest + 180) % 360 - 180;\r\n    if (mSouth < lSouth) {\r\n      mSouth = lSouth;\r\n    }\r\n    if (mNorth > lNorth) {\r\n      mNorth = lNorth;\r\n    }\r\n    if (mWest < lWest) {\r\n      mWest = lWest;\r\n    }\r\n    if (mEast > lEast) {\r\n      mEast = lEast;\r\n    }\r\n\r\n    var world1 = new L.LatLng(mNorth, mWest);\r\n    var world2 = new L.LatLng(mSouth, mEast);\r\n\r\n    return new L.LatLngBounds(world1, world2);\r\n  },\r\n\r\n  _viewreset: function () {\r\n    if (this._bufferImage._bounds) {\r\n      this._resetImage(this._bufferImage);\r\n    }\r\n    if (this._currentImage._bounds) {\r\n      this._resetImage(this._currentImage);\r\n    }\r\n  },\r\n\r\n  _update: function () {\r\n    if (this._map.getZoom() < this.options.minZoom ||\r\n        this._map.getZoom() > this.options.maxZoom) {\r\n      this._div.style.visibility = 'hidden';\r\n      return;\r\n    }\r\n    else {\r\n      this._div.style.visibility = 'visible';\r\n    }\r\n\r\n    if (this._bufferImage._bounds) {\r\n      this._resetImage(this._bufferImage);\r\n    }\r\n\r\n    var bounds = this._getClippedBounds();\r\n\r\n    // re-project to corresponding pixel bounds\r\n    var pix1 = this._map.latLngToContainerPoint(bounds.getNorthWest());\r\n    var pix2 = this._map.latLngToContainerPoint(bounds.getSouthEast());\r\n\r\n    // get pixel size\r\n    var width = pix2.x - pix1.x;\r\n    var height = pix2.y - pix1.y;\r\n\r\n    // resulting image is too small\r\n    if (width < 32 || height < 32) {\r\n      return;\r\n    }\r\n\r\n    this._currentImage._bounds = bounds;\r\n\r\n    this._resetImage(this._currentImage);\r\n\r\n    var i = this._currentImage;\r\n    if (this.getImageUrl) {\r\n      i.src = this.getImageUrl(bounds.getNorthWest(), bounds.getSouthEast(), width, height);\r\n    } else {\r\n      this.getImageUrlAsync(bounds.getNorthWest(), bounds.getSouthEast(), width, height, function (url, tag) {\r\n        i.src = url;\r\n        i.tag = tag;\r\n      });\r\n    }\r\n\r\n    this.url = i.src;\r\n\r\n    L.DomUtil.setOpacity(this._currentImage, 0);\r\n  },\r\n  _onImageError: function (e) {\r\n    this.fire('error', e);\r\n    L.DomUtil.addClass(e.target, 'invalid');\r\n    if (e.target.src !== this.options.errorImageUrl) { // prevent error loop if error image is not valid\r\n      e.target.src = this.options.errorImageUrl;\r\n      this._onImageDone(false, e);\r\n    }\r\n  },\r\n  _onImageLoad: function (e) {\r\n    if (e.target.src !== this.options.errorImageUrl) {\r\n      L.DomUtil.removeClass(e.target, 'invalid');\r\n      if (e.target.src !== this.url) { // obsolete image\r\n        return;\r\n      }\r\n      this._onImageDone(true, e);\r\n    }\r\n  },\r\n  _onImageDone: function (success, e) {\r\n    L.DomUtil.setOpacity(this._currentImage, 1);\r\n    L.DomUtil.setOpacity(this._bufferImage, 0);\r\n\r\n    if (this._addInteraction) {\r\n      this._addInteraction(this._currentImage.tag);\r\n    }\r\n\r\n    var tmp = this._bufferImage;\r\n    this._bufferImage = this._currentImage;\r\n    this._currentImage = tmp;\r\n    this.fire('load', e);\r\n  }\r\n});\r\n\r\nL.nonTiledLayer = function () {\r\n  return new L.NonTiledLayer();\r\n};\r\n\r\n/*\r\n * L.NonTiledLayer.WMS is used for putting WMS non tiled layers on the map.\r\n */\r\nL.NonTiledLayer.WMS = L.NonTiledLayer.extend({\r\n\r\n  defaultWmsParams: {\r\n    service: 'WMS',\r\n    request: 'GetMap',\r\n    version: '1.1.1',\r\n    layers: '',\r\n    styles: '',\r\n    format: 'image/jpeg',\r\n    transparent: false\r\n  },\r\n\r\n  options: {\r\n    crs: null,\r\n    uppercase: false\r\n  },\r\n\r\n  initialize: function (url, options) { // (String, Object)\r\n    this._wmsUrl = url;\r\n\r\n    var wmsParams = L.extend({}, this.defaultWmsParams);\r\n\r\n    // all keys that are not NonTiledLayer options go to WMS params\r\n    for (var i in options) {\r\n      if (!L.NonTiledLayer.prototype.options.hasOwnProperty(i) && !L.Layer.prototype.options.hasOwnProperty(i)) {\r\n        wmsParams[i] = options[i];\r\n      }\r\n    }\r\n\r\n    this.wmsParams = wmsParams;\r\n\r\n    L.setOptions(this, options);\r\n  },\r\n\r\n  onAdd: function (map) {\r\n\r\n    this._crs = this.options.crs || map.options.crs;\r\n    this._wmsVersion = parseFloat(this.wmsParams.version);\r\n\r\n    var projectionKey = this._wmsVersion >= 1.3 ? 'crs' : 'srs';\r\n    this.wmsParams[projectionKey] = this._crs.code;\r\n\r\n    L.NonTiledLayer.prototype.onAdd.call(this, map);\r\n  },\r\n\r\n  getImageUrl: function (world1, world2, width, height) {\r\n    var wmsParams = this.wmsParams;\r\n    wmsParams.width = width;\r\n    wmsParams.height = height;\r\n\r\n    var nw = this._crs.project(world1);\r\n    var se = this._crs.project(world2);\r\n\r\n    var url = this._wmsUrl;\r\n\r\n    var bbox = bbox = (this._wmsVersion >= 1.3 && this._crs === L.CRS.EPSG4326 ?\r\n        [se.y, nw.x, nw.y, se.x] :\r\n        [nw.x, se.y, se.x, nw.y]).join(',');\r\n\r\n    return url +\r\n        L.Util.getParamString(this.wmsParams, url, this.options.uppercase) +\r\n        (this.options.uppercase ? '&BBOX=' : '&bbox=') + bbox;\r\n  },\r\n\r\n  setParams: function (params, noRedraw) {\r\n\r\n    L.extend(this.wmsParams, params);\r\n\r\n    if (!noRedraw) {\r\n      this.redraw();\r\n    }\r\n\r\n    return this;\r\n  }\r\n});\r\n\r\nL.nonTiledLayer.wms = function (url, options) {\r\n  return new L.NonTiledLayer.WMS(url, options);\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/leaflet/NonTiledLayer.js","if (!Array.prototype.find) {\r\n  Object.defineProperty(Array.prototype, 'find', {\r\n    value: function(predicate) {\r\n      'use strict';\r\n      if (this == null) {\r\n        throw new TypeError('Array.prototype.find called on null or undefined');\r\n      }\r\n      if (typeof predicate !== 'function') {\r\n        throw new TypeError('predicate must be a function');\r\n      }\r\n      var list = Object(this);\r\n      var length = list.length >>> 0;\r\n      var thisArg = arguments[1];\r\n\r\n      for (var i = 0; i !== length; i++) {\r\n        if (predicate.call(thisArg, this[i], i, list)) {\r\n          return this[i];\r\n        }\r\n      }\r\n      return undefined;\r\n    }\r\n  });\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/polyfill/find.js","if (!Array.prototype.findIndex) {\r\n  Object.defineProperty(Array.prototype, 'findIndex', {\r\n    value: function(predicate) {\r\n      // 1. Let O be ? ToObject(this value).\r\n      if (this == null) {\r\n        throw new TypeError('\"this\" is null or not defined');\r\n      }\r\n\r\n      var o = Object(this);\r\n\r\n      // 2. Let len be ? ToLength(? Get(O, \"length\")).\r\n      var len = o.length >>> 0;\r\n\r\n      // 3. If IsCallable(predicate) is false, throw a TypeError exception.\r\n      if (typeof predicate !== 'function') {\r\n        throw new TypeError('predicate must be a function');\r\n      }\r\n\r\n      // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\r\n      var thisArg = arguments[1];\r\n\r\n      // 5. Let k be 0.\r\n      var k = 0;\r\n\r\n      // 6. Repeat, while k < len\r\n      while (k < len) {\r\n        // a. Let Pk be ! ToString(k).\r\n        // b. Let kValue be ? Get(O, Pk).\r\n        // c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\r\n        // d. If testResult is true, return k.\r\n        var kValue = o[k];\r\n        if (predicate.call(thisArg, kValue, k, o)) {\r\n          return k;\r\n        }\r\n        // e. Increase k by 1.\r\n        k++;\r\n      }\r\n\r\n      // 7. Return -1.\r\n      return -1;\r\n    }\r\n  });\r\n}\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/polyfill/findIndex.js","if (!String.prototype.startsWith) {\r\n  String.prototype.startsWith = function(searchString, position) {\r\n    return this.substr(position || 0, searchString.length) === searchString\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/polyfill/startsWith.js","\r\nimport axios from 'axios'\r\nimport globals from '../globals'\r\n\r\nexport default function getEnti () {\r\n  let url = `${window.location.href.split(':')[0]}://${globals.RL_ENTI_SERVICE}`\r\n\r\n  return axios.get(url).then(response => response.data.data)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/services/getEnti.js","\r\nimport axios from 'axios'\r\nimport globals from '../globals'\r\n\r\nfunction buildWFSUrl (feature) {\r\n  const layerConfig = feature.layer.config\r\n  const wsName = `M${layerConfig.idMap}`\r\n  const baseUrl = globals.DEFAULT_PROXY + layerConfig.wfsParams.url.replace(`/${wsName}`, '') + 'service=WFS&version=2.0.0&request=GetFeature&srsName=EPSG%3A4326&outputFormat=application%2Fjson'\r\n  const idAttr = (layerConfig.cachePostGIS)? layerConfig.infoOptions.infoIdAttr.toLowerCase() : layerConfig.infoOptions.infoIdAttr\r\n\r\n  return `${baseUrl}&typeName=${wsName}:${layerConfig.wfsParams.typeName}&cql_filter=${idAttr}=${feature.properties[layerConfig.infoOptions.infoIdAttr]}`\r\n}\r\n\r\nexport default function getFeatureHilite (feature) {\r\n  const url = buildWFSUrl(feature)\r\n  let params = {}\r\n\r\n  return axios.get(url, {\r\n    params: params\r\n  }).then(response => response.data.features)\r\n}\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/services/getFeatureHilite.js","\r\nimport axios from 'axios'\r\n\r\nexport default function getFeatureInfo(url) {\r\n  let params = {}\r\n\r\n  return axios.get(url, {\r\n    params: params\r\n  }).then(response => response.data.features)\r\n}\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/services/getFeatureInfo.js","\r\nimport axios from 'axios'\r\nimport parseXML from '../util/parseXML'\r\n\r\nexport default function getFeatureXSLT (infoUrl, data) {\r\n  return axios.get('/geoservices/REST/config/xsl_info_service?', {\r\n    headers: {\r\n      'Accept': 'text/xml'\r\n    },\r\n\r\n    params: {\r\n      xslUrl: infoUrl,\r\n      ambiente: null,\r\n      idLayer: data.layerName.replace('L', ''),\r\n      featureAttributes: data.properties\r\n    }\r\n  }).then(response => response.data).then(data => parseXML(data))\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/services/getFeatureXSLT.js","\r\nimport axios from 'axios'\r\n// import config from '../config'\r\nimport * as config from '../config'\r\nimport globals from '../globals'\r\n\r\nexport default function getConfig (url) {\r\n  let params = {}\r\n\r\n  return axios.get(url, {\r\n    params: params\r\n  })\r\n}\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/services/getGeoJSON.js","\r\nexport default function (options) {\r\n  let elType = options.elType || 'div'\r\n  let containerId = options.containerId || 'gv-container'\r\n  let elId = options.elId\r\n  let clear = options.clear\r\n\r\n  if (clear && document.getElementById(elId)) {\r\n    document.getElementById(elId).remove()\r\n  }\r\n\r\n  const el = document.createElement(elType)\r\n  el.id = elId\r\n  if (document.getElementById(containerId)) {\r\n    document.getElementById(containerId).appendChild(el)\r\n  } else {\r\n    console.log(`Elemento ${containerId} non trovato faccio mount su body`)\r\n    document.body.appendChild(el)\r\n  }\r\n\r\n  return el\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/util/createElement.js","export default function getProtocol() {\r\n  'use strict'\r\n  return window.location.href.split(':')[0]\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/util/getProtocol.js","export default function getTmsMaxLevel (maxScale) {\r\n  let maxLevel = 12\r\n  if (maxScale <= 2000 || maxScale == null) {\r\n    maxLevel = 17\r\n  }\r\n  if (maxScale > 2000 && maxScale <= 6250) {\r\n    maxLevel = 16\r\n  }\r\n  if (maxScale > 6250 && maxScale <= 12500) {\r\n    maxLevel = 15\r\n  }\r\n  if (maxScale > 12500 && maxScale <= 25000) {\r\n    maxLevel = 14\r\n  }\r\n  if (maxScale > 25000 && maxScale <= 50000) {\r\n    maxLevel = 13\r\n  }\r\n  return maxLevel\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/util/getTmsMaxLevel.js","export default function getUrlParam (paramName) {\r\n  var results = new RegExp('[\\\\?&]' + paramName + '=([^&#]*)').exec(window.location.href)\r\n  return results ? decodeURIComponent(results[1]) : null\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/util/getUrlParam.js","import globals from '../globals'\r\n\r\nexport default function getZoomFromScaleDenom (scaleDenom) {\r\n  const zoom = globals.BASE_SCALES.findIndex(function (scale) {\r\n    return scaleDenom > scale\r\n  })\r\n  return zoom - 1\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/util/getZoomFromScaleDenom.js","export default function (str, data) {\r\n  var templateRe = /\\{ *([\\w_\\-]+) *\\}/g\r\n  return str.replace(templateRe, function (str, key) {\r\n    var value = data[key]\r\n\r\n    if (value === undefined) {\r\n      throw new Error('No value provided for variable ' + str)\r\n    } else if (typeof value === 'function') {\r\n      value = value(data)\r\n    }\r\n    return value\r\n  })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/util/interpolateString.js","export default function isBrowserIE() {\r\n  return navigator.userAgent.indexOf('MSIE ') > 0 ||\r\n    navigator.userAgent.indexOf('Trident') > 0 ||\r\n    navigator.userAgent.indexOf('Edge') > 0\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/util/isBrowserIE.js","export default function isTouch () {\r\n  return window.matchMedia('(pointer: coarse)').matches\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/util/isTouch.js","export default function log (msg) {\r\n  if (GV.config.debug) {\r\n    console.log(msg)\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./E:/Tomcat6/webapps/ROOT/geoviewer2/src/util/log.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!./../../vue-style-loader/index.js!./../../css-loader/index.js?sourceMap!./font-awesome.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!./../../vue-style-loader/index.js!./../../css-loader/index.js?sourceMap!./font-awesome.css\", function() {\n\t\t\tvar newContent = require(\"!!./../../extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!./../../vue-style-loader/index.js!./../../css-loader/index.js?sourceMap!./font-awesome.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/style-loader!./~/font-awesome/css/font-awesome.css\n// module id = 318\n// module chunks = 13","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!./../../vue-style-loader/index.js!./../../css-loader/index.js?sourceMap!./leaflet.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!./../../vue-style-loader/index.js!./../../css-loader/index.js?sourceMap!./leaflet.css\", function() {\n\t\t\tvar newContent = require(\"!!./../../extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!./../../vue-style-loader/index.js!./../../css-loader/index.js?sourceMap!./leaflet.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/style-loader!./~/leaflet/dist/leaflet.css\n// module id = 319\n// module chunks = 13","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!./../../../node_modules/vue-style-loader/index.js!./../../../node_modules/css-loader/index.js?sourceMap!./base.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!./../../../node_modules/vue-style-loader/index.js!./../../../node_modules/css-loader/index.js?sourceMap!./base.css\", function() {\n\t\t\tvar newContent = require(\"!!./../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!./../../../node_modules/vue-style-loader/index.js!./../../../node_modules/css-loader/index.js?sourceMap!./base.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/style-loader!./src/assets/css/base.css\n// module id = 320\n// module chunks = 13","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!./../../../../../node_modules/vue-style-loader/index.js!./../../../../../node_modules/css-loader/index.js?sourceMap!./mapskin.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!./../../../../../node_modules/vue-style-loader/index.js!./../../../../../node_modules/css-loader/index.js?sourceMap!./mapskin.css\", function() {\n\t\t\tvar newContent = require(\"!!./../../../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!./../../../../../node_modules/vue-style-loader/index.js!./../../../../../node_modules/css-loader/index.js?sourceMap!./mapskin.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/style-loader!./src/assets/css/mapskin/css/mapskin.css\n// module id = 321\n// module chunks = 13","var __vue_exports__, __vue_options__\nvar __vue_styles__ = {}\n\n/* styles */\nrequire(\"!!./../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!vue-loader/lib/style-rewriter?id=data-v-42223222!vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n\n/* script */\n__vue_exports__ = require(\"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./App.vue\")\n\n/* template */\nvar __vue_template__ = require(\"!!vue-loader/lib/template-compiler?id=data-v-42223222!vue-loader/lib/selector?type=template&index=0!./App.vue\")\n__vue_options__ = __vue_exports__ = __vue_exports__ || {}\nif (\n  typeof __vue_exports__.default === \"object\" ||\n  typeof __vue_exports__.default === \"function\"\n) {\n__vue_options__ = __vue_exports__ = __vue_exports__.default\n}\nif (typeof __vue_options__ === \"function\") {\n  __vue_options__ = __vue_options__.options\n}\n\n__vue_options__.render = __vue_template__.render\n__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\nmodule.exports = __vue_exports__\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/App.vue\n// module id = 327\n// module chunks = 13","var __vue_exports__, __vue_options__\nvar __vue_styles__ = {}\n\n/* styles */\nrequire(\"!!./../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!vue-loader/lib/style-rewriter?id=data-v-3f78502f&scoped=true!vue-loader/lib/selector?type=styles&index=0!./Header.vue\")\n\n/* script */\n__vue_exports__ = require(\"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./Header.vue\")\n\n/* template */\nvar __vue_template__ = require(\"!!vue-loader/lib/template-compiler?id=data-v-3f78502f!vue-loader/lib/selector?type=template&index=0!./Header.vue\")\n__vue_options__ = __vue_exports__ = __vue_exports__ || {}\nif (\n  typeof __vue_exports__.default === \"object\" ||\n  typeof __vue_exports__.default === \"function\"\n) {\n__vue_options__ = __vue_exports__ = __vue_exports__.default\n}\nif (typeof __vue_options__ === \"function\") {\n  __vue_options__ = __vue_options__.options\n}\n\n__vue_options__.render = __vue_template__.render\n__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n__vue_options__._scopeId = \"data-v-3f78502f\"\n\nmodule.exports = __vue_exports__\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Header.vue\n// module id = 329\n// module chunks = 13","var __vue_exports__, __vue_options__\nvar __vue_styles__ = {}\n\n/* styles */\nrequire(\"!!./../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!vue-loader/lib/style-rewriter?id=data-v-793c9ca2!vue-loader/lib/selector?type=styles&index=0!./Legend.vue\")\n\n/* script */\n__vue_exports__ = require(\"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./Legend.vue\")\n\n/* template */\nvar __vue_template__ = require(\"!!vue-loader/lib/template-compiler?id=data-v-793c9ca2!vue-loader/lib/selector?type=template&index=0!./Legend.vue\")\n__vue_options__ = __vue_exports__ = __vue_exports__ || {}\nif (\n  typeof __vue_exports__.default === \"object\" ||\n  typeof __vue_exports__.default === \"function\"\n) {\n__vue_options__ = __vue_exports__ = __vue_exports__.default\n}\nif (typeof __vue_options__ === \"function\") {\n  __vue_options__ = __vue_options__.options\n}\n\n__vue_options__.render = __vue_template__.render\n__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\nmodule.exports = __vue_exports__\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Legend.vue\n// module id = 334\n// module chunks = 13","var __vue_exports__, __vue_options__\nvar __vue_styles__ = {}\n\n/* styles */\nrequire(\"!!./../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!vue-loader/lib/style-rewriter?id=data-v-4020fcaa&scoped=true!vue-loader/lib/selector?type=styles&index=0!./Map.vue\")\n\n/* script */\n__vue_exports__ = require(\"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./Map.vue\")\n\n/* template */\nvar __vue_template__ = require(\"!!vue-loader/lib/template-compiler?id=data-v-4020fcaa!vue-loader/lib/selector?type=template&index=0!./Map.vue\")\n__vue_options__ = __vue_exports__ = __vue_exports__ || {}\nif (\n  typeof __vue_exports__.default === \"object\" ||\n  typeof __vue_exports__.default === \"function\"\n) {\n__vue_options__ = __vue_exports__ = __vue_exports__.default\n}\nif (typeof __vue_options__ === \"function\") {\n  __vue_options__ = __vue_options__.options\n}\n\n__vue_options__.render = __vue_template__.render\n__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n__vue_options__._scopeId = \"data-v-4020fcaa\"\n\nmodule.exports = __vue_exports__\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Map.vue\n// module id = 335\n// module chunks = 13","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;\n  return _vm._c('div', {\n    style: (_vm.style),\n    attrs: {\n      \"id\": \"gv-header\"\n    }\n  }, [_vm._t(\"default\")], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-3f78502f!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Header.vue\n// module id = 343\n// module chunks = 13","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;\n  return _vm._c('div', {\n    style: (_vm.style),\n    attrs: {\n      \"id\": \"gv-map\"\n    }\n  }, [_vm._c('gv-info-wms-manager', {\n    ref: \"info\"\n  })], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-4020fcaa!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Map.vue\n// module id = 344\n// module chunks = 13","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;\n  return _vm._c('div', {\n    attrs: {\n      \"id\": \"gv-container\"\n    }\n  }, [(_vm.showHeader) ? _vm._c('gv-header') : _vm._e(), _vm._v(\" \"), _vm._c('gv-map', {\n    ref: \"gv-map\"\n  }), _vm._v(\" \"), _vm._c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.showTitle),\n      expression: \"showTitle\"\n    }],\n    staticClass: \"gv-color-scheme\",\n    attrs: {\n      \"id\": \"gv-title\"\n    }\n  }, [_vm._v(_vm._s(this.getTitle()))]), _vm._v(\" \"), (_vm.showLegend) ? _vm._c('gv-legend', {\n    ref: \"gv-legend\"\n  }) : _vm._e()], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-42223222!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/App.vue\n// module id = 345\n// module chunks = 13","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;\n  return _vm._c(\"div\")\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-71709b00!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/InfoWmsManager.vue\n// module id = 351\n// module chunks = 13","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;\n  return _vm._c('div', {\n    staticClass: \"gv-inverted-color-scheme\",\n    attrs: {\n      \"id\": \"gv-legend\"\n    }\n  }, [_vm._c('div', {\n    staticClass: \"gv-legend-title gv-color-scheme\"\n  }, [_vm._c('b', [_vm._v(\"LEGENDA\")]), _vm._v(\" \"), _vm._c('button', {\n    staticClass: \"gv-legend-close\",\n    attrs: {\n      \"type\": \"button\"\n    },\n    on: {\n      \"click\": _vm.hideLegend\n    }\n  }, [_vm._v(\"×\")]), _vm._v(\" \"), _vm._c('el-button', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.options.showAddMap),\n      expression: \"options.showAddMap\"\n    }],\n    staticClass: \"gv-inverted-color-scheme gv-legend-buttons ms ms-layers-add\",\n    attrs: {\n      \"title\": \"Aggiungi Mappe\",\n      \"type\": \"primary\",\n      \"size\": \"mini\"\n    },\n    on: {\n      \"click\": _vm.addMap\n    }\n  })], 1), _vm._v(\" \"), _vm._c('div', {\n    staticClass: \"gv-legend-wrapper\",\n    attrs: {\n      \"id\": \"gv-legend-wrapper\"\n    }\n  }, [_vm._c('div', {\n    attrs: {\n      \"id\": \"gv-legend-body\"\n    }\n  }, _vm._l((_vm.maps), function(map) {\n    return _vm._c('ul', {\n      key: map.id,\n      staticClass: \"gv-list-group\"\n    }, [_vm._c('div', {\n      staticClass: \"gv-list-legend-map-item gv-inverted-color-scheme\"\n    }, [_vm._c('li', [_vm._v(\"\\n                        \" + _vm._s(map.name) + \"\\n                    \")]), _vm._v(\" \"), _vm._c('div', {\n      staticClass: \"gv-legend-map-tools gv-inverted-color-scheme\"\n    }, [(_vm.checkAddMap(map)) ? _vm._c('el-button', {\n      staticClass: \"gv-legend-map-tools-add fa fa-file-text-o\",\n      attrs: {\n        \"title\": \"Visualizza scheda\",\n        \"type\": \"primary\",\n        \"size\": \"mini\"\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.showMapInfoPanel(map)\n        }\n      }\n    }) : _vm._e(), _vm._v(\" \"), (_vm.isDownloadable(map)) ? _vm._c('el-button', {\n      staticClass: \"gv-button-download fa fa-download\",\n      attrs: {\n        \"title\": \"Download\",\n        \"type\": \"primary\",\n        \"size\": \"mini\"\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.download(map)\n        }\n      }\n    }) : _vm._e(), _vm._v(\" \"), _vm._c('el-button', {\n      staticClass: \"gv-legend-map-tools-add fa fa-trash\",\n      attrs: {\n        \"title\": \"Cancella\",\n        \"type\": \"primary\",\n        \"size\": \"mini\"\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.remove(map)\n        }\n      }\n    }), _vm._v(\" \"), _vm._c('el-button', {\n      staticClass: \"gv-legend-map-tools-add ms ms-transparency\",\n      attrs: {\n        \"title\": \"Trasparenza Livelli\",\n        \"type\": \"primary\",\n        \"size\": \"mini\"\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.layerTransparency(map)\n        }\n      }\n    })], 1)]), _vm._v(\" \"), _vm._c('ul', {\n      staticClass: \"gv-list-group\"\n    }, _vm._l((map.layers), function(layer) {\n      return _vm._c('li', {\n        key: layer.id,\n        class: _vm.getClass(layer),\n        attrs: {\n          \"layer\": layer\n        }\n      }, [_vm._c('img', {\n        staticClass: \"gv-legend-layer-icon\",\n        attrs: {\n          \"src\": _vm.iconUrl(layer)\n        },\n        on: {\n          \"click\": function($event) {\n            _vm.showLegendPanel(layer)\n          }\n        }\n      }), _vm._v(\" \"), _vm._c('span', {\n        staticClass: \"gv-layer-visibility-span\"\n      }, [_vm._c('input', {\n        directives: [{\n          name: \"model\",\n          rawName: \"v-model\",\n          value: (layer.visible),\n          expression: \"layer.visible\"\n        }],\n        staticClass: \"gv-layer-visibility-cb\",\n        attrs: {\n          \"type\": \"checkbox\"\n        },\n        domProps: {\n          \"checked\": Array.isArray(layer.visible) ? _vm._i(layer.visible, null) > -1 : (layer.visible)\n        },\n        on: {\n          \"click\": function($event) {\n            _vm.setLayerVisible(layer, $event)\n          },\n          \"change\": function($event) {\n            var $$a = layer.visible,\n              $$el = $event.target,\n              $$c = $$el.checked ? (true) : (false);\n            if (Array.isArray($$a)) {\n              var $$v = null,\n                $$i = _vm._i($$a, $$v);\n              if ($$el.checked) {\n                $$i < 0 && (layer.visible = $$a.concat([$$v]))\n              } else {\n                $$i > -1 && (layer.visible = $$a.slice(0, $$i).concat($$a.slice($$i + 1)))\n              }\n            } else {\n              _vm.$set(layer, \"visible\", $$c)\n            }\n          }\n        }\n      })]), _vm._v(\" \"), _vm._c('span', {\n        staticClass: \"gv-layer-title-span\"\n      }, [_vm._v(_vm._s(layer.legend.label))])])\n    }))])\n  })), _vm._v(\" \"), _vm._c('div', {\n    staticClass: \"gv-legend-footer gv-inverted-color-scheme\"\n  }, [_vm._c('gv-base-layer-switcher', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.options.showBaseLayerSwitcher),\n      expression: \"options.showBaseLayerSwitcher\"\n    }],\n    ref: \"gv-base-layer-switcher\"\n  })], 1)])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-793c9ca2!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Legend.vue\n// module id = 352\n// module chunks = 13","var map = {\n\t\"./div.js\": 174,\n\t\"./fullscreen.js\": 175,\n\t\"./geocoder.js\": 176,\n\t\"./locate.js\": 177,\n\t\"./scalebar.js\": 178,\n\t\"./search.js\": 179,\n\t\"./zoom.js\": 180\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\treturn map[req] || (function() { throw new Error(\"Cannot find module '\" + req + \"'.\") }());\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 355;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/buttons ^(.*\\.(js$))[^.]*$/gi\n// module id = 355\n// module chunks = 13"],"sourceRoot":""}