/*
 * jQuery JavaScript Library v1.11.1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-05-01T17:42Z
 */
(function(b,a){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=b.document?a(b,true):function(c){if(!c.document){throw new Error("jQuery requires a window with a document")}return a(c)}}else{a(b)}}(typeof window!=="undefined"?window:this,function(a5,av){var aP=[];var P=aP.slice;var az=aP.concat;var w=aP.push;var bU=aP.indexOf;var ac={};var x=ac.toString;var J=ac.hasOwnProperty;var C={};var ai="1.11.1",bI=function(e,b6){return new bI.fn.init(e,b6)},D=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,bS=/^-ms-/,aW=/-([\da-z])/gi,O=function(e,b6){return b6.toUpperCase()};bI.fn=bI.prototype={jquery:ai,constructor:bI,selector:"",length:0,toArray:function(){return P.call(this)},get:function(e){return e!=null?(e<0?this[e+this.length]:this[e]):P.call(this)},pushStack:function(e){var b6=bI.merge(this.constructor(),e);b6.prevObject=this;b6.context=this.context;return b6},each:function(b6,e){return bI.each(this,b6,e)},map:function(e){return this.pushStack(bI.map(this,function(b7,b6){return e.call(b7,b6,b7)}))},slice:function(){return this.pushStack(P.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(b7){var e=this.length,b6=+b7+(b7<0?e:0);return this.pushStack(b6>=0&&b6<e?[this[b6]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:w,sort:aP.sort,splice:aP.splice};bI.extend=bI.fn.extend=function(){var e,cb,b6,b7,ce,cc,ca=arguments[0]||{},b9=1,b8=arguments.length,cd=false;if(typeof ca==="boolean"){cd=ca;ca=arguments[b9]||{};b9++}if(typeof ca!=="object"&&!bI.isFunction(ca)){ca={}}if(b9===b8){ca=this;b9--}for(;b9<b8;b9++){if((ce=arguments[b9])!=null){for(b7 in ce){e=ca[b7];b6=ce[b7];if(ca===b6){continue}if(cd&&b6&&(bI.isPlainObject(b6)||(cb=bI.isArray(b6)))){if(cb){cb=false;cc=e&&bI.isArray(e)?e:[]}else{cc=e&&bI.isPlainObject(e)?e:{}}ca[b7]=bI.extend(cd,cc,b6)}else{if(b6!==undefined){ca[b7]=b6}}}}}return ca};bI.extend({expando:"jQuery"+(ai+Math.random()).replace(/\D/g,""),isReady:true,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return bI.type(e)==="function"},isArray:Array.isArray||function(e){return bI.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return !bI.isArray(e)&&e-parseFloat(e)>=0},isEmptyObject:function(b6){var e;for(e in b6){return false}return true},isPlainObject:function(b8){var b6;if(!b8||bI.type(b8)!=="object"||b8.nodeType||bI.isWindow(b8)){return false}try{if(b8.constructor&&!J.call(b8,"constructor")&&!J.call(b8.constructor.prototype,"isPrototypeOf")){return false}}catch(b7){return false}if(C.ownLast){for(b6 in b8){return J.call(b8,b6)}}for(b6 in b8){}return b6===undefined||J.call(b8,b6)},type:function(e){if(e==null){return e+""}return typeof e==="object"||typeof e==="function"?ac[x.call(e)]||"object":typeof e},globalEval:function(e){if(e&&bI.trim(e)){(a5.execScript||function(b6){a5["eval"].call(a5,b6)})(e)}},camelCase:function(e){return e.replace(bS,"ms-").replace(aW,O)},nodeName:function(b6,e){return b6.nodeName&&b6.nodeName.toLowerCase()===e.toLowerCase()},each:function(ca,cb,b6){var b9,b7=0,b8=ca.length,e=ad(ca);if(b6){if(e){for(;b7<b8;b7++){b9=cb.apply(ca[b7],b6);if(b9===false){break}}}else{for(b7 in ca){b9=cb.apply(ca[b7],b6);if(b9===false){break}}}}else{if(e){for(;b7<b8;b7++){b9=cb.call(ca[b7],b7,ca[b7]);if(b9===false){break}}}else{for(b7 in ca){b9=cb.call(ca[b7],b7,ca[b7]);if(b9===false){break}}}}return ca},trim:function(e){return e==null?"":(e+"").replace(D,"")},makeArray:function(e,b7){var b6=b7||[];if(e!=null){if(ad(Object(e))){bI.merge(b6,typeof e==="string"?[e]:e)}else{w.call(b6,e)}}return b6},inArray:function(b8,b6,b7){var e;if(b6){if(bU){return bU.call(b6,b8,b7)}e=b6.length;b7=b7?b7<0?Math.max(0,e+b7):b7:0;for(;b7<e;b7++){if(b7 in b6&&b6[b7]===b8){return b7}}}return -1},merge:function(b9,b7){var e=+b7.length,b6=0,b8=b9.length;while(b6<e){b9[b8++]=b7[b6++]}if(e!==e){while(b7[b6]!==undefined){b9[b8++]=b7[b6++]}}b9.length=b8;return b9},grep:function(e,cc,b9){var cb,b8=[],b6=0,b7=e.length,ca=!b9;for(;b6<b7;b6++){cb=!cc(e[b6],b6);if(cb!==ca){b8.push(e[b6])}}return b8},map:function(b7,cc,e){var cb,b9=0,ca=b7.length,b6=ad(b7),b8=[];if(b6){for(;b9<ca;b9++){cb=cc(b7[b9],b9,e);if(cb!=null){b8.push(cb)}}}else{for(b9 in b7){cb=cc(b7[b9],b9,e);if(cb!=null){b8.push(cb)}}}return az.apply([],b8)},guid:1,proxy:function(b9,b8){var e,b7,b6;if(typeof b8==="string"){b6=b9[b8];b8=b9;b9=b6}if(!bI.isFunction(b9)){return undefined}e=P.call(arguments,2);b7=function(){return b9.apply(b8||this,e.concat(P.call(arguments)))};b7.guid=b9.guid=b9.guid||bI.guid++;return b7},now:function(){return +(new Date())},support:C});bI.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(b6,e){ac["[object "+e+"]"]=e.toLowerCase()});function ad(b7){var b6=b7.length,e=bI.type(b7);if(e==="function"||bI.isWindow(b7)){return false}if(b7.nodeType===1&&b6){return true}return e==="array"||b6===0||typeof b6==="number"&&b6>0&&(b6-1) in b7}var m=
/*
 * Sizzle CSS Selector Engine v1.10.19
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-04-18
 */
(function(de){var cx,dh,cn,cG,cJ,ch,cV,dg,dl,cH,cW,cY,cB,co,c7,c2,df,ce,cE,c9="sizzle"+-(new Date()),cI=de.document,di=0,c3=0,b9=cz(),c8=cz(),cF=cz(),cD=function(dm,e){if(dm===e){cW=true}return 0},dd=typeof undefined,cP=1<<31,cN=({}).hasOwnProperty,db=[],dc=db.pop,cL=db.push,b7=db.push,cm=db.slice,cd=db.indexOf||function(dn){var dm=0,e=this.length;for(;dm<e;dm++){if(this[dm]===dn){return dm}}return -1},b8="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",cp="[\\x20\\t\\r\\n\\f]",b6="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",cK=b6.replace("w","w#"),c5="\\["+cp+"*("+b6+")(?:"+cp+"*([*^$|!~]?=)"+cp+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+cK+"))|)"+cp+"*\\]",ck=":("+b6+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+c5+")*)|.*)\\)|)",cr=new RegExp("^"+cp+"+|((?:^|[^\\\\])(?:\\\\.)*)"+cp+"+$","g"),cu=new RegExp("^"+cp+"*,"+cp+"*"),cA=new RegExp("^"+cp+"*([>+~]|"+cp+")"+cp+"*"),ct=new RegExp("="+cp+"*([^\\]'\"]*?)"+cp+"*\\]","g"),cR=new RegExp(ck),cT=new RegExp("^"+cK+"$"),c1={ID:new RegExp("^#("+b6+")"),CLASS:new RegExp("^\\.("+b6+")"),TAG:new RegExp("^("+b6.replace("w","w*")+")"),ATTR:new RegExp("^"+c5),PSEUDO:new RegExp("^"+ck),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+cp+"*(even|odd|(([+-]|)(\\d*)n|)"+cp+"*(?:([+-]|)"+cp+"*(\\d+)|))"+cp+"*\\)|)","i"),bool:new RegExp("^(?:"+b8+")$","i"),needsContext:new RegExp("^"+cp+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+cp+"*((?:-\\d)?\\d*)"+cp+"*\\)|)(?=[^-]|$)","i")},cc=/^(?:input|select|textarea|button)$/i,cl=/^h\d$/i,cO=/^[^{]+\{\s*\[native \w/,cQ=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,c0=/[+~]/,cM=/'|\\/g,cs=new RegExp("\\\\([\\da-f]{1,6}"+cp+"?|("+cp+")|.)","ig"),c4=function(e,dp,dm){var dn="0x"+dp-65536;return dn!==dn||dm?dp:dn<0?String.fromCharCode(dn+65536):String.fromCharCode(dn>>10|55296,dn&1023|56320)};try{b7.apply((db=cm.call(cI.childNodes)),cI.childNodes);db[cI.childNodes.length].nodeType}catch(cC){b7={apply:db.length?function(dm,e){cL.apply(dm,cm.call(e))}:function(dp,dn){var e=dp.length,dm=0;while((dp[e++]=dn[dm++])){}dp.length=e-1}}}function cv(du,dm,dy,dA){var dz,dr,ds,dw,dx,dq,dp,e,dn,dv;if((dm?dm.ownerDocument||dm:cI)!==cB){cY(dm)}dm=dm||cB;dy=dy||[];if(!du||typeof du!=="string"){return dy}if((dw=dm.nodeType)!==1&&dw!==9){return[]}if(c7&&!dA){if((dz=cQ.exec(du))){if((ds=dz[1])){if(dw===9){dr=dm.getElementById(ds);if(dr&&dr.parentNode){if(dr.id===ds){dy.push(dr);return dy}}else{return dy}}else{if(dm.ownerDocument&&(dr=dm.ownerDocument.getElementById(ds))&&cE(dm,dr)&&dr.id===ds){dy.push(dr);return dy}}}else{if(dz[2]){b7.apply(dy,dm.getElementsByTagName(du));return dy}else{if((ds=dz[3])&&dh.getElementsByClassName&&dm.getElementsByClassName){b7.apply(dy,dm.getElementsByClassName(ds));return dy}}}}if(dh.qsa&&(!c2||!c2.test(du))){e=dp=c9;dn=dm;dv=dw===9&&du;if(dw===1&&dm.nodeName.toLowerCase()!=="object"){dq=ch(du);if((dp=dm.getAttribute("id"))){e=dp.replace(cM,"\\$&")}else{dm.setAttribute("id",e)}e="[id='"+e+"'] ";dx=dq.length;while(dx--){dq[dx]=e+ci(dq[dx])}dn=c0.test(du)&&cS(dm.parentNode)||dm;dv=dq.join(",")}if(dv){try{b7.apply(dy,dn.querySelectorAll(dv));return dy}catch(dt){}finally{if(!dp){dm.removeAttribute("id")}}}}}return dg(du.replace(cr,"$1"),dm,dy,dA)}function cz(){var dm=[];function e(dn,dp){if(dm.push(dn+" ")>cn.cacheLength){delete e[dm.shift()]}return(e[dn+" "]=dp)}return e}function cj(e){e[c9]=true;return e}function cf(dm){var dp=cB.createElement("div");try{return !!dm(dp)}catch(dn){return false}finally{if(dp.parentNode){dp.parentNode.removeChild(dp)}dp=null}}function dj(dm,dp){var e=dm.split("|"),dn=dm.length;while(dn--){cn.attrHandle[e[dn]]=dp}}function ca(dm,e){var dp=e&&dm,dn=dp&&dm.nodeType===1&&e.nodeType===1&&(~e.sourceIndex||cP)-(~dm.sourceIndex||cP);if(dn){return dn}if(dp){while((dp=dp.nextSibling)){if(dp===e){return -1}}}return dm?1:-1}function cw(e){return function(dn){var dm=dn.nodeName.toLowerCase();return dm==="input"&&dn.type===e}}function cb(e){return function(dn){var dm=dn.nodeName.toLowerCase();return(dm==="input"||dm==="button")&&dn.type===e}}function c6(e){return cj(function(dm){dm=+dm;return cj(function(dn,ds){var dq,dp=e([],dn.length,dm),dr=dp.length;while(dr--){if(dn[(dq=dp[dr])]){dn[dq]=!(ds[dq]=dn[dq])}}})})}function cS(e){return e&&typeof e.getElementsByTagName!==dd&&e}dh=cv.support={};cJ=cv.isXML=function(e){var dm=e&&(e.ownerDocument||e).documentElement;return dm?dm.nodeName!=="HTML":false};cY=cv.setDocument=function(dn){var e,dp=dn?dn.ownerDocument||dn:cI,dm=dp.defaultView;if(dp===cB||dp.nodeType!==9||!dp.documentElement){return cB}cB=dp;co=dp.documentElement;c7=!cJ(dp);if(dm&&dm!==dm.top){if(dm.addEventListener){dm.addEventListener("unload",function(){cY()},false)}else{if(dm.attachEvent){dm.attachEvent("onunload",function(){cY()})}}}dh.attributes=cf(function(dq){dq.className="i";return !dq.getAttribute("className")});dh.getElementsByTagName=cf(function(dq){dq.appendChild(dp.createComment(""));return !dq.getElementsByTagName("*").length});dh.getElementsByClassName=cO.test(dp.getElementsByClassName)&&cf(function(dq){dq.innerHTML="<div class='a'></div><div class='a i'></div>";dq.firstChild.className="i";return dq.getElementsByClassName("i").length===2});dh.getById=cf(function(dq){co.appendChild(dq).id=c9;return !dp.getElementsByName||!dp.getElementsByName(c9).length});if(dh.getById){cn.find.ID=function(ds,dr){if(typeof dr.getElementById!==dd&&c7){var dq=dr.getElementById(ds);return dq&&dq.parentNode?[dq]:[]}};cn.filter.ID=function(dr){var dq=dr.replace(cs,c4);return function(ds){return ds.getAttribute("id")===dq}}}else{delete cn.find.ID;cn.filter.ID=function(dr){var dq=dr.replace(cs,c4);return function(dt){var ds=typeof dt.getAttributeNode!==dd&&dt.getAttributeNode("id");return ds&&ds.value===dq}}}cn.find.TAG=dh.getElementsByTagName?function(dq,dr){if(typeof dr.getElementsByTagName!==dd){return dr.getElementsByTagName(dq)}}:function(dq,du){var dv,dt=[],ds=0,dr=du.getElementsByTagName(dq);if(dq==="*"){while((dv=dr[ds++])){if(dv.nodeType===1){dt.push(dv)}}return dt}return dr};cn.find.CLASS=dh.getElementsByClassName&&function(dr,dq){if(typeof dq.getElementsByClassName!==dd&&c7){return dq.getElementsByClassName(dr)}};df=[];c2=[];if((dh.qsa=cO.test(dp.querySelectorAll))){cf(function(dq){dq.innerHTML="<select msallowclip=''><option selected=''></option></select>";if(dq.querySelectorAll("[msallowclip^='']").length){c2.push("[*^$]="+cp+"*(?:''|\"\")")}if(!dq.querySelectorAll("[selected]").length){c2.push("\\["+cp+"*(?:value|"+b8+")")}if(!dq.querySelectorAll(":checked").length){c2.push(":checked")}});cf(function(dr){var dq=dp.createElement("input");dq.setAttribute("type","hidden");dr.appendChild(dq).setAttribute("name","D");if(dr.querySelectorAll("[name=d]").length){c2.push("name"+cp+"*[*^$|!~]?=")}if(!dr.querySelectorAll(":enabled").length){c2.push(":enabled",":disabled")}dr.querySelectorAll("*,:x");c2.push(",.*:")})}if((dh.matchesSelector=cO.test((ce=co.matches||co.webkitMatchesSelector||co.mozMatchesSelector||co.oMatchesSelector||co.msMatchesSelector)))){cf(function(dq){dh.disconnectedMatch=ce.call(dq,"div");ce.call(dq,"[s!='']:x");df.push("!=",ck)})}c2=c2.length&&new RegExp(c2.join("|"));df=df.length&&new RegExp(df.join("|"));e=cO.test(co.compareDocumentPosition);cE=e||cO.test(co.contains)?function(dr,dq){var dt=dr.nodeType===9?dr.documentElement:dr,ds=dq&&dq.parentNode;return dr===ds||!!(ds&&ds.nodeType===1&&(dt.contains?dt.contains(ds):dr.compareDocumentPosition&&dr.compareDocumentPosition(ds)&16))}:function(dr,dq){if(dq){while((dq=dq.parentNode)){if(dq===dr){return true}}}return false};cD=e?function(dr,dq){if(dr===dq){cW=true;return 0}var ds=!dr.compareDocumentPosition-!dq.compareDocumentPosition;if(ds){return ds}ds=(dr.ownerDocument||dr)===(dq.ownerDocument||dq)?dr.compareDocumentPosition(dq):1;if(ds&1||(!dh.sortDetached&&dq.compareDocumentPosition(dr)===ds)){if(dr===dp||dr.ownerDocument===cI&&cE(cI,dr)){return -1}if(dq===dp||dq.ownerDocument===cI&&cE(cI,dq)){return 1}return cH?(cd.call(cH,dr)-cd.call(cH,dq)):0}return ds&4?-1:1}:function(dr,dq){if(dr===dq){cW=true;return 0}var dx,du=0,dw=dr.parentNode,dt=dq.parentNode,ds=[dr],dv=[dq];if(!dw||!dt){return dr===dp?-1:dq===dp?1:dw?-1:dt?1:cH?(cd.call(cH,dr)-cd.call(cH,dq)):0}else{if(dw===dt){return ca(dr,dq)}}dx=dr;while((dx=dx.parentNode)){ds.unshift(dx)}dx=dq;while((dx=dx.parentNode)){dv.unshift(dx)}while(ds[du]===dv[du]){du++}return du?ca(ds[du],dv[du]):ds[du]===cI?-1:dv[du]===cI?1:0};return dp};cv.matches=function(dm,e){return cv(dm,null,null,e)};cv.matchesSelector=function(dn,dq){if((dn.ownerDocument||dn)!==cB){cY(dn)}dq=dq.replace(ct,"='$1']");if(dh.matchesSelector&&c7&&(!df||!df.test(dq))&&(!c2||!c2.test(dq))){try{var dm=ce.call(dn,dq);if(dm||dh.disconnectedMatch||dn.document&&dn.document.nodeType!==11){return dm}}catch(dp){}}return cv(dq,cB,null,[dn]).length>0};cv.contains=function(e,dm){if((e.ownerDocument||e)!==cB){cY(e)}return cE(e,dm)};cv.attr=function(dn,e){if((dn.ownerDocument||dn)!==cB){cY(dn)}var dm=cn.attrHandle[e.toLowerCase()],dp=dm&&cN.call(cn.attrHandle,e.toLowerCase())?dm(dn,e,!c7):undefined;return dp!==undefined?dp:dh.attributes||!c7?dn.getAttribute(e):(dp=dn.getAttributeNode(e))&&dp.specified?dp.value:null};cv.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};cv.uniqueSort=function(dn){var dp,dq=[],e=0,dm=0;cW=!dh.detectDuplicates;cH=!dh.sortStable&&dn.slice(0);dn.sort(cD);if(cW){while((dp=dn[dm++])){if(dp===dn[dm]){e=dq.push(dm)}}while(e--){dn.splice(dq[e],1)}}cH=null;return dn};cG=cv.getText=function(dq){var dp,dm="",dn=0,e=dq.nodeType;if(!e){while((dp=dq[dn++])){dm+=cG(dp)}}else{if(e===1||e===9||e===11){if(typeof dq.textContent==="string"){return dq.textContent}else{for(dq=dq.firstChild;dq;dq=dq.nextSibling){dm+=cG(dq)}}}else{if(e===3||e===4){return dq.nodeValue}}}return dm};cn=cv.selectors={cacheLength:50,createPseudo:cj,match:c1,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(cs,c4);e[3]=(e[3]||e[4]||e[5]||"").replace(cs,c4);if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1].slice(0,3)==="nth"){if(!e[3]){cv.error(e[0])}e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd"));e[5]=+((e[7]+e[8])||e[3]==="odd")}else{if(e[3]){cv.error(e[0])}}return e},PSEUDO:function(dm){var e,dn=!dm[6]&&dm[2];if(c1.CHILD.test(dm[0])){return null}if(dm[3]){dm[2]=dm[4]||dm[5]||""}else{if(dn&&cR.test(dn)&&(e=ch(dn,true))&&(e=dn.indexOf(")",dn.length-e)-dn.length)){dm[0]=dm[0].slice(0,e);dm[2]=dn.slice(0,e)}}return dm.slice(0,3)}},filter:{TAG:function(dm){var e=dm.replace(cs,c4).toLowerCase();return dm==="*"?function(){return true}:function(dn){return dn.nodeName&&dn.nodeName.toLowerCase()===e}},CLASS:function(e){var dm=b9[e+" "];return dm||(dm=new RegExp("(^|"+cp+")"+e+"("+cp+"|$)"))&&b9(e,function(dn){return dm.test(typeof dn.className==="string"&&dn.className||typeof dn.getAttribute!==dd&&dn.getAttribute("class")||"")})},ATTR:function(dn,dm,e){return function(dq){var dp=cv.attr(dq,dn);if(dp==null){return dm==="!="}if(!dm){return true}dp+="";return dm==="="?dp===e:dm==="!="?dp!==e:dm==="^="?e&&dp.indexOf(e)===0:dm==="*="?e&&dp.indexOf(e)>-1:dm==="$="?e&&dp.slice(-e.length)===e:dm==="~="?(" "+dp+" ").indexOf(e)>-1:dm==="|="?dp===e||dp.slice(0,e.length+1)===e+"-":false}},CHILD:function(dm,dq,dp,dr,dn){var dt=dm.slice(0,3)!=="nth",e=dm.slice(-4)!=="last",ds=dq==="of-type";return dr===1&&dn===0?function(du){return !!du.parentNode}:function(dA,dy,dD){var du,dG,dB,dF,dC,dx,dz=dt!==e?"nextSibling":"previousSibling",dE=dA.parentNode,dw=ds&&dA.nodeName.toLowerCase(),dv=!dD&&!ds;if(dE){if(dt){while(dz){dB=dA;while((dB=dB[dz])){if(ds?dB.nodeName.toLowerCase()===dw:dB.nodeType===1){return false}}dx=dz=dm==="only"&&!dx&&"nextSibling"}return true}dx=[e?dE.firstChild:dE.lastChild];if(e&&dv){dG=dE[c9]||(dE[c9]={});du=dG[dm]||[];dC=du[0]===di&&du[1];dF=du[0]===di&&du[2];dB=dC&&dE.childNodes[dC];while((dB=++dC&&dB&&dB[dz]||(dF=dC=0)||dx.pop())){if(dB.nodeType===1&&++dF&&dB===dA){dG[dm]=[di,dC,dF];break}}}else{if(dv&&(du=(dA[c9]||(dA[c9]={}))[dm])&&du[0]===di){dF=du[1]}else{while((dB=++dC&&dB&&dB[dz]||(dF=dC=0)||dx.pop())){if((ds?dB.nodeName.toLowerCase()===dw:dB.nodeType===1)&&++dF){if(dv){(dB[c9]||(dB[c9]={}))[dm]=[di,dF]}if(dB===dA){break}}}}}dF-=dn;return dF===dr||(dF%dr===0&&dF/dr>=0)}}},PSEUDO:function(dp,dn){var e,dm=cn.pseudos[dp]||cn.setFilters[dp.toLowerCase()]||cv.error("unsupported pseudo: "+dp);if(dm[c9]){return dm(dn)}if(dm.length>1){e=[dp,dp,"",dn];return cn.setFilters.hasOwnProperty(dp.toLowerCase())?cj(function(ds,du){var dr,dq=dm(ds,dn),dt=dq.length;while(dt--){dr=cd.call(ds,dq[dt]);ds[dr]=!(du[dr]=dq[dt])}}):function(dq){return dm(dq,0,e)}}return dm}},pseudos:{not:cj(function(e){var dm=[],dn=[],dp=cV(e.replace(cr,"$1"));return dp[c9]?cj(function(dr,dw,du,ds){var dv,dq=dp(dr,null,ds,[]),dt=dr.length;while(dt--){if((dv=dq[dt])){dr[dt]=!(dw[dt]=dv)}}}):function(ds,dr,dq){dm[0]=ds;dp(dm,null,dq,dn);return !dn.pop()}}),has:cj(function(e){return function(dm){return cv(e,dm).length>0}}),contains:cj(function(e){return function(dm){return(dm.textContent||dm.innerText||cG(dm)).indexOf(e)>-1}}),lang:cj(function(e){if(!cT.test(e||"")){cv.error("unsupported lang: "+e)}e=e.replace(cs,c4).toLowerCase();return function(dn){var dm;do{if((dm=c7?dn.lang:dn.getAttribute("xml:lang")||dn.getAttribute("lang"))){dm=dm.toLowerCase();return dm===e||dm.indexOf(e+"-")===0}}while((dn=dn.parentNode)&&dn.nodeType===1);return false}}),target:function(e){var dm=de.location&&de.location.hash;return dm&&dm.slice(1)===e.id},root:function(e){return e===co},focus:function(e){return e===cB.activeElement&&(!cB.hasFocus||cB.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===false},disabled:function(e){return e.disabled===true},checked:function(e){var dm=e.nodeName.toLowerCase();return(dm==="input"&&!!e.checked)||(dm==="option"&&!!e.selected)},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling){if(e.nodeType<6){return false}}return true},parent:function(e){return !cn.pseudos.empty(e)},header:function(e){return cl.test(e.nodeName)},input:function(e){return cc.test(e.nodeName)},button:function(dm){var e=dm.nodeName.toLowerCase();return e==="input"&&dm.type==="button"||e==="button"},text:function(dm){var e;return dm.nodeName.toLowerCase()==="input"&&dm.type==="text"&&((e=dm.getAttribute("type"))==null||e.toLowerCase()==="text")},first:c6(function(){return[0]}),last:c6(function(e,dm){return[dm-1]}),eq:c6(function(e,dn,dm){return[dm<0?dm+dn:dm]}),even:c6(function(e,dn){var dm=0;for(;dm<dn;dm+=2){e.push(dm)}return e}),odd:c6(function(e,dn){var dm=1;for(;dm<dn;dm+=2){e.push(dm)}return e}),lt:c6(function(e,dp,dn){var dm=dn<0?dn+dp:dn;for(;--dm>=0;){e.push(dm)}return e}),gt:c6(function(e,dp,dn){var dm=dn<0?dn+dp:dn;for(;++dm<dp;){e.push(dm)}return e})}};cn.pseudos.nth=cn.pseudos.eq;for(cx in {radio:true,checkbox:true,file:true,password:true,image:true}){cn.pseudos[cx]=cw(cx)}for(cx in {submit:true,reset:true}){cn.pseudos[cx]=cb(cx)}function cU(){}cU.prototype=cn.filters=cn.pseudos;cn.setFilters=new cU();ch=cv.tokenize=function(dq,dv){var dm,dr,dt,du,ds,dn,e,dp=c8[dq+" "];if(dp){return dv?0:dp.slice(0)}ds=dq;dn=[];e=cn.preFilter;while(ds){if(!dm||(dr=cu.exec(ds))){if(dr){ds=ds.slice(dr[0].length)||ds}dn.push((dt=[]))}dm=false;if((dr=cA.exec(ds))){dm=dr.shift();dt.push({value:dm,type:dr[0].replace(cr," ")});ds=ds.slice(dm.length)}for(du in cn.filter){if((dr=c1[du].exec(ds))&&(!e[du]||(dr=e[du](dr)))){dm=dr.shift();dt.push({value:dm,type:du,matches:dr});ds=ds.slice(dm.length)}}if(!dm){break}}return dv?ds.length:ds?cv.error(dq):c8(dq,dn).slice(0)};function ci(dp){var dn=0,dm=dp.length,e="";for(;dn<dm;dn++){e+=dp[dn].value}return e}function cq(dq,dn,dp){var e=dn.dir,dr=dp&&e==="parentNode",dm=c3++;return dn.first?function(du,dt,ds){while((du=du[e])){if(du.nodeType===1||dr){return dq(du,dt,ds)}}}:function(dw,du,dt){var dx,dv,ds=[di,dm];if(dt){while((dw=dw[e])){if(dw.nodeType===1||dr){if(dq(dw,du,dt)){return true}}}}else{while((dw=dw[e])){if(dw.nodeType===1||dr){dv=dw[c9]||(dw[c9]={});if((dx=dv[e])&&dx[0]===di&&dx[1]===dm){return(ds[2]=dx[2])}else{dv[e]=ds;if((ds[2]=dq(dw,du,dt))){return true}}}}}}}function dk(e){return e.length>1?function(dq,dp,dm){var dn=e.length;while(dn--){if(!e[dn](dq,dp,dm)){return false}}return true}:e[0]}function cy(dm,dq,dp){var dn=0,e=dq.length;for(;dn<e;dn++){cv(dm,dq[dn],dp)}return dp}function cZ(e,dm,dn,dp,ds){var dq,dv=[],dr=0,dt=e.length,du=dm!=null;for(;dr<dt;dr++){if((dq=e[dr])){if(!dn||dn(dq,dp,ds)){dv.push(dq);if(du){dm.push(dr)}}}}return dv}function cg(dn,dm,dq,dp,dr,e){if(dp&&!dp[c9]){dp=cg(dp)}if(dr&&!dr[c9]){dr=cg(dr,e)}return cj(function(dC,dz,du,dB){var dE,dA,dw,dv=[],dD=[],dt=dz.length,ds=dC||cy(dm||"*",du.nodeType?[du]:du,[]),dx=dn&&(dC||!dm)?cZ(ds,dv,dn,du,dB):ds,dy=dq?dr||(dC?dn:dt||dp)?[]:dz:dx;if(dq){dq(dx,dy,du,dB)}if(dp){dE=cZ(dy,dD);dp(dE,[],du,dB);dA=dE.length;while(dA--){if((dw=dE[dA])){dy[dD[dA]]=!(dx[dD[dA]]=dw)}}}if(dC){if(dr||dn){if(dr){dE=[];dA=dy.length;while(dA--){if((dw=dy[dA])){dE.push((dx[dA]=dw))}}dr(null,(dy=[]),dE,dB)}dA=dy.length;while(dA--){if((dw=dy[dA])&&(dE=dr?cd.call(dC,dw):dv[dA])>-1){dC[dE]=!(dz[dE]=dw)}}}}else{dy=cZ(dy===dz?dy.splice(dt,dy.length):dy);if(dr){dr(null,dz,dy,dB)}else{b7.apply(dz,dy)}}})}function da(ds){var dm,dq,dn,dr=ds.length,dv=cn.relative[ds[0].type],dw=dv||cn.relative[" "],dp=dv?1:0,dt=cq(function(dx){return dx===dm},dw,true),du=cq(function(dx){return cd.call(dm,dx)>-1},dw,true),e=[function(dz,dy,dx){return(!dv&&(dx||dy!==dl))||((dm=dy).nodeType?dt(dz,dy,dx):du(dz,dy,dx))}];for(;dp<dr;dp++){if((dq=cn.relative[ds[dp].type])){e=[cq(dk(e),dq)]}else{dq=cn.filter[ds[dp].type].apply(null,ds[dp].matches);if(dq[c9]){dn=++dp;for(;dn<dr;dn++){if(cn.relative[ds[dn].type]){break}}return cg(dp>1&&dk(e),dp>1&&ci(ds.slice(0,dp-1).concat({value:ds[dp-2].type===" "?"*":""})).replace(cr,"$1"),dq,dp<dn&&da(ds.slice(dp,dn)),dn<dr&&da((ds=ds.slice(dn))),dn<dr&&ci(ds))}e.push(dq)}}return dk(e)}function cX(dp,dn){var e=dn.length>0,dq=dp.length>0,dm=function(dA,du,dz,dy,dD){var dv,dw,dB,dF=0,dx="0",dr=dA&&[],dG=[],dE=dl,dt=dA||dq&&cn.find.TAG("*",dD),ds=(di+=dE==null?1:Math.random()||0.1),dC=dt.length;if(dD){dl=du!==cB&&du}for(;dx!==dC&&(dv=dt[dx])!=null;dx++){if(dq&&dv){dw=0;while((dB=dp[dw++])){if(dB(dv,du,dz)){dy.push(dv);break}}if(dD){di=ds}}if(e){if((dv=!dB&&dv)){dF--}if(dA){dr.push(dv)}}}dF+=dx;if(e&&dx!==dF){dw=0;while((dB=dn[dw++])){dB(dr,dG,du,dz)}if(dA){if(dF>0){while(dx--){if(!(dr[dx]||dG[dx])){dG[dx]=dc.call(dy)}}}dG=cZ(dG)}b7.apply(dy,dG);if(dD&&!dA&&dG.length>0&&(dF+dn.length)>1){cv.uniqueSort(dy)}}if(dD){di=ds;dl=dE}return dr};return e?cj(dm):dm}cV=cv.compile=function(e,dn){var dp,dm=[],dr=[],dq=cF[e+" "];if(!dq){if(!dn){dn=ch(e)}dp=dn.length;while(dp--){dq=da(dn[dp]);if(dq[c9]){dm.push(dq)}else{dr.push(dq)}}dq=cF(e,cX(dr,dm));dq.selector=e}return dq};dg=cv.select=function(dn,e,dp,ds){var dq,dv,dm,dw,dt,du=typeof dn==="function"&&dn,dr=!ds&&ch((dn=du.selector||dn));dp=dp||[];if(dr.length===1){dv=dr[0]=dr[0].slice(0);if(dv.length>2&&(dm=dv[0]).type==="ID"&&dh.getById&&e.nodeType===9&&c7&&cn.relative[dv[1].type]){e=(cn.find.ID(dm.matches[0].replace(cs,c4),e)||[])[0];if(!e){return dp}else{if(du){e=e.parentNode}}dn=dn.slice(dv.shift().value.length)}dq=c1.needsContext.test(dn)?0:dv.length;while(dq--){dm=dv[dq];if(cn.relative[(dw=dm.type)]){break}if((dt=cn.find[dw])){if((ds=dt(dm.matches[0].replace(cs,c4),c0.test(dv[0].type)&&cS(e.parentNode)||e))){dv.splice(dq,1);dn=ds.length&&ci(dv);if(!dn){b7.apply(dp,ds);return dp}break}}}}(du||cV(dn,dr))(ds,e,!c7,dp,c0.test(dn)&&cS(e.parentNode)||e);return dp};dh.sortStable=c9.split("").sort(cD).join("")===c9;dh.detectDuplicates=!!cW;cY();dh.sortDetached=cf(function(e){return e.compareDocumentPosition(cB.createElement("div"))&1});if(!cf(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild.getAttribute("href")==="#"})){dj("type|href|height|width",function(dm,e,dn){if(!dn){return dm.getAttribute(e,e.toLowerCase()==="type"?1:2)}})}if(!dh.attributes||!cf(function(e){e.innerHTML="<input/>";e.firstChild.setAttribute("value","");return e.firstChild.getAttribute("value")===""})){dj("value",function(dm,e,dn){if(!dn&&dm.nodeName.toLowerCase()==="input"){return dm.defaultValue}})}if(!cf(function(e){return e.getAttribute("disabled")==null})){dj(b8,function(dm,e,dp){var dn;if(!dp){return dm[e]===true?e.toLowerCase():(dn=dm.getAttributeNode(e))&&dn.specified?dn.value:null}})}return cv})(a5);bI.find=m;bI.expr=m.selectors;bI.expr[":"]=bI.expr.pseudos;bI.unique=m.uniqueSort;bI.text=m.getText;bI.isXMLDoc=m.isXML;bI.contains=m.contains;var z=bI.expr.match.needsContext;var a=(/^<(\w+)\s*\/?>(?:<\/\1>|)$/);var aL=/^.[^:#\[\.,]*$/;function aR(b7,e,b6){if(bI.isFunction(e)){return bI.grep(b7,function(b9,b8){return !!e.call(b9,b8,b9)!==b6})}if(e.nodeType){return bI.grep(b7,function(b8){return(b8===e)!==b6})}if(typeof e==="string"){if(aL.test(e)){return bI.filter(e,b7,b6)}e=bI.filter(e,b7)}return bI.grep(b7,function(b8){return(bI.inArray(b8,e)>=0)!==b6})}bI.filter=function(b8,e,b7){var b6=e[0];if(b7){b8=":not("+b8+")"}return e.length===1&&b6.nodeType===1?bI.find.matchesSelector(b6,b8)?[b6]:[]:bI.find.matches(b8,bI.grep(e,function(b9){return b9.nodeType===1}))};bI.fn.extend({find:function(b6){var b9,b8=[],b7=this,e=b7.length;if(typeof b6!=="string"){return this.pushStack(bI(b6).filter(function(){for(b9=0;b9<e;b9++){if(bI.contains(b7[b9],this)){return true}}}))}for(b9=0;b9<e;b9++){bI.find(b6,b7[b9],b8)}b8=this.pushStack(e>1?bI.unique(b8):b8);b8.selector=this.selector?this.selector+" "+b6:b6;return b8},filter:function(e){return this.pushStack(aR(this,e||[],false))},not:function(e){return this.pushStack(aR(this,e||[],true))},is:function(e){return !!aR(this,typeof e==="string"&&z.test(e)?bI(e):e||[],false).length}});var y,n=a5.document,bt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,bV=bI.fn.init=function(e,b7){var b6,b8;if(!e){return this}if(typeof e==="string"){if(e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3){b6=[null,e,null]}else{b6=bt.exec(e)}if(b6&&(b6[1]||!b7)){if(b6[1]){b7=b7 instanceof bI?b7[0]:b7;bI.merge(this,bI.parseHTML(b6[1],b7&&b7.nodeType?b7.ownerDocument||b7:n,true));if(a.test(b6[1])&&bI.isPlainObject(b7)){for(b6 in b7){if(bI.isFunction(this[b6])){this[b6](b7[b6])}else{this.attr(b6,b7[b6])}}}return this}else{b8=n.getElementById(b6[2]);if(b8&&b8.parentNode){if(b8.id!==b6[2]){return y.find(e)}this.length=1;this[0]=b8}this.context=n;this.selector=e;return this}}else{if(!b7||b7.jquery){return(b7||y).find(e)}else{return this.constructor(b7).find(e)}}}else{if(e.nodeType){this.context=this[0]=e;this.length=1;return this}else{if(bI.isFunction(e)){return typeof y.ready!=="undefined"?y.ready(e):e(bI)}}}if(e.selector!==undefined){this.selector=e.selector;this.context=e.context}return bI.makeArray(e,this)};bV.prototype=bI.fn;y=bI(n);var bv=/^(?:parents|prev(?:Until|All))/,bz={children:true,contents:true,next:true,prev:true};bI.extend({dir:function(b7,b6,b9){var e=[],b8=b7[b6];while(b8&&b8.nodeType!==9&&(b9===undefined||b8.nodeType!==1||!bI(b8).is(b9))){if(b8.nodeType===1){e.push(b8)}b8=b8[b6]}return e},sibling:function(b7,b6){var e=[];for(;b7;b7=b7.nextSibling){if(b7.nodeType===1&&b7!==b6){e.push(b7)}}return e}});bI.fn.extend({has:function(b8){var b7,b6=bI(b8,this),e=b6.length;return this.filter(function(){for(b7=0;b7<e;b7++){if(bI.contains(this,b6[b7])){return true}}})},closest:function(b9,b8){var ca,b7=0,b6=this.length,e=[],cb=z.test(b9)||typeof b9!=="string"?bI(b9,b8||this.context):0;for(;b7<b6;b7++){for(ca=this[b7];ca&&ca!==b8;ca=ca.parentNode){if(ca.nodeType<11&&(cb?cb.index(ca)>-1:ca.nodeType===1&&bI.find.matchesSelector(ca,b9))){e.push(ca);break}}}return this.pushStack(e.length>1?bI.unique(e):e)},index:function(e){if(!e){return(this[0]&&this[0].parentNode)?this.first().prevAll().length:-1}if(typeof e==="string"){return bI.inArray(this[0],bI(e))}return bI.inArray(e.jquery?e[0]:e,this)},add:function(e,b6){return this.pushStack(bI.unique(bI.merge(this.get(),bI(e,b6))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});function aY(b6,e){do{b6=b6[e]}while(b6&&b6.nodeType!==1);return b6}bI.each({parent:function(b6){var e=b6.parentNode;return e&&e.nodeType!==11?e:null},parents:function(e){return bI.dir(e,"parentNode")},parentsUntil:function(b6,e,b7){return bI.dir(b6,"parentNode",b7)},next:function(e){return aY(e,"nextSibling")},prev:function(e){return aY(e,"previousSibling")},nextAll:function(e){return bI.dir(e,"nextSibling")},prevAll:function(e){return bI.dir(e,"previousSibling")},nextUntil:function(b6,e,b7){return bI.dir(b6,"nextSibling",b7)},prevUntil:function(b6,e,b7){return bI.dir(b6,"previousSibling",b7)},siblings:function(e){return bI.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return bI.sibling(e.firstChild)},contents:function(e){return bI.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:bI.merge([],e.childNodes)}},function(e,b6){bI.fn[e]=function(b9,b7){var b8=bI.map(this,b6,b9);if(e.slice(-5)!=="Until"){b7=b9}if(b7&&typeof b7==="string"){b8=bI.filter(b7,b8)}if(this.length>1){if(!bz[e]){b8=bI.unique(b8)}if(bv.test(e)){b8=b8.reverse()}}return this.pushStack(b8)}});var aF=(/\S+/g);var b2={};function af(b6){var e=b2[b6]={};bI.each(b6.match(aF)||[],function(b8,b7){e[b7]=true});return e}bI.Callbacks=function(cf){cf=typeof cf==="string"?(b2[cf]||af(cf)):bI.extend({},cf);var b9,b8,e,ca,cb,b7,cc=[],cd=!cf.once&&[],b6=function(cg){b8=cf.memory&&cg;e=true;cb=b7||0;b7=0;ca=cc.length;b9=true;for(;cc&&cb<ca;cb++){if(cc[cb].apply(cg[0],cg[1])===false&&cf.stopOnFalse){b8=false;break}}b9=false;if(cc){if(cd){if(cd.length){b6(cd.shift())}}else{if(b8){cc=[]}else{ce.disable()}}}},ce={add:function(){if(cc){var ch=cc.length;(function cg(ci){bI.each(ci,function(ck,cj){var cl=bI.type(cj);if(cl==="function"){if(!cf.unique||!ce.has(cj)){cc.push(cj)}}else{if(cj&&cj.length&&cl!=="string"){cg(cj)}}})})(arguments);if(b9){ca=cc.length}else{if(b8){b7=ch;b6(b8)}}}return this},remove:function(){if(cc){bI.each(arguments,function(ci,cg){var ch;while((ch=bI.inArray(cg,cc,ch))>-1){cc.splice(ch,1);if(b9){if(ch<=ca){ca--}if(ch<=cb){cb--}}}})}return this},has:function(cg){return cg?bI.inArray(cg,cc)>-1:!!(cc&&cc.length)},empty:function(){cc=[];ca=0;return this},disable:function(){cc=cd=b8=undefined;return this},disabled:function(){return !cc},lock:function(){cd=undefined;if(!b8){ce.disable()}return this},locked:function(){return !cd},fireWith:function(ch,cg){if(cc&&(!e||cd)){cg=cg||[];cg=[ch,cg.slice?cg.slice():cg];if(b9){cd.push(cg)}else{b6(cg)}}return this},fire:function(){ce.fireWith(this,arguments);return this},fired:function(){return !!e}};return ce};bI.extend({Deferred:function(b7){var b6=[["resolve","done",bI.Callbacks("once memory"),"resolved"],["reject","fail",bI.Callbacks("once memory"),"rejected"],["notify","progress",bI.Callbacks("memory")]],b8="pending",b9={state:function(){return b8},always:function(){e.done(arguments).fail(arguments);return this},then:function(){var ca=arguments;return bI.Deferred(function(cb){bI.each(b6,function(cd,cc){var ce=bI.isFunction(ca[cd])&&ca[cd];e[cc[1]](function(){var cf=ce&&ce.apply(this,arguments);if(cf&&bI.isFunction(cf.promise)){cf.promise().done(cb.resolve).fail(cb.reject).progress(cb.notify)}else{cb[cc[0]+"With"](this===b9?cb.promise():this,ce?[cf]:arguments)}})});ca=null}).promise()},promise:function(ca){return ca!=null?bI.extend(ca,b9):b9}},e={};b9.pipe=b9.then;bI.each(b6,function(cb,ca){var cd=ca[2],cc=ca[3];b9[ca[1]]=cd.add;if(cc){cd.add(function(){b8=cc},b6[cb^1][2].disable,b6[2][2].lock)}e[ca[0]]=function(){e[ca[0]+"With"](this===e?b9:this,arguments);return this};e[ca[0]+"With"]=cd.fireWith});b9.promise(e);if(b7){b7.call(e,e)}return e},when:function(b9){var b7=0,cb=P.call(arguments),e=cb.length,b6=e!==1||(b9&&bI.isFunction(b9.promise))?e:0,ce=b6===1?b9:bI.Deferred(),b8=function(cg,ch,cf){return function(ci){ch[cg]=this;cf[cg]=arguments.length>1?P.call(arguments):ci;if(cf===cd){ce.notifyWith(ch,cf)}else{if(!(--b6)){ce.resolveWith(ch,cf)}}}},cd,ca,cc;if(e>1){cd=new Array(e);ca=new Array(e);cc=new Array(e);for(;b7<e;b7++){if(cb[b7]&&bI.isFunction(cb[b7].promise)){cb[b7].promise().done(b8(b7,cc,cb)).fail(ce.reject).progress(b8(b7,ca,cd))}else{--b6}}}if(!b6){ce.resolveWith(cc,cb)}return ce.promise()}});var ak;bI.fn.ready=function(e){bI.ready.promise().done(e);return this};bI.extend({isReady:false,readyWait:1,holdReady:function(e){if(e){bI.readyWait++}else{bI.ready(true)}},ready:function(e){if(e===true?--bI.readyWait:bI.isReady){return}if(!n.body){return setTimeout(bI.ready)}bI.isReady=true;if(e!==true&&--bI.readyWait>0){return}ak.resolveWith(n,[bI]);if(bI.fn.triggerHandler){bI(n).triggerHandler("ready");bI(n).off("ready")}}});function bm(){if(n.addEventListener){n.removeEventListener("DOMContentLoaded",bZ,false);a5.removeEventListener("load",bZ,false)}else{n.detachEvent("onreadystatechange",bZ);a5.detachEvent("onload",bZ)}}function bZ(){if(n.addEventListener||event.type==="load"||n.readyState==="complete"){bm();bI.ready()}}bI.ready.promise=function(b9){if(!ak){ak=bI.Deferred();if(n.readyState==="complete"){setTimeout(bI.ready)}else{if(n.addEventListener){n.addEventListener("DOMContentLoaded",bZ,false);a5.addEventListener("load",bZ,false)}else{n.attachEvent("onreadystatechange",bZ);a5.attachEvent("onload",bZ);var b8=false;try{b8=a5.frameElement==null&&n.documentElement}catch(b7){}if(b8&&b8.doScroll){(function b6(){if(!bI.isReady){try{b8.doScroll("left")}catch(ca){return setTimeout(b6,50)}bm();bI.ready()}})()}}}}return ak.promise(b9)};var aC=typeof undefined;var bh;for(bh in bI(C)){break}C.ownLast=bh!=="0";C.inlineBlockNeedsLayout=false;bI(function(){var b7,b8,e,b6;e=n.getElementsByTagName("body")[0];if(!e||!e.style){return}b8=n.createElement("div");b6=n.createElement("div");b6.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px";e.appendChild(b6).appendChild(b8);if(typeof b8.style.zoom!==aC){b8.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1";C.inlineBlockNeedsLayout=b7=b8.offsetWidth===3;if(b7){e.style.zoom=1}}e.removeChild(b6)});(function(){var b7=n.createElement("div");if(C.deleteExpando==null){C.deleteExpando=true;try{delete b7.test}catch(b6){C.deleteExpando=false}}b7=null})();bI.acceptData=function(b7){var b6=bI.noData[(b7.nodeName+" ").toLowerCase()],e=+b7.nodeType||1;return e!==1&&e!==9?false:!b6||b6!==true&&b7.getAttribute("classid")===b6};var by=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,aQ=/([A-Z])/g;function bA(b8,b7,b9){if(b9===undefined&&b8.nodeType===1){var b6="data-"+b7.replace(aQ,"-$1").toLowerCase();b9=b8.getAttribute(b6);if(typeof b9==="string"){try{b9=b9==="true"?true:b9==="false"?false:b9==="null"?null:+b9+""===b9?+b9:by.test(b9)?bI.parseJSON(b9):b9}catch(ca){}bI.data(b8,b7,b9)}else{b9=undefined}}return b9}function Q(b6){var e;for(e in b6){if(e==="data"&&bI.isEmptyObject(b6[e])){continue}if(e!=="toJSON"){return false}}return true}function bc(b8,b6,ca,b9){if(!bI.acceptData(b8)){return}var cc,cb,cd=bI.expando,ce=b8.nodeType,e=ce?bI.cache:b8,b7=ce?b8[cd]:b8[cd]&&cd;if((!b7||!e[b7]||(!b9&&!e[b7].data))&&ca===undefined&&typeof b6==="string"){return}if(!b7){if(ce){b7=b8[cd]=aP.pop()||bI.guid++}else{b7=cd}}if(!e[b7]){e[b7]=ce?{}:{toJSON:bI.noop}}if(typeof b6==="object"||typeof b6==="function"){if(b9){e[b7]=bI.extend(e[b7],b6)}else{e[b7].data=bI.extend(e[b7].data,b6)}}cb=e[b7];if(!b9){if(!cb.data){cb.data={}}cb=cb.data}if(ca!==undefined){cb[bI.camelCase(b6)]=ca}if(typeof b6==="string"){cc=cb[b6];if(cc==null){cc=cb[bI.camelCase(b6)]}}else{cc=cb}return cc}function ab(b9,b7,e){if(!bI.acceptData(b9)){return}var cb,b8,ca=b9.nodeType,b6=ca?bI.cache:b9,cc=ca?b9[bI.expando]:bI.expando;if(!b6[cc]){return}if(b7){cb=e?b6[cc]:b6[cc].data;if(cb){if(!bI.isArray(b7)){if(b7 in cb){b7=[b7]}else{b7=bI.camelCase(b7);if(b7 in cb){b7=[b7]}else{b7=b7.split(" ")}}}else{b7=b7.concat(bI.map(b7,bI.camelCase))}b8=b7.length;while(b8--){delete cb[b7[b8]]}if(e?!Q(cb):!bI.isEmptyObject(cb)){return}}}if(!e){delete b6[cc].data;if(!Q(b6[cc])){return}}if(ca){bI.cleanData([b9],true)}else{if(C.deleteExpando||b6!=b6.window){delete b6[cc]}else{b6[cc]=null}}}bI.extend({cache:{},noData:{"applet ":true,"embed ":true,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){e=e.nodeType?bI.cache[e[bI.expando]]:e[bI.expando];return !!e&&!Q(e)},data:function(b6,e,b7){return bc(b6,e,b7)},removeData:function(b6,e){return ab(b6,e)},_data:function(b6,e,b7){return bc(b6,e,b7,true)},_removeData:function(b6,e){return ab(b6,e,true)}});bI.fn.extend({data:function(b8,cb){var b7,b6,ca,b9=this[0],e=b9&&b9.attributes;if(b8===undefined){if(this.length){ca=bI.data(b9);if(b9.nodeType===1&&!bI._data(b9,"parsedAttrs")){b7=e.length;while(b7--){if(e[b7]){b6=e[b7].name;if(b6.indexOf("data-")===0){b6=bI.camelCase(b6.slice(5));bA(b9,b6,ca[b6])}}}bI._data(b9,"parsedAttrs",true)}}return ca}if(typeof b8==="object"){return this.each(function(){bI.data(this,b8)})}return arguments.length>1?this.each(function(){bI.data(this,b8,cb)}):b9?bA(b9,b8,bI.data(b9,b8)):undefined},removeData:function(e){return this.each(function(){bI.removeData(this,e)})}});bI.extend({queue:function(b7,b6,b8){var e;if(b7){b6=(b6||"fx")+"queue";e=bI._data(b7,b6);if(b8){if(!e||bI.isArray(b8)){e=bI._data(b7,b6,bI.makeArray(b8))}else{e.push(b8)}}return e||[]}},dequeue:function(ca,b9){b9=b9||"fx";var b6=bI.queue(ca,b9),cb=b6.length,b8=b6.shift(),e=bI._queueHooks(ca,b9),b7=function(){bI.dequeue(ca,b9)};if(b8==="inprogress"){b8=b6.shift();cb--}if(b8){if(b9==="fx"){b6.unshift("inprogress")}delete e.stop;b8.call(ca,b7,e)}if(!cb&&e){e.empty.fire()}},_queueHooks:function(b7,b6){var e=b6+"queueHooks";return bI._data(b7,e)||bI._data(b7,e,{empty:bI.Callbacks("once memory").add(function(){bI._removeData(b7,b6+"queue");bI._removeData(b7,e)})})}});bI.fn.extend({queue:function(e,b6){var b7=2;if(typeof e!=="string"){b6=e;e="fx";b7--}if(arguments.length<b7){return bI.queue(this[0],e)}return b6===undefined?this:this.each(function(){var b8=bI.queue(this,e,b6);bI._queueHooks(this,e);if(e==="fx"&&b8[0]!=="inprogress"){bI.dequeue(this,e)}})},dequeue:function(e){return this.each(function(){bI.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(b7,cb){var b6,b8=1,cc=bI.Deferred(),ca=this,e=this.length,b9=function(){if(!(--b8)){cc.resolveWith(ca,[ca])}};if(typeof b7!=="string"){cb=b7;b7=undefined}b7=b7||"fx";while(e--){b6=bI._data(ca[e],b7+"queueHooks");if(b6&&b6.empty){b8++;b6.empty.add(b9)}}b9();return cc.promise(cb)}});var aE=(/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/).source;var bT=["Top","Right","Bottom","Left"];var S=function(b6,e){b6=e||b6;return bI.css(b6,"display")==="none"||!bI.contains(b6.ownerDocument,b6)};var aB=bI.access=function(e,ca,cc,cb,b8,ce,cd){var b7=0,b6=e.length,b9=cc==null;if(bI.type(cc)==="object"){b8=true;for(b7 in cc){bI.access(e,ca,b7,cc[b7],true,ce,cd)}}else{if(cb!==undefined){b8=true;if(!bI.isFunction(cb)){cd=true}if(b9){if(cd){ca.call(e,cb);ca=null}else{b9=ca;ca=function(cg,cf,ch){return b9.call(bI(cg),ch)}}}if(ca){for(;b7<b6;b7++){ca(e[b7],cc,cd?cb:cb.call(e[b7],b7,ca(e[b7],cc)))}}}}return b8?e:b9?ca.call(e):b6?ca(e[0],cc):ce};var aM=(/^(?:checkbox|radio)$/i);(function(){var b6=n.createElement("input"),b9=n.createElement("div"),b7=n.createDocumentFragment();b9.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";C.leadingWhitespace=b9.firstChild.nodeType===3;C.tbody=!b9.getElementsByTagName("tbody").length;C.htmlSerialize=!!b9.getElementsByTagName("link").length;C.html5Clone=n.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>";b6.type="checkbox";b6.checked=true;b7.appendChild(b6);C.appendChecked=b6.checked;b9.innerHTML="<textarea>x</textarea>";C.noCloneChecked=!!b9.cloneNode(true).lastChild.defaultValue;b7.appendChild(b9);b9.innerHTML="<input type='radio' checked='checked' name='t'/>";C.checkClone=b9.cloneNode(true).cloneNode(true).lastChild.checked;C.noCloneEvent=true;if(b9.attachEvent){b9.attachEvent("onclick",function(){C.noCloneEvent=false});b9.cloneNode(true).click()}if(C.deleteExpando==null){C.deleteExpando=true;try{delete b9.test}catch(b8){C.deleteExpando=false}}})();(function(){var b6,e,b7=n.createElement("div");for(b6 in {submit:true,change:true,focusin:true}){e="on"+b6;if(!(C[b6+"Bubbles"]=e in a5)){b7.setAttribute(e,"t");C[b6+"Bubbles"]=b7.attributes[e].expando===false}}b7=null})();var bG=/^(?:input|select|textarea)$/i,a6=/^key/,bM=/^(?:mouse|pointer|contextmenu)|click/,bC=/^(?:focusinfocus|focusoutblur)$/,bx=/^([^.]*)(?:\.(.+)|)$/;function U(){return true}function Z(){return false}function am(){try{return n.activeElement}catch(e){}}bI.event={global:{},add:function(b9,ce,cj,cb,ca){var cc,ck,cl,b7,cg,cd,ci,b8,ch,e,b6,cf=bI._data(b9);if(!cf){return}if(cj.handler){b7=cj;cj=b7.handler;ca=b7.selector}if(!cj.guid){cj.guid=bI.guid++}if(!(ck=cf.events)){ck=cf.events={}}if(!(cd=cf.handle)){cd=cf.handle=function(cm){return typeof bI!==aC&&(!cm||bI.event.triggered!==cm.type)?bI.event.dispatch.apply(cd.elem,arguments):undefined};cd.elem=b9}ce=(ce||"").match(aF)||[""];cl=ce.length;while(cl--){cc=bx.exec(ce[cl])||[];ch=b6=cc[1];e=(cc[2]||"").split(".").sort();if(!ch){continue}cg=bI.event.special[ch]||{};ch=(ca?cg.delegateType:cg.bindType)||ch;cg=bI.event.special[ch]||{};ci=bI.extend({type:ch,origType:b6,data:cb,handler:cj,guid:cj.guid,selector:ca,needsContext:ca&&bI.expr.match.needsContext.test(ca),namespace:e.join(".")},b7);if(!(b8=ck[ch])){b8=ck[ch]=[];b8.delegateCount=0;if(!cg.setup||cg.setup.call(b9,cb,e,cd)===false){if(b9.addEventListener){b9.addEventListener(ch,cd,false)}else{if(b9.attachEvent){b9.attachEvent("on"+ch,cd)}}}}if(cg.add){cg.add.call(b9,ci);if(!ci.handler.guid){ci.handler.guid=cj.guid}}if(ca){b8.splice(b8.delegateCount++,0,ci)}else{b8.push(ci)}bI.event.global[ch]=true}b9=null},remove:function(b8,ce,cl,b9,cd){var cb,ci,cc,ca,ck,cj,cg,b7,ch,e,b6,cf=bI.hasData(b8)&&bI._data(b8);if(!cf||!(cj=cf.events)){return}ce=(ce||"").match(aF)||[""];ck=ce.length;while(ck--){cc=bx.exec(ce[ck])||[];ch=b6=cc[1];e=(cc[2]||"").split(".").sort();if(!ch){for(ch in cj){bI.event.remove(b8,ch+ce[ck],cl,b9,true)}continue}cg=bI.event.special[ch]||{};ch=(b9?cg.delegateType:cg.bindType)||ch;b7=cj[ch]||[];cc=cc[2]&&new RegExp("(^|\\.)"+e.join("\\.(?:.*\\.|)")+"(\\.|$)");ca=cb=b7.length;while(cb--){ci=b7[cb];if((cd||b6===ci.origType)&&(!cl||cl.guid===ci.guid)&&(!cc||cc.test(ci.namespace))&&(!b9||b9===ci.selector||b9==="**"&&ci.selector)){b7.splice(cb,1);if(ci.selector){b7.delegateCount--}if(cg.remove){cg.remove.call(b8,ci)}}}if(ca&&!b7.length){if(!cg.teardown||cg.teardown.call(b8,e,cf.handle)===false){bI.removeEvent(b8,ch,cf.handle)}delete cj[ch]}}if(bI.isEmptyObject(cj)){delete cf.handle;bI._removeData(b8,"events")}},trigger:function(b6,cd,b9,ck){var ce,b8,ci,cj,cg,cc,cb,ca=[b9||n],ch=J.call(b6,"type")?b6.type:b6,b7=J.call(b6,"namespace")?b6.namespace.split("."):[];ci=cc=b9=b9||n;if(b9.nodeType===3||b9.nodeType===8){return}if(bC.test(ch+bI.event.triggered)){return}if(ch.indexOf(".")>=0){b7=ch.split(".");ch=b7.shift();b7.sort()}b8=ch.indexOf(":")<0&&"on"+ch;b6=b6[bI.expando]?b6:new bI.Event(ch,typeof b6==="object"&&b6);b6.isTrigger=ck?2:3;b6.namespace=b7.join(".");b6.namespace_re=b6.namespace?new RegExp("(^|\\.)"+b7.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;b6.result=undefined;if(!b6.target){b6.target=b9}cd=cd==null?[b6]:bI.makeArray(cd,[b6]);cg=bI.event.special[ch]||{};if(!ck&&cg.trigger&&cg.trigger.apply(b9,cd)===false){return}if(!ck&&!cg.noBubble&&!bI.isWindow(b9)){cj=cg.delegateType||ch;if(!bC.test(cj+ch)){ci=ci.parentNode}for(;ci;ci=ci.parentNode){ca.push(ci);cc=ci}if(cc===(b9.ownerDocument||n)){ca.push(cc.defaultView||cc.parentWindow||a5)}}cb=0;while((ci=ca[cb++])&&!b6.isPropagationStopped()){b6.type=cb>1?cj:cg.bindType||ch;ce=(bI._data(ci,"events")||{})[b6.type]&&bI._data(ci,"handle");if(ce){ce.apply(ci,cd)}ce=b8&&ci[b8];if(ce&&ce.apply&&bI.acceptData(ci)){b6.result=ce.apply(ci,cd);if(b6.result===false){b6.preventDefault()}}}b6.type=ch;if(!ck&&!b6.isDefaultPrevented()){if((!cg._default||cg._default.apply(ca.pop(),cd)===false)&&bI.acceptData(b9)){if(b8&&b9[ch]&&!bI.isWindow(b9)){cc=b9[b8];if(cc){b9[b8]=null}bI.event.triggered=ch;try{b9[ch]()}catch(cf){}bI.event.triggered=undefined;if(cc){b9[b8]=cc}}}}return b6.result},dispatch:function(e){e=bI.event.fix(e);var b9,ca,ce,b6,b8,cd=[],cc=P.call(arguments),b7=(bI._data(this,"events")||{})[e.type]||[],cb=bI.event.special[e.type]||{};cc[0]=e;e.delegateTarget=this;if(cb.preDispatch&&cb.preDispatch.call(this,e)===false){return}cd=bI.event.handlers.call(this,e,b7);b9=0;while((b6=cd[b9++])&&!e.isPropagationStopped()){e.currentTarget=b6.elem;b8=0;while((ce=b6.handlers[b8++])&&!e.isImmediatePropagationStopped()){if(!e.namespace_re||e.namespace_re.test(ce.namespace)){e.handleObj=ce;e.data=ce.data;ca=((bI.event.special[ce.origType]||{}).handle||ce.handler).apply(b6.elem,cc);if(ca!==undefined){if((e.result=ca)===false){e.preventDefault();e.stopPropagation()}}}}}if(cb.postDispatch){cb.postDispatch.call(this,e)}return e.result},handlers:function(e,b7){var b6,cc,ca,b9,cb=[],b8=b7.delegateCount,cd=e.target;if(b8&&cd.nodeType&&(!e.button||e.type!=="click")){for(;cd!=this;cd=cd.parentNode||this){if(cd.nodeType===1&&(cd.disabled!==true||e.type!=="click")){ca=[];for(b9=0;b9<b8;b9++){cc=b7[b9];b6=cc.selector+" ";if(ca[b6]===undefined){ca[b6]=cc.needsContext?bI(b6,this).index(cd)>=0:bI.find(b6,this,null,[cd]).length}if(ca[b6]){ca.push(cc)}}if(ca.length){cb.push({elem:cd,handlers:ca})}}}}if(b8<b7.length){cb.push({elem:this,handlers:b7.slice(b8)})}return cb},fix:function(b8){if(b8[bI.expando]){return b8}var b6,cb,ca,b7=b8.type,e=b8,b9=this.fixHooks[b7];if(!b9){this.fixHooks[b7]=b9=bM.test(b7)?this.mouseHooks:a6.test(b7)?this.keyHooks:{}}ca=b9.props?this.props.concat(b9.props):this.props;b8=new bI.Event(e);b6=ca.length;while(b6--){cb=ca[b6];b8[cb]=e[cb]}if(!b8.target){b8.target=e.srcElement||n}if(b8.target.nodeType===3){b8.target=b8.target.parentNode}b8.metaKey=!!b8.metaKey;return b9.filter?b9.filter(b8,e):b8},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(b6,e){if(b6.which==null){b6.which=e.charCode!=null?e.charCode:e.keyCode}return b6}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(b8,b7){var e,b9,ca,b6=b7.button,cb=b7.fromElement;if(b8.pageX==null&&b7.clientX!=null){b9=b8.target.ownerDocument||n;ca=b9.documentElement;e=b9.body;b8.pageX=b7.clientX+(ca&&ca.scrollLeft||e&&e.scrollLeft||0)-(ca&&ca.clientLeft||e&&e.clientLeft||0);b8.pageY=b7.clientY+(ca&&ca.scrollTop||e&&e.scrollTop||0)-(ca&&ca.clientTop||e&&e.clientTop||0)}if(!b8.relatedTarget&&cb){b8.relatedTarget=cb===b8.target?b7.toElement:cb}if(!b8.which&&b6!==undefined){b8.which=(b6&1?1:(b6&2?3:(b6&4?2:0)))}return b8}},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==am()&&this.focus){try{this.focus();return false}catch(b6){}}},delegateType:"focusin"},blur:{trigger:function(){if(this===am()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(bI.nodeName(this,"input")&&this.type==="checkbox"&&this.click){this.click();return false}},_default:function(e){return bI.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){if(e.result!==undefined&&e.originalEvent){e.originalEvent.returnValue=e.result}}}},simulate:function(b7,b9,b8,b6){var ca=bI.extend(new bI.Event(),b8,{type:b7,isSimulated:true,originalEvent:{}});if(b6){bI.event.trigger(ca,null,b9)}else{bI.event.dispatch.call(b9,ca)}if(ca.isDefaultPrevented()){b8.preventDefault()}}};bI.removeEvent=n.removeEventListener?function(b6,e,b7){if(b6.removeEventListener){b6.removeEventListener(e,b7,false)}}:function(b7,b6,b8){var e="on"+b6;if(b7.detachEvent){if(typeof b7[e]===aC){b7[e]=null}b7.detachEvent(e,b8)}};bI.Event=function(b6,e){if(!(this instanceof bI.Event)){return new bI.Event(b6,e)}if(b6&&b6.type){this.originalEvent=b6;this.type=b6.type;this.isDefaultPrevented=b6.defaultPrevented||b6.defaultPrevented===undefined&&b6.returnValue===false?U:Z}else{this.type=b6}if(e){bI.extend(this,e)}this.timeStamp=b6&&b6.timeStamp||bI.now();this[bI.expando]=true};bI.Event.prototype={isDefaultPrevented:Z,isPropagationStopped:Z,isImmediatePropagationStopped:Z,preventDefault:function(){var b6=this.originalEvent;this.isDefaultPrevented=U;if(!b6){return}if(b6.preventDefault){b6.preventDefault()}else{b6.returnValue=false}},stopPropagation:function(){var b6=this.originalEvent;this.isPropagationStopped=U;if(!b6){return}if(b6.stopPropagation){b6.stopPropagation()}b6.cancelBubble=true},stopImmediatePropagation:function(){var b6=this.originalEvent;this.isImmediatePropagationStopped=U;if(b6&&b6.stopImmediatePropagation){b6.stopImmediatePropagation()}this.stopPropagation()}};bI.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(b6,e){bI.event.special[b6]={delegateType:e,bindType:e,handle:function(b9){var b7,cb=this,ca=b9.relatedTarget,b8=b9.handleObj;if(!ca||(ca!==cb&&!bI.contains(cb,ca))){b9.type=b8.origType;b7=b8.handler.apply(this,arguments);b9.type=e}return b7}}});if(!C.submitBubbles){bI.event.special.submit={setup:function(){if(bI.nodeName(this,"form")){return false}bI.event.add(this,"click._submit keypress._submit",function(b8){var b7=b8.target,b6=bI.nodeName(b7,"input")||bI.nodeName(b7,"button")?b7.form:undefined;if(b6&&!bI._data(b6,"submitBubbles")){bI.event.add(b6,"submit._submit",function(e){e._submit_bubble=true});bI._data(b6,"submitBubbles",true)}})},postDispatch:function(e){if(e._submit_bubble){delete e._submit_bubble;if(this.parentNode&&!e.isTrigger){bI.event.simulate("submit",this.parentNode,e,true)}}},teardown:function(){if(bI.nodeName(this,"form")){return false}bI.event.remove(this,"._submit")}}}if(!C.changeBubbles){bI.event.special.change={setup:function(){if(bG.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){bI.event.add(this,"propertychange._change",function(e){if(e.originalEvent.propertyName==="checked"){this._just_changed=true}});bI.event.add(this,"click._change",function(e){if(this._just_changed&&!e.isTrigger){this._just_changed=false}bI.event.simulate("change",this,e,true)})}return false}bI.event.add(this,"beforeactivate._change",function(b7){var b6=b7.target;if(bG.test(b6.nodeName)&&!bI._data(b6,"changeBubbles")){bI.event.add(b6,"change._change",function(e){if(this.parentNode&&!e.isSimulated&&!e.isTrigger){bI.event.simulate("change",this.parentNode,e,true)}});bI._data(b6,"changeBubbles",true)}})},handle:function(b6){var e=b6.target;if(this!==e||b6.isSimulated||b6.isTrigger||(e.type!=="radio"&&e.type!=="checkbox")){return b6.handleObj.handler.apply(this,arguments)}},teardown:function(){bI.event.remove(this,"._change");return !bG.test(this.nodeName)}}}if(!C.focusinBubbles){bI.each({focus:"focusin",blur:"focusout"},function(b7,e){var b6=function(b8){bI.event.simulate(e,b8.target,bI.event.fix(b8),true)};bI.event.special[e]={setup:function(){var b9=this.ownerDocument||this,b8=bI._data(b9,e);if(!b8){b9.addEventListener(b7,b6,true)}bI._data(b9,e,(b8||0)+1)},teardown:function(){var b9=this.ownerDocument||this,b8=bI._data(b9,e)-1;if(!b8){b9.removeEventListener(b7,b6,true);bI._removeData(b9,e)}else{bI._data(b9,e,b8)}}}})}bI.fn.extend({on:function(b7,e,ca,b9,b6){var b8,cb;if(typeof b7==="object"){if(typeof e!=="string"){ca=ca||e;e=undefined}for(b8 in b7){this.on(b8,e,ca,b7[b8],b6)}return this}if(ca==null&&b9==null){b9=e;ca=e=undefined}else{if(b9==null){if(typeof e==="string"){b9=ca;ca=undefined}else{b9=ca;ca=e;e=undefined}}}if(b9===false){b9=Z}else{if(!b9){return this}}if(b6===1){cb=b9;b9=function(cc){bI().off(cc);return cb.apply(this,arguments)};b9.guid=cb.guid||(cb.guid=bI.guid++)}return this.each(function(){bI.event.add(this,b7,b9,ca,e)})},one:function(b6,e,b8,b7){return this.on(b6,e,b8,b7,1)},off:function(b7,e,b9){var b6,b8;if(b7&&b7.preventDefault&&b7.handleObj){b6=b7.handleObj;bI(b7.delegateTarget).off(b6.namespace?b6.origType+"."+b6.namespace:b6.origType,b6.selector,b6.handler);return this}if(typeof b7==="object"){for(b8 in b7){this.off(b8,e,b7[b8])}return this}if(e===false||typeof e==="function"){b9=e;e=undefined}if(b9===false){b9=Z}return this.each(function(){bI.event.remove(this,b7,b9,e)})},trigger:function(e,b6){return this.each(function(){bI.event.trigger(e,b6,this)})},triggerHandler:function(e,b7){var b6=this[0];if(b6){return bI.event.trigger(e,b7,b6,true)}}});function A(e){var b7=d.split("|"),b6=e.createDocumentFragment();if(b6.createElement){while(b7.length){b6.createElement(b7.pop())}}return b6}var d="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",aD=/ jQuery\d+="(?:null|\d+)"/g,M=new RegExp("<(?:"+d+")[\\s/>]","i"),b5=/^\s+/,aH=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,o=/<([\w:]+)/,b0=/<tbody/i,K=/<|&#?\w+;/,an=/<(?:script|style|link)/i,bW=/checked\s*(?:[^=]|=\s*.checked.)/i,bB=/^$|\/(?:java|ecma)script/i,ar=/^true\/(.*)/,aO=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,W={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:C.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},aT=A(n),k=aT.appendChild(n.createElement("div"));W.optgroup=W.option;W.tbody=W.tfoot=W.colgroup=W.caption=W.thead;W.th=W.td;function l(b8,e){var b6,b9,b7=0,ca=typeof b8.getElementsByTagName!==aC?b8.getElementsByTagName(e||"*"):typeof b8.querySelectorAll!==aC?b8.querySelectorAll(e||"*"):undefined;if(!ca){for(ca=[],b6=b8.childNodes||b8;(b9=b6[b7])!=null;b7++){if(!e||bI.nodeName(b9,e)){ca.push(b9)}else{bI.merge(ca,l(b9,e))}}}return e===undefined||e&&bI.nodeName(b8,e)?bI.merge([b8],ca):ca}function bY(e){if(aM.test(e.type)){e.defaultChecked=e.checked}}function a3(b6,e){return bI.nodeName(b6,"table")&&bI.nodeName(e.nodeType!==11?e:e.firstChild,"tr")?b6.getElementsByTagName("tbody")[0]||b6.appendChild(b6.ownerDocument.createElement("tbody")):b6}function t(e){e.type=(bI.find.attr(e,"type")!==null)+"/"+e.type;return e}function bf(b6){var e=ar.exec(b6.type);if(e){b6.type=e[1]}else{b6.removeAttribute("type")}return b6}function bu(e,b7){var b8,b6=0;for(;(b8=e[b6])!=null;b6++){bI._data(b8,"globalEval",!b7||bI._data(b7[b6],"globalEval"))}}function at(cc,b6){if(b6.nodeType!==1||!bI.hasData(cc)){return}var b9,b8,e,cb=bI._data(cc),ca=bI._data(b6,cb),b7=cb.events;if(b7){delete ca.handle;ca.events={};for(b9 in b7){for(b8=0,e=b7[b9].length;b8<e;b8++){bI.event.add(b6,b9,b7[b9][b8])}}}if(ca.data){ca.data=bI.extend({},ca.data)}}function T(b9,b6){var ca,b8,b7;if(b6.nodeType!==1){return}ca=b6.nodeName.toLowerCase();if(!C.noCloneEvent&&b6[bI.expando]){b7=bI._data(b6);for(b8 in b7.events){bI.removeEvent(b6,b8,b7.handle)}b6.removeAttribute(bI.expando)}if(ca==="script"&&b6.text!==b9.text){t(b6).text=b9.text;bf(b6)}else{if(ca==="object"){if(b6.parentNode){b6.outerHTML=b9.outerHTML}if(C.html5Clone&&(b9.innerHTML&&!bI.trim(b6.innerHTML))){b6.innerHTML=b9.innerHTML}}else{if(ca==="input"&&aM.test(b9.type)){b6.defaultChecked=b6.checked=b9.checked;if(b6.value!==b9.value){b6.value=b9.value}}else{if(ca==="option"){b6.defaultSelected=b6.selected=b9.defaultSelected}else{if(ca==="input"||ca==="textarea"){b6.defaultValue=b9.defaultValue}}}}}}bI.extend({clone:function(b6,b8,e){var ca,b7,cd,b9,cb,cc=bI.contains(b6.ownerDocument,b6);if(C.html5Clone||bI.isXMLDoc(b6)||!M.test("<"+b6.nodeName+">")){cd=b6.cloneNode(true)}else{k.innerHTML=b6.outerHTML;k.removeChild(cd=k.firstChild)}if((!C.noCloneEvent||!C.noCloneChecked)&&(b6.nodeType===1||b6.nodeType===11)&&!bI.isXMLDoc(b6)){ca=l(cd);cb=l(b6);for(b9=0;(b7=cb[b9])!=null;++b9){if(ca[b9]){T(b7,ca[b9])}}}if(b8){if(e){cb=cb||l(b6);ca=ca||l(cd);for(b9=0;(b7=cb[b9])!=null;b9++){at(b7,ca[b9])}}else{at(b6,cd)}}ca=l(cd,"script");if(ca.length>0){bu(ca,!cc&&l(b6,"script"))}ca=cb=b7=null;return cd},buildFragment:function(b6,b8,cd,ci){var ce,ca,cc,ch,cj,cg,b7,cb=b6.length,b9=A(b8),e=[],cf=0;for(;cf<cb;cf++){ca=b6[cf];if(ca||ca===0){if(bI.type(ca)==="object"){bI.merge(e,ca.nodeType?[ca]:ca)}else{if(!K.test(ca)){e.push(b8.createTextNode(ca))}else{ch=ch||b9.appendChild(b8.createElement("div"));cj=(o.exec(ca)||["",""])[1].toLowerCase();b7=W[cj]||W._default;ch.innerHTML=b7[1]+ca.replace(aH,"<$1></$2>")+b7[2];ce=b7[0];while(ce--){ch=ch.lastChild}if(!C.leadingWhitespace&&b5.test(ca)){e.push(b8.createTextNode(b5.exec(ca)[0]))}if(!C.tbody){ca=cj==="table"&&!b0.test(ca)?ch.firstChild:b7[1]==="<table>"&&!b0.test(ca)?ch:0;ce=ca&&ca.childNodes.length;while(ce--){if(bI.nodeName((cg=ca.childNodes[ce]),"tbody")&&!cg.childNodes.length){ca.removeChild(cg)}}}bI.merge(e,ch.childNodes);ch.textContent="";while(ch.firstChild){ch.removeChild(ch.firstChild)}ch=b9.lastChild}}}}if(ch){b9.removeChild(ch)}if(!C.appendChecked){bI.grep(l(e,"input"),bY)}cf=0;while((ca=e[cf++])){if(ci&&bI.inArray(ca,ci)!==-1){continue}cc=bI.contains(ca.ownerDocument,ca);ch=l(b9.appendChild(ca),"script");if(cc){bu(ch)}if(cd){ce=0;while((ca=ch[ce++])){if(bB.test(ca.type||"")){cd.push(ca)}}}}ch=null;return b9},cleanData:function(b6,ce){var b8,cd,b7,b9,ca=0,cf=bI.expando,e=bI.cache,cb=C.deleteExpando,cc=bI.event.special;for(;(b8=b6[ca])!=null;ca++){if(ce||bI.acceptData(b8)){b7=b8[cf];b9=b7&&e[b7];if(b9){if(b9.events){for(cd in b9.events){if(cc[cd]){bI.event.remove(b8,cd)}else{bI.removeEvent(b8,cd,b9.handle)}}}if(e[b7]){delete e[b7];if(cb){delete b8[cf]}else{if(typeof b8.removeAttribute!==aC){b8.removeAttribute(cf)}else{b8[cf]=null}}aP.push(b7)}}}}}});bI.fn.extend({text:function(e){return aB(this,function(b6){return b6===undefined?bI.text(this):this.empty().append((this[0]&&this[0].ownerDocument||n).createTextNode(b6))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var b6=a3(this,e);b6.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var b6=a3(this,e);b6.insertBefore(e,b6.firstChild)}})},before:function(){return this.domManip(arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this)}})},after:function(){return this.domManip(arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this.nextSibling)}})},remove:function(e,b9){var b8,b6=e?bI.filter(e,this):this,b7=0;for(;(b8=b6[b7])!=null;b7++){if(!b9&&b8.nodeType===1){bI.cleanData(l(b8))}if(b8.parentNode){if(b9&&bI.contains(b8.ownerDocument,b8)){bu(l(b8,"script"))}b8.parentNode.removeChild(b8)}}return this},empty:function(){var b6,e=0;for(;(b6=this[e])!=null;e++){if(b6.nodeType===1){bI.cleanData(l(b6,false))}while(b6.firstChild){b6.removeChild(b6.firstChild)}if(b6.options&&bI.nodeName(b6,"select")){b6.options.length=0}}return this},clone:function(b6,e){b6=b6==null?false:b6;e=e==null?b6:e;return this.map(function(){return bI.clone(this,b6,e)})},html:function(e){return aB(this,function(b9){var b8=this[0]||{},b7=0,b6=this.length;if(b9===undefined){return b8.nodeType===1?b8.innerHTML.replace(aD,""):undefined}if(typeof b9==="string"&&!an.test(b9)&&(C.htmlSerialize||!M.test(b9))&&(C.leadingWhitespace||!b5.test(b9))&&!W[(o.exec(b9)||["",""])[1].toLowerCase()]){b9=b9.replace(aH,"<$1></$2>");try{for(;b7<b6;b7++){b8=this[b7]||{};if(b8.nodeType===1){bI.cleanData(l(b8,false));b8.innerHTML=b9}}b8=0}catch(ca){}}if(b8){this.empty().append(b9)}},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];this.domManip(arguments,function(b6){e=this.parentNode;bI.cleanData(l(this));if(e){e.replaceChild(b6,this)}});return e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,true)},domManip:function(cd,ci){cd=az.apply([],cd);var cb,b7,e,b9,cg,cc,ca=0,b8=this.length,cf=this,ch=b8-1,ce=cd[0],b6=bI.isFunction(ce);if(b6||(b8>1&&typeof ce==="string"&&!C.checkClone&&bW.test(ce))){return this.each(function(ck){var cj=cf.eq(ck);if(b6){cd[0]=ce.call(this,ck,cj.html())}cj.domManip(cd,ci)})}if(b8){cc=bI.buildFragment(cd,this[0].ownerDocument,false,this);cb=cc.firstChild;if(cc.childNodes.length===1){cc=cb}if(cb){b9=bI.map(l(cc,"script"),t);e=b9.length;for(;ca<b8;ca++){b7=cc;if(ca!==ch){b7=bI.clone(b7,true,true);if(e){bI.merge(b9,l(b7,"script"))}}ci.call(this[ca],b7,ca)}if(e){cg=b9[b9.length-1].ownerDocument;bI.map(b9,bf);for(ca=0;ca<e;ca++){b7=b9[ca];if(bB.test(b7.type||"")&&!bI._data(b7,"globalEval")&&bI.contains(cg,b7)){if(b7.src){if(bI._evalUrl){bI._evalUrl(b7.src)}}else{bI.globalEval((b7.text||b7.textContent||b7.innerHTML||"").replace(aO,""))}}}}cc=cb=null}}return this}});bI.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,b6){bI.fn[e]=function(b7){var b8,ca=0,b9=[],cc=bI(b7),cb=cc.length-1;for(;ca<=cb;ca++){b8=ca===cb?this:this.clone(true);bI(cc[ca])[b6](b8);w.apply(b9,b8.get())}return this.pushStack(b9)}});var aI,bl={};function a4(e,b9){var b6,b7=bI(b9.createElement(e)).appendTo(b9.body),b8=a5.getDefaultComputedStyle&&(b6=a5.getDefaultComputedStyle(b7[0]))?b6.display:bI.css(b7[0],"display");b7.detach();return b8}function a0(b7){var b6=n,e=bl[b7];if(!e){e=a4(b7,b6);if(e==="none"||!e){aI=(aI||bI("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b6.documentElement);b6=(aI[0].contentWindow||aI[0].contentDocument).document;b6.write();b6.close();e=a4(b7,b6);aI.detach()}bl[b7]=e}return e}(function(){var e;C.shrinkWrapBlocks=function(){if(e!=null){return e}e=false;var b8,b6,b7;b6=n.getElementsByTagName("body")[0];if(!b6||!b6.style){return}b8=n.createElement("div");b7=n.createElement("div");b7.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px";b6.appendChild(b7).appendChild(b8);if(typeof b8.style.zoom!==aC){b8.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1";b8.appendChild(n.createElement("div")).style.width="5px";e=b8.offsetWidth!==3}b6.removeChild(b7);return e}})();var aZ=(/^margin/);var Y=new RegExp("^("+aE+")(?!px)[a-z%]+$","i");var bq,F,bo=/^(top|right|bottom|left)$/;if(a5.getComputedStyle){bq=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};F=function(cc,b6,cb){var b9,b8,ca,e,b7=cc.style;cb=cb||bq(cc);e=cb?cb.getPropertyValue(b6)||cb[b6]:undefined;if(cb){if(e===""&&!bI.contains(cc.ownerDocument,cc)){e=bI.style(cc,b6)}if(Y.test(e)&&aZ.test(b6)){b9=b7.width;b8=b7.minWidth;ca=b7.maxWidth;b7.minWidth=b7.maxWidth=b7.width=e;e=cb.width;b7.width=b9;b7.minWidth=b8;b7.maxWidth=ca}}return e===undefined?e:e+""}}else{if(n.documentElement.currentStyle){bq=function(e){return e.currentStyle};F=function(cb,b8,ca){var cc,b6,e,b7,b9=cb.style;ca=ca||bq(cb);b7=ca?ca[b8]:undefined;if(b7==null&&b9&&b9[b8]){b7=b9[b8]}if(Y.test(b7)&&!bo.test(b8)){cc=b9.left;b6=cb.runtimeStyle;e=b6&&b6.left;if(e){b6.left=cb.currentStyle.left}b9.left=b8==="fontSize"?"1em":b7;b7=b9.pixelLeft+"px";b9.left=cc;if(e){b6.left=e}}return b7===undefined?b7:b7+""||"auto"}}}function a7(e,b6){return{get:function(){var b7=e();if(b7==null){return}if(b7){delete this.get;return}return(this.get=b6).apply(this,arguments)}}}(function(){var cc,ca,b8,cb,b7,b9,b6;cc=n.createElement("div");cc.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";b8=cc.getElementsByTagName("a")[0];ca=b8&&b8.style;if(!ca){return}ca.cssText="float:left;opacity:.5";C.opacity=ca.opacity==="0.5";C.cssFloat=!!ca.cssFloat;cc.style.backgroundClip="content-box";cc.cloneNode(true).style.backgroundClip="";C.clearCloneStyle=cc.style.backgroundClip==="content-box";C.boxSizing=ca.boxSizing===""||ca.MozBoxSizing===""||ca.WebkitBoxSizing==="";bI.extend(C,{reliableHiddenOffsets:function(){if(b9==null){e()}return b9},boxSizingReliable:function(){if(b7==null){e()}return b7},pixelPosition:function(){if(cb==null){e()}return cb},reliableMarginRight:function(){if(b6==null){e()}return b6}});function e(){var cg,cd,ce,cf;cd=n.getElementsByTagName("body")[0];if(!cd||!cd.style){return}cg=n.createElement("div");ce=n.createElement("div");ce.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px";cd.appendChild(ce).appendChild(cg);cg.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute";cb=b7=false;b6=true;if(a5.getComputedStyle){cb=(a5.getComputedStyle(cg,null)||{}).top!=="1%";b7=(a5.getComputedStyle(cg,null)||{width:"4px"}).width==="4px";cf=cg.appendChild(n.createElement("div"));cf.style.cssText=cg.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0";cf.style.marginRight=cf.style.width="0";cg.style.width="1px";b6=!parseFloat((a5.getComputedStyle(cf,null)||{}).marginRight)}cg.innerHTML="<table><tr><td></td><td>t</td></tr></table>";cf=cg.getElementsByTagName("td");cf[0].style.cssText="margin:0;border:0;padding:0;display:none";b9=cf[0].offsetHeight===0;if(b9){cf[0].style.display="";cf[1].style.display="none";b9=cf[0].offsetHeight===0}cd.removeChild(ce)}})();bI.swap=function(ca,b9,cb,b8){var b7,b6,e={};for(b6 in b9){e[b6]=ca.style[b6];ca.style[b6]=b9[b6]}b7=cb.apply(ca,b8||[]);for(b6 in b9){ca.style[b6]=e[b6]}return b7};var bj=/alpha\([^)]*\)/i,aU=/opacity\s*=\s*([^)]*)/,G=/^(none|table(?!-c[ea]).+)/,bb=new RegExp("^("+aE+")(.*)$","i"),V=new RegExp("^([+-])=("+aE+")","i"),be={position:"absolute",visibility:"hidden",display:"block"},bD={letterSpacing:"0",fontWeight:"400"},aw=["Webkit","O","Moz","ms"];function c(b8,b6){if(b6 in b8){return b6}var b9=b6.charAt(0).toUpperCase()+b6.slice(1),e=b6,b7=aw.length;while(b7--){b6=aw[b7]+b9;if(b6 in b8){return b6}}return e}function r(cb,e){var cc,b9,ca,b6=[],b7=0,b8=cb.length;for(;b7<b8;b7++){b9=cb[b7];if(!b9.style){continue}b6[b7]=bI._data(b9,"olddisplay");cc=b9.style.display;if(e){if(!b6[b7]&&cc==="none"){b9.style.display=""}if(b9.style.display===""&&S(b9)){b6[b7]=bI._data(b9,"olddisplay",a0(b9.nodeName))}}else{ca=S(b9);if(cc&&cc!=="none"||!ca){bI._data(b9,"olddisplay",ca?cc:bI.css(b9,"display"))}}}for(b7=0;b7<b8;b7++){b9=cb[b7];if(!b9.style){continue}if(!e||b9.style.display==="none"||b9.style.display===""){b9.style.display=e?b6[b7]||"":"none"}}return cb}function aN(e,b7,b8){var b6=bb.exec(b7);return b6?Math.max(0,b6[1]-(b8||0))+(b6[2]||"px"):b7}function ax(b9,b6,e,cb,b8){var b7=e===(cb?"border":"content")?4:b6==="width"?1:0,ca=0;for(;b7<4;b7+=2){if(e==="margin"){ca+=bI.css(b9,e+bT[b7],true,b8)}if(cb){if(e==="content"){ca-=bI.css(b9,"padding"+bT[b7],true,b8)}if(e!=="margin"){ca-=bI.css(b9,"border"+bT[b7]+"Width",true,b8)}}else{ca+=bI.css(b9,"padding"+bT[b7],true,b8);if(e!=="padding"){ca+=bI.css(b9,"border"+bT[b7]+"Width",true,b8)}}}return ca}function u(b9,b6,e){var b8=true,ca=b6==="width"?b9.offsetWidth:b9.offsetHeight,b7=bq(b9),cb=C.boxSizing&&bI.css(b9,"boxSizing",false,b7)==="border-box";if(ca<=0||ca==null){ca=F(b9,b6,b7);if(ca<0||ca==null){ca=b9.style[b6]}if(Y.test(ca)){return ca}b8=cb&&(C.boxSizingReliable()||ca===b9.style[b6]);ca=parseFloat(ca)||0}return(ca+ax(b9,b6,e||(cb?"border":"content"),b8,b7))+"px"}bI.extend({cssHooks:{opacity:{get:function(b7,b6){if(b6){var e=F(b7,"opacity");return e===""?"1":e}}}},cssNumber:{columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":C.cssFloat?"cssFloat":"styleFloat"},style:function(b8,b7,ce,b9){if(!b8||b8.nodeType===3||b8.nodeType===8||!b8.style){return}var cc,cd,cf,ca=bI.camelCase(b7),b6=b8.style;b7=bI.cssProps[ca]||(bI.cssProps[ca]=c(b6,ca));cf=bI.cssHooks[b7]||bI.cssHooks[ca];if(ce!==undefined){cd=typeof ce;if(cd==="string"&&(cc=V.exec(ce))){ce=(cc[1]+1)*cc[2]+parseFloat(bI.css(b8,b7));cd="number"}if(ce==null||ce!==ce){return}if(cd==="number"&&!bI.cssNumber[ca]){ce+="px"}if(!C.clearCloneStyle&&ce===""&&b7.indexOf("background")===0){b6[b7]="inherit"}if(!cf||!("set" in cf)||(ce=cf.set(b8,ce,b9))!==undefined){try{b6[b7]=ce}catch(cb){}}}else{if(cf&&"get" in cf&&(cc=cf.get(b8,false,b9))!==undefined){return cc}return b6[b7]}},css:function(cb,b9,b6,ca){var b8,cc,e,b7=bI.camelCase(b9);b9=bI.cssProps[b7]||(bI.cssProps[b7]=c(cb.style,b7));e=bI.cssHooks[b9]||bI.cssHooks[b7];if(e&&"get" in e){cc=e.get(cb,true,b6)}if(cc===undefined){cc=F(cb,b9,ca)}if(cc==="normal"&&b9 in bD){cc=bD[b9]}if(b6===""||b6){b8=parseFloat(cc);return b6===true||bI.isNumeric(b8)?b8||0:cc}return cc}});bI.each(["height","width"],function(b6,e){bI.cssHooks[e]={get:function(b9,b8,b7){if(b8){return G.test(bI.css(b9,"display"))&&b9.offsetWidth===0?bI.swap(b9,be,function(){return u(b9,e,b7)}):u(b9,e,b7)}},set:function(b9,ca,b7){var b8=b7&&bq(b9);return aN(b9,ca,b7?ax(b9,e,b7,C.boxSizing&&bI.css(b9,"boxSizing",false,b8)==="border-box",b8):0)}}});if(!C.opacity){bI.cssHooks.opacity={get:function(b6,e){return aU.test((e&&b6.currentStyle?b6.currentStyle.filter:b6.style.filter)||"")?(0.01*parseFloat(RegExp.$1))+"":e?"1":""},set:function(b9,ca){var b8=b9.style,b6=b9.currentStyle,e=bI.isNumeric(ca)?"alpha(opacity="+ca*100+")":"",b7=b6&&b6.filter||b8.filter||"";b8.zoom=1;if((ca>=1||ca==="")&&bI.trim(b7.replace(bj,""))===""&&b8.removeAttribute){b8.removeAttribute("filter");if(ca===""||b6&&!b6.filter){return}}b8.filter=bj.test(b7)?b7.replace(bj,e):b7+" "+e}}}bI.cssHooks.marginRight=a7(C.reliableMarginRight,function(b6,e){if(e){return bI.swap(b6,{display:"inline-block"},F,[b6,"marginRight"])}});bI.each({margin:"",padding:"",border:"Width"},function(e,b6){bI.cssHooks[e+b6]={expand:function(b9){var b8=0,b7={},ca=typeof b9==="string"?b9.split(" "):[b9];for(;b8<4;b8++){b7[e+bT[b8]+b6]=ca[b8]||ca[b8-2]||ca[0]}return b7}};if(!aZ.test(e)){bI.cssHooks[e+b6].set=aN}});bI.fn.extend({css:function(e,b6){return aB(this,function(cb,b8,cc){var ca,b7,cd={},b9=0;if(bI.isArray(b8)){ca=bq(cb);b7=b8.length;for(;b9<b7;b9++){cd[b8[b9]]=bI.css(cb,b8[b9],false,ca)}return cd}return cc!==undefined?bI.style(cb,b8,cc):bI.css(cb,b8)},e,b6,arguments.length>1)},show:function(){return r(this,true)},hide:function(){return r(this)},toggle:function(e){if(typeof e==="boolean"){return e?this.show():this.hide()}return this.each(function(){if(S(this)){bI(this).show()}else{bI(this).hide()}})}});function I(b7,b6,b9,e,b8){return new I.prototype.init(b7,b6,b9,e,b8)}bI.Tween=I;I.prototype={constructor:I,init:function(b8,b6,ca,e,b9,b7){this.elem=b8;this.prop=ca;this.easing=b9||"swing";this.options=b6;this.start=this.now=this.cur();this.end=e;this.unit=b7||(bI.cssNumber[ca]?"":"px")},cur:function(){var e=I.propHooks[this.prop];return e&&e.get?e.get(this):I.propHooks._default.get(this)},run:function(b7){var b6,e=I.propHooks[this.prop];if(this.options.duration){this.pos=b6=bI.easing[this.easing](b7,this.options.duration*b7,0,1,this.options.duration)}else{this.pos=b6=b7}this.now=(this.end-this.start)*b6+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(e&&e.set){e.set(this)}else{I.propHooks._default.set(this)}return this}};I.prototype.init.prototype=I.prototype;I.propHooks={_default:{get:function(b6){var e;if(b6.elem[b6.prop]!=null&&(!b6.elem.style||b6.elem.style[b6.prop]==null)){return b6.elem[b6.prop]}e=bI.css(b6.elem,b6.prop,"");return !e||e==="auto"?0:e},set:function(e){if(bI.fx.step[e.prop]){bI.fx.step[e.prop](e)}else{if(e.elem.style&&(e.elem.style[bI.cssProps[e.prop]]!=null||bI.cssHooks[e.prop])){bI.style(e.elem,e.prop,e.now+e.unit)}else{e.elem[e.prop]=e.now}}}}};I.propHooks.scrollTop=I.propHooks.scrollLeft={set:function(e){if(e.elem.nodeType&&e.elem.parentNode){e.elem[e.prop]=e.now}}};bI.easing={linear:function(e){return e},swing:function(e){return 0.5-Math.cos(e*Math.PI)/2}};bI.fx=I.prototype.init;bI.fx.step={};var N,ae,bR=/^(?:toggle|show|hide)$/,bJ=new RegExp("^(?:([+-])=|)("+aE+")([a-z%]*)$","i"),bP=/queueHooks$/,aG=[h],a2={"*":[function(e,cb){var cd=this.createTween(e,cb),b9=cd.cur(),b8=bJ.exec(cb),cc=b8&&b8[3]||(bI.cssNumber[e]?"":"px"),b6=(bI.cssNumber[e]||cc!=="px"&&+b9)&&bJ.exec(bI.css(cd.elem,e)),b7=1,ca=20;if(b6&&b6[3]!==cc){cc=cc||b6[3];b8=b8||[];b6=+b9||1;do{b7=b7||".5";b6=b6/b7;bI.style(cd.elem,e,b6+cc)}while(b7!==(b7=cd.cur()/b9)&&b7!==1&&--ca)}if(b8){b6=cd.start=+b6||+b9||0;cd.unit=cc;cd.end=b8[1]?b6+(b8[1]+1)*b8[2]:+b8[2]}return cd}]};function bn(){setTimeout(function(){N=undefined});return(N=bI.now())}function bH(b7,b9){var b8,e={height:b7},b6=0;b9=b9?1:0;for(;b6<4;b6+=2-b9){b8=bT[b6];e["margin"+b8]=e["padding"+b8]=b7}if(b9){e.opacity=e.width=b7}return e}function bd(b9,cb,b8){var b6,ca=(a2[cb]||[]).concat(a2["*"]),e=0,b7=ca.length;for(;e<b7;e++){if((b6=ca[e].call(b8,cb,b9))){return b6}}}function h(b8,cd,e){var b7,cg,ca,cj,ck,ch,cc,cf,b9=this,ce={},b6=b8.style,cb=b8.nodeType&&S(b8),ci=bI._data(b8,"fxshow");if(!e.queue){ck=bI._queueHooks(b8,"fx");if(ck.unqueued==null){ck.unqueued=0;ch=ck.empty.fire;ck.empty.fire=function(){if(!ck.unqueued){ch()}}}ck.unqueued++;b9.always(function(){b9.always(function(){ck.unqueued--;if(!bI.queue(b8,"fx").length){ck.empty.fire()}})})}if(b8.nodeType===1&&("height" in cd||"width" in cd)){e.overflow=[b6.overflow,b6.overflowX,b6.overflowY];cc=bI.css(b8,"display");cf=cc==="none"?bI._data(b8,"olddisplay")||a0(b8.nodeName):cc;if(cf==="inline"&&bI.css(b8,"float")==="none"){if(!C.inlineBlockNeedsLayout||a0(b8.nodeName)==="inline"){b6.display="inline-block"}else{b6.zoom=1}}}if(e.overflow){b6.overflow="hidden";if(!C.shrinkWrapBlocks()){b9.always(function(){b6.overflow=e.overflow[0];b6.overflowX=e.overflow[1];b6.overflowY=e.overflow[2]})}}for(b7 in cd){cg=cd[b7];if(bR.exec(cg)){delete cd[b7];ca=ca||cg==="toggle";if(cg===(cb?"hide":"show")){if(cg==="show"&&ci&&ci[b7]!==undefined){cb=true}else{continue}}ce[b7]=ci&&ci[b7]||bI.style(b8,b7)}else{cc=undefined}}if(!bI.isEmptyObject(ce)){if(ci){if("hidden" in ci){cb=ci.hidden}}else{ci=bI._data(b8,"fxshow",{})}if(ca){ci.hidden=!cb}if(cb){bI(b8).show()}else{b9.done(function(){bI(b8).hide()})}b9.done(function(){var cl;bI._removeData(b8,"fxshow");for(cl in ce){bI.style(b8,cl,ce[cl])}});for(b7 in ce){cj=bd(cb?ci[b7]:0,b7,b9);if(!(b7 in ci)){ci[b7]=cj.start;if(cb){cj.end=cj.start;cj.start=b7==="width"||b7==="height"?1:0}}}}else{if((cc==="none"?a0(b8.nodeName):cc)==="inline"){b6.display=cc}}}function ao(b8,ca){var b7,b6,cb,b9,e;for(b7 in b8){b6=bI.camelCase(b7);cb=ca[b6];b9=b8[b7];if(bI.isArray(b9)){cb=b9[1];b9=b8[b7]=b9[0]}if(b7!==b6){b8[b6]=b9;delete b8[b7]}e=bI.cssHooks[b6];if(e&&"expand" in e){b9=e.expand(b9);delete b8[b6];for(b7 in b9){if(!(b7 in b8)){b8[b7]=b9[b7];ca[b7]=cb}}}else{ca[b6]=cb}}}function f(b7,cb,ce){var cf,e,ca=0,b6=aG.length,cd=bI.Deferred().always(function(){delete b9.elem}),b9=function(){if(e){return false}var cl=N||bn(),ci=Math.max(0,b8.startTime+b8.duration-cl),cg=ci/b8.duration||0,ck=1-cg,ch=0,cj=b8.tweens.length;for(;ch<cj;ch++){b8.tweens[ch].run(ck)}cd.notifyWith(b7,[b8,ck,ci]);if(ck<1&&cj){return ci}else{cd.resolveWith(b7,[b8]);return false}},b8=cd.promise({elem:b7,props:bI.extend({},cb),opts:bI.extend(true,{specialEasing:{}},ce),originalProperties:cb,originalOptions:ce,startTime:N||bn(),duration:ce.duration,tweens:[],createTween:function(ci,cg){var ch=bI.Tween(b7,b8.opts,ci,cg,b8.opts.specialEasing[ci]||b8.opts.easing);b8.tweens.push(ch);return ch},stop:function(ch){var cg=0,ci=ch?b8.tweens.length:0;if(e){return this}e=true;for(;cg<ci;cg++){b8.tweens[cg].run(1)}if(ch){cd.resolveWith(b7,[b8,ch])}else{cd.rejectWith(b7,[b8,ch])}return this}}),cc=b8.props;ao(cc,b8.opts.specialEasing);for(;ca<b6;ca++){cf=aG[ca].call(b8,b7,cc,b8.opts);if(cf){return cf}}bI.map(cc,bd,b8);if(bI.isFunction(b8.opts.start)){b8.opts.start.call(b7,b8)}bI.fx.timer(bI.extend(b9,{elem:b7,anim:b8,queue:b8.opts.queue}));return b8.progress(b8.opts.progress).done(b8.opts.done,b8.opts.complete).fail(b8.opts.fail).always(b8.opts.always)}bI.Animation=bI.extend(f,{tweener:function(b6,b9){if(bI.isFunction(b6)){b9=b6;b6=["*"]}else{b6=b6.split(" ")}var b8,e=0,b7=b6.length;for(;e<b7;e++){b8=b6[e];a2[b8]=a2[b8]||[];a2[b8].unshift(b9)}},prefilter:function(b6,e){if(e){aG.unshift(b6)}else{aG.push(b6)}}});bI.speed=function(b7,b8,b6){var e=b7&&typeof b7==="object"?bI.extend({},b7):{complete:b6||!b6&&b8||bI.isFunction(b7)&&b7,duration:b7,easing:b6&&b8||b8&&!bI.isFunction(b8)&&b8};e.duration=bI.fx.off?0:typeof e.duration==="number"?e.duration:e.duration in bI.fx.speeds?bI.fx.speeds[e.duration]:bI.fx.speeds._default;if(e.queue==null||e.queue===true){e.queue="fx"}e.old=e.complete;e.complete=function(){if(bI.isFunction(e.old)){e.old.call(this)}if(e.queue){bI.dequeue(this,e.queue)}};return e};bI.fn.extend({fadeTo:function(e,b8,b7,b6){return this.filter(S).css("opacity",0).show().end().animate({opacity:b8},e,b7,b6)},animate:function(cb,b8,ca,b9){var b7=bI.isEmptyObject(cb),e=bI.speed(b8,ca,b9),b6=function(){var cc=f(this,bI.extend({},cb),e);if(b7||bI._data(this,"finish")){cc.stop(true)}};b6.finish=b6;return b7||e.queue===false?this.each(b6):this.queue(e.queue,b6)},stop:function(b7,b6,e){var b8=function(b9){var ca=b9.stop;delete b9.stop;ca(e)};if(typeof b7!=="string"){e=b6;b6=b7;b7=undefined}if(b6&&b7!==false){this.queue(b7||"fx",[])}return this.each(function(){var cc=true,b9=b7!=null&&b7+"queueHooks",cb=bI.timers,ca=bI._data(this);if(b9){if(ca[b9]&&ca[b9].stop){b8(ca[b9])}}else{for(b9 in ca){if(ca[b9]&&ca[b9].stop&&bP.test(b9)){b8(ca[b9])}}}for(b9=cb.length;b9--;){if(cb[b9].elem===this&&(b7==null||cb[b9].queue===b7)){cb[b9].anim.stop(e);cc=false;cb.splice(b9,1)}}if(cc||!e){bI.dequeue(this,b7)}})},finish:function(e){if(e!==false){e=e||"fx"}return this.each(function(){var b8,cb=bI._data(this),b7=cb[e+"queue"],b6=cb[e+"queueHooks"],ca=bI.timers,b9=b7?b7.length:0;cb.finish=true;bI.queue(this,e,[]);if(b6&&b6.stop){b6.stop.call(this,true)}for(b8=ca.length;b8--;){if(ca[b8].elem===this&&ca[b8].queue===e){ca[b8].anim.stop(true);ca.splice(b8,1)}}for(b8=0;b8<b9;b8++){if(b7[b8]&&b7[b8].finish){b7[b8].finish.call(this)}}delete cb.finish})}});bI.each(["toggle","show","hide"],function(b6,e){var b7=bI.fn[e];bI.fn[e]=function(b8,ca,b9){return b8==null||typeof b8==="boolean"?b7.apply(this,arguments):this.animate(bH(e,true),b8,ca,b9)}});bI.each({slideDown:bH("show"),slideUp:bH("hide"),slideToggle:bH("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,b6){bI.fn[e]=function(b7,b9,b8){return this.animate(b6,b7,b9,b8)}});bI.timers=[];bI.fx.tick=function(){var b7,b6=bI.timers,e=0;N=bI.now();for(;e<b6.length;e++){b7=b6[e];if(!b7()&&b6[e]===b7){b6.splice(e--,1)}}if(!b6.length){bI.fx.stop()}N=undefined};bI.fx.timer=function(e){bI.timers.push(e);if(e()){bI.fx.start()}else{bI.timers.pop()}};bI.fx.interval=13;bI.fx.start=function(){if(!ae){ae=setInterval(bI.fx.tick,bI.fx.interval)}};bI.fx.stop=function(){clearInterval(ae);ae=null};bI.fx.speeds={slow:600,fast:200,_default:400};bI.fn.delay=function(b6,e){b6=bI.fx?bI.fx.speeds[b6]||b6:b6;e=e||"fx";return this.queue(e,function(b8,b7){var b9=setTimeout(b8,b6);b7.stop=function(){clearTimeout(b9)}})};(function(){var b7,b9,e,b6,b8;b9=n.createElement("div");b9.setAttribute("className","t");b9.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";b6=b9.getElementsByTagName("a")[0];e=n.createElement("select");b8=e.appendChild(n.createElement("option"));b7=b9.getElementsByTagName("input")[0];b6.style.cssText="top:1px";C.getSetAttribute=b9.className!=="t";C.style=/top/.test(b6.getAttribute("style"));C.hrefNormalized=b6.getAttribute("href")==="/a";C.checkOn=!!b7.value;C.optSelected=b8.selected;C.enctype=!!n.createElement("form").enctype;e.disabled=true;C.optDisabled=!b8.disabled;b7=n.createElement("input");b7.setAttribute("value","");C.input=b7.getAttribute("value")==="";b7.value="t";b7.setAttribute("type","radio");C.radioValue=b7.value==="t"})();var al=/\r/g;bI.fn.extend({val:function(b8){var e,b6,b9,b7=this[0];if(!arguments.length){if(b7){e=bI.valHooks[b7.type]||bI.valHooks[b7.nodeName.toLowerCase()];if(e&&"get" in e&&(b6=e.get(b7,"value"))!==undefined){return b6}b6=b7.value;return typeof b6==="string"?b6.replace(al,""):b6==null?"":b6}return}b9=bI.isFunction(b8);return this.each(function(ca){var cb;if(this.nodeType!==1){return}if(b9){cb=b8.call(this,ca,bI(this).val())}else{cb=b8}if(cb==null){cb=""}else{if(typeof cb==="number"){cb+=""}else{if(bI.isArray(cb)){cb=bI.map(cb,function(cc){return cc==null?"":cc+""})}}}e=bI.valHooks[this.type]||bI.valHooks[this.nodeName.toLowerCase()];if(!e||!("set" in e)||e.set(this,cb,"value")===undefined){this.value=cb}})}});bI.extend({valHooks:{option:{get:function(e){var b6=bI.find.attr(e,"value");return b6!=null?b6:bI.trim(bI.text(e))}},select:{get:function(e){var cb,b7,cd=e.options,b9=e.selectedIndex,b8=e.type==="select-one"||b9<0,cc=b8?null:[],ca=b8?b9+1:cd.length,b6=b9<0?ca:b8?b9:0;for(;b6<ca;b6++){b7=cd[b6];if((b7.selected||b6===b9)&&(C.optDisabled?!b7.disabled:b7.getAttribute("disabled")===null)&&(!b7.parentNode.disabled||!bI.nodeName(b7.parentNode,"optgroup"))){cb=bI(b7).val();if(b8){return cb}cc.push(cb)}}return cc},set:function(ca,cb){var cc,b9,b7=ca.options,e=bI.makeArray(cb),b8=b7.length;while(b8--){b9=b7[b8];if(bI.inArray(bI.valHooks.option.get(b9),e)>=0){try{b9.selected=cc=true}catch(b6){b9.scrollHeight}}else{b9.selected=false}}if(!cc){ca.selectedIndex=-1}return b7}}}});bI.each(["radio","checkbox"],function(){bI.valHooks[this]={set:function(e,b6){if(bI.isArray(b6)){return(e.checked=bI.inArray(bI(e).val(),b6)>=0)}}};if(!C.checkOn){bI.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value}}});var ba,b3,bO=bI.expr.attrHandle,aq=/^(?:checked|selected)$/i,bN=C.getSetAttribute,bF=C.input;bI.fn.extend({attr:function(e,b6){return aB(this,bI.attr,e,b6,arguments.length>1)},removeAttr:function(e){return this.each(function(){bI.removeAttr(this,e)})}});bI.extend({attr:function(b9,b8,ca){var e,b7,b6=b9.nodeType;if(!b9||b6===3||b6===8||b6===2){return}if(typeof b9.getAttribute===aC){return bI.prop(b9,b8,ca)}if(b6!==1||!bI.isXMLDoc(b9)){b8=b8.toLowerCase();e=bI.attrHooks[b8]||(bI.expr.match.bool.test(b8)?b3:ba)}if(ca!==undefined){if(ca===null){bI.removeAttr(b9,b8)}else{if(e&&"set" in e&&(b7=e.set(b9,ca,b8))!==undefined){return b7}else{b9.setAttribute(b8,ca+"");return ca}}}else{if(e&&"get" in e&&(b7=e.get(b9,b8))!==null){return b7}else{b7=bI.find.attr(b9,b8);return b7==null?undefined:b7}}},removeAttr:function(b7,b9){var e,b8,b6=0,ca=b9&&b9.match(aF);if(ca&&b7.nodeType===1){while((e=ca[b6++])){b8=bI.propFix[e]||e;if(bI.expr.match.bool.test(e)){if(bF&&bN||!aq.test(e)){b7[b8]=false}else{b7[bI.camelCase("default-"+e)]=b7[b8]=false}}else{bI.attr(b7,e,"")}b7.removeAttribute(bN?e:b8)}}},attrHooks:{type:{set:function(e,b6){if(!C.radioValue&&b6==="radio"&&bI.nodeName(e,"input")){var b7=e.value;e.setAttribute("type",b6);if(b7){e.value=b7}return b6}}}}});b3={set:function(b6,b7,e){if(b7===false){bI.removeAttr(b6,e)}else{if(bF&&bN||!aq.test(e)){b6.setAttribute(!bN&&bI.propFix[e]||e,e)}else{b6[bI.camelCase("default-"+e)]=b6[e]=true}}return e}};bI.each(bI.expr.match.bool.source.match(/\w+/g),function(b7,b6){var e=bO[b6]||bI.find.attr;bO[b6]=bF&&bN||!aq.test(b6)?function(ca,b9,cc){var b8,cb;if(!cc){cb=bO[b9];bO[b9]=b8;b8=e(ca,b9,cc)!=null?b9.toLowerCase():null;bO[b9]=cb}return b8}:function(b9,b8,ca){if(!ca){return b9[bI.camelCase("default-"+b8)]?b8.toLowerCase():null}}});if(!bF||!bN){bI.attrHooks.value={set:function(b6,b7,e){if(bI.nodeName(b6,"input")){b6.defaultValue=b7}else{return ba&&ba.set(b6,b7,e)}}}}if(!bN){ba={set:function(b7,b8,b6){var e=b7.getAttributeNode(b6);if(!e){b7.setAttributeNode((e=b7.ownerDocument.createAttribute(b6)))}e.value=b8+="";if(b6==="value"||b8===b7.getAttribute(b6)){return b8}}};bO.id=bO.name=bO.coords=function(b7,b6,b8){var e;if(!b8){return(e=b7.getAttributeNode(b6))&&e.value!==""?e.value:null}};bI.valHooks.button={get:function(b7,b6){var e=b7.getAttributeNode(b6);if(e&&e.specified){return e.value}},set:ba.set};bI.attrHooks.contenteditable={set:function(b6,b7,e){ba.set(b6,b7===""?false:b7,e)}};bI.each(["width","height"],function(b6,e){bI.attrHooks[e]={set:function(b7,b8){if(b8===""){b7.setAttribute(e,"auto");return b8}}}})}if(!C.style){bI.attrHooks.style={get:function(e){return e.style.cssText||undefined},set:function(e,b6){return(e.style.cssText=b6+"")}}}var aJ=/^(?:input|select|textarea|button|object)$/i,E=/^(?:a|area)$/i;bI.fn.extend({prop:function(e,b6){return aB(this,bI.prop,e,b6,arguments.length>1)},removeProp:function(e){e=bI.propFix[e]||e;return this.each(function(){try{this[e]=undefined;delete this[e]}catch(b6){}})}});bI.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(ca,b8,cb){var b7,e,b9,b6=ca.nodeType;if(!ca||b6===3||b6===8||b6===2){return}b9=b6!==1||!bI.isXMLDoc(ca);if(b9){b8=bI.propFix[b8]||b8;e=bI.propHooks[b8]}if(cb!==undefined){return e&&"set" in e&&(b7=e.set(ca,cb,b8))!==undefined?b7:(ca[b8]=cb)}else{return e&&"get" in e&&(b7=e.get(ca,b8))!==null?b7:ca[b8]}},propHooks:{tabIndex:{get:function(b6){var e=bI.find.attr(b6,"tabindex");return e?parseInt(e,10):aJ.test(b6.nodeName)||E.test(b6.nodeName)&&b6.href?0:-1}}}});if(!C.hrefNormalized){bI.each(["href","src"],function(b6,e){bI.propHooks[e]={get:function(b7){return b7.getAttribute(e,4)}}})}if(!C.optSelected){bI.propHooks.selected={get:function(b6){var e=b6.parentNode;if(e){e.selectedIndex;if(e.parentNode){e.parentNode.selectedIndex}}return null}}}bI.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){bI.propFix[this.toLowerCase()]=this});if(!C.enctype){bI.propFix.enctype="encoding"}var bL=/[\t\r\n\f]/g;bI.fn.extend({addClass:function(cd){var b7,b6,ce,cb,b8,e,b9=0,ca=this.length,cc=typeof cd==="string"&&cd;if(bI.isFunction(cd)){return this.each(function(cf){bI(this).addClass(cd.call(this,cf,this.className))})}if(cc){b7=(cd||"").match(aF)||[];for(;b9<ca;b9++){b6=this[b9];ce=b6.nodeType===1&&(b6.className?(" "+b6.className+" ").replace(bL," "):" ");if(ce){b8=0;while((cb=b7[b8++])){if(ce.indexOf(" "+cb+" ")<0){ce+=cb+" "}}e=bI.trim(ce);if(b6.className!==e){b6.className=e}}}}return this},removeClass:function(cd){var b7,b6,ce,cb,b8,e,b9=0,ca=this.length,cc=arguments.length===0||typeof cd==="string"&&cd;if(bI.isFunction(cd)){return this.each(function(cf){bI(this).removeClass(cd.call(this,cf,this.className))})}if(cc){b7=(cd||"").match(aF)||[];for(;b9<ca;b9++){b6=this[b9];ce=b6.nodeType===1&&(b6.className?(" "+b6.className+" ").replace(bL," "):"");if(ce){b8=0;while((cb=b7[b8++])){while(ce.indexOf(" "+cb+" ")>=0){ce=ce.replace(" "+cb+" "," ")}}e=cd?bI.trim(ce):"";if(b6.className!==e){b6.className=e}}}}return this},toggleClass:function(b7,e){var b6=typeof b7;if(typeof e==="boolean"&&b6==="string"){return e?this.addClass(b7):this.removeClass(b7)}if(bI.isFunction(b7)){return this.each(function(b8){bI(this).toggleClass(b7.call(this,b8,this.className,e),e)})}return this.each(function(){if(b6==="string"){var ca,b9=0,b8=bI(this),cb=b7.match(aF)||[];while((ca=cb[b9++])){if(b8.hasClass(ca)){b8.removeClass(ca)}else{b8.addClass(ca)}}}else{if(b6===aC||b6==="boolean"){if(this.className){bI._data(this,"__className__",this.className)}this.className=this.className||b7===false?"":bI._data(this,"__className__")||""}}})},hasClass:function(e){var b8=" "+e+" ",b7=0,b6=this.length;for(;b7<b6;b7++){if(this[b7].nodeType===1&&(" "+this[b7].className+" ").replace(bL," ").indexOf(b8)>=0){return true}}return false}});bI.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu").split(" "),function(b6,e){bI.fn[e]=function(b8,b7){return arguments.length>0?this.on(e,null,b8,b7):this.trigger(e)}});bI.fn.extend({hover:function(e,b6){return this.mouseenter(e).mouseleave(b6||e)},bind:function(e,b7,b6){return this.on(e,null,b7,b6)},unbind:function(e,b6){return this.off(e,null,b6)},delegate:function(e,b6,b8,b7){return this.on(b6,e,b8,b7)},undelegate:function(e,b6,b7){return arguments.length===1?this.off(e,"**"):this.off(b6,e||"**",b7)}});var bp=bI.now();var bQ=(/\?/);var a1=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;bI.parseJSON=function(e){if(a5.JSON&&a5.JSON.parse){return a5.JSON.parse(e+"")}var b8,b7=null,b6=bI.trim(e+"");return b6&&!bI.trim(b6.replace(a1,function(cb,b9,ca,cc){if(b8&&b9){b7=0}if(b7===0){return cb}b8=ca||b9;b7+=!cc-!ca;return""}))?(Function("return "+b6))():bI.error("Invalid JSON: "+e)};bI.parseXML=function(b8){var b6,b7;if(!b8||typeof b8!=="string"){return null}try{if(a5.DOMParser){b7=new DOMParser();b6=b7.parseFromString(b8,"text/xml")}else{b6=new ActiveXObject("Microsoft.XMLDOM");b6.async="false";b6.loadXML(b8)}}catch(b9){b6=undefined}if(!b6||!b6.documentElement||b6.getElementsByTagName("parsererror").length){bI.error("Invalid XML: "+b8)}return b6};var b4,aa,ap=/#.*$/,R=/([?&])_=[^&]*/,ah=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,B=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,q=/^(?:GET|HEAD)$/,aK=/^\/\//,aV=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,v={},a9={},aX="*/".concat("*");try{aa=location.href}catch(bi){aa=n.createElement("a");aa.href="";aa=aa.href}b4=aV.exec(aa.toLowerCase())||[];function bK(e){return function(b9,ca){if(typeof b9!=="string"){ca=b9;b9="*"}var b6,b7=0,b8=b9.toLowerCase().match(aF)||[];if(bI.isFunction(ca)){while((b6=b8[b7++])){if(b6.charAt(0)==="+"){b6=b6.slice(1)||"*";(e[b6]=e[b6]||[]).unshift(ca)}else{(e[b6]=e[b6]||[]).push(ca)}}}}}function p(e,b7,cb,b8){var b6={},b9=(e===a9);function ca(cc){var cd;b6[cc]=true;bI.each(e[cc]||[],function(cf,ce){var cg=ce(b7,cb,b8);if(typeof cg==="string"&&!b9&&!b6[cg]){b7.dataTypes.unshift(cg);ca(cg);return false}else{if(b9){return !(cd=cg)}}});return cd}return ca(b7.dataTypes[0])||!b6["*"]&&ca("*")}function s(b7,b8){var e,b6,b9=bI.ajaxSettings.flatOptions||{};for(b6 in b8){if(b8[b6]!==undefined){(b9[b6]?b7:(e||(e={})))[b6]=b8[b6]}}if(e){bI.extend(true,b7,e)}return b7}function g(cd,cc,b9){var e,b8,b7,ca,b6=cd.contents,cb=cd.dataTypes;while(cb[0]==="*"){cb.shift();if(b8===undefined){b8=cd.mimeType||cc.getResponseHeader("Content-Type")}}if(b8){for(ca in b6){if(b6[ca]&&b6[ca].test(b8)){cb.unshift(ca);break}}}if(cb[0] in b9){b7=cb[0]}else{for(ca in b9){if(!cb[0]||cd.converters[ca+" "+cb[0]]){b7=ca;break}if(!e){e=ca}}b7=b7||e}if(b7){if(b7!==cb[0]){cb.unshift(b7)}return b9[b7]}}function ag(ch,b9,ce,b7){var b6,cc,cf,ca,b8,cg={},cd=ch.dataTypes.slice();if(cd[1]){for(cf in ch.converters){cg[cf.toLowerCase()]=ch.converters[cf]}}cc=cd.shift();while(cc){if(ch.responseFields[cc]){ce[ch.responseFields[cc]]=b9}if(!b8&&b7&&ch.dataFilter){b9=ch.dataFilter(b9,ch.dataType)}b8=cc;cc=cd.shift();if(cc){if(cc==="*"){cc=b8}else{if(b8!=="*"&&b8!==cc){cf=cg[b8+" "+cc]||cg["* "+cc];if(!cf){for(b6 in cg){ca=b6.split(" ");if(ca[1]===cc){cf=cg[b8+" "+ca[0]]||cg["* "+ca[0]];if(cf){if(cf===true){cf=cg[b6]}else{if(cg[b6]!==true){cc=ca[0];cd.unshift(ca[1])}}break}}}}if(cf!==true){if(cf&&ch["throws"]){b9=cf(b9)}else{try{b9=cf(b9)}catch(cb){return{state:"parsererror",error:cf?cb:"No conversion from "+b8+" to "+cc}}}}}}}}return{state:"success",data:b9}}bI.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:aa,type:"GET",isLocal:B.test(b4[1]),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":aX,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":bI.parseJSON,"text xml":bI.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(b6,e){return e?s(s(b6,bI.ajaxSettings),e):s(bI.ajaxSettings,b6)},ajaxPrefilter:bK(v),ajaxTransport:bK(a9),ajax:function(ca,b7){if(typeof ca==="object"){b7=ca;ca=undefined}b7=b7||{};var cj,cl,cb,cq,cf,b6,cm,b8,ce=bI.ajaxSetup({},b7),cs=ce.context||ce,ch=ce.context&&(cs.nodeType||cs.jquery)?bI(cs):bI.event,cr=bI.Deferred(),co=bI.Callbacks("once memory"),cc=ce.statusCode||{},ci={},cp={},b9=0,cd="canceled",ck={readyState:0,getResponseHeader:function(ct){var e;if(b9===2){if(!b8){b8={};while((e=ah.exec(cq))){b8[e[1].toLowerCase()]=e[2]}}e=b8[ct.toLowerCase()]}return e==null?null:e},getAllResponseHeaders:function(){return b9===2?cq:null},setRequestHeader:function(ct,cu){var e=ct.toLowerCase();if(!b9){ct=cp[e]=cp[e]||ct;ci[ct]=cu}return this},overrideMimeType:function(e){if(!b9){ce.mimeType=e}return this},statusCode:function(ct){var e;if(ct){if(b9<2){for(e in ct){cc[e]=[cc[e],ct[e]]}}else{ck.always(ct[ck.status])}}return this},abort:function(ct){var e=ct||cd;if(cm){cm.abort(e)}cg(0,e);return this}};cr.promise(ck).complete=co.add;ck.success=ck.done;ck.error=ck.fail;ce.url=((ca||ce.url||aa)+"").replace(ap,"").replace(aK,b4[1]+"//");ce.type=b7.method||b7.type||ce.method||ce.type;ce.dataTypes=bI.trim(ce.dataType||"*").toLowerCase().match(aF)||[""];if(ce.crossDomain==null){cj=aV.exec(ce.url.toLowerCase());ce.crossDomain=!!(cj&&(cj[1]!==b4[1]||cj[2]!==b4[2]||(cj[3]||(cj[1]==="http:"?"80":"443"))!==(b4[3]||(b4[1]==="http:"?"80":"443"))))}if(ce.data&&ce.processData&&typeof ce.data!=="string"){ce.data=bI.param(ce.data,ce.traditional)}p(v,ce,b7,ck);if(b9===2){return ck}b6=ce.global;if(b6&&bI.active++===0){bI.event.trigger("ajaxStart")}ce.type=ce.type.toUpperCase();ce.hasContent=!q.test(ce.type);cb=ce.url;if(!ce.hasContent){if(ce.data){cb=(ce.url+=(bQ.test(cb)?"&":"?")+ce.data);delete ce.data}if(ce.cache===false){ce.url=R.test(cb)?cb.replace(R,"$1_="+bp++):cb+(bQ.test(cb)?"&":"?")+"_="+bp++}}if(ce.ifModified){if(bI.lastModified[cb]){ck.setRequestHeader("If-Modified-Since",bI.lastModified[cb])}if(bI.etag[cb]){ck.setRequestHeader("If-None-Match",bI.etag[cb])}}if(ce.data&&ce.hasContent&&ce.contentType!==false||b7.contentType){ck.setRequestHeader("Content-Type",ce.contentType)}ck.setRequestHeader("Accept",ce.dataTypes[0]&&ce.accepts[ce.dataTypes[0]]?ce.accepts[ce.dataTypes[0]]+(ce.dataTypes[0]!=="*"?", "+aX+"; q=0.01":""):ce.accepts["*"]);for(cl in ce.headers){ck.setRequestHeader(cl,ce.headers[cl])}if(ce.beforeSend&&(ce.beforeSend.call(cs,ck,ce)===false||b9===2)){return ck.abort()}cd="abort";for(cl in {success:1,error:1,complete:1}){ck[cl](ce[cl])}cm=p(a9,ce,b7,ck);if(!cm){cg(-1,"No Transport")}else{ck.readyState=1;if(b6){ch.trigger("ajaxSend",[ck,ce])}if(ce.async&&ce.timeout>0){cf=setTimeout(function(){ck.abort("timeout")},ce.timeout)}try{b9=1;cm.send(ci,cg)}catch(cn){if(b9<2){cg(-1,cn)}else{throw cn}}}function cg(cx,ct,cy,cv){var e,cB,cz,cw,cA,cu=ct;if(b9===2){return}b9=2;if(cf){clearTimeout(cf)}cm=undefined;cq=cv||"";ck.readyState=cx>0?4:0;e=cx>=200&&cx<300||cx===304;if(cy){cw=g(ce,ck,cy)}cw=ag(ce,cw,ck,e);if(e){if(ce.ifModified){cA=ck.getResponseHeader("Last-Modified");if(cA){bI.lastModified[cb]=cA}cA=ck.getResponseHeader("etag");if(cA){bI.etag[cb]=cA}}if(cx===204||ce.type==="HEAD"){cu="nocontent"}else{if(cx===304){cu="notmodified"}else{cu=cw.state;cB=cw.data;cz=cw.error;e=!cz}}}else{cz=cu;if(cx||!cu){cu="error";if(cx<0){cx=0}}}ck.status=cx;ck.statusText=(ct||cu)+"";if(e){cr.resolveWith(cs,[cB,cu,ck])}else{cr.rejectWith(cs,[ck,cu,cz])}ck.statusCode(cc);cc=undefined;if(b6){ch.trigger(e?"ajaxSuccess":"ajaxError",[ck,ce,e?cB:cz])}co.fireWith(cs,[ck,cu]);if(b6){ch.trigger("ajaxComplete",[ck,ce]);if(!(--bI.active)){bI.event.trigger("ajaxStop")}}}return ck},getJSON:function(e,b6,b7){return bI.get(e,b6,b7,"json")},getScript:function(e,b6){return bI.get(e,undefined,b6,"script")}});bI.each(["get","post"],function(e,b6){bI[b6]=function(b7,b9,ca,b8){if(bI.isFunction(b9)){b8=b8||ca;ca=b9;b9=undefined}return bI.ajax({url:b7,type:b6,dataType:b8,data:b9,success:ca})}});bI.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,b6){bI.fn[b6]=function(b7){return this.on(b6,b7)}});bI._evalUrl=function(e){return bI.ajax({url:e,type:"GET",dataType:"script",async:false,global:false,"throws":true})};bI.fn.extend({wrapAll:function(e){if(bI.isFunction(e)){return this.each(function(b7){bI(this).wrapAll(e.call(this,b7))})}if(this[0]){var b6=bI(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){b6.insertBefore(this[0])}b6.map(function(){var b7=this;while(b7.firstChild&&b7.firstChild.nodeType===1){b7=b7.firstChild}return b7}).append(this)}return this},wrapInner:function(e){if(bI.isFunction(e)){return this.each(function(b6){bI(this).wrapInner(e.call(this,b6))})}return this.each(function(){var b6=bI(this),b7=b6.contents();if(b7.length){b7.wrapAll(e)}else{b6.append(e)}})},wrap:function(e){var b6=bI.isFunction(e);return this.each(function(b7){bI(this).wrapAll(b6?e.call(this,b7):e)})},unwrap:function(){return this.parent().each(function(){if(!bI.nodeName(this,"body")){bI(this).replaceWith(this.childNodes)}}).end()}});bI.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||(!C.reliableHiddenOffsets()&&((e.style&&e.style.display)||bI.css(e,"display"))==="none")};bI.expr.filters.visible=function(e){return !bI.expr.filters.hidden(e)};var bw=/%20/g,aS=/\[\]$/,X=/\r?\n/g,b=/^(?:submit|button|image|reset|file)$/i,au=/^(?:input|select|textarea|keygen)/i;function j(b7,b9,b6,b8){var e;if(bI.isArray(b9)){bI.each(b9,function(cb,ca){if(b6||aS.test(b7)){b8(b7,ca)}else{j(b7+"["+(typeof ca==="object"?cb:"")+"]",ca,b6,b8)}})}else{if(!b6&&bI.type(b9)==="object"){for(e in b9){j(b7+"["+e+"]",b9[e],b6,b8)}}else{b8(b7,b9)}}}bI.param=function(e,b7){var b8,b6=[],b9=function(ca,cb){cb=bI.isFunction(cb)?cb():(cb==null?"":cb);b6[b6.length]=encodeURIComponent(ca)+"="+encodeURIComponent(cb)};if(b7===undefined){b7=bI.ajaxSettings&&bI.ajaxSettings.traditional}if(bI.isArray(e)||(e.jquery&&!bI.isPlainObject(e))){bI.each(e,function(){b9(this.name,this.value)})}else{for(b8 in e){j(b8,e[b8],b7,b9)}}return b6.join("&").replace(bw,"+")};bI.fn.extend({serialize:function(){return bI.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=bI.prop(this,"elements");return e?bI.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!bI(this).is(":disabled")&&au.test(this.nodeName)&&!b.test(e)&&(this.checked||!aM.test(e))}).map(function(e,b6){var b7=bI(this).val();return b7==null?null:bI.isArray(b7)?bI.map(b7,function(b8){return{name:b6.name,value:b8.replace(X,"\r\n")}}):{name:b6.name,value:b7.replace(X,"\r\n")}}).get()}});bI.ajaxSettings.xhr=a5.ActiveXObject!==undefined?function(){return !this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&bE()||bg()}:bE;var aA=0,aj={},ay=bI.ajaxSettings.xhr();if(a5.ActiveXObject){bI(a5).on("unload",function(){for(var e in aj){aj[e](undefined,true)}})}C.cors=!!ay&&("withCredentials" in ay);ay=C.ajax=!!ay;if(ay){bI.ajaxTransport(function(e){if(!e.crossDomain||C.cors){var b6;return{send:function(ca,b7){var b8,b9=e.xhr(),cb=++aA;b9.open(e.type,e.url,e.async,e.username,e.password);if(e.xhrFields){for(b8 in e.xhrFields){b9[b8]=e.xhrFields[b8]}}if(e.mimeType&&b9.overrideMimeType){b9.overrideMimeType(e.mimeType)}if(!e.crossDomain&&!ca["X-Requested-With"]){ca["X-Requested-With"]="XMLHttpRequest"}for(b8 in ca){if(ca[b8]!==undefined){b9.setRequestHeader(b8,ca[b8]+"")}}b9.send((e.hasContent&&e.data)||null);b6=function(ce,cd){var cc,ch,cf;if(b6&&(cd||b9.readyState===4)){delete aj[cb];b6=undefined;b9.onreadystatechange=bI.noop;if(cd){if(b9.readyState!==4){b9.abort()}}else{cf={};cc=b9.status;if(typeof b9.responseText==="string"){cf.text=b9.responseText}try{ch=b9.statusText}catch(cg){ch=""}if(!cc&&e.isLocal&&!e.crossDomain){cc=cf.text?200:404}else{if(cc===1223){cc=204}}}}if(cf){b7(cc,ch,cf,b9.getAllResponseHeaders())}};if(!e.async){b6()}else{if(b9.readyState===4){setTimeout(b6)}else{b9.onreadystatechange=aj[cb]=b6}}},abort:function(){if(b6){b6(undefined,true)}}}}})}function bE(){try{return new a5.XMLHttpRequest()}catch(b6){}}function bg(){try{return new a5.ActiveXObject("Microsoft.XMLHTTP")}catch(b6){}}bI.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){bI.globalEval(e);return e}}});bI.ajaxPrefilter("script",function(e){if(e.cache===undefined){e.cache=false}if(e.crossDomain){e.type="GET";e.global=false}});bI.ajaxTransport("script",function(b7){if(b7.crossDomain){var e,b6=n.head||bI("head")[0]||n.documentElement;return{send:function(b8,b9){e=n.createElement("script");e.async=true;if(b7.scriptCharset){e.charset=b7.scriptCharset}e.src=b7.url;e.onload=e.onreadystatechange=function(cb,ca){if(ca||!e.readyState||/loaded|complete/.test(e.readyState)){e.onload=e.onreadystatechange=null;if(e.parentNode){e.parentNode.removeChild(e)}e=null;if(!ca){b9(200,"success")}}};b6.insertBefore(e,b6.firstChild)},abort:function(){if(e){e.onload(undefined,true)}}}}});var bs=[],a8=/(=)\?(?=&|$)|\?\?/;bI.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=bs.pop()||(bI.expando+"_"+(bp++));this[e]=true;return e}});bI.ajaxPrefilter("json jsonp",function(b8,e,b9){var cb,b6,b7,ca=b8.jsonp!==false&&(a8.test(b8.url)?"url":typeof b8.data==="string"&&!(b8.contentType||"").indexOf("application/x-www-form-urlencoded")&&a8.test(b8.data)&&"data");if(ca||b8.dataTypes[0]==="jsonp"){cb=b8.jsonpCallback=bI.isFunction(b8.jsonpCallback)?b8.jsonpCallback():b8.jsonpCallback;if(ca){b8[ca]=b8[ca].replace(a8,"$1"+cb)}else{if(b8.jsonp!==false){b8.url+=(bQ.test(b8.url)?"&":"?")+b8.jsonp+"="+cb}}b8.converters["script json"]=function(){if(!b7){bI.error(cb+" was not called")}return b7[0]};b8.dataTypes[0]="json";b6=a5[cb];a5[cb]=function(){b7=arguments};b9.always(function(){a5[cb]=b6;if(b8[cb]){b8.jsonpCallback=e.jsonpCallback;bs.push(cb)}if(b7&&bI.isFunction(b6)){b6(b7[0])}b7=b6=undefined});return"script"}});bI.parseHTML=function(b9,b7,b8){if(!b9||typeof b9!=="string"){return null}if(typeof b7==="boolean"){b8=b7;b7=false}b7=b7||n;var b6=a.exec(b9),e=!b8&&[];if(b6){return[b7.createElement(b6[1])]}b6=bI.buildFragment([b9],b7,e);if(e&&e.length){bI(e).remove()}return bI.merge([],b6.childNodes)};var b1=bI.fn.load;bI.fn.load=function(b8,cb,cc){if(typeof b8!=="string"&&b1){return b1.apply(this,arguments)}var e,b7,b9,b6=this,ca=b8.indexOf(" ");if(ca>=0){e=bI.trim(b8.slice(ca,b8.length));b8=b8.slice(0,ca)}if(bI.isFunction(cb)){cc=cb;cb=undefined}else{if(cb&&typeof cb==="object"){b9="POST"}}if(b6.length>0){bI.ajax({url:b8,type:b9,dataType:"html",data:cb}).done(function(cd){b7=arguments;b6.html(e?bI("<div>").append(bI.parseHTML(cd)).find(e):cd)}).complete(cc&&function(ce,cd){b6.each(cc,b7||[ce.responseText,cd,ce])})}return this};bI.expr.filters.animated=function(e){return bI.grep(bI.timers,function(b6){return e===b6.elem}).length};var bX=a5.document.documentElement;function br(e){return bI.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:false}bI.offset={setOffset:function(b7,ch,cb){var cd,ca,e,b8,b6,cf,cg,cc=bI.css(b7,"position"),b9=bI(b7),ce={};if(cc==="static"){b7.style.position="relative"}b6=b9.offset();e=bI.css(b7,"top");cf=bI.css(b7,"left");cg=(cc==="absolute"||cc==="fixed")&&bI.inArray("auto",[e,cf])>-1;if(cg){cd=b9.position();b8=cd.top;ca=cd.left}else{b8=parseFloat(e)||0;ca=parseFloat(cf)||0}if(bI.isFunction(ch)){ch=ch.call(b7,cb,b6)}if(ch.top!=null){ce.top=(ch.top-b6.top)+b8}if(ch.left!=null){ce.left=(ch.left-b6.left)+ca}if("using" in ch){ch.using.call(b7,ce)}else{b9.css(ce)}}};bI.fn.extend({offset:function(b6){if(arguments.length){return b6===undefined?this:this.each(function(cb){bI.offset.setOffset(this,b6,cb)})}var e,ca,b8={top:0,left:0},b7=this[0],b9=b7&&b7.ownerDocument;if(!b9){return}e=b9.documentElement;if(!bI.contains(e,b7)){return b8}if(typeof b7.getBoundingClientRect!==aC){b8=b7.getBoundingClientRect()}ca=br(b9);return{top:b8.top+(ca.pageYOffset||e.scrollTop)-(e.clientTop||0),left:b8.left+(ca.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}},position:function(){if(!this[0]){return}var b7,b8,e={top:0,left:0},b6=this[0];if(bI.css(b6,"position")==="fixed"){b8=b6.getBoundingClientRect()}else{b7=this.offsetParent();b8=this.offset();if(!bI.nodeName(b7[0],"html")){e=b7.offset()}e.top+=bI.css(b7[0],"borderTopWidth",true);e.left+=bI.css(b7[0],"borderLeftWidth",true)}return{top:b8.top-e.top-bI.css(b6,"marginTop",true),left:b8.left-e.left-bI.css(b6,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||bX;while(e&&(!bI.nodeName(e,"html")&&bI.css(e,"position")==="static")){e=e.offsetParent}return e||bX})}});bI.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b7,b6){var e=/Y/.test(b6);bI.fn[b7]=function(b8){return aB(this,function(b9,cc,cb){var ca=br(b9);if(cb===undefined){return ca?(b6 in ca)?ca[b6]:ca.document.documentElement[cc]:b9[cc]}if(ca){ca.scrollTo(!e?cb:bI(ca).scrollLeft(),e?cb:bI(ca).scrollTop())}else{b9[cc]=cb}},b7,b8,arguments.length,null)}});bI.each(["top","left"],function(e,b6){bI.cssHooks[b6]=a7(C.pixelPosition,function(b8,b7){if(b7){b7=F(b8,b6);return Y.test(b7)?bI(b8).position()[b6]+"px":b7}})});bI.each({Height:"height",Width:"width"},function(e,b6){bI.each({padding:"inner"+e,content:b6,"":"outer"+e},function(b7,b8){bI.fn[b8]=function(cc,cb){var ca=arguments.length&&(b7||typeof cc!=="boolean"),b9=b7||(cc===true||cb===true?"margin":"border");return aB(this,function(ce,cd,cf){var cg;if(bI.isWindow(ce)){return ce.document.documentElement["client"+e]}if(ce.nodeType===9){cg=ce.documentElement;return Math.max(ce.body["scroll"+e],cg["scroll"+e],ce.body["offset"+e],cg["offset"+e],cg["client"+e])}return cf===undefined?bI.css(ce,cd,b9):bI.style(ce,cd,cf,b9)},b6,ca?cc:undefined,ca,null)}})});bI.fn.size=function(){return this.length};bI.fn.andSelf=bI.fn.addBack;if(typeof define==="function"&&define.amd){define("jquery",[],function(){return bI})}var bk=a5.jQuery,H=a5.$;bI.noConflict=function(e){if(a5.$===bI){a5.$=H}if(e&&a5.jQuery===bI){a5.jQuery=bk}return bI};if(typeof av===aC){a5.jQuery=a5.$=bI}return bI}));(function(){var w=this;var l=w._;var J=Array.prototype,g=Object.prototype,o=Function.prototype;var N=J.push,m=J.slice,c=g.toString,k=g.hasOwnProperty;var t=Array.isArray,e=Object.keys,K=o.bind,C=Object.create;var F=function(){};var R=function(S){if(S instanceof R){return S}if(!(this instanceof R)){return new R(S)}this._wrapped=S};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=R}exports._=R}else{w._=R}R.VERSION="1.8.3";var b=function(T,S,U){if(S===void 0){return T}switch(U==null?3:U){case 1:return function(V){return T.call(S,V)};case 2:return function(W,V){return T.call(S,W,V)};case 3:return function(W,V,X){return T.call(S,W,V,X)};case 4:return function(V,X,W,Y){return T.call(S,V,X,W,Y)}}return function(){return T.apply(S,arguments)}};var G=function(T,S,U){if(T==null){return R.identity}if(R.isFunction(T)){return b(T,S,U)}if(R.isObject(T)){return R.matcher(T)}return R.property(T)};R.iteratee=function(T,S){return G(T,S,Infinity)};var q=function(T,S){return function(ab){var Z=arguments.length;if(Z<2||ab==null){return ab}for(var V=1;V<Z;V++){var aa=arguments[V],Y=T(aa),U=Y.length;for(var X=0;X<U;X++){var W=Y[X];if(!S||ab[W]===void 0){ab[W]=aa[W]}}}return ab}};var D=function(T){if(!R.isObject(T)){return{}}if(C){return C(T)}F.prototype=T;var S=new F;F.prototype=null;return S};var O=function(S){return function(T){return T==null?void 0:T[S]}};var M=Math.pow(2,53)-1;var Q=O("length");var E=function(T){var S=Q(T);return typeof S=="number"&&S>=0&&S<=M};R.each=R.forEach=function(W,X,T){X=b(X,T);var S,V;if(E(W)){for(S=0,V=W.length;S<V;S++){X(W[S],S,W)}}else{var U=R.keys(W);for(S=0,V=U.length;S<V;S++){X(W[U[S]],U[S],W)}}return W};R.map=R.collect=function(X,Z,U){Z=G(Z,U);var W=!E(X)&&R.keys(X),V=(W||X).length,T=Array(V);for(var S=0;S<V;S++){var Y=W?W[S]:S;T[S]=Z(X[Y],Y,X)}return T};function A(S){function T(Y,aa,U,X,V,W){for(;V>=0&&V<W;V+=S){var Z=X?X[V]:V;U=aa(U,Y[Z],Z,Y)}return U}return function(Z,aa,U,W){aa=b(aa,W,4);var Y=!E(Z)&&R.keys(Z),X=(Y||Z).length,V=S>0?0:X-1;if(arguments.length<3){U=Z[Y?Y[V]:V];V+=S}return T(Z,aa,U,Y,V,X)}}R.reduce=R.foldl=R.inject=A(1);R.reduceRight=R.foldr=A(-1);R.find=R.detect=function(V,S,U){var T;if(E(V)){T=R.findIndex(V,S,U)}else{T=R.findKey(V,S,U)}if(T!==void 0&&T!==-1){return V[T]}};R.filter=R.select=function(V,S,U){var T=[];S=G(S,U);R.each(V,function(Y,W,X){if(S(Y,W,X)){T.push(Y)}});return T};R.reject=function(U,S,T){return R.filter(U,R.negate(G(S)),T)};R.every=R.all=function(X,S,U){S=G(S,U);var W=!E(X)&&R.keys(X),V=(W||X).length;for(var T=0;T<V;T++){var Y=W?W[T]:T;if(!S(X[Y],Y,X)){return false}}return true};R.some=R.any=function(X,S,U){S=G(S,U);var W=!E(X)&&R.keys(X),V=(W||X).length;for(var T=0;T<V;T++){var Y=W?W[T]:T;if(S(X[Y],Y,X)){return true}}return false};R.contains=R.includes=R.include=function(V,U,S,T){if(!E(V)){V=R.values(V)}if(typeof S!="number"||T){S=0}return R.indexOf(V,U,S)>=0};R.invoke=function(U,V){var S=m.call(arguments,2);var T=R.isFunction(V);return R.map(U,function(X){var W=T?V:X[V];return W==null?W:W.apply(X,S)})};R.pluck=function(T,S){return R.map(T,R.property(S))};R.where=function(T,S){return R.filter(T,R.matcher(S))};R.findWhere=function(T,S){return R.find(T,R.matcher(S))};R.max=function(V,X,S){var aa=-Infinity,Y=-Infinity,Z,U;if(X==null&&V!=null){V=E(V)?V:R.values(V);for(var W=0,T=V.length;W<T;W++){Z=V[W];if(Z>aa){aa=Z}}}else{X=G(X,S);R.each(V,function(ad,ab,ac){U=X(ad,ab,ac);if(U>Y||U===-Infinity&&aa===-Infinity){aa=ad;Y=U}})}return aa};R.min=function(V,X,S){var aa=Infinity,Y=Infinity,Z,U;if(X==null&&V!=null){V=E(V)?V:R.values(V);for(var W=0,T=V.length;W<T;W++){Z=V[W];if(Z<aa){aa=Z}}}else{X=G(X,S);R.each(V,function(ad,ab,ac){U=X(ad,ab,ac);if(U<Y||U===Infinity&&aa===Infinity){aa=ad;Y=U}})}return aa};R.shuffle=function(W){var X=E(W)?W:R.values(W);var V=X.length;var S=Array(V);for(var T=0,U;T<V;T++){U=R.random(0,T);if(U!==T){S[T]=S[U]}S[U]=X[T]}return S};R.sample=function(T,U,S){if(U==null||S){if(!E(T)){T=R.values(T)}return T[R.random(T.length-1)]}return R.shuffle(T).slice(0,Math.max(0,U))};R.sortBy=function(T,U,S){U=G(U,S);return R.pluck(R.map(T,function(X,V,W){return{value:X,index:V,criteria:U(X,V,W)}}).sort(function(Y,X){var W=Y.criteria;var V=X.criteria;if(W!==V){if(W>V||W===void 0){return 1}if(W<V||V===void 0){return -1}}return Y.index-X.index}),"value")};var r=function(S){return function(V,W,U){var T={};W=G(W,U);R.each(V,function(Z,X){var Y=W(Z,X,V);S(T,Z,Y)});return T}};R.groupBy=r(function(S,U,T){if(R.has(S,T)){S[T].push(U)}else{S[T]=[U]}});R.indexBy=r(function(S,U,T){S[T]=U});R.countBy=r(function(S,U,T){if(R.has(S,T)){S[T]++}else{S[T]=1}});R.toArray=function(S){if(!S){return[]}if(R.isArray(S)){return m.call(S)}if(E(S)){return R.map(S,R.identity)}return R.values(S)};R.size=function(S){if(S==null){return 0}return E(S)?S.length:R.keys(S).length};R.partition=function(W,S,U){S=G(S,U);var V=[],T=[];R.each(W,function(Y,X,Z){(S(Y,X,Z)?V:T).push(Y)});return[V,T]};R.first=R.head=R.take=function(U,T,S){if(U==null){return void 0}if(T==null||S){return U[0]}return R.initial(U,U.length-T)};R.initial=function(U,T,S){return m.call(U,0,Math.max(0,U.length-(T==null||S?1:T)))};R.last=function(U,T,S){if(U==null){return void 0}if(T==null||S){return U[U.length-1]}return R.rest(U,Math.max(0,U.length-T))};R.rest=R.tail=R.drop=function(U,T,S){return m.call(U,T==null||S?1:T)};R.compact=function(S){return R.filter(S,R.identity)};var y=function(Y,U,Z,ac){var T=[],ab=0;for(var W=ac||0,S=Q(Y);W<S;W++){var aa=Y[W];if(E(aa)&&(R.isArray(aa)||R.isArguments(aa))){if(!U){aa=y(aa,U,Z)}var V=0,X=aa.length;T.length+=X;while(V<X){T[ab++]=aa[V++]}}else{if(!Z){T[ab++]=aa}}}return T};R.flatten=function(T,S){return y(T,S,false)};R.without=function(S){return R.difference(S,m.call(arguments,1))};R.uniq=R.unique=function(Z,V,Y,T){if(!R.isBoolean(V)){T=Y;Y=V;V=false}if(Y!=null){Y=G(Y,T)}var ab=[];var S=[];for(var X=0,U=Q(Z);X<U;X++){var aa=Z[X],W=Y?Y(aa,X,Z):aa;if(V){if(!X||S!==W){ab.push(aa)}S=W}else{if(Y){if(!R.contains(S,W)){S.push(W);ab.push(aa)}}else{if(!R.contains(ab,aa)){ab.push(aa)}}}}return ab};R.union=function(){return R.uniq(y(arguments,true,true))};R.intersection=function(Y){var S=[];var X=arguments.length;for(var U=0,W=Q(Y);U<W;U++){var V=Y[U];if(R.contains(S,V)){continue}for(var T=1;T<X;T++){if(!R.contains(arguments[T],V)){break}}if(T===X){S.push(V)}}return S};R.difference=function(T){var S=y(arguments,true,true,1);return R.filter(T,function(U){return !R.contains(S,U)})};R.zip=function(){return R.unzip(arguments)};R.unzip=function(V){var U=V&&R.max(V,Q).length||0;var S=Array(U);for(var T=0;T<U;T++){S[T]=R.pluck(V,T)}return S};R.object=function(W,T){var S={};for(var U=0,V=Q(W);U<V;U++){if(T){S[W[U]]=T[U]}else{S[W[U][0]]=W[U][1]}}return S};function v(S){return function(X,T,V){T=G(T,V);var W=Q(X);var U=S>0?0:W-1;for(;U>=0&&U<W;U+=S){if(T(X[U],U,X)){return U}}return -1}}R.findIndex=v(1);R.findLastIndex=v(-1);R.sortedIndex=function(Z,X,Y,U){Y=G(Y,U,1);var W=Y(X);var S=0,V=Q(Z);while(S<V){var T=Math.floor((S+V)/2);if(Y(Z[T])<W){S=T+1}else{V=T}}return S};function f(S,T,U){return function(Z,Y,V){var W=0,X=Q(Z);if(typeof V=="number"){if(S>0){W=V>=0?V:Math.max(V+X,W)}else{X=V>=0?Math.min(V+1,X):V+X+1}}else{if(U&&V&&X){V=U(Z,Y);return Z[V]===Y?V:-1}}if(Y!==Y){V=T(m.call(Z,W,X),R.isNaN);return V>=0?V+W:-1}for(V=S>0?W:X-1;V>=0&&V<X;V+=S){if(Z[V]===Y){return V}}return -1}}R.indexOf=f(1,R.findIndex,R.sortedIndex);R.lastIndexOf=f(-1,R.findLastIndex);R.range=function(X,U,W){if(U==null){U=X||0;X=0}W=W||1;var V=Math.max(Math.ceil((U-X)/W),0);var T=Array(V);for(var S=0;S<V;S++,X+=W){T[S]=X}return T};var z=function(X,U,W,Y,V){if(!(Y instanceof U)){return X.apply(W,V)}var T=D(X.prototype);var S=X.apply(T,V);if(R.isObject(S)){return S}return T};R.bind=function(V,T){if(K&&V.bind===K){return K.apply(V,m.call(arguments,1))}if(!R.isFunction(V)){throw new TypeError("Bind must be called on a function")}var S=m.call(arguments,2);var U=function(){return z(V,U,T,this,S.concat(m.call(arguments)))};return U};R.partial=function(T){var U=m.call(arguments,1);var S=function(){var V=0,Y=U.length;var W=Array(Y);for(var X=0;X<Y;X++){W[X]=U[X]===R?arguments[V++]:U[X]}while(V<arguments.length){W.push(arguments[V++])}return z(T,S,this,this,W)};return S};R.bindAll=function(V){var T,U=arguments.length,S;if(U<=1){throw new Error("bindAll must be passed function names")}for(T=1;T<U;T++){S=arguments[T];V[S]=R.bind(V[S],V)}return V};R.memoize=function(T,S){var U=function(X){var W=U.cache;var V=""+(S?S.apply(this,arguments):X);if(!R.has(W,V)){W[V]=T.apply(this,arguments)}return W[V]};U.cache={};return U};R.delay=function(T,U){var S=m.call(arguments,2);return setTimeout(function(){return T.apply(null,S)},U)};R.defer=R.partial(R.delay,R,1);R.throttle=function(T,V,Z){var S,X,aa;var Y=null;var W=0;if(!Z){Z={}}var U=function(){W=Z.leading===false?0:R.now();Y=null;aa=T.apply(S,X);if(!Y){S=X=null}};return function(){var ab=R.now();if(!W&&Z.leading===false){W=ab}var ac=V-(ab-W);S=this;X=arguments;if(ac<=0||ac>V){if(Y){clearTimeout(Y);Y=null}W=ab;aa=T.apply(S,X);if(!Y){S=X=null}}else{if(!Y&&Z.trailing!==false){Y=setTimeout(U,ac)}}return aa}};R.debounce=function(U,W,T){var Z,Y,S,X,aa;var V=function(){var ab=R.now()-X;if(ab<W&&ab>=0){Z=setTimeout(V,W-ab)}else{Z=null;if(!T){aa=U.apply(S,Y);if(!Z){S=Y=null}}}};return function(){S=this;Y=arguments;X=R.now();var ab=T&&!Z;if(!Z){Z=setTimeout(V,W)}if(ab){aa=U.apply(S,Y);S=Y=null}return aa}};R.wrap=function(S,T){return R.partial(T,S)};R.negate=function(S){return function(){return !S.apply(this,arguments)}};R.compose=function(){var S=arguments;var T=S.length-1;return function(){var V=T;var U=S[T].apply(this,arguments);while(V--){U=S[V].call(this,U)}return U}};R.after=function(T,S){return function(){if(--T<1){return S.apply(this,arguments)}}};R.before=function(U,T){var S;return function(){if(--U>0){S=T.apply(this,arguments)}if(U<=1){T=null}return S}};R.once=R.partial(R.before,2);var H=!{toString:null}.propertyIsEnumerable("toString");var a=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function d(W,V){var S=a.length;var T=W.constructor;var U=(R.isFunction(T)&&T.prototype)||g;var X="constructor";if(R.has(W,X)&&!R.contains(V,X)){V.push(X)}while(S--){X=a[S];if(X in W&&W[X]!==U[X]&&!R.contains(V,X)){V.push(X)}}}R.keys=function(U){if(!R.isObject(U)){return[]}if(e){return e(U)}var T=[];for(var S in U){if(R.has(U,S)){T.push(S)}}if(H){d(U,T)}return T};R.allKeys=function(U){if(!R.isObject(U)){return[]}var T=[];for(var S in U){T.push(S)}if(H){d(U,T)}return T};R.values=function(W){var V=R.keys(W);var U=V.length;var S=Array(U);for(var T=0;T<U;T++){S[T]=W[V[T]]}return S};R.mapObject=function(X,Z,U){Z=G(Z,U);var W=R.keys(X),V=W.length,T={},Y;for(var S=0;S<V;S++){Y=W[S];T[Y]=Z(X[Y],Y,X)}return T};R.pairs=function(W){var U=R.keys(W);var T=U.length;var V=Array(T);for(var S=0;S<T;S++){V[S]=[U[S],W[U[S]]]}return V};R.invert=function(W){var S={};var V=R.keys(W);for(var T=0,U=V.length;T<U;T++){S[W[V[T]]]=V[T]}return S};R.functions=R.methods=function(U){var T=[];for(var S in U){if(R.isFunction(U[S])){T.push(S)}}return T.sort()};R.extend=q(R.allKeys);R.extendOwn=R.assign=q(R.keys);R.findKey=function(Y,S,V){S=G(S,V);var X=R.keys(Y),U;for(var T=0,W=X.length;T<W;T++){U=X[T];if(S(Y[U],U,Y)){return U}}};R.pick=function(U,Y,S){var ac={},V=U,X,ab;if(V==null){return ac}if(R.isFunction(Y)){ab=R.allKeys(V);X=b(Y,S)}else{ab=y(arguments,false,false,1);X=function(ae,ad,af){return ad in af};V=Object(V)}for(var W=0,T=ab.length;W<T;W++){var aa=ab[W];var Z=V[aa];if(X(Z,aa,V)){ac[aa]=Z}}return ac};R.omit=function(U,V,S){if(R.isFunction(V)){V=R.negate(V)}else{var T=R.map(y(arguments,false,false,1),String);V=function(X,W){return !R.contains(T,W)}}return R.pick(U,V,S)};R.defaults=q(R.allKeys,true);R.create=function(T,U){var S=D(T);if(U){R.extendOwn(S,U)}return S};R.clone=function(S){if(!R.isObject(S)){return S}return R.isArray(S)?S.slice():R.extend({},S)};R.tap=function(T,S){S(T);return T};R.isMatch=function(T,S){var X=R.keys(S),W=X.length;if(T==null){return !W}var Y=Object(T);for(var V=0;V<W;V++){var U=X[V];if(S[U]!==Y[U]||!(U in Y)){return false}}return true};var P=function(aa,Z,T,V){if(aa===Z){return aa!==0||1/aa===1/Z}if(aa==null||Z==null){return aa===Z}if(aa instanceof R){aa=aa._wrapped}if(Z instanceof R){Z=Z._wrapped}var X=c.call(aa);if(X!==c.call(Z)){return false}switch(X){case"[object RegExp]":case"[object String]":return""+aa===""+Z;case"[object Number]":if(+aa!==+aa){return +Z!==+Z}return +aa===0?1/+aa===1/Z:+aa===+Z;case"[object Date]":case"[object Boolean]":return +aa===+Z}var U=X==="[object Array]";if(!U){if(typeof aa!="object"||typeof Z!="object"){return false}var Y=aa.constructor,W=Z.constructor;if(Y!==W&&!(R.isFunction(Y)&&Y instanceof Y&&R.isFunction(W)&&W instanceof W)&&("constructor" in aa&&"constructor" in Z)){return false}}T=T||[];V=V||[];var S=T.length;while(S--){if(T[S]===aa){return V[S]===Z}}T.push(aa);V.push(Z);if(U){S=aa.length;if(S!==Z.length){return false}while(S--){if(!P(aa[S],Z[S],T,V)){return false}}}else{var ac=R.keys(aa),ab;S=ac.length;if(R.keys(Z).length!==S){return false}while(S--){ab=ac[S];if(!(R.has(Z,ab)&&P(aa[ab],Z[ab],T,V))){return false}}}T.pop();V.pop();return true};R.isEqual=function(T,S){return P(T,S)};R.isEmpty=function(S){if(S==null){return true}if(E(S)&&(R.isArray(S)||R.isString(S)||R.isArguments(S))){return S.length===0}return R.keys(S).length===0};R.isElement=function(S){return !!(S&&S.nodeType===1)};R.isArray=t||function(S){return c.call(S)==="[object Array]"};R.isObject=function(T){var S=typeof T;return S==="function"||S==="object"&&!!T};R.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(S){R["is"+S]=function(T){return c.call(T)==="[object "+S+"]"}});if(!R.isArguments(arguments)){R.isArguments=function(S){return R.has(S,"callee")}}if(typeof/./!="function"&&typeof Int8Array!="object"){R.isFunction=function(S){return typeof S=="function"||false}}R.isFinite=function(S){return isFinite(S)&&!isNaN(parseFloat(S))};R.isNaN=function(S){return R.isNumber(S)&&S!==+S};R.isBoolean=function(S){return S===true||S===false||c.call(S)==="[object Boolean]"};R.isNull=function(S){return S===null};R.isUndefined=function(S){return S===void 0};R.has=function(T,S){return T!=null&&k.call(T,S)};R.noConflict=function(){w._=l;return this};R.identity=function(S){return S};R.constant=function(S){return function(){return S}};R.noop=function(){};R.property=O;R.propertyOf=function(S){return S==null?function(){}:function(T){return S[T]}};R.matcher=R.matches=function(S){S=R.extendOwn({},S);return function(T){return R.isMatch(T,S)}};R.times=function(W,V,U){var S=Array(Math.max(0,W));V=b(V,U,1);for(var T=0;T<W;T++){S[T]=V(T)}return S};R.random=function(T,S){if(S==null){S=T;T=0}return T+Math.floor(Math.random()*(S-T+1))};R.now=Date.now||function(){return new Date().getTime()};var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var n=R.invert(s);var x=function(W){var T=function(X){return W[X]};var V="(?:"+R.keys(W).join("|")+")";var U=RegExp(V);var S=RegExp(V,"g");return function(X){X=X==null?"":""+X;return U.test(X)?X.replace(S,T):X}};R.escape=x(s);R.unescape=x(n);R.result=function(S,U,V){var T=S==null?void 0:S[U];if(T===void 0){T=V}return R.isFunction(T)?T.call(S):T};var B=0;R.uniqueId=function(S){var T=++B+"";return S?S+T:T};R.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var u=/(.)^/;var h={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var j=/\\|'|\r|\n|\u2028|\u2029/g;var I=function(S){return"\\"+h[S]};R.template=function(ab,V,Y){if(!V&&Y){V=Y}V=R.defaults({},V,R.templateSettings);var W=RegExp([(V.escape||u).source,(V.interpolate||u).source,(V.evaluate||u).source].join("|")+"|$","g");var X=0;var S="__p+='";ab.replace(W,function(ad,ae,ac,ag,af){S+=ab.slice(X,af).replace(j,I);X=af+ad.length;if(ae){S+="'+\n((__t=("+ae+"))==null?'':_.escape(__t))+\n'"}else{if(ac){S+="'+\n((__t=("+ac+"))==null?'':__t)+\n'"}else{if(ag){S+="';\n"+ag+"\n__p+='"}}}return ad});S+="';\n";if(!V.variable){S="with(obj||{}){\n"+S+"}\n"}S="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+S+"return __p;\n";try{var U=new Function(V.variable||"obj","_",S)}catch(Z){Z.source=S;throw Z}var aa=function(ac){return U.call(this,ac,R)};var T=V.variable||"obj";aa.source="function("+T+"){\n"+S+"}";return aa};R.chain=function(T){var S=R(T);S._chain=true;return S};var p=function(S,T){return S._chain?R(T).chain():T};R.mixin=function(S){R.each(R.functions(S),function(T){var U=R[T]=S[T];R.prototype[T]=function(){var V=[this._wrapped];N.apply(V,arguments);return p(this,U.apply(R,V))}})};R.mixin(R);R.each(["pop","push","reverse","shift","sort","splice","unshift"],function(S){var T=J[S];R.prototype[S]=function(){var U=this._wrapped;T.apply(U,arguments);if((S==="shift"||S==="splice")&&U.length===0){delete U[0]}return p(this,U)}});R.each(["concat","join","slice"],function(S){var T=J[S];R.prototype[S]=function(){return p(this,T.apply(this._wrapped,arguments))}});R.prototype.value=function(){return this._wrapped};R.prototype.valueOf=R.prototype.toJSON=R.prototype.value;R.prototype.toString=function(){return""+this._wrapped};if(typeof define==="function"&&define.amd){define("underscore",[],function(){return R})}}.call(this));(function(b){var a=(typeof self=="object"&&self.self===self&&self)||(typeof global=="object"&&global.global===global&&global);if(typeof define==="function"&&define.amd){define(["underscore","jquery","exports"],function(g,h,e){a.Backbone=b(a,e,g,h)})}else{if(typeof exports!=="undefined"){var c=require("underscore"),d;try{d=require("jquery")}catch(f){}b(a,exports,c,d)}else{a.Backbone=b(a,{},a._,(a.jQuery||a.Zepto||a.ender||a.$))}}})(function(x,E,R,D){var I=x.Backbone;var o=Array.prototype.slice;E.VERSION="1.3.3";E.$=D;E.noConflict=function(){x.Backbone=I;return this};E.emulateHTTP=false;E.emulateJSON=false;var J=function(T,U,S){switch(T){case 1:return function(){return R[U](this[S])};case 2:return function(V){return R[U](this[S],V)};case 3:return function(W,V){return R[U](this[S],G(W,this),V)};case 4:return function(W,X,V){return R[U](this[S],G(W,this),X,V)};default:return function(){var V=o.call(arguments);V.unshift(this[S]);return R[U].apply(R,V)}}};var t=function(T,S,U){R.each(S,function(V,W){if(R[W]){T.prototype[W]=J(V,W,U)}})};var G=function(T,S){if(R.isFunction(T)){return T}if(R.isObject(T)&&!S._isModel(T)){return r(T)}if(R.isString(T)){return function(U){return U.get(T)}}return T};var r=function(S){var T=R.matches(S);return function(U){return T(U.attributes)}};var P=E.Events={};var z=/\s+/;var A=function(X,U,S,Y,V){var T=0,W;if(S&&typeof S==="object"){if(Y!==void 0&&"context" in V&&V.context===void 0){V.context=Y}for(W=R.keys(S);T<W.length;T++){U=A(X,U,W[T],S[W[T]],V)}}else{if(S&&z.test(S)){for(W=S.split(z);T<W.length;T++){U=X(U,W[T],Y,V)}}else{U=X(U,S,Y,V)}}return U};P.on=function(S,U,T){return h(this,S,U,T)};var h=function(W,S,X,U,T){W._events=A(C,W._events||{},S,X,{context:U,ctx:W,listening:T});if(T){var V=W._listeners||(W._listeners={});V[T.id]=T}return W};P.listenTo=function(W,T,Y){if(!W){return this}var X=W._listenId||(W._listenId=R.uniqueId("l"));var V=this._listeningTo||(this._listeningTo={});var U=V[X];if(!U){var S=this._listenId||(this._listenId=R.uniqueId("l"));U=V[X]={obj:W,objId:X,id:S,listeningTo:V,count:0}}h(W,T,Y,this,U);return this};var C=function(Y,V,Z,U){if(Z){var T=Y[V]||(Y[V]=[]);var X=U.context,S=U.ctx,W=U.listening;if(W){W.count++}T.push({callback:Z,context:X,ctx:X||S,listening:W})}return Y};P.off=function(S,U,T){if(!this._events){return this}this._events=A(d,this._events,S,U,{context:T,listeners:this._listeners});return this};P.stopListening=function(X,S,Y){var V=this._listeningTo;if(!V){return this}var W=X?[X._listenId]:R.keys(V);for(var U=0;U<W.length;U++){var T=V[W[U]];if(!T){break}T.obj.off(S,Y,this)}return this};var d=function(ae,T,ac,af){if(!ae){return}var Y=0,Z;var U=af.context,ab=af.listeners;if(!T&&!ac&&!U){var S=R.keys(ab);for(;Y<S.length;Y++){Z=ab[S[Y]];delete ab[Z.id];delete Z.listeningTo[Z.objId]}return}var aa=T?[T]:R.keys(ae);for(;Y<aa.length;Y++){T=aa[Y];var V=ae[T];if(!V){break}var W=[];for(var X=0;X<V.length;X++){var ad=V[X];if(ac&&ac!==ad.callback&&ac!==ad.callback._callback||U&&U!==ad.context){W.push(ad)}else{Z=ad.listening;if(Z&&--Z.count===0){delete ab[Z.id];delete Z.listeningTo[Z.objId]}}}if(W.length){ae[T]=W}else{delete ae[T]}}return ae};P.once=function(S,V,U){var T=A(H,{},S,V,R.bind(this.off,this));if(typeof S==="string"&&U==null){V=void 0}return this.on(T,V,U)};P.listenToOnce=function(U,S,V){var T=A(H,{},S,V,R.bind(this.stopListening,this,U));return this.listenTo(U,T)};var H=function(V,S,W,U){if(W){var T=V[S]=R.once(function(){U(S,T);W.apply(this,arguments)});T._callback=W}return V};P.trigger=function(T){if(!this._events){return this}var V=Math.max(0,arguments.length-1);var S=Array(V);for(var U=0;U<V;U++){S[U]=arguments[U+1]}A(n,this._events,T,void 0,S);return this};var n=function(S,V,X,U){if(S){var W=S[V];var T=S.all;if(W&&T){T=T.slice()}if(W){b(W,U)}if(T){b(T,[V].concat(U))}}return S};var b=function(X,V){var Y,W=-1,U=X.length,T=V[0],S=V[1],Z=V[2];switch(V.length){case 0:while(++W<U){(Y=X[W]).callback.call(Y.ctx)}return;case 1:while(++W<U){(Y=X[W]).callback.call(Y.ctx,T)}return;case 2:while(++W<U){(Y=X[W]).callback.call(Y.ctx,T,S)}return;case 3:while(++W<U){(Y=X[W]).callback.call(Y.ctx,T,S,Z)}return;default:while(++W<U){(Y=X[W]).callback.apply(Y.ctx,V)}return}};P.bind=P.on;P.unbind=P.off;R.extend(E,P);var K=E.Model=function(S,U){var T=S||{};U||(U={});this.cid=R.uniqueId(this.cidPrefix);this.attributes={};if(U.collection){this.collection=U.collection}if(U.parse){T=this.parse(T,U)||{}}var V=R.result(this,"defaults");T=R.defaults(R.extend({},V,T),V);this.set(T,U);this.changed={};this.initialize.apply(this,arguments)};R.extend(K.prototype,P,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(S){return R.clone(this.attributes)},sync:function(){return E.sync.apply(this,arguments)},get:function(S){return this.attributes[S]},escape:function(S){return R.escape(this.get(S))},has:function(S){return this.get(S)!=null},matches:function(S){return !!R.iteratee(S,this)(this.attributes)},set:function(aa,S,ae){if(aa==null){return this}var ab;if(typeof aa==="object"){ab=aa;ae=S}else{(ab={})[aa]=S}ae||(ae={});if(!this._validate(ab,ae)){return false}var ac=ae.unset;var Y=ae.silent;var Z=[];var ad=this._changing;this._changing=true;if(!ad){this._previousAttributes=R.clone(this.attributes);this.changed={}}var X=this.attributes;var V=this.changed;var T=this._previousAttributes;for(var W in ab){S=ab[W];if(!R.isEqual(X[W],S)){Z.push(W)}if(!R.isEqual(T[W],S)){V[W]=S}else{delete V[W]}ac?delete X[W]:X[W]=S}if(this.idAttribute in ab){this.id=this.get(this.idAttribute)}if(!Y){if(Z.length){this._pending=ae}for(var U=0;U<Z.length;U++){this.trigger("change:"+Z[U],this,X[Z[U]],ae)}}if(ad){return this}if(!Y){while(this._pending){ae=this._pending;this._pending=false;this.trigger("change",this,ae)}}this._pending=false;this._changing=false;return this},unset:function(S,T){return this.set(S,void 0,R.extend({},T,{unset:true}))},clear:function(T){var S={};for(var U in this.attributes){S[U]=void 0}return this.set(S,R.extend({},T,{unset:true}))},hasChanged:function(S){if(S==null){return !R.isEmpty(this.changed)}return R.has(this.changed,S)},changedAttributes:function(U){if(!U){return this.hasChanged()?R.clone(this.changed):false}var T=this._changing?this._previousAttributes:this.attributes;var W={};for(var S in U){var V=U[S];if(R.isEqual(T[S],V)){continue}W[S]=V}return R.size(W)?W:false},previous:function(S){if(S==null||!this._previousAttributes){return null}return this._previousAttributes[S]},previousAttributes:function(){return R.clone(this._previousAttributes)},fetch:function(T){T=R.extend({parse:true},T);var S=this;var U=T.success;T.success=function(W){var V=T.parse?S.parse(W,T):W;if(!S.set(V,T)){return false}if(U){U.call(T.context,S,W,T)}S.trigger("sync",S,W,T)};O(this,T);return this.sync("read",this,T)},save:function(X,T,ab){var Y;if(X==null||typeof X==="object"){Y=X;ab=T}else{(Y={})[X]=T}ab=R.extend({validate:true,parse:true},ab);var V=ab.wait;if(Y&&!V){if(!this.set(Y,ab)){return false}}else{if(!this._validate(Y,ab)){return false}}var W=this;var Z=ab.success;var U=this.attributes;ab.success=function(ad){W.attributes=U;var ac=ab.parse?W.parse(ad,ab):ad;if(V){ac=R.extend({},Y,ac)}if(ac&&!W.set(ac,ab)){return false}if(Z){Z.call(ab.context,W,ad,ab)}W.trigger("sync",W,ad,ab)};O(this,ab);if(Y&&V){this.attributes=R.extend({},U,Y)}var S=this.isNew()?"create":(ab.patch?"patch":"update");if(S==="patch"&&!ab.attrs){ab.attrs=Y}var aa=this.sync(S,this,ab);this.attributes=U;return aa},destroy:function(T){T=T?R.clone(T):{};var S=this;var X=T.success;var V=T.wait;var U=function(){S.stopListening();S.trigger("destroy",S,S.collection,T)};T.success=function(Y){if(V){U()}if(X){X.call(T.context,S,Y,T)}if(!S.isNew()){S.trigger("sync",S,Y,T)}};var W=false;if(this.isNew()){R.defer(T.success)}else{O(this,T);W=this.sync("delete",this,T)}if(!V){U()}return W},url:function(){var S=R.result(this,"urlRoot")||R.result(this.collection,"url")||u();if(this.isNew()){return S}var T=this.get(this.idAttribute);return S.replace(/[^\/]$/,"$&/")+encodeURIComponent(T)},parse:function(T,S){return T},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return !this.has(this.idAttribute)},isValid:function(S){return this._validate({},R.extend({},S,{validate:true}))},_validate:function(U,T){if(!T.validate||!this.validate){return true}U=R.extend({},this.attributes,U);var S=this.validationError=this.validate(U,T)||null;if(!S){return true}this.trigger("invalid",this,S,R.extend(T,{validationError:S}));return false}});var a={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};t(K,a,"attributes");var c=E.Collection=function(T,S){S||(S={});if(S.model){this.model=S.model}if(S.comparator!==void 0){this.comparator=S.comparator}this._reset();this.initialize.apply(this,arguments);if(T){this.reset(T,R.extend({silent:true},S))}};var p={add:true,remove:true,merge:true};var Q={add:true,remove:false};var w=function(X,W,S){S=Math.min(Math.max(S,0),X.length);var T=Array(X.length-S);var V=W.length;var U;for(U=0;U<T.length;U++){T[U]=X[U+S]}for(U=0;U<V;U++){X[U+S]=W[U]}for(U=0;U<T.length;U++){X[U+V+S]=T[U]}};R.extend(c.prototype,P,{model:K,initialize:function(){},toJSON:function(S){return this.map(function(T){return T.toJSON(S)})},sync:function(){return E.sync.apply(this,arguments)},add:function(T,S){return this.set(T,R.extend({merge:false},S,Q))},remove:function(V,S){S=R.extend({},S);var T=!R.isArray(V);V=T?[V]:V.slice();var U=this._removeModels(V,S);if(!S.silent&&U.length){S.changes={added:[],merged:[],removed:U};this.trigger("update",this,S)}return T?U[0]:U},set:function(ak,T){if(ak==null){return}T=R.extend({},p,T);if(T.parse&&!this._isModel(ak)){ak=this.parse(ak,T)||[]}var W=!R.isArray(ak);ak=W?[ak]:ak.slice();var Y=T.at;if(Y!=null){Y=+Y}if(Y>this.length){Y=this.length}if(Y<0){Y+=this.length+1}var X=[];var al=[];var ad=[];var ae=[];var ab={};var Z=T.add;var V=T.merge;var am=T.remove;var ai=false;var S=this.comparator&&Y==null&&T.sort!==false;var ah=R.isString(this.comparator)?this.comparator:null;var U,ag;for(ag=0;ag<ak.length;ag++){U=ak[ag];var aa=this.get(U);if(aa){if(V&&U!==aa){var ac=this._isModel(U)?U.attributes:U;if(T.parse){ac=aa.parse(ac,T)}aa.set(ac,T);ad.push(aa);if(S&&!ai){ai=aa.hasChanged(ah)}}if(!ab[aa.cid]){ab[aa.cid]=true;X.push(aa)}ak[ag]=aa}else{if(Z){U=ak[ag]=this._prepareModel(U,T);if(U){al.push(U);this._addReference(U,T);ab[U.cid]=true;X.push(U)}}}}if(am){for(ag=0;ag<this.length;ag++){U=this.models[ag];if(!ab[U.cid]){ae.push(U)}}if(ae.length){this._removeModels(ae,T)}}var af=false;var aj=!S&&Z&&am;if(X.length&&aj){af=this.length!==X.length||R.some(this.models,function(an,ao){return an!==X[ao]});this.models.length=0;w(this.models,X,0);this.length=this.models.length}else{if(al.length){if(S){ai=true}w(this.models,al,Y==null?this.length:Y);this.length=this.models.length}}if(ai){this.sort({silent:true})}if(!T.silent){for(ag=0;ag<al.length;ag++){if(Y!=null){T.index=Y+ag}U=al[ag];U.trigger("add",U,this,T)}if(ai||af){this.trigger("sort",this,T)}if(al.length||ae.length||ad.length){T.changes={added:al,removed:ae,merged:ad};this.trigger("update",this,T)}}return W?ak[0]:ak},reset:function(U,S){S=S?R.clone(S):{};for(var T=0;T<this.models.length;T++){this._removeReference(this.models[T],S)}S.previousModels=this.models;this._reset();U=this.add(U,R.extend({silent:true},S));if(!S.silent){this.trigger("reset",this,S)}return U},push:function(T,S){return this.add(T,R.extend({at:this.length},S))},pop:function(T){var S=this.at(this.length-1);return this.remove(S,T)},unshift:function(T,S){return this.add(T,R.extend({at:0},S))},shift:function(T){var S=this.at(0);return this.remove(S,T)},slice:function(){return o.apply(this.models,arguments)},get:function(S){if(S==null){return void 0}return this._byId[S]||this._byId[this.modelId(S.attributes||S)]||S.cid&&this._byId[S.cid]},has:function(S){return this.get(S)!=null},at:function(S){if(S<0){S+=this.length}return this.models[S]},where:function(S,T){return this[T?"find":"filter"](S)},findWhere:function(S){return this.where(S,true)},sort:function(T){var S=this.comparator;if(!S){throw new Error("Cannot sort a set without a comparator")}T||(T={});var U=S.length;if(R.isFunction(S)){S=R.bind(S,this)}if(U===1||R.isString(S)){this.models=this.sortBy(S)}else{this.models.sort(S)}if(!T.silent){this.trigger("sort",this,T)}return this},pluck:function(S){return this.map(S+"")},fetch:function(S){S=R.extend({parse:true},S);var U=S.success;var T=this;S.success=function(V){var W=S.reset?"reset":"set";T[W](V,S);if(U){U.call(S.context,T,V,S)}T.trigger("sync",T,V,S)};O(this,S);return this.sync("read",this,S)},create:function(T,S){S=S?R.clone(S):{};var U=S.wait;T=this._prepareModel(T,S);if(!T){return false}if(!U){this.add(T,S)}var W=this;var V=S.success;S.success=function(Y,Z,X){if(U){W.add(Y,X)}if(V){V.call(X.context,Y,Z,X)}};T.save(null,S);return T},parse:function(T,S){return T},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(S){return S[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(U,T){if(this._isModel(U)){if(!U.collection){U.collection=this}return U}T=T?R.clone(T):{};T.collection=this;var S=new this.model(U,T);if(!S.validationError){return S}this.trigger("invalid",this,S.validationError,T);return false},_removeModels:function(Y,U){var W=[];for(var V=0;V<Y.length;V++){var T=this.get(Y[V]);if(!T){continue}var S=this.indexOf(T);this.models.splice(S,1);this.length--;delete this._byId[T.cid];var X=this.modelId(T.attributes);if(X!=null){delete this._byId[X]}if(!U.silent){U.index=S;T.trigger("remove",T,this,U)}W.push(T);this._removeReference(T,U)}return W},_isModel:function(S){return S instanceof K},_addReference:function(T,S){this._byId[T.cid]=T;var U=this.modelId(T.attributes);if(U!=null){this._byId[U]=T}T.on("all",this._onModelEvent,this)},_removeReference:function(T,S){delete this._byId[T.cid];var U=this.modelId(T.attributes);if(U!=null){delete this._byId[U]}if(this===T.collection){delete T.collection}T.off("all",this._onModelEvent,this)},_onModelEvent:function(U,T,W,S){if(T){if((U==="add"||U==="remove")&&W!==this){return}if(U==="destroy"){this.remove(T,S)}if(U==="change"){var V=this.modelId(T.previousAttributes());var X=this.modelId(T.attributes);if(V!==X){if(V!=null){delete this._byId[V]}if(X!=null){this._byId[X]=T}}}}this.trigger.apply(this,arguments)}});var B={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};t(c,B,"models");var N=E.View=function(S){this.cid=R.uniqueId("view");R.extend(this,R.pick(S,f));this._ensureElement();this.initialize.apply(this,arguments)};var y=/^(\S+)\s*(.*)$/;var f=["model","collection","el","id","attributes","className","tagName","events"];R.extend(N.prototype,P,{tagName:"div",$:function(S){return this.$el.find(S)},initialize:function(){},render:function(){return this},remove:function(){this._removeElement();this.stopListening();return this},_removeElement:function(){this.$el.remove()},setElement:function(S){this.undelegateEvents();this._setElement(S);this.delegateEvents();return this},_setElement:function(S){this.$el=S instanceof E.$?S:E.$(S);this.el=this.$el[0]},delegateEvents:function(U){U||(U=R.result(this,"events"));if(!U){return this}this.undelegateEvents();for(var T in U){var V=U[T];if(!R.isFunction(V)){V=this[V]}if(!V){continue}var S=T.match(y);this.delegate(S[1],S[2],R.bind(V,this))}return this},delegate:function(T,S,U){this.$el.on(T+".delegateEvents"+this.cid,S,U);return this},undelegateEvents:function(){if(this.$el){this.$el.off(".delegateEvents"+this.cid)}return this},undelegate:function(T,S,U){this.$el.off(T+".delegateEvents"+this.cid,S,U);return this},_createElement:function(S){return document.createElement(S)},_ensureElement:function(){if(!this.el){var S=R.extend({},R.result(this,"attributes"));if(this.id){S.id=R.result(this,"id")}if(this.className){S["class"]=R.result(this,"className")}this.setElement(this._createElement(R.result(this,"tagName")));this._setAttributes(S)}else{this.setElement(R.result(this,"el"))}},_setAttributes:function(S){this.$el.attr(S)}});E.sync=function(Z,U,T){var W=l[Z];R.defaults(T||(T={}),{emulateHTTP:E.emulateHTTP,emulateJSON:E.emulateJSON});var Y={type:W,dataType:"json"};if(!T.url){Y.url=R.result(U,"url")||u()}if(T.data==null&&U&&(Z==="create"||Z==="update"||Z==="patch")){Y.contentType="application/json";Y.data=JSON.stringify(T.attrs||U.toJSON(T))}if(T.emulateJSON){Y.contentType="application/x-www-form-urlencoded";Y.data=Y.data?{model:Y.data}:{}}if(T.emulateHTTP&&(W==="PUT"||W==="DELETE"||W==="PATCH")){Y.type="POST";if(T.emulateJSON){Y.data._method=W}var V=T.beforeSend;T.beforeSend=function(aa){aa.setRequestHeader("X-HTTP-Method-Override",W);if(V){return V.apply(this,arguments)}}}if(Y.type!=="GET"&&!T.emulateJSON){Y.processData=false}var S=T.error;T.error=function(ab,ac,aa){T.textStatus=ac;T.errorThrown=aa;if(S){S.call(T.context,ab,ac,aa)}};var X=T.xhr=E.ajax(R.extend(Y,T));U.trigger("request",U,X,T);return X};var l={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};E.ajax=function(){return E.$.ajax.apply(E.$,arguments)};var q=E.Router=function(S){S||(S={});if(S.routes){this.routes=S.routes}this._bindRoutes();this.initialize.apply(this,arguments)};var s=/\((.*?)\)/g;var v=/(\(\?)?:\w+/g;var e=/\*\w+/g;var j=/[\-{}\[\]+?.,\\\^$|#\s]/g;R.extend(q.prototype,P,{initialize:function(){},route:function(T,U,V){if(!R.isRegExp(T)){T=this._routeToRegExp(T)}if(R.isFunction(U)){V=U;U=""}if(!V){V=this[U]}var S=this;E.history.route(T,function(X){var W=S._extractParameters(T,X);if(S.execute(V,W,U)!==false){S.trigger.apply(S,["route:"+U].concat(W));S.trigger("route",U,W);E.history.trigger("route",S,U,W)}});return this},execute:function(U,T,S){if(U){U.apply(this,T)}},navigate:function(T,S){E.history.navigate(T,S);return this},_bindRoutes:function(){if(!this.routes){return}this.routes=R.result(this,"routes");var T,S=R.keys(this.routes);while((T=S.pop())!=null){this.route(T,this.routes[T])}},_routeToRegExp:function(S){S=S.replace(j,"\\$&").replace(s,"(?:$1)?").replace(v,function(U,T){return T?U:"([^/?]+)"}).replace(e,"([^?]*?)");return new RegExp("^"+S+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(S,T){var U=S.exec(T).slice(1);return R.map(U,function(W,V){if(V===U.length-1){return W||null}return W?decodeURIComponent(W):null})}});var k=E.History=function(){this.handlers=[];this.checkUrl=R.bind(this.checkUrl,this);if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var F=/^[#\/]|\s+$/g;var g=/^\/+|\/+$/g;var M=/#.*$/;k.started=false;R.extend(k.prototype,P,{interval:50,atRoot:function(){var S=this.location.pathname.replace(/[^\/]$/,"$&/");return S===this.root&&!this.getSearch()},matchRoot:function(){var T=this.decodeFragment(this.location.pathname);var S=T.slice(0,this.root.length-1)+"/";return S===this.root},decodeFragment:function(S){return decodeURI(S.replace(/%25/g,"%2525"))},getSearch:function(){var S=this.location.href.replace(/#.*/,"").match(/\?.+/);return S?S[0]:""},getHash:function(T){var S=(T||this).location.href.match(/#(.*)$/);return S?S[1]:""},getPath:function(){var S=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return S.charAt(0)==="/"?S.slice(1):S},getFragment:function(S){if(S==null){if(this._usePushState||!this._wantsHashChange){S=this.getPath()}else{S=this.getHash()}}return S.replace(F,"")},start:function(T){if(k.started){throw new Error("Backbone.history has already been started")}k.started=true;this.options=R.extend({root:"/"},this.options,T);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._hasHashChange="onhashchange" in window&&(document.documentMode===void 0||document.documentMode>7);this._useHashChange=this._wantsHashChange&&this._hasHashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.history&&this.history.pushState);this._usePushState=this._wantsPushState&&this._hasPushState;this.fragment=this.getFragment();this.root=("/"+this.root+"/").replace(g,"/");if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var V=this.root.slice(0,-1)||"/";this.location.replace(V+"#"+this.getPath());return true}else{if(this._hasPushState&&this.atRoot()){this.navigate(this.getHash(),{replace:true})}}}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe");this.iframe.src="javascript:0";this.iframe.style.display="none";this.iframe.tabIndex=-1;var S=document.body;var U=S.insertBefore(this.iframe,S.firstChild).contentWindow;U.document.open();U.document.close();U.location.hash="#"+this.fragment}var W=window.addEventListener||function(X,Y){return attachEvent("on"+X,Y)};if(this._usePushState){W("popstate",this.checkUrl,false)}else{if(this._useHashChange&&!this.iframe){W("hashchange",this.checkUrl,false)}else{if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}}}if(!this.options.silent){return this.loadUrl()}},stop:function(){var S=window.removeEventListener||function(T,U){return detachEvent("on"+T,U)};if(this._usePushState){S("popstate",this.checkUrl,false)}else{if(this._useHashChange&&!this.iframe){S("hashchange",this.checkUrl,false)}}if(this.iframe){document.body.removeChild(this.iframe);this.iframe=null}if(this._checkUrlInterval){clearInterval(this._checkUrlInterval)}k.started=false},route:function(S,T){this.handlers.unshift({route:S,callback:T})},checkUrl:function(T){var S=this.getFragment();if(S===this.fragment&&this.iframe){S=this.getHash(this.iframe.contentWindow)}if(S===this.fragment){return false}if(this.iframe){this.navigate(S)}this.loadUrl()},loadUrl:function(S){if(!this.matchRoot()){return false}S=this.fragment=this.getFragment(S);return R.some(this.handlers,function(T){if(T.route.test(S)){T.callback(S);return true}})},navigate:function(U,T){if(!k.started){return false}if(!T||T===true){T={trigger:!!T}}U=this.getFragment(U||"");var W=this.root;if(U===""||U.charAt(0)==="?"){W=W.slice(0,-1)||"/"}var S=W+U;U=this.decodeFragment(U.replace(M,""));if(this.fragment===U){return}this.fragment=U;if(this._usePushState){this.history[T.replace?"replaceState":"pushState"]({},document.title,S)}else{if(this._wantsHashChange){this._updateHash(this.location,U,T.replace);if(this.iframe&&U!==this.getHash(this.iframe.contentWindow)){var V=this.iframe.contentWindow;if(!T.replace){V.document.open();V.document.close()}this._updateHash(V.location,U,T.replace)}}else{return this.location.assign(S)}}if(T.trigger){return this.loadUrl(U)}},_updateHash:function(S,U,V){if(V){var T=S.href.replace(/(javascript:|#).*$/,"");S.replace(T+"#"+U)}else{S.hash="#"+U}}});E.history=new k;var m=function(S,U){var T=this;var V;if(S&&R.has(S,"constructor")){V=S.constructor}else{V=function(){return T.apply(this,arguments)}}R.extend(V,T,U);V.prototype=R.create(T.prototype,S);V.prototype.constructor=V;V.__super__=T.prototype;return V};K.extend=c.extend=q.extend=N.extend=k.extend=m;var u=function(){throw new Error('A "url" property or function must be specified')};var O=function(U,T){var S=T.error;T.error=function(V){if(S){S.call(T.context,U,V,T)}U.trigger("error",U,V,T)}};return E});(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?module.exports=a(require("underscore"),require("backbone")):typeof define==="function"&&define.amd?define(["underscore","backbone"],a):(b.Backbone=b.Backbone||{},b.Backbone.Radio=a(b._,b.Backbone))}(this,function(v,c){v="default" in v?v["default"]:v;c="default" in c?c["default"]:c;var k=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol==="function"&&x.constructor===Symbol?"symbol":typeof x};var j=c.Radio;var q=c.Radio={};q.VERSION="2.0.0";q.noConflict=function(){c.Radio=j;return this};q.DEBUG=false;q._debugText=function(z,y,x){return z+(x?" on the "+x+" channel":"")+': "'+y+'"'};q.debugLog=function(z,y,x){if(q.DEBUG&&console&&console.warn){console.warn(q._debugText(z,y,x))}};var a=/\s+/;q._eventsApi=function(C,A,x,y){if(!x){return false}var D={};if((typeof x==="undefined"?"undefined":k(x))==="object"){for(var F in x){var G=C[A].apply(C,[F,x[F]].concat(y));a.test(F)?v.extend(D,G):D[F]=G}return D}if(a.test(x)){var E=x.split(a);for(var B=0,z=E.length;B<z;B++){D[E[B]]=C[A].apply(C,[E[B]].concat(y))}return D}return false};q._callHandler=function(C,A,z){var y=z[0],x=z[1],B=z[2];switch(z.length){case 0:return C.call(A);case 1:return C.call(A,y);case 2:return C.call(A,y,x);case 3:return C.call(A,y,x,B);default:return C.apply(A,z)}};function r(x,y,B,z){var A=x[y];if((!B||B===A.callback||B===A.callback._callback)&&(!z||z===A.context)){delete x[y];return true}}function o(y,z,E,B){y||(y={});var D=z?[z]:v.keys(y);var x=false;for(var A=0,C=D.length;A<C;A++){z=D[A];if(!y[z]){continue}if(r(y,z,E,B)){x=true}}return x}var p={};function l(x){return p[x]||(p[x]=v.bind(q.log,q,x))}v.extend(q,{log:function h(x,y){if(typeof console==="undefined"){return}var z=v.toArray(arguments).slice(2);console.log("["+x+'] "'+y+'"',z)},tuneIn:function g(x){var y=q.channel(x);y._tunedIn=true;y.on("all",l(x));return this},tuneOut:function t(x){var y=q.channel(x);y._tunedIn=false;y.off("all",l(x));delete p[x];return this}});function b(x){return v.isFunction(x)?x:function(){return x}}q.Requests={request:function e(z){var y=v.toArray(arguments).slice(1);var A=q._eventsApi(this,"request",z,y);if(A){return A}var x=this.channelName;var C=this._requests;if(x&&this._tunedIn){q.log.apply(this,[x,z].concat(y))}if(C&&(C[z]||C["default"])){var B=C[z]||C["default"];y=C[z]?y:arguments;return q._callHandler(B.callback,B.context,y)}else{q.debugLog("An unhandled request was fired",z,x)}},reply:function m(x,z,y){if(q._eventsApi(this,"reply",x,[z,y])){return this}this._requests||(this._requests={});if(this._requests[x]){q.debugLog("A request was overwritten",x,this.channelName)}this._requests[x]={callback:b(z),context:y||this};return this},replyOnce:function n(y,B,z){if(q._eventsApi(this,"replyOnce",y,[B,z])){return this}var x=this;var A=v.once(function(){x.stopReplying(y);return b(B).apply(this,arguments)});return this.reply(y,A,z)},stopReplying:function s(x,z,y){if(q._eventsApi(this,"stopReplying",x)){return this}if(!x&&!z&&!y){delete this._requests}else{if(!o(this._requests,x,z,y)){q.debugLog("Attempted to remove the unregistered request",x,this.channelName)}}return this}};q._channels={};q.channel=function(x){if(!x){throw new Error("You must provide a name for the channel.")}if(q._channels[x]){return q._channels[x]}else{return q._channels[x]=new q.Channel(x)}};q.Channel=function(x){this.channelName=x};v.extend(q.Channel.prototype,c.Events,q.Requests,{reset:function u(){this.off();this.stopListening();this.stopReplying();return this}});var w;var d;var f=[c.Events,q.Requests];v.each(f,function(x){v.each(x,function(z,y){q[y]=function(A){d=v.toArray(arguments).slice(1);w=this.channel(A);return w[y].apply(w,d)}})});q.reset=function(y){var x=!y?this._channels:[this._channels[y]];v.each(x,function(z){z.reset()})};return q}));(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?module.exports=a(require("backbone"),require("underscore"),require("backbone.radio")):typeof define==="function"&&define.amd?define(["backbone","underscore","backbone.radio"],a):(b.Marionette=b.Mn=a(b.Backbone,b._,b.Backbone.Radio))}(this,function(bk,ci,V){bk="default" in bk?bk["default"]:bk;ci="default" in ci?ci["default"]:ci;V="default" in V?V["default"]:V;var aM="3.0.0";var bB=function bB(dd){return function(dg){for(var de=arguments.length,df=Array(de>1?de-1:0),dh=1;dh<de;dh++){df[dh-1]=arguments[dh]}return dd.apply(dg,df)}};var cb=bk.Model.extend;var ck=function ck(dd,de){if(ci.isObject(dd)){dd=dd.prev+" is going to be removed in the future. Please use "+dd.next+" instead."+(dd.url?" See: "+dd.url:"")}if(!c2.DEV_MODE){return}if((de===undefined||!de)&&!ck._cache[dd]){ck._warn("Deprecation warning: "+dd);ck._cache[dd]=true}};ck._console=typeof console!=="undefined"?console:{};ck._warn=function(){var dd=ck._console.warn||ck._console.log||ci.noop;return dd.apply(ck._console,arguments)};ck._cache={};var u=function u(dd){return bk.$.contains(document.documentElement,dd)};var b1=function b1(dd,de){if(!dd){return}ci.extend(this,ci.pick(dd,de))};var bd=function bd(dd){if(!dd){return}if(this.options&&this.options[dd]!==undefined){return this.options[dd]}else{return this[dd]}};var Z=function Z(dd){var de=this;return ci.reduce(dd,function(df,dh,dg){if(!ci.isFunction(dh)){dh=de[dh]}if(dh){df[dg]=dh}return df},{})};var cK=/(^|:)(\w)/gi;function cX(de,df,dd){return dd.toUpperCase()}function bm(di){var df="on"+di.replace(cK,cX);var dj=bd.call(this,df);var dd=void 0;for(var de=arguments.length,dg=Array(de>1?de-1:0),dh=1;dh<de;dh++){dg[dh-1]=arguments[dh]}if(ci.isFunction(dj)){dd=dj.apply(this,dg)}this.trigger.apply(this,[di].concat(dg));return dd}function c5(dg){var dh=ci.isFunction(dg.triggerMethod)?dg.triggerMethod:bm;for(var dd=arguments.length,df=Array(dd>1?dd-1:0),de=1;de<dd;de++){df[de-1]=arguments[de]}return dh.apply(dg,df)}function bc(dd,df,de){if(!dd._getImmediateChildren){return}ci.each(dd._getImmediateChildren(),function(dg){if(!de(dg)){return}c5(dg,df,dg)})}function cO(dd){return !dd._isAttached}function bp(dd){if(!cO(dd)){return false}dd._isAttached=true;return true}function cQ(dd){return dd._isAttached}function bq(dd){if(!cQ(dd)){return false}dd._isAttached=false;return true}function a5(df){if(df._areViewEventsMonitored){return}df._areViewEventsMonitored=true;function dg(){bc(df,"before:attach",cO)}function dh(){bc(df,"attach",bp);di()}function dd(){bc(df,"before:detach",cQ)}function de(){bc(df,"detach",bq)}function dj(){di()}function di(){if(df._isAttached&&df._isRendered){c5(df,"dom:refresh",df)}}df.on({"before:attach":dg,attach:dh,"before:detach":dd,detach:de,render:dj})}var bJ=["description","fileName","lineNumber","name","message","number"];var bL=cb.call(Error,{urlRoot:"http://marionettejs.com/docs/v"+aM+"/",constructor:function c6(df,de){if(ci.isObject(df)){de=df;df=de.message}else{if(!de){de={}}}var dd=Error.call(this,df);ci.extend(this,ci.pick(dd,bJ),ci.pick(de,bJ));this.captureStackTrace();if(de.url){this.url=this.urlRoot+de.url}},captureStackTrace:function bu(){if(Error.captureStackTrace){Error.captureStackTrace(this,bL)}},toString:function H(){return this.name+": "+this.message+(this.url?" See: "+this.url:"")}});bL.extend=cb;function dc(di,dg,de,df,dd){var dh=df.split(/\s+/);ci.each(dh,function(dj){var dk=di[dj];if(!dk){throw new bL('Method "'+dj+'" was configured as an event handler, but does not exist.')}di[dd](dg,de,dk)})}function x(df,de,dg,dd){if(!de||!dg){return}if(!ci.isObject(dg)){throw new bL({message:"Bindings must be an object.",url:"marionette.functions.html#marionettebindevents"})}ci.each(dg,function(di,dh){if(ci.isString(di)){dc(df,de,dh,di,dd);return}df[dd](de,dh,di)})}function a6(dd,de){x(this,dd,de,"listenTo");return this}function aQ(dd,de){x(this,dd,de,"stopListening");return this}function an(df,de,dh,dd){if(!de||!dh){return}if(!ci.isObject(dh)){throw new bL({message:"Bindings must be an object.",url:"marionette.functions.html#marionettebindrequests"})}var dg=Z.call(df,dh);de[dd](dg,df)}function bX(dd,de){an(this,dd,de,"reply");return this}function aZ(dd,de){an(this,dd,de,"stopReplying");return this}var bR=function bR(){for(var dd=arguments.length,de=Array(dd),df=0;df<dd;df++){de[df]=arguments[df]}this.options=ci.extend.apply(ci,[{},ci.result(this,"options")].concat(de))};var bn={normalizeMethods:Z,_setOptions:bR,mergeOptions:b1,getOption:bd,bindEvents:a6,unbindEvents:aQ};var ak={_initRadio:function aU(){var dd=ci.result(this,"channelName");if(!dd){return}if(!V){throw new bL({name:"BackboneRadioMissing",message:'The dependency "backbone.radio" is missing.'})}var dg=this._channel=V.channel(dd);var df=ci.result(this,"radioEvents");this.bindEvents(dg,df);var de=ci.result(this,"radioRequests");this.bindRequests(dg,de);this.on("destroy",this._destroyRadio)},_destroyRadio:function cl(){this._channel.stopReplying(null,null,this)},getChannel:function aK(){return this._channel},bindEvents:a6,unbindEvents:aQ,bindRequests:bX,unbindRequests:aZ};var m=["channelName","radioEvents","radioRequests"];var be=function be(dd){this._setOptions(dd);this.mergeOptions(dd,m);this.cid=ci.uniqueId(this.cidPrefix);this._initRadio();this.initialize.apply(this,arguments)};be.extend=cb;ci.extend(be.prototype,bk.Events,bn,ak,{cidPrefix:"mno",_isDestroyed:false,isDestroyed:function ah(){return this._isDestroyed},initialize:function cc(){},destroy:function N(){if(this._isDestroyed){return this}for(var dd=arguments.length,de=Array(dd),df=0;df<dd;df++){de[df]=arguments[df]}this.triggerMethod.apply(this,["before:destroy",this].concat(de));this._isDestroyed=true;this.triggerMethod.apply(this,["destroy",this].concat(de));this.stopListening();return this},triggerMethod:bm});var c9=function c9(dd){this.templateId=dd};ci.extend(c9,{templateCaches:{},get:function y(de,dd){var df=this.templateCaches[de];if(!df){df=new c9(de);this.templateCaches[de]=df}return df.load(dd)},clear:function cV(){var df=void 0;for(var dd=arguments.length,de=Array(dd),dg=0;dg<dd;dg++){de[dg]=arguments[dg]}var dh=de.length;if(dh>0){for(df=0;df<dh;df++){delete this.templateCaches[de[df]]}}else{this.templateCaches={}}}});ci.extend(c9.prototype,{load:function co(dd){if(this.compiledTemplate){return this.compiledTemplate}var de=this.loadTemplate(this.templateId,dd);this.compiledTemplate=this.compileTemplate(de,dd);return this.compiledTemplate},loadTemplate:function bs(df,de){var dd=bk.$(df);if(!dd.length){throw new bL({name:"NoTemplateError",message:'Could not find template: "'+df+'"'})}return dd.html()},compileTemplate:function aD(de,dd){return ci.template(de,dd)}});var o=ci.invokeMap||ci.invoke;var c1=function(dd){if(Array.isArray(dd)){for(var df=0,de=Array(dd.length);df<dd.length;df++){de[df]=dd[df]}return de}else{return Array.from(dd)}};function Y(dd,de){if(dd.behaviorClass){return dd.behaviorClass}else{if(ci.isFunction(dd)){return dd}}if(ci.isFunction(c2.Behaviors.behaviorsLookup)){return c2.Behaviors.behaviorsLookup(dd,de)[de]}return c2.Behaviors.behaviorsLookup[de]}function cD(de,dd){return ci.chain(dd).map(function(dg,dh){var dj=Y(dg,dh);var df=dg===dj?{}:dg;var dk=new dj(df,de);var di=cD(de,ci.result(dk,"behaviors"));return[dk].concat(di)}).flatten().value()}var aT={_initBehaviors:function r(){var dd=ci.result(this,"behaviors");this._behaviors=ci.isObject(dd)?cD(this,dd):{}},_getBehaviorTriggers:function ab(){var dd=o(this._behaviors,"getTriggers");return ci.extend.apply(ci,[{}].concat(c1(dd)))},_getBehaviorEvents:function s(){var dd=o(this._behaviors,"getEvents");return ci.extend.apply(ci,[{}].concat(c1(dd)))},_proxyBehaviorViewProperties:function ad(){o(this._behaviors,"proxyViewProperties")},_delegateBehaviorEntityEvents:function n(){o(this._behaviors,"delegateEntityEvents")},_undelegateBehaviorEntityEvents:function W(){o(this._behaviors,"undelegateEntityEvents")},_destroyBehaviors:function aa(dd){o.apply(undefined,[this._behaviors,"destroy"].concat(c1(dd)))},_bindBehaviorUIElements:function a(){o(this._behaviors,"bindUIElements")},_unbindBehaviorUIElements:function bQ(){o(this._behaviors,"unbindUIElements")},_triggerEventOnBehaviors:function cH(){var dd=this._behaviors;for(var de=arguments.length,df=Array(de),dh=0;dh<de;dh++){df[dh]=arguments[dh]}for(var dg=0,di=dd&&dd.length;dg<di;dg++){bm.apply(dd[dg],df)}}};var bE={_delegateEntityEvents:function ct(de,dg){this._undelegateEntityEvents(de,dg);var df=ci.result(this,"modelEvents");a6.call(this,de,df);var dd=ci.result(this,"collectionEvents");a6.call(this,dg,dd)},_undelegateEntityEvents:function bl(de,dg){var df=ci.result(this,"modelEvents");aQ.call(this,de,df);var dd=ci.result(this,"collectionEvents");aQ.call(this,dg,dd)}};var C=/^(\S+)\s*(.*)$/;function bv(de,dd){return[de+ci.uniqueId(".evt"),dd].join(" ")}var c4=function c4(dd){var de=dd.match(C);return bv(de[1],de[2])};function t(dd,dg){if(ci.isString(dg)){dg={event:dg}}var de=dg.event;var dh=dg.preventDefault!==false;var df=dg.stopPropagation!==false;return function(di){if(dh){di.preventDefault()}if(df){di.stopPropagation()}dd.triggerMethod(de,dd)}}var ap={_getViewTriggers:function R(dd,de){return ci.reduce(de,function(dg,dh,df){df=c4(df);dg[df]=t(dd,dh);return dg},{})}};var aB=function aB(de,dd){return ci.reduce(de,function(df,di,dg){var dh=b7(dg,dd);df[dh]=di;return df},{})};var b7=function b7(dd,de){return dd.replace(/@ui\.[a-zA-Z-_$0-9]*/g,function(df){return de[df.slice(4)]})};var bO=function bO(df,de,dd){ci.each(df,function(dh,dg){if(ci.isString(dh)){df[dg]=b7(dh,de)}else{if(ci.isObject(dh)&&ci.isArray(dd)){ci.extend(dh,bO(ci.pick(dh,dd),de));ci.each(dd,function(dj){var di=dh[dj];if(ci.isString(di)){dh[dj]=b7(di,de)}})}}});return df};var l={normalizeUIKeys:function bH(de){var dd=this._getUIBindings();return aB(de,dd)},normalizeUIValues:function I(df,de){var dd=this._getUIBindings();return bO(df,dd,de)},_getUIBindings:function aj(){var dd=ci.result(this,"_uiBindings");var de=ci.result(this,"ui");return dd||de},_bindUIElements:function aX(){var de=this;if(!this.ui){return}if(!this._uiBindings){this._uiBindings=this.ui}var dd=ci.result(this,"_uiBindings");this._ui={};ci.each(dd,function(df,dg){de._ui[dg]=de.$(df)});this.ui=this._ui},_unbindUIElements:function a0(){var dd=this;if(!this.ui||!this._uiBindings){return}ci.each(this.ui,function(df,de){delete dd.ui[de]});this.ui=this._uiBindings;delete this._uiBindings;delete this._ui},_getUI:function S(dd){return this._ui[dd]}};var G={supportsRenderLifecycle:true,supportsDestroyLifecycle:true,_isDestroyed:false,isDestroyed:function ah(){return !!this._isDestroyed},_isRendered:false,isRendered:function cA(){return !!this._isRendered},_isAttached:false,isAttached:function a7(){return !!this._isAttached},setElement:function c(){var dd=!!this.el;bk.View.prototype.setElement.apply(this,arguments);if(dd){this._isRendered=!!this.$el.length;this._isAttached=u(this.el)}return this},delegateEvents:function by(de){this._proxyBehaviorViewProperties();this._buildEventProxies();var dd=this._getEvents(de);if(typeof de==="undefined"){this.events=dd}var df=ci.extend({},this._getBehaviorEvents(),dd,this._getBehaviorTriggers(),this.getTriggers());bk.View.prototype.delegateEvents.call(this,df);return this},_getEvents:function a8(de){var dd=de||this.events;if(ci.isFunction(dd)){return this.normalizeUIKeys(dd.call(this))}return this.normalizeUIKeys(dd)},getTriggers:function cN(){if(!this.triggers){return}var dd=this.normalizeUIKeys(ci.result(this,"triggers"));return this._getViewTriggers(this,dd)},delegateEntityEvents:function ax(){this._delegateEntityEvents(this.model,this.collection);this._delegateBehaviorEntityEvents();return this},undelegateEntityEvents:function M(){this._undelegateEntityEvents(this.model,this.collection);this._undelegateBehaviorEntityEvents();return this},_ensureViewIsIntact:function aL(){if(this._isDestroyed){throw new bL({name:"ViewDestroyedError",message:'View (cid: "'+this.cid+'") has already been destroyed and cannot be used.'})}},destroy:function N(){if(this._isDestroyed){return this}var dd=!!this._isAttached;for(var de=arguments.length,df=Array(de),dg=0;dg<de;dg++){df[dg]=arguments[dg]}this.triggerMethod.apply(this,["before:destroy",this].concat(df));if(dd){this.triggerMethod("before:detach",this)}this.unbindUIElements();this._removeElement();if(dd){this._isAttached=false;this.triggerMethod("detach",this)}this._removeChildren();this._destroyBehaviors(df);this._isDestroyed=true;this._isRendered=false;this.triggerMethod.apply(this,["destroy",this].concat(df));this.stopListening();return this},bindUIElements:function bf(){this._bindUIElements();this._bindBehaviorUIElements();return this},unbindUIElements:function bF(){this._unbindUIElements();this._unbindBehaviorUIElements();return this},getUI:function b3(dd){this._ensureViewIsIntact();return this._getUI(dd)},childViewEventPrefix:"childview",triggerMethod:function bN(){for(var dd=arguments.length,dg=Array(dd),df=0;df<dd;df++){dg[df]=arguments[df]}var de=bm.apply(this,dg);this._triggerEventOnBehaviors.apply(this,dg);this._triggerEventOnParentLayout.apply(this,dg);return de},_buildEventProxies:function h(){this._childViewEvents=ci.result(this,"childViewEvents");this._childViewTriggers=ci.result(this,"childViewTriggers")},_triggerEventOnParentLayout:function b0(df){var dk=this._parentView();if(!dk){return}var dj=ci.result(dk,"childViewEventPrefix");var dl=dj+":"+df;for(var dd=arguments.length,dh=Array(dd>1?dd-1:0),de=1;de<dd;de++){dh[de-1]=arguments[de]}dk.triggerMethod.apply(dk,[dl].concat(dh));var dg=dk.normalizeMethods(dk._childViewEvents);if(!!dg&&ci.isFunction(dg[df])){dg[df].apply(dk,dh)}var di=dk._childViewTriggers;if(di&&ci.isString(di[df])){dk.triggerMethod.apply(dk,[di[df]].concat(dh))}},_parentView:function aO(){var dd=this._parent;while(dd){if(dd instanceof bY){return dd}dd=dd._parent}}};ci.extend(G,aT,bn,bE,ap,l);function ao(de){if(!de.supportsDestroyLifecycle){c5(de,"before:destroy",de)}var dd=!!de._isAttached;if(dd){c5(de,"before:detach",de)}de.remove();if(dd){de._isAttached=false;c5(de,"detach",de)}de._isDestroyed=true;if(!de.supportsDestroyLifecycle){c5(de,"destroy",de)}}var az=["allowMissingEl","parentEl","replaceElement"];var ae=be.extend({cidPrefix:"mnr",replaceElement:false,_isReplaced:false,constructor:function c6(dd){this._setOptions(dd);this.mergeOptions(dd,az);this._initEl=this.el=this.getOption("el");this.el=this.el instanceof bk.$?this.el[0]:this.el;if(!this.el){throw new bL({name:"NoElError",message:'An "el" must be specified for a region.'})}this.$el=this.getEl(this.el);be.call(this,dd)},show:function bU(dd,de){if(!this._ensureElement(de)){return}this._ensureView(dd);if(dd===this.currentView){return this}this.triggerMethod("before:show",this,dd,de);a5(dd);this.empty(de);dd.on("destroy",this.empty,this);dd._parent=this;this._renderView(dd);this._attachView(dd,de);this.triggerMethod("show",this,dd,de);return this},_renderView:function cZ(dd){if(dd._isRendered){return}if(!dd.supportsRenderLifecycle){c5(dd,"before:render",dd)}dd.render();if(!dd.supportsRenderLifecycle){dd._isRendered=true;c5(dd,"render",dd)}},_attachView:function aJ(dd){var df=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var dg=!dd._isAttached&&u(this.el);var de=typeof df.replaceElement==="undefined"?!!ci.result(this,"replaceElement"):!!df.replaceElement;if(dg){c5(dd,"before:attach",dd)}this.attachHtml(dd,de);if(dg){dd._isAttached=true;c5(dd,"attach",dd)}this.currentView=dd},_ensureElement:function w(){var de=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];if(!ci.isObject(this.el)){this.$el=this.getEl(this.el);this.el=this.$el[0]}if(!this.$el||this.$el.length===0){var dd=typeof de.allowMissingEl==="undefined"?!!ci.result(this,"allowMissingEl"):!!de.allowMissingEl;if(dd){return false}else{throw new bL('An "el" must exist in DOM for this region '+this.cid)}}return true},_ensureView:function cr(dd){if(!dd){throw new bL({name:"ViewNotValid",message:"The view passed is undefined and therefore invalid. You must pass a view instance to show."})}if(dd._isDestroyed){throw new bL({name:"ViewDestroyedError",message:'View (cid: "'+dd.cid+'") has already been destroyed and cannot be used.'})}},getEl:function cU(dd){return bk.$(dd,ci.result(this,"parentEl"))},_replaceEl:function k(dd){this._restoreEl();var de=this.el.parentNode;de.replaceChild(dd.el,this.el);this._isReplaced=true},_restoreEl:function aI(){if(!this._isReplaced){return}var dd=this.currentView;if(!dd){return}var de=dd.el.parentNode;if(!de){return}de.replaceChild(this.el,dd.el);this._isReplaced=false},isReplaced:function cJ(){return !!this._isReplaced},attachHtml:function b5(dd,de){if(de){this._replaceEl(dd)}else{this.el.appendChild(dd.el)}},empty:function aR(){var de=arguments.length<=0||arguments[0]===undefined?{allowMissingEl:true}:arguments[0];var dd=this.currentView;if(!dd){if(this._ensureElement(de)){this.detachHtml()}return this}dd.off("destroy",this.empty,this);this.triggerMethod("before:empty",this,dd);this._restoreEl();delete this.currentView;if(!dd._isDestroyed){this._removeView(dd,de);delete dd._parent}this.triggerMethod("empty",this,dd);return this},_removeView:function aW(de){var dg=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var df=dg.preventDestroy;var dd=!!df;if(dd){this._detachView(de);return}if(de.destroy){de.destroy()}else{ao(de)}},_detachView:function cu(de){var dd=!!de._isAttached;if(dd){c5(de,"before:detach",de)}this.detachHtml();if(dd){de._isAttached=false;c5(de,"detach",de)}},detachHtml:function K(){this.$el.contents().detach()},hasView:function cR(){return !!this.currentView},reset:function b2(dd){this.empty(dd);if(this.$el){this.el=this._initEl}delete this.$el;return this},destroy:function N(dd){this.reset(dd);return be.prototype.destroy.apply(this,arguments)}});var bg={regionClass:ae,_initRegions:function p(){this.regions=this.regions||{};this._regions={};this.addRegions(ci.result(this,"regions"))},_reInitRegions:function aY(){o(this._regions,"reset")},addRegion:function b4(dd,de){var df={};df[dd]=de;return this.addRegions(df)[dd]},addRegions:function a4(dd){if(ci.isEmpty(dd)){return}dd=this.normalizeUIValues(dd,["selector","el"]);this.regions=ci.extend({},this.regions,dd);return this._addRegions(dd)},_addRegions:function cE(dd){var de=this;return ci.reduce(dd,function(dh,dg,df){dh[df]=de._buildRegion(dg);de._addRegion(dh[df],df);return dh},{})},_buildRegion:function bG(dd){if(dd instanceof ae){return dd}return this._buildRegionFromDefinition(dd)},_buildRegionFromDefinition:function cv(dd){if(ci.isString(dd)){return this._buildRegionFromObject({el:dd})}if(ci.isFunction(dd)){return this._buildRegionFromRegionClass(dd)}if(ci.isObject(dd)){return this._buildRegionFromObject(dd)}throw new bL({message:"Improper region configuration type.",url:"marionette.region.html#region-configuration-types"})},_buildRegionFromObject:function a1(df){var de=df.regionClass||this.regionClass;var dd=ci.omit(df,"regionClass");ci.defaults(dd,{el:df.selector,parentEl:ci.partial(ci.result,this,"el")});return new de(dd)},_buildRegionFromRegionClass:function bx(dd){return new dd({parentEl:ci.partial(ci.result,this,"el")})},_addRegion:function A(de,dd){this.triggerMethod("before:add:region",this,dd,de);de._parent=this;this._regions[dd]=de;this.triggerMethod("add:region",this,dd,de)},removeRegion:function bj(dd){var de=this._regions[dd];this._removeRegion(de,dd);return de},removeRegions:function Q(){var dd=this.getRegions();ci.each(this._regions,ci.bind(this._removeRegion,this));return dd},_removeRegion:function aS(de,dd){this.triggerMethod("before:remove:region",this,dd,de);de.empty();de.stopListening();delete this.regions[dd];delete this._regions[dd];this.triggerMethod("remove:region",this,dd,de)},emptyRegions:function db(){var dd=this.getRegions();o(dd,"empty");return dd},hasRegion:function ch(dd){return !!this.getRegion(dd)},getRegion:function bt(dd){return this._regions[dd]},getRegions:function ai(){return ci.clone(this._regions)},showChildView:function cf(dg,de){var di=this.getRegion(dg);for(var dd=arguments.length,df=Array(dd>2?dd-2:0),dh=2;dh<dd;dh++){df[dh-2]=arguments[dh]}return di.show.apply(di,[de].concat(df))},getChildView:function aE(dd){return this.getRegion(dd).currentView}};var cY={render:function aH(de,df){if(!de){throw new bL({name:"TemplateNotFoundError",message:"Cannot render the template since its false, null or undefined."})}var dd=ci.isFunction(de)?de:c9.get(de);return dd(df)}};var aA=["behaviors","childViewEventPrefix","childViewEvents","childViewTriggers","collectionEvents","events","modelEvents","regionClass","regions","template","templateContext","triggers","ui"];var bY=bk.View.extend({constructor:function c6(de){this.render=ci.bind(this.render,this);this._setOptions(de);this.mergeOptions(de,aA);a5(this);this._initBehaviors();this._initRegions();var dd=Array.prototype.slice.call(arguments);dd[0]=this.options;bk.View.prototype.constructor.apply(this,dd);this.delegateEntityEvents()},serializeData:function bV(){if(!this.model&&!this.collection){return{}}if(this.model){return this.serializeModel()}return{items:this.serializeCollection()}},serializeModel:function X(){if(!this.model){return{}}return ci.clone(this.model.attributes)},serializeCollection:function a3(){if(!this.collection){return{}}return this.collection.map(function(dd){return ci.clone(dd.attributes)})},render:function aH(){this._ensureViewIsIntact();this.triggerMethod("before:render",this);if(this._isRendered){this._reInitRegions()}this._renderTemplate();this.bindUIElements();this._isRendered=true;this.triggerMethod("render",this);return this},_renderTemplate:function F(){var de=this.getTemplate();if(de===false){return}var df=this.mixinTemplateContext(this.serializeData());var dd=cY.render(de,df,this);this.attachElContent(dd)},getTemplate:function bM(){return this.template},mixinTemplateContext:function bA(){var de=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var dd=ci.result(this,"templateContext");return ci.extend(de,dd)},attachElContent:function cx(dd){this.$el.html(dd);return this},_removeChildren:function cq(){this.removeRegions()},_getImmediateChildren:function a2(){return ci.chain(this.getRegions()).map("currentView").compact().value()}});ci.extend(bY.prototype,G,bg);var bb=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck","reduce"];var bP=function bP(dd,de){ci.each(bb,function(df){dd[df]=function(){var dh=ci.values(ci.result(this,de));var dg=[dh].concat(ci.toArray(arguments));return ci[df].apply(ci,dg)}})};var bz=function bz(dd){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();ci.each(dd,ci.bind(this.add,this))};bP(bz.prototype,"_views");ci.extend(bz.prototype,{add:function al(dd,de){return this._add(dd,de)._updateLength()},_add:function cF(dd,df){var de=dd.cid;this._views[de]=dd;if(dd.model){this._indexByModel[dd.model.cid]=de}if(df){this._indexByCustom[df]=de}return this},findByModel:function cP(dd){return this.findByModelCid(dd.cid)},findByModelCid:function bT(dd){var de=this._indexByModel[dd];return this.findByCid(de)},findByCustom:function D(de){var dd=this._indexByCustom[de];return this.findByCid(dd)},findByIndex:function cm(dd){return ci.values(this._views)[dd]},findByCid:function cw(dd){return this._views[dd]},remove:function T(dd){return this._remove(dd)._updateLength()},_remove:function v(dd){var de=dd.cid;if(dd.model){delete this._indexByModel[dd.model.cid]}ci.some(this._indexByCustom,ci.bind(function(dg,df){if(dg===de){delete this._indexByCustom[df];return true}},this));delete this._views[de];return this},_updateLength:function da(){this.length=ci.size(this._views);return this}});var aw=["behaviors","childView","childViewEventPrefix","childViewEvents","childViewOptions","childViewTriggers","collectionEvents","events","filter","emptyView","emptyViewOptions","modelEvents","reorderOnSort","sort","triggers","ui","viewComparator"];var cT=bk.View.extend({sort:true,constructor:function c6(de){this.render=ci.bind(this.render,this);this._setOptions(de);this.mergeOptions(de,aw);a5(this);this._initBehaviors();this.once("render",this._initialEvents);this._initChildViewStorage();this._bufferedChildren=[];var dd=Array.prototype.slice.call(arguments);dd[0]=this.options;bk.View.prototype.constructor.apply(this,dd);this.delegateEntityEvents()},_startBuffering:function cB(){this._isBuffering=true},_endBuffering:function b9(){var dd=!!this._isAttached;var de=dd?this._getImmediateChildren():[];this._isBuffering=false;ci.each(de,function(df){c5(df,"before:attach",df)});this.attachBuffer(this,this._createBuffer());ci.each(de,function(df){df._isAttached=true;c5(df,"attach",df)});this._bufferedChildren=[]},_getImmediateChildren:function a2(){return ci.values(this.children._views)},_initialEvents:function cj(){if(this.collection){this.listenTo(this.collection,"add",this._onCollectionAdd);this.listenTo(this.collection,"remove",this._onCollectionRemove);this.listenTo(this.collection,"reset",this.render);if(this.sort){this.listenTo(this.collection,"sort",this._sortViews)}}},_onCollectionAdd:function g(dh,df,de){var dd=de.at!==undefined&&(de.index||df.indexOf(dh));if(this.filter||dd===false){dd=ci.indexOf(this._filteredSortedModels(dd),dh)}if(this._shouldAddChild(dh,dd)){this._destroyEmptyView();var dg=this._getChildView(dh);this._addChild(dh,dg,dd)}},_onCollectionRemove:function z(de){var dd=this.children.findByModel(de);this.removeChildView(dd);this._checkEmpty()},render:function aH(){this._ensureViewIsIntact();this.triggerMethod("before:render",this);this._renderChildren();this._isRendered=true;this.triggerMethod("render",this);return this},setFilter:function bi(de){var dh=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var dg=dh.preventRender;var dk=this._isRendered&&!this._isDestroyed;var dd=this.filter!==de;var di=dk&&dd&&!dg;if(di){var df=this._filteredSortedModels();this.filter=de;var dj=this._filteredSortedModels();this._applyModelDeltas(dj,df)}else{this.filter=de}return this},removeFilter:function bw(dd){return this.setFilter(null,dd)},_applyModelDeltas:function cz(dg,dd){var df=this;var de={};ci.each(dg,function(dj,di){var dh=!df.children.findByModel(dj);if(dh){df._onCollectionAdd(dj,df.collection,{at:di})}de[dj.cid]=true});ci.each(dd,function(di){var dh=!de[di.cid]&&df.children.findByModel(di);if(dh){df._onCollectionRemove(di)}})},reorder:function a9(){var de=this;var dd=this.children;var dg=this._filteredSortedModels();if(!dg.length&&this._showingEmptyView){return this}var df=ci.some(dg,function(dh){return !dd.findByModel(dh)});if(df){this.render()}else{(function(){var dh=ci.map(dg,function(dl,dk){var dj=dd.findByModel(dl);dj._index=dk;return dj.el});var di=dd.filter(function(dj){return !ci.contains(dh,dj.el)});de.triggerMethod("before:reorder",de);de._appendReorderedChildren(dh);ci.each(di,ci.bind(de.removeChildView,de));de._checkEmpty();de.triggerMethod("reorder",de)})()}return this},resortView:function bS(){if(this.reorderOnSort){this.reorder()}else{this._renderChildren()}return this},_sortViews:function cd(){var dd=this;var df=this._filteredSortedModels();var de=ci.find(df,function(di,dh){var dg=dd.children.findByModel(di);return !dg||dg._index!==dh});if(de){this.resortView()}},_emptyViewIndex:-1,_appendReorderedChildren:function c7(dd){this.$el.append(dd)},_renderChildren:function cL(){if(this._isRendered){this._destroyEmptyView();this._destroyChildren({checkEmpty:false})}var dd=this._filteredSortedModels();if(this.isEmpty({processedModels:dd})){this._showEmptyView()}else{this.triggerMethod("before:render:children",this);this._startBuffering();this._showCollection(dd);this._endBuffering();this.triggerMethod("render:children",this)}},_showCollection:function b6(de){var dd=this;ci.each(de,function(dh,df){var dg=dd._getChildView(dh);dd._addChild(dh,dg,df)})},_filteredSortedModels:function cW(df){if(!this.collection||!this.collection.length){return[]}var de=this.getViewComparator();var dg=this.collection.models;df=Math.min(Math.max(df,0),dg.length-1);if(de){var dd=void 0;if(df){dd=dg[df];dg=dg.slice(0,df).concat(dg.slice(df+1))}dg=this._sortModelsBy(dg,de);if(dd){dg.splice(df,0,dd)}}dg=this._filterModels(dg);return dg},getViewComparator:function j(){return this.viewComparator},_filterModels:function bK(de){var dd=this;if(this.filter){de=ci.filter(de,function(dg,df){return dd._shouldAddChild(dg,df)})}return de},_sortModelsBy:function aP(de,dd){if(typeof dd==="string"){return ci.sortBy(de,function(df){return df.get(dd)})}else{if(dd.length===1){return ci.sortBy(de,ci.bind(dd,this))}else{return de.sort(ci.bind(dd,this))}}},_showEmptyView:function cg(){var df=this._getEmptyView();if(df&&!this._showingEmptyView){this._showingEmptyView=true;var de=new bk.Model();var dg=this.emptyViewOptions||this.childViewOptions;if(ci.isFunction(dg)){dg=dg.call(this,de,this._emptyViewIndex)}var dd=this.buildChildView(de,df,dg);this.triggerMethod("before:render:empty",this,dd);this._addChildView(dd,0);this.triggerMethod("render:empty",this,dd);dd._parent=this}},_destroyEmptyView:function aN(){if(this._showingEmptyView){this.triggerMethod("before:remove:empty",this);this._destroyChildren();delete this._showingEmptyView;this.triggerMethod("remove:empty",this)}},_getEmptyView:function aC(){var dd=this.emptyView;if(!dd){return}return this._getView(dd)},_getChildView:function ac(de){var dd=this.childView;if(!dd){throw new bL({name:"NoChildViewError",message:'A "childView" must be specified'})}dd=this._getView(dd,de);if(!dd){throw new bL({name:"InvalidChildViewError",message:'"childView" must be a view class or a function that returns a view class'})}return dd},_getView:function ag(dd,de){if(dd.prototype instanceof bk.View||dd===bk.View){return dd}else{if(ci.isFunction(dd)){return dd.call(this,de)}}},_addChild:function cy(dh,dg,df){var de=this._getChildViewOptions(dh,df);var dd=this.buildChildView(dh,dg,de);this.addChildView(dd,df);return dd},_getChildViewOptions:function q(de,dd){if(ci.isFunction(this.childViewOptions)){return this.childViewOptions(de,dd)}return this.childViewOptions},addChildView:function am(dd,de){this.triggerMethod("before:add:child",this,dd);this._updateIndices(dd,true,de);dd._parent=this;this._addChildView(dd,de);this.triggerMethod("add:child",this,dd);return dd},_updateIndices:function cI(de,dd,df){if(!this.sort){return}if(dd){de._index=df}this.children.each(function(dg){if(dg._index>=de._index){dg._index+=dd?1:-1}})},_addChildView:function O(dd,de){var df=!this._isBuffering&&this._isAttached;a5(dd);this._proxyChildEvents(dd);this.children.add(dd);if(!dd.supportsRenderLifecycle){c5(dd,"before:render",dd)}dd.render();if(!dd.supportsRenderLifecycle){dd._isRendered=true;c5(dd,"render",dd)}if(df){c5(dd,"before:attach",dd)}this.attachHtml(this,dd,de);if(df){dd._isAttached=true;c5(dd,"attach",dd)}},buildChildView:function cp(dg,df,de){var dd=ci.extend({model:dg},de);return new df(dd)},removeChildView:function aq(dd){if(!dd||dd._isDestroyed){return dd}this.triggerMethod("before:remove:child",this,dd);if(dd.destroy){dd.destroy()}else{ao(dd)}delete dd._parent;this.stopListening(dd);this.children.remove(dd);this.triggerMethod("remove:child",this,dd);this._updateIndices(dd,false);return dd},isEmpty:function ce(dd){var de=void 0;if(ci.result(dd,"processedModels")){de=dd.processedModels}else{de=this.collection?this.collection.models:[];de=this._filterModels(de)}return de.length===0},_checkEmpty:function U(){if(this.isEmpty()){this._showEmptyView()}},attachBuffer:function cn(de,dd){de.$el.append(dd)},_createBuffer:function c8(){var dd=document.createDocumentFragment();ci.each(this._bufferedChildren,function(de){dd.appendChild(de.el)});return dd},attachHtml:function b5(dd,df,de){if(dd._isBuffering){dd._bufferedChildren.splice(de,0,df)}else{if(!dd._insertBefore(df,de)){dd._insertAfter(df)}}},_insertBefore:function bW(dg,de){var df=void 0;var dd=this.sort&&de<this.children.length-1;if(dd){df=this.children.find(function(dh){return dh._index===de+1})}if(df){df.$el.before(dg.el);return true}return false},_insertAfter:function P(dd){this.$el.append(dd.el)},_initChildViewStorage:function c3(){this.children=new bz()},_removeChildren:function cq(){this._destroyChildren({checkEmpty:false})},_destroyChildren:function bC(){var dg=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var de=dg.checkEmpty;this.triggerMethod("before:destroy:children",this);var dd=de!==false;var df=this.children.map(ci.identity);this.children.each(ci.bind(this.removeChildView,this));if(dd){this._checkEmpty()}this.triggerMethod("destroy:children",this);return df},_shouldAddChild:function ca(df,dd){var de=this.filter;return !ci.isFunction(de)||de.call(this,df,dd,this.collection)},_proxyChildEvents:function e(dd){var de=this;var df=ci.result(this,"childViewEventPrefix");this.listenTo(dd,"all",function(di){for(var dg=arguments.length,dk=Array(dg>1?dg-1:0),dl=1;dl<dg;dl++){dk[dl-1]=arguments[dl]}var dm=df+":"+di;var dj=de.normalizeMethods(de._childViewEvents);if(typeof dj!=="undefined"&&ci.isFunction(dj[di])){dj[di].apply(de,dk)}var dh=de._childViewTriggers;if(dh&&ci.isString(dh[di])){de.triggerMethod.apply(de,[dh[di]].concat(dk))}de.triggerMethod.apply(de,[dm].concat(dk))})}});ci.extend(cT.prototype,G);var av=["childViewContainer","template","templateContext"];var bh=cT.extend({constructor:function c6(dd){ck("CompositeView is deprecated. Convert to View at your earliest convenience");this.mergeOptions(dd,av);cT.prototype.constructor.apply(this,arguments)},_initialEvents:function cj(){if(this.collection){this.listenTo(this.collection,"add",this._onCollectionAdd);this.listenTo(this.collection,"remove",this._onCollectionRemove);this.listenTo(this.collection,"reset",this.renderChildren);if(this.sort){this.listenTo(this.collection,"sort",this._sortViews)}}},_getChildView:function ac(de){var dd=this.childView;if(!dd){return this.constructor}dd=this._getView(dd,de);if(!dd){throw new bL({name:"InvalidChildViewError",message:'"childView" must be a view class or a function that returns a view class'})}return dd},serializeData:function bV(){return this.serializeModel()},render:function aH(){this._ensureViewIsIntact();this._isRendering=true;this.resetChildViewContainer();this.triggerMethod("before:render",this);this._renderTemplate();this.bindUIElements();this.renderChildren();this._isRendering=false;this._isRendered=true;this.triggerMethod("render",this);return this},renderChildren:function c0(){if(this._isRendered||this._isRendering){cT.prototype._renderChildren.call(this)}},attachBuffer:function cn(de,dd){var df=this.getChildViewContainer(de);df.append(dd)},_insertAfter:function P(de){var dd=this.getChildViewContainer(this,de);dd.append(de.el)},_appendReorderedChildren:function c7(dd){var de=this.getChildViewContainer(this);de.append(dd)},getChildViewContainer:function br(df,dh){if(!!df.$childViewContainer){return df.$childViewContainer}var de=void 0;var dg=df.childViewContainer;if(dg){var dd=ci.result(df,"childViewContainer");if(dd.charAt(0)==="@"&&df.ui){de=df.ui[dd.substr(4)]}else{de=df.$(dd)}if(de.length<=0){throw new bL({name:"ChildViewContainerMissingError",message:'The specified "childViewContainer" was not found: '+df.childViewContainer})}}else{de=df.$el}df.$childViewContainer=de;return de},resetChildViewContainer:function J(){if(this.$childViewContainer){this.$childViewContainer=undefined}}});var bZ=ci.pick(bY.prototype,"serializeModel","getTemplate","_renderTemplate","mixinTemplateContext","attachElContent");ci.extend(bh.prototype,bZ);var au=["collectionEvents","events","modelEvents","triggers","ui"];var cM=be.extend({cidPrefix:"mnb",constructor:function c6(de,dd){this.view=dd;this.defaults=ci.clone(ci.result(this,"defaults",{}));this._setOptions(this.defaults,de);this.mergeOptions(this.options,au);this.ui=ci.extend({},ci.result(this,"ui"),ci.result(dd,"ui"));be.apply(this,arguments)},$:function cS(){return this.view.$.apply(this.view,arguments)},destroy:function N(){this.stopListening();return this},proxyViewProperties:function bI(){this.$el=this.view.$el;this.el=this.view.el;return this},bindUIElements:function bf(){this._bindUIElements();return this},unbindUIElements:function bF(){this._unbindUIElements();return this},getUI:function b3(dd){this.view._ensureViewIsIntact();return this._getUI(dd)},delegateEntityEvents:function ax(){this._delegateEntityEvents(this.view.model,this.view.collection);return this},undelegateEntityEvents:function M(){this._undelegateEntityEvents(this.view.model,this.view.collection);return this},getEvents:function b(){var dd=this.normalizeUIKeys(ci.result(this,"events"));return ci.reduce(dd,function(df,dg,de){if(!ci.isFunction(dg)){dg=this[dg]}if(!dg){return}de=c4(de);df[de]=ci.bind(dg,this);return df},{},this)},getTriggers:function cN(){if(!this.triggers){return}var dd=this.normalizeUIKeys(ci.result(this,"triggers"));return this._getViewTriggers(this.view,dd)}});ci.extend(cM.prototype,bE,ap,l);var at=["region","regionClass"];var aF=be.extend({cidPrefix:"mna",constructor:function c6(dd){this._setOptions(dd);this.mergeOptions(dd,at);this._initRegion();be.prototype.constructor.apply(this,arguments)},regionClass:ae,_initRegion:function cC(de){var df=this.region;var dd=this.regionClass;if(ci.isString(df)){this._region=new dd({el:df});return}this._region=df},getRegion:function bt(){return this._region},showView:function f(de){var dh=this.getRegion();for(var dd=arguments.length,df=Array(dd>1?dd-1:0),dg=1;dg<dd;dg++){df[dg-1]=arguments[dg]}return dh.show.apply(dh,[de].concat(df))},getView:function b8(){return this.getRegion().currentView},start:function cs(dd){this.triggerMethod("before:start",this,dd);this.triggerMethod("start",this,dd);return this}});var ar=["appRoutes","controller"];var d=bk.Router.extend({constructor:function c6(de){this._setOptions(de);this.mergeOptions(de,ar);bk.Router.apply(this,arguments);var df=this.appRoutes;var dd=this._getController();this.processAppRoutes(dd,df);this.on("route",this._processOnRoute,this)},appRoute:function af(df,de){var dd=this._getController();this._addAppRoute(dd,df,de);return this},_processOnRoute:function cG(de,dd){if(ci.isFunction(this.onRoute)){var df=ci.invert(this.appRoutes)[de];this.onRoute(de,df,dd)}},processAppRoutes:function bo(dd,df){var dg=this;if(!df){return this}var de=ci.keys(df).reverse();ci.each(de,function(dh){dg._addAppRoute(dd,dh,df[dh])});return this},_getController:function bD(){return this.controller},_addAppRoute:function aG(dd,df,de){var dg=dd[de];if(!dg){throw new bL('Method "'+de+'" was not found on the controller')}this.route(df,de,ci.bind(dg,dd))},triggerMethod:bm});ci.extend(d.prototype,bn);function E(){throw new bL({message:"You must define where your behaviors are stored.",url:"marionette.behaviors.md#behaviorslookup"})}var aV={};function B(dd){return !!aV[dd]}function ba(dd,de){return aV[dd]=de}var ay=bk.Marionette;var c2=bk.Marionette={};c2.noConflict=function(){bk.Marionette=ay;return this};c2.bindEvents=bB(a6);c2.unbindEvents=bB(aQ);c2.bindRequests=bB(bX);c2.unbindRequests=bB(aZ);c2.mergeOptions=bB(b1);c2.getOption=bB(bd);c2.normalizeMethods=bB(Z);c2.extend=cb;c2.isNodeAttached=u;c2.deprecate=ck;c2.triggerMethod=bB(bm);c2.triggerMethodOn=c5;c2.isEnabled=B;c2.setEnabled=ba;c2.monitorViewEvents=a5;c2.Behaviors={};c2.Behaviors.behaviorsLookup=E;c2.Application=aF;c2.AppRouter=d;c2.Renderer=cY;c2.TemplateCache=c9;c2.View=bY;c2.CollectionView=cT;c2.CompositeView=bh;c2.Behavior=cM;c2.Region=ae;c2.Error=bL;c2.Object=be;c2.DEV_MODE=false;c2.FEATURES=aV;c2.VERSION=aM;return c2}));(function(d,f,b){var g={version:"1.0.0+b346bb8"};function a(){var k=d.L;g.noConflict=function(){d.L=k;return this};d.L=g}if(typeof module==="object"&&typeof module.exports==="object"){module.exports=g}else{if(typeof define==="function"&&define.amd){define(g)}}if(typeof d!=="undefined"){a()}g.Util={extend:function(m){var n,l,k,o;for(l=1,k=arguments.length;l<k;l++){o=arguments[l];for(n in o){m[n]=o[n]}}return m},create:Object.create||(function(){function k(){}return function(l){k.prototype=l;return new k()}})(),bind:function(l,m){var n=Array.prototype.slice;if(l.bind){return l.bind.apply(l,n.call(arguments,1))}var k=n.call(arguments,2);return function(){return l.apply(m,k.length?k.concat(n.call(arguments)):arguments)}},stamp:function(k){k._leaflet_id=k._leaflet_id||++g.Util.lastId;return k._leaflet_id},lastId:0,throttle:function(p,q,o){var n,m,l,k;k=function(){n=false;if(m){l.apply(o,m);m=false}};l=function(){if(n){m=arguments}else{p.apply(o,arguments);setTimeout(k,q);n=true}};return l},wrapNum:function(l,m,o){var k=m[1],n=m[0],p=k-n;return l===k&&o?l:((l-n)%p+p)%p+n},falseFn:function(){return false},formatNum:function(k,m){var l=Math.pow(10,m||5);return Math.round(k*l)/l},trim:function(k){return k.trim?k.trim():k.replace(/^\s+|\s+$/g,"")},splitWords:function(k){return g.Util.trim(k).split(/\s+/)},setOptions:function(m,k){if(!m.hasOwnProperty("options")){m.options=m.options?g.Util.create(m.options):{}}for(var l in k){m.options[l]=k[l]}return m.options},getParamString:function(n,k,l){var o=[];for(var m in n){o.push(encodeURIComponent(l?m.toUpperCase():m)+"="+encodeURIComponent(n[m]))}return((!k||k.indexOf("?")===-1)?"?":"&")+o.join("&")},template:function(l,k){return l.replace(g.Util.templateRe,function(o,m){var n=k[m];if(n===b){throw new Error("No value provided for variable "+o)}else{if(typeof n==="function"){n=n(k)}}return n})},templateRe:/\{ *([\w_\-]+) *\}/g,isArray:Array.isArray||function(k){return(Object.prototype.toString.call(k)==="[object Array]")},indexOf:function(m,l){for(var k=0;k<m.length;k++){if(m[k]===l){return k}}return -1},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="};(function(){function n(p){return d["webkit"+p]||d["moz"+p]||d["ms"+p]}var o=0;function l(p){var r=+new Date(),q=Math.max(0,16-(r-o));o=r+q;return d.setTimeout(p,q)}var k=d.requestAnimationFrame||n("RequestAnimationFrame")||l,m=d.cancelAnimationFrame||n("CancelAnimationFrame")||n("CancelRequestAnimationFrame")||function(p){d.clearTimeout(p)};g.Util.requestAnimFrame=function(r,q,p){if(p&&k===l){r.call(q)}else{return k.call(d,g.bind(r,q))}};g.Util.cancelAnimFrame=function(p){if(p){m.call(d,p)}}})();g.extend=g.Util.extend;g.bind=g.Util.bind;g.stamp=g.Util.stamp;g.setOptions=g.Util.setOptions;g.Class=function(){};g.Class.extend=function(l){var o=function(){if(this.initialize){this.initialize.apply(this,arguments)}this.callInitHooks()};var n=o.__super__=this.prototype;var m=g.Util.create(n);m.constructor=o;o.prototype=m;for(var k in this){if(this.hasOwnProperty(k)&&k!=="prototype"){o[k]=this[k]}}if(l.statics){g.extend(o,l.statics);delete l.statics}if(l.includes){g.Util.extend.apply(null,[m].concat(l.includes));delete l.includes}if(m.options){l.options=g.Util.extend(g.Util.create(m.options),l.options)}g.extend(m,l);m._initHooks=[];m.callInitHooks=function(){if(this._initHooksCalled){return}if(n.callInitHooks){n.callInitHooks.call(this)}this._initHooksCalled=true;for(var q=0,p=m._initHooks.length;q<p;q++){m._initHooks[q].call(this)}};return o};g.Class.include=function(k){g.extend(this.prototype,k);return this};g.Class.mergeOptions=function(k){g.extend(this.prototype.options,k);return this};g.Class.addInitHook=function(l){var k=Array.prototype.slice.call(arguments,1);var m=typeof l==="function"?l:function(){this[l].apply(this,k)};this.prototype._initHooks=this.prototype._initHooks||[];this.prototype._initHooks.push(m);return this};g.Evented=g.Class.extend({on:function(n,p,m){if(typeof n==="object"){for(var o in n){this._on(o,n[o],p)}}else{n=g.Util.splitWords(n);for(var l=0,k=n.length;l<k;l++){this._on(n[l],p,m)}}return this},off:function(n,p,m){if(!n){delete this._events}else{if(typeof n==="object"){for(var o in n){this._off(o,n[o],p)}}else{n=g.Util.splitWords(n);for(var l=0,k=n.length;l<k;l++){this._off(n[l],p,m)}}}return this},_on:function(r,q,o){this._events=this._events||{};var l=this._events[r];if(!l){l=[];this._events[r]=l}if(o===this){o=b}var m={fn:q,ctx:o},p=l;for(var n=0,k=p.length;n<k;n++){if(p[n].fn===q&&p[n].ctx===o){return}}p.push(m);l.count++},_off:function(r,q,o){var p,n,k;if(!this._events){return}p=this._events[r];if(!p){return}if(!q){for(n=0,k=p.length;n<k;n++){p[n].fn=g.Util.falseFn}delete this._events[r];return}if(o===this){o=b}if(p){for(n=0,k=p.length;n<k;n++){var m=p[n];if(m.ctx!==o){continue}if(m.fn===q){m.fn=g.Util.falseFn;if(this._firingCount){this._events[r]=p=p.slice()}p.splice(n,1);return}}}},fire:function(q,s,m){if(!this.listens(q,m)){return this}var r=g.Util.extend({},s,{type:q,target:this});if(this._events){var p=this._events[q];if(p){this._firingCount=(this._firingCount+1)||1;for(var o=0,k=p.length;o<k;o++){var n=p[o];n.fn.call(n.ctx||this,r)}this._firingCount--}}if(m){this._propagateEvent(r)}return this},listens:function(m,k){var l=this._events&&this._events[m];if(l&&l.length){return true}if(k){for(var n in this._eventParents){if(this._eventParents[n].listens(m,k)){return true}}}return false},once:function(l,o,k){if(typeof l==="object"){for(var n in l){this.once(n,l[n],o)}return this}var m=g.bind(function(){this.off(l,o,k).off(l,m,k)},this);return this.on(l,o,k).on(l,m,k)},addEventParent:function(k){this._eventParents=this._eventParents||{};this._eventParents[g.stamp(k)]=k;return this},removeEventParent:function(k){if(this._eventParents){delete this._eventParents[g.stamp(k)]}return this},_propagateEvent:function(k){for(var l in this._eventParents){this._eventParents[l].fire(k.type,g.extend({layer:k.target},k),true)}}});var c=g.Evented.prototype;c.addEventListener=c.on;c.removeEventListener=c.clearAllEventListeners=c.off;c.addOneTimeEventListener=c.once;c.fireEvent=c.fire;c.hasEventListeners=c.listens;g.Mixin={Events:c};(function(){var n=navigator.userAgent.toLowerCase(),w=f.documentElement,m="ActiveXObject" in d,x=n.indexOf("webkit")!==-1,z=n.indexOf("phantom")!==-1,u=n.search("android [23]")!==-1,s=n.indexOf("chrome")!==-1,o=n.indexOf("gecko")!==-1&&!x&&!d.opera&&!m,v=navigator.platform.indexOf("Win")===0,l=typeof orientation!=="undefined"||n.indexOf("mobile")!==-1,q=!d.PointerEvent&&d.MSPointerEvent,k=d.PointerEvent||q,t=m&&("transition" in w.style),y=("WebKitCSSMatrix" in d)&&("m11" in new d.WebKitCSSMatrix())&&!u,p="MozPerspective" in w.style,A="OTransition" in w.style;var r=!d.L_NO_TOUCH&&(k||"ontouchstart" in d||(d.DocumentTouch&&f instanceof d.DocumentTouch));g.Browser={ie:m,ielt9:m&&!f.addEventListener,edge:"msLaunchUri" in navigator&&!("documentMode" in f),webkit:x,gecko:o,android:n.indexOf("android")!==-1,android23:u,chrome:s,safari:!s&&n.indexOf("safari")!==-1,win:v,ie3d:t,webkit3d:y,gecko3d:p,opera12:A,any3d:!d.L_DISABLE_3D&&(t||y||p)&&!A&&!z,mobile:l,mobileWebkit:l&&x,mobileWebkit3d:l&&y,mobileOpera:l&&d.opera,mobileGecko:l&&o,touch:!!r,msPointer:!!q,pointer:!!k,retina:(d.devicePixelRatio||(d.screen.deviceXDPI/d.screen.logicalXDPI))>1}}());g.Point=function(k,m,l){this.x=(l?Math.round(k):k);this.y=(l?Math.round(m):m)};g.Point.prototype={clone:function(){return new g.Point(this.x,this.y)},add:function(k){return this.clone()._add(g.point(k))},_add:function(k){this.x+=k.x;this.y+=k.y;return this},subtract:function(k){return this.clone()._subtract(g.point(k))},_subtract:function(k){this.x-=k.x;this.y-=k.y;return this},divideBy:function(k){return this.clone()._divideBy(k)},_divideBy:function(k){this.x/=k;this.y/=k;return this},multiplyBy:function(k){return this.clone()._multiplyBy(k)},_multiplyBy:function(k){this.x*=k;this.y*=k;return this},scaleBy:function(k){return new g.Point(this.x*k.x,this.y*k.y)},unscaleBy:function(k){return new g.Point(this.x/k.x,this.y/k.y)},round:function(){return this.clone()._round()},_round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},floor:function(){return this.clone()._floor()},_floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){return this.clone()._ceil()},_ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},distanceTo:function(l){l=g.point(l);var k=l.x-this.x,m=l.y-this.y;return Math.sqrt(k*k+m*m)},equals:function(k){k=g.point(k);return k.x===this.x&&k.y===this.y},contains:function(k){k=g.point(k);return Math.abs(k.x)<=Math.abs(this.x)&&Math.abs(k.y)<=Math.abs(this.y)},toString:function(){return"Point("+g.Util.formatNum(this.x)+", "+g.Util.formatNum(this.y)+")"}};g.point=function(k,m,l){if(k instanceof g.Point){return k}if(g.Util.isArray(k)){return new g.Point(k[0],k[1])}if(k===b||k===null){return k}if(typeof k==="object"&&"x" in k&&"y" in k){return new g.Point(k.x,k.y)}return new g.Point(k,m,l)};g.Bounds=function(m,l){if(!m){return}var o=l?[m,l]:m;for(var n=0,k=o.length;n<k;n++){this.extend(o[n])}};g.Bounds.prototype={extend:function(k){k=g.point(k);if(!this.min&&!this.max){this.min=k.clone();this.max=k.clone()}else{this.min.x=Math.min(k.x,this.min.x);this.max.x=Math.max(k.x,this.max.x);this.min.y=Math.min(k.y,this.min.y);this.max.y=Math.max(k.y,this.max.y)}return this},getCenter:function(k){return new g.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,k)},getBottomLeft:function(){return new g.Point(this.min.x,this.max.y)},getTopRight:function(){return new g.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(m){var l,k;if(typeof m[0]==="number"||m instanceof g.Point){m=g.point(m)}else{m=g.bounds(m)}if(m instanceof g.Bounds){l=m.min;k=m.max}else{l=k=m}return(l.x>=this.min.x)&&(k.x<=this.max.x)&&(l.y>=this.min.y)&&(k.y<=this.max.y)},intersects:function(p){p=g.bounds(p);var n=this.min,k=this.max,o=p.min,l=p.max,m=(l.x>=n.x)&&(o.x<=k.x),q=(l.y>=n.y)&&(o.y<=k.y);return m&&q},overlaps:function(q){q=g.bounds(q);var n=this.min,k=this.max,p=q.min,l=q.max,o=(l.x>n.x)&&(p.x<k.x),m=(l.y>n.y)&&(p.y<k.y);return o&&m},isValid:function(){return !!(this.min&&this.max)}};g.bounds=function(l,k){if(!l||l instanceof g.Bounds){return l}return new g.Bounds(l,k)};g.Transformation=function(l,k,n,m){this._a=l;this._b=k;this._c=n;this._d=m};g.Transformation.prototype={transform:function(k,l){return this._transform(k.clone(),l)},_transform:function(k,l){l=l||1;k.x=l*(this._a*k.x+this._b);k.y=l*(this._c*k.y+this._d);return k},untransform:function(k,l){l=l||1;return new g.Point((k.x/l-this._b)/this._a,(k.y/l-this._d)/this._c)}};g.DomUtil={get:function(k){return typeof k==="string"?f.getElementById(k):k},getStyle:function(m,l){var n=m.style[l]||(m.currentStyle&&m.currentStyle[l]);if((!n||n==="auto")&&f.defaultView){var k=f.defaultView.getComputedStyle(m,null);n=k?k[l]:null}return n==="auto"?null:n},create:function(l,n,k){var m=f.createElement(l);m.className=n||"";if(k){k.appendChild(m)}return m},remove:function(l){var k=l.parentNode;if(k){k.removeChild(l)}},empty:function(k){while(k.firstChild){k.removeChild(k.firstChild)}},toFront:function(k){k.parentNode.appendChild(k)},toBack:function(l){var k=l.parentNode;k.insertBefore(l,k.firstChild)},hasClass:function(m,k){if(m.classList!==b){return m.classList.contains(k)}var l=g.DomUtil.getClass(m);return l.length>0&&new RegExp("(^|\\s)"+k+"(\\s|$)").test(l)},addClass:function(p,l){if(p.classList!==b){var n=g.Util.splitWords(l);for(var m=0,k=n.length;m<k;m++){p.classList.add(n[m])}}else{if(!g.DomUtil.hasClass(p,l)){var o=g.DomUtil.getClass(p);g.DomUtil.setClass(p,(o?o+" ":"")+l)}}},removeClass:function(l,k){if(l.classList!==b){l.classList.remove(k)}else{g.DomUtil.setClass(l,g.Util.trim((" "+g.DomUtil.getClass(l)+" ").replace(" "+k+" "," ")))}},setClass:function(l,k){if(l.className.baseVal===b){l.className=k}else{l.className.baseVal=k}},getClass:function(k){return k.className.baseVal===b?k.className:k.className.baseVal},setOpacity:function(k,l){if("opacity" in k.style){k.style.opacity=l}else{if("filter" in k.style){g.DomUtil._setOpacityIE(k,l)}}},_setOpacityIE:function(m,n){var l=false,k="DXImageTransform.Microsoft.Alpha";try{l=m.filters.item(k)}catch(o){if(n===1){return}}n=Math.round(n*100);if(l){l.Enabled=(n!==100);l.Opacity=n}else{m.style.filter+=" progid:"+k+"(opacity="+n+")"}},testProp:function(m){var l=f.documentElement.style;for(var k=0;k<m.length;k++){if(m[k] in l){return m[k]}}return false},setTransform:function(k,m,l){var n=m||new g.Point(0,0);k.style[g.DomUtil.TRANSFORM]=(g.Browser.ie3d?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(l?" scale("+l+")":"")},setPosition:function(l,k){l._leaflet_pos=k;if(g.Browser.any3d){g.DomUtil.setTransform(l,k)}else{l.style.left=k.x+"px";l.style.top=k.y+"px"}},getPosition:function(k){return k._leaflet_pos||new g.Point(0,0)}};(function(){g.DomUtil.TRANSFORM=g.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);var l=g.DomUtil.TRANSITION=g.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);g.DomUtil.TRANSITION_END=l==="webkitTransition"||l==="OTransition"?l+"End":"transitionend";if("onselectstart" in f){g.DomUtil.disableTextSelection=function(){g.DomEvent.on(d,"selectstart",g.DomEvent.preventDefault)};g.DomUtil.enableTextSelection=function(){g.DomEvent.off(d,"selectstart",g.DomEvent.preventDefault)}}else{var k=g.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);g.DomUtil.disableTextSelection=function(){if(k){var m=f.documentElement.style;this._userSelect=m[k];m[k]="none"}};g.DomUtil.enableTextSelection=function(){if(k){f.documentElement.style[k]=this._userSelect;delete this._userSelect}}}g.DomUtil.disableImageDrag=function(){g.DomEvent.on(d,"dragstart",g.DomEvent.preventDefault)};g.DomUtil.enableImageDrag=function(){g.DomEvent.off(d,"dragstart",g.DomEvent.preventDefault)};g.DomUtil.preventOutline=function(m){while(m.tabIndex===-1){m=m.parentNode}if(!m||!m.style){return}g.DomUtil.restoreOutline();this._outlineElement=m;this._outlineStyle=m.style.outline;m.style.outline="none";g.DomEvent.on(d,"keydown",g.DomUtil.restoreOutline,this)};g.DomUtil.restoreOutline=function(){if(!this._outlineElement){return}this._outlineElement.style.outline=this._outlineStyle;delete this._outlineElement;delete this._outlineStyle;g.DomEvent.off(d,"keydown",g.DomUtil.restoreOutline,this)}})();g.LatLng=function(m,k,l){if(isNaN(m)||isNaN(k)){throw new Error("Invalid LatLng object: ("+m+", "+k+")")}this.lat=+m;this.lng=+k;if(l!==b){this.alt=+l}};g.LatLng.prototype={equals:function(m,k){if(!m){return false}m=g.latLng(m);var l=Math.max(Math.abs(this.lat-m.lat),Math.abs(this.lng-m.lng));return l<=(k===b?1e-9:k)},toString:function(k){return"LatLng("+g.Util.formatNum(this.lat,k)+", "+g.Util.formatNum(this.lng,k)+")"},distanceTo:function(k){return g.CRS.Earth.distance(this,g.latLng(k))},wrap:function(){return g.CRS.Earth.wrapLatLng(this)},toBounds:function(l){var m=180*l/40075017,k=m/Math.cos((Math.PI/180)*this.lat);return g.latLngBounds([this.lat-m,this.lng-k],[this.lat+m,this.lng+k])},clone:function(){return new g.LatLng(this.lat,this.lng,this.alt)}};g.latLng=function(l,k,m){if(l instanceof g.LatLng){return l}if(g.Util.isArray(l)&&typeof l[0]!=="object"){if(l.length===3){return new g.LatLng(l[0],l[1],l[2])}if(l.length===2){return new g.LatLng(l[0],l[1])}return null}if(l===b||l===null){return l}if(typeof l==="object"&&"lat" in l){return new g.LatLng(l.lat,"lng" in l?l.lng:l.lon,l.alt)}if(k===b){return null}return new g.LatLng(l,k,m)};g.LatLngBounds=function(o,m){if(!o){return}var l=m?[o,m]:o;for(var n=0,k=l.length;n<k;n++){this.extend(l[n])}};g.LatLngBounds.prototype={extend:function(o){var k=this._southWest,n=this._northEast,l,m;if(o instanceof g.LatLng){l=o;m=o}else{if(o instanceof g.LatLngBounds){l=o._southWest;m=o._northEast;if(!l||!m){return this}}else{return o?this.extend(g.latLng(o)||g.latLngBounds(o)):this}}if(!k&&!n){this._southWest=new g.LatLng(l.lat,l.lng);this._northEast=new g.LatLng(m.lat,m.lng)}else{k.lat=Math.min(l.lat,k.lat);k.lng=Math.min(l.lng,k.lng);n.lat=Math.max(m.lat,n.lat);n.lng=Math.max(m.lng,n.lng)}return this},pad:function(n){var l=this._southWest,o=this._northEast,k=Math.abs(l.lat-o.lat)*n,m=Math.abs(l.lng-o.lng)*n;return new g.LatLngBounds(new g.LatLng(l.lat-k,l.lng-m),new g.LatLng(o.lat+k,o.lng+m))},getCenter:function(){return new g.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new g.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new g.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){if(typeof o[0]==="number"||o instanceof g.LatLng){o=g.latLng(o)}else{o=g.latLngBounds(o)}var k=this._southWest,n=this._northEast,l,m;if(o instanceof g.LatLngBounds){l=o.getSouthWest();m=o.getNorthEast()}else{l=m=o}return(l.lat>=k.lat)&&(m.lat<=n.lat)&&(l.lng>=k.lng)&&(m.lng<=n.lng)},intersects:function(n){n=g.latLngBounds(n);var k=this._southWest,q=this._northEast,l=n.getSouthWest(),p=n.getNorthEast(),o=(p.lat>=k.lat)&&(l.lat<=q.lat),m=(p.lng>=k.lng)&&(l.lng<=q.lng);return o&&m},overlaps:function(o){o=g.latLngBounds(o);var k=this._southWest,q=this._northEast,l=o.getSouthWest(),p=o.getNorthEast(),n=(p.lat>k.lat)&&(l.lat<q.lat),m=(p.lng>k.lng)&&(l.lng<q.lng);return n&&m},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(k){if(!k){return false}k=g.latLngBounds(k);return this._southWest.equals(k.getSouthWest())&&this._northEast.equals(k.getNorthEast())},isValid:function(){return !!(this._southWest&&this._northEast)}};g.latLngBounds=function(l,k){if(l instanceof g.LatLngBounds){return l}return new g.LatLngBounds(l,k)};g.Projection={};g.Projection.LonLat={project:function(k){return new g.Point(k.lng,k.lat)},unproject:function(k){return new g.LatLng(k.y,k.x)},bounds:g.bounds([-180,-90],[180,90])};g.Projection.SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(o){var n=Math.PI/180,k=this.MAX_LATITUDE,m=Math.max(Math.min(k,o.lat),-k),l=Math.sin(m*n);return new g.Point(this.R*o.lng*n,this.R*Math.log((1+l)/(1-l))/2)},unproject:function(k){var l=180/Math.PI;return new g.LatLng((2*Math.atan(Math.exp(k.y/this.R))-(Math.PI/2))*l,k.x*l/this.R)},bounds:(function(){var k=6378137*Math.PI;return g.bounds([-k,-k],[k,k])})()};g.CRS={latLngToPoint:function(n,l){var k=this.projection.project(n),m=this.scale(l);return this.transformation._transform(k,m)},pointToLatLng:function(k,m){var n=this.scale(m),l=this.transformation.untransform(k,n);return this.projection.unproject(l)},project:function(k){return this.projection.project(k)},unproject:function(k){return this.projection.unproject(k)},scale:function(k){return 256*Math.pow(2,k)},zoom:function(k){return Math.log(k/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite){return null}var l=this.projection.bounds,n=this.scale(o),m=this.transformation.transform(l.min,n),k=this.transformation.transform(l.max,n);return g.bounds(m,k)},infinite:false,wrapLatLng:function(n){var k=this.wrapLng?g.Util.wrapNum(n.lng,this.wrapLng,true):n.lng,m=this.wrapLat?g.Util.wrapNum(n.lat,this.wrapLat,true):n.lat,l=n.alt;return g.latLng(m,k,l)}};g.CRS.Simple=g.extend({},g.CRS,{projection:g.Projection.LonLat,transformation:new g.Transformation(1,0,-1,0),scale:function(k){return Math.pow(2,k)},zoom:function(k){return Math.log(k)/Math.LN2},distance:function(k,n){var m=n.lng-k.lng,l=n.lat-k.lat;return Math.sqrt(m*m+l*l)},infinite:true});g.CRS.Earth=g.extend({},g.CRS,{wrapLng:[-180,180],R:6371000,distance:function(l,p){var k=Math.PI/180,o=l.lat*k,n=p.lat*k,m=Math.sin(o)*Math.sin(n)+Math.cos(o)*Math.cos(n)*Math.cos((p.lng-l.lng)*k);return this.R*Math.acos(Math.min(m,1))}});g.CRS.EPSG3857=g.extend({},g.CRS.Earth,{code:"EPSG:3857",projection:g.Projection.SphericalMercator,transformation:(function(){var k=0.5/(Math.PI*g.Projection.SphericalMercator.R);return new g.Transformation(k,0.5,-k,0.5)}())});g.CRS.EPSG900913=g.extend({},g.CRS.EPSG3857,{code:"EPSG:900913"});g.CRS.EPSG4326=g.extend({},g.CRS.Earth,{code:"EPSG:4326",projection:g.Projection.LonLat,transformation:new g.Transformation(1/180,1,-1/180,0.5)});g.Map=g.Evented.extend({options:{crs:g.CRS.EPSG3857,center:b,zoom:b,minZoom:b,maxZoom:b,layers:[],maxBounds:b,renderer:b,fadeAnimation:true,markerZoomAnimation:true,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:true},initialize:function(l,k){k=g.setOptions(this,k);this._initContainer(l);this._initLayout();this._onResize=g.bind(this._onResize,this);this._initEvents();if(k.maxBounds){this.setMaxBounds(k.maxBounds)}if(k.zoom!==b){this._zoom=this._limitZoom(k.zoom)}if(k.center&&k.zoom!==b){this.setView(g.latLng(k.center),k.zoom,{reset:true})}this._handlers=[];this._layers={};this._zoomBoundLayers={};this._sizeChanged=true;this.callInitHooks();this._addLayers(this.options.layers)},setView:function(k,l){l=l===b?this.getZoom():l;this._resetView(g.latLng(k),l);return this},setZoom:function(l,k){if(!this._loaded){this._zoom=l;return this}return this.setView(this.getCenter(),l,{zoom:k})},zoomIn:function(l,k){l=l||(g.Browser.any3d?this.options.zoomDelta:1);return this.setZoom(this._zoom+l,k)},zoomOut:function(l,k){l=l||(g.Browser.any3d?this.options.zoomDelta:1);return this.setZoom(this._zoom-l,k)},setZoomAround:function(r,p,o){var q=this.getZoomScale(p),n=this.getSize().divideBy(2),m=r instanceof g.Point?r:this.latLngToContainerPoint(r),k=m.subtract(n).multiplyBy(1-1/q),l=this.containerPointToLatLng(n.add(k));return this.setView(l,p,{zoom:o})},_getBoundsCenterZoom:function(l,s){s=s||{};l=l.getBounds?l.getBounds():g.latLngBounds(l);var n=g.point(s.paddingTopLeft||s.padding||[0,0]),m=g.point(s.paddingBottomRight||s.padding||[0,0]),r=this.getBoundsZoom(l,false,n.add(m));r=(typeof s.maxZoom==="number")?Math.min(s.maxZoom,r):r;var p=m.subtract(n).divideBy(2),q=this.project(l.getSouthWest(),r),o=this.project(l.getNorthEast(),r),k=this.unproject(q.add(o).divideBy(2).add(p),r);return{center:k,zoom:r}},fitBounds:function(l,k){l=g.latLngBounds(l);if(!l.isValid()){throw new Error("Bounds are not valid.")}var m=this._getBoundsCenterZoom(l,k);return this.setView(m.center,m.zoom,k)},fitWorld:function(k){return this.fitBounds([[-90,-180],[90,180]],k)},panTo:function(k,l){return this.setView(k,this._zoom,{pan:l})},panBy:function(k){this.fire("movestart");this._rawPanBy(g.point(k));this.fire("move");return this.fire("moveend")},setMaxBounds:function(k){k=g.latLngBounds(k);if(!k.isValid()){this.options.maxBounds=null;return this.off("moveend",this._panInsideMaxBounds)}else{if(this.options.maxBounds){this.off("moveend",this._panInsideMaxBounds)}}this.options.maxBounds=k;if(this._loaded){this._panInsideMaxBounds()}return this.on("moveend",this._panInsideMaxBounds)},setMinZoom:function(k){this.options.minZoom=k;if(this._loaded&&this.getZoom()<this.options.minZoom){return this.setZoom(k)}return this},setMaxZoom:function(k){this.options.maxZoom=k;if(this._loaded&&(this.getZoom()>this.options.maxZoom)){return this.setZoom(k)}return this},panInsideBounds:function(n,m){this._enforcingBounds=true;var k=this.getCenter(),l=this._limitCenter(k,this._zoom,g.latLngBounds(n));if(!k.equals(l)){this.panTo(l,m)}this._enforcingBounds=false;return this},invalidateSize:function(m){if(!this._loaded){return this}m=g.extend({animate:false,pan:true},m===true?{animate:true}:m);var n=this.getSize();this._sizeChanged=true;this._lastCenter=null;var l=this.getSize(),p=n.divideBy(2).round(),k=l.divideBy(2).round(),o=p.subtract(k);if(!o.x&&!o.y){return this}if(m.animate&&m.pan){this.panBy(o)}else{if(m.pan){this._rawPanBy(o)}this.fire("move");if(m.debounceMoveend){clearTimeout(this._sizeTimer);this._sizeTimer=setTimeout(g.bind(this.fire,this,"moveend"),200)}else{this.fire("moveend")}}return this.fire("resize",{oldSize:n,newSize:l})},stop:function(){this.setZoom(this._limitZoom(this._zoom));if(!this.options.zoomSnap){this.fire("viewreset")}return this._stop()},addHandler:function(k,m){if(!m){return this}var l=this[k]=new m(this);this._handlers.push(l);if(this.options[k]){l.enable()}return this},remove:function(){this._initEvents(true);if(this._containerId!==this._container._leaflet_id){throw new Error("Map container is being reused by another instance")}try{delete this._container._leaflet_id;delete this._containerId}catch(l){this._container._leaflet_id=b;this._containerId=b}g.DomUtil.remove(this._mapPane);if(this._clearControlPos){this._clearControlPos()}this._clearHandlers();if(this._loaded){this.fire("unload")}for(var k in this._layers){this._layers[k].remove()}return this},createPane:function(l,k){var m="leaflet-pane"+(l?" leaflet-"+l.replace("Pane","")+"-pane":""),n=g.DomUtil.create("div",m,k||this._mapPane);if(l){this._panes[l]=n}return n},getCenter:function(){this._checkIfLoaded();if(this._lastCenter&&!this._moved()){return this._lastCenter}return this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds(),k=this.unproject(l.getBottomLeft()),m=this.unproject(l.getTopRight());return new g.LatLngBounds(k,m)},getMinZoom:function(){return this.options.minZoom===b?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===b?(this._layersMaxZoom===b?Infinity:this._layersMaxZoom):this.options.maxZoom},getBoundsZoom:function(k,n,s){k=g.latLngBounds(k);s=g.point(s||[0,0]);var t=this.getZoom()||0,o=this.getMinZoom(),r=this.getMaxZoom(),p=k.getNorthWest(),q=k.getSouthEast(),v=this.getSize().subtract(s),u=this.project(q,t).subtract(this.project(p,t)),m=g.Browser.any3d?this.options.zoomSnap:1;var l=Math.min(v.x/u.x,v.y/u.y);t=this.getScaleZoom(l,t);if(m){t=Math.round(t/(m/100))*(m/100);t=n?Math.ceil(t/m)*m:Math.floor(t/m)*m}return Math.max(o,Math.min(r,t))},getSize:function(){if(!this._size||this._sizeChanged){this._size=new g.Point(this._container.clientWidth,this._container.clientHeight);this._sizeChanged=false}return this._size.clone()},getPixelBounds:function(k,m){var l=this._getTopLeftPoint(k,m);return new g.Bounds(l,l.add(this.getSize()))},getPixelOrigin:function(){this._checkIfLoaded();return this._pixelOrigin},getPixelWorldBounds:function(k){return this.options.crs.getProjectedBounds(k===b?this.getZoom():k)},getPane:function(k){return typeof k==="string"?this._panes[k]:k},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(l,m){var k=this.options.crs;m=m===b?this._zoom:m;return k.scale(l)/k.scale(m)},getScaleZoom:function(n,m){var k=this.options.crs;m=m===b?this._zoom:m;var l=k.zoom(n*k.scale(m));return isNaN(l)?Infinity:l},project:function(l,k){k=k===b?this._zoom:k;return this.options.crs.latLngToPoint(g.latLng(l),k)},unproject:function(k,l){l=l===b?this._zoom:l;return this.options.crs.pointToLatLng(g.point(k),l)},layerPointToLatLng:function(k){var l=g.point(k).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(l){var k=this.project(g.latLng(l))._round();return k._subtract(this.getPixelOrigin())},wrapLatLng:function(k){return this.options.crs.wrapLatLng(g.latLng(k))},distance:function(k,l){return this.options.crs.distance(g.latLng(k),g.latLng(l))},containerPointToLayerPoint:function(k){return g.point(k).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(k){return g.point(k).add(this._getMapPanePos())},containerPointToLatLng:function(k){var l=this.containerPointToLayerPoint(g.point(k));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(k){return this.layerPointToContainerPoint(this.latLngToLayerPoint(g.latLng(k)))},mouseEventToContainerPoint:function(k){return g.DomEvent.getMousePosition(k,this._container)},mouseEventToLayerPoint:function(k){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(k))},mouseEventToLatLng:function(k){return this.layerPointToLatLng(this.mouseEventToLayerPoint(k))},_initContainer:function(l){var k=this._container=g.DomUtil.get(l);if(!k){throw new Error("Map container not found.")}else{if(k._leaflet_id){throw new Error("Map container is already initialized.")}}g.DomEvent.addListener(k,"scroll",this._onScroll,this);this._containerId=g.Util.stamp(k)},_initLayout:function(){var l=this._container;this._fadeAnimated=this.options.fadeAnimation&&g.Browser.any3d;g.DomUtil.addClass(l,"leaflet-container"+(g.Browser.touch?" leaflet-touch":"")+(g.Browser.retina?" leaflet-retina":"")+(g.Browser.ielt9?" leaflet-oldie":"")+(g.Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var k=g.DomUtil.getStyle(l,"position");if(k!=="absolute"&&k!=="relative"&&k!=="fixed"){l.style.position="relative"}this._initPanes();if(this._initControlPos){this._initControlPos()}},_initPanes:function(){var k=this._panes={};this._paneRenderers={};this._mapPane=this.createPane("mapPane",this._container);g.DomUtil.setPosition(this._mapPane,new g.Point(0,0));this.createPane("tilePane");this.createPane("shadowPane");this.createPane("overlayPane");this.createPane("markerPane");this.createPane("tooltipPane");this.createPane("popupPane");if(!this.options.markerZoomAnimation){g.DomUtil.addClass(k.markerPane,"leaflet-zoom-hide");g.DomUtil.addClass(k.shadowPane,"leaflet-zoom-hide")}},_resetView:function(l,m){g.DomUtil.setPosition(this._mapPane,new g.Point(0,0));var n=!this._loaded;this._loaded=true;m=this._limitZoom(m);this.fire("viewprereset");var k=this._zoom!==m;this._moveStart(k)._move(l,m)._moveEnd(k);this.fire("viewreset");if(n){this.fire("load")}},_moveStart:function(k){if(k){this.fire("zoomstart")}return this.fire("movestart")},_move:function(l,m,n){if(m===b){m=this._zoom}var k=this._zoom!==m;this._zoom=m;this._lastCenter=l;this._pixelOrigin=this._getNewPixelOrigin(l);if(k||(n&&n.pinch)){this.fire("zoom",n)}return this.fire("move",n)},_moveEnd:function(k){if(k){this.fire("zoomend")}return this.fire("moveend")},_stop:function(){g.Util.cancelAnimFrame(this._flyToFrame);if(this._panAnim){this._panAnim.stop()}return this},_rawPanBy:function(k){g.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(k))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){if(!this._enforcingBounds){this.panInsideBounds(this.options.maxBounds)}},_checkIfLoaded:function(){if(!this._loaded){throw new Error("Set map center and zoom first.")}},_initEvents:function(l){if(!g.DomEvent){return}this._targets={};this._targets[g.stamp(this._container)]=this;var k=l?"off":"on";g.DomEvent[k](this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this);if(this.options.trackResize){g.DomEvent[k](d,"resize",this._onResize,this)}if(g.Browser.any3d&&this.options.transform3DLimit){this[k]("moveend",this._onMoveEnd)}},_onResize:function(){g.Util.cancelAnimFrame(this._resizeRequest);this._resizeRequest=g.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:true})},this)},_onScroll:function(){this._container.scrollTop=0;this._container.scrollLeft=0},_onMoveEnd:function(){var k=this._getMapPanePos();if(Math.max(Math.abs(k.x),Math.abs(k.y))>=this.options.transform3DLimit){this._resetView(this.getCenter(),this.getZoom())}},_findEventTargets:function(p,l){var k=[],o,n=l==="mouseout"||l==="mouseover",q=p.target||p.srcElement,m=false;while(q){o=this._targets[g.stamp(q)];if(o&&(l==="click"||l==="preclick")&&!p._simulated&&this._draggableMoved(o)){m=true;break}if(o&&o.listens(l,true)){if(n&&!g.DomEvent._isExternalTarget(q,p)){break}k.push(o);if(n){break}}if(q===this._container){break}q=q.parentNode}if(!k.length&&!m&&!n&&g.DomEvent._isExternalTarget(q,p)){k=[this]}return k},_handleDOMEvent:function(l){if(!this._loaded||g.DomEvent._skipped(l)){return}var k=l.type==="keypress"&&l.keyCode===13?"click":l.type;if(k==="mousedown"){g.DomUtil.preventOutline(l.target||l.srcElement)}this._fireDOMEvent(l,k)},_fireDOMEvent:function(q,n,k){if(q.type==="click"){var l=g.Util.extend({},q);l.type="preclick";this._fireDOMEvent(l,l.type,k)}if(q._stopped){return}k=(k||[]).concat(this._findEventTargets(q,n));if(!k.length){return}var p=k[0];if(n==="contextmenu"&&p.listens(n,true)){g.DomEvent.preventDefault(q)}var o={originalEvent:q};if(q.type!=="keypress"){var r=p instanceof g.Marker;o.containerPoint=r?this.latLngToContainerPoint(p.getLatLng()):this.mouseEventToContainerPoint(q);o.layerPoint=this.containerPointToLayerPoint(o.containerPoint);o.latlng=r?p.getLatLng():this.layerPointToLatLng(o.layerPoint)}for(var m=0;m<k.length;m++){k[m].fire(n,o,true);if(o.originalEvent._stopped||(k[m].options.nonBubblingEvents&&g.Util.indexOf(k[m].options.nonBubblingEvents,n)!==-1)){return}}},_draggableMoved:function(k){k=k.dragging&&k.dragging.enabled()?k:this;return(k.dragging&&k.dragging.moved())||(this.boxZoom&&this.boxZoom.moved())},_clearHandlers:function(){for(var l=0,k=this._handlers.length;l<k;l++){this._handlers[l].disable()}},whenReady:function(l,k){if(this._loaded){l.call(k||this,{target:this})}else{this.on("load",l,k)}return this},_getMapPanePos:function(){return g.DomUtil.getPosition(this._mapPane)||new g.Point(0,0)},_moved:function(){var k=this._getMapPanePos();return k&&!k.equals([0,0])},_getTopLeftPoint:function(k,m){var l=k&&m!==b?this._getNewPixelOrigin(k,m):this.getPixelOrigin();return l.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(k,m){var l=this.getSize()._divideBy(2);return this.project(k,m)._subtract(l)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(n,m,k){var l=this._getNewPixelOrigin(k,m);return this.project(n,m)._subtract(l)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(k){return this.latLngToLayerPoint(k).subtract(this._getCenterLayerPoint())},_limitCenter:function(k,n,m){if(!m){return k}var q=this.project(k,n),l=this.getSize().divideBy(2),o=new g.Bounds(q.subtract(l),q.add(l)),p=this._getBoundsOffset(o,m,n);if(p.round().equals([0,0])){return k}return this.unproject(q.add(p),n)},_limitOffset:function(n,k){if(!k){return n}var m=this.getPixelBounds(),l=new g.Bounds(m.min.add(n),m.max.add(n));return n.add(this._getBoundsOffset(l,k))},_getBoundsOffset:function(p,m,q){var l=g.bounds(this.project(m.getNorthEast(),q),this.project(m.getSouthWest(),q)),r=l.min.subtract(p.min),o=l.max.subtract(p.max),n=this._rebound(r.x,-o.x),k=this._rebound(r.y,-o.y);return new g.Point(n,k)},_rebound:function(l,k){return l+k>0?Math.round(l-k)/2:Math.max(0,Math.ceil(l))-Math.max(0,Math.floor(k))},_limitZoom:function(n){var m=this.getMinZoom(),l=this.getMaxZoom(),k=g.Browser.any3d?this.options.zoomSnap:1;if(k){n=Math.round(n/k)*k}return Math.max(m,Math.min(l,n))}});g.map=function(l,k){return new g.Map(l,k)};g.Layer=g.Evented.extend({options:{pane:"overlayPane",nonBubblingEvents:[]},addTo:function(k){k.addLayer(this);return this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(k){if(k){k.removeLayer(this)}return this},getPane:function(k){return this._map.getPane(k?(this.options[k]||k):this.options.pane)},addInteractiveTarget:function(k){this._map._targets[g.stamp(k)]=this;return this},removeInteractiveTarget:function(k){delete this._map._targets[g.stamp(k)];return this},_layerAdd:function(m){var l=m.target;if(!l.hasLayer(this)){return}this._map=l;this._zoomAnimated=l._zoomAnimated;if(this.getEvents){var k=this.getEvents();l.on(k,this);this.once("remove",function(){l.off(k,this)},this)}this.onAdd(l);if(this.getAttribution&&this._map.attributionControl){this._map.attributionControl.addAttribution(this.getAttribution())}this.fire("add");l.fire("layeradd",{layer:this})}});g.Map.include({addLayer:function(k){var l=g.stamp(k);if(this._layers[l]){return this}this._layers[l]=k;k._mapToAdd=this;if(k.beforeAdd){k.beforeAdd(this)}this.whenReady(k._layerAdd,k);return this},removeLayer:function(k){var l=g.stamp(k);if(!this._layers[l]){return this}if(this._loaded){k.onRemove(this)}if(k.getAttribution&&this.attributionControl){this.attributionControl.removeAttribution(k.getAttribution())}delete this._layers[l];if(this._loaded){this.fire("layerremove",{layer:k});k.fire("remove")}k._map=k._mapToAdd=null;return this},hasLayer:function(k){return !!k&&(g.stamp(k) in this._layers)},eachLayer:function(m,l){for(var k in this._layers){m.call(l,this._layers[k])}return this},_addLayers:function(m){m=m?(g.Util.isArray(m)?m:[m]):[];for(var l=0,k=m.length;l<k;l++){this.addLayer(m[l])}},_addZoomLimit:function(k){if(isNaN(k.options.maxZoom)||!isNaN(k.options.minZoom)){this._zoomBoundLayers[g.stamp(k)]=k;this._updateZoomLevels()}},_removeZoomLimit:function(k){var l=g.stamp(k);if(this._zoomBoundLayers[l]){delete this._zoomBoundLayers[l];this._updateZoomLevels()}},_updateZoomLevels:function(){var o=Infinity,k=-Infinity,n=this._getZoomSpan();for(var m in this._zoomBoundLayers){var l=this._zoomBoundLayers[m].options;o=l.minZoom===b?o:Math.min(o,l.minZoom);k=l.maxZoom===b?k:Math.max(k,l.maxZoom)}this._layersMaxZoom=k===-Infinity?b:k;this._layersMinZoom=o===Infinity?b:o;if(n!==this._getZoomSpan()){this.fire("zoomlevelschange")}}});g.Projection.Mercator={R:6378137,R_MINOR:6356752.314245179,bounds:g.bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(s){var p=Math.PI/180,n=this.R,q=s.lat*p,l=this.R_MINOR/n,o=Math.sqrt(1-l*l),k=o*Math.sin(q);var m=Math.tan(Math.PI/4-q/2)/Math.pow((1-k)/(1+k),o/2);q=-n*Math.log(Math.max(m,1e-10));return new g.Point(s.lng*p*n,q)},unproject:function(u){var s=180/Math.PI,k=this.R,m=this.R_MINOR/k,p=Math.sqrt(1-m*m),t=Math.exp(-u.y/k),q=Math.PI/2-2*Math.atan(t);for(var n=0,o=0.1,l;n<15&&Math.abs(o)>1e-7;n++){l=p*Math.sin(q);l=Math.pow((1-l)/(1+l),p/2);o=Math.PI/2-2*Math.atan(t*l)-q;q+=o}return new g.LatLng(q*s,u.x*s/k)}};g.CRS.EPSG3395=g.extend({},g.CRS.Earth,{code:"EPSG:3395",projection:g.Projection.Mercator,transformation:(function(){var k=0.5/(Math.PI*g.Projection.Mercator.R);return new g.Transformation(k,0.5,-k,0.5)}())});g.GridLayer=g.Layer.extend({options:{tileSize:256,opacity:1,updateWhenIdle:g.Browser.mobile,updateWhenZooming:true,updateInterval:200,attribution:null,zIndex:1,bounds:null,minZoom:0,maxZoom:b,noWrap:false,pane:"tilePane",className:"",keepBuffer:2},initialize:function(k){g.setOptions(this,k)},onAdd:function(){this._initContainer();this._levels={};this._tiles={};this._resetView();this._update()},beforeAdd:function(k){k._addZoomLimit(this)},onRemove:function(k){this._removeAllTiles();g.DomUtil.remove(this._container);k._removeZoomLimit(this);this._container=null;this._tileZoom=null},bringToFront:function(){if(this._map){g.DomUtil.toFront(this._container);this._setAutoZIndex(Math.max)}return this},bringToBack:function(){if(this._map){g.DomUtil.toBack(this._container);this._setAutoZIndex(Math.min)}return this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(k){this.options.opacity=k;this._updateOpacity();return this},setZIndex:function(k){this.options.zIndex=k;this._updateZIndex();return this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();this._update()}return this},getEvents:function(){var k={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};if(!this.options.updateWhenIdle){if(!this._onMove){this._onMove=g.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)}k.move=this._onMove}if(this._zoomAnimated){k.zoomanim=this._animateZoom}return k},createTile:function(){return f.createElement("div")},getTileSize:function(){var k=this.options.tileSize;return k instanceof g.Point?k:new g.Point(k,k)},_updateZIndex:function(){if(this._container&&this.options.zIndex!==b&&this.options.zIndex!==null){this._container.style.zIndex=this.options.zIndex}},_setAutoZIndex:function(n){var o=this.getPane().children,m=-n(-Infinity,Infinity);for(var l=0,k=o.length,p;l<k;l++){p=o[l].style.zIndex;if(o[l]!==this._container&&p){m=n(m,+p)}}if(isFinite(m)){this.options.zIndex=m+n(-1,1);this._updateZIndex()}},_updateOpacity:function(){if(!this._map){return}if(g.Browser.ielt9){return}g.DomUtil.setOpacity(this._container,this.options.opacity);var k=+new Date(),n=false,p=false;for(var l in this._tiles){var m=this._tiles[l];if(!m.current||!m.loaded){continue}var o=Math.min(1,(k-m.loaded)/200);g.DomUtil.setOpacity(m.el,o);if(o<1){n=true}else{if(m.active){p=true}m.active=true}}if(p&&!this._noPrune){this._pruneTiles()}if(n){g.Util.cancelAnimFrame(this._fadeFrame);this._fadeFrame=g.Util.requestAnimFrame(this._updateOpacity,this)}},_initContainer:function(){if(this._container){return}this._container=g.DomUtil.create("div","leaflet-layer "+(this.options.className||""));this._updateZIndex();if(this.options.opacity<1){this._updateOpacity()}this.getPane().appendChild(this._container)},_updateLevels:function(){var l=this._tileZoom,k=this.options.maxZoom;if(l===b){return b}for(var n in this._levels){if(this._levels[n].el.children.length||n===l){this._levels[n].el.style.zIndex=k-Math.abs(l-n)}else{g.DomUtil.remove(this._levels[n].el);this._removeTilesAtZoom(n);delete this._levels[n]}}var o=this._levels[l],m=this._map;if(!o){o=this._levels[l]={};o.el=g.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container);o.el.style.zIndex=k;o.origin=m.project(m.unproject(m.getPixelOrigin()),l).round();o.zoom=l;this._setZoomTransform(o,m.getCenter(),m.getZoom());g.Util.falseFn(o.el.offsetWidth)}this._level=o;return o},_pruneTiles:function(){if(!this._map){return}var k,m;var l=this._map.getZoom();if(l>this.options.maxZoom||l<this.options.minZoom){this._removeAllTiles();return}for(k in this._tiles){m=this._tiles[k];m.retain=m.current}for(k in this._tiles){m=this._tiles[k];if(m.current&&!m.active){var n=m.coords;if(!this._retainParent(n.x,n.y,n.z,n.z-5)){this._retainChildren(n.x,n.y,n.z,n.z+2)}}}for(k in this._tiles){if(!this._tiles[k].retain){this._removeTile(k)}}},_removeTilesAtZoom:function(l){for(var k in this._tiles){if(this._tiles[k].coords.z!==l){continue}this._removeTile(k)}},_removeAllTiles:function(){for(var k in this._tiles){this._removeTile(k)}},_invalidateAll:function(){for(var k in this._levels){g.DomUtil.remove(this._levels[k].el);delete this._levels[k]}this._removeAllTiles();this._tileZoom=null},_retainParent:function(r,p,o,k){var l=Math.floor(r/2),q=Math.floor(p/2),m=o-1,t=new g.Point(+l,+q);t.z=+m;var s=this._tileCoordsToKey(t),n=this._tiles[s];if(n&&n.active){n.retain=true;return true}else{if(n&&n.loaded){n.retain=true}}if(m>k){return this._retainParent(l,q,m,k)}return false},_retainChildren:function(r,o,n,q){for(var l=2*r;l<2*r+2;l++){for(var k=2*o;k<2*o+2;k++){var p=new g.Point(l,k);p.z=n+1;var s=this._tileCoordsToKey(p),m=this._tiles[s];if(m&&m.active){m.retain=true;continue}else{if(m&&m.loaded){m.retain=true}}if(n+1<q){this._retainChildren(l,k,n+1,q)}}}},_resetView:function(l){var k=l&&(l.pinch||l.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),k,k)},_animateZoom:function(k){this._setView(k.center,k.zoom,true,k.noUpdate)},_setView:function(l,n,k,m){var p=Math.round(n);if((this.options.maxZoom!==b&&p>this.options.maxZoom)||(this.options.minZoom!==b&&p<this.options.minZoom)){p=b}var o=this.options.updateWhenZooming&&(p!==this._tileZoom);if(!m||o){this._tileZoom=p;if(this._abortLoading){this._abortLoading()}this._updateLevels();this._resetGrid();if(p!==b){this._update(l)}if(!k){this._pruneTiles()}this._noPrune=!!k}this._setZoomTransforms(l,n)},_setZoomTransforms:function(k,m){for(var l in this._levels){this._setZoomTransform(this._levels[l],k,m)}},_setZoomTransform:function(o,k,l){var n=this._map.getZoomScale(l,o.zoom),m=o.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(k,l)).round();if(g.Browser.any3d){g.DomUtil.setTransform(o.el,m,n)}else{g.DomUtil.setPosition(o.el,m)}},_resetGrid:function(){var n=this._map,k=n.options.crs,m=this._tileSize=this.getTileSize(),o=this._tileZoom;var l=this._map.getPixelWorldBounds(this._tileZoom);if(l){this._globalTileRange=this._pxBoundsToTileRange(l)}this._wrapX=k.wrapLng&&!this.options.noWrap&&[Math.floor(n.project([0,k.wrapLng[0]],o).x/m.x),Math.ceil(n.project([0,k.wrapLng[1]],o).x/m.y)];this._wrapY=k.wrapLat&&!this.options.noWrap&&[Math.floor(n.project([k.wrapLat[0],0],o).y/m.x),Math.ceil(n.project([k.wrapLat[1],0],o).y/m.y)]},_onMoveEnd:function(){if(!this._map||this._map._animatingZoom){return}this._update()},_getTiledPixelBounds:function(k){var o=this._map,n=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),p=o.getZoomScale(n,this._tileZoom),m=o.project(k,this._tileZoom).floor(),l=o.getSize().divideBy(p*2);return new g.Bounds(m.subtract(l),m.add(l))},_update:function(k){var l=this._map;if(!l){return}var z=l.getZoom();if(k===b){k=l.getCenter()}if(this._tileZoom===b){return}var q=this._getTiledPixelBounds(k),m=this._pxBoundsToTileRange(q),w=m.getCenter(),s=[],n=this.options.keepBuffer,r=new g.Bounds(m.getBottomLeft().subtract([n,-n]),m.getTopRight().add([n,-n]));for(var y in this._tiles){var v=this._tiles[y].coords;if(v.z!==this._tileZoom||!r.contains(g.point(v.x,v.y))){this._tiles[y].current=false}}if(Math.abs(z-this._tileZoom)>1){this._setView(k,z);return}for(var o=m.min.y;o<=m.max.y;o++){for(var p=m.min.x;p<=m.max.x;p++){var x=new g.Point(p,o);x.z=this._tileZoom;if(!this._isValidTile(x)){continue}var u=this._tiles[this._tileCoordsToKey(x)];if(u){u.current=true}else{s.push(x)}}}s.sort(function(B,A){return B.distanceTo(w)-A.distanceTo(w)});if(s.length!==0){if(!this._loading){this._loading=true;this.fire("loading")}var t=f.createDocumentFragment();for(p=0;p<s.length;p++){this._addTile(s[p],t)}this._level.el.appendChild(t)}},_isValidTile:function(m){var k=this._map.options.crs;if(!k.infinite){var l=this._globalTileRange;if((!k.wrapLng&&(m.x<l.min.x||m.x>l.max.x))||(!k.wrapLat&&(m.y<l.min.y||m.y>l.max.y))){return false}}if(!this.options.bounds){return true}var n=this._tileCoordsToBounds(m);return g.latLngBounds(this.options.bounds).overlaps(n)},_keyToBounds:function(k){return this._tileCoordsToBounds(this._keyToTileCoords(k))},_tileCoordsToBounds:function(p){var q=this._map,o=this.getTileSize(),m=p.scaleBy(o),k=m.add(o),l=q.unproject(m,p.z),n=q.unproject(k,p.z);if(!this.options.noWrap){l=q.wrapLatLng(l);n=q.wrapLatLng(n)}return new g.LatLngBounds(l,n)},_tileCoordsToKey:function(k){return k.x+":"+k.y+":"+k.z},_keyToTileCoords:function(m){var l=m.split(":"),n=new g.Point(+l[0],+l[1]);n.z=+l[2];return n},_removeTile:function(k){var l=this._tiles[k];if(!l){return}g.DomUtil.remove(l.el);delete this._tiles[k];this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(k)})},_initTile:function(k){g.DomUtil.addClass(k,"leaflet-tile");var l=this.getTileSize();k.style.width=l.x+"px";k.style.height=l.y+"px";k.onselectstart=g.Util.falseFn;k.onmousemove=g.Util.falseFn;if(g.Browser.ielt9&&this.options.opacity<1){g.DomUtil.setOpacity(k,this.options.opacity)}if(g.Browser.android&&!g.Browser.android23){k.style.WebkitBackfaceVisibility="hidden"}},_addTile:function(o,k){var m=this._getTilePos(o),l=this._tileCoordsToKey(o);var n=this.createTile(this._wrapCoords(o),g.bind(this._tileReady,this,o));this._initTile(n);if(this.createTile.length<2){g.Util.requestAnimFrame(g.bind(this._tileReady,this,o,null,n))}g.DomUtil.setPosition(n,m);this._tiles[l]={el:n,coords:o,current:true};k.appendChild(n);this.fire("tileloadstart",{tile:n,coords:o})},_tileReady:function(n,m,l){if(!this._map){return}if(m){this.fire("tileerror",{error:m,tile:l,coords:n})}var k=this._tileCoordsToKey(n);l=this._tiles[k];if(!l){return}l.loaded=+new Date();if(this._map._fadeAnimated){g.DomUtil.setOpacity(l.el,0);g.Util.cancelAnimFrame(this._fadeFrame);this._fadeFrame=g.Util.requestAnimFrame(this._updateOpacity,this)}else{l.active=true;this._pruneTiles()}g.DomUtil.addClass(l.el,"leaflet-tile-loaded");this.fire("tileload",{tile:l.el,coords:n});if(this._noTilesToLoad()){this._loading=false;this.fire("load");if(g.Browser.ielt9||!this._map._fadeAnimated){g.Util.requestAnimFrame(this._pruneTiles,this)}else{setTimeout(g.bind(this._pruneTiles,this),250)}}},_getTilePos:function(k){return k.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(k){var l=new g.Point(this._wrapX?g.Util.wrapNum(k.x,this._wrapX):k.x,this._wrapY?g.Util.wrapNum(k.y,this._wrapY):k.y);l.z=k.z;return l},_pxBoundsToTileRange:function(k){var l=this.getTileSize();return new g.Bounds(k.min.unscaleBy(l).floor(),k.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var k in this._tiles){if(!this._tiles[k].loaded){return false}}return true}});g.gridLayer=function(k){return new g.GridLayer(k)};g.TileLayer=g.GridLayer.extend({options:{minZoom:0,maxZoom:18,maxNativeZoom:null,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:false,zoomReverse:false,detectRetina:false,crossOrigin:false},initialize:function(l,k){this._url=l;k=g.setOptions(this,k);if(k.detectRetina&&g.Browser.retina&&k.maxZoom>0){k.tileSize=Math.floor(k.tileSize/2);if(!k.zoomReverse){k.zoomOffset++;k.maxZoom--}else{k.zoomOffset--;k.minZoom++}k.minZoom=Math.max(0,k.minZoom)}if(typeof k.subdomains==="string"){k.subdomains=k.subdomains.split("")}if(!g.Browser.android){this.on("tileunload",this._onTileRemove)}},setUrl:function(k,l){this._url=k;if(!l){this.redraw()}return this},createTile:function(m,k){var l=f.createElement("img");g.DomEvent.on(l,"load",g.bind(this._tileOnLoad,this,k,l));g.DomEvent.on(l,"error",g.bind(this._tileOnError,this,k,l));if(this.options.crossOrigin){l.crossOrigin=""}l.alt="";l.src=this.getTileUrl(m);return l},getTileUrl:function(l){var k={r:g.Browser.retina?"@2x":"",s:this._getSubdomain(l),x:l.x,y:l.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var m=this._globalTileRange.max.y-l.y;if(this.options.tms){k.y=m}k["-y"]=m}return g.Util.template(this._url,g.extend(k,this.options))},_tileOnLoad:function(k,l){if(g.Browser.ielt9){setTimeout(g.bind(k,this,null,l),0)}else{k(null,l)}},_tileOnError:function(l,m,n){var k=this.options.errorTileUrl;if(k){m.src=k}l(n,m)},getTileSize:function(){var n=this._map,m=g.GridLayer.prototype.getTileSize.call(this),l=this._tileZoom+this.options.zoomOffset,k=this.options.maxNativeZoom;return k!==null&&l>k?m.divideBy(n.getZoomScale(k,l)).round():m},_onTileRemove:function(k){k.tile.onload=null},_getZoomForUrl:function(){var k=this.options,l=this._tileZoom;if(k.zoomReverse){l=k.maxZoom-l}l+=k.zoomOffset;return k.maxNativeZoom!==null?Math.min(l,k.maxNativeZoom):l},_getSubdomain:function(l){var k=Math.abs(l.x+l.y)%this.options.subdomains.length;return this.options.subdomains[k]},_abortLoading:function(){var k,l;for(k in this._tiles){if(this._tiles[k].coords.z!==this._tileZoom){l=this._tiles[k].el;l.onload=g.Util.falseFn;l.onerror=g.Util.falseFn;if(!l.complete){l.src=g.Util.emptyImageUrl;g.DomUtil.remove(l)}}}}});g.tileLayer=function(l,k){return new g.TileLayer(l,k)};g.TileLayer.WMS=g.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:false,version:"1.1.1"},options:{crs:null,uppercase:false},initialize:function(m,l){this._url=m;var k=g.extend({},this.defaultWmsParams);for(var n in l){if(!(n in this.options)){k[n]=l[n]}}l=g.setOptions(this,l);k.width=k.height=l.tileSize*(l.detectRetina&&g.Browser.retina?2:1);this.wmsParams=k},onAdd:function(k){this._crs=this.options.crs||k.options.crs;this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code;g.TileLayer.prototype.onAdd.call(this,k)},getTileUrl:function(n){var o=this._tileCoordsToBounds(n),k=this._crs.project(o.getNorthWest()),m=this._crs.project(o.getSouthEast()),p=(this._wmsVersion>=1.3&&this._crs===g.CRS.EPSG4326?[m.y,k.x,k.y,m.x]:[k.x,m.y,m.x,k.y]).join(","),l=g.TileLayer.prototype.getTileUrl.call(this,n);return l+g.Util.getParamString(this.wmsParams,l,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+p},setParams:function(l,k){g.extend(this.wmsParams,l);if(!k){this.redraw()}return this}});g.tileLayer.wms=function(l,k){return new g.TileLayer.WMS(l,k)};g.ImageOverlay=g.Layer.extend({options:{opacity:1,alt:"",interactive:false,attribution:null,crossOrigin:false},initialize:function(l,m,k){this._url=l;this._bounds=g.latLngBounds(m);g.setOptions(this,k)},onAdd:function(){if(!this._image){this._initImage();if(this.options.opacity<1){this._updateOpacity()}}if(this.options.interactive){g.DomUtil.addClass(this._image,"leaflet-interactive");this.addInteractiveTarget(this._image)}this.getPane().appendChild(this._image);this._reset()},onRemove:function(){g.DomUtil.remove(this._image);if(this.options.interactive){this.removeInteractiveTarget(this._image)}},setOpacity:function(k){this.options.opacity=k;if(this._image){this._updateOpacity()}return this},setStyle:function(k){if(k.opacity){this.setOpacity(k.opacity)}return this},bringToFront:function(){if(this._map){g.DomUtil.toFront(this._image)}return this},bringToBack:function(){if(this._map){g.DomUtil.toBack(this._image)}return this},setUrl:function(k){this._url=k;if(this._image){this._image.src=k}return this},setBounds:function(k){this._bounds=k;if(this._map){this._reset()}return this},getAttribution:function(){return this.options.attribution},getEvents:function(){var k={zoom:this._reset,viewreset:this._reset};if(this._zoomAnimated){k.zoomanim=this._animateZoom}return k},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var k=this._image=g.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));k.onselectstart=g.Util.falseFn;k.onmousemove=g.Util.falseFn;k.onload=g.bind(this.fire,this,"load");if(this.options.crossOrigin){k.crossOrigin=""}k.src=this._url;k.alt=this.options.alt},_animateZoom:function(k){var m=this._map.getZoomScale(k.zoom),l=this._map._latLngToNewLayerPoint(this._bounds.getNorthWest(),k.zoom,k.center);g.DomUtil.setTransform(this._image,l,m)},_reset:function(){var m=this._image,l=new g.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),k=l.getSize();g.DomUtil.setPosition(m,l.min);m.style.width=k.x+"px";m.style.height=k.y+"px"},_updateOpacity:function(){g.DomUtil.setOpacity(this._image,this.options.opacity)}});g.imageOverlay=function(l,m,k){return new g.ImageOverlay(l,m,k)};g.Icon=g.Class.extend({initialize:function(k){g.setOptions(this,k)},createIcon:function(k){return this._createIcon("icon",k)},createShadow:function(k){return this._createIcon("shadow",k)},_createIcon:function(l,m){var n=this._getIconUrl(l);if(!n){if(l==="icon"){throw new Error("iconUrl not set in Icon options (see the docs).")}return null}var k=this._createImg(n,m&&m.tagName==="IMG"?m:null);this._setIconStyles(k,l);return k},_setIconStyles:function(l,o){var n=this.options;var k=n[o+"Size"];if(typeof k==="number"){k=[k,k]}var p=g.point(k),m=g.point(o==="shadow"&&n.shadowAnchor||n.iconAnchor||p&&p.divideBy(2,true));l.className="leaflet-marker-"+o+" "+(n.className||"");if(m){l.style.marginLeft=(-m.x)+"px";l.style.marginTop=(-m.y)+"px"}if(p){l.style.width=p.x+"px";l.style.height=p.y+"px"}},_createImg:function(l,k){k=k||f.createElement("img");k.src=l;return k},_getIconUrl:function(k){return g.Browser.retina&&this.options[k+"RetinaUrl"]||this.options[k+"Url"]}});g.icon=function(k){return new g.Icon(k)};g.Icon.Default=g.Icon.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(k){if(!g.Icon.Default.imagePath){g.Icon.Default.imagePath=this._detectIconPath()}return(this.options.imagePath||g.Icon.Default.imagePath)+g.Icon.prototype._getIconUrl.call(this,k)},_detectIconPath:function(){var k=g.DomUtil.create("div","leaflet-default-icon-path",f.body);var l=g.DomUtil.getStyle(k,"background-image")||g.DomUtil.getStyle(k,"backgroundImage");f.body.removeChild(k);return l.indexOf("url")===0?l.replace(/^url\([\"\']?/,"").replace(/[\"\']?\)$/,""):""}});g.Marker=g.Layer.extend({options:{icon:new g.Icon.Default(),interactive:true,draggable:false,keyboard:true,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:false,riseOffset:250,pane:"markerPane",nonBubblingEvents:["click","dblclick","mouseover","mouseout","contextmenu"]},initialize:function(l,k){g.setOptions(this,k);this._latlng=g.latLng(l)},onAdd:function(k){this._zoomAnimated=this._zoomAnimated&&k.options.markerZoomAnimation;if(this._zoomAnimated){k.on("zoomanim",this._animateZoom,this)}this._initIcon();this.update()},onRemove:function(k){if(this.dragging&&this.dragging.enabled()){this.options.draggable=true;this.dragging.removeHooks()}if(this._zoomAnimated){k.off("zoomanim",this._animateZoom,this)}this._removeIcon();this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(l){var k=this._latlng;this._latlng=g.latLng(l);this.update();return this.fire("move",{oldLatLng:k,latlng:this._latlng})},setZIndexOffset:function(k){this.options.zIndexOffset=k;return this.update()},setIcon:function(k){this.options.icon=k;if(this._map){this._initIcon();this.update()}if(this._popup){this.bindPopup(this._popup,this._popup.options)}return this},getElement:function(){return this._icon},update:function(){if(this._icon){var k=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(k)}return this},_initIcon:function(){var l=this.options,n="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");var m=l.icon.createIcon(this._icon),o=false;if(m!==this._icon){if(this._icon){this._removeIcon()}o=true;if(l.title){m.title=l.title}if(l.alt){m.alt=l.alt}}g.DomUtil.addClass(m,n);if(l.keyboard){m.tabIndex="0"}this._icon=m;if(l.riseOnHover){this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex})}var k=l.icon.createShadow(this._shadow),p=false;if(k!==this._shadow){this._removeShadow();p=true}if(k){g.DomUtil.addClass(k,n)}this._shadow=k;if(l.opacity<1){this._updateOpacity()}if(o){this.getPane().appendChild(this._icon)}this._initInteraction();if(k&&p){this.getPane("shadowPane").appendChild(this._shadow)}},_removeIcon:function(){if(this.options.riseOnHover){this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex})}g.DomUtil.remove(this._icon);this.removeInteractiveTarget(this._icon);this._icon=null},_removeShadow:function(){if(this._shadow){g.DomUtil.remove(this._shadow)}this._shadow=null},_setPos:function(k){g.DomUtil.setPosition(this._icon,k);if(this._shadow){g.DomUtil.setPosition(this._shadow,k)}this._zIndex=k.y+this.options.zIndexOffset;this._resetZIndex()},_updateZIndex:function(k){this._icon.style.zIndex=this._zIndex+k},_animateZoom:function(k){var l=this._map._latLngToNewLayerPoint(this._latlng,k.zoom,k.center).round();this._setPos(l)},_initInteraction:function(){if(!this.options.interactive){return}g.DomUtil.addClass(this._icon,"leaflet-interactive");this.addInteractiveTarget(this._icon);if(g.Handler.MarkerDrag){var k=this.options.draggable;if(this.dragging){k=this.dragging.enabled();this.dragging.disable()}this.dragging=new g.Handler.MarkerDrag(this);if(k){this.dragging.enable()}}},setOpacity:function(k){this.options.opacity=k;if(this._map){this._updateOpacity()}return this},_updateOpacity:function(){var k=this.options.opacity;g.DomUtil.setOpacity(this._icon,k);if(this._shadow){g.DomUtil.setOpacity(this._shadow,k)}},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}});g.marker=function(l,k){return new g.Marker(l,k)};g.DivIcon=g.Icon.extend({options:{iconSize:[12,12],html:false,bgPos:null,className:"leaflet-div-icon"},createIcon:function(l){var n=(l&&l.tagName==="DIV")?l:f.createElement("div"),k=this.options;n.innerHTML=k.html!==false?k.html:"";if(k.bgPos){var m=g.point(k.bgPos);n.style.backgroundPosition=(-m.x)+"px "+(-m.y)+"px"}this._setIconStyles(n,"icon");return n},createShadow:function(){return null}});g.divIcon=function(k){return new g.DivIcon(k)};g.DivOverlay=g.Layer.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(k,l){g.setOptions(this,k);this._source=l},onAdd:function(k){this._zoomAnimated=k._zoomAnimated;if(!this._container){this._initLayout()}if(k._fadeAnimated){g.DomUtil.setOpacity(this._container,0)}clearTimeout(this._removeTimeout);this.getPane().appendChild(this._container);this.update();if(k._fadeAnimated){g.DomUtil.setOpacity(this._container,1)}this.bringToFront()},onRemove:function(k){if(k._fadeAnimated){g.DomUtil.setOpacity(this._container,0);this._removeTimeout=setTimeout(g.bind(g.DomUtil.remove,g.DomUtil,this._container),200)}else{g.DomUtil.remove(this._container)}},getLatLng:function(){return this._latlng},setLatLng:function(k){this._latlng=g.latLng(k);if(this._map){this._updatePosition();this._adjustPan()}return this},getContent:function(){return this._content},setContent:function(k){this._content=k;this.update();return this},getElement:function(){return this._container},update:function(){if(!this._map){return}this._container.style.visibility="hidden";this._updateContent();this._updateLayout();this._updatePosition();this._container.style.visibility="";this._adjustPan()},getEvents:function(){var k={zoom:this._updatePosition,viewreset:this._updatePosition};if(this._zoomAnimated){k.zoomanim=this._animateZoom}return k},isOpen:function(){return !!this._map&&this._map.hasLayer(this)},bringToFront:function(){if(this._map){g.DomUtil.toFront(this._container)}return this},bringToBack:function(){if(this._map){g.DomUtil.toBack(this._container)}return this},_updateContent:function(){if(!this._content){return}var l=this._contentNode;var k=(typeof this._content==="function")?this._content(this._source||this):this._content;if(typeof k==="string"){l.innerHTML=k}else{while(l.hasChildNodes()){l.removeChild(l.firstChild)}l.appendChild(k)}this.fire("contentupdate")},_updatePosition:function(){if(!this._map){return}var o=this._map.latLngToLayerPoint(this._latlng),n=g.point(this.options.offset),l=this._getAnchor();if(this._zoomAnimated){g.DomUtil.setPosition(this._container,o.add(l))}else{n=n.add(o).add(l)}var k=this._containerBottom=-n.y,m=this._containerLeft=-Math.round(this._containerWidth/2)+n.x;this._container.style.bottom=k+"px";this._container.style.left=m+"px"},_getAnchor:function(){return[0,0]}});g.Popup=g.DivOverlay.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:true,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:false,closeButton:true,autoClose:true,className:""},openOn:function(k){k.openPopup(this);return this},onAdd:function(k){g.DivOverlay.prototype.onAdd.call(this,k);k.fire("popupopen",{popup:this});if(this._source){this._source.fire("popupopen",{popup:this},true);if(!(this._source instanceof g.Path)){this._source.on("preclick",g.DomEvent.stopPropagation)}}},onRemove:function(k){g.DivOverlay.prototype.onRemove.call(this,k);k.fire("popupclose",{popup:this});if(this._source){this._source.fire("popupclose",{popup:this},true);if(!(this._source instanceof g.Path)){this._source.off("preclick",g.DomEvent.stopPropagation)}}},getEvents:function(){var k=g.DivOverlay.prototype.getEvents.call(this);if("closeOnClick" in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick){k.preclick=this._close}if(this.options.keepInView){k.moveend=this._adjustPan}return k},_close:function(){if(this._map){this._map.closePopup(this)}},_initLayout:function(){var m="leaflet-popup",k=this._container=g.DomUtil.create("div",m+" "+(this.options.className||"")+" leaflet-zoom-animated");if(this.options.closeButton){var l=this._closeButton=g.DomUtil.create("a",m+"-close-button",k);l.href="#close";l.innerHTML="&#215;";g.DomEvent.on(l,"click",this._onCloseButtonClick,this)}var n=this._wrapper=g.DomUtil.create("div",m+"-content-wrapper",k);this._contentNode=g.DomUtil.create("div",m+"-content",n);g.DomEvent.disableClickPropagation(n).disableScrollPropagation(this._contentNode).on(n,"contextmenu",g.DomEvent.stopPropagation);this._tipContainer=g.DomUtil.create("div",m+"-tip-container",k);this._tip=g.DomUtil.create("div",m+"-tip",this._tipContainer)},_updateLayout:function(){var l=this._contentNode,n=l.style;n.width="";n.whiteSpace="nowrap";var m=l.offsetWidth;m=Math.min(m,this.options.maxWidth);m=Math.max(m,this.options.minWidth);n.width=(m+1)+"px";n.whiteSpace="";n.height="";var k=l.offsetHeight,o=this.options.maxHeight,p="leaflet-popup-scrolled";if(o&&k>o){n.height=o+"px";g.DomUtil.addClass(l,p)}else{g.DomUtil.removeClass(l,p)}this._containerWidth=this._container.offsetWidth},_animateZoom:function(l){var m=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center),k=this._getAnchor();g.DomUtil.setPosition(this._container,m.add(k))},_adjustPan:function(){if(!this.options.autoPan||(this._map._panAnim&&this._map._panAnim._inProgress)){return}var l=this._map,o=parseInt(g.DomUtil.getStyle(this._container,"marginBottom"),10)||0,v=this._container.offsetHeight+o,r=this._containerWidth,p=new g.Point(this._containerLeft,-v-this._containerBottom);p._add(g.DomUtil.getPosition(this._container));var n=l.layerPointToContainerPoint(p),q=g.point(this.options.autoPanPadding),m=g.point(this.options.autoPanPaddingTopLeft||q),k=g.point(this.options.autoPanPaddingBottomRight||q),u=l.getSize(),t=0,s=0;if(n.x+r+k.x>u.x){t=n.x+r-u.x+k.x}if(n.x-t-m.x<0){t=n.x-m.x}if(n.y+v+k.y>u.y){s=n.y+v-u.y+k.y}if(n.y-s-m.y<0){s=n.y-m.y}if(t||s){l.fire("autopanstart").panBy([t,s])}},_onCloseButtonClick:function(k){this._close();g.DomEvent.stop(k)},_getAnchor:function(){return g.point(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});g.popup=function(k,l){return new g.Popup(k,l)};g.Map.mergeOptions({closePopupOnClick:true});g.Map.include({openPopup:function(k,m,l){if(!(k instanceof g.Popup)){k=new g.Popup(l).setContent(k)}if(m){k.setLatLng(m)}if(this.hasLayer(k)){return this}if(this._popup&&this._popup.options.autoClose){this.closePopup()}this._popup=k;return this.addLayer(k)},closePopup:function(k){if(!k||k===this._popup){k=this._popup;this._popup=null}if(k){this.removeLayer(k)}return this}});g.Layer.include({bindPopup:function(l,k){if(l instanceof g.Popup){g.setOptions(l,k);this._popup=l;l._source=this}else{if(!this._popup||k){this._popup=new g.Popup(k,this)}this._popup.setContent(l)}if(!this._popupHandlersAdded){this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup});this._popupHandlersAdded=true}return this},unbindPopup:function(){if(this._popup){this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup});this._popupHandlersAdded=false;this._popup=null}return this},openPopup:function(k,m){if(!(k instanceof g.Layer)){m=k;k=this}if(k instanceof g.FeatureGroup){for(var l in this._layers){k=this._layers[l];break}}if(!m){m=k.getCenter?k.getCenter():k.getLatLng()}if(this._popup&&this._map){this._popup._source=k;this._popup.update();this._map.openPopup(this._popup,m)}return this},closePopup:function(){if(this._popup){this._popup._close()}return this},togglePopup:function(k){if(this._popup){if(this._popup._map){this.closePopup()}else{this.openPopup(k)}}return this},isPopupOpen:function(){return this._popup.isOpen()},setPopupContent:function(k){if(this._popup){this._popup.setContent(k)}return this},getPopup:function(){return this._popup},_openPopup:function(l){var k=l.layer||l.target;if(!this._popup){return}if(!this._map){return}g.DomEvent.stop(l);if(k instanceof g.Path){this.openPopup(l.layer||l.target,l.latlng);return}if(this._map.hasLayer(this._popup)&&this._popup._source===k){this.closePopup()}else{this.openPopup(k,l.latlng)}},_movePopup:function(k){this._popup.setLatLng(k.latlng)}});g.Marker.include({_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]}});g.Tooltip=g.DivOverlay.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:false,sticky:false,interactive:false,opacity:0.9},onAdd:function(k){g.DivOverlay.prototype.onAdd.call(this,k);this.setOpacity(this.options.opacity);k.fire("tooltipopen",{tooltip:this});if(this._source){this._source.fire("tooltipopen",{tooltip:this},true)}},onRemove:function(k){g.DivOverlay.prototype.onRemove.call(this,k);k.fire("tooltipclose",{tooltip:this});if(this._source){this._source.fire("tooltipclose",{tooltip:this},true)}},getEvents:function(){var k=g.DivOverlay.prototype.getEvents.call(this);if(g.Browser.touch&&!this.options.permanent){k.preclick=this._close}return k},_close:function(){if(this._map){this._map.closeTooltip(this)}},_initLayout:function(){var l="leaflet-tooltip",k=l+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=g.DomUtil.create("div",k)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var k=this._map,l=this._container,q=k.latLngToContainerPoint(k.getCenter()),m=k.layerPointToContainerPoint(r),s=this.options.direction,p=l.offsetWidth,t=l.offsetHeight,n=g.point(this.options.offset),o=this._getAnchor();if(s==="top"){r=r.add(g.point(-p/2+n.x,-t+n.y+o.y))}else{if(s==="bottom"){r=r.subtract(g.point(p/2-n.x,-n.y))}else{if(s==="center"){r=r.subtract(g.point(p/2+n.x,t/2-o.y+n.y))}else{if(s==="right"||s==="auto"&&m.x<q.x){s="right";r=r.add([n.x+o.x,o.y-t/2+n.y])}else{s="left";r=r.subtract(g.point(p+o.x-n.x,t/2-o.y-n.y))}}}}g.DomUtil.removeClass(l,"leaflet-tooltip-right");g.DomUtil.removeClass(l,"leaflet-tooltip-left");g.DomUtil.removeClass(l,"leaflet-tooltip-top");g.DomUtil.removeClass(l,"leaflet-tooltip-bottom");g.DomUtil.addClass(l,"leaflet-tooltip-"+s);g.DomUtil.setPosition(l,r)},_updatePosition:function(){var k=this._map.latLngToLayerPoint(this._latlng);this._setPosition(k)},setOpacity:function(k){this.options.opacity=k;if(this._container){g.DomUtil.setOpacity(this._container,k)}},_animateZoom:function(k){var l=this._map._latLngToNewLayerPoint(this._latlng,k.zoom,k.center);this._setPosition(l)},_getAnchor:function(){return g.point(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});g.tooltip=function(k,l){return new g.Tooltip(k,l)};g.Map.include({openTooltip:function(l,m,k){if(!(l instanceof g.Tooltip)){l=new g.Tooltip(k).setContent(l)}if(m){l.setLatLng(m)}if(this.hasLayer(l)){return this}return this.addLayer(l)},closeTooltip:function(k){if(k){this.removeLayer(k)}return this}});g.Layer.include({bindTooltip:function(l,k){if(l instanceof g.Tooltip){g.setOptions(l,k);this._tooltip=l;l._source=this}else{if(!this._tooltip||k){this._tooltip=g.tooltip(k,this)}this._tooltip.setContent(l)}this._initTooltipInteractions();if(this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)){this.openTooltip()}return this},unbindTooltip:function(){if(this._tooltip){this._initTooltipInteractions(true);this.closeTooltip();this._tooltip=null}return this},_initTooltipInteractions:function(l){if(!l&&this._tooltipHandlersAdded){return}var k=l?"off":"on",m={remove:this.closeTooltip,move:this._moveTooltip};if(!this._tooltip.options.permanent){m.mouseover=this._openTooltip;m.mouseout=this.closeTooltip;if(this._tooltip.options.sticky){m.mousemove=this._moveTooltip}if(g.Browser.touch){m.click=this._openTooltip}}else{m.add=this._openTooltip}this[k](m);this._tooltipHandlersAdded=!l},openTooltip:function(k,m){if(!(k instanceof g.Layer)){m=k;k=this}if(k instanceof g.FeatureGroup){for(var l in this._layers){k=this._layers[l];break}}if(!m){m=k.getCenter?k.getCenter():k.getLatLng()}if(this._tooltip&&this._map){this._tooltip._source=k;this._tooltip.update();this._map.openTooltip(this._tooltip,m);if(this._tooltip.options.interactive&&this._tooltip._container){g.DomUtil.addClass(this._tooltip._container,"leaflet-clickable");this.addInteractiveTarget(this._tooltip._container)}}return this},closeTooltip:function(){if(this._tooltip){this._tooltip._close();if(this._tooltip.options.interactive&&this._tooltip._container){g.DomUtil.removeClass(this._tooltip._container,"leaflet-clickable");this.removeInteractiveTarget(this._tooltip._container)}}return this},toggleTooltip:function(k){if(this._tooltip){if(this._tooltip._map){this.closeTooltip()}else{this.openTooltip(k)}}return this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(k){if(this._tooltip){this._tooltip.setContent(k)}return this},getTooltip:function(){return this._tooltip},_openTooltip:function(l){var k=l.layer||l.target;if(!this._tooltip||!this._map){return}this.openTooltip(k,this._tooltip.options.sticky?l.latlng:b)},_moveTooltip:function(m){var n=m.latlng,l,k;if(this._tooltip.options.sticky&&m.originalEvent){l=this._map.mouseEventToContainerPoint(m.originalEvent);k=this._map.containerPointToLayerPoint(l);n=this._map.layerPointToLatLng(k)}this._tooltip.setLatLng(n)}});g.Marker.include({_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}});g.LayerGroup=g.Layer.extend({initialize:function(m){this._layers={};var l,k;if(m){for(l=0,k=m.length;l<k;l++){this.addLayer(m[l])}}},addLayer:function(k){var l=this.getLayerId(k);this._layers[l]=k;if(this._map){this._map.addLayer(k)}return this},removeLayer:function(k){var l=k in this._layers?k:this.getLayerId(k);if(this._map&&this._layers[l]){this._map.removeLayer(this._layers[l])}delete this._layers[l];return this},hasLayer:function(k){return !!k&&(k in this._layers||this.getLayerId(k) in this._layers)},clearLayers:function(){for(var k in this._layers){this.removeLayer(this._layers[k])}return this},invoke:function(k){var l=Array.prototype.slice.call(arguments,1),n,m;for(n in this._layers){m=this._layers[n];if(m[k]){m[k].apply(m,l)}}return this},onAdd:function(l){for(var k in this._layers){l.addLayer(this._layers[k])}},onRemove:function(l){for(var k in this._layers){l.removeLayer(this._layers[k])}},eachLayer:function(m,l){for(var k in this._layers){m.call(l,this._layers[k])}return this},getLayer:function(k){return this._layers[k]},getLayers:function(){var l=[];for(var k in this._layers){l.push(this._layers[k])}return l},setZIndex:function(k){return this.invoke("setZIndex",k)},getLayerId:function(k){return g.stamp(k)}});g.layerGroup=function(k){return new g.LayerGroup(k)};g.FeatureGroup=g.LayerGroup.extend({addLayer:function(k){if(this.hasLayer(k)){return this}k.addEventParent(this);g.LayerGroup.prototype.addLayer.call(this,k);return this.fire("layeradd",{layer:k})},removeLayer:function(k){if(!this.hasLayer(k)){return this}if(k in this._layers){k=this._layers[k]}k.removeEventParent(this);g.LayerGroup.prototype.removeLayer.call(this,k);return this.fire("layerremove",{layer:k})},setStyle:function(k){return this.invoke("setStyle",k)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var l=new g.LatLngBounds();for(var m in this._layers){var k=this._layers[m];l.extend(k.getBounds?k.getBounds():k.getLatLng())}return l}});g.featureGroup=function(k){return new g.FeatureGroup(k)};g.Renderer=g.Layer.extend({options:{padding:0.1},initialize:function(k){g.setOptions(this,k);g.stamp(this)},onAdd:function(){if(!this._container){this._initContainer();if(this._zoomAnimated){g.DomUtil.addClass(this._container,"leaflet-zoom-animated")}}this.getPane().appendChild(this._container);this._update()},onRemove:function(){g.DomUtil.remove(this._container)},getEvents:function(){var k={viewreset:this._reset,zoom:this._onZoom,moveend:this._update};if(this._zoomAnimated){k.zoomanim=this._onAnimZoom}return k},_onAnimZoom:function(k){this._updateTransform(k.center,k.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(k,s){var n=this._map.getZoomScale(s,this._zoom),p=g.DomUtil.getPosition(this._container),q=this._map.getSize().multiplyBy(0.5+this.options.padding),l=this._map.project(this._center,s),o=this._map.project(k,s),r=o.subtract(l),m=q.multiplyBy(-n).add(p).add(q).subtract(r);if(g.Browser.any3d){g.DomUtil.setTransform(this._container,m,n)}else{g.DomUtil.setPosition(this._container,m)}},_reset:function(){this._update();this._updateTransform(this._center,this._zoom)},_update:function(){var m=this.options.padding,l=this._map.getSize(),k=this._map.containerPointToLayerPoint(l.multiplyBy(-m)).round();this._bounds=new g.Bounds(k,k.add(l.multiplyBy(1+m*2)).round());this._center=this._map.getCenter();this._zoom=this._map.getZoom()}});g.Map.include({getRenderer:function(k){var l=k.options.renderer||this._getPaneRenderer(k.options.pane)||this.options.renderer||this._renderer;if(!l){l=this._renderer=(this.options.preferCanvas&&g.canvas())||g.svg()}if(!this.hasLayer(l)){this.addLayer(l)}return l},_getPaneRenderer:function(k){if(k==="overlayPane"||k===b){return false}var l=this._paneRenderers[k];if(l===b){l=(g.SVG&&g.svg({pane:k}))||(g.Canvas&&g.canvas({pane:k}));this._paneRenderers[k]=l}return l}});g.Path=g.Layer.extend({options:{stroke:true,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:false,fillColor:null,fillOpacity:0.2,fillRule:"evenodd",interactive:true},beforeAdd:function(k){this._renderer=k.getRenderer(this)},onAdd:function(){this._renderer._initPath(this);this._reset();this._renderer._addPath(this);this._renderer.on("update",this._update,this)},onRemove:function(){this._renderer._removePath(this);this._renderer.off("update",this._update,this)},getEvents:function(){return{zoomend:this._project,viewreset:this._reset}},redraw:function(){if(this._map){this._renderer._updatePath(this)}return this},setStyle:function(k){g.setOptions(this,k);if(this._renderer){this._renderer._updateStyle(this)}return this},bringToFront:function(){if(this._renderer){this._renderer._bringToFront(this)}return this},bringToBack:function(){if(this._renderer){this._renderer._bringToBack(this)}return this},getElement:function(){return this._path},_reset:function(){this._project();this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(g.Browser.touch?10:0)}});g.LineUtil={simplify:function(m,k){if(!k||!m.length){return m.slice()}var l=k*k;m=this._reducePoints(m,l);m=this._simplifyDP(m,l);return m},pointToSegmentDistance:function(l,m,k){return Math.sqrt(this._sqClosestPointOnSegment(l,m,k,true))},closestPointOnSegment:function(l,m,k){return this._sqClosestPointOnSegment(l,m,k)},_simplifyDP:function(o,l){var k=o.length,n=typeof Uint8Array!==b+""?Uint8Array:Array,q=new n(k);q[0]=q[k-1]=1;this._simplifyDPStep(o,q,l,0,k-1);var m,p=[];for(m=0;m<k;m++){if(q[m]){p.push(o[m])}}return p},_simplifyDPStep:function(s,l,k,p,r){var m=0,q,n,o;for(n=p+1;n<=r-1;n++){o=this._sqClosestPointOnSegment(s[n],s[p],s[r],true);if(o>m){q=n;m=o}}if(m>k){l[q]=1;this._simplifyDPStep(s,l,k,p,q);this._simplifyDPStep(s,l,k,q,r)}},_reducePoints:function(n,l){var p=[n[0]];for(var m=1,o=0,k=n.length;m<k;m++){if(this._sqDist(n[m],n[o])>l){p.push(n[m]);o=m}}if(o<k-1){p.push(n[k-1])}return p},clipSegment:function(s,r,k,t,u){var o=t?this._lastCode:this._getBitCode(s,k),m=this._getBitCode(r,k),n,l,q;this._lastCode=m;while(true){if(!(o|m)){return[s,r]}if(o&m){return false}n=o||m;l=this._getEdgeIntersection(s,r,n,k,u);q=this._getBitCode(l,k);if(n===o){s=l;o=q}else{r=l;m=q}}},_getEdgeIntersection:function(r,p,l,k,s){var u=p.x-r.x,t=p.y-r.y,m=k.min,o=k.max,q,n;if(l&8){q=r.x+u*(o.y-r.y)/t;n=o.y}else{if(l&4){q=r.x+u*(m.y-r.y)/t;n=m.y}else{if(l&2){q=o.x;n=r.y+t*(o.x-r.x)/u}else{if(l&1){q=m.x;n=r.y+t*(m.x-r.x)/u}}}}return new g.Point(q,n,s)},_getBitCode:function(m,l){var k=0;if(m.x<l.min.x){k|=1}else{if(m.x>l.max.x){k|=2}}if(m.y<l.min.y){k|=4}else{if(m.y>l.max.y){k|=8}}return k},_sqDist:function(n,m){var l=m.x-n.x,k=m.y-n.y;return l*l+k*k},_sqClosestPointOnSegment:function(l,r,q,m){var o=r.x,n=r.y,v=q.x-o,u=q.y-n,k=v*v+u*u,s;if(k>0){s=((l.x-o)*v+(l.y-n)*u)/k;if(s>1){o=q.x;n=q.y}else{if(s>0){o+=v*s;n+=u*s}}}v=l.x-o;u=l.y-n;return m?v*v+u*u:new g.Point(o,n)}};g.Polyline=g.Path.extend({options:{smoothFactor:1,noClip:false},initialize:function(k,l){g.setOptions(this,l);this._setLatLngs(k)},getLatLngs:function(){return this._latlngs},setLatLngs:function(k){this._setLatLngs(k);return this.redraw()},isEmpty:function(){return !this._latlngs.length},closestLayerPoint:function(k){var t=Infinity,r=null,l=g.LineUtil._sqClosestPointOnSegment,v,u;for(var m=0,w=this._parts.length;m<w;m++){var s=this._parts[m];for(var n=1,q=s.length;n<q;n++){v=s[n-1];u=s[n];var o=l(k,v,u,true);if(o<t){t=o;r=l(k,v,u)}}}if(r){r.distance=Math.sqrt(t)}return r},getCenter:function(){if(!this._map){throw new Error("Must add layer to map before using getCenter()")}var m,k,l,p,s,q,o,r=this._rings[0],n=r.length;if(!n){return null}for(m=0,k=0;m<n-1;m++){k+=r[m].distanceTo(r[m+1])/2}if(k===0){return this._map.layerPointToLatLng(r[0])}for(m=0,p=0;m<n-1;m++){s=r[m];q=r[m+1];l=s.distanceTo(q);p+=l;if(p>k){o=(p-k)/l;return this._map.layerPointToLatLng([q.x-o*(q.x-s.x),q.y-o*(q.y-s.y)])}}},getBounds:function(){return this._bounds},addLatLng:function(l,k){k=k||this._defaultShape();l=g.latLng(l);k.push(l);this._bounds.extend(l);return this.redraw()},_setLatLngs:function(k){this._bounds=new g.LatLngBounds();this._latlngs=this._convertLatLngs(k)},_defaultShape:function(){return g.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(m){var l=[],o=g.Polyline._flat(m);for(var n=0,k=m.length;n<k;n++){if(o){l[n]=g.latLng(m[n]);this._bounds.extend(l[n])}else{l[n]=this._convertLatLngs(m[n])}}return l},_project:function(){var l=new g.Bounds();this._rings=[];this._projectLatlngs(this._latlngs,this._rings,l);var k=this._clickTolerance(),m=new g.Point(k,k);if(this._bounds.isValid()&&l.isValid()){l.min._subtract(m);l.max._add(m);this._pxBounds=l}},_projectLatlngs:function(m,l,p){var q=m[0] instanceof g.LatLng,k=m.length,o,n;if(q){n=[];for(o=0;o<k;o++){n[o]=this._map.latLngToLayerPoint(m[o]);p.extend(n[o])}l.push(n)}else{for(o=0;o<k;o++){this._projectLatlngs(m[o],l,p)}}},_clipPoints:function(){var l=this._renderer._bounds;this._parts=[];if(!this._pxBounds||!this._pxBounds.intersects(l)){return}if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,q,p,m,s,n,r,t;for(q=0,m=0,s=this._rings.length;q<s;q++){t=this._rings[q];for(p=0,n=t.length;p<n-1;p++){r=g.LineUtil.clipSegment(t[p],t[p+1],l,p,true);if(!r){continue}o[m]=o[m]||[];o[m].push(r[0]);if((r[1]!==t[p+1])||(p===n-2)){o[m].push(r[1]);m++}}}},_simplifyPoints:function(){var n=this._parts,l=this.options.smoothFactor;for(var m=0,k=n.length;m<k;m++){n[m]=g.LineUtil.simplify(n[m],l)}},_update:function(){if(!this._map){return}this._clipPoints();this._simplifyPoints();this._updatePath()},_updatePath:function(){this._renderer._updatePoly(this)}});g.polyline=function(k,l){return new g.Polyline(k,l)};g.Polyline._flat=function(k){return !g.Util.isArray(k[0])||(typeof k[0][0]!=="object"&&typeof k[0][0]!=="undefined")};g.PolyUtil={};g.PolyUtil.clipPolygon=function(y,l,z){var v,s=[1,4,2,8],t,r,q,x,w,u,n,m,o=g.LineUtil;for(t=0,u=y.length;t<u;t++){y[t]._code=o._getBitCode(y[t],l)}for(q=0;q<4;q++){n=s[q];v=[];for(t=0,u=y.length,r=u-1;t<u;r=t++){x=y[t];w=y[r];if(!(x._code&n)){if(w._code&n){m=o._getEdgeIntersection(w,x,n,l,z);m._code=o._getBitCode(m,l);v.push(m)}v.push(x)}else{if(!(w._code&n)){m=o._getEdgeIntersection(w,x,n,l,z);m._code=o._getBitCode(m,l);v.push(m)}}}y=v}return y};g.Polygon=g.Polyline.extend({options:{fill:true},isEmpty:function(){return !this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map){throw new Error("Must add layer to map before using getCenter()")}var n,m,u,t,p,l,r,q,k,s=this._rings[0],o=s.length;if(!o){return null}l=r=q=0;for(n=0,m=o-1;n<o;m=n++){u=s[n];t=s[m];p=u.y*t.x-t.y*u.x;r+=(u.x+t.x)*p;q+=(u.y+t.y)*p;l+=p*3}if(l===0){k=s[0]}else{k=[r/l,q/l]}return this._map.layerPointToLatLng(k)},_convertLatLngs:function(m){var l=g.Polyline.prototype._convertLatLngs.call(this,m),k=l.length;if(k>=2&&l[0] instanceof g.LatLng&&l[0].equals(l[k-1])){l.pop()}return l},_setLatLngs:function(k){g.Polyline.prototype._setLatLngs.call(this,k);if(g.Polyline._flat(this._latlngs)){this._latlngs=[this._latlngs]}},_defaultShape:function(){return g.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,m=this.options.weight,q=new g.Point(m,m);o=new g.Bounds(o.min.subtract(q),o.max.add(q));this._parts=[];if(!this._pxBounds||!this._pxBounds.intersects(o)){return}if(this.options.noClip){this._parts=this._rings;return}for(var n=0,l=this._rings.length,k;n<l;n++){k=g.PolyUtil.clipPolygon(this._rings[n],o,true);if(k.length){this._parts.push(k)}}},_updatePath:function(){this._renderer._updatePoly(this,true)}});g.polygon=function(k,l){return new g.Polygon(k,l)};g.Rectangle=g.Polygon.extend({initialize:function(l,k){g.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(l),k)},setBounds:function(k){return this.setLatLngs(this._boundsToLatLngs(k))},_boundsToLatLngs:function(k){k=g.latLngBounds(k);return[k.getSouthWest(),k.getNorthWest(),k.getNorthEast(),k.getSouthEast()]}});g.rectangle=function(l,k){return new g.Rectangle(l,k)};g.CircleMarker=g.Path.extend({options:{fill:true,radius:10},initialize:function(l,k){g.setOptions(this,k);this._latlng=g.latLng(l);this._radius=this.options.radius},setLatLng:function(k){this._latlng=g.latLng(k);this.redraw();return this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(k){this.options.radius=this._radius=k;return this.redraw()},getRadius:function(){return this._radius},setStyle:function(l){var k=l&&l.radius||this._radius;g.Path.prototype.setStyle.call(this,l);this.setRadius(k);return this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng);this._updateBounds()},_updateBounds:function(){var m=this._radius,l=this._radiusY||m,k=this._clickTolerance(),n=[m+k,l+k];this._pxBounds=new g.Bounds(this._point.subtract(n),this._point.add(n))},_update:function(){if(this._map){this._updatePath()}},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}});g.circleMarker=function(l,k){return new g.CircleMarker(l,k)};g.Circle=g.CircleMarker.extend({initialize:function(m,l,k){if(typeof l==="number"){l=g.extend({},k,{radius:l})}g.setOptions(this,l);this._latlng=g.latLng(m);if(isNaN(this.options.radius)){throw new Error("Circle radius cannot be NaN")}this._mRadius=this.options.radius},setRadius:function(k){this._mRadius=k;return this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var k=[this._radius,this._radiusY||this._radius];return new g.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(k)),this._map.layerPointToLatLng(this._point.add(k)))},setStyle:g.Path.prototype.setStyle,_project:function(){var t=this._latlng.lng,r=this._latlng.lat,l=this._map,v=l.options.crs;if(v.distance===g.CRS.Earth.distance){var q=Math.PI/180,w=(this._mRadius/g.CRS.Earth.R)/q,s=l.project([r+w,t]),k=l.project([r-w,t]),m=s.add(k).divideBy(2),o=l.unproject(m).lat,n=Math.acos((Math.cos(w*q)-Math.sin(r*q)*Math.sin(o*q))/(Math.cos(r*q)*Math.cos(o*q)))/q;if(isNaN(n)||n===0){n=w/Math.cos(Math.PI/180*r)}this._point=m.subtract(l.getPixelOrigin());this._radius=isNaN(n)?0:Math.max(Math.round(m.x-l.project([o,t-n]).x),1);this._radiusY=Math.max(Math.round(m.y-s.y),1)}else{var u=v.unproject(v.project(this._latlng).subtract([this._mRadius,0]));this._point=l.latLngToLayerPoint(this._latlng);this._radius=this._point.x-l.latLngToLayerPoint(u).x}this._updateBounds()}});g.circle=function(m,l,k){return new g.Circle(m,l,k)};g.SVG=g.Renderer.extend({getEvents:function(){var k=g.Renderer.prototype.getEvents.call(this);k.zoomstart=this._onZoomStart;return k},_initContainer:function(){this._container=g.SVG.create("svg");this._container.setAttribute("pointer-events","none");this._rootGroup=g.SVG.create("g");this._container.appendChild(this._rootGroup)},_onZoomStart:function(){this._update()},_update:function(){if(this._map._animatingZoom&&this._bounds){return}g.Renderer.prototype._update.call(this);var k=this._bounds,m=k.getSize(),l=this._container;if(!this._svgSize||!this._svgSize.equals(m)){this._svgSize=m;l.setAttribute("width",m.x);l.setAttribute("height",m.y)}g.DomUtil.setPosition(l,k.min);l.setAttribute("viewBox",[k.min.x,k.min.y,m.x,m.y].join(" "));this.fire("update")},_initPath:function(k){var l=k._path=g.SVG.create("path");if(k.options.className){g.DomUtil.addClass(l,k.options.className)}if(k.options.interactive){g.DomUtil.addClass(l,"leaflet-interactive")}this._updateStyle(k)},_addPath:function(k){this._rootGroup.appendChild(k._path);k.addInteractiveTarget(k._path)},_removePath:function(k){g.DomUtil.remove(k._path);k.removeInteractiveTarget(k._path)},_updatePath:function(k){k._project();k._update()},_updateStyle:function(l){var m=l._path,k=l.options;if(!m){return}if(k.stroke){m.setAttribute("stroke",k.color);m.setAttribute("stroke-opacity",k.opacity);m.setAttribute("stroke-width",k.weight);m.setAttribute("stroke-linecap",k.lineCap);m.setAttribute("stroke-linejoin",k.lineJoin);if(k.dashArray){m.setAttribute("stroke-dasharray",k.dashArray)}else{m.removeAttribute("stroke-dasharray")}if(k.dashOffset){m.setAttribute("stroke-dashoffset",k.dashOffset)}else{m.removeAttribute("stroke-dashoffset")}}else{m.setAttribute("stroke","none")}if(k.fill){m.setAttribute("fill",k.fillColor||k.color);m.setAttribute("fill-opacity",k.fillOpacity);m.setAttribute("fill-rule",k.fillRule||"evenodd")}else{m.setAttribute("fill","none")}},_updatePoly:function(l,k){this._setPath(l,g.SVG.pointsToPath(l._parts,k))},_updateCircle:function(m){var o=m._point,n=m._radius,k=m._radiusY||n,l="a"+n+","+k+" 0 1,0 ";var q=m._empty()?"M0 0":"M"+(o.x-n)+","+o.y+l+(n*2)+",0 "+l+(-n*2)+",0 ";this._setPath(m,q)},_setPath:function(k,l){k._path.setAttribute("d",l)},_bringToFront:function(k){g.DomUtil.toFront(k._path)},_bringToBack:function(k){g.DomUtil.toBack(k._path)}});g.extend(g.SVG,{create:function(k){return f.createElementNS("http://www.w3.org/2000/svg",k)},pointsToPath:function(s,o){var r="",n,m,q,l,t,k;for(n=0,q=s.length;n<q;n++){t=s[n];for(m=0,l=t.length;m<l;m++){k=t[m];r+=(m?"L":"M")+k.x+" "+k.y}r+=o?(g.Browser.svg?"z":"x"):""}return r||"M0 0"}});g.Browser.svg=!!(f.createElementNS&&g.SVG.create("svg").createSVGRect);g.svg=function(k){return g.Browser.svg||g.Browser.vml?new g.SVG(k):null};g.Browser.vml=!g.Browser.svg&&(function(){try{var m=f.createElement("div");m.innerHTML='<v:shape adj="1"/>';var k=m.firstChild;k.style.behavior="url(#default#VML)";return k&&(typeof k.adj==="object")}catch(l){return false}}());g.SVG.include(!g.Browser.vml?{}:{_initContainer:function(){this._container=g.DomUtil.create("div","leaflet-vml-container")},_update:function(){if(this._map._animatingZoom){return}g.Renderer.prototype._update.call(this)},_initPath:function(l){var k=l._container=g.SVG.create("shape");g.DomUtil.addClass(k,"leaflet-vml-shape "+(this.options.className||""));k.coordsize="1 1";l._path=g.SVG.create("path");k.appendChild(l._path);this._updateStyle(l)},_addPath:function(l){var k=l._container;this._container.appendChild(k);if(l.options.interactive){l.addInteractiveTarget(k)}},_removePath:function(l){var k=l._container;g.DomUtil.remove(k);l.removeInteractiveTarget(k)},_updateStyle:function(m){var o=m._stroke,n=m._fill,l=m.options,k=m._container;k.stroked=!!l.stroke;k.filled=!!l.fill;if(l.stroke){if(!o){o=m._stroke=g.SVG.create("stroke")}k.appendChild(o);o.weight=l.weight+"px";o.color=l.color;o.opacity=l.opacity;if(l.dashArray){o.dashStyle=g.Util.isArray(l.dashArray)?l.dashArray.join(" "):l.dashArray.replace(/( *, *)/g," ")}else{o.dashStyle=""}o.endcap=l.lineCap.replace("butt","flat");o.joinstyle=l.lineJoin}else{if(o){k.removeChild(o);m._stroke=null}}if(l.fill){if(!n){n=m._fill=g.SVG.create("fill")}k.appendChild(n);n.color=l.fillColor||l.color;n.opacity=l.fillOpacity}else{if(n){k.removeChild(n);m._fill=null}}},_updateCircle:function(l){var n=l._point.round(),m=Math.round(l._radius),k=Math.round(l._radiusY||m);this._setPath(l,l._empty()?"M0 0":"AL "+n.x+","+n.y+" "+m+","+k+" 0,"+(65535*360))},_setPath:function(k,l){k._path.v=l},_bringToFront:function(k){g.DomUtil.toFront(k._container)},_bringToBack:function(k){g.DomUtil.toBack(k._container)}});if(g.Browser.vml){g.SVG.create=(function(){try{f.namespaces.add("lvml","urn:schemas-microsoft-com:vml");return function(l){return f.createElement("<lvml:"+l+' class="lvml">')}}catch(k){return function(l){return f.createElement("<"+l+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}})()}g.Canvas=g.Renderer.extend({onAdd:function(){g.Renderer.prototype.onAdd.call(this);this._layers=this._layers||{};this._draw()},_initContainer:function(){var k=this._container=f.createElement("canvas");g.DomEvent.on(k,"mousemove",g.Util.throttle(this._onMouseMove,32,this),this).on(k,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(k,"mouseout",this._handleMouseOut,this);this._ctx=k.getContext("2d")},_update:function(){if(this._map._animatingZoom&&this._bounds){return}this._drawnLayers={};g.Renderer.prototype._update.call(this);var l=this._bounds,n=this._container,o=l.getSize(),k=g.Browser.retina?2:1;g.DomUtil.setPosition(n,l.min);n.width=k*o.x;n.height=k*o.y;n.style.width=o.x+"px";n.style.height=o.y+"px";if(g.Browser.retina){this._ctx.scale(2,2)}this._ctx.translate(-l.min.x,-l.min.y);this.fire("update")},_initPath:function(k){this._updateDashArray(k);this._layers[g.stamp(k)]=k},_addPath:g.Util.falseFn,_removePath:function(k){k._removed=true;this._requestRedraw(k)},_updatePath:function(k){this._redrawBounds=k._pxBounds;this._draw(true);k._project();k._update();this._draw();this._redrawBounds=null},_updateStyle:function(k){this._updateDashArray(k);this._requestRedraw(k)},_updateDashArray:function(m){if(m.options.dashArray){var n=m.options.dashArray.split(","),k=[],l;for(l=0;l<n.length;l++){k.push(Number(n[l]))}m.options._dashArray=k}},_requestRedraw:function(k){if(!this._map){return}var l=(k.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new g.Bounds();this._redrawBounds.extend(k._pxBounds.min.subtract([l,l]));this._redrawBounds.extend(k._pxBounds.max.add([l,l]));this._redrawRequest=this._redrawRequest||g.Util.requestAnimFrame(this._redraw,this)},_redraw:function(){this._redrawRequest=null;this._draw(true);this._draw();this._redrawBounds=null},_draw:function(k){this._clear=k;var l,m=this._redrawBounds;this._ctx.save();if(m){this._ctx.beginPath();this._ctx.rect(m.min.x,m.min.y,m.max.x-m.min.x,m.max.y-m.min.y);this._ctx.clip()}for(var n in this._layers){l=this._layers[n];if(!m||(l._pxBounds&&l._pxBounds.intersects(m))){l._updatePath()}if(k&&l._removed){delete l._removed;delete this._layers[n]}}this._ctx.restore()},_updatePoly:function(q,r){var o,n,l,k,m=q._parts,s=m.length,t=this._ctx;if(!s){return}this._drawnLayers[q._leaflet_id]=q;t.beginPath();if(t.setLineDash){t.setLineDash(q.options&&q.options._dashArray||[])}for(o=0;o<s;o++){for(n=0,l=m[o].length;n<l;n++){k=m[o][n];t[n?"lineTo":"moveTo"](k.x,k.y)}if(r){t.closePath()}}this._fillStroke(t,q)},_updateCircle:function(l){if(l._empty()){return}var o=l._point,k=this._ctx,n=l._radius,m=(l._radiusY||n)/n;this._drawnLayers[l._leaflet_id]=l;if(m!==1){k.save();k.scale(1,m)}k.beginPath();k.arc(o.x,o.y/m,n,0,Math.PI*2,false);if(m!==1){k.restore()}this._fillStroke(k,l)},_fillStroke:function(l,n){var k=this._clear,m=n.options;l.globalCompositeOperation=k?"destination-out":"source-over";if(m.fill){l.globalAlpha=k?1:m.fillOpacity;l.fillStyle=m.fillColor||m.color;l.fill(m.fillRule||"evenodd")}if(m.stroke&&m.weight!==0){l.globalAlpha=k?1:m.opacity;n._prevWeight=l.lineWidth=k?n._prevWeight+1:m.weight;l.strokeStyle=m.color;l.lineCap=m.lineCap;l.lineJoin=m.lineJoin;l.stroke()}},_onClick:function(n){var k=this._map.mouseEventToLayerPoint(n),m=[],l;for(var o in this._layers){l=this._layers[o];if(l.options.interactive&&l._containsPoint(k)&&!this._map._draggableMoved(l)){g.DomEvent._fakeStop(n);m.push(l)}}if(m.length){this._fireEvent(m,n)}},_onMouseMove:function(l){if(!this._map||this._map.dragging.moving()||this._map._animatingZoom){return}var k=this._map.mouseEventToLayerPoint(l);this._handleMouseOut(l,k);this._handleMouseHover(l,k)},_handleMouseOut:function(m,k){var l=this._hoveredLayer;if(l&&(m.type==="mouseout"||!l._containsPoint(k))){g.DomUtil.removeClass(this._container,"leaflet-interactive");this._fireEvent([l],m,"mouseout");this._hoveredLayer=null}},_handleMouseHover:function(m,k){var n,l;for(n in this._drawnLayers){l=this._drawnLayers[n];if(l.options.interactive&&l._containsPoint(k)){g.DomUtil.addClass(this._container,"leaflet-interactive");this._fireEvent([l],m,"mouseover");this._hoveredLayer=l}}if(this._hoveredLayer){this._fireEvent([this._hoveredLayer],m)}},_fireEvent:function(m,l,k){this._map._fireDOMEvent(l,k||l.type,m)},_bringToFront:g.Util.falseFn,_bringToBack:g.Util.falseFn});g.Browser.canvas=(function(){return !!f.createElement("canvas").getContext}());g.canvas=function(k){return g.Browser.canvas?new g.Canvas(k):null};g.Polyline.prototype._containsPoint=function(l,s){var r,q,n,t,o,m,u=this._clickTolerance();if(!this._pxBounds.contains(l)){return false}for(r=0,t=this._parts.length;r<t;r++){m=this._parts[r];for(q=0,o=m.length,n=o-1;q<o;n=q++){if(!s&&(q===0)){continue}if(g.LineUtil.pointToSegmentDistance(l,m[n],m[q])<=u){return true}}}return false};g.Polygon.prototype._containsPoint=function(l){var n=false,m,v,u,s,r,q,t,o;if(!this._pxBounds.contains(l)){return false}for(s=0,t=this._parts.length;s<t;s++){m=this._parts[s];for(r=0,o=m.length,q=o-1;r<o;q=r++){v=m[r];u=m[q];if(((v.y>l.y)!==(u.y>l.y))&&(l.x<(u.x-v.x)*(l.y-v.y)/(u.y-v.y)+v.x)){n=!n}}}return n||g.Polyline.prototype._containsPoint.call(this,l,true)};g.CircleMarker.prototype._containsPoint=function(k){return k.distanceTo(this._point)<=this._radius+this._clickTolerance()};g.GeoJSON=g.FeatureGroup.extend({initialize:function(l,k){g.setOptions(this,k);this._layers={};if(l){this.addData(l)}},addData:function(m){var q=g.Util.isArray(m)?m:m.features,p,k,o;if(q){for(p=0,k=q.length;p<k;p++){o=q[p];if(o.geometries||o.geometry||o.features||o.coordinates){this.addData(o)}}return this}var l=this.options;if(l.filter&&!l.filter(m)){return this}var n=g.GeoJSON.geometryToLayer(m,l);if(!n){return this}n.feature=g.GeoJSON.asFeature(m);n.defaultOptions=n.options;this.resetStyle(n);if(l.onEachFeature){l.onEachFeature(m,n)}return this.addLayer(n)},resetStyle:function(k){k.options=g.Util.extend({},k.defaultOptions);this._setLayerStyle(k,this.options.style);return this},setStyle:function(k){return this.eachLayer(function(l){this._setLayerStyle(l,k)},this)},_setLayerStyle:function(k,l){if(typeof l==="function"){l=l(k.feature)}if(k.setStyle){k.setStyle(l)}}});g.extend(g.GeoJSON,{geometryToLayer:function(l,v){var t=l.type==="Feature"?l.geometry:l,u=t?t.coordinates:null,q=[],m=v&&v.pointToLayer,n=v&&v.coordsToLatLng||this.coordsToLatLng,o,k,p,s;if(!u&&!t){return null}switch(t.type){case"Point":o=n(u);return m?m(l,o):new g.Marker(o);case"MultiPoint":for(p=0,s=u.length;p<s;p++){o=n(u[p]);q.push(m?m(l,o):new g.Marker(o))}return new g.FeatureGroup(q);case"LineString":case"MultiLineString":k=this.coordsToLatLngs(u,t.type==="LineString"?0:1,n);return new g.Polyline(k,v);case"Polygon":case"MultiPolygon":k=this.coordsToLatLngs(u,t.type==="Polygon"?1:2,n);return new g.Polygon(k,v);case"GeometryCollection":for(p=0,s=t.geometries.length;p<s;p++){var r=this.geometryToLayer({geometry:t.geometries[p],type:"Feature",properties:l.properties},v);if(r){q.push(r)}}return new g.FeatureGroup(q);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(k){return new g.LatLng(k[1],k[0],k[2])},coordsToLatLngs:function(o,n,q){var l=[];for(var m=0,k=o.length,p;m<k;m++){p=n?this.coordsToLatLngs(o[m],n-1,q):(q||this.coordsToLatLng)(o[m]);l.push(p)}return l},latLngToCoords:function(k){return k.alt!==b?[k.lng,k.lat,k.alt]:[k.lng,k.lat]},latLngsToCoords:function(l,p,m){var o=[];for(var n=0,k=l.length;n<k;n++){o.push(p?g.GeoJSON.latLngsToCoords(l[n],p-1,m):g.GeoJSON.latLngToCoords(l[n]))}if(!p&&m){o.push(o[0])}return o},getFeature:function(l,k){return l.feature?g.extend({},l.feature,{geometry:k}):g.GeoJSON.asFeature(k)},asFeature:function(k){if(k.type==="Feature"){return k}return{type:"Feature",properties:{},geometry:k}}});var e={toGeoJSON:function(){return g.GeoJSON.getFeature(this,{type:"Point",coordinates:g.GeoJSON.latLngToCoords(this.getLatLng())})}};g.Marker.include(e);g.Circle.include(e);g.CircleMarker.include(e);g.Polyline.prototype.toGeoJSON=function(){var l=!g.Polyline._flat(this._latlngs);var k=g.GeoJSON.latLngsToCoords(this._latlngs,l?1:0);return g.GeoJSON.getFeature(this,{type:(l?"Multi":"")+"LineString",coordinates:k})};g.Polygon.prototype.toGeoJSON=function(){var k=!g.Polyline._flat(this._latlngs),m=k&&!g.Polyline._flat(this._latlngs[0]);var l=g.GeoJSON.latLngsToCoords(this._latlngs,m?2:k?1:0,true);if(!k){l=[l]}return g.GeoJSON.getFeature(this,{type:(m?"Multi":"")+"Polygon",coordinates:l})};g.LayerGroup.include({toMultiPoint:function(){var k=[];this.eachLayer(function(l){k.push(l.toGeoJSON().geometry.coordinates)});return g.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:k})},toGeoJSON:function(){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint"){return this.toMultiPoint()}var k=l==="GeometryCollection",m=[];this.eachLayer(function(o){if(o.toGeoJSON){var n=o.toGeoJSON();m.push(k?n.geometry:g.GeoJSON.asFeature(n))}});if(k){return g.GeoJSON.getFeature(this,{geometries:m,type:"GeometryCollection"})}return{type:"FeatureCollection",features:m}}});g.geoJSON=function(l,k){return new g.GeoJSON(l,k)};g.geoJson=g.geoJSON;var j="_leaflet_events";g.DomEvent={on:function(q,n,p,m){if(typeof n==="object"){for(var o in n){this._on(q,o,n[o],p)}}else{n=g.Util.splitWords(n);for(var l=0,k=n.length;l<k;l++){this._on(q,n[l],p,m)}}return this},off:function(q,n,p,m){if(typeof n==="object"){for(var o in n){this._off(q,o,n[o],p)}}else{n=g.Util.splitWords(n);for(var l=0,k=n.length;l<k;l++){this._off(q,n[l],p,m)}}return this},_on:function(p,o,n,l){var q=o+g.stamp(n)+(l?"_"+g.stamp(l):"");if(p[j]&&p[j][q]){return this}var m=function(r){return n.call(l||p,r||d.event)};var k=m;if(g.Browser.pointer&&o.indexOf("touch")===0){this.addPointerListener(p,o,m,q)}else{if(g.Browser.touch&&(o==="dblclick")&&this.addDoubleTapListener){this.addDoubleTapListener(p,m,q)}else{if("addEventListener" in p){if(o==="mousewheel"){p.addEventListener("onwheel" in p?"wheel":"mousewheel",m,false)}else{if((o==="mouseenter")||(o==="mouseleave")){m=function(r){r=r||d.event;if(g.DomEvent._isExternalTarget(p,r)){k(r)}};p.addEventListener(o==="mouseenter"?"mouseover":"mouseout",m,false)}else{if(o==="click"&&g.Browser.android){m=function(r){return g.DomEvent._filterClick(r,k)}}p.addEventListener(o,m,false)}}}else{if("attachEvent" in p){p.attachEvent("on"+o,m)}}}}p[j]=p[j]||{};p[j][q]=m;return this},_off:function(o,n,m,k){var p=n+g.stamp(m)+(k?"_"+g.stamp(k):""),l=o[j]&&o[j][p];if(!l){return this}if(g.Browser.pointer&&n.indexOf("touch")===0){this.removePointerListener(o,n,p)}else{if(g.Browser.touch&&(n==="dblclick")&&this.removeDoubleTapListener){this.removeDoubleTapListener(o,p)}else{if("removeEventListener" in o){if(n==="mousewheel"){o.removeEventListener("onwheel" in o?"wheel":"mousewheel",l,false)}else{o.removeEventListener(n==="mouseenter"?"mouseover":n==="mouseleave"?"mouseout":n,l,false)}}else{if("detachEvent" in o){o.detachEvent("on"+n,l)}}}}o[j][p]=null;return this},stopPropagation:function(k){if(k.stopPropagation){k.stopPropagation()}else{if(k.originalEvent){k.originalEvent._stopped=true}else{k.cancelBubble=true}}g.DomEvent._skipped(k);return this},disableScrollPropagation:function(k){return g.DomEvent.on(k,"mousewheel",g.DomEvent.stopPropagation)},disableClickPropagation:function(l){var k=g.DomEvent.stopPropagation;g.DomEvent.on(l,g.Draggable.START.join(" "),k);return g.DomEvent.on(l,{click:g.DomEvent._fakeStop,dblclick:k})},preventDefault:function(k){if(k.preventDefault){k.preventDefault()}else{k.returnValue=false}return this},stop:function(k){return g.DomEvent.preventDefault(k).stopPropagation(k)},getMousePosition:function(m,k){if(!k){return new g.Point(m.clientX,m.clientY)}var l=k.getBoundingClientRect();return new g.Point(m.clientX-l.left-k.clientLeft,m.clientY-l.top-k.clientTop)},_wheelPxFactor:(g.Browser.win&&g.Browser.chrome)?2:g.Browser.gecko?d.devicePixelRatio:1,getWheelDelta:function(k){return(g.Browser.edge)?k.wheelDeltaY/2:(k.deltaY&&k.deltaMode===0)?-k.deltaY/g.DomEvent._wheelPxFactor:(k.deltaY&&k.deltaMode===1)?-k.deltaY*20:(k.deltaY&&k.deltaMode===2)?-k.deltaY*60:(k.deltaX||k.deltaZ)?0:k.wheelDelta?(k.wheelDeltaY||k.wheelDelta)/2:(k.detail&&Math.abs(k.detail)<32765)?-k.detail*20:k.detail?k.detail/-32765*60:0},_skipEvents:{},_fakeStop:function(k){g.DomEvent._skipEvents[k.type]=true},_skipped:function(l){var k=this._skipEvents[l.type];this._skipEvents[l.type]=false;return k},_isExternalTarget:function(k,n){var m=n.relatedTarget;if(!m){return true}try{while(m&&(m!==k)){m=m.parentNode}}catch(l){return false}return(m!==k)},_filterClick:function(n,m){var l=(n.timeStamp||(n.originalEvent&&n.originalEvent.timeStamp)),k=g.DomEvent._lastClick&&(l-g.DomEvent._lastClick);if((k&&k>100&&k<500)||(n.target._simulatedClick&&!n._simulated)){g.DomEvent.stop(n);return}g.DomEvent._lastClick=l;m(n)}};g.DomEvent.addListener=g.DomEvent.on;g.DomEvent.removeListener=g.DomEvent.off;g.Draggable=g.Evented.extend({options:{clickTolerance:3},statics:{START:g.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(l,m,k){this._element=l;this._dragStartTarget=m||l;this._preventOutline=k},enable:function(){if(this._enabled){return}g.DomEvent.on(this._dragStartTarget,g.Draggable.START.join(" "),this._onDown,this);this._enabled=true},disable:function(){if(!this._enabled){return}g.DomEvent.off(this._dragStartTarget,g.Draggable.START.join(" "),this._onDown,this);this._enabled=false;this._moved=false},_onDown:function(k){if(k._simulated||!this._enabled){return}this._moved=false;if(g.DomUtil.hasClass(this._element,"leaflet-zoom-anim")){return}if(g.Draggable._dragging||k.shiftKey||((k.which!==1)&&(k.button!==1)&&!k.touches)||!this._enabled){return}g.Draggable._dragging=true;if(this._preventOutline){g.DomUtil.preventOutline(this._element)}g.DomUtil.disableImageDrag();g.DomUtil.disableTextSelection();if(this._moving){return}this.fire("down");var l=k.touches?k.touches[0]:k;this._startPoint=new g.Point(l.clientX,l.clientY);g.DomEvent.on(f,g.Draggable.MOVE[k.type],this._onMove,this).on(f,g.Draggable.END[k.type],this._onUp,this)},_onMove:function(l){if(l._simulated||!this._enabled){return}if(l.touches&&l.touches.length>1){this._moved=true;return}var n=(l.touches&&l.touches.length===1?l.touches[0]:l),k=new g.Point(n.clientX,n.clientY),m=k.subtract(this._startPoint);if(!m.x&&!m.y){return}if(Math.abs(m.x)+Math.abs(m.y)<this.options.clickTolerance){return}g.DomEvent.preventDefault(l);if(!this._moved){this.fire("dragstart");this._moved=true;this._startPos=g.DomUtil.getPosition(this._element).subtract(m);g.DomUtil.addClass(f.body,"leaflet-dragging");this._lastTarget=l.target||l.srcElement;if((d.SVGElementInstance)&&(this._lastTarget instanceof SVGElementInstance)){this._lastTarget=this._lastTarget.correspondingUseElement}g.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")}this._newPos=this._startPos.add(m);this._moving=true;g.Util.cancelAnimFrame(this._animRequest);this._lastEvent=l;this._animRequest=g.Util.requestAnimFrame(this._updatePosition,this,true)},_updatePosition:function(){var k={originalEvent:this._lastEvent};this.fire("predrag",k);g.DomUtil.setPosition(this._element,this._newPos);this.fire("drag",k)},_onUp:function(l){if(l._simulated||!this._enabled){return}g.DomUtil.removeClass(f.body,"leaflet-dragging");if(this._lastTarget){g.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target");this._lastTarget=null}for(var k in g.Draggable.MOVE){g.DomEvent.off(f,g.Draggable.MOVE[k],this._onMove,this).off(f,g.Draggable.END[k],this._onUp,this)}g.DomUtil.enableImageDrag();g.DomUtil.enableTextSelection();if(this._moved&&this._moving){g.Util.cancelAnimFrame(this._animRequest);this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})}this._moving=false;g.Draggable._dragging=false}});g.Handler=g.Class.extend({initialize:function(k){this._map=k},enable:function(){if(this._enabled){return this}this._enabled=true;this.addHooks();return this},disable:function(){if(!this._enabled){return this}this._enabled=false;this.removeHooks();return this},enabled:function(){return !!this._enabled}});g.Map.mergeOptions({dragging:true,inertia:!g.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:Infinity,easeLinearity:0.2,worldCopyJump:false,maxBoundsViscosity:0});g.Map.Drag=g.Handler.extend({addHooks:function(){if(!this._draggable){var k=this._map;this._draggable=new g.Draggable(k._mapPane,k._container);this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this);this._draggable.on("predrag",this._onPreDragLimit,this);if(k.options.worldCopyJump){this._draggable.on("predrag",this._onPreDragWrap,this);k.on("zoomend",this._onZoomEnd,this);k.whenReady(this._onZoomEnd,this)}}g.DomUtil.addClass(this._map._container,"leaflet-grab leaflet-touch-drag");this._draggable.enable();this._positions=[];this._times=[]},removeHooks:function(){g.DomUtil.removeClass(this._map._container,"leaflet-grab");g.DomUtil.removeClass(this._map._container,"leaflet-touch-drag");this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDown:function(){this._map._stop()},_onDragStart:function(){var l=this._map;if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var k=g.latLngBounds(this._map.options.maxBounds);this._offsetLimit=g.bounds(this._map.latLngToContainerPoint(k.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(k.getSouthEast()).multiplyBy(-1).add(this._map.getSize()));this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else{this._offsetLimit=null}l.fire("movestart").fire("dragstart");if(l.options.inertia){this._positions=[];this._times=[]}},_onDrag:function(l){if(this._map.options.inertia){var k=this._lastTime=+new Date(),m=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(m);this._times.push(k);if(k-this._times[0]>50){this._positions.shift();this._times.shift()}}this._map.fire("move",l).fire("drag",l)},_onZoomEnd:function(){var l=this._map.getSize().divideBy(2),k=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=k.subtract(l).x;this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(l,k){return l-(l-k)*this._viscosity},_onPreDragLimit:function(){if(!this._viscosity||!this._offsetLimit){return}var l=this._draggable._newPos.subtract(this._draggable._startPos);var k=this._offsetLimit;if(l.x<k.min.x){l.x=this._viscousLimit(l.x,k.min.x)}if(l.y<k.min.y){l.y=this._viscousLimit(l.y,k.min.y)}if(l.x>k.max.x){l.x=this._viscousLimit(l.x,k.max.x)}if(l.y>k.max.y){l.y=this._viscousLimit(l.y,k.max.y)}this._draggable._newPos=this._draggable._startPos.add(l)},_onPreDragWrap:function(){var q=this._worldWidth,p=Math.round(q/2),l=this._initialWorldOffset,k=this._draggable._newPos.x,n=(k-p+l)%q+p-l,m=(k+p+l)%q-p-l,o=Math.abs(n+l)<Math.abs(m+l)?n:m;this._draggable._absPos=this._draggable._newPos.clone();this._draggable._newPos.x=o},_onDragEnd:function(s){var l=this._map,w=l.options,k=!w.inertia||this._times.length<2;l.fire("dragend",s);if(k){l.fire("moveend")}else{var t=this._lastPos.subtract(this._positions[0]),q=(this._lastTime-this._times[0])/1000,p=w.easeLinearity,o=t.multiplyBy(p/q),n=o.distanceTo([0,0]),v=Math.min(w.inertiaMaxSpeed,n),u=o.multiplyBy(v/n),m=v/(w.inertiaDeceleration*p),r=u.multiplyBy(-m/2).round();if(!r.x&&!r.y){l.fire("moveend")}else{r=l._limitOffset(r,l.options.maxBounds);g.Util.requestAnimFrame(function(){l.panBy(r,{duration:m,easeLinearity:p,noMoveStart:true,animate:true})})}}}});g.Map.addInitHook("addHandler","dragging",g.Map.Drag);g.Map.mergeOptions({doubleClickZoom:true});g.Map.DoubleClickZoom=g.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(n){var m=this._map,l=m.getZoom(),o=m.options.zoomDelta,k=n.originalEvent.shiftKey?l-o:l+o;if(m.options.doubleClickZoom==="center"){m.setZoom(k)}else{m.setZoomAround(n.containerPoint,k)}}});g.Map.addInitHook("addHandler","doubleClickZoom",g.Map.DoubleClickZoom);g.Map.mergeOptions({scrollWheelZoom:true,wheelDebounceTime:40,wheelPxPerZoomLevel:60});g.Map.ScrollWheelZoom=g.Handler.extend({addHooks:function(){g.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this);this._delta=0},removeHooks:function(){g.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(m){var n=g.DomEvent.getWheelDelta(m);var k=this._map.options.wheelDebounceTime;this._delta+=n;this._lastMousePos=this._map.mouseEventToContainerPoint(m);if(!this._startTime){this._startTime=+new Date()}var l=Math.max(k-(+new Date()-this._startTime),0);clearTimeout(this._timer);this._timer=setTimeout(g.bind(this._performZoom,this),l);g.DomEvent.stop(m)},_performZoom:function(){var p=this._map,o=p.getZoom(),k=this._map.options.zoomSnap||0;p._stop();var n=this._delta/(this._map.options.wheelPxPerZoomLevel*4),m=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,l=k?Math.ceil(m/k)*k:m,q=p._limitZoom(o+(this._delta>0?l:-l))-o;this._delta=0;this._startTime=null;if(!q){return}if(p.options.scrollWheelZoom==="center"){p.setZoom(o+q)}else{p.setZoomAround(this._lastMousePos,o+q)}}});g.Map.addInitHook("addHandler","scrollWheelZoom",g.Map.ScrollWheelZoom);g.extend(g.DomEvent,{_touchstart:g.Browser.msPointer?"MSPointerDown":g.Browser.pointer?"pointerdown":"touchstart",_touchend:g.Browser.msPointer?"MSPointerUp":g.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(n,v,k){var u,m,r=false,p=250;function o(y){var x;if(g.Browser.pointer){x=g.DomEvent._pointersCount}else{x=y.touches.length}if(x>1){return}var w=Date.now(),z=w-(u||w);m=y.touches?y.touches[0]:y;r=(z>0&&z<=p);u=w}function s(){if(r&&!m.cancelBubble){if(g.Browser.pointer){var w={},y,x;for(x in m){y=m[x];w[x]=y&&y.bind?y.bind(m):y}m=w}m.type="dblclick";v(m);u=null}}var l="_leaflet_",q=this._touchstart,t=this._touchend;n[l+q+k]=o;n[l+t+k]=s;n[l+"dblclick"+k]=v;n.addEventListener(q,o,false);n.addEventListener(t,s,false);if(!g.Browser.edge){n.addEventListener("dblclick",v,false)}return this},removeDoubleTapListener:function(m,p){var l="_leaflet_",o=m[l+this._touchstart+p],n=m[l+this._touchend+p],k=m[l+"dblclick"+p];m.removeEventListener(this._touchstart,o,false);m.removeEventListener(this._touchend,n,false);if(!g.Browser.edge){m.removeEventListener("dblclick",k,false)}return this}});g.extend(g.DomEvent,{POINTER_DOWN:g.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:g.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:g.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:g.Browser.msPointer?"MSPointerCancel":"pointercancel",TAG_WHITE_LIST:["INPUT","SELECT","OPTION"],_pointers:{},_pointersCount:0,addPointerListener:function(m,l,k,n){if(l==="touchstart"){this._addPointerStart(m,k,n)}else{if(l==="touchmove"){this._addPointerMove(m,k,n)}else{if(l==="touchend"){this._addPointerEnd(m,k,n)}}}return this},removePointerListener:function(m,l,n){var k=m["_leaflet_"+l+n];if(l==="touchstart"){m.removeEventListener(this.POINTER_DOWN,k,false)}else{if(l==="touchmove"){m.removeEventListener(this.POINTER_MOVE,k,false)}else{if(l==="touchend"){m.removeEventListener(this.POINTER_UP,k,false);m.removeEventListener(this.POINTER_CANCEL,k,false)}}}return this},_addPointerStart:function(m,k,o){var l=g.bind(function(p){if(p.pointerType!=="mouse"&&p.pointerType!==p.MSPOINTER_TYPE_MOUSE){if(this.TAG_WHITE_LIST.indexOf(p.target.tagName)<0){g.DomEvent.preventDefault(p)}else{return}}this._handlePointer(p,k)},this);m["_leaflet_touchstart"+o]=l;m.addEventListener(this.POINTER_DOWN,l,false);if(!this._pointerDocListener){var n=g.bind(this._globalPointerUp,this);f.documentElement.addEventListener(this.POINTER_DOWN,g.bind(this._globalPointerDown,this),true);f.documentElement.addEventListener(this.POINTER_MOVE,g.bind(this._globalPointerMove,this),true);f.documentElement.addEventListener(this.POINTER_UP,n,true);f.documentElement.addEventListener(this.POINTER_CANCEL,n,true);this._pointerDocListener=true}},_globalPointerDown:function(k){this._pointers[k.pointerId]=k;this._pointersCount++},_globalPointerMove:function(k){if(this._pointers[k.pointerId]){this._pointers[k.pointerId]=k}},_globalPointerUp:function(k){delete this._pointers[k.pointerId];this._pointersCount--},_handlePointer:function(m,l){m.touches=[];for(var k in this._pointers){m.touches.push(this._pointers[k])}m.changedTouches=[m];l(m)},_addPointerMove:function(l,k,n){var m=g.bind(function(o){if((o.pointerType===o.MSPOINTER_TYPE_MOUSE||o.pointerType==="mouse")&&o.buttons===0){return}this._handlePointer(o,k)},this);l["_leaflet_touchmove"+n]=m;l.addEventListener(this.POINTER_MOVE,m,false)},_addPointerEnd:function(l,k,n){var m=g.bind(function(o){this._handlePointer(o,k)},this);l["_leaflet_touchend"+n]=m;l.addEventListener(this.POINTER_UP,m,false);l.addEventListener(this.POINTER_CANCEL,m,false)}});g.Map.mergeOptions({touchZoom:g.Browser.touch&&!g.Browser.android23,bounceAtZoomLimits:true});g.Map.TouchZoom=g.Handler.extend({addHooks:function(){g.DomUtil.addClass(this._map._container,"leaflet-touch-zoom");g.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){g.DomUtil.removeClass(this._map._container,"leaflet-touch-zoom");g.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(m){var l=this._map;if(!m.touches||m.touches.length!==2||l._animatingZoom||this._zooming){return}var n=l.mouseEventToContainerPoint(m.touches[0]),k=l.mouseEventToContainerPoint(m.touches[1]);this._centerPoint=l.getSize()._divideBy(2);this._startLatLng=l.containerPointToLatLng(this._centerPoint);if(l.options.touchZoom!=="center"){this._pinchStartLatLng=l.containerPointToLatLng(n.add(k)._divideBy(2))}this._startDist=n.distanceTo(k);this._startZoom=l.getZoom();this._moved=false;this._zooming=true;l._stop();g.DomEvent.on(f,"touchmove",this._onTouchMove,this).on(f,"touchend",this._onTouchEnd,this);g.DomEvent.preventDefault(m)},_onTouchMove:function(n){if(!n.touches||n.touches.length!==2||!this._zooming){return}var m=this._map,p=m.mouseEventToContainerPoint(n.touches[0]),l=m.mouseEventToContainerPoint(n.touches[1]),o=p.distanceTo(l)/this._startDist;this._zoom=m.getScaleZoom(o,this._startZoom);if(!m.options.bounceAtZoomLimits&&((this._zoom<m.getMinZoom()&&o<1)||(this._zoom>m.getMaxZoom()&&o>1))){this._zoom=m._limitZoom(this._zoom)}if(m.options.touchZoom==="center"){this._center=this._startLatLng;if(o===1){return}}else{var q=p._add(l)._divideBy(2)._subtract(this._centerPoint);if(o===1&&q.x===0&&q.y===0){return}this._center=m.unproject(m.project(this._pinchStartLatLng,this._zoom).subtract(q),this._zoom)}if(!this._moved){m._moveStart(true);this._moved=true}g.Util.cancelAnimFrame(this._animRequest);var k=g.bind(m._move,m,this._center,this._zoom,{pinch:true,round:false});this._animRequest=g.Util.requestAnimFrame(k,this,true);g.DomEvent.preventDefault(n)},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=false;return}this._zooming=false;g.Util.cancelAnimFrame(this._animRequest);g.DomEvent.off(f,"touchmove",this._onTouchMove).off(f,"touchend",this._onTouchEnd);if(this._map.options.zoomAnimation){this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),true,this._map.options.zoomSnap)}else{this._map._resetView(this._center,this._map._limitZoom(this._zoom))}}});g.Map.addInitHook("addHandler","touchZoom",g.Map.TouchZoom);g.Map.mergeOptions({tap:true,tapTolerance:15});g.Map.Tap=g.Handler.extend({addHooks:function(){g.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){g.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(l){if(!l.touches){return}g.DomEvent.preventDefault(l);this._fireClick=true;if(l.touches.length>1){this._fireClick=false;clearTimeout(this._holdTimeout);return}var m=l.touches[0],k=m.target;this._startPos=this._newPos=new g.Point(m.clientX,m.clientY);if(k.tagName&&k.tagName.toLowerCase()==="a"){g.DomUtil.addClass(k,"leaflet-active")}this._holdTimeout=setTimeout(g.bind(function(){if(this._isTapValid()){this._fireClick=false;this._onUp();this._simulateEvent("contextmenu",m)}},this),1000);this._simulateEvent("mousedown",m);g.DomEvent.on(f,{touchmove:this._onMove,touchend:this._onUp},this)},_onUp:function(l){clearTimeout(this._holdTimeout);g.DomEvent.off(f,{touchmove:this._onMove,touchend:this._onUp},this);if(this._fireClick&&l&&l.changedTouches){var m=l.changedTouches[0],k=m.target;if(k&&k.tagName&&k.tagName.toLowerCase()==="a"){g.DomUtil.removeClass(k,"leaflet-active")}this._simulateEvent("mouseup",m);if(this._isTapValid()){this._simulateEvent("click",m)}}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(k){var l=k.touches[0];this._newPos=new g.Point(l.clientX,l.clientY);this._simulateEvent("mousemove",l)},_simulateEvent:function(k,m){var l=f.createEvent("MouseEvents");l._simulated=true;m.target._simulatedClick=true;l.initMouseEvent(k,true,true,d,1,m.screenX,m.screenY,m.clientX,m.clientY,false,false,false,false,0,null);m.target.dispatchEvent(l)}});if(g.Browser.touch&&!g.Browser.pointer){g.Map.addInitHook("addHandler","tap",g.Map.Tap)}g.Map.mergeOptions({boxZoom:true});g.Map.BoxZoom=g.Handler.extend({initialize:function(k){this._map=k;this._container=k._container;this._pane=k._panes.overlayPane},addHooks:function(){g.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){g.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_resetState:function(){this._moved=false},_onMouseDown:function(k){if(!k.shiftKey||((k.which!==1)&&(k.button!==1))){return false}this._resetState();g.DomUtil.disableTextSelection();g.DomUtil.disableImageDrag();this._startPoint=this._map.mouseEventToContainerPoint(k);g.DomEvent.on(f,{contextmenu:g.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(m){if(!this._moved){this._moved=true;this._box=g.DomUtil.create("div","leaflet-zoom-box",this._container);g.DomUtil.addClass(this._container,"leaflet-crosshair");this._map.fire("boxzoomstart")}this._point=this._map.mouseEventToContainerPoint(m);var l=new g.Bounds(this._point,this._startPoint),k=l.getSize();g.DomUtil.setPosition(this._box,l.min);this._box.style.width=k.x+"px";this._box.style.height=k.y+"px"},_finish:function(){if(this._moved){g.DomUtil.remove(this._box);g.DomUtil.removeClass(this._container,"leaflet-crosshair")}g.DomUtil.enableTextSelection();g.DomUtil.enableImageDrag();g.DomEvent.off(f,{contextmenu:g.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(l){if((l.which!==1)&&(l.button!==1)){return}this._finish();if(!this._moved){return}setTimeout(g.bind(this._resetState,this),0);var k=new g.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(k).fire("boxzoomend",{boxZoomBounds:k})},_onKeyDown:function(k){if(k.keyCode===27){this._finish()}}});g.Map.addInitHook("addHandler","boxZoom",g.Map.BoxZoom);g.Map.mergeOptions({keyboard:true,keyboardPanDelta:80});g.Map.Keyboard=g.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(k){this._map=k;this._setPanDelta(k.options.keyboardPanDelta);this._setZoomDelta(k.options.zoomDelta)},addHooks:function(){var k=this._map._container;if(k.tabIndex<=0){k.tabIndex="0"}g.DomEvent.on(k,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this);this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks();g.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this);this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(this._focused){return}var k=f.body,n=f.documentElement,m=k.scrollTop||n.scrollTop,l=k.scrollLeft||n.scrollLeft;this._map._container.focus();d.scrollTo(l,m)},_onFocus:function(){this._focused=true;this._map.fire("focus")},_onBlur:function(){this._focused=false;this._map.fire("blur")},_setPanDelta:function(o){var n=this._panKeys={},l=this.keyCodes,m,k;for(m=0,k=l.left.length;m<k;m++){n[l.left[m]]=[-1*o,0]}for(m=0,k=l.right.length;m<k;m++){n[l.right[m]]=[o,0]}for(m=0,k=l.down.length;m<k;m++){n[l.down[m]]=[0,o]}for(m=0,k=l.up.length;m<k;m++){n[l.up[m]]=[0,-1*o]}},_setZoomDelta:function(o){var n=this._zoomKeys={},l=this.keyCodes,m,k;for(m=0,k=l.zoomIn.length;m<k;m++){n[l.zoomIn[m]]=o}for(m=0,k=l.zoomOut.length;m<k;m++){n[l.zoomOut[m]]=-o}},_addHooks:function(){g.DomEvent.on(f,"keydown",this._onKeyDown,this)},_removeHooks:function(){g.DomEvent.off(f,"keydown",this._onKeyDown,this)},_onKeyDown:function(m){if(m.altKey||m.ctrlKey||m.metaKey){return}var k=m.keyCode,l=this._map,n;if(k in this._panKeys){if(l._panAnim&&l._panAnim._inProgress){return}n=this._panKeys[k];if(m.shiftKey){n=g.point(n).multiplyBy(3)}l.panBy(n);if(l.options.maxBounds){l.panInsideBounds(l.options.maxBounds)}}else{if(k in this._zoomKeys){l.setZoom(l.getZoom()+(m.shiftKey?3:1)*this._zoomKeys[k])}else{if(k===27){l.closePopup()}else{return}}}g.DomEvent.stop(m)}});g.Map.addInitHook("addHandler","keyboard",g.Map.Keyboard);g.Handler.MarkerDrag=g.Handler.extend({initialize:function(k){this._marker=k},addHooks:function(){var k=this._marker._icon;if(!this._draggable){this._draggable=new g.Draggable(k,k,true)}this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable();g.DomUtil.addClass(k,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable();if(this._marker._icon){g.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")}},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng();this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(m){var k=this._marker,o=k._shadow,l=g.DomUtil.getPosition(k._icon),n=k._map.layerPointToLatLng(l);if(o){g.DomUtil.setPosition(o,l)}k._latlng=n;m.latlng=n;m.oldLatLng=this._oldLatLng;k.fire("move",m).fire("drag",m)},_onDragEnd:function(k){delete this._oldLatLng;this._marker.fire("moveend").fire("dragend",k)}});g.Control=g.Class.extend({options:{position:"topright"},initialize:function(k){g.setOptions(this,k)},getPosition:function(){return this.options.position},setPosition:function(k){var l=this._map;if(l){l.removeControl(this)}this.options.position=k;if(l){l.addControl(this)}return this},getContainer:function(){return this._container},addTo:function(m){this.remove();this._map=m;var k=this._container=this.onAdd(m),n=this.getPosition(),l=m._controlCorners[n];g.DomUtil.addClass(k,"leaflet-control");if(n.indexOf("bottom")!==-1){l.insertBefore(k,l.firstChild)}else{l.appendChild(k)}return this},remove:function(){if(!this._map){return this}g.DomUtil.remove(this._container);if(this.onRemove){this.onRemove(this._map)}this._map=null;return this},_refocusOnMap:function(k){if(this._map&&k&&k.screenX>0&&k.screenY>0){this._map.getContainer().focus()}}});g.control=function(k){return new g.Control(k)};g.Map.include({addControl:function(k){k.addTo(this);return this},removeControl:function(k){k.remove();return this},_initControlPos:function(){var n=this._controlCorners={},m="leaflet-",k=this._controlContainer=g.DomUtil.create("div",m+"control-container",this._container);function o(p,q){var l=m+p+" "+m+q;n[p+q]=g.DomUtil.create("div",l,k)}o("top","left");o("top","right");o("bottom","left");o("bottom","right")},_clearControlPos:function(){g.DomUtil.remove(this._controlContainer)}});g.Control.Zoom=g.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(m){var n="leaflet-control-zoom",k=g.DomUtil.create("div",n+" leaflet-bar"),l=this.options;this._zoomInButton=this._createButton(l.zoomInText,l.zoomInTitle,n+"-in",k,this._zoomIn);this._zoomOutButton=this._createButton(l.zoomOutText,l.zoomOutTitle,n+"-out",k,this._zoomOut);this._updateDisabled();m.on("zoomend zoomlevelschange",this._updateDisabled,this);return k},onRemove:function(k){k.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){this._disabled=true;this._updateDisabled();return this},enable:function(){this._disabled=false;this._updateDisabled();return this},_zoomIn:function(k){if(!this._disabled&&this._map._zoom<this._map.getMaxZoom()){this._map.zoomIn(this._map.options.zoomDelta*(k.shiftKey?3:1))}},_zoomOut:function(k){if(!this._disabled&&this._map._zoom>this._map.getMinZoom()){this._map.zoomOut(this._map.options.zoomDelta*(k.shiftKey?3:1))}},_createButton:function(l,p,n,k,m){var o=g.DomUtil.create("a",n,k);o.innerHTML=l;o.href="#";o.title=p;g.DomEvent.on(o,"mousedown dblclick",g.DomEvent.stopPropagation).on(o,"click",g.DomEvent.stop).on(o,"click",m,this).on(o,"click",this._refocusOnMap,this);return o},_updateDisabled:function(){var l=this._map,k="leaflet-disabled";g.DomUtil.removeClass(this._zoomInButton,k);g.DomUtil.removeClass(this._zoomOutButton,k);if(this._disabled||l._zoom===l.getMinZoom()){g.DomUtil.addClass(this._zoomOutButton,k)}if(this._disabled||l._zoom===l.getMaxZoom()){g.DomUtil.addClass(this._zoomInButton,k)}}});g.Map.mergeOptions({zoomControl:true});g.Map.addInitHook(function(){if(this.options.zoomControl){this.zoomControl=new g.Control.Zoom();this.addControl(this.zoomControl)}});g.control.zoom=function(k){return new g.Control.Zoom(k)};g.Control.Attribution=g.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(k){g.setOptions(this,k);this._attributions={}},onAdd:function(l){l.attributionControl=this;this._container=g.DomUtil.create("div","leaflet-control-attribution");if(g.DomEvent){g.DomEvent.disableClickPropagation(this._container)}for(var k in l._layers){if(l._layers[k].getAttribution){this.addAttribution(l._layers[k].getAttribution())}}this._update();return this._container},setPrefix:function(k){this.options.prefix=k;this._update();return this},addAttribution:function(k){if(!k){return this}if(!this._attributions[k]){this._attributions[k]=0}this._attributions[k]++;this._update();return this},removeAttribution:function(k){if(!k){return this}if(this._attributions[k]){this._attributions[k]--;this._update()}return this},_update:function(){if(!this._map){return}var m=[];for(var k in this._attributions){if(this._attributions[k]){m.push(k)}}var l=[];if(this.options.prefix){l.push(this.options.prefix)}if(m.length){l.push(m.join(", "))}this._container.innerHTML=l.join(" | ")}});g.Map.mergeOptions({attributionControl:true});g.Map.addInitHook(function(){if(this.options.attributionControl){new g.Control.Attribution().addTo(this)}});g.control.attribution=function(k){return new g.Control.Attribution(k)};g.Control.Scale=g.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:true,imperial:true},onAdd:function(n){var m="leaflet-control-scale",k=g.DomUtil.create("div",m),l=this.options;this._addScales(l,m+"-line",k);n.on(l.updateWhenIdle?"moveend":"move",this._update,this);n.whenReady(this._update,this);return k},onRemove:function(k){k.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,m,k){if(l.metric){this._mScale=g.DomUtil.create("div",m,k)}if(l.imperial){this._iScale=g.DomUtil.create("div",m,k)}},_update:function(){var l=this._map,m=l.getSize().y/2;var k=l.distance(l.containerPointToLatLng([0,m]),l.containerPointToLatLng([this.options.maxWidth,m]));this._updateScales(k)},_updateScales:function(k){if(this.options.metric&&k){this._updateMetric(k)}if(this.options.imperial&&k){this._updateImperial(k)}},_updateMetric:function(m){var k=this._getRoundNum(m),l=k<1000?k+" m":(k/1000)+" km";this._updateScale(this._mScale,l,k/m)},_updateImperial:function(o){var n=o*3.2808399,m,l,k;if(n>5280){m=n/5280;l=this._getRoundNum(m);this._updateScale(this._iScale,l+" mi",l/m)}else{k=this._getRoundNum(n);this._updateScale(this._iScale,k+" ft",k/n)}},_updateScale:function(m,l,k){m.style.width=Math.round(this.options.maxWidth*k)+"px";m.innerHTML=l},_getRoundNum:function(l){var k=Math.pow(10,(Math.floor(l)+"").length-1),m=l/k;m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1;return k*m}});g.control.scale=function(k){return new g.Control.Scale(k)};g.Control.Layers=g.Control.extend({options:{collapsed:true,position:"topright",autoZIndex:true,hideSingleBase:false},initialize:function(n,m,k){g.setOptions(this,k);this._layers=[];this._lastZIndex=0;this._handlingClick=false;for(var l in n){this._addLayer(n[l],l)}for(l in m){this._addLayer(m[l],l,true)}},onAdd:function(k){this._initLayout();this._update();this._map=k;k.on("zoomend",this._checkDisabledLayers,this);return this._container},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var k=0;k<this._layers.length;k++){this._layers[k].layer.off("add remove",this._onLayerChange,this)}},addBaseLayer:function(l,k){this._addLayer(l,k);return(this._map)?this._update():this},addOverlay:function(l,k){this._addLayer(l,k,true);return(this._map)?this._update():this},removeLayer:function(k){k.off("add remove",this._onLayerChange,this);var l=this._getLayer(g.stamp(k));if(l){this._layers.splice(this._layers.indexOf(l),1)}return(this._map)?this._update():this},expand:function(){g.DomUtil.addClass(this._container,"leaflet-control-layers-expanded");this._form.style.height=null;var k=this._map.getSize().y-(this._container.offsetTop+50);if(k<this._form.clientHeight){g.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar");this._form.style.height=k+"px"}else{g.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar")}this._checkDisabledLayers();return this},collapse:function(){g.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded");return this},_initLayout:function(){var l="leaflet-control-layers",k=this._container=g.DomUtil.create("div",l);k.setAttribute("aria-haspopup",true);g.DomEvent.disableClickPropagation(k);if(!g.Browser.touch){g.DomEvent.disableScrollPropagation(k)}var n=this._form=g.DomUtil.create("form",l+"-list");if(this.options.collapsed){if(!g.Browser.android){g.DomEvent.on(k,{mouseenter:this.expand,mouseleave:this.collapse},this)}var m=this._layersLink=g.DomUtil.create("a",l+"-toggle",k);m.href="#";m.title="Layers";if(g.Browser.touch){g.DomEvent.on(m,"click",g.DomEvent.stop).on(m,"click",this.expand,this)}else{g.DomEvent.on(m,"focus",this.expand,this)}g.DomEvent.on(n,"click",function(){setTimeout(g.bind(this._onInputClick,this),0)},this);this._map.on("click",this.collapse,this)}else{this.expand()}this._baseLayersList=g.DomUtil.create("div",l+"-base",n);this._separator=g.DomUtil.create("div",l+"-separator",n);this._overlaysList=g.DomUtil.create("div",l+"-overlays",n);k.appendChild(n)},_getLayer:function(l){for(var k=0;k<this._layers.length;k++){if(this._layers[k]&&g.stamp(this._layers[k].layer)===l){return this._layers[k]}}},_addLayer:function(m,l,k){m.on("add remove",this._onLayerChange,this);this._layers.push({layer:m,name:l,overlay:k});if(this.options.autoZIndex&&m.setZIndex){this._lastZIndex++;m.setZIndex(this._lastZIndex)}},_update:function(){if(!this._container){return this}g.DomUtil.empty(this._baseLayersList);g.DomUtil.empty(this._overlaysList);var k,n,m,o,l=0;for(m=0;m<this._layers.length;m++){o=this._layers[m];this._addItem(o);n=n||o.overlay;k=k||!o.overlay;l+=!o.overlay?1:0}if(this.options.hideSingleBase){k=k&&l>1;this._baseLayersList.style.display=k?"":"none"}this._separator.style.display=n&&k?"":"none";return this},_onLayerChange:function(m){if(!this._handlingClick){this._update()}var l=this._getLayer(g.stamp(m.target));var k=l.overlay?(m.type==="add"?"overlayadd":"overlayremove"):(m.type==="add"?"baselayerchange":null);if(k){this._map.fire(k,l)}},_createRadioElement:function(k,n){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+k+'"'+(n?' checked="checked"':"")+"/>";var l=f.createElement("div");l.innerHTML=m;return l.firstChild},_addItem:function(q){var n=f.createElement("label"),p=this._map.hasLayer(q.layer),l;if(q.overlay){l=f.createElement("input");l.type="checkbox";l.className="leaflet-control-layers-selector";l.defaultChecked=p}else{l=this._createRadioElement("leaflet-base-layers",p)}l.layerId=g.stamp(q.layer);g.DomEvent.on(l,"click",this._onInputClick,this);var m=f.createElement("span");m.innerHTML=" "+q.name;var o=f.createElement("div");n.appendChild(o);o.appendChild(l);o.appendChild(m);var k=q.overlay?this._overlaysList:this._baseLayersList;k.appendChild(n);this._checkDisabledLayers();return n},_onInputClick:function(){var l=this._form.getElementsByTagName("input"),m,q,k;var o=[],n=[];this._handlingClick=true;for(var p=l.length-1;p>=0;p--){m=l[p];q=this._getLayer(m.layerId).layer;k=this._map.hasLayer(q);if(m.checked&&!k){o.push(q)}else{if(!m.checked&&k){n.push(q)}}}for(p=0;p<n.length;p++){this._map.removeLayer(n[p])}for(p=0;p<o.length;p++){this._map.addLayer(o[p])}this._handlingClick=false;this._refocusOnMap()},_checkDisabledLayers:function(){var k=this._form.getElementsByTagName("input"),l,n,o=this._map.getZoom();for(var m=k.length-1;m>=0;m--){l=k[m];n=this._getLayer(l.layerId).layer;l.disabled=(n.options.minZoom!==b&&o<n.options.minZoom)||(n.options.maxZoom!==b&&o>n.options.maxZoom)}},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}});g.control.layers=function(m,l,k){return new g.Control.Layers(m,l,k)};g.PosAnimation=g.Evented.extend({run:function(l,k,m,n){this.stop();this._el=l;this._inProgress=true;this._duration=m||0.25;this._easeOutPower=1/Math.max(n||0.5,0.2);this._startPos=g.DomUtil.getPosition(l);this._offset=k.subtract(this._startPos);this._startTime=+new Date();this.fire("start");this._animate()},stop:function(){if(!this._inProgress){return}this._step(true);this._complete()},_animate:function(){this._animId=g.Util.requestAnimFrame(this._animate,this);this._step()},_step:function(l){var k=(+new Date())-this._startTime,m=this._duration*1000;if(k<m){this._runFrame(this._easeOut(k/m),l)}else{this._runFrame(1);this._complete()}},_runFrame:function(l,k){var m=this._startPos.add(this._offset.multiplyBy(l));if(k){m._round()}g.DomUtil.setPosition(this._el,m);this.fire("step")},_complete:function(){g.Util.cancelAnimFrame(this._animId);this._inProgress=false;this.fire("end")},_easeOut:function(k){return 1-Math.pow(1-k,this._easeOutPower)}});g.Map.include({setView:function(k,n,l){n=n===b?this._zoom:this._limitZoom(n);k=this._limitCenter(g.latLng(k),n,this.options.maxBounds);l=l||{};this._stop();if(this._loaded&&!l.reset&&l!==true){if(l.animate!==b){l.zoom=g.extend({animate:l.animate},l.zoom);l.pan=g.extend({animate:l.animate,duration:l.duration},l.pan)}var m=(this._zoom!==n)?this._tryAnimatedZoom&&this._tryAnimatedZoom(k,n,l.zoom):this._tryAnimatedPan(k,l.pan);if(m){clearTimeout(this._sizeTimer);return this}}this._resetView(k,n);return this},panBy:function(m,k){m=g.point(m).round();k=k||{};if(!m.x&&!m.y){return this.fire("moveend")}if(k.animate!==true&&!this.getSize().contains(m)){this._resetView(this.unproject(this.project(this.getCenter()).add(m)),this.getZoom());return this}if(!this._panAnim){this._panAnim=new g.PosAnimation();this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)}if(!k.noMoveStart){this.fire("movestart")}if(k.animate!==false){g.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var l=this._getMapPanePos().subtract(m).round();this._panAnim.run(this._mapPane,l,k.duration||0.25,k.easeLinearity)}else{this._rawPanBy(m);this.fire("move").fire("moveend")}return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){g.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim");this.fire("moveend")},_tryAnimatedPan:function(k,l){var m=this._getCenterOffset(k)._floor();if((l&&l.animate)!==true&&!this.getSize().contains(m)){return false}this.panBy(m,l);return true}});g.Map.mergeOptions({zoomAnimation:true,zoomAnimationThreshold:4});var h=g.DomUtil.TRANSITION&&g.Browser.any3d&&!g.Browser.mobileOpera;if(h){g.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation;if(this._zoomAnimated){this._createAnimProxy();g.DomEvent.on(this._proxy,g.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}})}g.Map.include(!h?{}:{_createAnimProxy:function(){var k=this._proxy=g.DomUtil.create("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(k);this.on("zoomanim",function(m){var n=g.DomUtil.TRANSFORM,l=k.style[n];g.DomUtil.setTransform(k,this.project(m.center,m.zoom),this.getZoomScale(m.zoom,1));if(l===k.style[n]&&this._animatingZoom){this._onZoomTransitionEnd()}},this);this.on("load moveend",function(){var m=this.getCenter(),l=this.getZoom();g.DomUtil.setTransform(k,this.project(m,l),this.getZoomScale(l,1))},this)},_catchTransitionEnd:function(k){if(this._animatingZoom&&k.propertyName.indexOf("transform")>=0){this._onZoomTransitionEnd()}},_nothingToAnimate:function(){return !this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(k,m,l){if(this._animatingZoom){return true}l=l||{};if(!this._zoomAnimated||l.animate===false||this._nothingToAnimate()||Math.abs(m-this._zoom)>this.options.zoomAnimationThreshold){return false}var o=this.getZoomScale(m),n=this._getCenterOffset(k)._divideBy(1-1/o);if(l.animate!==true&&!this.getSize().contains(n)){return false}g.Util.requestAnimFrame(function(){this._moveStart(true)._animateZoom(k,m,true)},this);return true},_animateZoom:function(k,n,l,m){if(l){this._animatingZoom=true;this._animateToCenter=k;this._animateToZoom=n;g.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim")}this.fire("zoomanim",{center:k,zoom:n,noUpdate:m});setTimeout(g.bind(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){if(!this._animatingZoom){return}g.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim");this._animatingZoom=false;this._move(this._animateToCenter,this._animateToZoom);g.Util.requestAnimFrame(function(){this._moveEnd(true)},this)}});g.Map.include({flyTo:function(H,E,p){p=p||{};if(p.animate===false||!g.Browser.any3d){return this.setView(H,E,p)}this._stop();var I=this.project(this.getCenter()),n=this.project(H),G=this.getSize(),v=this._zoom;H=g.latLng(H);E=E===b?v:E;var B=Math.max(G.x,G.y),A=B*this.getZoomScale(v,E),K=(n.distanceTo(I))||1,m=1.42,t=m*m;function F(N){var M=N?-1:1,w=N?A:B,Q=A*A-B*B+M*t*t*K*K,u=2*w*t*K,r=Q/u,P=Math.sqrt(r*r+1)-r;var O=P<1e-9?-18:Math.log(P);return O}function y(r){return(Math.exp(r)-Math.exp(-r))/2}function l(r){return(Math.exp(r)+Math.exp(-r))/2}function o(r){return y(r)/l(r)}var J=F(0);function z(r){return B*(l(J)/l(J+m*r))}function C(r){return B*(l(J)*o(J+m*r)-y(J))/t}function x(r){return 1-Math.pow(1-r,1.5)}var s=Date.now(),q=(F(1)-J)/m,k=p.duration?1000*p.duration:1000*q*0.8;function D(){var r=(Date.now()-s)/k,u=x(r)*q;if(r<=1){this._flyToFrame=g.Util.requestAnimFrame(D,this);this._move(this.unproject(I.add(n.subtract(I).multiplyBy(C(u)/K)),v),this.getScaleZoom(B/z(u),v),{flyTo:true})}else{this._move(H,E)._moveEnd(true)}}this._moveStart(true);D.call(this);return this},flyToBounds:function(l,k){var m=this._getBoundsCenterZoom(l,k);return this.flyTo(m.center,m.zoom,k)}});g.Map.include({_defaultLocateOptions:{timeout:10000,watch:false},locate:function(k){k=this._locateOptions=g.extend({},this._defaultLocateOptions,k);if(!("geolocation" in navigator)){this._handleGeolocationError({code:0,message:"Geolocation not supported."});return this}var m=g.bind(this._handleGeolocationResponse,this),l=g.bind(this._handleGeolocationError,this);if(k.watch){this._locationWatchId=navigator.geolocation.watchPosition(m,l,k)}else{navigator.geolocation.getCurrentPosition(m,l,k)}return this},stopLocate:function(){if(navigator.geolocation&&navigator.geolocation.clearWatch){navigator.geolocation.clearWatch(this._locationWatchId)}if(this._locateOptions){this._locateOptions.setView=false}return this},_handleGeolocationError:function(k){var m=k.code,l=k.message||(m===1?"permission denied":(m===2?"position unavailable":"timeout"));if(this._locateOptions.setView&&!this._loaded){this.fitWorld()}this.fire("locationerror",{code:m,message:"Geolocation error: "+l+"."})},_handleGeolocationResponse:function(p){var o=p.coords.latitude,q=p.coords.longitude,l=new g.LatLng(o,q),k=l.toBounds(p.coords.accuracy),s=this._locateOptions;if(s.setView){var r=this.getBoundsZoom(k);this.setView(l,s.maxZoom?Math.min(r,s.maxZoom):r)}var n={latlng:l,bounds:k,timestamp:p.timestamp};for(var m in p.coords){if(typeof p.coords[m]==="number"){n[m]=p.coords[m]}}this.fire("locationfound",n)}})}(window,document));window.matchMedia||(window.matchMedia=function(){var b=(window.styleMedia||window.media);if(!b){var c=document.createElement("style"),a=document.getElementsByTagName("script")[0],d=null;c.type="text/css";c.id="matchmediajs-test";a.parentNode.insertBefore(c,a);d=("getComputedStyle" in window)&&window.getComputedStyle(c,null)||c.currentStyle;b={matchMedium:function(e){var f="@media "+e+"{ #matchmediajs-test { width: 1px; } }";if(c.styleSheet){c.styleSheet.cssText=f}else{c.textContent=f}return d.width==="1px"}}}return function(e){return{matches:b.matchMedium(e||"all"),media:e||"all"}}}());var GV=GV||{};GV.Models={};GV.Buttons={};GV.Views={};GV.Util=function(){return{getUrlParam:function(b){var a=new RegExp("[\\?&]"+b+"=([^&#]*)").exec(window.location.href);GV.Util.log("GV.Util.getUrlParam");return a?decodeURIComponent(a[1]):null},getUrlParamFromString:function(a,c){var b=new RegExp("[\\?&]"+c+"=([^&#]*)").exec(a);if(!b){return 0}return b[1]||0},log:function(a,d){var b="log";if(!GV.debug){return}switch(d){case 0:b="warn";break;case 1:case 2:b="error";break;default:b="info";break}try{console[b](a)}catch(c){}},msgBox:function(a){window.alert(a)},setUnderscoreTemplate:function(){if(_){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g}}},getXML:function(b,e){var a=b.url,c=b.data,d=b.method;$.ajax({url:a,dataType:(GV.Util.isBrowserIE())?"text":"xml",data:c,method:d||"GET"}).done(function(f){try{var g=f;if(GV.Util.isBrowserIE()){var j=new ActiveXObject("Microsoft.XMLDOM");j.async="false";j.loadXML(f);g=j}e(g)}catch(h){console.log(h)}})},parseXML:function(c){GV.Util.log("GV.Util.parseXML");try{var b=null;if(window.DOMParser&&window.XSLTProcessor){var d=new DOMParser();b=d.parseFromString(c,"text/xml")}else{b=new ActiveXObject("Msxml2.DOMDocument.3.0");b.async=false;b.loadXML(c)}return b}catch(a){throw {name:"xmlTransformation",message:"GV.Util.parseXml: errore parsing xml - "+a.message,level:1}}},isPointInLig:function(b,f){GV.Util.log("GV.Util.isPointInLig");if(!b||!f){return false}var a=7.4,e=43.7,d=10.1,c=44.8;return(b>a)&&(b<d)&&(f>e)&&(f<c)},toArray:function(a){return Array.prototype.slice.call(a)},bind:function(b,a){return function(){return a.apply(b,GV.Util.toArray(arguments))}},getArrayElementByAttribute:function(e,c,d){if(!e){return null}var b,a=e.length;for(b=0;b<a;b++){if(e[b][c]===d){return e[b]}}return null},geoCode:function(a,b,d){var c=new google.maps.Geocoder();c.geocode({address:a},function(h,f){if(f===google.maps.GeocoderStatus.OK){var e=h[0].geometry.location.lng();var k=h[0].geometry.location.lat();var g={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[e,k]},properties:{address:a}}]};if(b){for(var j in b){if(b.hasOwnProperty(j)){g.features[0].properties[j]=b[j]}}}d(g)}else{if(f===google.maps.GeocoderStatus.ZERO_RESULTS){GV.Util.msgBox("Indirizzo '"+a+"' non trovato")}else{console.error("Errore di geocoding: "+f)}}})},getParamString:function(d,a,b){var e=[];for(var c in d){e.push(encodeURIComponent(b?c.toUpperCase():c)+"="+encodeURIComponent(d[c]))}return((!a||a.indexOf("?")===-1)?"?":"&")+e.join("&")},template:function(b,a){var c=/\{ *([\w_\-]+) *\}/g;return b.replace(c,function(f,d){var e=a[d];if(e===undefined){throw new Error("No value provided for variable "+f)}else{if(typeof e==="function"){e=e(a)}}return e})},getZoomFromScaleDenom:function(a){return _.findIndex(GV.Globals.BASE_SCALES,function(b){return a>b})},getScaleLabelsFromZoom:function(a){return GV.Globals.BASE_SCALE_LABELS[a]},getScaleFromZoom:function(a){return GV.Globals.BASE_SCALES[a]},endsWith:function(b,a){return b.indexOf(a,b.length-a.length)!==-1},isTouch:function(){return window.matchMedia("(pointer: coarse)").matches},isBrowserIE:function(){return navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.indexOf("Trident")>0||navigator.userAgent.indexOf("Edge")>0}}}();GV.App=Mn.Application.extend({region:"#gv-container",initialize:function(b){var a=this;GV.app=this;GV.debug=b.debug;this.proxy=b.proxy||GV.Globals.DEFAULT_PROXY;GV.Util.log("GV.App.initialize");GV.Util.log(b);if(!b){GV.debug=true;GV.Util.log("GV.App: Mancano opzioni di configurazione",2);return}GV.rlMaps=new GV.Models.RlMaps();GV.layerFactory=new GV.LayerFactory();this.layout=new GV.Views.Layout(b);this.layout.render(b);GV.map=this.map=this.layout.map;if(b.config&&b.config.maps&&b.config.maps.length>0){_.each(b.config.maps,function(c){GV.rlMaps.add(new GV.Models.RlMap(c))})}if(b.idMap){this.addRlMap(b.idMap,b)}else{if(b&&b.callback){b.callback(a)}}this.start(b)},addRlMap:function(c,b){var a=this;$.ajax({url:GV.Globals.RL_MAP_CONFIG_SERVICE+c,dataType:"jsonp"}).done(function(d){if(!d.success){GV.Util.log("Errore Caricamento Configurazione Mappa: "+d.message,2);return}var e=d.data;GV.rlMaps.add(new GV.Models.RlMap(e));if(b&&b.callback){b.callback(a)}if(e.extent_3857){a.map.setInitialExtent(e.extent_3857)}if(b.setMapTitle&&!GV.Globals.SMALL_SCREEN){GV.app.getContainer().append("<div id='gv-title'>"+e.name+"</div>")}}).fail(function(d,f,e){console.log(e)})},getContainer:function(){return this.getRegion().$el}});var GV=GV||{};GV.Models={};GV.Buttons={};GV.Views={};GV.Globals={DEFAULT_PROXY:"/geoservices/proxy/proxy.jsp?url=",RL_MAP_CONFIG_SERVICE:"http://geoportale.regione.liguria.it/geoservices/REST/config/map/",RL_CREATE_SLD_SERVICE:"http://geoportale.regione.liguria.it/geoservices/REST/config/create_sld/",RL_METADATA_URL:"/geoservices/REST/metadata/scheda_xml/",MAX_BOUNDS:L.latLngBounds(L.latLng(43.730645471447154,7.49958413687701),L.latLng(44.79195177925261,10.06312332907997)),INFO_WMS_MAX_FEATURES:10,SMALL_SCREEN:window.matchMedia("(max-width: 700px)").matches,BASE_SCALES:[591657550.5,295828775.3,147914387.6,73957193.82,36978596.91,18489298.45,9244649.227,4622324.614,2311162.307,1155581.153,577790.5767,288895.2884,144447.6442,72223.82209,36111.91104,18055.95552,9027.977761,4513.98888,2256.99444,1128.49722],BASE_SCALE_LABELS:{8:"1:1.600.000",9:"1:800.000",10:"1:400.000",11:"1:200.000",12:"1:100.000",13:"1:50.000",14:"1:25.000",15:"1:12.500",16:"1:6.250",17:"1:3.125",18:"1:1.560",19:"1:800",20:"1:400"}};GV.InfoWmsManager=function(){return{_requestCount:0,_numRequests:0,_features:[],_numPanels:0,activate:function(a){GV.Util.log("GV.app.infoWmsManager.activate");this.map=a;a.on("click",GV.app.infoWmsManager.request)},buildWMSOptions:function(b,f,c){var g=GV.app.map.latLngToContainerPoint(c,GV.app.map.getZoom()),j=GV.app.map.getSize(),a=GV.app.map.getBounds(),h=GV.app.map.options.crs.project(a.getSouthWest()),e=GV.app.map.options.crs.project(a.getNorthEast());var d={request:"GetFeatureInfo",service:"WMS",crs:"EPSG:3857",styles:"",version:"1.1.0",format:"application/json",bbox:h.x+","+h.y+","+e.x+","+e.y,height:j.y,width:j.x,layers:f,query_layers:f,FEATURE_COUNT:100,buffer:10,info_format:"application/json"};_.extend(d,{});d[d.version==="1.3.0"?"i":"x"]=g.x;d[d.version==="1.3.0"?"j":"y"]=g.y;return GV.app.proxy+b+GV.Util.getParamString(d,b,true)},handleResponse:function(c){GV.app.infoWmsManager._requestCount++;_.each(c,function(f){var e=f.id.split(".")[0];f.layerName=e;f.layer=GV.map.getLayerByName(e);f.label=d(e,f.properties);f.infoOptions=f.layer.config.infoOptions});Array.prototype.push.apply(GV.app.infoWmsManager._features,c);if(GV.app.infoWmsManager._requestCount===GV.app.infoWmsManager._numRequests){this.map._container.style.cursor="default";GV.app.infoWmsList.reset(GV.app.infoWmsManager._features);if(GV.app.infoWmsManager._features.length>1){GV.app.layout.getRegion("infowms").show(new GV.Views.InfoWmsListLayout())}else{$("#gv-info-wms").css({display:"none"});this.showFeatureInfo(GV.app.infoWmsList.models[0])}console.log("end info request",GV.app.infoWmsManager._features,new Date())}function d(g,e){var f,h;f=b(g,"infoLabelAttr");h=b(g,"infoIdAttr");if(f&&e[f]){return e[f]}if(h&&e[h]){return e[h]}return e[a(e)]}function b(f,h){try{var e=GV.map.getLayerByName(f).config;if(e&&e.infoOptions&&e.infoOptions[h]){return e.infoOptions[h]}else{return null}}catch(g){console.log(g);return null}}function a(e){for(var f in e){if(e.hasOwnProperty(f)&&typeof(f)!=="function"){return f}}return null}},showFeatureInfo:function(d){var f=d.attributes.infoOptions,e=f.infoUrl;if(!e||e.toLowerCase().indexOf("cwgetfeatureinfogenerico.xsl")!==-1){}else{if((e.substr(e.length-4)===".xsl")||(e.substr(e.length-5)===".xslt")){c(f,d.attributes)}else{if(!f.infoTarget||f.infoTarget==="panel"){g(e,null,f)}else{a(e,null,f)}}}function c(n,m){var l=j(m);var k={url:"/geoservices/REST/config/xsl_info_service?",data:{xslUrl:n.infoUrl,ambiente:null,idLayer:m.layerName.replace("L",""),featureAttributes:m.properties}};GV.Util.getXML(k,function(q){var p=$(q).find("td").each(function(){if(this.id==="Titolo"){this.textContent=m.layer.legend.label;this.text=m.layer.legend.label}});var o=h(l,q);o=o.replace(new RegExp("%0A","g"),"").replace(new RegExp("%09","g"),"").replace(new RegExp("%20","g"),"");if(!n.infoTarget||n.infoTarget==="panel"){g(o,null,n)}else{a(o,null,n)}});function j(z){try{var y='<?xml version="1.0" encoding="ISO-8859-1"?><msGMLOutput xmlns:gml="http://www.opengis.net/gml" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"></msGMLOutput>',x=GV.Util.parseXML(y),r=z.layerName+"_layer",s=x.createElement(r),w=z.layerName+"_feature",o=x.createElement(w),q=z.properties;for(var u in q){if(q.hasOwnProperty(u)){var v=null;if(q[u]){v=x.createTextNode(q[u])}else{v=x.createTextNode("")}var t=x.createElement(u);t.appendChild(v);o.appendChild(t)}}s.appendChild(o);x.documentElement.appendChild(s);return x}catch(p){console.log(p)}}function h(r,s){try{if(window.XSLTProcessor){var o=new XSLTProcessor();o.importStylesheet(s);var q=o.transformToDocument(r);return(new XMLSerializer()).serializeToString(q)}else{return r.transformNode(s)}}catch(p){console.log(p)}}}function b(l,j){var m=j.infoWidth||400,h=j.infoHeight||300;var n=GV.app.infoWmsManager._numPanels++;var k="gv-info-wms-html-"+n;GV.app.getContainer().append("<div id='"+k+"' class='gv-info-wms-html draggable'></div>");var o="infowms-html-"+n;GV.app.layout.addRegion(o,"#"+k).show(new GV.Views.HtmlPanelLayout({divId:k,regionId:o,html:l,width:m,height:h}))}function g(k,j,h){if(k){b(k,h)}else{}}function a(m,l,k){var n=k.infoWidth||400,h=k.infoHeight||500,j=window.open(l,null,"status=yes, toolbar=yes, menubar=no, width="+n+", height="+h+", resizable=yes, scrollbars=yes");j.document.open();j.document.write(m);j.document.close();j.focus()}},showWaiting:function(){if(!this.map){return}this.map._container.style.cursor="progress"},request:function(b){console.log("start info request",new Date());GV.app.infoWmsManager._requestCount=0;GV.app.infoWmsManager._numRequests=0;GV.app.infoWmsManager._features=[];var a=GV.rlMaps.toJSON();_.each(a,function(c){var d=null,f=[];_.each(c.layers,function(h){if(h.idMap===c.id&&h.type==="WMS"&&h.queryable&&h.visible&&GV.app.map.layerInRange(h)){d=h.wmsParams.url;f.push(h.wmsParams.name)}});var g=f.join(",");if(d&&f.length>0){var e=GV.app.infoWmsManager.buildWMSOptions(d,g,b.latlng);GV.app.infoWmsManager._numRequests++;this._container.style.cursor="progress";$.ajax({url:e,dataType:"json"}).done(function(h){GV.app.infoWmsManager.handleResponse(h.features)})}},this)}}};GV.LayerFactory=function(){var a='<a href="http://www.esri.com/">Esri</a>';return{lastZIndex:11,createPane:function(c,f,d){var b=d.getPane("tilePane");var e=d.createPane(c,b);e.style.zIndex=f;return e},create:function(b,d){if(this[b.type]){var c=this[b.type](b,d);c.legend=b.legend;c.config=b;return c}else{console.log("Layer di tipo "+b.type+" non gestito");return null}},BLANK:function(b,c){b.legend={label:"Sfondo Bianco"};return L.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{opacity:0})},OSM:function(b,c){b.legend={label:"OpenStreetMap"};return L.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data  <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'})},STAMEN_TERRAIN:function(b,c){b.legend={label:"Stamen Terrain"};return L.tileLayer("http://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",minZoom:0,maxZoom:18,ext:"png"})},STAMEN_TONER_LIGHT:function(b,c){b.legend={label:"Stamen Toner Light"};return L.tileLayer("http://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"})},CARTODB_POSITRON:function(b,c){b.legend={label:"CartoDb Positron"};return L.tileLayer("http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',subdomains:"abcd",maxZoom:19})},CARTODB_DARKMATTER:function(b,c){b.legend={label:"CartoDb DarkMatter"};return L.tileLayer("http://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',subdomains:"abcd",maxZoom:19})},OPENMAPSURFER_ROADS:function(b,c){b.legend={label:"OpenMapSurfer Roads"};return L.tileLayer("http://korona.geog.uni-heidelberg.de/tiles/roads/x={x}&y={y}&z={z}",{maxZoom:20,attribution:'Imagery from <a href="http://giscience.uni-hd.de/">GIScience Research Group @ University of Heidelberg</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'})},MAPBOX_STREETS:function(b,c){b.legend={label:"Mapbox Streets"};return L.tileLayer("http://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g",{attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",id:"mapbox.streets",accessToken:"pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g"})},MAPBOX_SATELLITE:function(b,c){b.legend={label:"Mapbox Satellite"};return L.tileLayer("http://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g",{attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",id:"mapbox.satellite",accessToken:"pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g"})},MAPBOX_OUTDOOR:function(b,c){b.legend={label:"Mapox Outdoor"};return L.tileLayer("http://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g",{attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",id:"mapbox.outdoors",accessToken:"pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g"})},MAPBOX_LIGHT:function(b,c){b.legend={label:"Mapox Light"};return L.tileLayer("http://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g",{attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",id:"mapbox.light",accessToken:"pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g"})},HYDDA:function(b,c){b.legend={label:"Hydda"};return L.tileLayer("http://{s}.tile.openstreetmap.se/hydda/full/{z}/{x}/{y}.png",{attribution:'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'})},ESRI_IMAGERY:function(c,d){c.legend={label:"ESRI Imagery"};c.name=c.type;var b="DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community";return L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"&copy; "+a+", "+b,maxZoom:19})},ESRI_STREETS:function(c,d){c.legend={label:"ESRI Streets"};c.name=c.type;var b="USGS, NOAA";return L.tileLayer("http://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"&copy; "+a+", "+b,maxZoom:19})},ESRI_TOPOGRAPHIC:function(c,d){c.legend={label:"ESRI Topographic"};c.name=c.type;var b="USGS, NOAA";return L.tileLayer("http://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"&copy; "+a+", "+b,maxZoom:19})},ESRI_GRAY:function(c,d){c.legend={label:"ESRI Gray"};c.name=c.type;var b="HERE, DeLorme, MapmyIndia, OpenStreetMap contributors";return L.tileLayer("http://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"&copy; "+a+", "+b,maxZoom:16})},ESRI_DARKGRAY:function(c,d){c.legend={label:"ESRI Dark Gray"};c.name=c.type;var b="HERE, DeLorme, MapmyIndia, OpenStreetMap contributors";return L.tileLayer("http://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"&copy; "+a+", "+b,maxZoom:16})},WMS:function(k,c){GV.Util.log("GV.layerFactory - Creazione Layer WMS: "+k.name);GV.Util.log(k);var j=(k.geomType==="VECTOR")?"image/png8":(k.cacheMinZoomLevel)?"image/jpeg":"image/png",b=(k.minScale)?GV.Util.getZoomFromScaleDenom(k.minScale):8,h=(k.maxScale)?GV.Util.getZoomFromScaleDenom(k.maxScale):20,d=k.wmsParams.url,e=k.name,g=k.opacity||1;if(!k.flagGeoserver){k.cacheMinZoomLevel=null;j=(k.geomType==="VECTOR")?"image/png":"image/jpeg"}var l={transparent:true,FORMAT_OPTIONS:"antialias:text",layers:e,format:j,opacity:g,minZoom:b,maxZoom:h,bounds:GV.Globals.MAX_BOUNDS};var f;if(k.cacheMinZoomLevel){_.extend(l,{tiled:true,TILESORIGIN:"-20037508,-20037508",tileSize:256});f=L.tileLayer.wms(d,l)}else{_.extend(l,{tiled:false,pane:"tilePane"});f=L.nonTiledLayer.wms(d,l)}f.setZIndex(k.zIndex);f.type="WMS";f.name=e;return f},JSON:function(o,c){var j=o.data,d=o.url,e=o.name,f=o.wfsParams,l=o.esParams,g=o.classes,r=o.tooltip,b=o.popup,m=o.dataType||"jsonp",n=o.cluster,h=null;var q={};if(g&&g.length>0){if(o.geomSubType==="POINT"){q.pointToLayer=function(s,v){var u;_.each(g,function(w){if(w.filter&&w.filter.key&&w.filter.value){if(s.properties[w.filter.key]===w.filter.value){u=w.style}}else{u=w.style}});if(u.iconUrl){var t;switch(u.iconUrl){case"default":t=L.icon({iconUrl:"http://geoportale.regione.liguria.it/geoviewer2/images/legend/marker-icon.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[0,-41]});break;case"default-small":t=L.icon({iconUrl:"http://geoportale.regione.liguria.it/geoviewer2/images/legend/marker-icon.png",iconSize:[12,20],iconAnchor:[6,10],popupAnchor:[0,-20]});break;default:t=L.icon({iconUrl:u.iconUrl,iconSize:u.iconSize,iconAnchor:u.iconAnchor,popupAnchor:u.popupAnchor})}return L.marker(v,{icon:t})}else{return L.circleMarker(v,u)}}}else{q.style=function(s){var t;_.each(g,function(u){if(u.filter&&u.filter.key&&u.filter.value){if(s.properties[u.filter.key]===u.filter.value){t=u.style}}else{t=u.style}});return t}}q.filter=function(t,s){var u=false;_.each(g,function(v){if(!v.filter){u=true}else{if(v.filter.key&&v.filter.value){if(t.properties[v.filter.key]==v.filter.value){u=true}}}});return u}}if(r||b){q.onEachFeature=function(t,s){if(r){s.options.title=GV.Util.template(r,t.properties)}if(b){s.bindPopup(GV.Util.template(b,t.properties))}}}var k=L.geoJson(j,q);k.name=e;k.setFilter=function(s){k.filter=s;if(s){k.eachLayer(function(t){var u=0;_.each(s,function(v){if(t.feature.properties[v.key]==v.value){u=k.config.opacity||1}});t.setOpacity(u)})}else{k.eachLayer(function(t){var u=k.config.opacity||1;t.setOpacity(u)})}};if(f&&f.typeName&&f.url){var p={service:"WFS",version:"2.0.0",request:"GetFeature",srsName:"EPSG:4326",outputFormat:"text/javascript",format_options:"callback: getJson",typeName:f.typeName};d=f.url+GV.Util.getParamString(p);m="jsonp"}if(l){var p={};if(l.field){p.q=l.field+":";if(l.query){p.q+=l.query}else{p.q+="*"}}else{if(l.query){p.q=l.query}}p.pretty="true";p.size=100000;d=GV.app.proxy+l.url+GV.Util.getParamString(p);m="json"}if(d){$.ajax({url:d,dataType:m,jsonpCallback:"getJson",success:function(v){var s=v;if(l){var t=l.geomField||"location";var u=v.hits.hits;s={type:"FeatureCollection",totalFeatures:v.hits.total,features:[],crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4326"}}};_.each(u,function(w){var x=w._source[t];s.features.push({type:"Feature",id:w._id,geometry:{type:"Point",coordinates:x},geometry_name:"GEOMETRY",properties:w._source})})}k.addData(s);if(n){h.addLayer(k)}}})}if(n){var q={showCoverageOnHover:false};if(n.options){_.extend(q,n.options)}h=L.markerClusterGroup(q);return h}return k}}};GV.Map=L.Map.extend({rlMaps:[],layers:[],baseLayers:[],initialExtent:[],mapOptions:{zoomControl:false,maxBounds:GV.Globals.MAX_BOUNDS,maxBoundsViscosity:1,minZoom:7},initialize:function(a){this.setMapOptions(a);L.Map.prototype.initialize.call(this,"gv-map",_.extend(L.Map.prototype.options,this.mapOptions));this.setInitialExtent();this.setLayersInRange();this.setLoading()},setMapOptions:function(a){if(a.config.application&&a.config.application.layout&&a.config.application.mapOptions){_.extend(this.mapOptions,a.config.application.mapOptions)}},setInitialExtent:function(){var b=this.mapOptions.initialExtent||"830036,5402959,1123018,5597635";var d=b.split(",");var c=L.point(d[0],d[1]);var f=L.point(d[2],d[3]);var a=L.Projection.SphericalMercator.unproject(c);var e=L.Projection.SphericalMercator.unproject(f);this.initialExtent=L.latLngBounds(a,e);this.fitBounds(this.initialExtent)},setLayersInRange:function(){this.on("zoom",function(){var a=GV.rlMaps.getAllLayersConfig();_.each(a,function(b){GV.rlMaps.setLayerAttribute(b.name,"inRange",this.layerInRange(b))},this)})},setLayerVisible:function(a,b){if(b){this.loadLayers([a])}else{this.removeLayer(this.getLayerByName(a.name))}},layerInRange:function(a){if(!a.minScale&&!a.minScale){return true}return(this.getScale()<a.minScale&&this.getScale()>a.maxScale)},loadControls:function(b){if(b.config.application&&b.config.application.layout&&b.config.application.layout.controls){var a=b.config.application.layout.controls;var c;this.controls={};_.each(a,function(d){switch(d.name){case"scaleControl":c=L.control.scale({imperial:false}).addTo(this);this.controls[d]=c;break}},this)}},loadBaseLayers:function(a){_.each(a,function(b){var c=GV.layerFactory.create(b,this);this.baseLayers[c.config.legend.label]=c;if(c&&b.visible){c.on("loading",function(){this.loading(true,c)},this);c.on("load",function(){this.loading(false,c)},this);c.addTo(this)}},this)},loadLayers:function(a){_.each(a,function(b){if(!this.getLayerByName(b.name)){var c=GV.layerFactory.create(b,this);if(c&&b.visible){c.on("loading",function(){this.loading(true,c)},this);c.on("load",function(){this.loading(false,c)},this);c.addTo(this)}}},this)},getLayerByName:function(b){var a=null;this.eachLayer(function(c){if(c.config&&c.config.name&&c.config.name===b){a=c}});return a},getScaleLabel:function(){return GV.Util.getScaleLabelsFromZoom(this._zoom)},getScale:function(){return GV.Util.getScaleFromZoom(this._zoom)},setLoading:function(){this._spinning=0;this.on("layerremove",function(a){if(a.layer.loading){this.loading(false)}if(typeof a.layer.on!="function"){return}a.layer.off("load");a.layer.off("loading")},this)},loading:function(b,a){if(!!b){if(this._spinning===0){console.log("start load: "+a.config.name,new Date());this._container.style.cursor="progress"}this._spinning++}else{this._spinning--;if(this._spinning<=0){console.log("end load: "+a.config.name,new Date());this._container.style.cursor="default"}}}});(function(b,a,c){L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,spiderfyOnMaxZoom:true,showCoverageOnHover:true,zoomToBoundsOnClick:true,singleMarkerMode:false,disableClusteringAtZoom:null,removeOutsideVisibleBounds:true,animate:true,animateAddingMarkers:false,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:0.5},chunkedLoading:false,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(e){L.Util.setOptions(this,e);if(!this.options.iconCreateFunction){this.options.iconCreateFunction=this._defaultIconCreateFunction}this._featureGroup=L.featureGroup();this._featureGroup.addEventParent(this);this._nonPointGroup=L.featureGroup();this._nonPointGroup.addEventParent(this);this._inZoomAnimation=0;this._needsClustering=[];this._needsRemoving=[];this._currentShownBounds=null;this._queue=[];var d=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,d?this._withAnimation:this._noAnimation);this._markerCluster=d?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(f){if(f instanceof L.LayerGroup){return this.addLayers([f])}if(!f.getLatLng){this._nonPointGroup.addLayer(f);return this}if(!this._map){this._needsClustering.push(f);return this}if(this.hasLayer(f)){return this}if(this._unspiderfy){this._unspiderfy()}this._addLayer(f,this._maxZoom);this._topClusterLevel._recalculateBounds();var d=f,e=this._map.getZoom();if(f.__parent){while(d.__parent._zoom>=e){d=d.__parent}}if(this._currentShownBounds.contains(d.getLatLng())){if(this.options.animateAddingMarkers){this._animationAddLayer(f,d)}else{this._animationAddLayerNonAnimated(f,d)}}return this},removeLayer:function(d){if(d instanceof L.LayerGroup){return this.removeLayers([d])}if(!d.getLatLng){this._nonPointGroup.removeLayer(d);return this}if(!this._map){if(!this._arraySplice(this._needsClustering,d)&&this.hasLayer(d)){this._needsRemoving.push(d)}return this}if(!d.__parent){return this}if(this._unspiderfy){this._unspiderfy();this._unspiderfyLayer(d)}this._removeLayer(d,true);this._topClusterLevel._recalculateBounds();d.off("move",this._childMarkerMoved,this);if(this._featureGroup.hasLayer(d)){this._featureGroup.removeLayer(d);if(d.clusterShow){d.clusterShow()}}return this},addLayers:function(h){if(!L.Util.isArray(h)){return this.addLayer(h)}var e=this._featureGroup,n=this._nonPointGroup,p=this.options.chunkedLoading,o=this.options.chunkInterval,r=this.options.chunkProgress,j=h.length,k=0,q=true,g;if(this._map){var s=(new Date()).getTime();var f=L.bind(function(){var u=(new Date()).getTime();for(;k<j;k++){if(p&&k%200===0){var l=(new Date()).getTime()-u;if(l>o){break}}g=h[k];if(g instanceof L.LayerGroup){if(q){h=h.slice();q=false}this._extractNonGroupLayers(g,h);j=h.length;continue}if(!g.getLatLng){n.addLayer(g);continue}if(this.hasLayer(g)){continue}this._addLayer(g,this._maxZoom);if(g.__parent){if(g.__parent.getChildCount()===2){var t=g.__parent.getAllChildMarkers(),m=t[0]===g?t[1]:t[0];e.removeLayer(m)}}}if(r){r(k,j,(new Date()).getTime()-s)}if(k===j){this._topClusterLevel._recalculateBounds();this._featureGroup.eachLayer(function(v){if(v instanceof L.MarkerCluster&&v._iconNeedsUpdate){v._updateIcon()}});this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)}else{setTimeout(f,this.options.chunkDelay)}},this);f()}else{var d=this._needsClustering;for(;k<j;k++){g=h[k];if(g instanceof L.LayerGroup){if(q){h=h.slice();q=false}this._extractNonGroupLayers(g,h);j=h.length;continue}if(!g.getLatLng){n.addLayer(g);continue}if(this.hasLayer(g)){continue}d.push(g)}}return this},removeLayers:function(g){var j,f,h=g.length,d=this._featureGroup,k=this._nonPointGroup,n=true;if(!this._map){for(j=0;j<h;j++){f=g[j];if(f instanceof L.LayerGroup){if(n){g=g.slice();n=false}this._extractNonGroupLayers(f,g);h=g.length;continue}this._arraySplice(this._needsClustering,f);k.removeLayer(f);if(this.hasLayer(f)){this._needsRemoving.push(f)}}return this}if(this._unspiderfy){this._unspiderfy();var o=g.slice(),e=h;for(j=0;j<e;j++){f=o[j];if(f instanceof L.LayerGroup){this._extractNonGroupLayers(f,o);e=o.length;continue}this._unspiderfyLayer(f)}}for(j=0;j<h;j++){f=g[j];if(f instanceof L.LayerGroup){if(n){g=g.slice();n=false}this._extractNonGroupLayers(f,g);h=g.length;continue}if(!f.__parent){k.removeLayer(f);continue}this._removeLayer(f,true,true);if(d.hasLayer(f)){d.removeLayer(f);if(f.clusterShow){f.clusterShow()}}}this._topClusterLevel._recalculateBounds();this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds);d.eachLayer(function(l){if(l instanceof L.MarkerCluster){l._updateIcon()}});return this},clearLayers:function(){if(!this._map){this._needsClustering=[];delete this._gridClusters;delete this._gridUnclustered}if(this._noanimationUnspiderfy){this._noanimationUnspiderfy()}this._featureGroup.clearLayers();this._nonPointGroup.clearLayers();this.eachLayer(function(d){d.off("move",this._childMarkerMoved,this);delete d.__parent});if(this._map){this._generateInitialClusters()}return this},getBounds:function(){var e=new L.LatLngBounds();if(this._topClusterLevel){e.extend(this._topClusterLevel._bounds)}for(var d=this._needsClustering.length-1;d>=0;d--){e.extend(this._needsClustering[d].getLatLng())}e.extend(this._nonPointGroup.getBounds());return e},eachLayer:function(h,f){var g=this._needsClustering.slice(),d=this._needsRemoving,e;if(this._topClusterLevel){this._topClusterLevel.getAllChildMarkers(g)}for(e=g.length-1;e>=0;e--){if(d.indexOf(g[e])===-1){h.call(f,g[e])}}this._nonPointGroup.eachLayer(h,f)},getLayers:function(){var d=[];this.eachLayer(function(e){d.push(e)});return d},getLayer:function(e){var d=null;e=parseInt(e,10);this.eachLayer(function(f){if(L.stamp(f)===e){d=f}});return d},hasLayer:function(e){if(!e){return false}var d,f=this._needsClustering;for(d=f.length-1;d>=0;d--){if(f[d]===e){return true}}f=this._needsRemoving;for(d=f.length-1;d>=0;d--){if(f[d]===e){return false}}return !!(e.__parent&&e.__parent._group===this)||this._nonPointGroup.hasLayer(e)},zoomToShowLayer:function(e,g){if(typeof g!=="function"){g=function(){}}var f=function(){if((e._icon||e.__parent._icon)&&!this._inZoomAnimation){this._map.off("moveend",f,this);this.off("animationend",f,this);if(e._icon){g()}else{if(e.__parent._icon){this.once("spiderfied",g,this);e.__parent.spiderfy()}}}};if(e._icon&&this._map.getBounds().contains(e.getLatLng())){g()}else{if(e.__parent._zoom<this._map.getZoom()){this._map.on("moveend",f,this);this._map.panTo(e.getLatLng())}else{var d=function(){this._map.off("movestart",d,this);d=null};this._map.on("movestart",d,this);this._map.on("moveend",f,this);this.on("animationend",f,this);e.__parent.zoomToBounds();if(d){f.call(this)}}}},onAdd:function(g){this._map=g;var f,d,e;if(!isFinite(this._map.getMaxZoom())){throw"Map has no maxZoom specified"}this._featureGroup.addTo(g);this._nonPointGroup.addTo(g);if(!this._gridClusters){this._generateInitialClusters()}this._maxLat=g.options.crs.projection.MAX_LATITUDE;for(f=0,d=this._needsRemoving.length;f<d;f++){e=this._needsRemoving[f];this._removeLayer(e,true)}this._needsRemoving=[];this._zoom=this._map.getZoom();this._currentShownBounds=this._getExpandedVisibleBounds();this._map.on("zoomend",this._zoomEnd,this);this._map.on("moveend",this._moveEnd,this);if(this._spiderfierOnAdd){this._spiderfierOnAdd()}this._bindEvents();d=this._needsClustering;this._needsClustering=[];this.addLayers(d)},onRemove:function(d){d.off("zoomend",this._zoomEnd,this);d.off("moveend",this._moveEnd,this);this._unbindEvents();this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","");if(this._spiderfierOnRemove){this._spiderfierOnRemove()}delete this._maxLat;this._hideCoverage();this._featureGroup.remove();this._nonPointGroup.remove();this._featureGroup.clearLayers();this._map=null},getVisibleParent:function(d){var e=d;while(e&&!e._icon){e=e.__parent}return e||null},_arraySplice:function(e,f){for(var d=e.length-1;d>=0;d--){if(e[d]===f){e.splice(d,1);return true}}},_removeFromGridUnclustered:function(d,g){var f=this._map,e=this._gridUnclustered;for(;g>=0;g--){if(!e[g].removeObject(d,f.project(d.getLatLng(),g))){break}}},_childMarkerMoved:function(d){if(!this._ignoreMove){d.target._latlng=d.oldLatLng;this.removeLayer(d.target);d.target._latlng=d.latlng;this.addLayer(d.target)}},_removeLayer:function(k,g,l){var h=this._gridClusters,f=this._gridUnclustered,d=this._featureGroup,e=this._map;if(g){this._removeFromGridUnclustered(k,this._maxZoom)}var m=k.__parent,j=m._markers,n;this._arraySplice(j,k);while(m){m._childCount--;m._boundsNeedUpdate=true;if(m._zoom<0){break}else{if(g&&m._childCount<=1){n=m._markers[0]===k?m._markers[1]:m._markers[0];h[m._zoom].removeObject(m,e.project(m._cLatLng,m._zoom));f[m._zoom].addObject(n,e.project(n.getLatLng(),m._zoom));this._arraySplice(m.__parent._childClusters,m);m.__parent._markers.push(n);n.__parent=m.__parent;if(m._icon){d.removeLayer(m);if(!l){d.addLayer(n)}}}else{if(!l||!m._icon){m._updateIcon()}}}m=m.__parent}delete k.__parent},_isOrIsParent:function(e,d){while(d){if(e===d){return true}d=d.parentNode}return false},fire:function(e,f,d){if(f&&f.layer instanceof L.MarkerCluster){if(f.originalEvent&&this._isOrIsParent(f.layer._icon,f.originalEvent.relatedTarget)){return}e="cluster"+e}L.FeatureGroup.prototype.fire.call(this,e,f,d)},listens:function(e,d){return L.FeatureGroup.prototype.listens.call(this,e,d)||L.FeatureGroup.prototype.listens.call(this,"cluster"+e,d)},_defaultIconCreateFunction:function(d){var e=d.getChildCount();var f=" marker-cluster-";if(e<10){f+="small"}else{if(e<100){f+="medium"}else{f+="large"}}return new L.DivIcon({html:"<div><span>"+e+"</span></div>",className:"marker-cluster"+f,iconSize:new L.Point(40,40)})},_bindEvents:function(){var g=this._map,e=this.options.spiderfyOnMaxZoom,d=this.options.showCoverageOnHover,f=this.options.zoomToBoundsOnClick;if(e||f){this.on("clusterclick",this._zoomOrSpiderfy,this)}if(d){this.on("clustermouseover",this._showCoverage,this);this.on("clustermouseout",this._hideCoverage,this);g.on("zoomend",this._hideCoverage,this)}},_zoomOrSpiderfy:function(g){var d=g.layer,f=d;while(f._childClusters.length===1){f=f._childClusters[0]}if(f._zoom===this._maxZoom&&f._childCount===d._childCount&&this.options.spiderfyOnMaxZoom){d.spiderfy()}else{if(this.options.zoomToBoundsOnClick){d.zoomToBounds()}}if(g.originalEvent&&g.originalEvent.keyCode===13){this._map._container.focus()}},_showCoverage:function(f){var d=this._map;if(this._inZoomAnimation){return}if(this._shownPolygon){d.removeLayer(this._shownPolygon)}if(f.layer.getChildCount()>2&&f.layer!==this._spiderfied){this._shownPolygon=new L.Polygon(f.layer.getConvexHull(),this.options.polygonOptions);d.addLayer(this._shownPolygon)}},_hideCoverage:function(){if(this._shownPolygon){this._map.removeLayer(this._shownPolygon);this._shownPolygon=null}},_unbindEvents:function(){var e=this.options.spiderfyOnMaxZoom,d=this.options.showCoverageOnHover,g=this.options.zoomToBoundsOnClick,f=this._map;if(e||g){this.off("clusterclick",this._zoomOrSpiderfy,this)}if(d){this.off("clustermouseover",this._showCoverage,this);this.off("clustermouseout",this._hideCoverage,this);f.off("zoomend",this._hideCoverage,this)}},_zoomEnd:function(){if(!this._map){return}this._mergeSplitClusters();this._zoom=Math.round(this._map._zoom);this._currentShownBounds=this._getExpandedVisibleBounds()},_moveEnd:function(){if(this._inZoomAnimation){return}var d=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,d);this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),d);this._currentShownBounds=d;return},_generateInitialClusters:function(){var e=this._map.getMaxZoom(),d=this.options.maxClusterRadius,f=d;if(typeof d!=="function"){f=function(){return d}}if(this.options.disableClusteringAtZoom){e=this.options.disableClusteringAtZoom-1}this._maxZoom=e;this._gridClusters={};this._gridUnclustered={};for(var g=e;g>=0;g--){this._gridClusters[g]=new L.DistanceGrid(f(g));this._gridUnclustered[g]=new L.DistanceGrid(f(g))}this._topClusterLevel=new this._markerCluster(this,-1)},_addLayer:function(h,n){var f=this._gridClusters,d=this._gridUnclustered,m,j;if(this.options.singleMarkerMode){this._overrideMarkerIcon(h)}h.on("move",this._childMarkerMoved,this);for(;n>=0;n--){m=this._map.project(h.getLatLng(),n);var e=f[n].getNearObject(m);if(e){e._addChild(h);h.__parent=e;return}e=d[n].getNearObject(m);if(e){var k=e.__parent;if(k){this._removeLayer(e,false)}var l=new this._markerCluster(this,n,e,h);f[n].addObject(l,this._map.project(l._cLatLng,n));e.__parent=l;h.__parent=l;var g=l;for(j=n-1;j>k._zoom;j--){g=new this._markerCluster(this,j,g);f[j].addObject(g,this._map.project(e.getLatLng(),j))}k._addChild(g);this._removeFromGridUnclustered(e,n);return}d[n].addObject(h,m)}this._topClusterLevel._addChild(h);h.__parent=this._topClusterLevel;return},_enqueue:function(d){this._queue.push(d);if(!this._queueTimeout){this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300)}},_processQueue:function(){for(var d=0;d<this._queue.length;d++){this._queue[d].call(this)}this._queue.length=0;clearTimeout(this._queueTimeout);this._queueTimeout=null},_mergeSplitClusters:function(){var d=Math.round(this._map._zoom);this._processQueue();if(this._zoom<d&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())){this._animationStart();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,this._getExpandedVisibleBounds());this._animationZoomIn(this._zoom,d)}else{if(this._zoom>d){this._animationStart();this._animationZoomOut(this._zoom,d)}else{this._moveEnd()}}},_getExpandedVisibleBounds:function(){if(!this.options.removeOutsideVisibleBounds){return this._mapBoundsInfinite}else{if(L.Browser.mobile){return this._checkBoundsMaxLat(this._map.getBounds())}}return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(d){var e=this._maxLat;if(e!==c){if(d.getNorth()>=e){d._northEast.lat=Infinity}if(d.getSouth()<=-e){d._southWest.lat=-Infinity}}return d},_animationAddLayerNonAnimated:function(d,e){if(e===d){this._featureGroup.addLayer(d)}else{if(e._childCount===2){e._addToMap();var f=e.getAllChildMarkers();this._featureGroup.removeLayer(f[0]);this._featureGroup.removeLayer(f[1])}else{e._updateIcon()}}},_extractNonGroupLayers:function(h,d){var g=h.getLayers(),f=0,e;d=d||[];for(;f<g.length;f++){e=g[f];if(e instanceof L.LayerGroup){this._extractNonGroupLayers(e,d);continue}d.push(e)}return d},_overrideMarkerIcon:function(d){var e=d.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[d]}});return e}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-Infinity,-Infinity),new L.LatLng(Infinity,Infinity))});L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(e,d){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,e);this._topClusterLevel._recursivelyAddChildrenToMap(null,d,this._getExpandedVisibleBounds());this.fire("animationend")},_animationZoomOut:function(e,d){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,e);this._topClusterLevel._recursivelyAddChildrenToMap(null,d,this._getExpandedVisibleBounds());this.fire("animationend")},_animationAddLayer:function(d,e){this._animationAddLayerNonAnimated(d,e)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim";this._inZoomAnimation++},_animationZoomIn:function(h,f){var g=this._getExpandedVisibleBounds(),d=this._featureGroup,e;this._ignoreMove=true;this._topClusterLevel._recursively(g,h,0,function(n){var k=n._latlng,l=n._markers,j;if(!g.contains(k)){k=null}if(n._isSingleParent()&&h+1===f){d.removeLayer(n);n._recursivelyAddChildrenToMap(null,f,g)}else{n.clusterHide();n._recursivelyAddChildrenToMap(k,f,g)}for(e=l.length-1;e>=0;e--){j=l[e];if(!g.contains(j._latlng)){d.removeLayer(j)}}});this._forceLayout();this._topClusterLevel._recursivelyBecomeVisible(g,f);d.eachLayer(function(j){if(!(j instanceof L.MarkerCluster)&&j._icon){j.clusterShow()}});this._topClusterLevel._recursively(g,h,f,function(j){j._recursivelyRestoreChildPositions(f)});this._ignoreMove=false;this._enqueue(function(){this._topClusterLevel._recursively(g,h,0,function(j){d.removeLayer(j);j.clusterShow()});this._animationEnd()})},_animationZoomOut:function(e,d){this._animationZoomOutSingle(this._topClusterLevel,e-1,d);this._topClusterLevel._recursivelyAddChildrenToMap(null,d,this._getExpandedVisibleBounds());this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,e,this._getExpandedVisibleBounds())},_animationAddLayer:function(e,g){var f=this,d=this._featureGroup;d.addLayer(e);if(g!==e){if(g._childCount>2){g._updateIcon();this._forceLayout();this._animationStart();e._setPos(this._map.latLngToLayerPoint(g.getLatLng()));e.clusterHide();this._enqueue(function(){d.removeLayer(e);e.clusterShow();f._animationEnd()})}else{this._forceLayout();f._animationStart();f._animationZoomOutSingle(g,this._map.getMaxZoom(),this._map.getZoom())}}}},_animationZoomOutSingle:function(d,h,e){var g=this._getExpandedVisibleBounds();d._recursivelyAnimateChildrenInAndAddSelfToMap(g,h+1,e);var f=this;this._forceLayout();d._recursivelyBecomeVisible(g,e);this._enqueue(function(){if(d._childCount===1){var j=d._markers[0];this._ignoreMove=true;j.setLatLng(j.getLatLng());this._ignoreMove=false;if(j.clusterShow){j.clusterShow()}}else{d._recursively(g,e,0,function(k){k._recursivelyRemoveChildrenFromMap(g,h+1)})}f._animationEnd()})},_animationEnd:function(){if(this._map){this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")}this._inZoomAnimation--;this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(a.body.offsetWidth)}});L.markerClusterGroup=function(d){return new L.MarkerClusterGroup(d)};L.MarkerCluster=L.Marker.extend({initialize:function(g,f,e,d){L.Marker.prototype.initialize.call(this,e?(e._cLatLng||e.getLatLng()):new L.LatLng(0,0),{icon:this});this._group=g;this._zoom=f;this._markers=[];this._childClusters=[];this._childCount=0;this._iconNeedsUpdate=true;this._boundsNeedUpdate=true;this._bounds=new L.LatLngBounds();if(e){this._addChild(e)}if(d){this._addChild(d)}},getAllChildMarkers:function(f){f=f||[];for(var e=this._childClusters.length-1;e>=0;e--){this._childClusters[e].getAllChildMarkers(f)}for(var d=this._markers.length-1;d>=0;d--){f.push(this._markers[d])}return f},getChildCount:function(){return this._childCount},zoomToBounds:function(){var g=this._childClusters.slice(),k=this._group._map,j=k.getBoundsZoom(this._bounds),f=this._zoom+1,h=k.getZoom(),e;while(g.length>0&&j>f){f++;var d=[];for(e=0;e<g.length;e++){d=d.concat(g[e]._childClusters)}g=d}if(j>f){this._group._map.setView(this._latlng,f)}else{if(j<=h){this._group._map.setView(this._latlng,h+1)}else{this._group._map.fitBounds(this._bounds)}}},getBounds:function(){var d=new L.LatLngBounds();d.extend(this._bounds);return d},_updateIcon:function(){this._iconNeedsUpdate=true;if(this._icon){this.setIcon(this)}},createIcon:function(){if(this._iconNeedsUpdate){this._iconObj=this._group.options.iconCreateFunction(this);this._iconNeedsUpdate=false}return this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(d,e){this._iconNeedsUpdate=true;this._boundsNeedUpdate=true;this._setClusterCenter(d);if(d instanceof L.MarkerCluster){if(!e){this._childClusters.push(d);d.__parent=this}this._childCount+=d._childCount}else{if(!e){this._markers.push(d)}this._childCount++}if(this.__parent){this.__parent._addChild(d,true)}},_setClusterCenter:function(d){if(!this._cLatLng){this._cLatLng=d._cLatLng||d._latlng}},_resetBounds:function(){var d=this._bounds;if(d._southWest){d._southWest.lat=Infinity;d._southWest.lng=Infinity}if(d._northEast){d._northEast.lat=-Infinity;d._northEast.lng=-Infinity}},_recalculateBounds:function(){var h=this._markers,l=this._childClusters,d=0,f=0,m=this._childCount,j,e,k,g;if(m===0){return}this._resetBounds();for(j=0;j<h.length;j++){k=h[j]._latlng;this._bounds.extend(k);d+=k.lat;f+=k.lng}for(j=0;j<l.length;j++){e=l[j];if(e._boundsNeedUpdate){e._recalculateBounds()}this._bounds.extend(e._bounds);k=e._wLatLng;g=e._childCount;d+=k.lat*g;f+=k.lng*g}this._latlng=this._wLatLng=new L.LatLng(d/m,f/m);this._boundsNeedUpdate=false},_addToMap:function(d){if(d){this._backupLatlng=this._latlng;this.setLatLng(d)}this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(f,d,e){this._recursively(f,0,e-1,function(k){var j=k._markers,h,g;for(h=j.length-1;h>=0;h--){g=j[h];if(g._icon){g._setPos(d);g.clusterHide()}}},function(l){var k=l._childClusters,h,g;for(h=k.length-1;h>=0;h--){g=k[h];if(g._icon){g._setPos(d);g.clusterHide()}}})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(f,e,d){this._recursively(f,d,0,function(g){g._recursivelyAnimateChildrenIn(f,g._group._map.latLngToLayerPoint(g.getLatLng()).round(),e);if(g._isSingleParent()&&e-1===d){g.clusterShow();g._recursivelyRemoveChildrenFromMap(f,e)}else{g.clusterHide()}g._addToMap()})},_recursivelyBecomeVisible:function(d,e){this._recursively(d,0,e,null,function(f){f.clusterShow()})},_recursivelyAddChildrenToMap:function(d,f,e){this._recursively(e,-1,f,function(j){if(f===j._zoom){return}for(var h=j._markers.length-1;h>=0;h--){var g=j._markers[h];if(!e.contains(g._latlng)){continue}if(d){g._backupLatlng=g.getLatLng();g.setLatLng(d);if(g.clusterHide){g.clusterHide()}}j._group._featureGroup.addLayer(g)}},function(g){g._addToMap(d)})},_recursivelyRestoreChildPositions:function(h){for(var g=this._markers.length-1;g>=0;g--){var d=this._markers[g];if(d._backupLatlng){d.setLatLng(d._backupLatlng);delete d._backupLatlng}}if(h-1===this._zoom){for(var f=this._childClusters.length-1;f>=0;f--){this._childClusters[f]._restorePosition()}}else{for(var e=this._childClusters.length-1;e>=0;e--){this._childClusters[e]._recursivelyRestoreChildPositions(h)}}},_restorePosition:function(){if(this._backupLatlng){this.setLatLng(this._backupLatlng);delete this._backupLatlng}},_recursivelyRemoveChildrenFromMap:function(e,h,g){var d,f;this._recursively(e,-1,h-1,function(j){for(f=j._markers.length-1;f>=0;f--){d=j._markers[f];if(!g||!g.contains(d._latlng)){j._group._featureGroup.removeLayer(d);if(d.clusterShow){d.clusterShow()}}}},function(j){for(f=j._childClusters.length-1;f>=0;f--){d=j._childClusters[f];if(!g||!g.contains(d._latlng)){j._group._featureGroup.removeLayer(d);if(d.clusterShow){d.clusterShow()}}}})},_recursively:function(k,j,f,d,g){var h=this._childClusters,m=this._zoom,e,l;if(j>m){for(e=h.length-1;e>=0;e--){l=h[e];if(k.intersects(l._bounds)){l._recursively(k,j,f,d,g)}}}else{if(d){d(this)}if(g&&this._zoom===f){g(this)}if(f>m){for(e=h.length-1;e>=0;e--){l=h[e];if(k.intersects(l._bounds)){l._recursively(k,j,f,d,g)}}}}},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){this.options.opacityWhenUnclustered=this.options.opacity||1;return this.setOpacity(0)},clusterShow:function(){var d=this.setOpacity(this.options.opacity||this.options.opacityWhenUnclustered);delete this.options.opacityWhenUnclustered;return d}});L.DistanceGrid=function(d){this._cellSize=d;this._sqCellSize=d*d;this._grid={};this._objectPoint={}};L.DistanceGrid.prototype={addObject:function(j,f){var e=this._getCoord(f.x),l=this._getCoord(f.y),h=this._grid,k=h[l]=h[l]||{},d=k[e]=k[e]||[],g=L.Util.stamp(j);this._objectPoint[g]=f;d.push(j)},updateObject:function(e,d){this.removeObject(e);this.addObject(e,d)},removeObject:function(e,k){var j=this._getCoord(k.x),h=this._getCoord(k.y),d=this._grid,m=d[h]=d[h]||{},l=m[j]=m[j]||[],f,g;delete this._objectPoint[L.Util.stamp(e)];for(f=0,g=l.length;f<g;f++){if(l[f]===e){l.splice(f,1);if(g===1){delete m[j]}return true}}},eachObject:function(n,e){var h,g,f,m,p,o,l,d=this._grid;for(h in d){p=d[h];for(g in p){o=p[g];for(f=0,m=o.length;f<m;f++){l=n.call(e,o[f]);if(l){f--;m--}}}}},getNearObject:function(q){var p=this._getCoord(q.x),o=this._getCoord(q.y),h,f,e,t,s,l,g,n,r=this._objectPoint,m=this._sqCellSize,d=null;for(h=o-1;h<=o+1;h++){t=this._grid[h];if(t){for(f=p-1;f<=p+1;f++){s=t[f];if(s){for(e=0,l=s.length;e<l;e++){g=s[e];n=this._sqDist(r[L.Util.stamp(g)],q);if(n<m){m=n;d=g}}}}}}return d},_getCoord:function(d){return Math.floor(d/this._cellSize)},_sqDist:function(g,f){var e=f.x-g.x,d=f.y-g.y;return e*e+d*d}};(function(){L.QuickHull={getDistant:function(f,g){var d=g[1].lat-g[0].lat,e=g[0].lng-g[1].lng;return(e*(f.lat-g[0].lat)+d*(f.lng-g[0].lng))},findMostDistantPointFromBaseLine:function(f,l){var j=0,e=null,h=[],g,k,m;for(g=l.length-1;g>=0;g--){k=l[g];m=this.getDistant(k,f);if(m>0){h.push(k)}else{continue}if(m>j){j=m;e=k}}return{maxPoint:e,newPoints:h}},buildConvexHull:function(d,g){var f=[],e=this.findMostDistantPointFromBaseLine(d,g);if(e.maxPoint){f=f.concat(this.buildConvexHull([d[0],e.maxPoint],e.newPoints));f=f.concat(this.buildConvexHull([e.maxPoint,d[1]],e.newPoints));return f}else{return[d[0]]}},getConvexHull:function(j){var o=false,g=false,p=false,k=false,l=null,q=null,f=null,h=null,n=null,e=null,m;for(m=j.length-1;m>=0;m--){var r=j[m];if(o===false||r.lat>o){l=r;o=r.lat}if(g===false||r.lat<g){q=r;g=r.lat}if(p===false||r.lng>p){f=r;p=r.lng}if(k===false||r.lng<k){h=r;k=r.lng}}if(g!==o){e=q;n=l}else{e=h;n=f}var d=[].concat(this.buildConvexHull([e,n],j),this.buildConvexHull([n,e],j));return d}}}());L.MarkerCluster.include({getConvexHull:function(){var g=this.getAllChildMarkers(),e=[],f,d;for(d=g.length-1;d>=0;d--){f=g[d].getLatLng();e.push(f)}return L.QuickHull.getConvexHull(e)}});L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:Math.PI/6,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied===this||this._group._inZoomAnimation){return}var h=this.getAllChildMarkers(),g=this._group,f=g._map,d=f.latLngToLayerPoint(this._latlng),e;this._group._unspiderfy();this._group._spiderfied=this;if(h.length>=this._circleSpiralSwitchover){e=this._generatePointsSpiral(h.length,d)}else{d.y+=10;e=this._generatePointsCircle(h.length,d)}this._animationSpiderfy(h,e)},unspiderfy:function(d){if(this._group._inZoomAnimation){return}this._animationUnspiderfy(d);this._group._spiderfied=null},_generatePointsCircle:function(h,l){var d=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+h),j=d/this._2PI,g=this._2PI/h,f=[],e,k;f.length=h;for(e=h-1;e>=0;e--){k=this._circleStartAngle+e*g;f[e]=new L.Point(l.x+j*Math.cos(k),l.y+j*Math.sin(k))._round()}return f},_generatePointsSpiral:function(j,d){var m=this._group.options.spiderfyDistanceMultiplier,l=m*this._spiralLengthStart,f=m*this._spiralFootSeparation,g=m*this._spiralLengthFactor*this._2PI,e=0,k=[],h;k.length=j;for(h=j-1;h>=0;h--){e+=f/l+h*0.0005;k[h]=new L.Point(d.x+l*Math.cos(e),d.y+l*Math.sin(e))._round();l+=g/e}return k},_noanimationUnspiderfy:function(){var j=this._group,h=j._map,e=j._featureGroup,g=this.getAllChildMarkers(),d,f;j._ignoreMove=true;this.setOpacity(1);for(f=g.length-1;f>=0;f--){d=g[f];e.removeLayer(d);if(d._preSpiderfyLatlng){d.setLatLng(d._preSpiderfyLatlng);delete d._preSpiderfyLatlng}if(d.setZIndexOffset){d.setZIndexOffset(0)}if(d._spiderLeg){h.removeLayer(d._spiderLeg);delete d._spiderLeg}}j.fire("unspiderfied",{cluster:this,markers:g});j._ignoreMove=false;j._spiderfied=null}});L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(g,k){var o=this._group,e=o._map,d=o._featureGroup,f=this._group.options.spiderLegPolylineOptions,j,h,n,l;o._ignoreMove=true;for(j=0;j<g.length;j++){l=e.layerPointToLatLng(k[j]);h=g[j];n=new L.Polyline([this._latlng,l],f);e.addLayer(n);h._spiderLeg=n;h._preSpiderfyLatlng=h._latlng;h.setLatLng(l);if(h.setZIndexOffset){h.setZIndexOffset(1000000)}d.addLayer(h)}this.setOpacity(0.3);o._ignoreMove=false;o.fire("spiderfied",{cluster:this,markers:g})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}});L.MarkerCluster.include({_animationSpiderfy:function(l,o){var s=this,v=this._group,g=v._map,d=v._featureGroup,j=this._latlng,q=g.latLngToLayerPoint(j),p=L.Path.SVG,f=L.extend({},this._group.options.spiderLegPolylineOptions),h=f.opacity,n,k,u,e,t,r;if(h===c){h=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity}if(p){f.opacity=0;f.className=(f.className||"")+" leaflet-cluster-spider-leg"}else{f.opacity=h}v._ignoreMove=true;for(n=0;n<l.length;n++){k=l[n];r=g.layerPointToLatLng(o[n]);u=new L.Polyline([j,r],f);g.addLayer(u);k._spiderLeg=u;if(p){e=u._path;t=e.getTotalLength()+0.1;e.style.strokeDasharray=t;e.style.strokeDashoffset=t}if(k.setZIndexOffset){k.setZIndexOffset(1000000)}if(k.clusterHide){k.clusterHide()}d.addLayer(k);if(k._setPos){k._setPos(q)}}v._forceLayout();v._animationStart();for(n=l.length-1;n>=0;n--){r=g.layerPointToLatLng(o[n]);k=l[n];k._preSpiderfyLatlng=k._latlng;k.setLatLng(r);if(k.clusterShow){k.clusterShow()}if(p){u=k._spiderLeg;e=u._path;e.style.strokeDashoffset=0;u.setStyle({opacity:h})}}this.setOpacity(0.3);v._ignoreMove=false;setTimeout(function(){v._animationEnd();v.fire("spiderfied",{cluster:s,markers:l})},200)},_animationUnspiderfy:function(s){var o=this,r=this._group,f=r._map,d=r._featureGroup,n=s?f._latLngToNewLayerPoint(this._latlng,s.zoom,s.center):f.latLngToLayerPoint(this._latlng),h=this.getAllChildMarkers(),l=L.Path.SVG,g,k,q,e,p,j;r._ignoreMove=true;r._animationStart();this.setOpacity(1);for(k=h.length-1;k>=0;k--){g=h[k];if(!g._preSpiderfyLatlng){continue}g.setLatLng(g._preSpiderfyLatlng);delete g._preSpiderfyLatlng;j=true;if(g._setPos){g._setPos(n);j=false}if(g.clusterHide){g.clusterHide();j=false}if(j){d.removeLayer(g)}if(l){q=g._spiderLeg;e=q._path;p=e.getTotalLength()+0.1;e.style.strokeDashoffset=p;q.setStyle({opacity:0})}}r._ignoreMove=false;setTimeout(function(){var m=0;for(k=h.length-1;k>=0;k--){g=h[k];if(g._spiderLeg){m++}}for(k=h.length-1;k>=0;k--){g=h[k];if(!g._spiderLeg){continue}if(g.clusterShow){g.clusterShow()}if(g.setZIndexOffset){g.setZIndexOffset(0)}if(m>1){d.removeLayer(g)}f.removeLayer(g._spiderLeg);delete g._spiderLeg}r._animationEnd();r.fire("unspiderfied",{cluster:o,markers:h})},200)}});L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this);if(this._map.options.zoomAnimation){this._map.on("zoomstart",this._unspiderfyZoomStart,this)}this._map.on("zoomend",this._noanimationUnspiderfy,this);if(!L.Browser.touch){this._map.getRenderer(this)}},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this);this._map.off("zoomstart",this._unspiderfyZoomStart,this);this._map.off("zoomanim",this._unspiderfyZoomAnim,this);this._map.off("zoomend",this._noanimationUnspiderfy,this);this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){if(!this._map){return}this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(d){if(L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")){return}this._map.off("zoomanim",this._unspiderfyZoomAnim,this);this._unspiderfy(d)},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(d){if(this._spiderfied){this._spiderfied.unspiderfy(d)}},_noanimationUnspiderfy:function(){if(this._spiderfied){this._spiderfied._noanimationUnspiderfy()}},_unspiderfyLayer:function(d){if(d._spiderLeg){this._featureGroup.removeLayer(d);if(d.clusterShow){d.clusterShow()}if(d.setZIndexOffset){d.setZIndexOffset(0)}this._map.removeLayer(d._spiderLeg);delete d._spiderLeg}}});L.MarkerClusterGroup.include({refreshClusters:function(d){if(!d){d=this._topClusterLevel.getAllChildMarkers()}else{if(d instanceof L.MarkerClusterGroup){d=d._topClusterLevel.getAllChildMarkers()}else{if(d instanceof L.LayerGroup){d=d._layers}else{if(d instanceof L.MarkerCluster){d=d.getAllChildMarkers()}else{if(d instanceof L.Marker){d=[d]}}}}}this._flagParentsIconsNeedUpdate(d);this._refreshClustersIcons();if(this.options.singleMarkerMode){this._refreshSingleMarkerModeMarkers(d)}return this},_flagParentsIconsNeedUpdate:function(e){var f,d;for(f in e){d=e[f].__parent;while(d){d._iconNeedsUpdate=true;d=d.__parent}}},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(d){if(d instanceof L.MarkerCluster&&d._iconNeedsUpdate){d._updateIcon()}})},_refreshSingleMarkerModeMarkers:function(e){var f,d;for(f in e){d=e[f];if(this.hasLayer(d)){d.setIcon(this._overrideMarkerIcon(d))}}}});L.Marker.include({refreshIconOptions:function(e,d){var f=this.options.icon;L.setOptions(f,e);this.setIcon(f);if(d&&this.__parent){this.__parent._group.refreshClusters(this)}return this}})}(window,document));L.NonTiledLayer=L.Layer.extend({includes:L.Mixin.Events,options:{attribution:"",opacity:1,zIndex:undefined,minZoom:0,maxZoom:18,pointerEvents:null,errorImageUrl:"data:image/gif;base64,R0lGODlhAQABAHAAACH5BAUAAAAALAAAAAABAAEAAAICRAEAOw==",bounds:L.latLngBounds([-85.05,-180],[85.05,180])},url:"",initialize:function(a){L.setOptions(this,a)},onAdd:function(a){this._map=a;if(!this._div){this._div=L.DomUtil.create("div","leaflet-image-layer");if(this.options.pointerEvents){this._div.style["pointer-events"]=this.options.pointerEvents}if(this.options.zIndex!==undefined){this._div.style.zIndex=this.options.zIndex}if(this.options.opacity!==undefined){this._div.style.opacity=this.options.opacity}}this.getPane().appendChild(this._div);this._bufferImage=this._initImage();this._currentImage=this._initImage();this._update()},onRemove:function(a){this.getPane().removeChild(this._div);this._div.removeChild(this._bufferImage);this._div.removeChild(this._currentImage)},addTo:function(a){a.addLayer(this);return this},getEvents:function(){var a={moveend:this._update,zoom:this._viewreset};if(this._zoomAnimated){a.zoomanim=this._animateZoom}return a},getElement:function(){return this._div},setOpacity:function(a){this.options.opacity=a;if(this._div){L.DomUtil.setOpacity(this._div,this.options.opacity)}return this},setZIndex:function(a){if(a){this.options.zIndex=a;if(this._div){this._div.style.zIndex=a}}return this},bringToFront:function(){if(this._div){this._pane.appendChild(this._div)}return this},bringToBack:function(){if(this._div){this._pane.insertBefore(this._div,this._pane.firstChild)}return this},getAttribution:function(){return this.options.attribution},_initImage:function(a){var a=L.DomUtil.create("img","leaflet-image-layer");this._div.appendChild(a);if(this._map.options.zoomAnimation&&L.Browser.any3d){L.DomUtil.addClass(a,"leaflet-zoom-animated")}else{L.DomUtil.addClass(a,"leaflet-zoom-hide")}L.extend(a,{galleryimg:"no",onselectstart:L.Util.falseFn,onmousemove:L.Util.falseFn,onload:L.bind(this._onImageLoad,this),onerror:L.bind(this._onImageError,this)});return a},redraw:function(){if(this._map){this._update()}return this},_animateZoom:function(a){if(this._currentImage._bounds){this._animateImage(this._currentImage,a)}if(this._bufferImage._bounds){this._animateImage(this._bufferImage,a)}},_animateImage:function(b,a){var d=this._map.getZoomScale(a.zoom),c=this._map._latLngToNewLayerPoint(b._bounds.getNorthWest(),a.zoom,a.center);L.DomUtil.setTransform(b,c,d)},_resetImage:function(c){var b=new L.Bounds(this._map.latLngToLayerPoint(c._bounds.getNorthWest()),this._map.latLngToLayerPoint(c._bounds.getSouthEast())),a=b.getSize();L.DomUtil.setPosition(c,b.min);c.style.width=a.x+"px";c.style.height=a.y+"px"},_getClippedBounds:function(){var b=this._map.getBounds();var l=b.getSouth();var f=b.getNorth();var j=b.getWest();var d=b.getEast();var c=this.options.bounds.getSouth();var a=this.options.bounds.getNorth();var k=this.options.bounds.getWest();var h=this.options.bounds.getEast();if(l<c){l=c}if(f>a){f=a}if(j<k){j=k}if(d>h){d=h}var g=new L.LatLng(f,j);var e=new L.LatLng(l,d);return new L.LatLngBounds(g,e)},_viewreset:function(){if(this._bufferImage._bounds){this._resetImage(this._bufferImage)}if(this._currentImage._bounds){this._resetImage(this._currentImage)}},_update:function(){if(this._map.getZoom()<this.options.minZoom||this._map.getZoom()>this.options.maxZoom){this._div.style.visibility="hidden";return}else{this._div.style.visibility="visible"}if(this._bufferImage._bounds){this._resetImage(this._bufferImage)}var f=this._getClippedBounds();var e=this._map.latLngToContainerPoint(f.getNorthWest());var d=this._map.latLngToContainerPoint(f.getSouthEast());var c=d.x-e.x;var a=d.y-e.y;if(c<32||a<32){return}this._currentImage._bounds=f;this._resetImage(this._currentImage);var b=this._currentImage;if(this.getImageUrl){b.src=this.getImageUrl(f.getNorthWest(),f.getSouthEast(),c,a)}else{this.getImageUrlAsync(f.getNorthWest(),f.getSouthEast(),c,a,function(h,g){b.src=h;b.tag=g})}this.url=b.src;L.DomUtil.setOpacity(this._currentImage,0)},_onImageError:function(a){this.fire("error",a);L.DomUtil.addClass(a.target,"invalid");if(a.target.src!==this.options.errorImageUrl){a.target.src=this.options.errorImageUrl;this._onImageDone(false,a)}},_onImageLoad:function(a){if(a.target.src!==this.options.errorImageUrl){L.DomUtil.removeClass(a.target,"invalid");if(a.target.src!==this.url){return}this._onImageDone(true,a)}},_onImageDone:function(c,b){L.DomUtil.setOpacity(this._currentImage,1);L.DomUtil.setOpacity(this._bufferImage,0);if(this._addInteraction){this._addInteraction(this._currentImage.tag)}var a=this._bufferImage;this._bufferImage=this._currentImage;this._currentImage=a;this.fire("load",b)}});L.nonTiledLayer=function(){return new L.NonTiledLayer()};L.NonTiledLayer.WMS=L.NonTiledLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:false},options:{crs:null,uppercase:false},initialize:function(c,b){this._wmsUrl=c;var a=L.extend({},this.defaultWmsParams);for(var d in b){if(!L.NonTiledLayer.prototype.options.hasOwnProperty(d)&&!L.Layer.prototype.options.hasOwnProperty(d)){a[d]=b[d]}}this.wmsParams=a;L.setOptions(this,b)},onAdd:function(a){this._crs=this.options.crs||a.options.crs;this._wmsVersion=parseFloat(this.wmsParams.version);var b=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[b]=this._crs.code;L.NonTiledLayer.prototype.onAdd.call(this,a)},getImageUrl:function(f,e,b,j){var g=this.wmsParams;g.width=b;g.height=j;var c=this._crs.project(f);var d=this._crs.project(e);var a=this._wmsUrl;var h=h=(this._wmsVersion>=1.3&&this._crs===L.CRS.EPSG4326?[d.y,c.x,c.y,d.x]:[c.x,d.y,d.x,c.y]).join(",");return a+L.Util.getParamString(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+h},setParams:function(b,a){L.extend(this.wmsParams,b);if(!a){this.redraw()}return this}});L.nonTiledLayer.wms=function(b,a){return new L.NonTiledLayer.WMS(b,a)};GV.Util=function(){return{getUrlParam:function(b){var a=new RegExp("[\\?&]"+b+"=([^&#]*)").exec(window.location.href);GV.Util.log("GV.Util.getUrlParam");return a?decodeURIComponent(a[1]):null},getUrlParamFromString:function(a,c){var b=new RegExp("[\\?&]"+c+"=([^&#]*)").exec(a);if(!b){return 0}return b[1]||0},log:function(a,d){var b="log";if(!GV.debug){return}switch(d){case 0:b="warn";break;case 1:case 2:b="error";break;default:b="info";break}try{console[b](a)}catch(c){}},msgBox:function(a){window.alert(a)},setUnderscoreTemplate:function(){if(_){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g}}},getXML:function(b,e){var a=b.url,c=b.data,d=b.method;$.ajax({url:a,dataType:(GV.Util.isBrowserIE())?"text":"xml",data:c,method:d||"GET"}).done(function(f){try{var g=f;if(GV.Util.isBrowserIE()){var j=new ActiveXObject("Microsoft.XMLDOM");j.async="false";j.loadXML(f);g=j}e(g)}catch(h){console.log(h)}})},parseXML:function(c){GV.Util.log("GV.Util.parseXML");try{var b=null;if(window.DOMParser&&window.XSLTProcessor){var d=new DOMParser();b=d.parseFromString(c,"text/xml")}else{b=new ActiveXObject("Msxml2.DOMDocument.3.0");b.async=false;b.loadXML(c)}return b}catch(a){throw {name:"xmlTransformation",message:"GV.Util.parseXml: errore parsing xml - "+a.message,level:1}}},isPointInLig:function(b,f){GV.Util.log("GV.Util.isPointInLig");if(!b||!f){return false}var a=7.4,e=43.7,d=10.1,c=44.8;return(b>a)&&(b<d)&&(f>e)&&(f<c)},toArray:function(a){return Array.prototype.slice.call(a)},bind:function(b,a){return function(){return a.apply(b,GV.Util.toArray(arguments))}},getArrayElementByAttribute:function(e,c,d){if(!e){return null}var b,a=e.length;for(b=0;b<a;b++){if(e[b][c]===d){return e[b]}}return null},geoCode:function(a,b,d){var c=new google.maps.Geocoder();c.geocode({address:a},function(h,f){if(f===google.maps.GeocoderStatus.OK){var e=h[0].geometry.location.lng();var k=h[0].geometry.location.lat();var g={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[e,k]},properties:{address:a}}]};if(b){for(var j in b){if(b.hasOwnProperty(j)){g.features[0].properties[j]=b[j]}}}d(g)}else{if(f===google.maps.GeocoderStatus.ZERO_RESULTS){GV.Util.msgBox("Indirizzo '"+a+"' non trovato")}else{console.error("Errore di geocoding: "+f)}}})},getParamString:function(d,a,b){var e=[];for(var c in d){e.push(encodeURIComponent(b?c.toUpperCase():c)+"="+encodeURIComponent(d[c]))}return((!a||a.indexOf("?")===-1)?"?":"&")+e.join("&")},template:function(b,a){var c=/\{ *([\w_\-]+) *\}/g;return b.replace(c,function(f,d){var e=a[d];if(e===undefined){throw new Error("No value provided for variable "+f)}else{if(typeof e==="function"){e=e(a)}}return e})},getZoomFromScaleDenom:function(a){return _.findIndex(GV.Globals.BASE_SCALES,function(b){return a>b})},getScaleLabelsFromZoom:function(a){return GV.Globals.BASE_SCALE_LABELS[a]},getScaleFromZoom:function(a){return GV.Globals.BASE_SCALES[a]},endsWith:function(b,a){return b.indexOf(a,b.length-a.length)!==-1},isTouch:function(){return window.matchMedia("(pointer: coarse)").matches},isBrowserIE:function(){return navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.indexOf("Trident")>0||navigator.userAgent.indexOf("Edge")>0}}}();GV.Buttons.baselayers=function(a,b){if(GV.Globals.SMALL_SCREEN){return null}return L.control.baseLayersSwitcher(b.baseLayers,[],{position:a.position}).addTo(b)};GV.Buttons.fullscreen=function(a,b){return L.control.fullscreen(a)};GV.Buttons.geocoder=function(a,b){return new L.Control.Geocoder(a)};GV.Buttons.legend=function(c,d){if(c.buildLegendPanel){c.buildLegendPanel(c)}else{a(c)}var b=_.extend(c,{leafletClasses:true,states:[{stateName:"print",onClick:function(e,f){$("#gv-legend").fadeIn("slow")},title:"Legenda",icon:"ms ms-layers"}]});return L.easyButton(b);function a(e){GV.app.getContainer().append("<div id='gv-legend' style='display:none;'></div>");GV.app.layout.addRegion("legend","#gv-legend");GV.app.layout.getRegion("legend").show(new GV.Views.LegendLayout(e));if(e.show&&!GV.Globals.SMALL_SCREEN&&!GV.Util.isTouch()){$("#gv-legend").css({display:"block"})}}};GV.Buttons.locate=function(a,b){return new L.Control.Locate(a)};GV.Buttons.navbar=function(a,b){if(GV.Util.isTouch()){return null}return L.control.navbar(a)};GV.Buttons.print=function(b,c){if(GV.Globals.SMALL_SCREEN){return null}var a=_.extend(b,{leafletClasses:true,states:[{stateName:"print",onClick:function(d,e){console.log("print")},title:"Stampa",icon:"fa-print"}]});return L.easyButton(a)};GV.Buttons.search=function(a,c){var b=[];_.each(a.layers,function(d){b.push(c.getLayerByName(d))});a.layer=L.layerGroup(b);return new L.Control.Search(a)};GV.Buttons.zoom=function(a,b){if(GV.Util.isTouch()){return null}return L.control.zoom(a)};L.Control.BaseLayersSwitcher=L.Control.extend({options:{collapsed:true,position:"topright",autoZIndex:true,hideSingleBase:false},initialize:function(d,c,a){L.setOptions(this,a);this._layers=[];this._lastZIndex=0;this._handlingClick=false;for(var b in d){this._addLayer(d[b],b)}for(b in c){this._addLayer(c[b],b,true)}},onAdd:function(a){this._initLayout();this._update();this._map=a;a.on("zoomend",this._checkDisabledLayers,this);return this._container},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++){this._layers[a].layer.off("add remove",this._onLayerChange,this)}},addBaseLayer:function(b,a){this._addLayer(b,a);return(this._map)?this._update():this},addOverlay:function(b,a){this._addLayer(b,a,true);return(this._map)?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var b=this._getLayer(L.stamp(a));if(b){this._layers.splice(this._layers.indexOf(b),1)}return(this._map)?this._update():this},expand:function(){L.DomUtil.addClass(this._container,"leaflet-control-layers-expanded");this._form.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);if(a<this._form.clientHeight){L.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar");this._form.style.height=a+"px"}else{L.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar")}this._checkDisabledLayers();return this},collapse:function(){L.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded");return this},_initLayout:function(){var b="leaflet-control-layers",a=this._container=L.DomUtil.create("div",b);a.setAttribute("aria-haspopup",true);L.DomEvent.disableClickPropagation(a);if(!L.Browser.touch){L.DomEvent.disableScrollPropagation(a)}var d=this._form=L.DomUtil.create("form",b+"-list");if(this.options.collapsed){if(!L.Browser.android){L.DomEvent.on(a,{mouseenter:this.expand,mouseleave:this.collapse},this)}var c=this._layersLink=L.DomUtil.create("a","ms ms-globe "+b+"-toggle",a);c.href="#";c.title="Layers";if(L.Browser.touch){L.DomEvent.on(c,"click",L.DomEvent.stop).on(c,"click",this.expand,this)}else{L.DomEvent.on(c,"focus",this.expand,this)}L.DomEvent.on(d,"click",function(){setTimeout(L.bind(this._onInputClick,this),0)},this);this._map.on("click",this.collapse,this)}else{this.expand()}this._baseLayersList=L.DomUtil.create("div",b+"-base",d);this._separator=L.DomUtil.create("div",b+"-separator",d);this._overlaysList=L.DomUtil.create("div",b+"-overlays",d);a.appendChild(d)},_getLayer:function(b){for(var a=0;a<this._layers.length;a++){if(this._layers[a]&&L.stamp(this._layers[a].layer)===b){return this._layers[a]}}},_addLayer:function(c,b,a){c.on("add remove",this._onLayerChange,this);this._layers.push({layer:c,name:b,overlay:a});if(this.options.autoZIndex&&c.setZIndex){this._lastZIndex++;c.setZIndex(this._lastZIndex)}},_update:function(){if(!this._container){return this}L.DomUtil.empty(this._baseLayersList);L.DomUtil.empty(this._overlaysList);var a,d,c,e,b=0;for(c=0;c<this._layers.length;c++){e=this._layers[c];this._addItem(e);d=d||e.overlay;a=a||!e.overlay;b+=!e.overlay?1:0}if(this.options.hideSingleBase){a=a&&b>1;this._baseLayersList.style.display=a?"":"none"}this._separator.style.display=d&&a?"":"none";return this},_onLayerChange:function(c){if(!this._handlingClick){this._update()}var b=this._getLayer(L.stamp(c.target));var a=b.overlay?(c.type==="add"?"overlayadd":"overlayremove"):(c.type==="add"?"baselayerchange":null);if(a){this._map.fire(a,b)}},_createRadioElement:function(a,d){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(d?' checked="checked"':"")+"/>";var b=document.createElement("div");b.innerHTML=c;return b.firstChild},_addItem:function(g){var d=document.createElement("label"),f=this._map.hasLayer(g.layer),b;if(g.overlay){b=document.createElement("input");b.type="checkbox";b.className="leaflet-control-layers-selector";b.defaultChecked=f}else{b=this._createRadioElement("leaflet-base-layers",f)}b.layerId=L.stamp(g.layer);L.DomEvent.on(b,"click",this._onInputClick,this);var c=document.createElement("span");c.innerHTML="&nbsp;&nbsp"+g.name;var e=document.createElement("div");d.appendChild(e);e.appendChild(b);e.appendChild(c);var a=g.overlay?this._overlaysList:this._baseLayersList;a.appendChild(d);this._checkDisabledLayers();return d},_onInputClick:function(){var b=this._form.getElementsByTagName("input"),c,g,a;var e=[],d=[];this._handlingClick=true;for(var f=b.length-1;f>=0;f--){c=b[f];g=this._getLayer(c.layerId).layer;a=this._map.hasLayer(g);if(c.checked&&!a){e.push(g)}else{if(!c.checked&&a){d.push(g)}}}for(f=0;f<d.length;f++){this._map.removeLayer(d[f])}for(f=0;f<e.length;f++){this._map.addLayer(e[f])}this._handlingClick=false;this._refocusOnMap()},_checkDisabledLayers:function(){var a=this._form.getElementsByTagName("input"),b,d,e=this._map.getZoom();for(var c=a.length-1;c>=0;c--){b=a[c];d=this._getLayer(b.layerId).layer;b.disabled=(d.options.minZoom!==undefined&&e<d.options.minZoom)||(d.options.maxZoom!==undefined&&e>d.options.maxZoom)}},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}});L.control.baseLayersSwitcher=function(c,b,a){return new L.Control.BaseLayersSwitcher(c,b,a)};(function(){L.Control.EasyBar=L.Control.extend({options:{position:"topleft",id:null,leafletClasses:true},initialize:function(e,c){if(c){L.Util.setOptions(this,c)}this._buildContainer();this._buttons=[];for(var d=0;d<e.length;d++){e[d]._bar=this;e[d]._container=e[d].button;this._buttons.push(e[d]);this.container.appendChild(e[d].button)}},_buildContainer:function(){this._container=this.container=L.DomUtil.create("div","");this.options.leafletClasses&&L.DomUtil.addClass(this.container,"leaflet-bar easy-button-container leaflet-control");this.options.id&&(this.container.id=this.options.id)},enable:function(){L.DomUtil.addClass(this.container,"enabled");L.DomUtil.removeClass(this.container,"disabled");this.container.setAttribute("aria-hidden","false");return this},disable:function(){L.DomUtil.addClass(this.container,"disabled");L.DomUtil.removeClass(this.container,"enabled");this.container.setAttribute("aria-hidden","true");return this},onAdd:function(){return this.container},addTo:function(f){this._map=f;for(var d=0;d<this._buttons.length;d++){this._buttons[d]._map=f}var c=this._container=this.onAdd(f),g=this.getPosition(),e=f._controlCorners[g];L.DomUtil.addClass(c,"leaflet-control");if(g.indexOf("bottom")!==-1){e.insertBefore(c,e.firstChild)}else{e.appendChild(c)}return this}});L.easyBar=function(){var c=[L.Control.EasyBar];for(var d=0;d<arguments.length;d++){c.push(arguments[d])}return new (Function.prototype.bind.apply(L.Control.EasyBar,c))};L.Control.EasyButton=L.Control.extend({options:{position:"topleft",id:null,type:"replace",states:[],leafletClasses:true,tagName:"button"},initialize:function(d,f,e,g){this.options.states=[];if(g!=null){this.options.id=g}this.storage={};if(typeof arguments[arguments.length-1]==="object"){L.Util.setOptions(this,arguments[arguments.length-1])}if(this.options.states.length===0&&typeof d==="string"&&typeof f==="function"){this.options.states.push({icon:d,onClick:f,title:typeof e==="string"?e:""})}this._states=[];for(var c=0;c<this.options.states.length;c++){this._states.push(new b(this.options.states[c],this))}this._buildButton();this._activateState(this._states[0])},_buildButton:function(){this.button=L.DomUtil.create(this.options.tagName,"");if(this.tagName==="button"){this.button.type="button"}if(this.options.id){this.button.id=this.options.id}if(this.options.leafletClasses){L.DomUtil.addClass(this.button,"leaflet-bar-part leaflet-interactive easy-button gv-bgcolor")}L.DomEvent.addListener(this.button,"dblclick",L.DomEvent.stop);L.DomEvent.addListener(this.button,"mousedown",L.DomEvent.stop);L.DomEvent.addListener(this.button,"click",function(d){L.DomEvent.stop(d);this._currentState.onClick(this,this._map?this._map:null);this._map.getContainer().focus()},this);if(this.options.type=="replace"){this.button.appendChild(this._currentState.icon)}else{for(var c=0;c<this._states.length;c++){this.button.appendChild(this._states[c].icon)}}},_currentState:{stateName:"unnamed",icon:(function(){return document.createElement("span")})()},_states:null,state:function(c){if(typeof c=="string"){this._activateStateNamed(c)}else{if(typeof c=="number"){this._activateState(this._states[c])}}return this},_activateStateNamed:function(d){for(var c=0;c<this._states.length;c++){if(this._states[c].stateName==d){this._activateState(this._states[c])}}},_activateState:function(d){if(d===this._currentState){return}else{if(this.options.type=="replace"){this.button.appendChild(d.icon);this.button.removeChild(this._currentState.icon)}if(d.title){this.button.title=d.title}else{this.button.removeAttribute("title")}for(var c=0;c<this._states.length;c++){L.DomUtil.removeClass(this._states[c].icon,this._currentState.stateName+"-active");L.DomUtil.addClass(this._states[c].icon,d.stateName+"-active")}L.DomUtil.removeClass(this.button,this._currentState.stateName+"-active");L.DomUtil.addClass(this.button,d.stateName+"-active");this._currentState=d}},enable:function(){L.DomUtil.addClass(this.button,"enabled");L.DomUtil.removeClass(this.button,"disabled");this.button.setAttribute("aria-hidden","false");return this},disable:function(){L.DomUtil.addClass(this.button,"disabled");L.DomUtil.removeClass(this.button,"enabled");this.button.setAttribute("aria-hidden","true");return this},removeFrom:function(c){this._container.parentNode.removeChild(this._container);this._map=null;return this},onAdd:function(){var c=L.easyBar([this],{position:this.options.position,leafletClasses:this.options.leafletClasses});this._container=c.container;return this._container}});L.easyButton=function(){var c=Array.prototype.concat.apply([L.Control.EasyButton],arguments);return new (Function.prototype.bind.apply(L.Control.EasyButton,c))};function b(c,d){this.title=c.title;this.stateName=c.stateName?c.stateName:"unnamed-state";this.icon=L.DomUtil.create("span","");L.DomUtil.addClass(this.icon,"button-state state-"+this.stateName.replace(/(^\s*|\s*$)/g,""));this.icon.innerHTML=a(c.icon);this.onClick=L.Util.bind(c.onClick?c.onClick:function(){},d)}function a(d){var c;if(d.match(/[&;=<>"']/)){c=d}else{d=d.replace(/(^\s*|\s*$)/g,"");c=L.DomUtil.create("span","");if(d.indexOf("fa-")===0){L.DomUtil.addClass(c,"fa "+d)}else{if(d.indexOf("glyphicon-")===0){L.DomUtil.addClass(c,"glyphicon "+d)}else{L.DomUtil.addClass(c,d)}}c=c.outerHTML}return c}})();L.Control.Fullscreen=L.Control.extend({options:{position:"topleft",title:{"false":"Schermo intero","true":"Esci da Schermo intero"}},onAdd:function(b){var a=L.DomUtil.create("div","leaflet-control-fullscreen leaflet-bar leaflet-control");this.link=L.DomUtil.create("a","ms ms-max-extent",a);this.link.href="#";this._map=b;this._map.on("fullscreenchange",this._toggleTitle,this);this._toggleTitle();L.DomEvent.on(this.link,"click",this._click,this);return a},_click:function(a){L.DomEvent.stopPropagation(a);L.DomEvent.preventDefault(a);this._map.toggleFullscreen(this.options)},_toggleTitle:function(){this.link.title=this.options.title[this._map.isFullscreen()]}});L.Map.include({isFullscreen:function(){return this._isFullscreen||false},toggleFullscreen:function(b){var a=this.getContainer();if(this.isFullscreen()){if(b&&b.pseudoFullscreen){this._disablePseudoFullscreen(a)}else{if(document.exitFullscreen){document.exitFullscreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitCancelFullScreen){document.webkitCancelFullScreen()}else{if(document.msExitFullscreen){document.msExitFullscreen()}else{this._disablePseudoFullscreen(a)}}}}}}else{if(b&&b.pseudoFullscreen){this._enablePseudoFullscreen(a)}else{if(a.requestFullscreen){a.requestFullscreen()}else{if(a.mozRequestFullScreen){a.mozRequestFullScreen()}else{if(a.webkitRequestFullscreen){a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}else{if(a.msRequestFullscreen){a.msRequestFullscreen()}else{this._enablePseudoFullscreen(a)}}}}}}},_enablePseudoFullscreen:function(a){L.DomUtil.addClass(a,"leaflet-pseudo-fullscreen");this._setFullscreen(true);this.invalidateSize();this.fire("fullscreenchange")},_disablePseudoFullscreen:function(a){L.DomUtil.removeClass(a,"leaflet-pseudo-fullscreen");this._setFullscreen(false);this.invalidateSize();this.fire("fullscreenchange")},_setFullscreen:function(b){this._isFullscreen=b;var a=this.getContainer();if(b){L.DomUtil.addClass(a,"leaflet-fullscreen-on")}else{L.DomUtil.removeClass(a,"leaflet-fullscreen-on")}},_onFullscreenChange:function(b){var a=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;if(a===this.getContainer()&&!this._isFullscreen){this._setFullscreen(true);this.fire("fullscreenchange")}else{if(a!==this.getContainer()&&this._isFullscreen){this._setFullscreen(false);this.fire("fullscreenchange")}}}});L.Map.mergeOptions({fullscreenControl:false});L.Map.addInitHook(function(){if(this.options.fullscreenControl){this.fullscreenControl=new L.Control.Fullscreen(this.options.fullscreenControl);this.addControl(this.fullscreenControl)}var b;if("onfullscreenchange" in document){b="fullscreenchange"}else{if("onmozfullscreenchange" in document){b="mozfullscreenchange"}else{if("onwebkitfullscreenchange" in document){b="webkitfullscreenchange"}else{if("onmsfullscreenchange" in document){b="MSFullscreenChange"}}}}if(b){var a=L.bind(this._onFullscreenChange,this);this.whenReady(function(){L.DomEvent.on(document,b,a)});this.on("unload",function(){L.DomEvent.off(document,b,a)})}});L.control.fullscreen=function(a){return new L.Control.Fullscreen(a)};(function(){L.Control.Geocoder=L.Control.extend({options:{showResultIcons:false,collapsed:true,expand:"click",position:"topright",placeholder:"Ricerca Indirizzo...",errorMessage:"Non trovato."},_callbackId:0,initialize:function(a){L.Util.setOptions(this,a);if(!this.options.geocoder){this.options.geocoder=new L.Control.Geocoder.Nominatim()}},onAdd:function(f){var d="leaflet-control-geocoder",a=L.DomUtil.create("div",d+" leaflet-bar"),c=L.DomUtil.create("a","ms ms-zoom",a),e=this._form=L.DomUtil.create("form",d+"-form",a),b;c.innerHTML="";c.href="javascript:void(0);";this._map=f;this._container=a;b=this._input=L.DomUtil.create("input");b.type="text";b.placeholder=this.options.placeholder;L.DomEvent.addListener(b,"keydown",this._keydown,this);this._errorElement=document.createElement("div");this._errorElement.className=d+"-form-no-error";this._errorElement.innerHTML=this.options.errorMessage;this._alts=L.DomUtil.create("ul",d+"-alternatives leaflet-control-geocoder-alternatives-minimized");e.appendChild(b);this._container.appendChild(this._errorElement);a.appendChild(this._alts);L.DomEvent.addListener(e,"submit",this._geocode,this);if(this.options.collapsed){if(this.options.expand==="click"){L.DomEvent.addListener(c,"click",function(g){if(g.button===0&&g.detail!==2){this._toggle()}},this)}else{L.DomEvent.addListener(c,"mouseover",this._expand,this);L.DomEvent.addListener(c,"mouseout",this._collapse,this);this._map.on("movestart",this._collapse,this)}}else{L.DomEvent.addListener(c,"click",function(g){this._geocode(g)},this);this._expand()}L.DomEvent.disableClickPropagation(a);return a},_geocodeResult:function(b){L.DomUtil.removeClass(this._container,"leaflet-control-geocoder-throbber");if(b.length===1){this._geocodeResultSelected(b[0])}else{if(b.length>0){this._alts.innerHTML="";this._results=b;L.DomUtil.removeClass(this._alts,"leaflet-control-geocoder-alternatives-minimized");for(var a=0;a<b.length;a++){this._alts.appendChild(this._createAlt(b[a],a))}}else{L.DomUtil.addClass(this._errorElement,"leaflet-control-geocoder-error")}}},markGeocode:function(a){this._map.fitBounds(a.bbox);this._map.setZoom(16);if(this._geocodeMarker){this._map.removeLayer(this._geocodeMarker)}this._geocodeMarker=new L.Marker(a.center).bindPopup(a.html||a.name).addTo(this._map).openPopup();return this},_geocode:function(a){L.DomEvent.preventDefault(a);L.DomUtil.addClass(this._container,"leaflet-control-geocoder-throbber");this._clearResults();this.options.geocoder.geocode(this._input.value,this._geocodeResult,this);return false},_geocodeResultSelected:function(a){if(this.options.collapsed){this._collapse()}else{this._clearResults()}this.markGeocode(a)},_toggle:function(){if(this._container.className.indexOf("leaflet-control-geocoder-expanded")>=0){this._collapse()}else{this._expand()}},_expand:function(){L.DomUtil.addClass(this._container,"leaflet-control-geocoder-expanded");this._input.select()},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-geocoder-expanded","");L.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized");L.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error")},_clearResults:function(){L.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized");this._selection=null;L.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error")},_createAlt:function(c,e){var b=L.DomUtil.create("li",""),d=L.DomUtil.create("a","",b),f=this.options.showResultIcons&&c.icon?L.DomUtil.create("img","",d):null,g=c.html?undefined:document.createTextNode(c.name),h=function h(a){L.DomEvent.preventDefault(a);this._geocodeResultSelected(c)};if(f){f.src=c.icon}b.setAttribute("data-result-index",e);if(c.html){d.innerHTML=c.html}else{d.appendChild(g)}L.DomEvent.addListener(b,"click",h,this);return b},_keydown:function(c){var d=this,a=function a(e){if(d._selection){L.DomUtil.removeClass(d._selection,"leaflet-control-geocoder-selected");d._selection=d._selection[e>0?"nextSibling":"previousSibling"]}if(!d._selection){d._selection=d._alts[e>0?"firstChild":"lastChild"]}if(d._selection){L.DomUtil.addClass(d._selection,"leaflet-control-geocoder-selected")}};switch(c.keyCode){case 27:if(this.options.collapsed){this._collapse()}break;case 38:a(-1);L.DomEvent.preventDefault(c);break;case 40:a(1);L.DomEvent.preventDefault(c);break;case 13:if(this._selection){var b=parseInt(this._selection.getAttribute("data-result-index"),10);this._geocodeResultSelected(this._results[b]);this._clearResults();L.DomEvent.preventDefault(c)}}return true}});L.Control.geocoder=function(a){return new L.Control.Geocoder(a)};L.Control.Geocoder.callbackId=0;L.Control.Geocoder.jsonp=function(b,f,g,c,d){var e="_l_geocoder_"+(L.Control.Geocoder.callbackId++);f[d||"callback"]=e;window[e]=L.Util.bind(g,c);var a=document.createElement("script");a.type="text/javascript";a.src=b+L.Util.getParamString(f);a.id=e;document.getElementsByTagName("head")[0].appendChild(a)};L.Control.Geocoder.getJSON=function(b,c,d){var a=new XMLHttpRequest();a.onreadystatechange=function(){if(a.readyState!=4){return}if(a.status!=200&&a.status!=304){d("");return}d(JSON.parse(a.response))};a.open("GET",b+L.Util.getParamString(c),true);a.setRequestHeader("Accept","application/json");a.send(null)};L.Control.Geocoder.template=function(c,a,b){return c.replace(/\{ *([\w_]+) *\}/g,function(f,d){var e=a[d];if(e===undefined){e=""}else{if(typeof e==="function"){e=e(a)}}return L.Control.Geocoder.htmlEscape(e)})};L.Control.Geocoder.htmlEscape=(function(){var d=/[&<>"'`]/g;var b=/[&<>"'`]/;var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};function a(e){return c[e]}return function(e){if(e==null){return""}else{if(!e){return e+""}}e=""+e;if(!b.test(e)){return e}return e.replace(d,a)}})();L.Control.Geocoder.Nominatim=L.Class.extend({options:{serviceUrl:"//nominatim.openstreetmap.org/",geocodingQueryParams:{countrycodes:"it",viewbox:"7.49958,44.791951,10.06312,43.730645",bounded:1},reverseQueryParams:{},htmlTemplate:function(a){var b=a.display_name.replace("Genoa,","").replace("Italia","").replace("Liguria,","");return L.Control.Geocoder.template(b.split(",").join("<br/>"),a.address,true)}},initialize:function(a){L.Util.setOptions(this,a)},geocode:function(c,a,b){L.Control.Geocoder.jsonp(this.options.serviceUrl+"search/",L.extend({q:c+" Liguria",limit:10,format:"json",addressdetails:1},this.options.geocodingQueryParams),function(g){var f=[];for(var e=g.length-1;e>=0;e--){var h=g[e].boundingbox;for(var d=0;d<4;d++){h[d]=parseFloat(h[d])}f[e]={icon:g[e].icon,name:g[e].display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(g[e]):undefined,bbox:L.latLngBounds([h[0],h[2]],[h[1],h[3]]),center:L.latLng(g[e].lat,g[e].lon),properties:g[e]}}a.call(b,f)},this,"json_callback")},reverse:function(b,d,a,c){L.Control.Geocoder.jsonp(this.options.serviceUrl+"reverse/",L.extend({lat:b.lat,lon:b.lng,zoom:Math.round(Math.log(d/256)/Math.log(2)),addressdetails:1,format:"json"},this.options.reverseQueryParams),function(f){var e=[],g;if(f&&f.lat&&f.lon){g=L.latLng(f.lat,f.lon);e.push({name:f.display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(f):undefined,center:g,bounds:L.latLngBounds(g,g),properties:f})}a.call(c,e)},this,"json_callback")}});L.Control.Geocoder.Google=L.Class.extend({options:{service_url:"https://maps.googleapis.com/maps/api/geocode/json"},initialize:function(a){this._key=a},geocode:function(c,a,b){var d={address:c};if(this._key&&this._key.length){d.key=this._key}L.Control.Geocoder.getJSON(this.options.service_url,d,function(h){var f=[],k,g,j;if(h.results&&h.results.length){for(var e=0;e<=h.results.length-1;e++){k=h.results[e];g=L.latLng(k.geometry.location);j=L.latLngBounds(L.latLng(k.geometry.viewport.northeast),L.latLng(k.geometry.viewport.southwest));f[e]={name:k.formatted_address,bbox:j,center:g}}}a.call(b,f)})},reverse:function(b,e,a,c){var d={latlng:encodeURIComponent(b.lat)+","+encodeURIComponent(b.lng)};if(this._key&&this._key.length){d.key=this._key}L.Control.Geocoder.getJSON(this.options.service_url,d,function(j){var g=[],l,h,k;if(j.results&&j.results.length){for(var f=0;f<=j.results.length-1;f++){l=j.results[f];h=L.latLng(l.geometry.location);k=L.latLngBounds(L.latLng(l.geometry.viewport.northeast),L.latLng(l.geometry.viewport.southwest));g[f]={name:l.formatted_address,bbox:k,center:h}}}a.call(c,g)})}});return L.Control.Geocoder})();
/*
 Copyright (c) 2016 Dominik Moritz

 This file is part of the leaflet locate control. It is licensed under the MIT license.
 You can find the project at: https://github.com/domoritz/leaflet-locatecontrol
 */
(function(a,b){if(typeof define==="function"&&define.amd){define(["leaflet"],a)}else{if(typeof exports==="object"){if(typeof b!=="undefined"&&b.L){module.exports=a(L)}else{module.exports=a(require("leaflet"))}}}if(typeof b!=="undefined"&&b.L){b.L.Control.Locate=a(L)}}(function(a){var b=a.Control.extend({options:{position:"topleft",layer:undefined,setView:"untilPan",keepCurrentZoomLevel:false,clickBehavior:{inView:"stop",outOfView:"setView",},drawCircle:true,drawMarker:true,markerClass:a.CircleMarker,circleStyle:{color:"#136AEC",fillColor:"#136AEC",fillOpacity:0.15,weight:2,opacity:0.5},markerStyle:{color:"#136AEC",fillColor:"#2A93EE",fillOpacity:0.7,weight:2,opacity:0.9,radius:5},followCircleStyle:{},followMarkerStyle:{},icon:"fa fa-map-marker",iconLoading:"fa fa-spinner fa-spin",iconElementTag:"span",circlePadding:[0,0],metric:true,onLocationError:function(c,d){alert(c.message)},onLocationOutsideMapBounds:function(c){c.stop();alert(c.options.strings.outsideMapBoundsMsg)},showPopup:true,strings:{title:"Show me where I am",metersUnit:"meters",feetUnit:"feet",popup:"You are within {distance} {unit} from this point",outsideMapBoundsMsg:"You seem located outside the boundaries of the map"},locateOptions:{maxZoom:Infinity,watch:true,setView:false}},initialize:function(c){for(var d in c){if(typeof this.options[d]==="object"){a.extend(this.options[d],c[d])}else{this.options[d]=c[d]}}this.options.followMarkerStyle=a.extend({},this.options.markerStyle,this.options.followMarkerStyle);this.options.followCircleStyle=a.extend({},this.options.circleStyle,this.options.followCircleStyle)},onAdd:function(d){var c=a.DomUtil.create("div","leaflet-control-locate leaflet-bar leaflet-control");this._layer=this.options.layer||new a.LayerGroup();this._layer.addTo(d);this._event=undefined;this._link=a.DomUtil.create("a","leaflet-bar-part leaflet-bar-part-single",c);this._link.href="#";this._link.title=this.options.strings.title;this._icon=a.DomUtil.create(this.options.iconElementTag,this.options.icon,this._link);a.DomEvent.on(this._link,"click",a.DomEvent.stopPropagation).on(this._link,"click",a.DomEvent.preventDefault).on(this._link,"click",this._onClick,this).on(this._link,"dblclick",a.DomEvent.stopPropagation);this._resetVariables();this._map.on("unload",this._unload,this);return c},_onClick:function(){this._justClicked=true;this._userPanned=false;if(this._active&&!this._event){this.stop()}else{if(this._active&&this._event!==undefined){var c=this._map.getBounds().contains(this._event.latlng)?this.options.clickBehavior.inView:this.options.clickBehavior.outOfView;switch(c){case"setView":this.setView();break;case"stop":this.stop();break}}else{this.start()}}this._updateContainerStyle()},start:function(){this._activate();if(this._event){this._drawMarker(this._map);if(this.options.setView){this.setView()}}this._updateContainerStyle()},stop:function(){this._deactivate();this._cleanClasses();this._resetVariables();this._removeMarker()},_activate:function(){if(!this._active){this._map.locate(this.options.locateOptions);this._active=true;this._map.on("locationfound",this._onLocationFound,this);this._map.on("locationerror",this._onLocationError,this);this._map.on("dragstart",this._onDrag,this)}},_deactivate:function(){this._map.stopLocate();this._active=false;this._map.off("locationfound",this._onLocationFound,this);this._map.off("locationerror",this._onLocationError,this);this._map.off("dragstart",this._onDrag,this)},setView:function(){if(this._isOutsideMapBounds()){this.options.onLocationOutsideMapBounds(this)}else{if(this.options.keepCurrentZoomLevel){this._map.panTo([this._event.latitude,this._event.longitude])}else{this._map.fitBounds(this._event.bounds,{padding:this.options.circlePadding,maxZoom:this.options.locateOptions.maxZoom})}}this._drawMarker()},_drawMarker:function(){if(this._event.accuracy===undefined){this._event.accuracy=0}var c=this._event.accuracy;var j=this._event.latlng;if(this.options.drawCircle){var f=this._isFollowing()?this.options.followCircleStyle:this.options.circleStyle;if(!this._circle){this._circle=a.circle(j,c,f).addTo(this._layer)}else{this._circle.setLatLng(j).setRadius(c).setStyle(f)}}var h,g;if(this.options.metric){h=c.toFixed(0);g=this.options.strings.metersUnit}else{h=(c*3.2808399).toFixed(0);g=this.options.strings.feetUnit}if(this.options.drawMarker){var d=this._isFollowing()?this.options.followMarkerStyle:this.options.markerStyle;if(!this._marker){this._marker=new this.options.markerClass(j,d).addTo(this._layer)}else{this._marker.setLatLng(j).setStyle(d)}}var e=this.options.strings.popup;if(this.options.showPopup&&e&&this._marker){this._marker.bindPopup(a.Util.template(e,{distance:h,unit:g}))._popup.setLatLng(j)}},_removeMarker:function(){this._layer.clearLayers();this._marker=undefined;this._circle=undefined},_unload:function(){this.stop();this._map.off("unload",this._unload,this)},_onLocationError:function(c){if(c.code==3&&this.options.locateOptions.watch){return}this.stop();this.options.onLocationError(c,this)},_onLocationFound:function(c){if(this._event&&(this._event.latlng.lat===c.latlng.lat&&this._event.latlng.lng===c.latlng.lng&&this._event.accuracy===c.accuracy)){return}if(!this._active){return}this._event=c;this._drawMarker();this._updateContainerStyle();switch(this.options.setView){case"once":if(this._justClicked){this.setView()}break;case"untilPan":if(!this._userPanned){this.setView()}break;case"always":this.setView();break;case false:break}this._justClicked=false},_onDrag:function(){if(this._event){this._userPanned=true;this._updateContainerStyle();this._drawMarker()}},_isFollowing:function(){if(!this._active){return false}if(this.options.setView==="always"){return true}else{if(this.options.setView==="untilPan"){return !this._userPanned}}},_isOutsideMapBounds:function(){if(this._event===undefined){return false}return this._map.options.maxBounds&&!this._map.options.maxBounds.contains(this._event.latlng)},_updateContainerStyle:function(){if(!this._container){return}if(this._active&&!this._event){this._setClasses("requesting")}else{if(this._isFollowing()){this._setClasses("following")}else{if(this._active){this._setClasses("active")}else{this._cleanClasses()}}}},_setClasses:function(c){if(c=="requesting"){a.DomUtil.removeClasses(this._container,"active following");a.DomUtil.addClasses(this._container,"requesting");a.DomUtil.removeClasses(this._icon,this.options.icon);a.DomUtil.addClasses(this._icon,this.options.iconLoading)}else{if(c=="active"){a.DomUtil.removeClasses(this._container,"requesting following");a.DomUtil.addClasses(this._container,"active");a.DomUtil.removeClasses(this._icon,this.options.iconLoading);a.DomUtil.addClasses(this._icon,this.options.icon)}else{if(c=="following"){a.DomUtil.removeClasses(this._container,"requesting");a.DomUtil.addClasses(this._container,"active following");a.DomUtil.removeClasses(this._icon,this.options.iconLoading);a.DomUtil.addClasses(this._icon,this.options.icon)}}}},_cleanClasses:function(){a.DomUtil.removeClass(this._container,"requesting");a.DomUtil.removeClass(this._container,"active");a.DomUtil.removeClass(this._container,"following");a.DomUtil.removeClasses(this._icon,this.options.iconLoading);a.DomUtil.addClasses(this._icon,this.options.icon)},_resetVariables:function(){this._active=false;this._justClicked=false;this._userPanned=false}});a.control.locate=function(c){return new a.Control.Locate(c)};(function(){var c=function(f,d,e){e=e.split(" ");e.forEach(function(g){a.DomUtil[f].call(this,d,g)})};a.DomUtil.addClasses=function(d,e){c("addClass",d,e)};a.DomUtil.removeClasses=function(d,e){c("removeClass",d,e)}})();return b},window));(function(){L.Control.NavBar=L.Control.extend({options:{position:"topleft",forwardTitle:"Vai avanti",backTitle:"Via indietro",homeTitle:"Vai alla estensione iniziale"},onAdd:function(c){if(!this.options.center){this.options.center=c.getCenter()}if(!this.options.zoom){this.options.zoom=c.getZoom()}options=this.options;var b="leaflet-control-navbar",a=L.DomUtil.create("div",b+" leaflet-bar");this._homeButton=this._createButton(options.homeTitle,"fa fa-home",a,this._goHome);this._fwdButton=this._createButton(options.forwardTitle,"fa fa-caret-right",a,this._goFwd);this._backButton=this._createButton(options.backTitle,"fa fa-caret-left",a,this._goBack);this._viewHistory=[{center:this.options.center,zoom:this.options.zoom}];this._curIndx=0;this._updateDisabled();c.once("moveend",function(){this._map.on("moveend",this._updateHistory,this)},this);c.setView(options.center,options.zoom);return a},onRemove:function(a){a.off("moveend",this._updateHistory,this)},_goHome:function(){if(this.options.bbox){try{this._map.fitBounds(this.options.bbox)}catch(a){this._map.setView(this.options.center,this.options.zoom)}}this._map.setView(this.options.center,this.options.zoom)},_goBack:function(){if(this._curIndx!==0){this._map.off("moveend",this._updateHistory,this);this._map.once("moveend",function(){this._map.on("moveend",this._updateHistory,this)},this);this._curIndx--;this._updateDisabled();var a=this._viewHistory[this._curIndx];this._map.setView(a.center,a.zoom)}},_goFwd:function(){if(this._curIndx!=this._viewHistory.length-1){this._map.off("moveend",this._updateHistory,this);this._map.once("moveend",function(){this._map.on("moveend",this._updateHistory,this)},this);this._curIndx++;this._updateDisabled();var a=this._viewHistory[this._curIndx];this._map.setView(a.center,a.zoom)}},_createButton:function(e,c,a,b){var d=L.DomUtil.create("a",c,a);d.href="#";d.title=e;L.DomEvent.on(d,"mousedown dblclick",L.DomEvent.stopPropagation).on(d,"click",L.DomEvent.stop).on(d,"click",b,this).on(d,"click",this._refocusOnMap,this);return d},_updateHistory:function(){var b={center:this._map.getCenter(),zoom:this._map.getZoom()};var a=this._curIndx+1;this._viewHistory.splice(a,this._viewHistory.length-a,b);this._curIndx++;this._updateDisabled()},_setFwdEnabled:function(b){var a="leaflet-disabled";var c="leaflet-control-navbar-fwd-disabled";if(b===true){L.DomUtil.removeClass(this._fwdButton,c);L.DomUtil.removeClass(this._fwdButton,a)}else{L.DomUtil.addClass(this._fwdButton,c);L.DomUtil.addClass(this._fwdButton,a)}},_setBackEnabled:function(c){var b="leaflet-disabled";var a="leaflet-control-navbar-back-disabled";if(c===true){L.DomUtil.removeClass(this._backButton,a);L.DomUtil.removeClass(this._backButton,b)}else{L.DomUtil.addClass(this._backButton,a);L.DomUtil.addClass(this._backButton,b)}},_updateDisabled:function(){if(this._curIndx==(this._viewHistory.length-1)){this._setFwdEnabled(false)}else{this._setFwdEnabled(true)}if(this._curIndx<=0){this._setBackEnabled(false)}else{this._setBackEnabled(true)}}});L.control.navbar=function(a){return new L.Control.NavBar(a)}})();(function(a){if(typeof define==="function"&&define.amd){define(["leaflet"],a)}else{if(typeof module!=="undefined"){module.exports=a(require("leaflet"))}else{if(typeof window.L==="undefined"){throw"Leaflet must be loaded first"}a(window.L)}}})(function(b){function a(h,k){var g=k.split("."),f=g.pop(),d=g.length,j=g[0],e=1;if(d>0){while((h=h[j])&&e<d){j=g[e++]}}if(h){return h[f]}}function c(d){return Object.prototype.toString.call(d)==="[object Object]"}b.Control.Search=b.Control.extend({includes:b.Mixin.Events,options:{url:"",layer:null,sourceData:null,jsonpParam:null,propertyLoc:"loc",propertyName:"title",formatData:null,filterData:null,moveToLocation:null,buildTip:null,container:"",zoom:null,minLength:1,initial:false,casesensitive:false,autoType:true,delayType:400,tooltipLimit:-1,tipAutoSubmit:true,firstTipSubmit:false,autoResize:true,collapsed:true,autoCollapse:false,autoCollapseTime:1200,textErr:"Non trovato",textCancel:"Cancel",textPlaceholder:"Ricerca...",position:"topleft",hideMarkerOnCollapse:false,marker:{icon:false,animate:true,circle:{radius:10,weight:3,color:"#e70",stroke:true,fillColor:"#e70",fillOpacity:0.4,fill:true}}},initialize:function(d){b.Util.setOptions(this,d||{});this._inputMinSize=this.options.textPlaceholder?this.options.textPlaceholder.length:10;this._layer=this.options.layer||new b.LayerGroup();this._filterData=this.options.filterData||this._defaultFilterData;this._formatData=this.options.formatData||this._defaultFormatData;this._moveToLocation=this.options.moveToLocation||this._defaultMoveToLocation;this._autoTypeTmp=this.options.autoType;this._countertips=0;this._recordsCache={};this._curReq=null},onAdd:function(d){this._map=d;this._container=b.DomUtil.create("div","leaflet-control-search");this._input=this._createInput(this.options.textPlaceholder,"search-input");this._tooltip=this._createTooltip("search-tooltip");this._cancel=this._createCancel(this.options.textCancel,"search-cancel");this._button=this._createButton(this.options.textPlaceholder,"search-button ms ms-zoom");this._alert=this._createAlert("search-alert");if(this.options.collapsed===false){this.expand(this.options.collapsed)}if(this.options.marker){if(this.options.marker instanceof b.Marker||this.options.marker instanceof b.CircleMarker){this._markerSearch=this.options.marker}else{if(c(this.options.marker)){this._markerSearch=new b.Control.Search.Marker([0,0],this.options.marker)}}this._markerSearch._isMarkerSearch=true}this.setLayer(this._layer);d.on({resize:this._handleAutoresize},this);return this._container},addTo:function(d){if(this.options.container){this._container=this.onAdd(d);this._wrapper=b.DomUtil.get(this.options.container);this._wrapper.style.position="relative";this._wrapper.appendChild(this._container)}else{b.Control.prototype.addTo.call(this,d)}return this},onRemove:function(d){this._recordsCache={}},setLayer:function(d){this._layer=d;this._layer.addTo(this._map);return this},showAlert:function(e){e=e||this.options.textErr;this._alert.style.display="block";this._alert.innerHTML=e;clearTimeout(this.timerAlert);var d=this;this.timerAlert=setTimeout(function(){d.hideAlert()},this.options.autoCollapseTime);return this},hideAlert:function(){this._alert.style.display="none";return this},cancel:function(){this._input.value="";this._handleKeypress({keyCode:8});this._input.size=this._inputMinSize;this._input.focus();this._cancel.style.display="none";this._hideTooltip();return this},expand:function(d){d=typeof d==="boolean"?d:true;this._input.style.display="block";b.DomUtil.addClass(this._container,"search-exp");if(d!==false){this._input.focus();this._map.on("dragstart click",this.collapse,this)}this.fire("search:expanded");return this},collapse:function(){this._hideTooltip();this.cancel();this._alert.style.display="none";this._input.blur();if(this.options.collapsed){this._input.style.display="none";this._cancel.style.display="none";b.DomUtil.removeClass(this._container,"search-exp");if(this.options.hideMarkerOnCollapse){this._map.removeLayer(this._markerSearch)}this._map.off("dragstart click",this.collapse,this)}this.fire("search:collapsed");return this},collapseDelayed:function(){if(!this.options.autoCollapse){return this}var d=this;clearTimeout(this.timerCollapse);this.timerCollapse=setTimeout(function(){d.collapse()},this.options.autoCollapseTime);return this},collapseDelayedStop:function(){clearTimeout(this.timerCollapse);return this},_createAlert:function(d){var e=b.DomUtil.create("div",d,this._container);e.style.display="none";b.DomEvent.on(e,"click",b.DomEvent.stop,this).on(e,"click",this.hideAlert,this);return e},_createInput:function(g,f){var e=b.DomUtil.create("label",f,this._container);var d=b.DomUtil.create("input",f,this._container);d.type="text";d.size=this._inputMinSize;d.value="";d.autocomplete="off";d.autocorrect="off";d.autocapitalize="off";d.placeholder=g;d.style.display="none";d.role="search";d.id=d.role+d.type+d.size;e.htmlFor=d.id;e.style.display="none";e.value=g;b.DomEvent.disableClickPropagation(d).on(d,"keydown",this._handleKeypress,this).on(d,"blur",this.collapseDelayed,this).on(d,"focus",this.collapseDelayedStop,this);return d},_createCancel:function(f,d){var e=b.DomUtil.create("a",d,this._container);e.href="#";e.title=f;e.style.display="none";e.innerHTML="<span>&otimes;</span>";b.DomEvent.on(e,"click",b.DomEvent.stop,this).on(e,"click",this.cancel,this);return e},_createButton:function(f,e){var d=b.DomUtil.create("a",e,this._container);d.href="#";d.title=f;b.DomEvent.on(d,"click",b.DomEvent.stop,this).on(d,"click",this._handleSubmit,this).on(d,"focus",this.collapseDelayedStop,this).on(d,"blur",this.collapseDelayed,this);return d},_createTooltip:function(e){var d=b.DomUtil.create("ul",e,this._container);d.style.display="none";var f=this;b.DomEvent.disableClickPropagation(d).on(d,"blur",this.collapseDelayed,this).on(d,"mousewheel",function(g){f.collapseDelayedStop();b.DomEvent.stopPropagation(g)},this).on(d,"mouseover",function(g){f.collapseDelayedStop()},this);return d},_createTip:function(g,f){var e;if(this.options.buildTip){e=this.options.buildTip.call(this,g,f);if(typeof e==="string"){var d=b.DomUtil.create("div");d.innerHTML=e;e=d.firstChild}}else{e=b.DomUtil.create("li","");e.innerHTML=g}b.DomUtil.addClass(e,"search-tip");e._text=g;if(this.options.tipAutoSubmit){b.DomEvent.disableClickPropagation(e).on(e,"click",b.DomEvent.stop,this).on(e,"click",function(h){this._input.value=g;this._handleAutoresize();this._input.focus();this._hideTooltip();this._handleSubmit()},this)}return e},_getUrl:function(d){return(typeof this.options.url==="function")?this.options.url(d):this.options.url},_defaultFilterData:function(k,e){var f,h,d,j={};k=k.replace(/[.*+?^${}()|[\]\\]/g,"");if(k===""){return[]}f=this.options.initial?"^":"";h=!this.options.casesensitive?"i":undefined;d=new RegExp(f+k,h);for(var g in e){if(d.test(g)){j[g]=e[g]}}return j},showTooltip:function(d){var f;this._countertips=0;this._tooltip.innerHTML="";this._tooltip.currentSelection=-1;for(var e in d){if(++this._countertips==this.options.tooltipLimit){break}f=this._createTip(e,d[e]);this._tooltip.appendChild(f)}if(this._countertips>0){this._tooltip.style.display="block";if(this._autoTypeTmp){this._autoType()}this._autoTypeTmp=this.options.autoType}else{this._hideTooltip()}this._tooltip.scrollTop=0;return this._countertips},_hideTooltip:function(){this._tooltip.style.display="none";this._tooltip.innerHTML="";return 0},_defaultFormatData:function(f){var g=this.options.propertyName,d=this.options.propertyLoc,e,h={};if(b.Util.isArray(d)){for(e in f){h[a(f[e],g)]=b.latLng(f[e][d[0]],f[e][d[1]])}}else{for(e in f){h[a(f[e],g)]=b.latLng(a(f[e],d))}}return h},_recordsFromJsonp:function(g,d){b.Control.Search.callJsonp=d;var e=b.DomUtil.create("script","leaflet-search-jsonp",document.getElementsByTagName("body")[0]),f=b.Util.template(this._getUrl(g)+"&"+this.options.jsonpParam+"=L.Control.Search.callJsonp",{s:g});e.type="text/javascript";e.src=f;return{abort:function(){e.parentNode.removeChild(e)}}},_recordsFromAjax:function(j,e){if(window.XMLHttpRequest===undefined){window.XMLHttpRequest=function(){try{return new ActiveXObject("Microsoft.XMLHTTP.6.0")}catch(l){try{return new ActiveXObject("Microsoft.XMLHTTP.3.0")}catch(k){throw new Error("XMLHttpRequest is not supported")}}}}var d=(b.Browser.ie&&!window.atob&&document.querySelector),h=d?new XDomainRequest():new XMLHttpRequest(),f=b.Util.template(this._getUrl(j),{s:j});h.open("GET",f);var g=this;h.onload=function(){e(JSON.parse(h.responseText))};h.onreadystatechange=function(){if(h.readyState===4&&h.status===200){this.onload()}};h.send();return h},_recordsFromLayer:function(){var e=this,d={},f=this.options.propertyName,g;this._layer.eachLayer(function(h){if(h.hasOwnProperty("_isMarkerSearch")){return}if(h instanceof b.Marker||h instanceof b.CircleMarker){try{if(a(h.options,f)){g=h.getLatLng();g.layer=h;d[a(h.options,f)]=g}else{if(a(h.feature.properties,f)){g=h.getLatLng();g.layer=h;d[a(h.feature.properties,f)]=g}else{throw new Error("propertyName '"+f+"' not found in marker")}}}catch(j){if(console){console.warn(j)}}}else{if(h.hasOwnProperty("feature")){try{if(h.feature.properties.hasOwnProperty(f)){g=h.getBounds().getCenter();g.layer=h;d[h.feature.properties[f]]=g}else{throw new Error("propertyName '"+f+"' not found in feature")}}catch(j){if(console){console.warn(j)}}}else{if(h instanceof b.LayerGroup){h.eachLayer(function(k){g=k.getLatLng();g.layer=k;d[k.feature.properties[f]]=g})}}}},this);return d},_autoType:function(){var g=this._input.value.length,f=this._tooltip.firstChild._text,e=f.length;if(f.indexOf(this._input.value)===0){this._input.value=f;this._handleAutoresize();if(this._input.createTextRange){var d=this._input.createTextRange();d.collapse(true);d.moveStart("character",g);d.moveEnd("character",e);d.select()}else{if(this._input.setSelectionRange){this._input.setSelectionRange(g,e)}else{if(this._input.selectionStart){this._input.selectionStart=g;this._input.selectionEnd=e}}}}},_hideAutoType:function(){var e;if((e=this._input.selection)&&e.empty){e.empty()}else{if(this._input.createTextRange){e=this._input.createTextRange();e.collapse(true);var d=this._input.value.length;e.moveStart("character",d);e.moveEnd("character",d);e.select()}else{if(this._input.getSelection){this._input.getSelection().removeAllRanges()}this._input.selectionStart=this._input.selectionEnd}}},_handleKeypress:function(f){switch(f.keyCode){case 27:this.collapse();break;case 13:if(this._countertips==1||(this.options.firstTipSubmit&&this._countertips>0)){this._handleArrowSelect(1)}this._handleSubmit();break;case 38:this._handleArrowSelect(-1);break;case 40:this._handleArrowSelect(1);break;case 8:case 45:case 46:this._autoTypeTmp=false;break;case 37:case 39:case 16:case 17:case 35:case 36:break;default:if(this._input.value.length){this._cancel.style.display="block"}else{this._cancel.style.display="none"}if(this._input.value.length>=this.options.minLength){var d=this;clearTimeout(this.timerKeypress);this.timerKeypress=setTimeout(function(){d._fillRecordsCache()},this.options.delayType)}else{this._hideTooltip()}}this._handleAutoresize()},searchText:function(e){var d=e.charCodeAt(e.length);this._input.value=e;this._input.style.display="block";b.DomUtil.addClass(this._container,"search-exp");this._autoTypeTmp=false;this._handleKeypress({keyCode:d})},_fillRecordsCache:function(){var f=this._input.value,e=this,d;if(this._curReq&&this._curReq.abort){this._curReq.abort()}b.DomUtil.addClass(this._container,"search-load");if(this.options.layer){this._recordsCache=this._recordsFromLayer();d=this._filterData(this._input.value,this._recordsCache);this.showTooltip(d);b.DomUtil.removeClass(this._container,"search-load")}else{if(this.options.sourceData){this._retrieveData=this.options.sourceData}else{if(this.options.url){this._retrieveData=this.options.jsonpParam?this._recordsFromJsonp:this._recordsFromAjax}}this._curReq=this._retrieveData.call(this,f,function(g){e._recordsCache=e._formatData(g);if(e.options.sourceData){d=e._filterData(e._input.value,e._recordsCache)}else{d=e._recordsCache}e.showTooltip(d);b.DomUtil.removeClass(e._container,"search-load")})}},_handleAutoresize:function(){if(this._input.style.maxWidth!=this._map._container.offsetWidth){this._input.style.maxWidth=b.DomUtil.getStyle(this._map._container,"width")}if(this.options.autoResize&&(this._container.offsetWidth+45<this._map._container.offsetWidth)){this._input.size=this._input.value.length<this._inputMinSize?this._inputMinSize:this._input.value.length}},_handleArrowSelect:function(d){var f=this._tooltip.hasChildNodes()?this._tooltip.childNodes:[];for(i=0;i<f.length;i++){b.DomUtil.removeClass(f[i],"search-tip-select")}if((d==1)&&(this._tooltip.currentSelection>=(f.length-1))){b.DomUtil.addClass(f[this._tooltip.currentSelection],"search-tip-select")}else{if((d==-1)&&(this._tooltip.currentSelection<=0)){this._tooltip.currentSelection=-1}else{if(this._tooltip.style.display!="none"){this._tooltip.currentSelection+=d;b.DomUtil.addClass(f[this._tooltip.currentSelection],"search-tip-select");this._input.value=f[this._tooltip.currentSelection]._text;var e=f[this._tooltip.currentSelection].offsetTop;if(e+f[this._tooltip.currentSelection].clientHeight>=this._tooltip.scrollTop+this._tooltip.clientHeight){this._tooltip.scrollTop=e-this._tooltip.clientHeight+f[this._tooltip.currentSelection].clientHeight}else{if(e<=this._tooltip.scrollTop){this._tooltip.scrollTop=e}}}}}},_handleSubmit:function(){this._hideAutoType();this.hideAlert();this._hideTooltip();if(this._input.style.display=="none"){this.expand()}else{if(this._input.value===""){this.collapse()}else{var d=this._getLocation(this._input.value);if(d===false){this.showAlert()}else{this.showLocation(d,this._input.value);this.fire("search:locationfound",{latlng:d,text:this._input.value,layer:d.layer?d.layer:null})}}}},_getLocation:function(d){if(this._recordsCache.hasOwnProperty(d)){return this._recordsCache[d]}else{return false}},_defaultMoveToLocation:function(f,e,d){if(this.options.zoom){this._map.setView(f,this.options.zoom)}else{this._map.panTo(f)}},showLocation:function(f,e){var d=this;d._map.once("moveend zoomend",function(g){if(d._markerSearch){d._markerSearch.addTo(d._map).setLatLng(f)}});d._moveToLocation(f,e,d._map);if(d.options.autoCollapse){d.collapse()}return d}});b.Control.Search.Marker=b.Marker.extend({includes:b.Mixin.Events,options:{icon:new b.Icon.Default(),animate:true,circle:{radius:10,weight:3,color:"#e03",stroke:true,fill:false}},initialize:function(e,d){b.setOptions(this,d);if(d.icon===true){d.icon=new b.Icon.Default()}b.Marker.prototype.initialize.call(this,e,d);if(c(this.options.circle)){this._circleLoc=new b.CircleMarker(e,this.options.circle)}},onAdd:function(d){b.Marker.prototype.onAdd.call(this,d);if(this._circleLoc){d.addLayer(this._circleLoc);if(this.options.animate){this.animate()}}},onRemove:function(d){b.Marker.prototype.onRemove.call(this,d);if(this._circleLoc){d.removeLayer(this._circleLoc)}},setLatLng:function(d){b.Marker.prototype.setLatLng.call(this,d);if(this._circleLoc){this._circleLoc.setLatLng(d)}return this},_initIcon:function(){if(this.options.icon){b.Marker.prototype._initIcon.call(this)}},_removeIcon:function(){if(this.options.icon){b.Marker.prototype._removeIcon.call(this)}},animate:function(){if(this._circleLoc){var j=this._circleLoc,d=200,f=5,e=parseInt(j._radius/f),h=this.options.circle.radius,k=j._radius*2,g=0;j._timerAnimLoc=setInterval(function(){g+=0.5;e+=g;k-=e;j.setRadius(k);if(k<h){clearInterval(j._timerAnimLoc);j.setRadius(h)}},d)}return this}});b.Map.addInitHook(function(){if(this.options.searchControl){this.searchControl=b.control.search(this.options.searchControl);this.addControl(this.searchControl)}});b.control.search=function(d){return new b.Control.Search(d)};return b.Control.Search});GV.Models.RlLayer=Backbone.Model.extend({initialize:function(){if(this.get("minScale")===0){this.set("minScale",591657550)}this.set("zIndex",GV.layerFactory.lastZIndex++);if(GV.app.map){this.set("inRange",GV.app.map.layerInRange(this.attributes))}else{this.set("inRange",true)}}});GV.Models.RlLayers=Backbone.Collection.extend({model:GV.Models.RlLayer});GV.Models.RlMap=Backbone.Model.extend({urlRoot:"/geoservices/REST/config/map/",initialize:function(){var a=new GV.Models.RlLayers(this.get("layers"));a.models=a.models.reverse();this.set("layers",a);this.get("layers").on("change",this.layersChanged,this);this.set("type","map")},layersChanged:function(a){this.trigger("layer:change",a)},parse:function(a){return a.data},toJSON:function(){var a=Backbone.Model.prototype.toJSON.call(this);if(a.layers&&a.layers.toJSON){a.layers=a.layers.toJSON()}return a}});GV.Models.RlMaps=Backbone.Collection.extend({model:GV.Models.RlMap,url:"/geoservices/REST/config/map/",add:function(c,a){var b={at:0};if(a){_.extend(b,a)}Backbone.Collection.prototype.add.call(this,c,b)},getLayerConfig:function(b){var a=null;_.each(this.models,function(d){var c=d.get("layers").models;a=_.find(c,function(e){return e.attributes.name===b})});if(a){return a.attributes}},getAllLayersConfig:function(){var a=[];_.each(this.models,function(b){_.each(b.get("layers").toJSON(),function(c){a.push(c)})});return a},setLayerAttribute:function(b,c,d){var a=null;_.each(this.models,function(f){var e=f.get("layers").models;_.each(e,function(g){if(g.get("name")===b){g.set(c,d)}})})}});GV.Views.HtmlPanelTitle=Mn.View.extend({className:"gv-panel-title gv-bgcolor",events:{"click .gv-close":"hide"},hide:function(){GV.app.layout.getRegion(this.options.regionId).empty()},getTemplate:function(){var a=["<div>","<b>RISULTATO INFO</b>",'<button class="gv-close" type="button"></button>',"</div>",""].join("\n");return _.template(a)}});GV.Views.HtmlPanelBody=Mn.View.extend({tagName:"div",className:"gv-html-panel-body gv-bgcolor",getTemplate:function(){var a=["<iframe id='",this.options.iFrameId,"' style='border:none'  width=",this.options.width," height= ",this.options.height," ></iframe>",""].join("");return _.template(a)()},render:function(){this.el.innerHTML=this.getTemplate();return this}});GV.Views.HtmlPanelLayout=Mn.View.extend({template:_.template("<div id='gv-html-panel-title'></div><div id='gv-html-panel-body'></div>"),regions:{title:"#gv-html-panel-title",body:"#gv-html-panel-body"},onRender:function(){this.options.iFrameId=this.options.divId+"-frame";this.showChildView("title",new GV.Views.HtmlPanelTitle({regionId:this.options.regionId}));this.showChildView("body",new GV.Views.HtmlPanelBody({width:this.options.width,height:this.options.height,iFrameId:this.options.iFrameId}));$("#"+this.options.divId).css({display:"block"})},onAttach:function(){var a="#"+this.options.iFrameId;$(a).contents().find("body").html(this.options.html);setTimeout(function(){var b=parseInt($(a).contents().find("body").height()+8);$(a).css("height",b+"px");var c=parseInt($(a).contents().find("body").width());$(a).css("width",c+"px")},50)}});GV.Views.InfoWmsBaseItem=Mn.View.extend({tagName:"ul",className:"gv-list-group",getTemplate:function(){var a=['<li class= "gv-info-wms-list-item">','<span class="gv-info-wms-list-item-span"><%= label %> ( <%= layer.legend.label %> )</span>',"</li>"].join("\n");return _.template(a)},events:{"click .gv-info-wms-list-item-span":"featureInfo"},featureInfo:function(a){GV.app.infoWmsManager.showFeatureInfo(this.model)}});GV.Views.InfoWmsBaseBody=Mn.CollectionView.extend({tagName:"ul",className:"gv-list-group",childView:GV.Views.InfoWmsBaseItem});GV.Views.InfoWmsBaseTitle=Mn.View.extend({className:"gv-info-wms-list-title gv-bgcolor",events:{"click .gv-close":"hide"},hide:function(){GV.app.layout.getRegion("infowms").empty()},getTemplate:function(){var a=["<div>","<b>RISULTATO INFO</b>",'<button class="gv-close" type="button"></button>',"</div>",""].join("\n");return _.template(a)}});GV.Views.InfoWmsBaseLayout=Mn.View.extend({template:_.template("<div id='gv-info-wms-base-title'></div><div id='gv-info-wms-list-body'></div>"),regions:{title:"#gv-info-wms-list-title",body:"#gv-info-wms-list-body"},onRender:function(){this.showChildView("title",new GV.Views.InfoWmsBaseTitle());this.showChildView("body",new GV.Views.InfoWmsBaseBody({collection:GV.app.InfoWmsBase}));$("#gv-info-wms").css({display:"block"})}});GV.Views.InfoWmsListItem=Mn.View.extend({tagName:"ul",className:"gv-list-group",getTemplate:function(){var a=['<li class= "gv-info-wms-list-item">','<span class="gv-info-wms-list-item-span"><%= label %> ( <%= layer.legend.label %> )</span>',"</li>"].join("\n");return _.template(a)},events:{"click .gv-info-wms-list-item-span":"featureInfo"},featureInfo:function(a){GV.app.infoWmsManager.showFeatureInfo(this.model)}});GV.Views.InfoWmsListBody=Mn.CollectionView.extend({tagName:"ul",className:"gv-list-group",childView:GV.Views.InfoWmsListItem});GV.Views.InfoWmsListTitle=Mn.View.extend({className:"gv-panel-title gv-bgcolor",events:{"click .gv-close":"hide"},hide:function(){GV.app.layout.getRegion("infowms").empty()},getTemplate:function(){var a=["<div>","<b>RISULTATO INFO</b>",'<button class="gv-close" type="button"></button>',"</div>",""].join("\n");return _.template(a)}});GV.Views.InfoWmsListLayout=Mn.View.extend({template:_.template("<div id='gv-info-wms-list-title'></div><div id='gv-info-wms-list-body'></div>"),regions:{title:"#gv-info-wms-list-title",body:"#gv-info-wms-list-body"},onRender:function(){this.showChildView("title",new GV.Views.InfoWmsListTitle());this.showChildView("body",new GV.Views.InfoWmsListBody({collection:GV.app.infoWmsList}));$("#gv-info-wms").css({display:"block"})}});GV.Views.Layout=Mn.View.extend({template:false,controls:[],initialize:function(a){this.setDrag();this.el=a.el;this.config=a.config.application.layout;this.addMapView(a);if(a.config.application.mapOptions&&a.config.application.mapOptions.infoWms){GV.app.infoWmsManager=new GV.InfoWmsManager();GV.app.infoWmsManager.activate(this.map,a.config);GV.app.infoWmsList=new Backbone.Collection();GV.app.getContainer().append("<div id='gv-info-wms' class='draggable'></div>");this.addRegion("infowms","#gv-info-wms")}this.listenTo(GV.rlMaps,"add",this.onAddMap)},setDrag:function(){interact(".draggable").draggable({inertia:true,restrict:{restriction:"parent",endOnly:true,elementRect:{top:0,left:0,bottom:1,right:1}},autoScroll:true,onmove:a,onend:function(c){var b=c.target.querySelector("p");b&&(b.textContent="moved a distance of "+(Math.sqrt(c.dx*c.dx+c.dy*c.dy)|0)+"px")}});function a(c){var d=c.target,b=(parseFloat(d.getAttribute("data-x"))||0)+c.dx,e=(parseFloat(d.getAttribute("data-y"))||0)+c.dy;d.style.webkitTransform=d.style.transform="translate("+b+"px, "+e+"px)";d.setAttribute("data-x",b);d.setAttribute("data-y",e)}window.dragMoveListener=a},render:function(a){if(this.map&&this.map.loadBaseLayers){this.map.loadBaseLayers(a.config.baseLayers)}if(this.map&&this.map.loadControls){this.map.loadControls(a)}if(this.config.toolbar){this.addToolbars(this.config.toolbar)}return this},addMapView:function(b){var a=new GV.Views.MapView();$(b.el).append(a.el);a.render(b);this.map=a.map},addToolbars:function(a){_.each(a,function(c){var b=c.position||"topleft";_.each(c.items,function(d){d.options=d.options||{};d.options.position=d.options.position||b;this.addButton(d)},this)},this)},addButton:function(b){if(GV.Buttons[b.name]){var a=GV.Buttons[b.name](b.options,this.map);if(a){a.name=b.name;this.controls.push(a);a.addTo(this.map)}}else{console.log("Bottone "+b.name+" non esistente")}},onAddMap:function(a){var b=a.attributes.layers.toJSON();this.map.loadLayers(b)},getControl:function(a){return _.find(GV.app.layout.controls,function(b){return b.name===a})},getControlOption:function(c,a){var b=this.getControl(c);if(b){return b.options[a]}}});GV.Views.LegendItem=Mn.CompositeView.extend({tagName:"ul",className:"gv-list-group",getTemplate:function(){var a;if(this.model.get("type")==="map"){a=['<li class="gv-list-legend-map-item"><%= name %>','<% if (!GV.app.layout.getControlOption("legend", "noInfoMap")){ %>','<a class="gv-legend-map-info ms ms-information" title="Scheda metadati" href="/geoservices/REST/metadata/scheda_xml/<%= id %>?style=metadati.xsl" target="_blank"></a>',"<% } %>","</li>"].join("\n")}else{a=['<li class= <%= (inRange) ? "gv-list-legend-layer-item" : "gv-list-legend-layer-disabled-item" %> >','<img class="gv-legend-layer-icon" src="<%= legend.icon %>" width="24px" height="24px">',"<% if (inRange){ %>",'<span class="gv-layer-visibility-span"><input type="checkbox" class="gv-layer-visibility-cb" <%= (visible) ? "checked" : "" %> ></span>',"<% } else { %>",'<span class="gv-layer-visibility-span"><input type="checkbox" class="gv-layer-visibility-cb" disabled></span>',"<% } %>",'<span class="gv-layer-title-span"><%= legend.label %></span>',"</li>"].join("\n")}return _.template(a)},initialize:function(){this.collection=this.model.get("layers");this.listenTo(this.collection,"change:inRange",this.onChangeInRangeLayer)},onChangeInRangeLayer:function(a){console.log("GV.Views.LegendItem: onChangeInRangeLayer");console.log(a);this.render()},events:{"click .gv-layer-visibility-cb":"setLayerVisibility"},setLayerVisibility:function(c){var a=this.model.attributes;if(a.type!=="map"){var b=c.currentTarget.checked;c.stopPropagation();this.model.set("visible",b);GV.app.map.setLayerVisible(a,b)}}});GV.Views.LegendBody=Mn.CollectionView.extend({tagName:"ul",className:"gv-list-group",childView:GV.Views.LegendItem});GV.Views.LegendTitle=Mn.View.extend({className:"gv-panel-title gv-bgcolor",events:{"click .gv-close":"hideLegend","click .gv-legend-add":"addMap"},hideLegend:function(){$("#gv-legend").fadeOut("slow");$("#gv-legend-button").css({display:"block"})},addMap:function(){},getTemplate:function(){var a=["<div>","<b>LEGENDA</b>",'<button class="gv-close" type="button"></button>',"<% if (!noAddMapButton){ %>",'<button class="gv-legend-add ms ms-layers-add" title="Aggiungi Mappa" type="button"></button>',"<% } %>","</div>",""].join("\n");return _.template(a)({noAddMapButton:this.options.noAddMap})}});GV.Views.LegendLayout=Mn.View.extend({template:_.template("<div id='gv-legend-title'></div><div id='gv-legend-body'></div>"),regions:{title:"#gv-legend-title",body:"#gv-legend-body"},onRender:function(){this.showChildView("title",new GV.Views.LegendTitle({noAddMap:this.options.noAddMap}));this.showChildView("body",new GV.Views.LegendBody({collection:GV.rlMaps}))}});GV.Views.MapView=Backbone.View.extend({id:"gv-map",render:function(a){var b=a.mapType||"leaflet";if(b==="leaflet"){this.map=new GV.Map(a)}return this}});