GV.Views.InfoWmsListItem = Mn.View.extend({
    tagName: "ul",
    className: "gv-list-group",
    getTemplate: function () {
        var tpl = [
            '<li class= "gv-info-wms-list-item">',
            '<span class="gv-info-wms-list-item-span"><%= label %> ( <%= layer.legend.label %> )</span>',
            '</li>'
        ].join('\n');
        return _.template(tpl);
    },
    events: {
        'click .gv-info-wms-list-item-span': 'featureInfo'
    },
    featureInfo: function (e) {
        "use strict";
        GV.app.infoWmsManager.showFeatureInfo(this.model);
    }
});

GV.Views.InfoWmsListBody = Mn.CollectionView.extend({
    tagName: "ul",
    className: "gv-list-group",
    childView: GV.Views.InfoWmsListItem
});

GV.Views.InfoWmsListTitle = Mn.View.extend({
    className: 'gv-panel-title gv-bgcolor',
    events: {
        'click .gv-close': 'hide'
    },
    hide: function () {
        GV.app.layout.getRegion('infowms').empty();
        GV.app.infoWmsManager.clearHiliteLayer();
    },
    getTemplate: function () {
        var tpl = [
            '<div>',
            '<b>RISULTATO INFO</b>',
            '<button class="gv-close" type="button">Ã—</button>',
            '</div>',
            ''
        ].join('\n');
        return _.template(tpl);
    }
});

GV.Views.InfoWmsListLayout = Mn.View.extend({
    template: _.template("<div id='gv-info-wms-list-title'></div><div id='gv-info-wms-list-body'></div>"),
    regions: {
        title: "#gv-info-wms-list-title",
        body: "#gv-info-wms-list-body"
    },
    onRender: function() {
        "use strict";
        this.showChildView('title', new GV.Views.InfoWmsListTitle());
        this.showChildView('body', new GV.Views.InfoWmsListBody({ collection: GV.app.infoWmsList }));
        $('#gv-info-wms').css({ display: 'block' });
    }
});
