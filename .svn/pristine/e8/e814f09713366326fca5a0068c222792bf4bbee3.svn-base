//     Underscore.js 1.8.3
//     http://underscorejs.org
//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.
(function(){function n(n){function t(t,r,e,u,i,o){for(;i>=0&&o>i;i+=n){var a=u?u[i]:i;e=r(e,t[a],a,t)}return e}return function(r,e,u,i){e=b(e,i,4);var o=!k(r)&&m.keys(r),a=(o||r).length,c=n>0?0:a-1;return arguments.length<3&&(u=r[o?o[c]:c],c+=n),t(r,e,u,o,c,a)}}function t(n){return function(t,r,e){r=x(r,e);for(var u=O(t),i=n>0?0:u-1;i>=0&&u>i;i+=n)if(r(t[i],i,t))return i;return-1}}function r(n,t,r){return function(e,u,i){var o=0,a=O(e);if("number"==typeof i)n>0?o=i>=0?i:Math.max(i+a,o):a=i>=0?Math.min(i+1,a):i+a+1;else if(r&&i&&a)return i=r(e,u),e[i]===u?i:-1;if(u!==u)return i=t(l.call(e,o,a),m.isNaN),i>=0?i+o:-1;for(i=n>0?o:a-1;i>=0&&a>i;i+=n)if(e[i]===u)return i;return-1}}function e(n,t){var r=I.length,e=n.constructor,u=m.isFunction(e)&&e.prototype||a,i="constructor";for(m.has(n,i)&&!m.contains(t,i)&&t.push(i);r--;)i=I[r],i in n&&n[i]!==u[i]&&!m.contains(t,i)&&t.push(i)}var u=this,i=u._,o=Array.prototype,a=Object.prototype,c=Function.prototype,f=o.push,l=o.slice,s=a.toString,p=a.hasOwnProperty,h=Array.isArray,v=Object.keys,g=c.bind,y=Object.create,d=function(){},m=function(n){return n instanceof m?n:this instanceof m?void(this._wrapped=n):new m(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=m),exports._=m):u._=m,m.VERSION="1.8.3";var b=function(n,t,r){if(t===void 0)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}},x=function(n,t,r){return null==n?m.identity:m.isFunction(n)?b(n,t,r):m.isObject(n)?m.matcher(n):m.property(n)};m.iteratee=function(n,t){return x(n,t,1/0)};var _=function(n,t){return function(r){var e=arguments.length;if(2>e||null==r)return r;for(var u=1;e>u;u++)for(var i=arguments[u],o=n(i),a=o.length,c=0;a>c;c++){var f=o[c];t&&r[f]!==void 0||(r[f]=i[f])}return r}},j=function(n){if(!m.isObject(n))return{};if(y)return y(n);d.prototype=n;var t=new d;return d.prototype=null,t},w=function(n){return function(t){return null==t?void 0:t[n]}},A=Math.pow(2,53)-1,O=w("length"),k=function(n){var t=O(n);return"number"==typeof t&&t>=0&&A>=t};m.each=m.forEach=function(n,t,r){t=b(t,r);var e,u;if(k(n))for(e=0,u=n.length;u>e;e++)t(n[e],e,n);else{var i=m.keys(n);for(e=0,u=i.length;u>e;e++)t(n[i[e]],i[e],n)}return n},m.map=m.collect=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=Array(u),o=0;u>o;o++){var a=e?e[o]:o;i[o]=t(n[a],a,n)}return i},m.reduce=m.foldl=m.inject=n(1),m.reduceRight=m.foldr=n(-1),m.find=m.detect=function(n,t,r){var e;return e=k(n)?m.findIndex(n,t,r):m.findKey(n,t,r),e!==void 0&&e!==-1?n[e]:void 0},m.filter=m.select=function(n,t,r){var e=[];return t=x(t,r),m.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e},m.reject=function(n,t,r){return m.filter(n,m.negate(x(t)),r)},m.every=m.all=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(!t(n[o],o,n))return!1}return!0},m.some=m.any=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(t(n[o],o,n))return!0}return!1},m.contains=m.includes=m.include=function(n,t,r,e){return k(n)||(n=m.values(n)),("number"!=typeof r||e)&&(r=0),m.indexOf(n,t,r)>=0},m.invoke=function(n,t){var r=l.call(arguments,2),e=m.isFunction(t);return m.map(n,function(n){var u=e?t:n[t];return null==u?u:u.apply(n,r)})},m.pluck=function(n,t){return m.map(n,m.property(t))},m.where=function(n,t){return m.filter(n,m.matcher(t))},m.findWhere=function(n,t){return m.find(n,m.matcher(t))},m.max=function(n,t,r){var e,u,i=-1/0,o=-1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],e>i&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(u>o||u===-1/0&&i===-1/0)&&(i=n,o=u)});return i},m.min=function(n,t,r){var e,u,i=1/0,o=1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],i>e&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(o>u||1/0===u&&1/0===i)&&(i=n,o=u)});return i},m.shuffle=function(n){for(var t,r=k(n)?n:m.values(n),e=r.length,u=Array(e),i=0;e>i;i++)t=m.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},m.sample=function(n,t,r){return null==t||r?(k(n)||(n=m.values(n)),n[m.random(n.length-1)]):m.shuffle(n).slice(0,Math.max(0,t))},m.sortBy=function(n,t,r){return t=x(t,r),m.pluck(m.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0)return 1;if(e>r||e===void 0)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var u={};return r=x(r,e),m.each(t,function(e,i){var o=r(e,i,t);n(u,e,o)}),u}};m.groupBy=F(function(n,t,r){m.has(n,r)?n[r].push(t):n[r]=[t]}),m.indexBy=F(function(n,t,r){n[r]=t}),m.countBy=F(function(n,t,r){m.has(n,r)?n[r]++:n[r]=1}),m.toArray=function(n){return n?m.isArray(n)?l.call(n):k(n)?m.map(n,m.identity):m.values(n):[]},m.size=function(n){return null==n?0:k(n)?n.length:m.keys(n).length},m.partition=function(n,t,r){t=x(t,r);var e=[],u=[];return m.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},m.first=m.head=m.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:m.initial(n,n.length-t)},m.initial=function(n,t,r){return l.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},m.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:m.rest(n,Math.max(0,n.length-t))},m.rest=m.tail=m.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},m.compact=function(n){return m.filter(n,m.identity)};var S=function(n,t,r,e){for(var u=[],i=0,o=e||0,a=O(n);a>o;o++){var c=n[o];if(k(c)&&(m.isArray(c)||m.isArguments(c))){t||(c=S(c,t,r));var f=0,l=c.length;for(u.length+=l;l>f;)u[i++]=c[f++]}else r||(u[i++]=c)}return u};m.flatten=function(n,t){return S(n,t,!1)},m.without=function(n){return m.difference(n,l.call(arguments,1))},m.uniq=m.unique=function(n,t,r,e){m.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=x(r,e));for(var u=[],i=[],o=0,a=O(n);a>o;o++){var c=n[o],f=r?r(c,o,n):c;t?(o&&i===f||u.push(c),i=f):r?m.contains(i,f)||(i.push(f),u.push(c)):m.contains(u,c)||u.push(c)}return u},m.union=function(){return m.uniq(S(arguments,!0,!0))},m.intersection=function(n){for(var t=[],r=arguments.length,e=0,u=O(n);u>e;e++){var i=n[e];if(!m.contains(t,i)){for(var o=1;r>o&&m.contains(arguments[o],i);o++);o===r&&t.push(i)}}return t},m.difference=function(n){var t=S(arguments,!0,!0,1);return m.filter(n,function(n){return!m.contains(t,n)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(n){for(var t=n&&m.max(n,O).length||0,r=Array(t),e=0;t>e;e++)r[e]=m.pluck(n,e);return r},m.object=function(n,t){for(var r={},e=0,u=O(n);u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},m.findIndex=t(1),m.findLastIndex=t(-1),m.sortedIndex=function(n,t,r,e){r=x(r,e,1);for(var u=r(t),i=0,o=O(n);o>i;){var a=Math.floor((i+o)/2);r(n[a])<u?i=a+1:o=a}return i},m.indexOf=r(1,m.findIndex,m.sortedIndex),m.lastIndexOf=r(-1,m.findLastIndex),m.range=function(n,t,r){null==t&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;e>i;i++,n+=r)u[i]=n;return u};var E=function(n,t,r,e,u){if(!(e instanceof t))return n.apply(r,u);var i=j(n.prototype),o=n.apply(i,u);return m.isObject(o)?o:i};m.bind=function(n,t){if(g&&n.bind===g)return g.apply(n,l.call(arguments,1));if(!m.isFunction(n))throw new TypeError("Bind must be called on a function");var r=l.call(arguments,2),e=function(){return E(n,e,t,this,r.concat(l.call(arguments)))};return e},m.partial=function(n){var t=l.call(arguments,1),r=function(){for(var e=0,u=t.length,i=Array(u),o=0;u>o;o++)i[o]=t[o]===m?arguments[e++]:t[o];for(;e<arguments.length;)i.push(arguments[e++]);return E(n,r,this,this,i)};return r},m.bindAll=function(n){var t,r,e=arguments.length;if(1>=e)throw new Error("bindAll must be passed function names");for(t=1;e>t;t++)r=arguments[t],n[r]=m.bind(n[r],n);return n},m.memoize=function(n,t){var r=function(e){var u=r.cache,i=""+(t?t.apply(this,arguments):e);return m.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},m.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},m.defer=m.partial(m.delay,m,1),m.throttle=function(n,t,r){var e,u,i,o=null,a=0;r||(r={});var c=function(){a=r.leading===!1?0:m.now(),o=null,i=n.apply(e,u),o||(e=u=null)};return function(){var f=m.now();a||r.leading!==!1||(a=f);var l=t-(f-a);return e=this,u=arguments,0>=l||l>t?(o&&(clearTimeout(o),o=null),a=f,i=n.apply(e,u),o||(e=u=null)):o||r.trailing===!1||(o=setTimeout(c,l)),i}},m.debounce=function(n,t,r){var e,u,i,o,a,c=function(){var f=m.now()-o;t>f&&f>=0?e=setTimeout(c,t-f):(e=null,r||(a=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,o=m.now();var f=r&&!e;return e||(e=setTimeout(c,t)),f&&(a=n.apply(i,u),i=u=null),a}},m.wrap=function(n,t){return m.partial(t,n)},m.negate=function(n){return function(){return!n.apply(this,arguments)}},m.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},m.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},m.before=function(n,t){var r;return function(){return--n>0&&(r=t.apply(this,arguments)),1>=n&&(t=null),r}},m.once=m.partial(m.before,2);var M=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];m.keys=function(n){if(!m.isObject(n))return[];if(v)return v(n);var t=[];for(var r in n)m.has(n,r)&&t.push(r);return M&&e(n,t),t},m.allKeys=function(n){if(!m.isObject(n))return[];var t=[];for(var r in n)t.push(r);return M&&e(n,t),t},m.values=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},m.mapObject=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=u.length,o={},a=0;i>a;a++)e=u[a],o[e]=t(n[e],e,n);return o},m.pairs=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},m.invert=function(n){for(var t={},r=m.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},m.functions=m.methods=function(n){var t=[];for(var r in n)m.isFunction(n[r])&&t.push(r);return t.sort()},m.extend=_(m.allKeys),m.extendOwn=m.assign=_(m.keys),m.findKey=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=0,o=u.length;o>i;i++)if(e=u[i],t(n[e],e,n))return e},m.pick=function(n,t,r){var e,u,i={},o=n;if(null==o)return i;m.isFunction(t)?(u=m.allKeys(o),e=b(t,r)):(u=S(arguments,!1,!1,1),e=function(n,t,r){return t in r},o=Object(o));for(var a=0,c=u.length;c>a;a++){var f=u[a],l=o[f];e(l,f,o)&&(i[f]=l)}return i},m.omit=function(n,t,r){if(m.isFunction(t))t=m.negate(t);else{var e=m.map(S(arguments,!1,!1,1),String);t=function(n,t){return!m.contains(e,t)}}return m.pick(n,t,r)},m.defaults=_(m.allKeys,!0),m.create=function(n,t){var r=j(n);return t&&m.extendOwn(r,t),r},m.clone=function(n){return m.isObject(n)?m.isArray(n)?n.slice():m.extend({},n):n},m.tap=function(n,t){return t(n),n},m.isMatch=function(n,t){var r=m.keys(t),e=r.length;if(null==n)return!e;for(var u=Object(n),i=0;e>i;i++){var o=r[i];if(t[o]!==u[o]||!(o in u))return!1}return!0};var N=function(n,t,r,e){if(n===t)return 0!==n||1/n===1/t;if(null==n||null==t)return n===t;n instanceof m&&(n=n._wrapped),t instanceof m&&(t=t._wrapped);var u=s.call(n);if(u!==s.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case"[object Date]":case"[object Boolean]":return+n===+t}var i="[object Array]"===u;if(!i){if("object"!=typeof n||"object"!=typeof t)return!1;var o=n.constructor,a=t.constructor;if(o!==a&&!(m.isFunction(o)&&o instanceof o&&m.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in t)return!1}r=r||[],e=e||[];for(var c=r.length;c--;)if(r[c]===n)return e[c]===t;if(r.push(n),e.push(t),i){if(c=n.length,c!==t.length)return!1;for(;c--;)if(!N(n[c],t[c],r,e))return!1}else{var f,l=m.keys(n);if(c=l.length,m.keys(t).length!==c)return!1;for(;c--;)if(f=l[c],!m.has(t,f)||!N(n[f],t[f],r,e))return!1}return r.pop(),e.pop(),!0};m.isEqual=function(n,t){return N(n,t)},m.isEmpty=function(n){return null==n?!0:k(n)&&(m.isArray(n)||m.isString(n)||m.isArguments(n))?0===n.length:0===m.keys(n).length},m.isElement=function(n){return!(!n||1!==n.nodeType)},m.isArray=h||function(n){return"[object Array]"===s.call(n)},m.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){m["is"+n]=function(t){return s.call(t)==="[object "+n+"]"}}),m.isArguments(arguments)||(m.isArguments=function(n){return m.has(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(m.isFunction=function(n){return"function"==typeof n||!1}),m.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},m.isNaN=function(n){return m.isNumber(n)&&n!==+n},m.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===s.call(n)},m.isNull=function(n){return null===n},m.isUndefined=function(n){return n===void 0},m.has=function(n,t){return null!=n&&p.call(n,t)},m.noConflict=function(){return u._=i,this},m.identity=function(n){return n},m.constant=function(n){return function(){return n}},m.noop=function(){},m.property=w,m.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},m.matcher=m.matches=function(n){return n=m.extendOwn({},n),function(t){return m.isMatch(t,n)}},m.times=function(n,t,r){var e=Array(Math.max(0,n));t=b(t,r,1);for(var u=0;n>u;u++)e[u]=t(u);return e},m.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},m.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},T=m.invert(B),R=function(n){var t=function(t){return n[t]},r="(?:"+m.keys(n).join("|")+")",e=RegExp(r),u=RegExp(r,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};m.escape=R(B),m.unescape=R(T),m.result=function(n,t,r){var e=null==n?void 0:n[t];return e===void 0&&(e=r),m.isFunction(e)?e.call(n):e};var q=0;m.uniqueId=function(n){var t=++q+"";return n?n+t:t},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\u2028|\u2029/g,L=function(n){return"\\"+z[n]};m.template=function(n,t,r){!t&&r&&(t=r),t=m.defaults({},t,m.templateSettings);var e=RegExp([(t.escape||K).source,(t.interpolate||K).source,(t.evaluate||K).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(t,r,e,o,a){return i+=n.slice(u,a).replace(D,L),u=a+t.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(t.variable||"obj","_",i)}catch(a){throw a.source=i,a}var c=function(n){return o.call(this,n,m)},f=t.variable||"obj";return c.source="function("+f+"){\n"+i+"}",c},m.chain=function(n){var t=m(n);return t._chain=!0,t};var P=function(n,t){return n._chain?m(t).chain():t};m.mixin=function(n){m.each(m.functions(n),function(t){var r=m[t]=n[t];m.prototype[t]=function(){var n=[this._wrapped];return f.apply(n,arguments),P(this,r.apply(m,n))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=o[n];m.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==n&&"splice"!==n||0!==r.length||delete r[0],P(this,r)}}),m.each(["concat","join","slice"],function(n){var t=o[n];m.prototype[n]=function(){return P(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return m})}).call(this);
//# sourceMappingURL=underscore-min.map/*
 Leaflet 1.0.0+b346bb8, a JS library for interactive maps. http://leafletjs.com
 (c) 2010-2016 Vladimir Agafonkin, (c) 2010-2011 CloudMade
*/
!function(t,e,i){function n(){var e=t.L;o.noConflict=function(){return t.L=e,this},t.L=o}var o={version:"1.0.0+b346bb8"};"object"==typeof module&&"object"==typeof module.exports?module.exports=o:"function"==typeof define&&define.amd&&define(o),"undefined"!=typeof t&&n(),o.Util={extend:function(t){var e,i,n,o;for(i=1,n=arguments.length;i<n;i++){o=arguments[i];for(e in o)t[e]=o[e]}return t},create:Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}(),bind:function(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var n=i.call(arguments,2);return function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)}},stamp:function(t){return t._leaflet_id=t._leaflet_id||++o.Util.lastId,t._leaflet_id},lastId:0,throttle:function(t,e,i){var n,o,s,r;return r=function(){n=!1,o&&(s.apply(i,o),o=!1)},s=function(){n?o=arguments:(t.apply(i,arguments),setTimeout(r,e),n=!0)}},wrapNum:function(t,e,i){var n=e[1],o=e[0],s=n-o;return t===n&&i?t:((t-o)%s+s)%s+o},falseFn:function(){return!1},formatNum:function(t,e){var i=Math.pow(10,e||5);return Math.round(t*i)/i},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return o.Util.trim(t).split(/\s+/)},setOptions:function(t,e){t.hasOwnProperty("options")||(t.options=t.options?o.Util.create(t.options):{});for(var i in e)t.options[i]=e[i];return t.options},getParamString:function(t,e,i){var n=[];for(var o in t)n.push(encodeURIComponent(i?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&e.indexOf("?")!==-1?"&":"?")+n.join("&")},template:function(t,e){return t.replace(o.Util.templateRe,function(t,n){var o=e[n];if(o===i)throw new Error("No value provided for variable "+t);return"function"==typeof o&&(o=o(e)),o})},templateRe:/\{ *([\w_\-]+) *\}/g,isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},indexOf:function(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function e(e){return t["webkit"+e]||t["moz"+e]||t["ms"+e]}function i(e){var i=+new Date,o=Math.max(0,16-(i-n));return n=i+o,t.setTimeout(e,o)}var n=0,s=t.requestAnimationFrame||e("RequestAnimationFrame")||i,r=t.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||function(e){t.clearTimeout(e)};o.Util.requestAnimFrame=function(e,n,r){return r&&s===i?void e.call(n):s.call(t,o.bind(e,n))},o.Util.cancelAnimFrame=function(e){e&&r.call(t,e)}}(),o.extend=o.Util.extend,o.bind=o.Util.bind,o.stamp=o.Util.stamp,o.setOptions=o.Util.setOptions,o.Class=function(){},o.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=e.__super__=this.prototype,n=o.Util.create(i);n.constructor=e,e.prototype=n;for(var s in this)this.hasOwnProperty(s)&&"prototype"!==s&&(e[s]=this[s]);return t.statics&&(o.extend(e,t.statics),delete t.statics),t.includes&&(o.Util.extend.apply(null,[n].concat(t.includes)),delete t.includes),n.options&&(t.options=o.Util.extend(o.Util.create(n.options),t.options)),o.extend(n,t),n._initHooks=[],n.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=n._initHooks.length;t<e;t++)n._initHooks[t].call(this)}},e},o.Class.include=function(t){return o.extend(this.prototype,t),this},o.Class.mergeOptions=function(t){return o.extend(this.prototype.options,t),this},o.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this},o.Evented=o.Class.extend({on:function(t,e,i){if("object"==typeof t)for(var n in t)this._on(n,t[n],e);else{t=o.Util.splitWords(t);for(var s=0,r=t.length;s<r;s++)this._on(t[s],e,i)}return this},off:function(t,e,i){if(t)if("object"==typeof t)for(var n in t)this._off(n,t[n],e);else{t=o.Util.splitWords(t);for(var s=0,r=t.length;s<r;s++)this._off(t[s],e,i)}else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var o=this._events[t];o||(o=[],this._events[t]=o),n===this&&(n=i);for(var s={fn:e,ctx:n},r=o,a=0,h=r.length;a<h;a++)if(r[a].fn===e&&r[a].ctx===n)return;r.push(s),o.count++},_off:function(t,e,n){var s,r,a;if(this._events&&(s=this._events[t])){if(!e){for(r=0,a=s.length;r<a;r++)s[r].fn=o.Util.falseFn;return void delete this._events[t]}if(n===this&&(n=i),s)for(r=0,a=s.length;r<a;r++){var h=s[r];if(h.ctx===n&&h.fn===e)return h.fn=o.Util.falseFn,this._firingCount&&(this._events[t]=s=s.slice()),void s.splice(r,1)}}},fire:function(t,e,i){if(!this.listens(t,i))return this;var n=o.Util.extend({},e,{type:t,target:this});if(this._events){var s=this._events[t];if(s){this._firingCount=this._firingCount+1||1;for(var r=0,a=s.length;r<a;r++){var h=s[r];h.fn.call(h.ctx||this,n)}this._firingCount--}}return i&&this._propagateEvent(n),this},listens:function(t,e){var i=this._events&&this._events[t];if(i&&i.length)return!0;if(e)for(var n in this._eventParents)if(this._eventParents[n].listens(t,e))return!0;return!1},once:function(t,e,i){if("object"==typeof t){for(var n in t)this.once(n,t[n],e);return this}var s=o.bind(function(){this.off(t,e,i).off(t,s,i)},this);return this.on(t,e,i).on(t,s,i)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[o.stamp(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[o.stamp(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,o.extend({layer:t.target},t),!0)}});var s=o.Evented.prototype;s.addEventListener=s.on,s.removeEventListener=s.clearAllEventListeners=s.off,s.addOneTimeEventListener=s.once,s.fireEvent=s.fire,s.hasEventListeners=s.listens,o.Mixin={Events:s},function(){var i=navigator.userAgent.toLowerCase(),n=e.documentElement,s="ActiveXObject"in t,r=i.indexOf("webkit")!==-1,a=i.indexOf("phantom")!==-1,h=i.search("android [23]")!==-1,l=i.indexOf("chrome")!==-1,u=i.indexOf("gecko")!==-1&&!r&&!t.opera&&!s,c=0===navigator.platform.indexOf("Win"),d="undefined"!=typeof orientation||i.indexOf("mobile")!==-1,_=!t.PointerEvent&&t.MSPointerEvent,m=t.PointerEvent||_,p=s&&"transition"in n.style,f="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix&&!h,g="MozPerspective"in n.style,v="OTransition"in n.style,y=!t.L_NO_TOUCH&&(m||"ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch);o.Browser={ie:s,ielt9:s&&!e.addEventListener,edge:"msLaunchUri"in navigator&&!("documentMode"in e),webkit:r,gecko:u,android:i.indexOf("android")!==-1,android23:h,chrome:l,safari:!l&&i.indexOf("safari")!==-1,win:c,ie3d:p,webkit3d:f,gecko3d:g,opera12:v,any3d:!t.L_DISABLE_3D&&(p||f||g)&&!v&&!a,mobile:d,mobileWebkit:d&&r,mobileWebkit3d:d&&f,mobileOpera:d&&t.opera,mobileGecko:d&&u,touch:!!y,msPointer:!!_,pointer:!!m,retina:(t.devicePixelRatio||t.screen.deviceXDPI/t.screen.logicalXDPI)>1}}(),o.Point=function(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e},o.Point.prototype={clone:function(){return new o.Point(this.x,this.y)},add:function(t){return this.clone()._add(o.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(o.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new o.Point(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new o.Point(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(t){t=o.point(t);var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return t=o.point(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=o.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+o.Util.formatNum(this.x)+", "+o.Util.formatNum(this.y)+")"}},o.point=function(t,e,n){return t instanceof o.Point?t:o.Util.isArray(t)?new o.Point(t[0],t[1]):t===i||null===t?t:"object"==typeof t&&"x"in t&&"y"in t?new o.Point(t.x,t.y):new o.Point(t,e,n)},o.Bounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])},o.Bounds.prototype={extend:function(t){return t=o.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new o.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new o.Point(this.min.x,this.max.y)},getTopRight:function(){return new o.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return t="number"==typeof t[0]||t instanceof o.Point?o.point(t):o.bounds(t),t instanceof o.Bounds?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=o.bounds(t);var e=this.min,i=this.max,n=t.min,s=t.max,r=s.x>=e.x&&n.x<=i.x,a=s.y>=e.y&&n.y<=i.y;return r&&a},overlaps:function(t){t=o.bounds(t);var e=this.min,i=this.max,n=t.min,s=t.max,r=s.x>e.x&&n.x<i.x,a=s.y>e.y&&n.y<i.y;return r&&a},isValid:function(){return!(!this.min||!this.max)}},o.bounds=function(t,e){return!t||t instanceof o.Bounds?t:new o.Bounds(t,e)},o.Transformation=function(t,e,i,n){this._a=t,this._b=e,this._c=i,this._d=n},o.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new o.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},o.DomUtil={get:function(t){return"string"==typeof t?e.getElementById(t):t},getStyle:function(t,i){var n=t.style[i]||t.currentStyle&&t.currentStyle[i];if((!n||"auto"===n)&&e.defaultView){var o=e.defaultView.getComputedStyle(t,null);n=o?o[i]:null}return"auto"===n?null:n},create:function(t,i,n){var o=e.createElement(t);return o.className=i||"",n&&n.appendChild(o),o},remove:function(t){var e=t.parentNode;e&&e.removeChild(t)},empty:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},toFront:function(t){t.parentNode.appendChild(t)},toBack:function(t){var e=t.parentNode;e.insertBefore(t,e.firstChild)},hasClass:function(t,e){if(t.classList!==i)return t.classList.contains(e);var n=o.DomUtil.getClass(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)},addClass:function(t,e){if(t.classList!==i)for(var n=o.Util.splitWords(e),s=0,r=n.length;s<r;s++)t.classList.add(n[s]);else if(!o.DomUtil.hasClass(t,e)){var a=o.DomUtil.getClass(t);o.DomUtil.setClass(t,(a?a+" ":"")+e)}},removeClass:function(t,e){t.classList!==i?t.classList.remove(e):o.DomUtil.setClass(t,o.Util.trim((" "+o.DomUtil.getClass(t)+" ").replace(" "+e+" "," ")))},setClass:function(t,e){t.className.baseVal===i?t.className=e:t.className.baseVal=e},getClass:function(t){return t.className.baseVal===i?t.className:t.className.baseVal},setOpacity:function(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&o.DomUtil._setOpacityIE(t,e)},_setOpacityIE:function(t,e){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(t){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"},testProp:function(t){for(var i=e.documentElement.style,n=0;n<t.length;n++)if(t[n]in i)return t[n];return!1},setTransform:function(t,e,i){var n=e||new o.Point(0,0);t.style[o.DomUtil.TRANSFORM]=(o.Browser.ie3d?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")},setPosition:function(t,e){t._leaflet_pos=e,o.Browser.any3d?o.DomUtil.setTransform(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos||new o.Point(0,0)}},function(){o.DomUtil.TRANSFORM=o.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);var i=o.DomUtil.TRANSITION=o.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);if(o.DomUtil.TRANSITION_END="webkitTransition"===i||"OTransition"===i?i+"End":"transitionend","onselectstart"in e)o.DomUtil.disableTextSelection=function(){o.DomEvent.on(t,"selectstart",o.DomEvent.preventDefault)},o.DomUtil.enableTextSelection=function(){o.DomEvent.off(t,"selectstart",o.DomEvent.preventDefault)};else{var n=o.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);o.DomUtil.disableTextSelection=function(){if(n){var t=e.documentElement.style;this._userSelect=t[n],t[n]="none"}},o.DomUtil.enableTextSelection=function(){n&&(e.documentElement.style[n]=this._userSelect,delete this._userSelect)}}o.DomUtil.disableImageDrag=function(){o.DomEvent.on(t,"dragstart",o.DomEvent.preventDefault)},o.DomUtil.enableImageDrag=function(){o.DomEvent.off(t,"dragstart",o.DomEvent.preventDefault)},o.DomUtil.preventOutline=function(e){for(;e.tabIndex===-1;)e=e.parentNode;e&&e.style&&(o.DomUtil.restoreOutline(),this._outlineElement=e,this._outlineStyle=e.style.outline,e.style.outline="none",o.DomEvent.on(t,"keydown",o.DomUtil.restoreOutline,this))},o.DomUtil.restoreOutline=function(){this._outlineElement&&(this._outlineElement.style.outline=this._outlineStyle,delete this._outlineElement,delete this._outlineStyle,o.DomEvent.off(t,"keydown",o.DomUtil.restoreOutline,this))}}(),o.LatLng=function(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,n!==i&&(this.alt=+n)},o.LatLng.prototype={equals:function(t,e){if(!t)return!1;t=o.latLng(t);var n=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return n<=(e===i?1e-9:e)},toString:function(t){return"LatLng("+o.Util.formatNum(this.lat,t)+", "+o.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){return o.CRS.Earth.distance(this,o.latLng(t))},wrap:function(){return o.CRS.Earth.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return o.latLngBounds([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new o.LatLng(this.lat,this.lng,this.alt)}},o.latLng=function(t,e,n){return t instanceof o.LatLng?t:o.Util.isArray(t)&&"object"!=typeof t[0]?3===t.length?new o.LatLng(t[0],t[1],t[2]):2===t.length?new o.LatLng(t[0],t[1]):null:t===i||null===t?t:"object"==typeof t&&"lat"in t?new o.LatLng(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===i?null:new o.LatLng(t,e,n)},o.LatLngBounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])},o.LatLngBounds.prototype={extend:function(t){var e,i,n=this._southWest,s=this._northEast;if(t instanceof o.LatLng)e=t,i=t;else{if(!(t instanceof o.LatLngBounds))return t?this.extend(o.latLng(t)||o.latLngBounds(t)):this;if(e=t._southWest,i=t._northEast,!e||!i)return this}return n||s?(n.lat=Math.min(e.lat,n.lat),n.lng=Math.min(e.lng,n.lng),s.lat=Math.max(i.lat,s.lat),s.lng=Math.max(i.lng,s.lng)):(this._southWest=new o.LatLng(e.lat,e.lng),this._northEast=new o.LatLng(i.lat,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,s=Math.abs(e.lng-i.lng)*t;return new o.LatLngBounds(new o.LatLng(e.lat-n,e.lng-s),new o.LatLng(i.lat+n,i.lng+s))},getCenter:function(){return new o.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new o.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new o.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof o.LatLng?o.latLng(t):o.latLngBounds(t);var e,i,n=this._southWest,s=this._northEast;return t instanceof o.LatLngBounds?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=s.lat&&e.lng>=n.lng&&i.lng<=s.lng},intersects:function(t){t=o.latLngBounds(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),s=t.getNorthEast(),r=s.lat>=e.lat&&n.lat<=i.lat,a=s.lng>=e.lng&&n.lng<=i.lng;return r&&a},overlaps:function(t){t=o.latLngBounds(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),s=t.getNorthEast(),r=s.lat>e.lat&&n.lat<i.lat,a=s.lng>e.lng&&n.lng<i.lng;return r&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return!!t&&(t=o.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},o.latLngBounds=function(t,e){return t instanceof o.LatLngBounds?t:new o.LatLngBounds(t,e)},o.Projection={},o.Projection.LonLat={project:function(t){return new o.Point(t.lng,t.lat)},unproject:function(t){return new o.LatLng(t.y,t.x)},bounds:o.bounds([-180,-90],[180,90])},o.Projection.SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),s=Math.sin(n*e);return new o.Point(this.R*t.lng*e,this.R*Math.log((1+s)/(1-s))/2)},unproject:function(t){var e=180/Math.PI;return new o.LatLng((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=6378137*Math.PI;return o.bounds([-t,-t],[t,t])}()},o.CRS={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t),n=this.transformation.transform(e.min,i),s=this.transformation.transform(e.max,i);return o.bounds(n,s)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?o.Util.wrapNum(t.lng,this.wrapLng,!0):t.lng,i=this.wrapLat?o.Util.wrapNum(t.lat,this.wrapLat,!0):t.lat,n=t.alt;return o.latLng(i,e,n)}},o.CRS.Simple=o.extend({},o.CRS,{projection:o.Projection.LonLat,transformation:new o.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,n=e.lat-t.lat;return Math.sqrt(i*i+n*n)},infinite:!0}),o.CRS.Earth=o.extend({},o.CRS,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,n=t.lat*i,o=e.lat*i,s=Math.sin(n)*Math.sin(o)+Math.cos(n)*Math.cos(o)*Math.cos((e.lng-t.lng)*i);return this.R*Math.acos(Math.min(s,1))}}),o.CRS.EPSG3857=o.extend({},o.CRS.Earth,{code:"EPSG:3857",projection:o.Projection.SphericalMercator,transformation:function(){var t=.5/(Math.PI*o.Projection.SphericalMercator.R);return new o.Transformation(t,.5,-t,.5)}()}),o.CRS.EPSG900913=o.extend({},o.CRS.EPSG3857,{code:"EPSG:900913"}),o.CRS.EPSG4326=o.extend({},o.CRS.Earth,{code:"EPSG:4326",projection:o.Projection.LonLat,transformation:new o.Transformation(1/180,1,-1/180,.5)}),o.Map=o.Evented.extend({options:{crs:o.CRS.EPSG3857,center:i,zoom:i,minZoom:i,maxZoom:i,layers:[],maxBounds:i,renderer:i,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=o.setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=o.bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==i&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==i&&this.setView(o.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._addLayers(this.options.layers)},setView:function(t,e){return e=e===i?this.getZoom():e,this._resetView(o.latLng(t),e),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(o.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(o.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),s=this.getSize().divideBy(2),r=t instanceof o.Point?t:this.latLngToContainerPoint(t),a=r.subtract(s).multiplyBy(1-1/n),h=this.containerPointToLatLng(s.add(a));return this.setView(h,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():o.latLngBounds(t);var i=o.point(e.paddingTopLeft||e.padding||[0,0]),n=o.point(e.paddingBottomRight||e.padding||[0,0]),s=this.getBoundsZoom(t,!1,i.add(n));s="number"==typeof e.maxZoom?Math.min(e.maxZoom,s):s;var r=n.subtract(i).divideBy(2),a=this.project(t.getSouthWest(),s),h=this.project(t.getNorthEast(),s),l=this.unproject(a.add(h).divideBy(2).add(r),s);return{center:l,zoom:s}},fitBounds:function(t,e){if(t=o.latLngBounds(t),!t.isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t){return this.fire("movestart"),this._rawPanBy(o.point(t)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(t){return t=o.latLngBounds(t),t.isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){return this.options.minZoom=t,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(t):this},setMaxZoom:function(t){return this.options.maxZoom=t,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,o.latLngBounds(t));return i.equals(n)||this.panTo(n,e),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=o.extend({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),n=e.divideBy(2).round(),s=i.divideBy(2).round(),r=n.subtract(s);return r.x||r.y?(t.animate&&t.pan?this.panBy(r):(t.pan&&this._rawPanBy(r),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=i,this._containerId=i}o.DomUtil.remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload");for(var t in this._layers)this._layers[t].remove();return this},createPane:function(t,e){var i="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),n=o.DomUtil.create("div",i,e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new o.LatLngBounds(e,i)},getMinZoom:function(){return this.options.minZoom===i?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===i?this._layersMaxZoom===i?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=o.latLngBounds(t),i=o.point(i||[0,0]);var n=this.getZoom()||0,s=this.getMinZoom(),r=this.getMaxZoom(),a=t.getNorthWest(),h=t.getSouthEast(),l=this.getSize().subtract(i),u=this.project(h,n).subtract(this.project(a,n)),c=o.Browser.any3d?this.options.zoomSnap:1,d=Math.min(l.x/u.x,l.y/u.y);return n=this.getScaleZoom(d,n),c&&(n=Math.round(n/(c/100))*(c/100),n=e?Math.ceil(n/c)*c:Math.floor(n/c)*c),Math.max(s,Math.min(r,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new o.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new o.Bounds(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===i?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=e===i?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=e===i?this._zoom:e;var o=n.zoom(t*n.scale(e));return isNaN(o)?1/0:o},project:function(t,e){return e=e===i?this._zoom:e,this.options.crs.latLngToPoint(o.latLng(t),e)},unproject:function(t,e){return e=e===i?this._zoom:e,this.options.crs.pointToLatLng(o.point(t),e)},layerPointToLatLng:function(t){var e=o.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(o.latLng(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(o.latLng(t))},distance:function(t,e){return this.options.crs.distance(o.latLng(t),o.latLng(e))},containerPointToLayerPoint:function(t){return o.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return o.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(o.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(o.latLng(t)))},mouseEventToContainerPoint:function(t){return o.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=o.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");o.DomEvent.addListener(e,"scroll",this._onScroll,this),this._containerId=o.Util.stamp(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&o.Browser.any3d,o.DomUtil.addClass(t,"leaflet-container"+(o.Browser.touch?" leaflet-touch":"")+(o.Browser.retina?" leaflet-retina":"")+(o.Browser.ielt9?" leaflet-oldie":"")+(o.Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=o.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),o.DomUtil.setPosition(this._mapPane,new o.Point(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(o.DomUtil.addClass(t.markerPane,"leaflet-zoom-hide"),o.DomUtil.addClass(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){o.DomUtil.setPosition(this._mapPane,new o.Point(0,0));var i=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var n=this._zoom!==e;this._moveStart(n)._move(t,e)._moveEnd(n),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(t){return t&&this.fire("zoomstart"),this.fire("movestart")},_move:function(t,e,n){e===i&&(e=this._zoom);var o=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(o||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return o.Util.cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){o.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){if(o.DomEvent){this._targets={},this._targets[o.stamp(this._container)]=this;var i=e?"off":"on";o.DomEvent[i](this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&o.DomEvent[i](t,"resize",this._onResize,this),o.Browser.any3d&&this.options.transform3DLimit&&this[i]("moveend",this._onMoveEnd)}},_onResize:function(){o.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=o.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i,n=[],s="mouseout"===e||"mouseover"===e,r=t.target||t.srcElement,a=!1;r;){if(i=this._targets[o.stamp(r)],i&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(i)){a=!0;break}if(i&&i.listens(e,!0)){if(s&&!o.DomEvent._isExternalTarget(r,t))break;if(n.push(i),s)break}if(r===this._container)break;r=r.parentNode}return n.length||a||s||!o.DomEvent._isExternalTarget(r,t)||(n=[this]),n},_handleDOMEvent:function(t){if(this._loaded&&!o.DomEvent._skipped(t)){var e="keypress"===t.type&&13===t.keyCode?"click":t.type;"mousedown"===e&&o.DomUtil.preventOutline(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_fireDOMEvent:function(t,e,i){if("click"===t.type){var n=o.Util.extend({},t);n.type="preclick",this._fireDOMEvent(n,n.type,i)}if(!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,e)),i.length)){var s=i[0];"contextmenu"===e&&s.listens(e,!0)&&o.DomEvent.preventDefault(t);var r={originalEvent:t};if("keypress"!==t.type){var a=s instanceof o.Marker;r.containerPoint=a?this.latLngToContainerPoint(s.getLatLng()):this.mouseEventToContainerPoint(t),r.layerPoint=this.containerPointToLayerPoint(r.containerPoint),r.latlng=a?s.getLatLng():this.layerPointToLatLng(r.layerPoint);
}for(var h=0;h<i.length;h++)if(i[h].fire(e,r,!0),r.originalEvent._stopped||i[h].options.nonBubblingEvents&&o.Util.indexOf(i[h].options.nonBubblingEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return o.DomUtil.getPosition(this._mapPane)||new o.Point(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var n=t&&e!==i?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(n)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),s=this.getSize().divideBy(2),r=new o.Bounds(n.subtract(s),n.add(s)),a=this._getBoundsOffset(r,i,e);return a.round().equals([0,0])?t:this.unproject(n.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),n=new o.Bounds(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=o.bounds(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),s=n.min.subtract(t.min),r=n.max.subtract(t.max),a=this._rebound(s.x,-r.x),h=this._rebound(s.y,-r.y);return new o.Point(a,h)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),n=o.Browser.any3d?this.options.zoomSnap:1;return n&&(t=Math.round(t/n)*n),Math.max(e,Math.min(i,t))}}),o.map=function(t,e){return new o.Map(t,e)},o.Layer=o.Evented.extend({options:{pane:"overlayPane",nonBubblingEvents:[]},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[o.stamp(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[o.stamp(t)],this},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",function(){e.off(i,this)},this)}this.onAdd(e),this.getAttribution&&this._map.attributionControl&&this._map.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}}),o.Map.include({addLayer:function(t){var e=o.stamp(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=o.stamp(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&o.stamp(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){t=t?o.Util.isArray(t)?t:[t]:[];for(var e=0,i=t.length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[o.stamp(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=o.stamp(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-(1/0),n=this._getZoomSpan();for(var o in this._zoomBoundLayers){var s=this._zoomBoundLayers[o].options;t=s.minZoom===i?t:Math.min(t,s.minZoom),e=s.maxZoom===i?e:Math.max(e,s.maxZoom)}this._layersMaxZoom=e===-(1/0)?i:e,this._layersMinZoom=t===1/0?i:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange")}}),o.Projection.Mercator={R:6378137,R_MINOR:6356752.314245179,bounds:o.bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,i=this.R,n=t.lat*e,s=this.R_MINOR/i,r=Math.sqrt(1-s*s),a=r*Math.sin(n),h=Math.tan(Math.PI/4-n/2)/Math.pow((1-a)/(1+a),r/2);return n=-i*Math.log(Math.max(h,1e-10)),new o.Point(t.lng*e*i,n)},unproject:function(t){for(var e,i=180/Math.PI,n=this.R,s=this.R_MINOR/n,r=Math.sqrt(1-s*s),a=Math.exp(-t.y/n),h=Math.PI/2-2*Math.atan(a),l=0,u=.1;l<15&&Math.abs(u)>1e-7;l++)e=r*Math.sin(h),e=Math.pow((1-e)/(1+e),r/2),u=Math.PI/2-2*Math.atan(a*e)-h,h+=u;return new o.LatLng(h*i,t.x*i/n)}},o.CRS.EPSG3395=o.extend({},o.CRS.Earth,{code:"EPSG:3395",projection:o.Projection.Mercator,transformation:function(){var t=.5/(Math.PI*o.Projection.Mercator.R);return new o.Transformation(t,.5,-t,.5)}()}),o.GridLayer=o.Layer.extend({options:{tileSize:256,opacity:1,updateWhenIdle:o.Browser.mobile,updateWhenZooming:!0,updateInterval:200,attribution:null,zIndex:1,bounds:null,minZoom:0,maxZoom:i,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){o.setOptions(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),o.DomUtil.remove(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(o.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(o.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=o.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return e.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof o.Point?t:new o.Point(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==i&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,i=this.getPane().children,n=-t(-(1/0),1/0),o=0,s=i.length;o<s;o++)e=i[o].style.zIndex,i[o]!==this._container&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!o.Browser.ielt9){o.DomUtil.setOpacity(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var n in this._tiles){var s=this._tiles[n];if(s.current&&s.loaded){var r=Math.min(1,(t-s.loaded)/200);o.DomUtil.setOpacity(s.el,r),r<1?e=!0:(s.active&&(i=!0),s.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(o.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=o.Util.requestAnimFrame(this._updateOpacity,this))}},_initContainer:function(){this._container||(this._container=o.DomUtil.create("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t===i)return i;for(var n in this._levels)this._levels[n].el.children.length||n===t?this._levels[n].el.style.zIndex=e-Math.abs(t-n):(o.DomUtil.remove(this._levels[n].el),this._removeTilesAtZoom(n),delete this._levels[n]);var s=this._levels[t],r=this._map;return s||(s=this._levels[t]={},s.el=o.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container),s.el.style.zIndex=e,s.origin=r.project(r.unproject(r.getPixelOrigin()),t).round(),s.zoom=t,this._setZoomTransform(s,r.getCenter(),r.getZoom()),o.Util.falseFn(s.el.offsetWidth)),this._level=s,s},_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom)return void this._removeAllTiles();for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var n=e.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)o.DomUtil.remove(this._levels[t].el),delete this._levels[t];this._removeAllTiles(),this._tileZoom=null},_retainParent:function(t,e,i,n){var s=Math.floor(t/2),r=Math.floor(e/2),a=i-1,h=new o.Point(+s,+r);h.z=+a;var l=this._tileCoordsToKey(h),u=this._tiles[l];return u&&u.active?(u.retain=!0,!0):(u&&u.loaded&&(u.retain=!0),a>n&&this._retainParent(s,r,a,n))},_retainChildren:function(t,e,i,n){for(var s=2*t;s<2*t+2;s++)for(var r=2*e;r<2*e+2;r++){var a=new o.Point(s,r);a.z=i+1;var h=this._tileCoordsToKey(a),l=this._tiles[h];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),i+1<n&&this._retainChildren(s,r,i+1,n))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_setView:function(t,e,n,o){var s=Math.round(e);(this.options.maxZoom!==i&&s>this.options.maxZoom||this.options.minZoom!==i&&s<this.options.minZoom)&&(s=i);var r=this.options.updateWhenZooming&&s!==this._tileZoom;o&&!r||(this._tileZoom=s,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),s!==i&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var n=this._map.getZoomScale(i,t.zoom),s=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e,i)).round();o.Browser.any3d?o.DomUtil.setTransform(t.el,s,n):o.DomUtil.setPosition(t.el,s)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(i,this._tileZoom),s=e.project(t,this._tileZoom).floor(),r=e.getSize().divideBy(2*n);return new o.Bounds(s.subtract(r),s.add(r))},_update:function(t){var n=this._map;if(n){var s=n.getZoom();if(t===i&&(t=n.getCenter()),this._tileZoom!==i){var r=this._getTiledPixelBounds(t),a=this._pxBoundsToTileRange(r),h=a.getCenter(),l=[],u=this.options.keepBuffer,c=new o.Bounds(a.getBottomLeft().subtract([u,-u]),a.getTopRight().add([u,-u]));for(var d in this._tiles){var _=this._tiles[d].coords;_.z===this._tileZoom&&c.contains(o.point(_.x,_.y))||(this._tiles[d].current=!1)}if(Math.abs(s-this._tileZoom)>1)return void this._setView(t,s);for(var m=a.min.y;m<=a.max.y;m++)for(var p=a.min.x;p<=a.max.x;p++){var f=new o.Point(p,m);if(f.z=this._tileZoom,this._isValidTile(f)){var g=this._tiles[this._tileCoordsToKey(f)];g?g.current=!0:l.push(f)}}if(l.sort(function(t,e){return t.distanceTo(h)-e.distanceTo(h)}),0!==l.length){this._loading||(this._loading=!0,this.fire("loading"));var v=e.createDocumentFragment();for(p=0;p<l.length;p++)this._addTile(l[p],v);this._level.el.appendChild(v)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);return o.latLngBounds(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToBounds:function(t){var e=this._map,i=this.getTileSize(),n=t.scaleBy(i),s=n.add(i),r=e.unproject(n,t.z),a=e.unproject(s,t.z);return this.options.noWrap||(r=e.wrapLatLng(r),a=e.wrapLatLng(a)),new o.LatLngBounds(r,a)},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new o.Point(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(o.DomUtil.remove(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){o.DomUtil.addClass(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=o.Util.falseFn,t.onmousemove=o.Util.falseFn,o.Browser.ielt9&&this.options.opacity<1&&o.DomUtil.setOpacity(t,this.options.opacity),o.Browser.android&&!o.Browser.android23&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var i=this._getTilePos(t),n=this._tileCoordsToKey(t),s=this.createTile(this._wrapCoords(t),o.bind(this._tileReady,this,t));this._initTile(s),this.createTile.length<2&&o.Util.requestAnimFrame(o.bind(this._tileReady,this,t,null,s)),o.DomUtil.setPosition(s,i),this._tiles[n]={el:s,coords:t,current:!0},e.appendChild(s),this.fire("tileloadstart",{tile:s,coords:t})},_tileReady:function(t,e,i){if(this._map){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var n=this._tileCoordsToKey(t);i=this._tiles[n],i&&(i.loaded=+new Date,this._map._fadeAnimated?(o.DomUtil.setOpacity(i.el,0),o.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=o.Util.requestAnimFrame(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),o.DomUtil.addClass(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t}),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),o.Browser.ielt9||!this._map._fadeAnimated?o.Util.requestAnimFrame(this._pruneTiles,this):setTimeout(o.bind(this._pruneTiles,this),250)))}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new o.Point(this._wrapX?o.Util.wrapNum(t.x,this._wrapX):t.x,this._wrapY?o.Util.wrapNum(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new o.Bounds(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),o.gridLayer=function(t){return new o.GridLayer(t)},o.TileLayer=o.GridLayer.extend({options:{minZoom:0,maxZoom:18,maxNativeZoom:null,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,e=o.setOptions(this,e),e.detectRetina&&o.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),o.Browser.android||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},createTile:function(t,i){var n=e.createElement("img");return o.DomEvent.on(n,"load",o.bind(this._tileOnLoad,this,i,n)),o.DomEvent.on(n,"error",o.bind(this._tileOnError,this,i,n)),this.options.crossOrigin&&(n.crossOrigin=""),n.alt="",n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:o.Browser.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return o.Util.template(this._url,o.extend(e,this.options))},_tileOnLoad:function(t,e){o.Browser.ielt9?setTimeout(o.bind(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var n=this.options.errorTileUrl;n&&(e.src=n),t(i,e)},getTileSize:function(){var t=this._map,e=o.GridLayer.prototype.getTileSize.call(this),i=this._tileZoom+this.options.zoomOffset,n=this.options.maxNativeZoom;return null!==n&&i>n?e.divideBy(t.getZoomScale(n,i)).round():e},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this.options,e=this._tileZoom;return t.zoomReverse&&(e=t.maxZoom-e),e+=t.zoomOffset,null!==t.maxNativeZoom?Math.min(e,t.maxNativeZoom):e},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=o.Util.falseFn,e.onerror=o.Util.falseFn,e.complete||(e.src=o.Util.emptyImageUrl,o.DomUtil.remove(e)))}}),o.tileLayer=function(t,e){return new o.TileLayer(t,e)},o.TileLayer.WMS=o.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=o.extend({},this.defaultWmsParams);for(var n in e)n in this.options||(i[n]=e[n]);e=o.setOptions(this,e),i.width=i.height=e.tileSize*(e.detectRetina&&o.Browser.retina?2:1),this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,o.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToBounds(t),i=this._crs.project(e.getNorthWest()),n=this._crs.project(e.getSouthEast()),s=(this._wmsVersion>=1.3&&this._crs===o.CRS.EPSG4326?[n.y,i.x,i.y,n.x]:[i.x,n.y,n.x,i.y]).join(","),r=o.TileLayer.prototype.getTileUrl.call(this,t);return r+o.Util.getParamString(this.wmsParams,r,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+s},setParams:function(t,e){return o.extend(this.wmsParams,t),e||this.redraw(),this}}),o.tileLayer.wms=function(t,e){return new o.TileLayer.WMS(t,e)},o.ImageOverlay=o.Layer.extend({options:{opacity:1,alt:"",interactive:!1,attribution:null,crossOrigin:!1},initialize:function(t,e,i){this._url=t,this._bounds=o.latLngBounds(e),o.setOptions(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(o.DomUtil.addClass(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){o.DomUtil.remove(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&o.DomUtil.toFront(this._image),this},bringToBack:function(){return this._map&&o.DomUtil.toBack(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=t,this._map&&this._reset(),this},getAttribution:function(){return this.options.attribution},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._image=o.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));t.onselectstart=o.Util.falseFn,t.onmousemove=o.Util.falseFn,t.onload=o.bind(this.fire,this,"load"),this.options.crossOrigin&&(t.crossOrigin=""),t.src=this._url,t.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngToNewLayerPoint(this._bounds.getNorthWest(),t.zoom,t.center);o.DomUtil.setTransform(this._image,i,e)},_reset:function(){var t=this._image,e=new o.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();o.DomUtil.setPosition(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){o.DomUtil.setOpacity(this._image,this.options.opacity)}}),o.imageOverlay=function(t,e,i){return new o.ImageOverlay(t,e,i)},o.Icon=o.Class.extend({initialize:function(t){o.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(i,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(n,t),n},_setIconStyles:function(t,e){var i=this.options,n=i[e+"Size"];"number"==typeof n&&(n=[n,n]);var s=o.point(n),r=o.point("shadow"===e&&i.shadowAnchor||i.iconAnchor||s&&s.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),r&&(t.style.marginLeft=-r.x+"px",t.style.marginTop=-r.y+"px"),s&&(t.style.width=s.x+"px",t.style.height=s.y+"px")},_createImg:function(t,i){return i=i||e.createElement("img"),i.src=t,i},_getIconUrl:function(t){return o.Browser.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),o.icon=function(t){return new o.Icon(t)},o.Icon.Default=o.Icon.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return o.Icon.Default.imagePath||(o.Icon.Default.imagePath=this._detectIconPath()),(this.options.imagePath||o.Icon.Default.imagePath)+o.Icon.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=o.DomUtil.create("div","leaflet-default-icon-path",e.body),i=o.DomUtil.getStyle(t,"background-image")||o.DomUtil.getStyle(t,"backgroundImage");return e.body.removeChild(t),0===i.indexOf("url")?i.replace(/^url\([\"\']?/,"").replace(/[\"\']?\)$/,""):""}}),o.Marker=o.Layer.extend({options:{icon:new o.Icon.Default,interactive:!0,draggable:!1,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",nonBubblingEvents:["click","dblclick","mouseover","mouseout","contextmenu"]},initialize:function(t,e){o.setOptions(this,e),this._latlng=o.latLng(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=o.latLng(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(i.title=t.title),t.alt&&(i.alt=t.alt)),o.DomUtil.addClass(i,e),t.keyboard&&(i.tabIndex="0"),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var s=t.icon.createShadow(this._shadow),r=!1;s!==this._shadow&&(this._removeShadow(),r=!0),s&&o.DomUtil.addClass(s,e),this._shadow=s,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),s&&r&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),o.DomUtil.remove(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&o.DomUtil.remove(this._shadow),this._shadow=null},_setPos:function(t){o.DomUtil.setPosition(this._icon,t),this._shadow&&o.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(o.DomUtil.addClass(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),o.Handler.MarkerDrag)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new o.Handler.MarkerDrag(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;o.DomUtil.setOpacity(this._icon,t),this._shadow&&o.DomUtil.setOpacity(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),o.marker=function(t,e){return new o.Marker(t,e)},o.DivIcon=o.Icon.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var i=t&&"DIV"===t.tagName?t:e.createElement("div"),n=this.options;if(i.innerHTML=n.html!==!1?n.html:"",n.bgPos){var s=o.point(n.bgPos);i.style.backgroundPosition=-s.x+"px "+-s.y+"px"}return this._setIconStyles(i,"icon"),i},createShadow:function(){return null}}),o.divIcon=function(t){return new o.DivIcon(t)},o.DivOverlay=o.Layer.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){o.setOptions(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&o.DomUtil.setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&o.DomUtil.setOpacity(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(o.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(o.bind(o.DomUtil.remove,o.DomUtil,this._container),200)):o.DomUtil.remove(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=o.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&o.DomUtil.toFront(this._container),this},bringToBack:function(){return this._map&&o.DomUtil.toBack(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=o.point(this.options.offset),i=this._getAnchor();this._zoomAnimated?o.DomUtil.setPosition(this._container,t.add(i)):e=e.add(t).add(i);var n=this._containerBottom=-e.y,s=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=n+"px",this._container.style.left=s+"px"}},_getAnchor:function(){return[0,0]}}),o.Popup=o.DivOverlay.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){o.DivOverlay.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof o.Path||this._source.on("preclick",o.DomEvent.stopPropagation))},onRemove:function(t){o.DivOverlay.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof o.Path||this._source.off("preclick",o.DomEvent.stopPropagation))},getEvents:function(){var t=o.DivOverlay.prototype.getEvents.call(this);return("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=o.DomUtil.create("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated");if(this.options.closeButton){var i=this._closeButton=o.DomUtil.create("a",t+"-close-button",e);i.href="#close",i.innerHTML="&#215;",o.DomEvent.on(i,"click",this._onCloseButtonClick,this)}var n=this._wrapper=o.DomUtil.create("div",t+"-content-wrapper",e);this._contentNode=o.DomUtil.create("div",t+"-content",n),o.DomEvent.disableClickPropagation(n).disableScrollPropagation(this._contentNode).on(n,"contextmenu",o.DomEvent.stopPropagation),this._tipContainer=o.DomUtil.create("div",t+"-tip-container",e),this._tip=o.DomUtil.create("div",t+"-tip",this._tipContainer)},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=t.offsetHeight,s=this.options.maxHeight,r="leaflet-popup-scrolled";s&&n>s?(e.height=s+"px",o.DomUtil.addClass(t,r)):o.DomUtil.removeClass(t,r),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();o.DomUtil.setPosition(this._container,e.add(i))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,e=parseInt(o.DomUtil.getStyle(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,n=this._containerWidth,s=new o.Point(this._containerLeft,-i-this._containerBottom);s._add(o.DomUtil.getPosition(this._container));var r=t.layerPointToContainerPoint(s),a=o.point(this.options.autoPanPadding),h=o.point(this.options.autoPanPaddingTopLeft||a),l=o.point(this.options.autoPanPaddingBottomRight||a),u=t.getSize(),c=0,d=0;
r.x+n+l.x>u.x&&(c=r.x+n-u.x+l.x),r.x-c-h.x<0&&(c=r.x-h.x),r.y+i+l.y>u.y&&(d=r.y+i-u.y+l.y),r.y-d-h.y<0&&(d=r.y-h.y),(c||d)&&t.fire("autopanstart").panBy([c,d])}},_onCloseButtonClick:function(t){this._close(),o.DomEvent.stop(t)},_getAnchor:function(){return o.point(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),o.popup=function(t,e){return new o.Popup(t,e)},o.Map.mergeOptions({closePopupOnClick:!0}),o.Map.include({openPopup:function(t,e,i){return t instanceof o.Popup||(t=new o.Popup(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),o.Layer.include({bindPopup:function(t,e){return t instanceof o.Popup?(o.setOptions(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new o.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){if(t instanceof o.Layer||(e=t,t=this),t instanceof o.FeatureGroup)for(var i in this._layers){t=this._layers[i];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;if(this._popup&&this._map)return o.DomEvent.stop(t),e instanceof o.Path?void this.openPopup(t.layer||t.target,t.latlng):void(this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),o.Marker.include({_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]}}),o.Tooltip=o.DivOverlay.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){o.DivOverlay.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){o.DivOverlay.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=o.DivOverlay.prototype.getEvents.call(this);return o.Browser.touch&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=o.DomUtil.create("div",e)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,i=this._container,n=e.latLngToContainerPoint(e.getCenter()),s=e.layerPointToContainerPoint(t),r=this.options.direction,a=i.offsetWidth,h=i.offsetHeight,l=o.point(this.options.offset),u=this._getAnchor();"top"===r?t=t.add(o.point(-a/2+l.x,-h+l.y+u.y)):"bottom"===r?t=t.subtract(o.point(a/2-l.x,-l.y)):"center"===r?t=t.subtract(o.point(a/2+l.x,h/2-u.y+l.y)):"right"===r||"auto"===r&&s.x<n.x?(r="right",t=t.add([l.x+u.x,u.y-h/2+l.y])):(r="left",t=t.subtract(o.point(a+u.x-l.x,h/2-u.y-l.y))),o.DomUtil.removeClass(i,"leaflet-tooltip-right"),o.DomUtil.removeClass(i,"leaflet-tooltip-left"),o.DomUtil.removeClass(i,"leaflet-tooltip-top"),o.DomUtil.removeClass(i,"leaflet-tooltip-bottom"),o.DomUtil.addClass(i,"leaflet-tooltip-"+r),o.DomUtil.setPosition(i,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&o.DomUtil.setOpacity(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return o.point(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),o.tooltip=function(t,e){return new o.Tooltip(t,e)},o.Map.include({openTooltip:function(t,e,i){return t instanceof o.Tooltip||(t=new o.Tooltip(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),o.Layer.include({bindTooltip:function(t,e){return t instanceof o.Tooltip?(o.setOptions(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=o.tooltip(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),o.Browser.touch&&(i.click=this._openTooltip)),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){if(t instanceof o.Layer||(e=t,t=this),t instanceof o.FeatureGroup)for(var i in this._layers){t=this._layers[i];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(o.DomUtil.addClass(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(o.DomUtil.removeClass(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:i)},_moveTooltip:function(t){var e,i,n=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),i=this._map.containerPointToLayerPoint(e),n=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(n)}}),o.Marker.include({_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}}),o.LayerGroup=o.Layer.extend({initialize:function(t){this._layers={};var e,i;if(t)for(e=0,i=t.length;e<i;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){for(var t in this._layers)this.removeLayer(this._layers[t]);return this},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)i=this._layers[e],i[t]&&i[t].apply(i,n);return this},onAdd:function(t){for(var e in this._layers)t.addLayer(this._layers[e])},onRemove:function(t){for(var e in this._layers)t.removeLayer(this._layers[e])},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return o.stamp(t)}}),o.layerGroup=function(t){return new o.LayerGroup(t)},o.FeatureGroup=o.LayerGroup.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),o.LayerGroup.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),o.LayerGroup.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new o.LatLngBounds;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),o.featureGroup=function(t){return new o.FeatureGroup(t)},o.Renderer=o.Layer.extend({options:{padding:.1},initialize:function(t){o.setOptions(this,t),o.stamp(this)},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&o.DomUtil.addClass(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update()},onRemove:function(){o.DomUtil.remove(this._container)},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),n=o.DomUtil.getPosition(this._container),s=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,e),a=this._map.project(t,e),h=a.subtract(r),l=s.multiplyBy(-i).add(n).add(s).subtract(h);o.Browser.any3d?o.DomUtil.setTransform(this._container,l,i):o.DomUtil.setPosition(this._container,l)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom)},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new o.Bounds(i,i.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),o.Map.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this.options.preferCanvas&&o.canvas()||o.svg()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||t===i)return!1;var e=this._paneRenderers[t];return e===i&&(e=o.SVG&&o.svg({pane:t})||o.Canvas&&o.canvas({pane:t}),this._paneRenderers[t]=e),e}}),o.Path=o.Layer.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this),this._renderer.on("update",this._update,this)},onRemove:function(){this._renderer._removePath(this),this._renderer.off("update",this._update,this)},getEvents:function(){return{zoomend:this._project,viewreset:this._reset}},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return o.setOptions(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(o.Browser.touch?10:0)}}),o.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=this._reducePoints(t,i),t=this._simplifyDP(t,i)},pointToSegmentDistance:function(t,e,i){return Math.sqrt(this._sqClosestPointOnSegment(t,e,i,!0))},closestPointOnSegment:function(t,e,i){return this._sqClosestPointOnSegment(t,e,i)},_simplifyDP:function(t,e){var n=t.length,o=typeof Uint8Array!=i+""?Uint8Array:Array,s=new o(n);s[0]=s[n-1]=1,this._simplifyDPStep(t,s,e,0,n-1);var r,a=[];for(r=0;r<n;r++)s[r]&&a.push(t[r]);return a},_simplifyDPStep:function(t,e,i,n,o){var s,r,a,h=0;for(r=n+1;r<=o-1;r++)a=this._sqClosestPointOnSegment(t[r],t[n],t[o],!0),a>h&&(s=r,h=a);h>i&&(e[s]=1,this._simplifyDPStep(t,e,i,n,s),this._simplifyDPStep(t,e,i,s,o))},_reducePoints:function(t,e){for(var i=[t[0]],n=1,o=0,s=t.length;n<s;n++)this._sqDist(t[n],t[o])>e&&(i.push(t[n]),o=n);return o<s-1&&i.push(t[s-1]),i},clipSegment:function(t,e,i,n,o){var s,r,a,h=n?this._lastCode:this._getBitCode(t,i),l=this._getBitCode(e,i);for(this._lastCode=l;;){if(!(h|l))return[t,e];if(h&l)return!1;s=h||l,r=this._getEdgeIntersection(t,e,s,i,o),a=this._getBitCode(r,i),s===h?(t=r,h=a):(e=r,l=a)}},_getEdgeIntersection:function(t,e,i,n,s){var r,a,h=e.x-t.x,l=e.y-t.y,u=n.min,c=n.max;return 8&i?(r=t.x+h*(c.y-t.y)/l,a=c.y):4&i?(r=t.x+h*(u.y-t.y)/l,a=u.y):2&i?(r=c.x,a=t.y+l*(c.x-t.x)/h):1&i&&(r=u.x,a=t.y+l*(u.x-t.x)/h),new o.Point(r,a,s)},_getBitCode:function(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n},_sqClosestPointOnSegment:function(t,e,i,n){var s,r=e.x,a=e.y,h=i.x-r,l=i.y-a,u=h*h+l*l;return u>0&&(s=((t.x-r)*h+(t.y-a)*l)/u,s>1?(r=i.x,a=i.y):s>0&&(r+=h*s,a+=l*s)),h=t.x-r,l=t.y-a,n?h*h+l*l:new o.Point(r,a)}},o.Polyline=o.Path.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){o.setOptions(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,i,n=1/0,s=null,r=o.LineUtil._sqClosestPointOnSegment,a=0,h=this._parts.length;a<h;a++)for(var l=this._parts[a],u=1,c=l.length;u<c;u++){e=l[u-1],i=l[u];var d=r(t,e,i,!0);d<n&&(n=d,s=r(t,e,i))}return s&&(s.distance=Math.sqrt(n)),s},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,o,s,r,a=this._rings[0],h=a.length;if(!h)return null;for(t=0,e=0;t<h-1;t++)e+=a[t].distanceTo(a[t+1])/2;if(0===e)return this._map.layerPointToLatLng(a[0]);for(t=0,n=0;t<h-1;t++)if(o=a[t],s=a[t+1],i=o.distanceTo(s),n+=i,n>e)return r=(n-e)/i,this._map.layerPointToLatLng([s.x-r*(s.x-o.x),s.y-r*(s.y-o.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=o.latLng(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new o.LatLngBounds,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return o.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=o.Polyline._flat(t),n=0,s=t.length;n<s;n++)i?(e[n]=o.latLng(t[n]),this._bounds.extend(e[n])):e[n]=this._convertLatLngs(t[n]);return e},_project:function(){var t=new o.Bounds;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),i=new o.Point(e,e);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(i),t.max._add(i),this._pxBounds=t)},_projectLatlngs:function(t,e,i){var n,s,r=t[0]instanceof o.LatLng,a=t.length;if(r){for(s=[],n=0;n<a;n++)s[n]=this._map.latLngToLayerPoint(t[n]),i.extend(s[n]);e.push(s)}else for(n=0;n<a;n++)this._projectLatlngs(t[n],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);var e,i,n,s,r,a,h,l=this._parts;for(e=0,n=0,s=this._rings.length;e<s;e++)for(h=this._rings[e],i=0,r=h.length;i<r-1;i++)a=o.LineUtil.clipSegment(h[i],h[i+1],t,i,!0),a&&(l[n]=l[n]||[],l[n].push(a[0]),a[1]===h[i+1]&&i!==r-2||(l[n].push(a[1]),n++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,n=t.length;i<n;i++)t[i]=o.LineUtil.simplify(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)}}),o.polyline=function(t,e){return new o.Polyline(t,e)},o.Polyline._flat=function(t){return!o.Util.isArray(t[0])||"object"!=typeof t[0][0]&&"undefined"!=typeof t[0][0]},o.PolyUtil={},o.PolyUtil.clipPolygon=function(t,e,i){var n,s,r,a,h,l,u,c,d,_=[1,4,2,8],m=o.LineUtil;for(s=0,u=t.length;s<u;s++)t[s]._code=m._getBitCode(t[s],e);for(a=0;a<4;a++){for(c=_[a],n=[],s=0,u=t.length,r=u-1;s<u;r=s++)h=t[s],l=t[r],h._code&c?l._code&c||(d=m._getEdgeIntersection(l,h,c,e,i),d._code=m._getBitCode(d,e),n.push(d)):(l._code&c&&(d=m._getEdgeIntersection(l,h,c,e,i),d._code=m._getBitCode(d,e),n.push(d)),n.push(h));t=n}return t},o.Polygon=o.Polyline.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,o,s,r,a,h,l=this._rings[0],u=l.length;if(!u)return null;for(s=r=a=0,t=0,e=u-1;t<u;e=t++)i=l[t],n=l[e],o=i.y*n.x-n.y*i.x,r+=(i.x+n.x)*o,a+=(i.y+n.y)*o,s+=3*o;return h=0===s?l[0]:[r/s,a/s],this._map.layerPointToLatLng(h)},_convertLatLngs:function(t){var e=o.Polyline.prototype._convertLatLngs.call(this,t),i=e.length;return i>=2&&e[0]instanceof o.LatLng&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){o.Polyline.prototype._setLatLngs.call(this,t),o.Polyline._flat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return o.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new o.Point(e,e);if(t=new o.Bounds(t.min.subtract(i),t.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);for(var n,s=0,r=this._rings.length;s<r;s++)n=o.PolyUtil.clipPolygon(this._rings[s],t,!0),n.length&&this._parts.push(n)}},_updatePath:function(){this._renderer._updatePoly(this,!0)}}),o.polygon=function(t,e){return new o.Polygon(t,e)},o.Rectangle=o.Polygon.extend({initialize:function(t,e){o.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=o.latLngBounds(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),o.rectangle=function(t,e){return new o.Rectangle(t,e)},o.CircleMarker=o.Path.extend({options:{fill:!0,radius:10},initialize:function(t,e){o.setOptions(this,e),this._latlng=o.latLng(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=o.latLng(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return o.Path.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),n=[t+i,e+i];this._pxBounds=new o.Bounds(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}}),o.circleMarker=function(t,e){return new o.CircleMarker(t,e)},o.Circle=o.CircleMarker.extend({initialize:function(t,e,i){if("number"==typeof e&&(e=o.extend({},i,{radius:e})),o.setOptions(this,e),this._latlng=o.latLng(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new o.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:o.Path.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===o.CRS.Earth.distance){var s=Math.PI/180,r=this._mRadius/o.CRS.Earth.R/s,a=i.project([e+r,t]),h=i.project([e-r,t]),l=a.add(h).divideBy(2),u=i.unproject(l).lat,c=Math.acos((Math.cos(r*s)-Math.sin(e*s)*Math.sin(u*s))/(Math.cos(e*s)*Math.cos(u*s)))/s;(isNaN(c)||0===c)&&(c=r/Math.cos(Math.PI/180*e)),this._point=l.subtract(i.getPixelOrigin()),this._radius=isNaN(c)?0:Math.max(Math.round(l.x-i.project([u,t-c]).x),1),this._radiusY=Math.max(Math.round(l.y-a.y),1)}else{var d=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(d).x}this._updateBounds()}}),o.circle=function(t,e,i){return new o.Circle(t,e,i)},o.SVG=o.Renderer.extend({getEvents:function(){var t=o.Renderer.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=o.SVG.create("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=o.SVG.create("g"),this._container.appendChild(this._rootGroup)},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){o.Renderer.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),o.DomUtil.setPosition(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=o.SVG.create("path");t.options.className&&o.DomUtil.addClass(e,t.options.className),t.options.interactive&&o.DomUtil.addClass(e,"leaflet-interactive"),this._updateStyle(t)},_addPath:function(t){this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){o.DomUtil.remove(t._path),t.removeInteractiveTarget(t._path)},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,o.SVG.pointsToPath(t._parts,e))},_updateCircle:function(t){var e=t._point,i=t._radius,n=t._radiusY||i,o="a"+i+","+n+" 0 1,0 ",s=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+o+2*i+",0 "+o+2*-i+",0 ";this._setPath(t,s)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){o.DomUtil.toFront(t._path)},_bringToBack:function(t){o.DomUtil.toBack(t._path)}}),o.extend(o.SVG,{create:function(t){return e.createElementNS("http://www.w3.org/2000/svg",t)},pointsToPath:function(t,e){var i,n,s,r,a,h,l="";for(i=0,s=t.length;i<s;i++){for(a=t[i],n=0,r=a.length;n<r;n++)h=a[n],l+=(n?"L":"M")+h.x+" "+h.y;l+=e?o.Browser.svg?"z":"x":""}return l||"M0 0"}}),o.Browser.svg=!(!e.createElementNS||!o.SVG.create("svg").createSVGRect),o.svg=function(t){return o.Browser.svg||o.Browser.vml?new o.SVG(t):null},o.Browser.vml=!o.Browser.svg&&function(){try{var t=e.createElement("div");t.innerHTML='<v:shape adj="1"/>';var i=t.firstChild;return i.style.behavior="url(#default#VML)",i&&"object"==typeof i.adj}catch(t){return!1}}(),o.SVG.include(o.Browser.vml?{_initContainer:function(){this._container=o.DomUtil.create("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||o.Renderer.prototype._update.call(this)},_initPath:function(t){var e=t._container=o.SVG.create("shape");o.DomUtil.addClass(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=o.SVG.create("path"),e.appendChild(t._path),this._updateStyle(t)},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;o.DomUtil.remove(e),t.removeInteractiveTarget(e)},_updateStyle:function(t){var e=t._stroke,i=t._fill,n=t.options,s=t._container;s.stroked=!!n.stroke,s.filled=!!n.fill,n.stroke?(e||(e=t._stroke=o.SVG.create("stroke")),s.appendChild(e),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,n.dashArray?e.dashStyle=o.Util.isArray(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=n.lineCap.replace("butt","flat"),e.joinstyle=n.lineJoin):e&&(s.removeChild(e),t._stroke=null),n.fill?(i||(i=t._fill=o.SVG.create("fill")),s.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(s.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),n=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+n+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){o.DomUtil.toFront(t._container)},_bringToBack:function(t){o.DomUtil.toBack(t._container)}}:{}),o.Browser.vml&&(o.SVG.create=function(){try{return e.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return e.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}()),o.Canvas=o.Renderer.extend({onAdd:function(){o.Renderer.prototype.onAdd.call(this),this._layers=this._layers||{},this._draw()},_initContainer:function(){var t=this._container=e.createElement("canvas");o.DomEvent.on(t,"mousemove",o.Util.throttle(this._onMouseMove,32,this),this).on(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},o.Renderer.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),n=o.Browser.retina?2:1;o.DomUtil.setPosition(e,t.min),e.width=n*i.x,e.height=n*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",o.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_initPath:function(t){this._updateDashArray(t),this._layers[o.stamp(t)]=t},_addPath:o.Util.falseFn,_removePath:function(t){t._removed=!0,this._requestRedraw(t)},_updatePath:function(t){this._redrawBounds=t._pxBounds,this._draw(!0),t._project(),t._update(),this._draw(),this._redrawBounds=null},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(t.options.dashArray){var e,i=t.options.dashArray.split(","),n=[];for(e=0;e<i.length;e++)n.push(Number(i[e]));t.options._dashArray=n}},_requestRedraw:function(t){if(this._map){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new o.Bounds,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e])),this._redrawRequest=this._redrawRequest||o.Util.requestAnimFrame(this._redraw,this)}},_redraw:function(){this._redrawRequest=null,this._draw(!0),this._draw(),this._redrawBounds=null},_draw:function(t){this._clear=t;var e,i=this._redrawBounds;this._ctx.save(),i&&(this._ctx.beginPath(),this._ctx.rect(i.min.x,i.min.y,i.max.x-i.min.x,i.max.y-i.min.y),this._ctx.clip());for(var n in this._layers)e=this._layers[n],(!i||e._pxBounds&&e._pxBounds.intersects(i))&&e._updatePath(),t&&e._removed&&(delete e._removed,delete this._layers[n]);this._ctx.restore()},_updatePoly:function(t,e){var i,n,o,s,r=t._parts,a=r.length,h=this._ctx;if(a){for(this._drawnLayers[t._leaflet_id]=t,h.beginPath(),h.setLineDash&&h.setLineDash(t.options&&t.options._dashArray||[]),i=0;i<a;i++){for(n=0,o=r[i].length;n<o;n++)s=r[i][n],h[n?"lineTo":"moveTo"](s.x,s.y);e&&h.closePath()}this._fillStroke(h,t)}},_updateCircle:function(t){if(!t._empty()){var e=t._point,i=this._ctx,n=t._radius,o=(t._radiusY||n)/n;this._drawnLayers[t._leaflet_id]=t,1!==o&&(i.save(),i.scale(1,o)),i.beginPath(),i.arc(e.x,e.y/o,n,0,2*Math.PI,!1),1!==o&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=this._clear,n=e.options;t.globalCompositeOperation=i?"destination-out":"source-over",n.fill&&(t.globalAlpha=i?1:n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.globalAlpha=i?1:n.opacity,e._prevWeight=t.lineWidth=i?e._prevWeight+1:n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){var e,i=this._map.mouseEventToLayerPoint(t),n=[];for(var s in this._layers)e=this._layers[s],e.options.interactive&&e._containsPoint(i)&&!this._map._draggableMoved(e)&&(o.DomEvent._fakeStop(t),n.push(e));n.length&&this._fireEvent(n,t)},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseOut(t,e),this._handleMouseHover(t,e)}},_handleMouseOut:function(t,e){var i=this._hoveredLayer;!i||"mouseout"!==t.type&&i._containsPoint(e)||(o.DomUtil.removeClass(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){var i,n;for(i in this._drawnLayers)n=this._drawnLayers[i],n.options.interactive&&n._containsPoint(e)&&(o.DomUtil.addClass(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseover"),this._hoveredLayer=n);this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:o.Util.falseFn,_bringToBack:o.Util.falseFn}),o.Browser.canvas=function(){return!!e.createElement("canvas").getContext}(),o.canvas=function(t){return o.Browser.canvas?new o.Canvas(t):null},o.Polyline.prototype._containsPoint=function(t,e){var i,n,s,r,a,h,l=this._clickTolerance();if(!this._pxBounds.contains(t))return!1;for(i=0,r=this._parts.length;i<r;i++)for(h=this._parts[i],n=0,a=h.length,s=a-1;n<a;s=n++)if((e||0!==n)&&o.LineUtil.pointToSegmentDistance(t,h[s],h[n])<=l)return!0;return!1},o.Polygon.prototype._containsPoint=function(t){var e,i,n,s,r,a,h,l,u=!1;if(!this._pxBounds.contains(t))return!1;for(s=0,h=this._parts.length;s<h;s++)for(e=this._parts[s],r=0,l=e.length,a=l-1;r<l;a=r++)i=e[r],n=e[a],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(u=!u);return u||o.Polyline.prototype._containsPoint.call(this,t,!0)},o.CircleMarker.prototype._containsPoint=function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()},o.GeoJSON=o.FeatureGroup.extend({initialize:function(t,e){o.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,n,s=o.Util.isArray(t)?t:t.features;if(s){for(e=0,i=s.length;e<i;e++)n=s[e],(n.geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var r=this.options;if(r.filter&&!r.filter(t))return this;
var a=o.GeoJSON.geometryToLayer(t,r);return a?(a.feature=o.GeoJSON.asFeature(t),a.defaultOptions=a.options,this.resetStyle(a),r.onEachFeature&&r.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return t.options=o.Util.extend({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),o.extend(o.GeoJSON,{geometryToLayer:function(t,e){var i,n,s,r,a="Feature"===t.type?t.geometry:t,h=a?a.coordinates:null,l=[],u=e&&e.pointToLayer,c=e&&e.coordsToLatLng||this.coordsToLatLng;if(!h&&!a)return null;switch(a.type){case"Point":return i=c(h),u?u(t,i):new o.Marker(i);case"MultiPoint":for(s=0,r=h.length;s<r;s++)i=c(h[s]),l.push(u?u(t,i):new o.Marker(i));return new o.FeatureGroup(l);case"LineString":case"MultiLineString":return n=this.coordsToLatLngs(h,"LineString"===a.type?0:1,c),new o.Polyline(n,e);case"Polygon":case"MultiPolygon":return n=this.coordsToLatLngs(h,"Polygon"===a.type?1:2,c),new o.Polygon(n,e);case"GeometryCollection":for(s=0,r=a.geometries.length;s<r;s++){var d=this.geometryToLayer({geometry:a.geometries[s],type:"Feature",properties:t.properties},e);d&&l.push(d)}return new o.FeatureGroup(l);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new o.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,e,i){for(var n,o=[],s=0,r=t.length;s<r;s++)n=e?this.coordsToLatLngs(t[s],e-1,i):(i||this.coordsToLatLng)(t[s]),o.push(n);return o},latLngToCoords:function(t){return t.alt!==i?[t.lng,t.lat,t.alt]:[t.lng,t.lat]},latLngsToCoords:function(t,e,i){for(var n=[],s=0,r=t.length;s<r;s++)n.push(e?o.GeoJSON.latLngsToCoords(t[s],e-1,i):o.GeoJSON.latLngToCoords(t[s]));return!e&&i&&n.push(n[0]),n},getFeature:function(t,e){return t.feature?o.extend({},t.feature,{geometry:e}):o.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var r={toGeoJSON:function(){return o.GeoJSON.getFeature(this,{type:"Point",coordinates:o.GeoJSON.latLngToCoords(this.getLatLng())})}};o.Marker.include(r),o.Circle.include(r),o.CircleMarker.include(r),o.Polyline.prototype.toGeoJSON=function(){var t=!o.Polyline._flat(this._latlngs),e=o.GeoJSON.latLngsToCoords(this._latlngs,t?1:0);return o.GeoJSON.getFeature(this,{type:(t?"Multi":"")+"LineString",coordinates:e})},o.Polygon.prototype.toGeoJSON=function(){var t=!o.Polyline._flat(this._latlngs),e=t&&!o.Polyline._flat(this._latlngs[0]),i=o.GeoJSON.latLngsToCoords(this._latlngs,e?2:t?1:0,!0);return t||(i=[i]),o.GeoJSON.getFeature(this,{type:(e?"Multi":"")+"Polygon",coordinates:i})},o.LayerGroup.include({toMultiPoint:function(){var t=[];return this.eachLayer(function(e){t.push(e.toGeoJSON().geometry.coordinates)}),o.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint();var e="GeometryCollection"===t,i=[];return this.eachLayer(function(t){if(t.toGeoJSON){var n=t.toGeoJSON();i.push(e?n.geometry:o.GeoJSON.asFeature(n))}}),e?o.GeoJSON.getFeature(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}}),o.geoJSON=function(t,e){return new o.GeoJSON(t,e)},o.geoJson=o.geoJSON;var a="_leaflet_events";o.DomEvent={on:function(t,e,i,n){if("object"==typeof e)for(var s in e)this._on(t,s,e[s],i);else{e=o.Util.splitWords(e);for(var r=0,a=e.length;r<a;r++)this._on(t,e[r],i,n)}return this},off:function(t,e,i,n){if("object"==typeof e)for(var s in e)this._off(t,s,e[s],i);else{e=o.Util.splitWords(e);for(var r=0,a=e.length;r<a;r++)this._off(t,e[r],i,n)}return this},_on:function(e,i,n,s){var r=i+o.stamp(n)+(s?"_"+o.stamp(s):"");if(e[a]&&e[a][r])return this;var h=function(i){return n.call(s||e,i||t.event)},l=h;return o.Browser.pointer&&0===i.indexOf("touch")?this.addPointerListener(e,i,h,r):o.Browser.touch&&"dblclick"===i&&this.addDoubleTapListener?this.addDoubleTapListener(e,h,r):"addEventListener"in e?"mousewheel"===i?e.addEventListener("onwheel"in e?"wheel":"mousewheel",h,!1):"mouseenter"===i||"mouseleave"===i?(h=function(i){i=i||t.event,o.DomEvent._isExternalTarget(e,i)&&l(i)},e.addEventListener("mouseenter"===i?"mouseover":"mouseout",h,!1)):("click"===i&&o.Browser.android&&(h=function(t){return o.DomEvent._filterClick(t,l)}),e.addEventListener(i,h,!1)):"attachEvent"in e&&e.attachEvent("on"+i,h),e[a]=e[a]||{},e[a][r]=h,this},_off:function(t,e,i,n){var s=e+o.stamp(i)+(n?"_"+o.stamp(n):""),r=t[a]&&t[a][s];return r?(o.Browser.pointer&&0===e.indexOf("touch")?this.removePointerListener(t,e,s):o.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,s):"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",r,!1):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,r,!1):"detachEvent"in t&&t.detachEvent("on"+e,r),t[a][s]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,o.DomEvent._skipped(t),this},disableScrollPropagation:function(t){return o.DomEvent.on(t,"mousewheel",o.DomEvent.stopPropagation)},disableClickPropagation:function(t){var e=o.DomEvent.stopPropagation;return o.DomEvent.on(t,o.Draggable.START.join(" "),e),o.DomEvent.on(t,{click:o.DomEvent._fakeStop,dblclick:e})},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return o.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){if(!e)return new o.Point(t.clientX,t.clientY);var i=e.getBoundingClientRect();return new o.Point(t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop)},_wheelPxFactor:o.Browser.win&&o.Browser.chrome?2:o.Browser.gecko?t.devicePixelRatio:1,getWheelDelta:function(t){return o.Browser.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/o.DomEvent._wheelPxFactor:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0},_skipEvents:{},_fakeStop:function(t){o.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_isExternalTarget:function(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(t){return!1}return i!==t},_filterClick:function(t,e){var i=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,n=o.DomEvent._lastClick&&i-o.DomEvent._lastClick;return n&&n>100&&n<500||t.target._simulatedClick&&!t._simulated?void o.DomEvent.stop(t):(o.DomEvent._lastClick=i,void e(t))}},o.DomEvent.addListener=o.DomEvent.on,o.DomEvent.removeListener=o.DomEvent.off,o.Draggable=o.Evented.extend({options:{clickTolerance:3},statics:{START:o.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e,i){this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(o.DomEvent.on(this._dragStartTarget,o.Draggable.START.join(" "),this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(o.DomEvent.off(this._dragStartTarget,o.Draggable.START.join(" "),this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!o.DomUtil.hasClass(this._element,"leaflet-zoom-anim")&&!(o.Draggable._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches)&&this._enabled&&(o.Draggable._dragging=!0,this._preventOutline&&o.DomUtil.preventOutline(this._element),o.DomUtil.disableImageDrag(),o.DomUtil.disableTextSelection(),!this._moving))){this.fire("down");var i=t.touches?t.touches[0]:t;this._startPoint=new o.Point(i.clientX,i.clientY),o.DomEvent.on(e,o.Draggable.MOVE[t.type],this._onMove,this).on(e,o.Draggable.END[t.type],this._onUp,this)}},_onMove:function(i){if(!i._simulated&&this._enabled){if(i.touches&&i.touches.length>1)return void(this._moved=!0);var n=i.touches&&1===i.touches.length?i.touches[0]:i,s=new o.Point(n.clientX,n.clientY),r=s.subtract(this._startPoint);(r.x||r.y)&&(Math.abs(r.x)+Math.abs(r.y)<this.options.clickTolerance||(o.DomEvent.preventDefault(i),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=o.DomUtil.getPosition(this._element).subtract(r),o.DomUtil.addClass(e.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,t.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),o.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(r),this._moving=!0,o.Util.cancelAnimFrame(this._animRequest),this._lastEvent=i,this._animRequest=o.Util.requestAnimFrame(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),o.DomUtil.setPosition(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){if(!t._simulated&&this._enabled){o.DomUtil.removeClass(e.body,"leaflet-dragging"),this._lastTarget&&(o.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var i in o.Draggable.MOVE)o.DomEvent.off(e,o.Draggable.MOVE[i],this._onMove,this).off(e,o.Draggable.END[i],this._onUp,this);o.DomUtil.enableImageDrag(),o.DomUtil.enableTextSelection(),this._moved&&this._moving&&(o.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,o.Draggable._dragging=!1}}}),o.Handler=o.Class.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}}),o.Map.mergeOptions({dragging:!0,inertia:!o.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0}),o.Map.Drag=o.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new o.Draggable(t._mapPane,t._container),this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}o.DomUtil.addClass(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){o.DomUtil.removeClass(this._map._container,"leaflet-grab"),o.DomUtil.removeClass(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDown:function(){this._map._stop()},_onDragStart:function(){var t=this._map;if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=o.latLngBounds(this._map.options.maxBounds);this._offsetLimit=o.bounds(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),e-this._times[0]>50&&(this._positions.shift(),this._times.shift())}this._map.fire("move",t).fire("drag",t)},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-e+i)%t+e-i,s=(n+e+i)%t-e-i,r=Math.abs(o+i)<Math.abs(s+i)?o:s;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=r},_onDragEnd:function(t){var e=this._map,i=e.options,n=!i.inertia||this._times.length<2;if(e.fire("dragend",t),n)e.fire("moveend");else{var s=this._lastPos.subtract(this._positions[0]),r=(this._lastTime-this._times[0])/1e3,a=i.easeLinearity,h=s.multiplyBy(a/r),l=h.distanceTo([0,0]),u=Math.min(i.inertiaMaxSpeed,l),c=h.multiplyBy(u/l),d=u/(i.inertiaDeceleration*a),_=c.multiplyBy(-d/2).round();_.x||_.y?(_=e._limitOffset(_,e.options.maxBounds),o.Util.requestAnimFrame(function(){e.panBy(_,{duration:d,easeLinearity:a,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}}),o.Map.addInitHook("addHandler","dragging",o.Map.Drag),o.Map.mergeOptions({doubleClickZoom:!0}),o.Map.DoubleClickZoom=o.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),n=e.options.zoomDelta,o=t.originalEvent.shiftKey?i-n:i+n;"center"===e.options.doubleClickZoom?e.setZoom(o):e.setZoomAround(t.containerPoint,o)}}),o.Map.addInitHook("addHandler","doubleClickZoom",o.Map.DoubleClickZoom),o.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60}),o.Map.ScrollWheelZoom=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){o.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=o.DomEvent.getWheelDelta(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o.bind(this._performZoom,this),n),o.DomEvent.stop(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var n=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,s=i?Math.ceil(o/i)*i:o,r=t._limitZoom(e+(this._delta>0?s:-s))-e;this._delta=0,this._startTime=null,r&&("center"===t.options.scrollWheelZoom?t.setZoom(e+r):t.setZoomAround(this._lastMousePos,e+r))}}),o.Map.addInitHook("addHandler","scrollWheelZoom",o.Map.ScrollWheelZoom),o.extend(o.DomEvent,{_touchstart:o.Browser.msPointer?"MSPointerDown":o.Browser.pointer?"pointerdown":"touchstart",_touchend:o.Browser.msPointer?"MSPointerUp":o.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,e,i){function n(t){var e;if(e=o.Browser.pointer?o.DomEvent._pointersCount:t.touches.length,!(e>1)){var i=Date.now(),n=i-(r||i);a=t.touches?t.touches[0]:t,h=n>0&&n<=l,r=i}}function s(){if(h&&!a.cancelBubble){if(o.Browser.pointer){var t,i,n={};for(i in a)t=a[i],n[i]=t&&t.bind?t.bind(a):t;a=n}a.type="dblclick",e(a),r=null}}var r,a,h=!1,l=250,u="_leaflet_",c=this._touchstart,d=this._touchend;return t[u+c+i]=n,t[u+d+i]=s,t[u+"dblclick"+i]=e,t.addEventListener(c,n,!1),t.addEventListener(d,s,!1),o.Browser.edge||t.addEventListener("dblclick",e,!1),this},removeDoubleTapListener:function(t,e){var i="_leaflet_",n=t[i+this._touchstart+e],s=t[i+this._touchend+e],r=t[i+"dblclick"+e];return t.removeEventListener(this._touchstart,n,!1),t.removeEventListener(this._touchend,s,!1),o.Browser.edge||t.removeEventListener("dblclick",r,!1),this}}),o.extend(o.DomEvent,{POINTER_DOWN:o.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:o.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:o.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:o.Browser.msPointer?"MSPointerCancel":"pointercancel",TAG_WHITE_LIST:["INPUT","SELECT","OPTION"],_pointers:{},_pointersCount:0,addPointerListener:function(t,e,i,n){return"touchstart"===e?this._addPointerStart(t,i,n):"touchmove"===e?this._addPointerMove(t,i,n):"touchend"===e&&this._addPointerEnd(t,i,n),this},removePointerListener:function(t,e,i){var n=t["_leaflet_"+e+i];return"touchstart"===e?t.removeEventListener(this.POINTER_DOWN,n,!1):"touchmove"===e?t.removeEventListener(this.POINTER_MOVE,n,!1):"touchend"===e&&(t.removeEventListener(this.POINTER_UP,n,!1),t.removeEventListener(this.POINTER_CANCEL,n,!1)),this},_addPointerStart:function(t,i,n){var s=o.bind(function(t){if("mouse"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(this.TAG_WHITE_LIST.indexOf(t.target.tagName)<0))return;o.DomEvent.preventDefault(t)}this._handlePointer(t,i)},this);if(t["_leaflet_touchstart"+n]=s,t.addEventListener(this.POINTER_DOWN,s,!1),!this._pointerDocListener){var r=o.bind(this._globalPointerUp,this);e.documentElement.addEventListener(this.POINTER_DOWN,o.bind(this._globalPointerDown,this),!0),e.documentElement.addEventListener(this.POINTER_MOVE,o.bind(this._globalPointerMove,this),!0),e.documentElement.addEventListener(this.POINTER_UP,r,!0),e.documentElement.addEventListener(this.POINTER_CANCEL,r,!0),this._pointerDocListener=!0}},_globalPointerDown:function(t){this._pointers[t.pointerId]=t,this._pointersCount++},_globalPointerMove:function(t){this._pointers[t.pointerId]&&(this._pointers[t.pointerId]=t)},_globalPointerUp:function(t){delete this._pointers[t.pointerId],this._pointersCount--},_handlePointer:function(t,e){t.touches=[];for(var i in this._pointers)t.touches.push(this._pointers[i]);t.changedTouches=[t],e(t)},_addPointerMove:function(t,e,i){var n=o.bind(function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&this._handlePointer(t,e)},this);t["_leaflet_touchmove"+i]=n,t.addEventListener(this.POINTER_MOVE,n,!1)},_addPointerEnd:function(t,e,i){var n=o.bind(function(t){this._handlePointer(t,e)},this);t["_leaflet_touchend"+i]=n,t.addEventListener(this.POINTER_UP,n,!1),t.addEventListener(this.POINTER_CANCEL,n,!1)}}),o.Map.mergeOptions({touchZoom:o.Browser.touch&&!o.Browser.android23,bounceAtZoomLimits:!0}),o.Map.TouchZoom=o.Handler.extend({addHooks:function(){o.DomUtil.addClass(this._map._container,"leaflet-touch-zoom"),o.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){o.DomUtil.removeClass(this._map._container,"leaflet-touch-zoom"),o.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var i=this._map;if(t.touches&&2===t.touches.length&&!i._animatingZoom&&!this._zooming){var n=i.mouseEventToContainerPoint(t.touches[0]),s=i.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=i.getSize()._divideBy(2),this._startLatLng=i.containerPointToLatLng(this._centerPoint),"center"!==i.options.touchZoom&&(this._pinchStartLatLng=i.containerPointToLatLng(n.add(s)._divideBy(2))),this._startDist=n.distanceTo(s),this._startZoom=i.getZoom(),this._moved=!1,this._zooming=!0,i._stop(),o.DomEvent.on(e,"touchmove",this._onTouchMove,this).on(e,"touchend",this._onTouchEnd,this),o.DomEvent.preventDefault(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]),s=i.distanceTo(n)/this._startDist;if(this._zoom=e.getScaleZoom(s,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&s<1||this._zoom>e.getMaxZoom()&&s>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===s)return}else{var r=i._add(n)._divideBy(2)._subtract(this._centerPoint);if(1===s&&0===r.x&&0===r.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(r),this._zoom)}this._moved||(e._moveStart(!0),this._moved=!0),o.Util.cancelAnimFrame(this._animRequest);var a=o.bind(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=o.Util.requestAnimFrame(a,this,!0),o.DomEvent.preventDefault(t)}},_onTouchEnd:function(){return this._moved&&this._zooming?(this._zooming=!1,o.Util.cancelAnimFrame(this._animRequest),o.DomEvent.off(e,"touchmove",this._onTouchMove).off(e,"touchend",this._onTouchEnd),void(this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom)))):void(this._zooming=!1)}}),o.Map.addInitHook("addHandler","touchZoom",o.Map.TouchZoom),o.Map.mergeOptions({tap:!0,tapTolerance:15}),o.Map.Tap=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){o.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(o.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var i=t.touches[0],n=i.target;this._startPos=this._newPos=new o.Point(i.clientX,i.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&o.DomUtil.addClass(n,"leaflet-active"),this._holdTimeout=setTimeout(o.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",i))},this),1e3),this._simulateEvent("mousedown",i),o.DomEvent.on(e,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),o.DomEvent.off(e,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var i=t.changedTouches[0],n=i.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&o.DomUtil.removeClass(n,"leaflet-active"),this._simulateEvent("mouseup",i),this._isTapValid()&&this._simulateEvent("click",i)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new o.Point(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(i,n){var o=e.createEvent("MouseEvents");o._simulated=!0,n.target._simulatedClick=!0,o.initMouseEvent(i,!0,!0,t,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(o)}}),o.Browser.touch&&!o.Browser.pointer&&o.Map.addInitHook("addHandler","tap",o.Map.Tap),o.Map.mergeOptions({boxZoom:!0}),o.Map.BoxZoom=o.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){o.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){o.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_resetState:function(){this._moved=!1},_onMouseDown:function(t){return!(!t.shiftKey||1!==t.which&&1!==t.button)&&(this._resetState(),o.DomUtil.disableTextSelection(),o.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(t),void o.DomEvent.on(e,{contextmenu:o.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=o.DomUtil.create("div","leaflet-zoom-box",this._container),o.DomUtil.addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new o.Bounds(this._point,this._startPoint),i=e.getSize();o.DomUtil.setPosition(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(o.DomUtil.remove(this._box),o.DomUtil.removeClass(this._container,"leaflet-crosshair")),o.DomUtil.enableTextSelection(),o.DomUtil.enableImageDrag(),o.DomEvent.off(e,{contextmenu:o.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){setTimeout(o.bind(this._resetState,this),0);var e=new o.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),o.Map.addInitHook("addHandler","boxZoom",o.Map.BoxZoom),o.Map.mergeOptions({keyboard:!0,keyboardPanDelta:80}),o.Map.Keyboard=o.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),o.DomEvent.on(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),o.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=e.body,n=e.documentElement,o=i.scrollTop||n.scrollTop,s=i.scrollLeft||n.scrollLeft;this._map._container.focus(),t.scrollTo(s,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,i,n=this._panKeys={},o=this.keyCodes;for(e=0,i=o.left.length;e<i;e++)n[o.left[e]]=[-1*t,0];for(e=0,i=o.right.length;e<i;e++)n[o.right[e]]=[t,0];for(e=0,i=o.down.length;e<i;e++)n[o.down[e]]=[0,t];for(e=0,i=o.up.length;e<i;e++)n[o.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,i,n=this._zoomKeys={},o=this.keyCodes;for(e=0,i=o.zoomIn.length;e<i;e++)n[o.zoomIn[e]]=t;for(e=0,i=o.zoomOut.length;e<i;e++)n[o.zoomOut[e]]=-t},_addHooks:function(){o.DomEvent.on(e,"keydown",this._onKeyDown,this)},_removeHooks:function(){o.DomEvent.off(e,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,i=t.keyCode,n=this._map;if(i in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;e=this._panKeys[i],t.shiftKey&&(e=o.point(e).multiplyBy(3)),n.panBy(e),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i)return;n.closePopup()}o.DomEvent.stop(t)}}}),o.Map.addInitHook("addHandler","keyboard",o.Map.Keyboard),o.Handler.MarkerDrag=o.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new o.Draggable(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),o.DomUtil.addClass(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&o.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(t){var e=this._marker,i=e._shadow,n=o.DomUtil.getPosition(e._icon),s=e._map.layerPointToLatLng(n);i&&o.DomUtil.setPosition(i,n),e._latlng=s,t.latlng=s,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),o.Control=o.Class.extend({options:{position:"topright"},initialize:function(t){o.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return o.DomUtil.addClass(e,"leaflet-control"),i.indexOf("bottom")!==-1?n.insertBefore(e,n.firstChild):n.appendChild(e),this},remove:function(){return this._map?(o.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),o.control=function(t){return new o.Control(t)},o.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){function t(t,s){var r=i+t+" "+i+s;e[t+s]=o.DomUtil.create("div",r,n)}var e=this._controlCorners={},i="leaflet-",n=this._controlContainer=o.DomUtil.create("div",i+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){o.DomUtil.remove(this._controlContainer)}}),o.Control.Zoom=o.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=o.DomUtil.create("div",e+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,n,s){var r=o.DomUtil.create("a",i,n);return r.innerHTML=t,r.href="#",r.title=e,o.DomEvent.on(r,"mousedown dblclick",o.DomEvent.stopPropagation).on(r,"click",o.DomEvent.stop).on(r,"click",s,this).on(r,"click",this._refocusOnMap,this),r},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";o.DomUtil.removeClass(this._zoomInButton,e),o.DomUtil.removeClass(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&o.DomUtil.addClass(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&o.DomUtil.addClass(this._zoomInButton,e)}}),o.Map.mergeOptions({zoomControl:!0}),o.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new o.Control.Zoom,this.addControl(this.zoomControl))}),o.control.zoom=function(t){return new o.Control.Zoom(t)},o.Control.Attribution=o.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){o.setOptions(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=o.DomUtil.create("div","leaflet-control-attribution"),o.DomEvent&&o.DomEvent.disableClickPropagation(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container;
},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" | ")}}}),o.Map.mergeOptions({attributionControl:!0}),o.Map.addInitHook(function(){this.options.attributionControl&&(new o.Control.Attribution).addTo(this)}),o.control.attribution=function(t){return new o.Control.Attribution(t)},o.Control.Scale=o.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=o.DomUtil.create("div",e),n=this.options;return this._addScales(n,e+"-line",i),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=o.DomUtil.create("div",e,i)),t.imperial&&(this._iScale=o.DomUtil.create("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e,i,n,o=3.2808399*t;o>5280?(e=o/5280,i=this._getRoundNum(e),this._updateScale(this._iScale,i+" mi",i/e)):(n=this._getRoundNum(o),this._updateScale(this._iScale,n+" ft",n/o))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,e*i}}),o.control.scale=function(t){return new o.Control.Scale(t)},o.Control.Layers=o.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1},initialize:function(t,e,i){o.setOptions(this,i),this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var n in t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){return this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this),this._container},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(o.stamp(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){o.DomUtil.addClass(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(o.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=t+"px"):o.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return o.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=o.DomUtil.create("div",t);e.setAttribute("aria-haspopup",!0),o.DomEvent.disableClickPropagation(e),o.Browser.touch||o.DomEvent.disableScrollPropagation(e);var i=this._form=o.DomUtil.create("form",t+"-list");if(this.options.collapsed){o.Browser.android||o.DomEvent.on(e,{mouseenter:this.expand,mouseleave:this.collapse},this);var n=this._layersLink=o.DomUtil.create("a",t+"-toggle",e);n.href="#",n.title="Layers",o.Browser.touch?o.DomEvent.on(n,"click",o.DomEvent.stop).on(n,"click",this.expand,this):o.DomEvent.on(n,"focus",this.expand,this),o.DomEvent.on(i,"click",function(){setTimeout(o.bind(this._onInputClick,this),0)},this),this._map.on("click",this.collapse,this)}else this.expand();this._baseLayersList=o.DomUtil.create("div",t+"-base",i),this._separator=o.DomUtil.create("div",t+"-separator",i),this._overlaysList=o.DomUtil.create("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&o.stamp(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(!this._container)return this;o.DomUtil.empty(this._baseLayersList),o.DomUtil.empty(this._overlaysList);var t,e,i,n,s=0;for(i=0;i<this._layers.length;i++)n=this._layers[i],this._addItem(n),e=e||n.overlay,t=t||!n.overlay,s+=n.overlay?0:1;return this.options.hideSingleBase&&(t=t&&s>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(o.stamp(t.target)),i=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,i){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(i?' checked="checked"':"")+"/>",o=e.createElement("div");return o.innerHTML=n,o.firstChild},_addItem:function(t){var i,n=e.createElement("label"),s=this._map.hasLayer(t.layer);t.overlay?(i=e.createElement("input"),i.type="checkbox",i.className="leaflet-control-layers-selector",i.defaultChecked=s):i=this._createRadioElement("leaflet-base-layers",s),i.layerId=o.stamp(t.layer),o.DomEvent.on(i,"click",this._onInputClick,this);var r=e.createElement("span");r.innerHTML=" "+t.name;var a=e.createElement("div");n.appendChild(a),a.appendChild(i),a.appendChild(r);var h=t.overlay?this._overlaysList:this._baseLayersList;return h.appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,i,n=this._form.getElementsByTagName("input"),o=[],s=[];this._handlingClick=!0;for(var r=n.length-1;r>=0;r--)t=n[r],e=this._getLayer(t.layerId).layer,i=this._map.hasLayer(e),t.checked&&!i?o.push(e):!t.checked&&i&&s.push(e);for(r=0;r<s.length;r++)this._map.removeLayer(s[r]);for(r=0;r<o.length;r++)this._map.addLayer(o[r]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._form.getElementsByTagName("input"),o=this._map.getZoom(),s=n.length-1;s>=0;s--)t=n[s],e=this._getLayer(t.layerId).layer,t.disabled=e.options.minZoom!==i&&o<e.options.minZoom||e.options.maxZoom!==i&&o>e.options.maxZoom},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),o.control.layers=function(t,e,i){return new o.Control.Layers(t,e,i)},o.PosAnimation=o.Evented.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=o.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=o.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=1e3*this._duration;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),o.DomUtil.setPosition(this._el,i),this.fire("step")},_complete:function(){o.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),o.Map.include({setView:function(t,e,n){if(e=e===i?this._zoom:this._limitZoom(e),t=this._limitCenter(o.latLng(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==i&&(n.zoom=o.extend({animate:n.animate},n.zoom),n.pan=o.extend({animate:n.animate,duration:n.duration},n.pan));var s=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan);if(s)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},panBy:function(t,e){if(t=o.point(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new o.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){o.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){o.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._floor();return!((e&&e.animate)!==!0&&!this.getSize().contains(i))&&(this.panBy(i,e),!0)}}),o.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4});var h=o.DomUtil.TRANSITION&&o.Browser.any3d&&!o.Browser.mobileOpera;h&&o.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),o.DomEvent.on(this._proxy,o.DomUtil.TRANSITION_END,this._catchTransitionEnd,this))}),o.Map.include(h?{_createAnimProxy:function(){var t=this._proxy=o.DomUtil.create("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var i=o.DomUtil.TRANSFORM,n=t.style[i];o.DomUtil.setTransform(t,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),n===t.style[i]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var e=this.getCenter(),i=this.getZoom();o.DomUtil.setTransform(t,this.project(e,i),this.getZoomScale(i,1))},this)},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||i.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),s=this._getCenterOffset(t)._divideBy(1-1/n);return!(i.animate!==!0&&!this.getSize().contains(s))&&(o.Util.requestAnimFrame(function(){this._moveStart(!0)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,i,n){i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,o.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:n}),setTimeout(o.bind(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(o.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),o.Util.requestAnimFrame(function(){this._moveEnd(!0)},this))}}:{}),o.Map.include({flyTo:function(t,e,n){function s(t){var e=t?-1:1,i=t?v:g,n=v*v-g*g+e*L*L*y*y,o=2*i*L*y,s=n/o,r=Math.sqrt(s*s+1)-s,a=r<1e-9?-18:Math.log(r);return a}function r(t){return(Math.exp(t)-Math.exp(-t))/2}function a(t){return(Math.exp(t)+Math.exp(-t))/2}function h(t){return r(t)/a(t)}function l(t){return g*(a(x)/a(x+P*t))}function u(t){return g*(a(x)*h(x+P*t)-r(x))/L}function c(t){return 1-Math.pow(1-t,1.5)}function d(){var i=(Date.now()-b)/T,n=c(i)*w;i<=1?(this._flyToFrame=o.Util.requestAnimFrame(d,this),this._move(this.unproject(_.add(m.subtract(_).multiplyBy(u(n)/y)),f),this.getScaleZoom(g/l(n),f),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}if(n=n||{},n.animate===!1||!o.Browser.any3d)return this.setView(t,e,n);this._stop();var _=this.project(this.getCenter()),m=this.project(t),p=this.getSize(),f=this._zoom;t=o.latLng(t),e=e===i?f:e;var g=Math.max(p.x,p.y),v=g*this.getZoomScale(f,e),y=m.distanceTo(_)||1,P=1.42,L=P*P,x=s(0),b=Date.now(),w=(s(1)-x)/P,T=n.duration?1e3*n.duration:1e3*w*.8;return this._moveStart(!0),d.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)}}),o.Map.include({_defaultLocateOptions:{timeout:1e4,watch:!1},locate:function(t){if(t=this._locateOptions=o.extend({},this._defaultLocateOptions,t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=o.bind(this._handleGeolocationResponse,this),i=o.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,i=t.coords.longitude,n=new o.LatLng(e,i),s=n.toBounds(t.coords.accuracy),r=this._locateOptions;if(r.setView){var a=this.getBoundsZoom(s);this.setView(n,r.maxZoom?Math.min(a,r.maxZoom):a)}var h={latlng:n,bounds:s,timestamp:t.timestamp};for(var l in t.coords)"number"==typeof t.coords[l]&&(h[l]=t.coords[l]);this.fire("locationfound",h)}})}(window,document);/* interact.js v1.2.6 | https://raw.github.com/taye/interact.js/master/LICENSE */ (function(F){function ma(){}function t(a){if(!a||"object"!==typeof a)return!1;var b=V(a)||q;return/object|function/.test(typeof b.Element)?a instanceof b.Element:1===a.nodeType&&"string"===typeof a.nodeName}function Ba(a){return a===q||!(!a||!a.Window)&&a instanceof a.Window}function da(a){return z(a)&&void 0!==typeof a.length&&A(a.splice)}function z(a){return!!a&&"object"===typeof a}function A(a){return"function"===typeof a}function K(a){return"number"===typeof a}function H(a){return"boolean"===
typeof a}function N(a){return"string"===typeof a}function ea(a){if(!N(a))return!1;Q.querySelector(a);return!0}function x(a,b){for(var c in b)a[c]=b[c];return a}function ra(a,b){for(var c in b){var d=!1,e;for(e in Ca)if(0===c.indexOf(e)&&Ca[e].test(c)){d=!0;break}d||(a[c]=b[c])}return a}function sa(a,b){a.page=a.page||{};a.page.x=b.page.x;a.page.y=b.page.y;a.client=a.client||{};a.client.x=b.client.x;a.client.y=b.client.y;a.timeStamp=b.timeStamp}function Ta(a,b,c){a.page.x=c.page.x-b.page.x;a.page.y=
c.page.y-b.page.y;a.client.x=c.client.x-b.client.x;a.client.y=c.client.y-b.client.y;a.timeStamp=(new Date).getTime()-b.timeStamp;b=Math.max(a.timeStamp/1E3,.001);a.page.speed=fa(a.page.x,a.page.y)/b;a.page.vx=a.page.x/b;a.page.vy=a.page.y/b;a.client.speed=fa(a.client.x,a.page.y)/b;a.client.vx=a.client.x/b;a.client.vy=a.client.y/b}function Ua(a){return a instanceof q.Event||ga&&q.Touch&&a instanceof q.Touch}function ta(a,b,c){c=c||{};a=a||"page";c.x=b[a+"X"];c.y=b[a+"Y"];return c}function Da(a,b){b=
b||{};Va&&Ua(a)?(ta("screen",a,b),b.x+=q.scrollX,b.y+=q.scrollY):ta("page",a,b);return b}function Wa(a,b){b=b||{};Va&&Ua(a)?ta("screen",a,b):ta("client",a,b);return b}function O(a){return K(a.pointerId)?a.pointerId:a.identifier}function Ea(a){return a instanceof nb?a.correspondingUseElement:a}function V(a){if(Ba(a))return a;a=a.ownerDocument||a;return a.defaultView||a.parentWindow||q}function Fa(a){return(a=a instanceof Xa?a.getBoundingClientRect():a.getClientRects()[0])&&{left:a.left,right:a.right,
top:a.top,bottom:a.bottom,width:a.width||a.right-a.left,height:a.height||a.bottom-a.top}}function ua(a){var b,c=Fa(a);!ob&&c&&(b=(b=V(a))||q,a=b.scrollX||b.document.documentElement.scrollLeft,b=b.scrollY||b.document.documentElement.scrollTop,c.left+=a,c.right+=a,c.top+=b,c.bottom+=b);return c}function Ga(a){var b=[];da(a)?(b[0]=a[0],b[1]=a[1]):"touchend"===a.type?1===a.touches.length?(b[0]=a.touches[0],b[1]=a.changedTouches[0]):0===a.touches.length&&(b[0]=a.changedTouches[0],b[1]=a.changedTouches[1]):
(b[0]=a.touches[0],b[1]=a.touches[1]);return b}function Ya(a){for(var b={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},c,d=0;d<a.length;d++)for(c in b)b[c]+=a[d][c];for(c in b)b[c]/=a.length;return b}function Ha(a){if(a.length||a.touches&&1<a.touches.length){a=Ga(a);var b=Math.min(a[0].pageX,a[1].pageX),c=Math.min(a[0].pageY,a[1].pageY);return{x:b,y:c,left:b,top:c,width:Math.max(a[0].pageX,a[1].pageX)-b,height:Math.max(a[0].pageY,a[1].pageY)-c}}}function Ia(a,b){b=b||D.deltaSource;var c=
b+"X",d=b+"Y",e=Ga(a);return fa(e[0][c]-e[1][c],e[0][d]-e[1][d])}function Ja(a,b,c){c=c||D.deltaSource;var d=c+"X";c+="Y";a=Ga(a);d=180*Math.atan((a[0][c]-a[1][c])/(a[0][d]-a[1][d]))/Math.PI;K(b)&&(b=(d-b)%360,315<b?d-=360+d/360|0:135<b?d-=180+d/360|0:-315>b?d+=360+d/360|0:-135>b&&(d+=180+d/360|0));return d}function na(a,b){var c=a?a.options.origin:D.origin;"parent"===c?c=L(b):"self"===c?c=a.getRect(b):ea(c)&&(c=Ka(b,c)||{x:0,y:0});A(c)&&(c=c(a&&b));t(c)&&(c=ua(c));c.x="x"in c?c.x:c.left;c.y="y"in
c?c.y:c.top;return c}function Za(a,b,c,d){var e=1-a;return e*e*b+2*e*a*c+a*a*d}function Y(a,b){for(;b;){if(b===a)return!0;b=b.parentNode}return!1}function Ka(a,b){for(var c=L(a);t(c);){if(R(c,b))return c;c=L(c)}return null}function L(a){if((a=a.parentNode)&&a instanceof $a)for(;(a=a.host)&&a&&a instanceof $a;);return a}function va(a,b){return a._context===b.ownerDocument||Y(a._context,b)}function Z(a,b,c){return(a=a.options.ignoreFrom)&&t(c)?N(a)?La(c,a,b):t(a)?Y(a,c):!1:!1}function aa(a,b,c){return(a=
a.options.allowFrom)?t(c)?N(a)?La(c,a,b):t(a)?Y(a,c):!1:!1:!0}function ab(a,b){if(!b)return!1;var c=b.options.drag.axis;return"xy"===a||"xy"===c||c===a}function Ma(a,b){var c=a.options;/^resize/.test(b)&&(b="resize");return c[b].snap&&c[b].snap.enabled}function Na(a,b){var c=a.options;/^resize/.test(b)&&(b="resize");return c[b].restrict&&c[b].restrict.enabled}function ha(a,b,c){for(var d=a.options,e=d[c.name].max,d=d[c.name].maxPerElement,h=0,f=0,g=0,k=0,y=r.length;k<y;k++){var n=r[k],u=n.prepared.name;
if(n.interacting()&&(h++,h>=wa||n.target===a&&(f+=u===c.name|0,f>=e||n.element===b&&(g++,u!==c.name||g>=d))))return!1}return 0<wa}function xa(){this.prevDropElement=this.prevDropTarget=this.dropElement=this.dropTarget=this.element=this.target=null;this.prepared={name:null,axis:null,edges:null};this.matches=[];this.matchElements=[];this.inertiaStatus={active:!1,smoothEnd:!1,ending:!1,startEvent:null,upCoords:{},xe:0,ye:0,sx:0,sy:0,t0:0,vx0:0,vys:0,duration:0,resumeDx:0,resumeDy:0,lambda_v0:0,one_ve_v0:0,
i:null};if(A(Function.prototype.bind))this.boundInertiaFrame=this.inertiaFrame.bind(this),this.boundSmoothEndFrame=this.smoothEndFrame.bind(this);else{var a=this;this.boundInertiaFrame=function(){return a.inertiaFrame()};this.boundSmoothEndFrame=function(){return a.smoothEndFrame()}}this.activeDrops={dropzones:[],elements:[],rects:[]};this.pointers=[];this.pointerIds=[];this.downTargets=[];this.downTimes=[];this.holdTimers=[];this.prevCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0};this.curCoords=
{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0};this.startCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0};this.pointerDelta={page:{x:0,y:0,vx:0,vy:0,speed:0},client:{x:0,y:0,vx:0,vy:0,speed:0},timeStamp:0};this.downEvent=null;this.downPointer={};this.prevEvent=this._curEventTarget=this._eventTarget=null;this.tapTime=0;this.prevTap=null;this.startOffset={left:0,right:0,top:0,bottom:0};this.restrictOffset={left:0,right:0,top:0,bottom:0};this.snapOffsets=[];this.gesture={start:{x:0,y:0},startDistance:0,
prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0};this.snapStatus={x:0,y:0,dx:0,dy:0,realX:0,realY:0,snappedX:0,snappedY:0,targets:[],locked:!1,changed:!1};this.restrictStatus={dx:0,dy:0,restrictedX:0,restrictedY:0,snap:null,restricted:!1,changed:!1};this.restrictStatus.snap=this.snapStatus;this.resizing=this.dragging=this.gesturing=this.pointerWasMoved=this.pointerIsDown=!1;this.resizeAxes="xy";this.mouse=!1;r.push(this)}function bb(a,b,c){var d=0,e=r.length,h=/mouse/i.test(a.pointerType||
b)||4===a.pointerType,f;a=O(a);if(/down|start/i.test(b))for(d=0;d<e;d++){f=r[d];var g=c;if(f.inertiaStatus.active&&f.target.options[f.prepared.name].inertia.allowResume&&f.mouse===h)for(;g;){if(g===f.element)return f;g=L(g)}}if(h||!ga&&!oa){for(d=0;d<e;d++)if(r[d].mouse&&!r[d].inertiaStatus.active)return r[d];for(d=0;d<e;d++)if(r[d].mouse&&(!/down/.test(b)||!r[d].inertiaStatus.active))return f;f=new xa;f.mouse=!0;return f}for(d=0;d<e;d++)if(-1!==v(r[d].pointerIds,a))return r[d];if(/up|end|out/i.test(b))return null;
for(d=0;d<e;d++)if(f=r[d],!(f.prepared.name&&!f.target.options.gesture.enabled||f.interacting()||!h&&f.mouse))return f;return new xa}function cb(a){return function(b){var c,d=Ea(b.path?b.path[0]:b.target),e=Ea(b.currentTarget),h;if(ga&&/touch/.test(b.type))for(db=(new Date).getTime(),h=0;h<b.changedTouches.length;h++){var f=b.changedTouches[h];if(c=bb(f,b.type,d))c._updateEventTargets(d,e),c[a](f,b,d,e)}else{if(!oa&&/mouse/.test(b.type)){for(h=0;h<r.length;h++)if(!r[h].mouse&&r[h].pointerIsDown)return;
if(500>(new Date).getTime()-db)return}if(c=bb(b,b.type,d))c._updateEventTargets(d,e),c[a](b,b,d,e)}}}function G(a,b,c,d,e,h){var f,g,k=a.target,y=a.snapStatus,n=a.restrictStatus,u=a.pointers,E=(k&&k.options||D).deltaSource,eb=E+"X",l=E+"Y",ia=k?k.options:D,w=na(k,e),m="start"===d,p="end"===d;f=m?a.startCoords:a.curCoords;e=e||a.element;g=x({},f.page);f=x({},f.client);g.x-=w.x;g.y-=w.y;f.x-=w.x;f.y-=w.y;var I=ia[c].snap&&ia[c].snap.relativePoints;!Ma(k,c)||m&&I&&I.length||(this.snap={range:y.range,
locked:y.locked,x:y.snappedX,y:y.snappedY,realX:y.realX,realY:y.realY,dx:y.dx,dy:y.dy},y.locked&&(g.x+=y.dx,g.y+=y.dy,f.x+=y.dx,f.y+=y.dy));!Na(k,c)||m&&ia[c].restrict.elementRect||!n.restricted||(g.x+=n.dx,g.y+=n.dy,f.x+=n.dx,f.y+=n.dy,this.restrict={dx:n.dx,dy:n.dy});this.pageX=g.x;this.pageY=g.y;this.clientX=f.x;this.clientY=f.y;this.x0=a.startCoords.page.x-w.x;this.y0=a.startCoords.page.y-w.y;this.clientX0=a.startCoords.client.x-w.x;this.clientY0=a.startCoords.client.y-w.y;this.ctrlKey=b.ctrlKey;
this.altKey=b.altKey;this.shiftKey=b.shiftKey;this.metaKey=b.metaKey;this.button=b.button;this.buttons=b.buttons;this.target=e;this.t0=a.downTimes[0];this.type=c+(d||"");this.interaction=a;this.interactable=k;e=a.inertiaStatus;e.active&&(this.detail="inertia");h&&(this.relatedTarget=h);p?"client"===E?(this.dx=f.x-a.startCoords.client.x,this.dy=f.y-a.startCoords.client.y):(this.dx=g.x-a.startCoords.page.x,this.dy=g.y-a.startCoords.page.y):m?this.dy=this.dx=0:"inertiastart"===d?(this.dx=a.prevEvent.dx,
this.dy=a.prevEvent.dy):"client"===E?(this.dx=f.x-a.prevEvent.clientX,this.dy=f.y-a.prevEvent.clientY):(this.dx=g.x-a.prevEvent.pageX,this.dy=g.y-a.prevEvent.pageY);a.prevEvent&&"inertia"===a.prevEvent.detail&&!e.active&&ia[c].inertia&&ia[c].inertia.zeroResumeDelta&&(e.resumeDx+=this.dx,e.resumeDy+=this.dy,this.dx=this.dy=0);"resize"===c&&a.resizeAxes?ia.resize.square?("y"===a.resizeAxes?this.dx=this.dy:this.dy=this.dx,this.axes="xy"):(this.axes=a.resizeAxes,"x"===a.resizeAxes?this.dy=0:"y"===a.resizeAxes&&
(this.dx=0)):"gesture"===c&&(this.touches=[u[0],u[1]],m?(this.distance=Ia(u,E),this.box=Ha(u),this.scale=1,this.ds=0,this.angle=Ja(u,void 0,E),this.da=0):p||b instanceof G?(this.distance=a.prevEvent.distance,this.box=a.prevEvent.box,this.scale=a.prevEvent.scale,this.ds=this.scale-1,this.angle=a.prevEvent.angle,this.da=this.angle-a.gesture.startAngle):(this.distance=Ia(u,E),this.box=Ha(u),this.scale=this.distance/a.gesture.startDistance,this.angle=Ja(u,a.gesture.prevAngle,E),this.ds=this.scale-a.gesture.prevScale,
this.da=this.angle-a.gesture.prevAngle));m?(this.timeStamp=a.downTimes[0],this.velocityY=this.velocityX=this.speed=this.duration=this.dt=0):"inertiastart"===d?(this.timeStamp=a.prevEvent.timeStamp,this.dt=a.prevEvent.dt,this.duration=a.prevEvent.duration,this.speed=a.prevEvent.speed,this.velocityX=a.prevEvent.velocityX,this.velocityY=a.prevEvent.velocityY):(this.timeStamp=(new Date).getTime(),this.dt=this.timeStamp-a.prevEvent.timeStamp,this.duration=this.timeStamp-a.downTimes[0],b instanceof G?(b=
this[eb]-a.prevEvent[eb],l=this[l]-a.prevEvent[l],c=this.dt/1E3,this.speed=fa(b,l)/c,this.velocityX=b/c,this.velocityY=l/c):(this.speed=a.pointerDelta[E].speed,this.velocityX=a.pointerDelta[E].vx,this.velocityY=a.pointerDelta[E].vy));(p||"inertiastart"===d)&&600<a.prevEvent.speed&&150>this.timeStamp-a.prevEvent.timeStamp&&(d=180*Math.atan2(a.prevEvent.velocityY,a.prevEvent.velocityX)/Math.PI,0>d&&(d+=360),p=112.5<=d&&247.5>d,l=202.5<=d&&337.5>d,this.swipe={up:l,down:!l&&22.5<=d&&157.5>d,left:p,right:!p&&
(292.5<=d||67.5>d),angle:d,speed:a.prevEvent.speed,velocity:{x:a.prevEvent.velocityX,y:a.prevEvent.velocityY}})}function fb(){this.originalEvent.preventDefault()}function gb(a){var b="";"drag"===a.name&&(b=za.drag);if("resize"===a.name)if(a.axis)b=za[a.name+a.axis];else if(a.edges){for(var b="resize",c=["top","bottom","left","right"],d=0;4>d;d++)a.edges[c[d]]&&(b+=c[d]);b=za[b]}return b}function hb(a,b,c){a=this.getRect(c);var d=!1,e=null,h=null,f,g=x({},b.curCoords.page),e=this.options;if(!a)return null;
if(S.resize&&e.resize.enabled)if(d=e.resize,f={left:!1,right:!1,top:!1,bottom:!1},z(d.edges)){for(var k in f){var y=f,n=k,u;a:{u=k;var E=d.edges[k],l=g,m=b._eventTarget,p=c,w=a,ya=d.margin||pa;if(E){if(!0===E){var q=K(w.width)?w.width:w.right-w.left,I=K(w.height)?w.height:w.bottom-w.top;0>q&&("left"===u?u="right":"right"===u&&(u="left"));0>I&&("top"===u?u="bottom":"bottom"===u&&(u="top"));if("left"===u){u=l.x<(0<=q?w.left:w.right)+ya;break a}if("top"===u){u=l.y<(0<=I?w.top:w.bottom)+ya;break a}if("right"===
u){u=l.x>(0<=q?w.right:w.left)-ya;break a}if("bottom"===u){u=l.y>(0<=I?w.bottom:w.top)-ya;break a}}u=t(m)?t(E)?E===m:La(m,E,p):!1}else u=!1}y[n]=u}f.left=f.left&&!f.right;f.top=f.top&&!f.bottom;d=f.left||f.right||f.top||f.bottom}else c="y"!==e.resize.axis&&g.x>a.right-pa,a="x"!==e.resize.axis&&g.y>a.bottom-pa,d=c||a,h=(c?"x":"")+(a?"y":"");e=d?"resize":S.drag&&e.drag.enabled?"drag":null;S.gesture&&2<=b.pointerIds.length&&!b.dragging&&!b.resizing&&(e="gesture");return e?{name:e,axis:h,edges:f}:null}
function W(a,b){if(!z(a))return null;var c=a.name,d=b.options;return("resize"===c&&d.resize.enabled||"drag"===c&&d.drag.enabled||"gesture"===c&&d.gesture.enabled)&&S[c]?a:null}function qa(a,b){var c={},d=P[a.type],e=Ea(a.path?a.path[0]:a.target),h=e;b=b?!0:!1;for(var f in a)c[f]=a[f];c.originalEvent=a;for(c.preventDefault=fb;t(h);){for(f=0;f<d.selectors.length;f++){var g=d.contexts[f];if(R(h,d.selectors[f])&&Y(g,e)&&Y(g,h)){g=d.listeners[f];c.currentTarget=h;for(var k=0;k<g.length;k++)if(g[k][1]===
b)g[k][0](c)}}h=L(h)}}function Aa(a){return qa.call(this,a,!0)}function l(a,b){return B.get(a,b)||new C(a,b)}function C(a,b){this._element=a;this._iEvents=this._iEvents||{};var c;if(ea(a)){this.selector=a;var d=b&&b.context;c=d?V(d):q;d&&(c.Node?d instanceof c.Node:t(d)||d===c.document)&&(this._context=d)}else c=V(a),t(a,c)&&(ba?(n.add(this._element,J.down,m.pointerDown),n.add(this._element,J.move,m.pointerHover)):(n.add(this._element,"mousedown",m.pointerDown),n.add(this._element,"mousemove",m.pointerHover),
n.add(this._element,"touchstart",m.pointerDown),n.add(this._element,"touchmove",m.pointerHover)));this._doc=c.document;-1===v(ja,this._doc)&&ib(this._doc);B.push(this);this.set(b)}function M(a,b){var c=!1;return function(){c||(q.console.warn(b),c=!0);return a.apply(this,arguments)}}function jb(a){for(var b=0;b<r.length;b++)r[b].pointerEnd(a,a)}function ib(a){if(-1===v(ja,a)){var b=a.defaultView||a.parentWindow,c;for(c in P)n.add(a,c,qa),n.add(a,c,Aa,!0);ba?(J=ba===b.MSPointerEvent?{up:"MSPointerUp",
down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"},n.add(a,J.down,m.selectorDown),n.add(a,J.move,m.pointerMove),n.add(a,J.over,m.pointerOver),n.add(a,J.out,m.pointerOut),n.add(a,J.up,m.pointerUp),n.add(a,J.cancel,m.pointerCancel),n.add(a,J.move,m.autoScrollMove)):(n.add(a,"mousedown",m.selectorDown),n.add(a,"mousemove",m.pointerMove),n.add(a,
"mouseup",m.pointerUp),n.add(a,"mouseover",m.pointerOver),n.add(a,"mouseout",m.pointerOut),n.add(a,"touchstart",m.selectorDown),n.add(a,"touchmove",m.pointerMove),n.add(a,"touchend",m.pointerUp),n.add(a,"touchcancel",m.pointerCancel),n.add(a,"mousemove",m.autoScrollMove),n.add(a,"touchmove",m.autoScrollMove));n.add(b,"blur",jb);try{if(b.frameElement){var d=b.frameElement.ownerDocument,e=d.defaultView;n.add(d,"mouseup",m.pointerEnd);n.add(d,"touchend",m.pointerEnd);n.add(d,"touchcancel",m.pointerEnd);
n.add(d,"pointerup",m.pointerEnd);n.add(d,"MSPointerUp",m.pointerEnd);n.add(e,"blur",jb)}}catch(h){l.windowParentError=h}n.add(a,"dragstart",function(a){for(var b=0;b<r.length;b++){var c=r[b];if(c.element&&(c.element===a.target||Y(c.element,a.target))){c.checkAndPreventDefault(a,c.target,c.element);break}}});n.useAttachEvent&&(n.add(a,"selectstart",function(a){var b=r[0];b.currentAction()&&b.checkAndPreventDefault(a)}),n.add(a,"dblclick",cb("ie8Dblclick")));ja.push(a)}}function v(a,b){for(var c=0,
d=a.length;c<d;c++)if(a[c]===b)return c;return-1}function R(a,b,c){if(ka)return ka(a,b,c);q!==F&&(b=b.replace(/\/deep\//g," "));return a[Oa](b)}function La(a,b,c){for(;t(a);){if(R(a,b))return!0;a=L(a);if(a===c)return R(a,b)}return!1}if(F){var q=function(){var a=F.document.createTextNode("");return a.ownerDocument!==F.document&&"function"===typeof F.wrap&&F.wrap(a)===a?F.wrap(F):F}(),Q=q.document,$a=q.DocumentFragment||ma,Xa=q.SVGElement||ma,pb=q.SVGSVGElement||ma,nb=q.SVGElementInstance||ma,qb=q.HTMLElement||
q.Element,ba=q.PointerEvent||q.MSPointerEvent,J,fa=Math.hypot||function(a,b){return Math.sqrt(a*a+b*b)},la={},ja=[],B=[],r=[],Pa=!1,P={},D={base:{accept:null,actionChecker:null,styleCursor:!0,preventDefault:"auto",origin:{x:0,y:0},deltaSource:"page",allowFrom:null,ignoreFrom:null,_context:Q,dropChecker:null},drag:{enabled:!1,manualStart:!0,max:Infinity,maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,axis:"xy"},drop:{enabled:!1,accept:null,overlap:"pointer"},resize:{enabled:!1,
manualStart:!1,max:Infinity,maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},gesture:{manualStart:!1,enabled:!1,max:Infinity,maxPerElement:1,restrict:null},perAction:{manualStart:!1,max:Infinity,maxPerElement:1,snap:{enabled:!1,endOnly:!1,range:Infinity,targets:null,offsets:null,relativePoints:null},restrict:{enabled:!1,endOnly:!1},autoScroll:{enabled:!1,container:null,margin:60,speed:300},inertia:{enabled:!1,
resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,zeroResumeDelta:!0,smoothEndDuration:300}},_holdDuration:600},p={interaction:null,i:null,x:0,y:0,scroll:function(){var a=p.interaction.target.options[p.interaction.prepared.name].autoScroll,b=a.container||V(p.interaction.element),c=(new Date).getTime(),d=(c-p.prevTimeX)/1E3,e=(c-p.prevTimeY)/1E3,h;a.velocity?(h=a.velocity.x,a=a.velocity.y):h=a=a.speed;d*=h;e*=a;if(1<=d||1<=e)Ba(b)?b.scrollBy(p.x*d,p.y*e):b&&(b.scrollLeft+=p.x*d,b.scrollTop+=p.y*
e),1<=d&&(p.prevTimeX=c),1<=e&&(p.prevTimeY=c);p.isScrolling&&(X(p.i),p.i=T(p.scroll))},isScrolling:!1,prevTimeX:0,prevTimeY:0,start:function(a){p.isScrolling=!0;X(p.i);p.interaction=a;p.prevTimeX=(new Date).getTime();p.prevTimeY=(new Date).getTime();p.i=T(p.scroll)},stop:function(){p.isScrolling=!1;X(p.i)}},ga="ontouchstart"in q||q.DocumentTouch&&Q instanceof q.DocumentTouch,oa=!!ba,pa=ga||oa?20:10,Qa=1,db=0,wa=Infinity,za=Q.all&&!q.atob?{drag:"move",resizex:"e-resize",resizey:"s-resize",resizexy:"se-resize",
resizetop:"n-resize",resizeleft:"w-resize",resizebottom:"s-resize",resizeright:"e-resize",resizetopleft:"se-resize",resizebottomright:"se-resize",resizetopright:"ne-resize",resizebottomleft:"ne-resize",gesture:""}:{drag:"move",resizex:"ew-resize",resizey:"ns-resize",resizexy:"nwse-resize",resizetop:"ns-resize",resizeleft:"ew-resize",resizebottom:"ns-resize",resizeright:"ew-resize",resizetopleft:"nwse-resize",resizebottomright:"nwse-resize",resizetopright:"nesw-resize",resizebottomleft:"nesw-resize",
gesture:""},S={drag:!0,resize:!0,gesture:!0},kb="onmousewheel"in Q?"mousewheel":"wheel",ca="dragstart dragmove draginertiastart dragend dragenter dragleave dropactivate dropdeactivate dropmove drop resizestart resizemove resizeinertiastart resizeend gesturestart gesturemove gestureinertiastart gestureend down move up cancel tap doubletap hold".split(" "),U={},Va="Opera"==navigator.appName&&ga&&navigator.userAgent.match("Presto"),ob=/iP(hone|od|ad)/.test(navigator.platform)&&/OS 7[^\d]/.test(navigator.appVersion),
Oa="matches"in Element.prototype?"matches":"webkitMatchesSelector"in Element.prototype?"webkitMatchesSelector":"mozMatchesSelector"in Element.prototype?"mozMatchesSelector":"oMatchesSelector"in Element.prototype?"oMatchesSelector":"msMatchesSelector",ka,T=F.requestAnimationFrame,X=F.cancelAnimationFrame,n=function(){function a(b,c,d,h){var l,m=v(k,b),p=y[m],q,I,r=d;if(p&&p.events)if(e&&(q=n[m],I=v(q.supplied,d),r=q.wrapped[I]),"all"===c)for(c in p.events)p.events.hasOwnProperty(c)&&a(b,c,"all");else{if(p.events[c]){var t=
p.events[c].length;if("all"===d){for(l=0;l<t;l++)a(b,c,p.events[c][l],Boolean(h));return}for(l=0;l<t;l++)if(p.events[c][l]===d){b[f](g+c,r,h||!1);p.events[c].splice(l,1);e&&q&&(q.useCount[I]--,0===q.useCount[I]&&(q.supplied.splice(I,1),q.wrapped.splice(I,1),q.useCount.splice(I,1)));break}p.events[c]&&0===p.events[c].length&&(p.events[c]=null,p.typeCount--)}p.typeCount||(y.splice(m,1),k.splice(m,1),n.splice(m,1))}}function b(){this.returnValue=!1}function c(){this.cancelBubble=!0}function d(){this.immediatePropagationStopped=
this.cancelBubble=!0}var e="attachEvent"in q&&!("addEventListener"in q),h=e?"attachEvent":"addEventListener",f=e?"detachEvent":"removeEventListener",g=e?"on":"",k=[],y=[],n=[];return{add:function(a,f,l,p){var m=v(k,a),q=y[m];q||(q={events:{},typeCount:0},m=k.push(a)-1,y.push(q),n.push(e?{supplied:[],wrapped:[],useCount:[]}:null));q.events[f]||(q.events[f]=[],q.typeCount++);if(-1===v(q.events[f],l)){if(e){var m=n[m],r=v(m.supplied,l),t=m.wrapped[r]||function(e){e.immediatePropagationStopped||(e.target=
e.srcElement,e.currentTarget=a,e.preventDefault=e.preventDefault||b,e.stopPropagation=e.stopPropagation||c,e.stopImmediatePropagation=e.stopImmediatePropagation||d,/mouse|click/.test(e.type)&&(e.pageX=e.clientX+V(a).document.documentElement.scrollLeft,e.pageY=e.clientY+V(a).document.documentElement.scrollTop),l(e))};p=a[h](g+f,t,Boolean(p));-1===r?(m.supplied.push(l),m.wrapped.push(t),m.useCount.push(1)):m.useCount[r]++}else p=a[h](f,l,p||!1);q.events[f].push(l);return p}},remove:a,useAttachEvent:e,
_elements:k,_targets:y,_attachedListeners:n}}(),Ca={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/};xa.prototype={getPageXY:function(a,b){return Da(a,b,this)},getClientXY:function(a,b){return Wa(a,b,this)},setEventXY:function(a,b){var c=1<b.length?Ya(b):b[0];Da(c,la,this);a.page.x=la.x;a.page.y=la.y;Wa(c,la,this);a.client.x=la.x;a.client.y=la.y;a.timeStamp=(new Date).getTime()},pointerOver:function(a,b,c){function d(a,b){a&&va(a,c)&&!Z(a,c,c)&&aa(a,c,c)&&R(c,b)&&(e.push(a),h.push(c))}if(!this.prepared.name&&
this.mouse){var e=[],h=[],f=this.element;this.addPointer(a);!this.target||!Z(this.target,this.element,c)&&aa(this.target,this.element,c)||(this.element=this.target=null,this.matches=[],this.matchElements=[]);var g=B.get(c),k=g&&!Z(g,c,c)&&aa(g,c,c)&&W(g.getAction(a,b,this,c),g);k&&!ha(g,c,k)&&(k=null);k?(this.target=g,this.element=c,this.matches=[],this.matchElements=[]):(B.forEachSelector(d),this.validateSelector(a,b,e,h)?(this.matches=e,this.matchElements=h,this.pointerHover(a,b,this.matches,this.matchElements),
n.add(c,ba?J.move:"mousemove",m.pointerHover)):this.target&&(Y(f,c)?(this.pointerHover(a,b,this.matches,this.matchElements),n.add(this.element,ba?J.move:"mousemove",m.pointerHover)):(this.element=this.target=null,this.matches=[],this.matchElements=[])))}},pointerHover:function(a,b,c,d,e,h){c=this.target;if(!this.prepared.name&&this.mouse){var f;this.setEventXY(this.curCoords,[a]);e?f=this.validateSelector(a,b,e,h):c&&(f=W(c.getAction(this.pointers[0],b,this,this.element),this.target));c&&c.options.styleCursor&&
(c._doc.documentElement.style.cursor=f?gb(f):"")}else this.prepared.name&&this.checkAndPreventDefault(b,c,this.element)},pointerOut:function(a,b,c){this.prepared.name||(B.get(c)||n.remove(c,ba?J.move:"mousemove",m.pointerHover),this.target&&this.target.options.styleCursor&&!this.interacting()&&(this.target._doc.documentElement.style.cursor=""))},selectorDown:function(a,b,c,d){function e(a,b,d){d=ka?d.querySelectorAll(b):void 0;va(a,g)&&!Z(a,g,c)&&aa(a,g,c)&&R(g,b,d)&&(h.matches.push(a),h.matchElements.push(g))}
var h=this,f=n.useAttachEvent?x({},b):b,g=c,k=this.addPointer(a),l;this.holdTimers[k]=setTimeout(function(){h.pointerHold(n.useAttachEvent?f:a,f,c,d)},D._holdDuration);this.pointerIsDown=!0;if(this.inertiaStatus.active&&this.target.selector)for(;t(g);){if(g===this.element&&W(this.target.getAction(a,b,this,this.element),this.target).name===this.prepared.name){X(this.inertiaStatus.i);this.inertiaStatus.active=!1;this.collectEventTargets(a,b,c,"down");return}g=L(g)}if(!this.interacting()){this.setEventXY(this.curCoords,
[a]);for(this.downEvent=b;t(g)&&!l;)this.matches=[],this.matchElements=[],B.forEachSelector(e),l=this.validateSelector(a,b,this.matches,this.matchElements),g=L(g);if(l)return this.prepared.name=l.name,this.prepared.axis=l.axis,this.prepared.edges=l.edges,this.collectEventTargets(a,b,c,"down"),this.pointerDown(a,b,c,d,l);this.downTimes[k]=(new Date).getTime();this.downTargets[k]=c;ra(this.downPointer,a);sa(this.prevCoords,this.curCoords);this.pointerWasMoved=!1}this.collectEventTargets(a,b,c,"down")},
pointerDown:function(a,b,c,d,e){if(!e&&!this.inertiaStatus.active&&this.pointerWasMoved&&this.prepared.name)this.checkAndPreventDefault(b,this.target,this.element);else{this.pointerIsDown=!0;this.downEvent=b;var h=this.addPointer(a),f;if(1<this.pointerIds.length&&this.target._element===this.element){var g=W(e||this.target.getAction(a,b,this,this.element),this.target);ha(this.target,this.element,g)&&(f=g);this.prepared.name=null}else this.prepared.name||(g=B.get(d))&&!Z(g,d,c)&&aa(g,d,c)&&(f=W(e||
g.getAction(a,b,this,d),g,c))&&ha(g,d,f)&&(this.target=g,this.element=d);var k=(g=this.target)&&g.options;!g||!e&&this.prepared.name?this.inertiaStatus.active&&d===this.element&&W(g.getAction(a,b,this,this.element),g).name===this.prepared.name&&(X(this.inertiaStatus.i),this.inertiaStatus.active=!1,this.checkAndPreventDefault(b,g,this.element)):(f=f||W(e||g.getAction(a,b,this,d),g,this.element),this.setEventXY(this.startCoords,this.pointers),f&&(k.styleCursor&&(g._doc.documentElement.style.cursor=
gb(f)),this.resizeAxes="resize"===f.name?f.axis:null,"gesture"===f&&2>this.pointerIds.length&&(f=null),this.prepared.name=f.name,this.prepared.axis=f.axis,this.prepared.edges=f.edges,this.snapStatus.snappedX=this.snapStatus.snappedY=this.restrictStatus.restrictedX=this.restrictStatus.restrictedY=NaN,this.downTimes[h]=(new Date).getTime(),this.downTargets[h]=c,ra(this.downPointer,a),sa(this.prevCoords,this.startCoords),this.pointerWasMoved=!1,this.checkAndPreventDefault(b,g,this.element)))}},setModifications:function(a,
b){var c=this.target,d=!0,e=Ma(c,this.prepared.name)&&(!c.options[this.prepared.name].snap.endOnly||b),c=Na(c,this.prepared.name)&&(!c.options[this.prepared.name].restrict.endOnly||b);e?this.setSnapping(a):this.snapStatus.locked=!1;c?this.setRestriction(a):this.restrictStatus.restricted=!1;e&&this.snapStatus.locked&&!this.snapStatus.changed?d=c&&this.restrictStatus.restricted&&this.restrictStatus.changed:c&&this.restrictStatus.restricted&&!this.restrictStatus.changed&&(d=!1);return d},setStartOffsets:function(a,
b,c){a=b.getRect(c);var d=na(b,c);c=b.options[this.prepared.name].snap;b=b.options[this.prepared.name].restrict;var e,h;a?(this.startOffset.left=this.startCoords.page.x-a.left,this.startOffset.top=this.startCoords.page.y-a.top,this.startOffset.right=a.right-this.startCoords.page.x,this.startOffset.bottom=a.bottom-this.startCoords.page.y,e="width"in a?a.width:a.right-a.left,h="height"in a?a.height:a.bottom-a.top):this.startOffset.left=this.startOffset.top=this.startOffset.right=this.startOffset.bottom=
0;this.snapOffsets.splice(0);d=c&&"startCoords"===c.offset?{x:this.startCoords.page.x-d.x,y:this.startCoords.page.y-d.y}:c&&c.offset||{x:0,y:0};if(a&&c&&c.relativePoints&&c.relativePoints.length)for(var f=0;f<c.relativePoints.length;f++)this.snapOffsets.push({x:this.startOffset.left-e*c.relativePoints[f].x+d.x,y:this.startOffset.top-h*c.relativePoints[f].y+d.y});else this.snapOffsets.push(d);a&&b.elementRect?(this.restrictOffset.left=this.startOffset.left-e*b.elementRect.left,this.restrictOffset.top=
this.startOffset.top-h*b.elementRect.top,this.restrictOffset.right=this.startOffset.right-e*(1-b.elementRect.right),this.restrictOffset.bottom=this.startOffset.bottom-h*(1-b.elementRect.bottom)):this.restrictOffset.left=this.restrictOffset.top=this.restrictOffset.right=this.restrictOffset.bottom=0},start:function(a,b,c){this.interacting()||!this.pointerIsDown||this.pointerIds.length<("gesture"===a.name?2:1)||(-1===v(r,this)&&r.push(this),this.prepared.name||this.setEventXY(this.startCoords),this.prepared.name=
a.name,this.prepared.axis=a.axis,this.prepared.edges=a.edges,this.target=b,this.element=c,this.setStartOffsets(a.name,b,c),this.setModifications(this.startCoords.page),this.prevEvent=this[this.prepared.name+"Start"](this.downEvent))},pointerMove:function(a,b,c,d,e){if(this.inertiaStatus.active){d=this.inertiaStatus.upCoords.page;var h=this.inertiaStatus.upCoords.client;this.setEventXY(this.curCoords,[{pageX:d.x+this.inertiaStatus.sx,pageY:d.y+this.inertiaStatus.sy,clientX:h.x+this.inertiaStatus.sx,
clientY:h.y+this.inertiaStatus.sy}])}else this.recordPointer(a),this.setEventXY(this.curCoords,this.pointers);d=this.curCoords.page.x===this.prevCoords.page.x&&this.curCoords.page.y===this.prevCoords.page.y&&this.curCoords.client.x===this.prevCoords.client.x&&this.curCoords.client.y===this.prevCoords.client.y;var f,g,h=this.mouse?0:v(this.pointerIds,O(a));this.pointerIsDown&&!this.pointerWasMoved&&(f=this.curCoords.client.x-this.startCoords.client.x,g=this.curCoords.client.y-this.startCoords.client.y,
this.pointerWasMoved=fa(f,g)>Qa);d||this.pointerIsDown&&!this.pointerWasMoved||(this.pointerIsDown&&clearTimeout(this.holdTimers[h]),this.collectEventTargets(a,b,c,"move"));if(this.pointerIsDown)if(d&&this.pointerWasMoved&&!e)this.checkAndPreventDefault(b,this.target,this.element);else if(Ta(this.pointerDelta,this.prevCoords,this.curCoords),this.prepared.name){if(this.pointerWasMoved&&(!this.inertiaStatus.active||a instanceof G&&/inertiastart/.test(a.type))){if(!this.interacting()&&(Ta(this.pointerDelta,
this.prevCoords,this.curCoords),"drag"===this.prepared.name)){f=Math.abs(f);g=Math.abs(g);d=this.target.options.drag.axis;var k=f>g?"x":f<g?"y":"xy";if("xy"!==k&&"xy"!==d&&d!==k){this.prepared.name=null;for(var l=c;t(l);){if((g=B.get(l))&&g!==this.target&&!g.options.drag.manualStart&&"drag"===g.getAction(this.downPointer,this.downEvent,this,l).name&&ab(k,g)){this.prepared.name="drag";this.target=g;this.element=l;break}l=L(l)}if(!this.prepared.name){var n=this;g=function(a,b,d){d=ka?d.querySelectorAll(b):
void 0;if(a!==n.target&&va(a,c)&&!a.options.drag.manualStart&&!Z(a,l,c)&&aa(a,l,c)&&R(l,b,d)&&"drag"===a.getAction(n.downPointer,n.downEvent,n,l).name&&ab(k,a)&&ha(a,l,"drag"))return a};for(l=c;t(l);){if(f=B.forEachSelector(g)){this.prepared.name="drag";this.target=f;this.element=l;break}l=L(l)}}}}if((g=!!this.prepared.name&&!this.interacting())&&(this.target.options[this.prepared.name].manualStart||!ha(this.target,this.element,this.prepared))){this.stop(b);return}if(this.prepared.name&&this.target){g&&
this.start(this.prepared,this.target,this.element);if(this.setModifications(this.curCoords.page,e)||g)this.prevEvent=this[this.prepared.name+"Move"](b);this.checkAndPreventDefault(b,this.target,this.element)}}sa(this.prevCoords,this.curCoords);(this.dragging||this.resizing)&&this.autoScrollMove(a)}},dragStart:function(a){var b=new G(this,a,"drag","start",this.element);this.dragging=!0;this.target.fire(b);this.activeDrops.dropzones=[];this.activeDrops.elements=[];this.activeDrops.rects=[];this.dynamicDrop||
this.setActiveDrops(this.element);a=this.getDropEvents(a,b);a.activate&&this.fireActiveDrops(a.activate);return b},dragMove:function(a){var b=this.target,c=new G(this,a,"drag","move",this.element),d=this.getDrop(c,a,this.element);this.dropTarget=d.dropzone;this.dropElement=d.element;a=this.getDropEvents(a,c);b.fire(c);a.leave&&this.prevDropTarget.fire(a.leave);a.enter&&this.dropTarget.fire(a.enter);a.move&&this.dropTarget.fire(a.move);this.prevDropTarget=this.dropTarget;this.prevDropElement=this.dropElement;
return c},resizeStart:function(a){a=new G(this,a,"resize","start",this.element);if(this.prepared.edges){var b=this.target.getRect(this.element);if(this.target.options.resize.square||this.target.options.resize.preserveAspectRatio){var c=x({},this.prepared.edges);c.top=c.top||c.left&&!c.bottom;c.left=c.left||c.top&&!c.right;c.bottom=c.bottom||c.right&&!c.top;c.right=c.right||c.bottom&&!c.left;this.prepared._linkedEdges=c}else this.prepared._linkedEdges=null;this.target.options.resize.preserveAspectRatio&&
(this.resizeStartAspectRatio=b.width/b.height);this.resizeRects={start:b,current:x({},b),restricted:x({},b),previous:x({},b),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}};a.rect=this.resizeRects.restricted;a.deltaRect=this.resizeRects.delta}this.target.fire(a);this.resizing=!0;return a},resizeMove:function(a){a=new G(this,a,"resize","move",this.element);var b=this.prepared.edges,c=this.target.options.resize.invert,d="reposition"===c||"negate"===c;if(b){var e=a.dx,h=a.dy,f=this.resizeRects.start,
g=this.resizeRects.current,k=this.resizeRects.restricted,l=this.resizeRects.delta,n=x(this.resizeRects.previous,k),m=b;if(this.target.options.resize.preserveAspectRatio){var p=this.resizeStartAspectRatio,b=this.prepared._linkedEdges;if(m.left&&m.bottom||m.right&&m.top)h=-e/p;else if(m.left||m.right)h=e/p;else if(m.top||m.bottom)e=h*p}else if(this.target.options.resize.square)if(b=this.prepared._linkedEdges,m.left&&m.bottom||m.right&&m.top)h=-e;else if(m.left||m.right)h=e;else if(m.top||m.bottom)e=
h;b.top&&(g.top+=h);b.bottom&&(g.bottom+=h);b.left&&(g.left+=e);b.right&&(g.right+=e);d?(x(k,g),"reposition"===c&&(k.top>k.bottom&&(b=k.top,k.top=k.bottom,k.bottom=b),k.left>k.right&&(b=k.left,k.left=k.right,k.right=b))):(k.top=Math.min(g.top,f.bottom),k.bottom=Math.max(g.bottom,f.top),k.left=Math.min(g.left,f.right),k.right=Math.max(g.right,f.left));k.width=k.right-k.left;k.height=k.bottom-k.top;for(var q in k)l[q]=k[q]-n[q];a.edges=this.prepared.edges;a.rect=k;a.deltaRect=l}this.target.fire(a);
return a},gestureStart:function(a){a=new G(this,a,"gesture","start",this.element);a.ds=0;this.gesture.startDistance=this.gesture.prevDistance=a.distance;this.gesture.startAngle=this.gesture.prevAngle=a.angle;this.gesture.scale=1;this.gesturing=!0;this.target.fire(a);return a},gestureMove:function(a){if(!this.pointerIds.length)return this.prevEvent;a=new G(this,a,"gesture","move",this.element);a.ds=a.scale-this.gesture.scale;this.target.fire(a);this.gesture.prevAngle=a.angle;this.gesture.prevDistance=
a.distance;Infinity===a.scale||null===a.scale||void 0===a.scale||isNaN(a.scale)||(this.gesture.scale=a.scale);return a},pointerHold:function(a,b,c){this.collectEventTargets(a,b,c,"hold")},pointerUp:function(a,b,c,d){var e=this.mouse?0:v(this.pointerIds,O(a));clearTimeout(this.holdTimers[e]);this.collectEventTargets(a,b,c,"up");this.collectEventTargets(a,b,c,"tap");this.pointerEnd(a,b,c,d);this.removePointer(a)},pointerCancel:function(a,b,c,d){var e=this.mouse?0:v(this.pointerIds,O(a));clearTimeout(this.holdTimers[e]);
this.collectEventTargets(a,b,c,"cancel");this.pointerEnd(a,b,c,d);this.removePointer(a)},ie8Dblclick:function(a,b,c){this.prevTap&&b.clientX===this.prevTap.clientX&&b.clientY===this.prevTap.clientY&&c===this.prevTap.target&&(this.downTargets[0]=c,this.downTimes[0]=(new Date).getTime(),this.collectEventTargets(a,b,c,"tap"))},pointerEnd:function(a,b,c,d){var e,h=this.target,f=h&&h.options,g=f&&this.prepared.name&&f[this.prepared.name].inertia;e=this.inertiaStatus;if(this.interacting()){if(e.active&&
!e.ending)return;var k=(new Date).getTime(),l=!1,m=!1,n=!1,p=Ma(h,this.prepared.name)&&f[this.prepared.name].snap.endOnly,q=Na(h,this.prepared.name)&&f[this.prepared.name].restrict.endOnly,r=0,t=0,f=this.dragging?"x"===f.drag.axis?Math.abs(this.pointerDelta.client.vx):"y"===f.drag.axis?Math.abs(this.pointerDelta.client.vy):this.pointerDelta.client.speed:this.pointerDelta.client.speed,m=(l=g&&g.enabled&&"gesture"!==this.prepared.name&&b!==e.startEvent)&&50>k-this.curCoords.timeStamp&&f>g.minSpeed&&
f>g.endSpeed;l&&!m&&(p||q)&&(g={},g.snap=g.restrict=g,p&&(this.setSnapping(this.curCoords.page,g),g.locked&&(r+=g.dx,t+=g.dy)),q&&(this.setRestriction(this.curCoords.page,g),g.restricted&&(r+=g.dx,t+=g.dy)),r||t)&&(n=!0);if(m||n){sa(e.upCoords,this.curCoords);this.pointers[0]=e.startEvent=new G(this,b,this.prepared.name,"inertiastart",this.element);e.t0=k;h.fire(e.startEvent);m?(e.vx0=this.pointerDelta.client.vx,e.vy0=this.pointerDelta.client.vy,e.v0=f,this.calcInertia(e),b=x({},this.curCoords.page),
h=na(h,this.element),b.x=b.x+e.xe-h.x,b.y=b.y+e.ye-h.y,h={useStatusXY:!0,x:b.x,y:b.y,dx:0,dy:0,snap:null},h.snap=h,r=t=0,p&&(b=this.setSnapping(this.curCoords.page,h),b.locked&&(r+=b.dx,t+=b.dy)),q&&(h=this.setRestriction(this.curCoords.page,h),h.restricted&&(r+=h.dx,t+=h.dy)),e.modifiedXe+=r,e.modifiedYe+=t,e.i=T(this.boundInertiaFrame)):(e.smoothEnd=!0,e.xe=r,e.ye=t,e.sx=e.sy=0,e.i=T(this.boundSmoothEndFrame));e.active=!0;return}(p||q)&&this.pointerMove(a,b,c,d,!0)}this.dragging?(e=new G(this,b,
"drag","end",this.element),q=this.getDrop(e,b,this.element),this.dropTarget=q.dropzone,this.dropElement=q.element,q=this.getDropEvents(b,e),q.leave&&this.prevDropTarget.fire(q.leave),q.enter&&this.dropTarget.fire(q.enter),q.drop&&this.dropTarget.fire(q.drop),q.deactivate&&this.fireActiveDrops(q.deactivate),h.fire(e)):this.resizing?(e=new G(this,b,"resize","end",this.element),h.fire(e)):this.gesturing&&(e=new G(this,b,"gesture","end",this.element),h.fire(e));this.stop(b)},collectDrops:function(a){var b=
[],c=[],d;a=a||this.element;for(d=0;d<B.length;d++)if(B[d].options.drop.enabled){var e=B[d],h=e.options.drop.accept;if(!(t(h)&&h!==a||N(h)&&!R(a,h)))for(var h=e.selector?e._context.querySelectorAll(e.selector):[e._element],f=0,g=h.length;f<g;f++){var k=h[f];k!==a&&(b.push(e),c.push(k))}}return{dropzones:b,elements:c}},fireActiveDrops:function(a){var b,c,d,e;for(b=0;b<this.activeDrops.dropzones.length;b++)c=this.activeDrops.dropzones[b],d=this.activeDrops.elements[b],d!==e&&(a.target=d,c.fire(a)),
e=d},setActiveDrops:function(a){a=this.collectDrops(a,!0);this.activeDrops.dropzones=a.dropzones;this.activeDrops.elements=a.elements;this.activeDrops.rects=[];for(a=0;a<this.activeDrops.dropzones.length;a++)this.activeDrops.rects[a]=this.activeDrops.dropzones[a].getRect(this.activeDrops.elements[a])},getDrop:function(a,b,c){var d=[];Pa&&this.setActiveDrops(c);for(var e=0;e<this.activeDrops.dropzones.length;e++){var h=this.activeDrops.elements[e];d.push(this.activeDrops.dropzones[e].dropCheck(a,b,
this.target,c,h,this.activeDrops.rects[e])?h:null)}c=(b=d[0])?0:-1;for(var f,e=[],g=[],h=1;h<d.length;h++)if((a=d[h])&&a!==b)if(!b)b=a,c=h;else if(a.parentNode!==a.ownerDocument)if(b.parentNode===a.ownerDocument)b=a,c=h;else{if(!e.length)for(f=b;f.parentNode&&f.parentNode!==f.ownerDocument;)e.unshift(f),f=f.parentNode;if(b instanceof qb&&a instanceof Xa&&!(a instanceof pb)){if(a===b.parentNode)continue;f=a.ownerSVGElement}else f=a;for(g=[];f.parentNode!==f.ownerDocument;)g.unshift(f),f=f.parentNode;
for(f=0;g[f]&&g[f]===e[f];)f++;f=[g[f-1],g[f],e[f]];for(g=f[0].lastChild;g;){if(g===f[1]){b=a;c=h;e=[];break}else if(g===f[2])break;g=g.previousSibling}}d=c;return{dropzone:this.activeDrops.dropzones[d]||null,element:this.activeDrops.elements[d]||null}},getDropEvents:function(a,b){var c={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};this.dropElement!==this.prevDropElement&&(this.prevDropTarget&&(c.leave={target:this.prevDropElement,dropzone:this.prevDropTarget,relatedTarget:b.target,
draggable:b.interactable,dragEvent:b,interaction:this,timeStamp:b.timeStamp,type:"dragleave"},b.dragLeave=this.prevDropElement,b.prevDropzone=this.prevDropTarget),this.dropTarget&&(c.enter={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:b.target,draggable:b.interactable,dragEvent:b,interaction:this,timeStamp:b.timeStamp,type:"dragenter"},b.dragEnter=this.dropElement,b.dropzone=this.dropTarget));"dragend"===b.type&&this.dropTarget&&(c.drop={target:this.dropElement,dropzone:this.dropTarget,
relatedTarget:b.target,draggable:b.interactable,dragEvent:b,interaction:this,timeStamp:b.timeStamp,type:"drop"},b.dropzone=this.dropTarget);"dragstart"===b.type&&(c.activate={target:null,dropzone:null,relatedTarget:b.target,draggable:b.interactable,dragEvent:b,interaction:this,timeStamp:b.timeStamp,type:"dropactivate"});"dragend"===b.type&&(c.deactivate={target:null,dropzone:null,relatedTarget:b.target,draggable:b.interactable,dragEvent:b,interaction:this,timeStamp:b.timeStamp,type:"dropdeactivate"});
"dragmove"===b.type&&this.dropTarget&&(c.move={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:b.target,draggable:b.interactable,dragEvent:b,interaction:this,dragmove:b,timeStamp:b.timeStamp,type:"dropmove"},b.dropzone=this.dropTarget);return c},currentAction:function(){return this.dragging&&"drag"||this.resizing&&"resize"||this.gesturing&&"gesture"||null},interacting:function(){return this.dragging||this.resizing||this.gesturing},clearTargets:function(){this.dropTarget=this.dropElement=
this.prevDropTarget=this.prevDropElement=this.target=this.element=null},stop:function(a){if(this.interacting()){p.stop();this.matches=[];this.matchElements=[];var b=this.target;b.options.styleCursor&&(b._doc.documentElement.style.cursor="");a&&A(a.preventDefault)&&this.checkAndPreventDefault(a,b,this.element);this.dragging&&(this.activeDrops.dropzones=this.activeDrops.elements=this.activeDrops.rects=null)}this.clearTargets();this.pointerIsDown=this.snapStatus.locked=this.dragging=this.resizing=this.gesturing=
!1;this.prepared.name=this.prevEvent=null;for(a=this.inertiaStatus.resumeDx=this.inertiaStatus.resumeDy=0;a<this.pointers.length;a++)-1===v(this.pointerIds,O(this.pointers[a]))&&this.pointers.splice(a,1)},inertiaFrame:function(){var a,b,c=this.inertiaStatus;a=this.target.options[this.prepared.name].inertia.resistance;b=(new Date).getTime()/1E3-c.t0;if(b<c.te){b=1-(Math.exp(-a*b)-c.lambda_v0)/c.one_ve_v0;if(c.modifiedXe===c.xe&&c.modifiedYe===c.ye)c.sx=c.xe*b,c.sy=c.ye*b;else{var d=c.ye,e=c.modifiedYe;
a=Za(b,0,c.xe,c.modifiedXe);b=Za(b,0,d,e);c.sx=a;c.sy=b}this.pointerMove(c.startEvent,c.startEvent);c.i=T(this.boundInertiaFrame)}else c.ending=!0,c.sx=c.modifiedXe,c.sy=c.modifiedYe,this.pointerMove(c.startEvent,c.startEvent),this.pointerEnd(c.startEvent,c.startEvent),c.active=c.ending=!1},smoothEndFrame:function(){var a=this.inertiaStatus,b=(new Date).getTime()-a.t0,c=this.target.options[this.prepared.name].inertia.smoothEndDuration;if(b<c){var d;d=b/c;a.sx=-a.xe*d*(d-2)+0;b/=c;a.sy=-a.ye*b*(b-
2)+0;this.pointerMove(a.startEvent,a.startEvent);a.i=T(this.boundSmoothEndFrame)}else a.ending=!0,a.sx=a.xe,a.sy=a.ye,this.pointerMove(a.startEvent,a.startEvent),this.pointerEnd(a.startEvent,a.startEvent),a.smoothEnd=a.active=a.ending=!1},addPointer:function(a){var b=O(a),c=this.mouse?0:v(this.pointerIds,b);-1===c&&(c=this.pointerIds.length);this.pointerIds[c]=b;this.pointers[c]=a;return c},removePointer:function(a){a=O(a);a=this.mouse?0:v(this.pointerIds,a);-1!==a&&(this.pointers.splice(a,1),this.pointerIds.splice(a,
1),this.downTargets.splice(a,1),this.downTimes.splice(a,1),this.holdTimers.splice(a,1))},recordPointer:function(a){var b=this.mouse?0:v(this.pointerIds,O(a));-1!==b&&(this.pointers[b]=a)},collectEventTargets:function(a,b,c,d){function e(a,b,e){e=ka?e.querySelectorAll(b):void 0;a._iEvents[d]&&t(k)&&va(a,k)&&!Z(a,k,c)&&aa(a,k,c)&&R(k,b,e)&&(f.push(a),g.push(k))}var h=this.mouse?0:v(this.pointerIds,O(a));if("tap"!==d||!this.pointerWasMoved&&this.downTargets[h]&&this.downTargets[h]===c){for(var f=[],
g=[],k=c;k;)l.isSet(k)&&l(k)._iEvents[d]&&(f.push(l(k)),g.push(k)),B.forEachSelector(e),k=L(k);(f.length||"tap"===d)&&this.firePointers(a,b,c,f,g,d)}},firePointers:function(a,b,c,d,e,h){var f=this.mouse?0:v(this.pointerIds,O(a)),g={},k,l;"doubletap"===h?g=a:(ra(g,b),b!==a&&ra(g,a),g.preventDefault=fb,g.stopPropagation=G.prototype.stopPropagation,g.stopImmediatePropagation=G.prototype.stopImmediatePropagation,g.interaction=this,g.timeStamp=(new Date).getTime(),g.originalEvent=b,g.originalPointer=a,
g.type=h,g.pointerId=O(a),g.pointerType=this.mouse?"mouse":oa?N(a.pointerType)?a.pointerType:[,,"touch","pen","mouse"][a.pointerType]:"touch");"tap"===h&&(g.dt=g.timeStamp-this.downTimes[f],k=g.timeStamp-this.tapTime,l=!!(this.prevTap&&"doubletap"!==this.prevTap.type&&this.prevTap.target===g.target&&500>k),g["double"]=l,this.tapTime=g.timeStamp);for(a=0;a<d.length&&!(g.currentTarget=e[a],g.interactable=d[a],d[a].fire(g),g.immediatePropagationStopped||g.propagationStopped&&e[a+1]!==g.currentTarget);a++);
l?(d={},x(d,g),d.dt=k,d.type="doubletap",this.collectEventTargets(d,b,c,"doubletap"),this.prevTap=d):"tap"===h&&(this.prevTap=g)},validateSelector:function(a,b,c,d){for(var e=0,h=c.length;e<h;e++){var f=c[e],g=d[e],k=W(f.getAction(a,b,this,g),f);if(k&&ha(f,g,k))return this.target=f,this.element=g,k}},setSnapping:function(a,b){var c=this.target.options[this.prepared.name].snap,d=[],e,h,f;b=b||this.snapStatus;b.useStatusXY?h={x:b.x,y:b.y}:(e=na(this.target,this.element),h=x({},a),h.x-=e.x,h.y-=e.y);
b.realX=h.x;b.realY=h.y;h.x-=this.inertiaStatus.resumeDx;h.y-=this.inertiaStatus.resumeDy;for(var g=c.targets?c.targets.length:0,k=0;k<this.snapOffsets.length;k++){var l=h.x-this.snapOffsets[k].x,m=h.y-this.snapOffsets[k].y;for(f=0;f<g;f++)(e=A(c.targets[f])?c.targets[f](l,m,this):c.targets[f])&&d.push({x:K(e.x)?e.x+this.snapOffsets[k].x:l,y:K(e.y)?e.y+this.snapOffsets[k].y:m,range:K(e.range)?e.range:c.range})}var c=null,k=!1,n=0,p=0;f=m=l=0;for(g=d.length;f<g;f++){e=d[f];var q=e.range,r=e.x-h.x,
t=e.y-h.y,w=fa(r,t),v=w<=q;Infinity===q&&k&&Infinity!==p&&(v=!1);if(!c||(v?k&&Infinity!==q?w/q<n/p:Infinity===q&&Infinity!==p||w<n:!k&&w<n))Infinity===q&&(v=!0),c=e,n=w,p=q,k=v,l=r,m=t,b.range=q}c?(d=b.snappedX!==c.x||b.snappedY!==c.y,b.snappedX=c.x,b.snappedY=c.y):(d=!0,b.snappedX=NaN,b.snappedY=NaN);b.dx=l;b.dy=m;b.changed=d||k&&!b.locked;b.locked=k;return b},setRestriction:function(a,b){var c=this.target,d=c&&c.options[this.prepared.name].restrict,e=d&&d.restriction;if(!e)return b;b=b||this.restrictStatus;
d=b.useStatusXY?d={x:b.x,y:b.y}:d=x({},a);b.snap&&b.snap.locked&&(d.x+=b.snap.dx||0,d.y+=b.snap.dy||0);d.x-=this.inertiaStatus.resumeDx;d.y-=this.inertiaStatus.resumeDy;b.dx=0;b.dy=0;b.restricted=!1;if(N(e)&&(e="parent"===e?L(this.element):"self"===e?c.getRect(this.element):Ka(this.element,e),!e))return b;A(e)&&(e=e(d.x,d.y,this.element));t(e)&&(e=ua(e));(c=e)?"x"in e&&"y"in e?(e=Math.max(Math.min(c.x+c.width-this.restrictOffset.right,d.x),c.x+this.restrictOffset.left),c=Math.max(Math.min(c.y+c.height-
this.restrictOffset.bottom,d.y),c.y+this.restrictOffset.top)):(e=Math.max(Math.min(c.right-this.restrictOffset.right,d.x),c.left+this.restrictOffset.left),c=Math.max(Math.min(c.bottom-this.restrictOffset.bottom,d.y),c.top+this.restrictOffset.top)):(e=d.x,c=d.y);b.dx=e-d.x;b.dy=c-d.y;b.changed=b.restrictedX!==e||b.restrictedY!==c;b.restricted=!(!b.dx&&!b.dy);b.restrictedX=e;b.restrictedY=c;return b},checkAndPreventDefault:function(a,b,c){if(b=b||this.target){b=b.options;var d=b.preventDefault;"auto"===
d&&c&&!/^(input|select|textarea)$/i.test(a.target.nodeName)?/down|start/i.test(a.type)&&"drag"===this.prepared.name&&"xy"!==b.drag.axis||b[this.prepared.name]&&b[this.prepared.name].manualStart&&!this.interacting()||a.preventDefault():"always"===d&&a.preventDefault()}},calcInertia:function(a){var b=this.target.options[this.prepared.name].inertia,c=b.resistance,d=-Math.log(b.endSpeed/a.v0)/c;a.x0=this.prevEvent.pageX;a.y0=this.prevEvent.pageY;a.t0=a.startEvent.timeStamp/1E3;a.sx=a.sy=0;a.modifiedXe=
a.xe=(a.vx0-d)/c;a.modifiedYe=a.ye=(a.vy0-d)/c;a.te=d;a.lambda_v0=c/a.v0;a.one_ve_v0=1-b.endSpeed/a.v0},autoScrollMove:function(a){var b;if(b=this.interacting()){b=this.prepared.name;var c=this.target.options;/^resize/.test(b)&&(b="resize");b=c[b].autoScroll&&c[b].autoScroll.enabled}if(b)if(this.inertiaStatus.active)p.x=p.y=0;else{var d,e=this.target.options[this.prepared.name].autoScroll,h=e.container||V(this.element);Ba(h)?(d=a.clientX<p.margin,b=a.clientY<p.margin,c=a.clientX>h.innerWidth-p.margin,
a=a.clientY>h.innerHeight-p.margin):(h=Fa(h),d=a.clientX<h.left+p.margin,b=a.clientY<h.top+p.margin,c=a.clientX>h.right-p.margin,a=a.clientY>h.bottom-p.margin);p.x=c?1:d?-1:0;p.y=a?1:b?-1:0;p.isScrolling||(p.margin=e.margin,p.speed=e.speed,p.start(this))}},_updateEventTargets:function(a,b){this._eventTarget=a;this._curEventTarget=b}};G.prototype={preventDefault:ma,stopImmediatePropagation:function(){this.immediatePropagationStopped=this.propagationStopped=!0},stopPropagation:function(){this.propagationStopped=
!0}};for(var m={},lb="dragStart dragMove resizeStart resizeMove gestureStart gestureMove pointerOver pointerOut pointerHover selectorDown pointerDown pointerMove pointerUp pointerCancel pointerEnd addPointer removePointer recordPointer autoScrollMove".split(" "),Ra=0,Sa=lb.length;Ra<Sa;Ra++){var mb=lb[Ra];m[mb]=cb(mb)}B.indexOfElement=function(a,b){b=b||Q;for(var c=0;c<this.length;c++){var d=this[c];if(d.selector===a&&d._context===b||!d.selector&&d._element===a)return c}return-1};B.get=function(a,
b){return this[this.indexOfElement(a,b&&b.context)]};B.forEachSelector=function(a){for(var b=0;b<this.length;b++){var c=this[b];if(c.selector&&(c=a(c,c.selector,c._context,b,this),void 0!==c))return c}};C.prototype={setOnEvents:function(a,b){"drop"===a?(A(b.ondrop)&&(this.ondrop=b.ondrop),A(b.ondropactivate)&&(this.ondropactivate=b.ondropactivate),A(b.ondropdeactivate)&&(this.ondropdeactivate=b.ondropdeactivate),A(b.ondragenter)&&(this.ondragenter=b.ondragenter),A(b.ondragleave)&&(this.ondragleave=
b.ondragleave),A(b.ondropmove)&&(this.ondropmove=b.ondropmove)):(a="on"+a,A(b.onstart)&&(this[a+"start"]=b.onstart),A(b.onmove)&&(this[a+"move"]=b.onmove),A(b.onend)&&(this[a+"end"]=b.onend),A(b.oninertiastart)&&(this[a+"inertiastart"]=b.oninertiastart));return this},draggable:function(a){return z(a)?(this.options.drag.enabled=!1===a.enabled?!1:!0,this.setPerAction("drag",a),this.setOnEvents("drag",a),/^x$|^y$|^xy$/.test(a.axis)?this.options.drag.axis=a.axis:null===a.axis&&delete this.options.drag.axis,
this):H(a)?(this.options.drag.enabled=a,this):this.options.drag},setPerAction:function(a,b){for(var c in b)c in D[a]&&(z(b[c])?(this.options[a][c]=x(this.options[a][c]||{},b[c]),z(D.perAction[c])&&"enabled"in D.perAction[c]&&(this.options[a][c].enabled=!1===b[c].enabled?!1:!0)):H(b[c])&&z(D.perAction[c])?this.options[a][c].enabled=b[c]:void 0!==b[c]&&(this.options[a][c]=b[c]))},dropzone:function(a){return z(a)?(this.options.drop.enabled=!1===a.enabled?!1:!0,this.setOnEvents("drop",a),/^(pointer|center)$/.test(a.overlap)?
this.options.drop.overlap=a.overlap:K(a.overlap)&&(this.options.drop.overlap=Math.max(Math.min(1,a.overlap),0)),"accept"in a&&(this.options.drop.accept=a.accept),"checker"in a&&(this.options.drop.checker=a.checker),this):H(a)?(this.options.drop.enabled=a,this):this.options.drop},dropCheck:function(a,b,c,d,e,h){var f=!1;if(!(h=h||this.getRect(e)))return this.options.drop.checker?this.options.drop.checker(a,b,f,this,e,c,d):!1;var g=this.options.drop.overlap;if("pointer"===g){var k=Da(a),f=na(c,d);k.x+=
f.x;k.y+=f.y;f=k.x>h.left&&k.x<h.right;k=k.y>h.top&&k.y<h.bottom;f=f&&k}k=c.getRect(d);if("center"===g)var f=k.left+k.width/2,l=k.top+k.height/2,f=f>=h.left&&f<=h.right&&l>=h.top&&l<=h.bottom;K(g)&&(f=Math.max(0,Math.min(h.right,k.right)-Math.max(h.left,k.left))*Math.max(0,Math.min(h.bottom,k.bottom)-Math.max(h.top,k.top))/(k.width*k.height)>=g);this.options.drop.checker&&(f=this.options.drop.checker(a,b,f,this,e,c,d));return f},dropChecker:function(a){return A(a)?(this.options.drop.checker=a,this):
null===a?(delete this.options.getRect,this):this.options.drop.checker},accept:function(a){return t(a)||ea(a)?(this.options.drop.accept=a,this):null===a?(delete this.options.drop.accept,this):this.options.drop.accept},resizable:function(a){return z(a)?(this.options.resize.enabled=!1===a.enabled?!1:!0,this.setPerAction("resize",a),this.setOnEvents("resize",a),/^x$|^y$|^xy$/.test(a.axis)?this.options.resize.axis=a.axis:null===a.axis&&(this.options.resize.axis=D.resize.axis),H(a.preserveAspectRatio)?
this.options.resize.preserveAspectRatio=a.preserveAspectRatio:H(a.square)&&(this.options.resize.square=a.square),this):H(a)?(this.options.resize.enabled=a,this):this.options.resize},squareResize:function(a){return H(a)?(this.options.resize.square=a,this):null===a?(delete this.options.resize.square,this):this.options.resize.square},gesturable:function(a){return z(a)?(this.options.gesture.enabled=!1===a.enabled?!1:!0,this.setPerAction("gesture",a),this.setOnEvents("gesture",a),this):H(a)?(this.options.gesture.enabled=
a,this):this.options.gesture},autoScroll:function(a){z(a)?a=x({actions:["drag","resize"]},a):H(a)&&(a={actions:["drag","resize"],enabled:a});return this.setOptions("autoScroll",a)},snap:function(a){a=this.setOptions("snap",a);return a===this?this:a.drag},setOptions:function(a,b){var c=b&&da(b.actions)?b.actions:["drag"],d;if(z(b)||H(b)){for(d=0;d<c.length;d++){var e=/resize/.test(c[d])?"resize":c[d];z(this.options[e])&&(e=this.options[e][a],z(b)?(x(e,b),e.enabled=!1===b.enabled?!1:!0,"snap"===a&&
("grid"===e.mode?e.targets=[l.createSnapGrid(x({offset:e.gridOffset||{x:0,y:0}},e.grid||{}))]:"anchor"===e.mode?e.targets=e.anchors:"path"===e.mode&&(e.targets=e.paths),"elementOrigin"in b&&(e.relativePoints=[b.elementOrigin]))):H(b)&&(e.enabled=b))}return this}c={};e=["drag","resize","gesture"];for(d=0;d<e.length;d++)a in D[e[d]]&&(c[e[d]]=this.options[e[d]][a]);return c},inertia:function(a){a=this.setOptions("inertia",a);return a===this?this:a.drag},getAction:function(a,b,c,d){var e=this.defaultActionChecker(a,
c,d);return this.options.actionChecker?this.options.actionChecker(a,b,e,this,d,c):e},defaultActionChecker:hb,actionChecker:function(a){return A(a)?(this.options.actionChecker=a,this):null===a?(delete this.options.actionChecker,this):this.options.actionChecker},getRect:function(a){a=a||this._element;this.selector&&!t(a)&&(a=this._context.querySelector(this.selector));return ua(a)},rectChecker:function(a){return A(a)?(this.getRect=a,this):null===a?(delete this.options.getRect,this):this.getRect},styleCursor:function(a){return H(a)?
(this.options.styleCursor=a,this):null===a?(delete this.options.styleCursor,this):this.options.styleCursor},preventDefault:function(a){return/^(always|never|auto)$/.test(a)?(this.options.preventDefault=a,this):H(a)?(this.options.preventDefault=a?"always":"never",this):this.options.preventDefault},origin:function(a){return ea(a)||z(a)?(this.options.origin=a,this):this.options.origin},deltaSource:function(a){return"page"===a||"client"===a?(this.options.deltaSource=a,this):this.options.deltaSource},
restrict:function(a){if(!z(a))return this.setOptions("restrict",a);for(var b=["drag","resize","gesture"],c,d=0;d<b.length;d++){var e=b[d];e in a&&(c=x({actions:[e],restriction:a[e]},a),c=this.setOptions("restrict",c))}return c},context:function(){return this._context},_context:Q,ignoreFrom:function(a){return ea(a)||t(a)?(this.options.ignoreFrom=a,this):this.options.ignoreFrom},allowFrom:function(a){return ea(a)||t(a)?(this.options.allowFrom=a,this):this.options.allowFrom},element:function(){return this._element},
fire:function(a){if(!a||!a.type||-1===v(ca,a.type))return this;var b,c,d,e="on"+a.type;if(a.type in this._iEvents)for(b=this._iEvents[a.type],c=0,d=b.length;c<d&&!a.immediatePropagationStopped;c++)b[c](a);if(A(this[e]))this[e](a);if(a.type in U&&(b=U[a.type]))for(c=0,d=b.length;c<d&&!a.immediatePropagationStopped;c++)b[c](a);return this},on:function(a,b,c){var d;N(a)&&-1!==a.search(" ")&&(a=a.trim().split(/ +/));if(da(a)){for(d=0;d<a.length;d++)this.on(a[d],b,c);return this}if(z(a)){for(d in a)this.on(d,
a[d],b);return this}"wheel"===a&&(a=kb);c=c?!0:!1;if(-1!==v(ca,a))a in this._iEvents?this._iEvents[a].push(b):this._iEvents[a]=[b];else if(this.selector){if(!P[a])for(P[a]={selectors:[],contexts:[],listeners:[]},d=0;d<ja.length;d++)n.add(ja[d],a,qa),n.add(ja[d],a,Aa,!0);a=P[a];for(d=a.selectors.length-1;0<=d&&(a.selectors[d]!==this.selector||a.contexts[d]!==this._context);d--);-1===d&&(d=a.selectors.length,a.selectors.push(this.selector),a.contexts.push(this._context),a.listeners.push([]));a.listeners[d].push([b,
c])}else n.add(this._element,a,b,c);return this},off:function(a,b,c){var d;N(a)&&-1!==a.search(" ")&&(a=a.trim().split(/ +/));if(da(a)){for(d=0;d<a.length;d++)this.off(a[d],b,c);return this}if(z(a)){for(var e in a)this.off(e,a[e],b);return this}e=-1;c=c?!0:!1;"wheel"===a&&(a=kb);if(-1!==v(ca,a))(c=this._iEvents[a])&&-1!==(e=v(c,b))&&this._iEvents[a].splice(e,1);else if(this.selector){var h=P[a],f=!1;if(!h)return this;for(e=h.selectors.length-1;0<=e;e--)if(h.selectors[e]===this.selector&&h.contexts[e]===
this._context){var g=h.listeners[e];for(d=g.length-1;0<=d;d--){var k=g[d][1];if(g[d][0]===b&&k===c){g.splice(d,1);g.length||(h.selectors.splice(e,1),h.contexts.splice(e,1),h.listeners.splice(e,1),n.remove(this._context,a,qa),n.remove(this._context,a,Aa,!0),h.selectors.length||(P[a]=null));f=!0;break}}if(f)break}}else n.remove(this._element,a,b,c);return this},set:function(a){z(a)||(a={});this.options=x({},D.base);var b,c=["drag","drop","resize","gesture"],d=["draggable","dropzone","resizable","gesturable"],
e=x(x({},D.perAction),a[h]||{});for(b=0;b<c.length;b++){var h=c[b];this.options[h]=x({},D[h]);this.setPerAction(h,e);this[d[b]](a[h])}c="accept actionChecker allowFrom deltaSource dropChecker ignoreFrom origin preventDefault rectChecker styleCursor".split(" ");b=0;for(Sa=c.length;b<Sa;b++)if(d=c[b],this.options[d]=D.base[d],d in a)this[d](a[d]);return this},unset:function(){n.remove(this._element,"all");if(N(this.selector))for(var a in P)for(var b=P[a];0<b.selectors.length;){b.selectors[0]===this.selector&&
b.contexts[0]===this._context&&(b.selectors.splice(0,1),b.contexts.splice(0,1),b.listeners.splice(0,1),b.selectors.length||(P[a]=null));n.remove(this._context,a,qa);n.remove(this._context,a,Aa,!0);break}else n.remove(this,"all"),this.options.styleCursor&&(this._element.style.cursor="");this.dropzone(!1);B.splice(v(B,this),1);return l}};C.prototype.snap=M(C.prototype.snap,"Interactable#snap is deprecated. See the new documentation for snapping at http://interactjs.io/docs/snapping");C.prototype.restrict=
M(C.prototype.restrict,"Interactable#restrict is deprecated. See the new documentation for resticting at http://interactjs.io/docs/restriction");C.prototype.inertia=M(C.prototype.inertia,"Interactable#inertia is deprecated. See the new documentation for inertia at http://interactjs.io/docs/inertia");C.prototype.autoScroll=M(C.prototype.autoScroll,"Interactable#autoScroll is deprecated. See the new documentation for autoScroll at http://interactjs.io/docs/#autoscroll");C.prototype.squareResize=M(C.prototype.squareResize,
"Interactable#squareResize is deprecated. See http://interactjs.io/docs/#resize-square");C.prototype.accept=M(C.prototype.accept,"Interactable#accept is deprecated. use Interactable#dropzone({ accept: target }) instead");C.prototype.dropChecker=M(C.prototype.dropChecker,"Interactable#dropChecker is deprecated. use Interactable#dropzone({ dropChecker: checkerFunction }) instead");C.prototype.context=M(C.prototype.context,"Interactable#context as a method is deprecated. It will soon be a DOM Node instead");
l.isSet=function(a,b){return-1!==B.indexOfElement(a,b&&b.context)};l.on=function(a,b,c){N(a)&&-1!==a.search(" ")&&(a=a.trim().split(/ +/));if(da(a)){for(var d=0;d<a.length;d++)l.on(a[d],b,c);return l}if(z(a)){for(d in a)l.on(d,a[d],b);return l}-1!==v(ca,a)?U[a]?U[a].push(b):U[a]=[b]:n.add(Q,a,b,c);return l};l.off=function(a,b,c){N(a)&&-1!==a.search(" ")&&(a=a.trim().split(/ +/));if(da(a)){for(var d=0;d<a.length;d++)l.off(a[d],b,c);return l}if(z(a)){for(d in a)l.off(d,a[d],b);return l}if(-1===v(ca,
a))n.remove(Q,a,b,c);else{var e;a in U&&-1!==(e=v(U[a],b))&&U[a].splice(e,1)}return l};l.enableDragging=M(function(a){return null!==a&&void 0!==a?(S.drag=a,l):S.drag},"interact.enableDragging is deprecated and will soon be removed.");l.enableResizing=M(function(a){return null!==a&&void 0!==a?(S.resize=a,l):S.resize},"interact.enableResizing is deprecated and will soon be removed.");l.enableGesturing=M(function(a){return null!==a&&void 0!==a?(S.gesture=a,l):S.gesture},"interact.enableGesturing is deprecated and will soon be removed.");
l.eventTypes=ca;l.debug=function(){var a=r[0]||new xa;return{interactions:r,target:a.target,dragging:a.dragging,resizing:a.resizing,gesturing:a.gesturing,prepared:a.prepared,matches:a.matches,matchElements:a.matchElements,prevCoords:a.prevCoords,startCoords:a.startCoords,pointerIds:a.pointerIds,pointers:a.pointers,addPointer:m.addPointer,removePointer:m.removePointer,recordPointer:m.recordPointer,snap:a.snapStatus,restrict:a.restrictStatus,inertia:a.inertiaStatus,downTime:a.downTimes[0],downEvent:a.downEvent,
downPointer:a.downPointer,prevEvent:a.prevEvent,Interactable:C,interactables:B,pointerIsDown:a.pointerIsDown,defaultOptions:D,defaultActionChecker:hb,actionCursors:za,dragMove:m.dragMove,resizeMove:m.resizeMove,gestureMove:m.gestureMove,pointerUp:m.pointerUp,pointerDown:m.pointerDown,pointerMove:m.pointerMove,pointerHover:m.pointerHover,eventTypes:ca,events:n,globalEvents:U,delegatedEvents:P,prefixedPropREs:Ca}};l.getPointerAverage=Ya;l.getTouchBBox=Ha;l.getTouchDistance=Ia;l.getTouchAngle=Ja;l.getElementRect=
ua;l.getElementClientRect=Fa;l.matchesSelector=R;l.closest=Ka;l.margin=M(function(a){return K(a)?(pa=a,l):pa},"interact.margin is deprecated. Use interact(target).resizable({ margin: number }); instead.");l.supportsTouch=function(){return ga};l.supportsPointerEvent=function(){return oa};l.stop=function(a){for(var b=r.length-1;0<=b;b--)r[b].stop(a);return l};l.dynamicDrop=function(a){return H(a)?(Pa=a,l):Pa};l.pointerMoveTolerance=function(a){return K(a)?(Qa=a,this):Qa};l.maxInteractions=function(a){return K(a)?
(wa=a,this):wa};l.createSnapGrid=function(a){return function(b,c){var d=0,e=0;z(a.offset)&&(d=a.offset.x,e=a.offset.y);return{x:Math.round((b-d)/a.x)*a.x+d,y:Math.round((c-e)/a.y)*a.y+e,range:a.range}}};ib(Q);Oa in Element.prototype&&A(Element.prototype[Oa])||(ka=function(a,b,c){c=c||a.parentNode.querySelectorAll(b);b=0;for(var d=c.length;b<d;b++)if(c[b]===a)return!0;return!1});(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!F.requestAnimationFrame;++c)T=F[b[c]+"RequestAnimationFrame"],
X=F[b[c]+"CancelAnimationFrame"]||F[b[c]+"CancelRequestAnimationFrame"];T||(T=function(b){var c=(new Date).getTime(),h=Math.max(0,16-(c-a)),f=setTimeout(function(){b(c+h)},h);a=c+h;return f});X||(X=function(a){clearTimeout(a)})})();"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=l),exports.interact=l):"function"===typeof define&&define.amd?define("interact",function(){return l}):F.interact=l}})("undefined"===typeof window?void 0:window);
//# sourceMappingURL=interact.min.js.map/*!
 * Vue.js v2.0.1
 * (c) 2014-2016 Evan You
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Vue=t()}(this,function(){"use strict";function e(e){return null==e?"":"object"==typeof e?JSON.stringify(e,null,2):String(e)}function t(e){var t=parseFloat(e,10);return t||0===t?t:e}function n(e,t){for(var n=Object.create(null),r=e.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}function r(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}function i(e,t){return hr.call(e,t)}function o(e){return"string"==typeof e||"number"==typeof e}function a(e){var t=Object.create(null);return function(n){var r=t[n];return r||(t[n]=e(n))}}function s(e,t){function n(n){var r=arguments.length;return r?r>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n}function c(e,t){t=t||0;for(var n=e.length-t,r=new Array(n);n--;)r[n]=e[n+t];return r}function u(e,t){for(var n in t)e[n]=t[n];return e}function l(e){return null!==e&&"object"==typeof e}function f(e){return $r.call(e)===wr}function d(e){for(var t={},n=0;n<e.length;n++)e[n]&&u(t,e[n]);return t}function p(){}function v(e){return e.reduce(function(e,t){return e.concat(t.staticKeys||[])},[]).join(",")}function h(e,t){return e==t||!(!l(e)||!l(t))&&JSON.stringify(e)===JSON.stringify(t)}function m(e,t){for(var n=0;n<e.length;n++)if(h(e[n],t))return n;return-1}function g(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function y(e,t,n,r){Object.defineProperty(e,t,{value:n,enumerable:!!r,writable:!0,configurable:!0})}function _(e){if(!kr.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}function b(e){return/native code/.test(e.toString())}function $(e){Rr.target&&Ir.push(Rr.target),Rr.target=e}function w(){Rr.target=Ir.pop()}function C(){Fr.length=0,Br={},Hr=Ur=!1}function x(){for(Ur=!0,Fr.sort(function(e,t){return e.id-t.id}),zr=0;zr<Fr.length;zr++){var e=Fr[zr],t=e.id;Br[t]=null,e.run()}Nr&&xr.devtools&&Nr.emit("flush"),C()}function k(e){var t=e.id;if(null==Br[t]){if(Br[t]=!0,Ur){for(var n=Fr.length-1;n>=0&&Fr[n].id>e.id;)n--;Fr.splice(Math.max(n,zr)+1,0,e)}else Fr.push(e);Hr||(Hr=!0,Mr(x))}}function A(e,t){var n,r;t||(t=qr,t.clear());var i=Array.isArray(e),o=l(e);if((i||o)&&Object.isExtensible(e)){if(e.__ob__){var a=e.__ob__.dep.id;if(t.has(a))return;t.add(a)}if(i)for(n=e.length;n--;)A(e[n],t);else if(o)for(r=Object.keys(e),n=r.length;n--;)A(e[r[n]],t)}}function O(e,t){e.__proto__=t}function T(e,t,n){for(var r=0,i=n.length;r<i;r++){var o=n[r];y(e,o,t[o])}}function S(e){if(l(e)){var t;return i(e,"__ob__")&&e.__ob__ instanceof Yr?t=e.__ob__:Gr.shouldConvert&&!xr._isServer&&(Array.isArray(e)||f(e))&&Object.isExtensible(e)&&!e._isVue&&(t=new Yr(e)),t}}function E(e,t,n,r){var i=new Rr,o=Object.getOwnPropertyDescriptor(e,t);if(!o||o.configurable!==!1){var a=o&&o.get,s=o&&o.set,c=S(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=a?a.call(e):n;if(Rr.target&&(i.depend(),c&&c.dep.depend(),Array.isArray(t)))for(var r=void 0,o=0,s=t.length;o<s;o++)r=t[o],r&&r.__ob__&&r.__ob__.dep.depend();return t},set:function(t){var r=a?a.call(e):n;t!==r&&(s?s.call(e,t):n=t,c=S(t),i.notify())}})}}function j(e,t,n){if(Array.isArray(e))return e.splice(t,1,n),n;if(i(e,t))return void(e[t]=n);var r=e.__ob__;if(!(e._isVue||r&&r.vmCount))return r?(E(r.value,t,n),r.dep.notify(),n):void(e[t]=n)}function L(e,t){var n=e.__ob__;e._isVue||n&&n.vmCount||i(e,t)&&(delete e[t],n&&n.dep.notify())}function D(e){e._watchers=[],N(e),M(e),P(e),I(e),F(e)}function N(e){var t=e.$options.props;if(t){var n=e.$options.propsData||{},r=e.$options._propKeys=Object.keys(t),i=!e.$parent;Gr.shouldConvert=i;for(var o=function(i){var o=r[i];E(e,o,je(o,t,n,e))},a=0;a<r.length;a++)o(a);Gr.shouldConvert=!0}}function M(e){var t=e.$options.data;t=e._data="function"==typeof t?t.call(e):t||{},f(t)||(t={});for(var n=Object.keys(t),r=e.$options.props,o=n.length;o--;)r&&i(r,n[o])||U(e,n[o]);S(t),t.__ob__&&t.__ob__.vmCount++}function P(e){var t=e.$options.computed;if(t)for(var n in t){var r=t[n];"function"==typeof r?(Qr.get=R(r,e),Qr.set=p):(Qr.get=r.get?r.cache!==!1?R(r.get,e):s(r.get,e):p,Qr.set=r.set?s(r.set,e):p),Object.defineProperty(e,n,Qr)}}function R(e,t){var n=new Jr(t,e,p,{lazy:!0});return function(){return n.dirty&&n.evaluate(),Rr.target&&n.depend(),n.value}}function I(e){var t=e.$options.methods;if(t)for(var n in t)null!=t[n]&&(e[n]=s(t[n],e))}function F(e){var t=e.$options.watch;if(t)for(var n in t){var r=t[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)B(e,n,r[i]);else B(e,n,r)}}function B(e,t,n){var r;f(n)&&(r=n,n=n.handler),"string"==typeof n&&(n=e[n]),e.$watch(t,n,r)}function H(e){var t={};t.get=function(){return this._data},Object.defineProperty(e.prototype,"$data",t),e.prototype.$set=j,e.prototype.$delete=L,e.prototype.$watch=function(e,t,n){var r=this;n=n||{},n.user=!0;var i=new Jr(r,e,t,n);return n.immediate&&t.call(r,i.value),function(){i.teardown()}}}function U(e,t){g(t)||Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return e._data[t]},set:function(n){e._data[t]=n}})}function z(e){var t=new Xr(e.tag,e.data,e.children,e.text,e.elm,e.ns,e.context,e.componentOptions);return t.isStatic=e.isStatic,t.key=e.key,t.isCloned=!0,t}function V(e){for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=z(e[n]);return t}function J(e,t,n){if(o(e))return[q(e)];if(Array.isArray(e)){for(var r=[],i=0,a=e.length;i<a;i++){var s=e[i],c=r[r.length-1];Array.isArray(s)?r.push.apply(r,J(s,t,i)):o(s)?c&&c.text?c.text+=String(s):""!==s&&r.push(q(s)):s instanceof Xr&&(s.text&&c&&c.text?c.text+=s.text:(t&&K(s,t),s.tag&&null==s.key&&null!=n&&(s.key="__vlist_"+n+"_"+i+"__"),r.push(s)))}return r}}function q(e){return new Xr(void 0,void 0,void 0,String(e))}function K(e,t){if(e.tag&&!e.ns&&(e.ns=t,e.children))for(var n=0,r=e.children.length;n<r;n++)K(e.children[n],t)}function W(e){return e&&e.filter(function(e){return e&&e.componentOptions})[0]}function Z(e,t,n){var r=e[t];if(r){var i=e.__injected||(e.__injected={});i[t]||(i[t]=!0,e[t]=function(){r.apply(this,arguments),n.apply(this,arguments)})}else e[t]=n}function G(e,t,n,r){var i,o,a,s,c,u;for(i in e)if(o=e[i],a=t[i],o)if(a){if(o!==a)if(Array.isArray(a)){a.length=o.length;for(var l=0;l<a.length;l++)a[l]=o[l];e[i]=a}else a.fn=o,e[i]=a}else u="!"===i.charAt(0),c=u?i.slice(1):i,Array.isArray(o)?n(c,o.invoker=Y(o),u):(o.invoker||(s=o,o=e[i]={},o.fn=s,o.invoker=Q(o)),n(c,o.invoker,u));else;for(i in t)e[i]||(c="!"===i.charAt(0)?i.slice(1):i,r(c,t[i].invoker))}function Y(e){return function(t){for(var n=arguments,r=1===arguments.length,i=0;i<e.length;i++)r?e[i](t):e[i].apply(null,n)}}function Q(e){return function(t){var n=1===arguments.length;n?e.fn(t):e.fn.apply(null,arguments)}}function X(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}function ee(e){e.prototype._mount=function(e,t){var n=this;return n.$el=e,n.$options.render||(n.$options.render=ei),te(n,"beforeMount"),n._watcher=new Jr(n,function(){n._update(n._render(),t)},p),t=!1,n.$root===n&&(n._isMounted=!0,te(n,"mounted")),n},e.prototype._update=function(e,t){var n=this;n._isMounted&&te(n,"beforeUpdate");var r=n.$el,i=ti;ti=n;var o=n._vnode;n._vnode=e,o?n.$el=n.__patch__(o,e):n.$el=n.__patch__(n.$el,e,t),ti=i,r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el),n._isMounted&&te(n,"updated")},e.prototype._updateFromParent=function(e,t,n,r){var i=this,o=!(!i.$options._renderChildren&&!r);if(i.$options._parentVnode=n,i.$options._renderChildren=r,e&&i.$options.props){Gr.shouldConvert=!1;for(var a=i.$options._propKeys||[],s=0;s<a.length;s++){var c=a[s];i[c]=je(c,i.$options.props,e,i)}Gr.shouldConvert=!0}if(t){var u=i.$options._parentListeners;i.$options._parentListeners=t,i._updateListeners(t,u)}o&&(i.$slots=ye(r,i._renderContext),i.$forceUpdate())},e.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){te(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||r(t.$children,e),e._watcher&&e._watcher.teardown();for(var n=e._watchers.length;n--;)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,te(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null)}}}function te(e,t){var n=e.$options[t];if(n)for(var r=0,i=n.length;r<i;r++)n[r].call(e);e.$emit("hook:"+t)}function ne(e,t,n,r,i){if(e&&(l(e)&&(e=we.extend(e)),"function"==typeof e)){if(!e.cid)if(e.resolved)e=e.resolved;else if(e=ue(e,function(){n.$forceUpdate()}),!e)return;t=t||{};var o=le(t,e);if(e.options.functional)return re(e,o,t,n,r);var a=t.on;t.on=t.nativeOn,e.options.abstract&&(t={}),de(t);var s=e.options.name||i,c=new Xr("vue-component-"+e.cid+(s?"-"+s:""),t,void 0,void 0,void 0,void 0,n,{Ctor:e,propsData:o,listeners:a,tag:i,children:r});return c}}function re(e,t,n,r,i){var o={},a=e.options.props;if(a)for(var c in a)o[c]=je(c,a,t);return e.options.render.call(null,s(ve,{_self:Object.create(r)}),{props:o,data:n,parent:r,children:J(i),slots:function(){return ye(i,r)}})}function ie(e,t){var n=e.componentOptions,r={_isComponent:!0,parent:t,propsData:n.propsData,_componentTag:n.tag,_parentVnode:e,_parentListeners:n.listeners,_renderChildren:n.children},i=e.data.inlineTemplate;return i&&(r.render=i.render,r.staticRenderFns=i.staticRenderFns),new n.Ctor(r)}function oe(e,t){if(!e.child||e.child._isDestroyed){var n=e.child=ie(e,ti);n.$mount(t?e.elm:void 0,t)}}function ae(e,t){var n=t.componentOptions,r=t.child=e.child;r._updateFromParent(n.propsData,n.listeners,t,n.children)}function se(e){e.child._isMounted||(e.child._isMounted=!0,te(e.child,"mounted")),e.data.keepAlive&&(e.child._inactive=!1,te(e.child,"activated"))}function ce(e){e.child._isDestroyed||(e.data.keepAlive?(e.child._inactive=!0,te(e.child,"deactivated")):e.child.$destroy())}function ue(e,t){if(!e.requested){e.requested=!0;var n=e.pendingCallbacks=[t],r=!0,i=function(t){if(l(t)&&(t=we.extend(t)),e.resolved=t,!r)for(var i=0,o=n.length;i<o;i++)n[i](t)},o=function(e){},a=e(i,o);return a&&"function"==typeof a.then&&!e.resolved&&a.then(i,o),r=!1,e.resolved}e.pendingCallbacks.push(t)}function le(e,t){var n=t.options.props;if(n){var r={},i=e.attrs,o=e.props,a=e.domProps;if(i||o||a)for(var s in n){var c=br(s);fe(r,o,s,c,!0)||fe(r,i,s,c)||fe(r,a,s,c)}return r}}function fe(e,t,n,r,o){if(t){if(i(t,n))return e[n]=t[n],o||delete t[n],!0;if(i(t,r))return e[n]=t[r],o||delete t[r],!0}return!1}function de(e){e.hook||(e.hook={});for(var t=0;t<ri.length;t++){var n=ri[t],r=e.hook[n],i=ni[n];e.hook[n]=r?pe(i,r):i}}function pe(e,t){return function(n,r){e(n,r),t(n,r)}}function ve(e,t,n){return t&&(Array.isArray(t)||"object"!=typeof t)&&(n=t,t=void 0),he(this._self,e,t,n)}function he(e,t,n,r){if(!n||!n.__ob__){if(!t)return ei();if("string"==typeof t){var i,o=xr.getTagNamespace(t);return xr.isReservedTag(t)?new Xr(t,n,J(r,o),void 0,void 0,o,e):(i=Ee(e.$options,"components",t))?ne(i,n,e,r,t):new Xr(t,n,J(r,o),void 0,void 0,o,e)}return ne(t,n,e,r)}}function me(e){e.$vnode=null,e._vnode=null,e._staticTrees=null,e._renderContext=e.$options._parentVnode&&e.$options._parentVnode.context,e.$slots=ye(e.$options._renderChildren,e._renderContext),e.$createElement=s(ve,e),e.$options.el&&e.$mount(e.$options.el)}function ge(n){n.prototype.$nextTick=function(e){Mr(e,this)},n.prototype._render=function(){var e=this,t=e.$options,n=t.render,r=t.staticRenderFns,i=t._parentVnode;if(e._isMounted)for(var o in e.$slots)e.$slots[o]=V(e.$slots[o]);r&&!e._staticTrees&&(e._staticTrees=[]),e.$vnode=i;var a;try{a=n.call(e._renderProxy,e.$createElement)}catch(t){if(xr.errorHandler)xr.errorHandler.call(null,t,e);else{if(xr._isServer)throw t;setTimeout(function(){throw t},0)}a=e._vnode}return a instanceof Xr||(a=ei()),a.parent=i,a},n.prototype._h=ve,n.prototype._s=e,n.prototype._n=t,n.prototype._e=ei,n.prototype._q=h,n.prototype._i=m,n.prototype._m=function(e,t){var n=this._staticTrees[e];if(n&&!t)return Array.isArray(n)?V(n):z(n);if(n=this._staticTrees[e]=this.$options.staticRenderFns[e].call(this._renderProxy),Array.isArray(n))for(var r=0;r<n.length;r++)n[r].isStatic=!0,n[r].key="__static__"+e+"_"+r;else n.isStatic=!0,n.key="__static__"+e;return n};var r=function(e){return e};n.prototype._f=function(e){return Ee(this.$options,"filters",e,!0)||r},n.prototype._l=function(e,t){var n,r,i,o,a;if(Array.isArray(e))for(n=new Array(e.length),r=0,i=e.length;r<i;r++)n[r]=t(e[r],r);else if("number"==typeof e)for(n=new Array(e),r=0;r<e;r++)n[r]=t(r+1,r);else if(l(e))for(o=Object.keys(e),n=new Array(o.length),r=0,i=o.length;r<i;r++)a=o[r],n[r]=t(e[a],a,r);return n},n.prototype._t=function(e,t){var n=this.$slots[e];return n||t},n.prototype._b=function(e,t,n){if(t)if(l(t)){Array.isArray(t)&&(t=d(t));for(var r in t)if("class"===r||"style"===r)e[r]=t[r];else{var i=n||xr.mustUseProp(r)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={});i[r]=t[r]}}else;return e},n.prototype._k=function(e){return xr.keyCodes[e]}}function ye(e,t){var n={};if(!e)return n;for(var r,i,o=J(e)||[],a=[],s=0,c=o.length;s<c;s++)if(i=o[s],i.context===t&&i.data&&(r=i.data.slot)){var u=n[r]||(n[r]=[]);"template"===i.tag?u.push.apply(u,i.children):u.push(i)}else a.push(i);return a.length&&(1!==a.length||" "!==a[0].text&&!a[0].isComment)&&(n.default=a),n}function _e(e){e._events=Object.create(null);var t=e.$options._parentListeners,n=s(e.$on,e),r=s(e.$off,e);e._updateListeners=function(e,t){G(e,t||{},n,r)},t&&e._updateListeners(t)}function be(e){e.prototype.$on=function(e,t){var n=this;return(n._events[e]||(n._events[e]=[])).push(t),n},e.prototype.$once=function(e,t){function n(){r.$off(e,n),t.apply(r,arguments)}var r=this;return n.fn=t,r.$on(e,n),r},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;var r=n._events[e];if(!r)return n;if(1===arguments.length)return n._events[e]=null,n;for(var i,o=r.length;o--;)if(i=r[o],i===t||i.fn===t){r.splice(o,1);break}return n},e.prototype.$emit=function(e){var t=this,n=t._events[e];if(n){n=n.length>1?c(n):n;for(var r=c(arguments,1),i=0,o=n.length;i<o;i++)n[i].apply(t,r)}return t}}function $e(e){function t(e,t){var r=e.$options=Object.create(n(e));r.parent=t.parent,r.propsData=t.propsData,r._parentVnode=t._parentVnode,r._parentListeners=t._parentListeners,r._renderChildren=t._renderChildren,r._componentTag=t._componentTag,t.render&&(r.render=t.render,r.staticRenderFns=t.staticRenderFns)}function n(e){var t=e.constructor,n=t.options;if(t.super){var r=t.super.options,i=t.superOptions;r!==i&&(t.superOptions=r,n=t.options=Se(r,t.extendOptions),n.name&&(n.components[n.name]=t))}return n}e.prototype._init=function(e){var r=this;r._uid=ii++,r._isVue=!0,e&&e._isComponent?t(r,e):r.$options=Se(n(r),e||{},r),r._renderProxy=r,r._self=r,X(r),_e(r),te(r,"beforeCreate"),D(r),te(r,"created"),me(r)}}function we(e){this._init(e)}function Ce(e,t){var n,r,o;for(n in t)r=e[n],o=t[n],i(e,n)?l(r)&&l(o)&&Ce(r,o):j(e,n,o);return e}function xe(e,t){return t?e?e.concat(t):Array.isArray(t)?t:[t]:e}function ke(e,t){var n=Object.create(e||null);return t?u(n,t):n}function Ae(e){if(e.components){var t,n=e.components;for(var r in n){var i=r.toLowerCase();vr(i)||xr.isReservedTag(i)||(t=n[r],f(t)&&(n[r]=we.extend(t)))}}}function Oe(e){var t=e.props;if(t){var n,r,i,o={};if(Array.isArray(t))for(n=t.length;n--;)r=t[n],"string"==typeof r&&(i=gr(r),o[i]={type:null});else if(f(t))for(var a in t)r=t[a],i=gr(a),o[i]=f(r)?r:{type:r};e.props=o}}function Te(e){var t=e.directives;if(t)for(var n in t){var r=t[n];"function"==typeof r&&(t[n]={bind:r,update:r})}}function Se(e,t,n){function r(r){var i=si[r]||ci;l[r]=i(e[r],t[r],n,r)}Ae(t),Oe(t),Te(t);var o=t.extends;if(o&&(e="function"==typeof o?Se(e,o.options,n):Se(e,o,n)),t.mixins)for(var a=0,s=t.mixins.length;a<s;a++){var c=t.mixins[a];c.prototype instanceof we&&(c=c.options),e=Se(e,c,n)}var u,l={};for(u in e)r(u);for(u in t)i(e,u)||r(u);return l}function Ee(e,t,n,r){if("string"==typeof n){var i=e[t],o=i[n]||i[gr(n)]||i[yr(gr(n))];return o}}function je(e,t,n,r){var o=t[e],a=!i(n,e),s=n[e];if("Boolean"===De(o.type)&&(a&&!i(o,"default")?s=!1:""!==s&&s!==br(e)||(s=!0)),void 0===s){s=Le(r,o,e);var c=Gr.shouldConvert;Gr.shouldConvert=!0,S(s),Gr.shouldConvert=c}return s}function Le(e,t,n){if(i(t,"default")){var r=t.default;return l(r),"function"==typeof r&&t.type!==Function?r.call(e):r}}function De(e){var t=e&&e.toString().match(/^\s*function (\w+)/);return t&&t[1]}function Ne(e){e.use=function(e){if(!e.installed){var t=c(arguments,1);return t.unshift(this),"function"==typeof e.install?e.install.apply(e,t):e.apply(null,t),e.installed=!0,this}}}function Me(e){e.mixin=function(t){e.options=Se(e.options,t)}}function Pe(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,r=0===n.cid;if(r&&e._Ctor)return e._Ctor;var i=e.name||n.options.name,o=function(e){this._init(e)};return o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.cid=t++,o.options=Se(n.options,e),o.super=n,o.extend=n.extend,xr._assetTypes.forEach(function(e){o[e]=n[e]}),i&&(o.options.components[i]=o),o.superOptions=n.options,o.extendOptions=e,r&&(e._Ctor=o),o}}function Re(e){xr._assetTypes.forEach(function(t){e[t]=function(n,r){return r?("component"===t&&f(r)&&(r.name=r.name||n,r=e.extend(r)),"directive"===t&&"function"==typeof r&&(r={bind:r,update:r}),this.options[t+"s"][n]=r,r):this.options[t+"s"][n]}})}function Ie(e){var t={};t.get=function(){return xr},Object.defineProperty(e,"config",t),e.util=ui,e.set=j,e.delete=L,e.nextTick=Mr,e.options=Object.create(null),xr._assetTypes.forEach(function(t){e.options[t+"s"]=Object.create(null)}),u(e.options.components,fi),Ne(e),Me(e),Pe(e),Re(e)}function Fe(e){for(var t=e.data,n=e,r=e;r.child;)r=r.child._vnode,r.data&&(t=Be(r.data,t));for(;n=n.parent;)n.data&&(t=Be(t,n.data));return He(t)}function Be(e,t){return{staticClass:Ue(e.staticClass,t.staticClass),class:e.class?[e.class,t.class]:t.class}}function He(e){var t=e.class,n=e.staticClass;return n||t?Ue(n,ze(t)):""}function Ue(e,t){return e?t?e+" "+t:e:t||""}function ze(e){var t="";if(!e)return t;if("string"==typeof e)return e;if(Array.isArray(e)){for(var n,r=0,i=e.length;r<i;r++)e[r]&&(n=ze(e[r]))&&(t+=n+" ");return t.slice(0,-1)}if(l(e)){for(var o in e)e[o]&&(t+=o+" ");return t.slice(0,-1)}return t}function Ve(e){return ki(e)?"svg":"math"===e?"math":void 0}function Je(e){if(!Or)return!0;if(Oi(e))return!1;if(e=e.toLowerCase(),null!=Ti[e])return Ti[e];var t=document.createElement(e);return e.indexOf("-")>-1?Ti[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:Ti[e]=/HTMLUnknownElement/.test(t.toString())}function qe(e){if("string"==typeof e){if(e=document.querySelector(e),!e)return document.createElement("div")}return e}function Ke(e){return document.createElement(e)}function We(e,t){return document.createElementNS(bi[e],t)}function Ze(e){return document.createTextNode(e)}function Ge(e){return document.createComment(e)}function Ye(e,t,n){e.insertBefore(t,n)}function Qe(e,t){e.removeChild(t)}function Xe(e,t){e.appendChild(t)}function et(e){return e.parentNode}function tt(e){return e.nextSibling}function nt(e){return e.tagName}function rt(e,t){e.textContent=t}function it(e){return e.childNodes}function ot(e,t,n){e.setAttribute(t,n)}function at(e,t){var n=e.data.ref;if(n){var i=e.context,o=e.child||e.elm,a=i.$refs;t?Array.isArray(a[n])?r(a[n],o):a[n]===o&&(a[n]=void 0):e.data.refInFor?Array.isArray(a[n])?a[n].push(o):a[n]=[o]:a[n]=o}}function st(e){return null==e}function ct(e){return null!=e}function ut(e,t){return e.key===t.key&&e.tag===t.tag&&e.isComment===t.isComment&&!e.data==!t.data}function lt(e,t,n){var r,i,o={};for(r=t;r<=n;++r)i=e[r].key,ct(i)&&(o[i]=r);return o}function ft(e){function t(e){return new Xr(C.tagName(e).toLowerCase(),{},[],void 0,e)}function n(e,t){function n(){0===--n.listeners&&r(e)}return n.listeners=t,n}function r(e){var t=C.parentNode(e);C.removeChild(t,e)}function i(e,t,n){var r,i=e.data;if(e.isRootInsert=!n,ct(i)&&(ct(r=i.hook)&&ct(r=r.init)&&r(e),ct(r=e.child)))return u(e,t),e.elm;var o=e.children,s=e.tag;return ct(s)?(e.elm=e.ns?C.createElementNS(e.ns,s):C.createElement(s),l(e),a(e,o,t),ct(i)&&c(e,t)):e.isComment?e.elm=C.createComment(e.text):e.elm=C.createTextNode(e.text),e.elm}function a(e,t,n){if(Array.isArray(t))for(var r=0;r<t.length;++r)C.appendChild(e.elm,i(t[r],n,!0));else o(e.text)&&C.appendChild(e.elm,C.createTextNode(e.text))}function s(e){for(;e.child;)e=e.child._vnode;return ct(e.tag)}function c(e,t){for(var n=0;n<$.create.length;++n)$.create[n](Li,e);_=e.data.hook,ct(_)&&(_.create&&_.create(Li,e),_.insert&&t.push(e))}function u(e,t){e.data.pendingInsert&&t.push.apply(t,e.data.pendingInsert),e.elm=e.child.$el,s(e)?(c(e,t),l(e)):(at(e),t.push(e))}function l(e){var t;ct(t=e.context)&&ct(t=t.$options._scopeId)&&C.setAttribute(e.elm,t,""),ct(t=ti)&&t!==e.context&&ct(t=t.$options._scopeId)&&C.setAttribute(e.elm,t,"")}function f(e,t,n,r,o,a){for(;r<=o;++r)C.insertBefore(e,i(n[r],a),t)}function d(e){var t,n,r=e.data;if(ct(r))for(ct(t=r.hook)&&ct(t=t.destroy)&&t(e),t=0;t<$.destroy.length;++t)$.destroy[t](e);if(ct(t=e.child)&&!r.keepAlive&&d(t._vnode),ct(t=e.children))for(n=0;n<e.children.length;++n)d(e.children[n])}function p(e,t,n,r){for(;n<=r;++n){var i=t[n];ct(i)&&(ct(i.tag)?(v(i),d(i)):C.removeChild(e,i.elm))}}function v(e,t){if(t||ct(e.data)){var i=$.remove.length+1;for(t?t.listeners+=i:t=n(e.elm,i),ct(_=e.child)&&ct(_=_._vnode)&&ct(_.data)&&v(_,t),_=0;_<$.remove.length;++_)$.remove[_](e,t);ct(_=e.data.hook)&&ct(_=_.remove)?_(e,t):t()}else r(e.elm)}function h(e,t,n,r,o){for(var a,s,c,u,l=0,d=0,v=t.length-1,h=t[0],g=t[v],y=n.length-1,_=n[0],b=n[y],$=!o;l<=v&&d<=y;)st(h)?h=t[++l]:st(g)?g=t[--v]:ut(h,_)?(m(h,_,r),h=t[++l],_=n[++d]):ut(g,b)?(m(g,b,r),g=t[--v],b=n[--y]):ut(h,b)?(m(h,b,r),$&&C.insertBefore(e,h.elm,C.nextSibling(g.elm)),h=t[++l],b=n[--y]):ut(g,_)?(m(g,_,r),$&&C.insertBefore(e,g.elm,h.elm),g=t[--v],_=n[++d]):(st(a)&&(a=lt(t,l,v)),s=ct(_.key)?a[_.key]:null,st(s)?(C.insertBefore(e,i(_,r),h.elm),_=n[++d]):(c=t[s],c.tag!==_.tag?(C.insertBefore(e,i(_,r),h.elm),_=n[++d]):(m(c,_,r),t[s]=void 0,$&&C.insertBefore(e,_.elm,h.elm),_=n[++d])));l>v?(u=st(n[y+1])?null:n[y+1].elm,f(e,u,n,d,y,r)):d>y&&p(e,t,l,v)}function m(e,t,n,r){if(e!==t){if(t.isStatic&&e.isStatic&&t.key===e.key&&t.isCloned)return void(t.elm=e.elm);var i,o,a=ct(i=t.data);a&&ct(o=i.hook)&&ct(i=o.prepatch)&&i(e,t);var c=t.elm=e.elm,u=e.children,l=t.children;if(a&&s(t)){for(i=0;i<$.update.length;++i)$.update[i](e,t);ct(o)&&ct(i=o.update)&&i(e,t)}if(st(t.text)?ct(u)&&ct(l)?u!==l&&h(c,u,l,n,r):ct(l)?(ct(e.text)&&C.setTextContent(c,""),f(c,null,l,0,l.length-1,n)):ct(u)?p(c,u,0,u.length-1):ct(e.text)&&C.setTextContent(c,""):e.text!==t.text&&C.setTextContent(c,t.text),a){for(i=0;i<$.postpatch.length;++i)$.postpatch[i](e,t);ct(o)&&ct(i=o.postpatch)&&i(e,t)}}}function g(e,t,n){if(n&&e.parent)e.parent.data.pendingInsert=t;else for(var r=0;r<t.length;++r)t[r].data.hook.insert(t[r])}function y(e,t,n){t.elm=e;var r=t.tag,i=t.data,o=t.children;if(ct(i)&&(ct(_=i.hook)&&ct(_=_.init)&&_(t,!0),ct(_=t.child)))return u(t,n),!0;if(ct(r)){if(ct(o)){var s=C.childNodes(e);if(s.length){var l=!0;if(s.length!==o.length)l=!1;else for(var f=0;f<o.length;f++)if(!y(s[f],o[f],n)){l=!1;break}if(!l)return!1}else a(t,o,n)}ct(i)&&c(t,n)}return!0}var _,b,$={},w=e.modules,C=e.nodeOps;for(_=0;_<Di.length;++_)for($[Di[_]]=[],b=0;b<w.length;++b)void 0!==w[b][Di[_]]&&$[Di[_]].push(w[b][Di[_]]);return function(e,n,r,o){var a,c,u=!1,l=[];if(e){var f=ct(e.nodeType);if(!f&&ut(e,n))m(e,n,l,o);else{if(f){if(1===e.nodeType&&e.hasAttribute("server-rendered")&&(e.removeAttribute("server-rendered"),r=!0),r&&y(e,n,l))return g(n,l,!0),e;e=t(e)}if(a=e.elm,c=C.parentNode(a),i(n,l),n.parent&&(n.parent.elm=n.elm,s(n)))for(var v=0;v<$.create.length;++v)$.create[v](Li,n.parent);null!==c?(C.insertBefore(c,n.elm,C.nextSibling(a)),p(c,[e],0,0)):ct(e.tag)&&d(e)}}else u=!0,i(n,l);return g(n,l,u),n.elm}}function dt(e,t,n){var r=t.data.directives;if(r)for(var i=0;i<r.length;i++){var o=r[i],a=Ee(t.context.$options,"directives",o.name,!0);if(a){var s=e&&e.data.directives;s&&(o.oldValue=s[i].value),o.modifiers||(o.modifiers=Mi),n(a,o)}}}function pt(e,t,n){dt(e,t,function(r,i){vt(r,i,n,t,e)})}function vt(e,t,n,r,i){var o=e&&e[n];o&&o(r.elm,t,r,i)}function ht(e,t){if(e.data.attrs||t.data.attrs){var n,r,i,o=t.elm,a=e.data.attrs||{},s=t.data.attrs||{};s.__ob__&&(s=t.data.attrs=u({},s));for(n in s)r=s[n],i=a[n],i!==r&&mt(o,n,r);for(n in a)null==s[n]&&(gi(n)?o.removeAttributeNS(mi,yi(n)):vi(n)||o.removeAttribute(n))}}function mt(e,t,n){hi(t)?_i(n)?e.removeAttribute(t):e.setAttribute(t,t):vi(t)?e.setAttribute(t,_i(n)||"false"===n?"false":"true"):gi(t)?_i(n)?e.removeAttributeNS(mi,yi(t)):e.setAttributeNS(mi,t,n):_i(n)?e.removeAttribute(t):e.setAttribute(t,n)}function gt(e,t){var n=t.elm,r=t.data,i=e.data;if(r.staticClass||r.class||i&&(i.staticClass||i.class)){var o=Fe(t),a=n._transitionClasses;a&&(o=Ue(o,ze(a))),o!==n._prevClass&&(n.setAttribute("class",o),n._prevClass=o)}}function yt(e,t){if(e.data.on||t.data.on){var n=t.data.on||{},r=e.data.on||{},i=t.elm._v_add||(t.elm._v_add=function(e,n,r){t.elm.addEventListener(e,n,r)}),o=t.elm._v_remove||(t.elm._v_remove=function(e,n){t.elm.removeEventListener(e,n)});G(n,r,i,o)}}function _t(e,t){if(e.data.domProps||t.data.domProps){var n,r,i=t.elm,o=e.data.domProps||{},a=t.data.domProps||{};a.__ob__&&(a=t.data.domProps=u({},a));for(n in o)null==a[n]&&(i[n]=void 0);for(n in a)if("textContent"!==n&&"innerHTML"!==n||!t.children||(t.children.length=0),r=a[n],"value"===n){i._value=r;var s=null==r?"":String(r);i.value!==s&&(i.value=s)}else i[n]=r}}function bt(e,t){if(e.data&&e.data.style||t.data.style){var n,r,i=t.elm,o=e.data.style||{},a=t.data.style||{};if("string"==typeof a)return void(i.style.cssText=a);var s=a.__ob__;Array.isArray(a)&&(a=t.data.style=d(a)),s&&(a=t.data.style=u({},a));for(r in o)a[r]||(i.style[Ui(r)]="");for(r in a)n=a[r],n!==o[r]&&(i.style[Ui(r)]=null==n?"":n)}}function $t(e,t){if(e.classList)t.indexOf(" ")>-1?t.split(/\s+/).forEach(function(t){return e.classList.add(t)}):e.classList.add(t);else{var n=" "+e.getAttribute("class")+" ";n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function wt(e,t){if(e.classList)t.indexOf(" ")>-1?t.split(/\s+/).forEach(function(t){return e.classList.remove(t)}):e.classList.remove(t);else{for(var n=" "+e.getAttribute("class")+" ",r=" "+t+" ";n.indexOf(r)>=0;)n=n.replace(r," ");e.setAttribute("class",n.trim())}}function Ct(e){Yi(function(){Yi(e)})}function xt(e,t){(e._transitionClasses||(e._transitionClasses=[])).push(t),$t(e,t)}function kt(e,t){e._transitionClasses&&r(e._transitionClasses,t),wt(e,t)}function At(e,t,n){var r=Ot(e,t),i=r.type,o=r.timeout,a=r.propCount;if(!i)return n();var s=i===Ji?Wi:Gi,c=0,u=function(){e.removeEventListener(s,l),n()},l=function(t){t.target===e&&++c>=a&&u()};setTimeout(function(){c<a&&u()},o+1),e.addEventListener(s,l)}function Ot(e,t){var n,r=window.getComputedStyle(e),i=r[Ki+"Delay"].split(", "),o=r[Ki+"Duration"].split(", "),a=Tt(i,o),s=r[Zi+"Delay"].split(", "),c=r[Zi+"Duration"].split(", "),u=Tt(s,c),l=0,f=0;t===Ji?a>0&&(n=Ji,l=a,f=o.length):t===qi?u>0&&(n=qi,l=u,f=c.length):(l=Math.max(a,u),n=l>0?a>u?Ji:qi:null,f=n?n===Ji?o.length:c.length:0);var d=n===Ji&&Qi.test(r[Ki+"Property"]);return{type:n,timeout:l,propCount:f,hasTransform:d}}function Tt(e,t){return Math.max.apply(null,t.map(function(t,n){return St(t)+St(e[n])}))}function St(e){return 1e3*Number(e.slice(0,-1))}function Et(e){var t=e.elm;t._leaveCb&&(t._leaveCb.cancelled=!0,t._leaveCb());var n=Lt(e.data.transition);if(n&&!t._enterCb&&1===t.nodeType){var r=n.css,i=n.type,o=n.enterClass,a=n.enterActiveClass,s=n.appearClass,c=n.appearActiveClass,u=n.beforeEnter,l=n.enter,f=n.afterEnter,d=n.enterCancelled,p=n.beforeAppear,v=n.appear,h=n.afterAppear,m=n.appearCancelled,g=ti.$vnode,y=g&&g.parent?g.parent.context:ti,_=!y._isMounted||!e.isRootInsert;if(!_||v||""===v){var b=_?s:o,$=_?c:a,w=_?p||u:u,C=_&&"function"==typeof v?v:l,x=_?h||f:f,k=_?m||d:d,A=r!==!1&&!Er,O=C&&(C._length||C.length)>1,T=t._enterCb=Dt(function(){A&&kt(t,$),T.cancelled?(A&&kt(t,b),k&&k(t)):x&&x(t),t._enterCb=null});e.data.show||Z(e.data.hook||(e.data.hook={}),"insert",function(){var n=t.parentNode,r=n&&n._pending&&n._pending[e.key];r&&r.tag===e.tag&&r.elm._leaveCb&&r.elm._leaveCb(),C&&C(t,T)}),w&&w(t),A&&(xt(t,b),xt(t,$),Ct(function(){kt(t,b),T.cancelled||O||At(t,i,T)})),e.data.show&&C&&C(t,T),A||O||T()}}}function jt(e,t){function n(){m.cancelled||(e.data.show||((r.parentNode._pending||(r.parentNode._pending={}))[e.key]=e),u&&u(r),v&&(xt(r,s),xt(r,c),Ct(function(){kt(r,s),m.cancelled||h||At(r,a,m)})),l&&l(r,m),v||h||m())}var r=e.elm;r._enterCb&&(r._enterCb.cancelled=!0,r._enterCb());var i=Lt(e.data.transition);if(!i)return t();if(!r._leaveCb&&1===r.nodeType){var o=i.css,a=i.type,s=i.leaveClass,c=i.leaveActiveClass,u=i.beforeLeave,l=i.leave,f=i.afterLeave,d=i.leaveCancelled,p=i.delayLeave,v=o!==!1&&!Er,h=l&&(l._length||l.length)>1,m=r._leaveCb=Dt(function(){r.parentNode&&r.parentNode._pending&&(r.parentNode._pending[e.key]=null),v&&kt(r,c),m.cancelled?(v&&kt(r,s),d&&d(r)):(t(),f&&f(r)),r._leaveCb=null});p?p(n):n()}}function Lt(e){if(e){if("object"==typeof e){var t={};return e.css!==!1&&u(t,Xi(e.name||"v")),u(t,e),t}return"string"==typeof e?Xi(e):void 0}}function Dt(e){var t=!1;return function(){t||(t=!0,e())}}function Nt(e,t,n){var r=t.value,i=e.multiple;if(!i||Array.isArray(r)){for(var o,a,s=0,c=e.options.length;s<c;s++)if(a=e.options[s],i)o=m(r,Pt(a))>-1,a.selected!==o&&(a.selected=o);else if(h(Pt(a),r))return void(e.selectedIndex!==s&&(e.selectedIndex=s));i||(e.selectedIndex=-1)}}function Mt(e,t){for(var n=0,r=t.length;n<r;n++)if(h(Pt(t[n]),e))return!1;return!0}function Pt(e){return"_value"in e?e._value:e.value}function Rt(e){e.target.composing=!0}function It(e){e.target.composing=!1,Ft(e.target,"input")}function Ft(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function Bt(e){return!e.child||e.data&&e.data.transition?e:Bt(e.child._vnode)}function Ht(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?Ht(W(t.children)):e}function Ut(e){var t={},n=e.$options;for(var r in n.propsData)t[r]=e[r];var i=n._parentListeners;for(var o in i)t[gr(o)]=i[o].fn;return t}function zt(e,t){return/\d-keep-alive$/.test(t.tag)?e("keep-alive"):null}function Vt(e){for(;e=e.parent;)if(e.data.transition)return!0}function Jt(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function qt(e){e.data.newPos=e.elm.getBoundingClientRect()}function Kt(e){var t=e.data.pos,n=e.data.newPos,r=t.left-n.left,i=t.top-n.top;if(r||i){e.data.moved=!0;var o=e.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+i+"px)",o.transitionDuration="0s"}}function Wt(e,t){var n=document.createElement("div");return n.innerHTML='<div a="'+e+'">',n.innerHTML.indexOf(t)>0}function Zt(e){return ho.innerHTML=e,ho.textContent}function Gt(e,t,n){return t&&(e=e.replace(qo,"<").replace(Ko,">")),n&&(e=e.replace(Wo,"\n")),e.replace(Zo,"&").replace(Go,'"')}function Yt(e,t){function n(t){d+=t,e=e.substring(t)}function r(){var t=e.match(wo);if(t){var r={tagName:t[1],attrs:[],start:d};n(t[0].length);for(var i,o;!(i=e.match(Co))&&(o=e.match(_o));)n(o[0].length),r.attrs.push(o);if(i)return r.unarySlash=i[1],n(i[0].length),r.end=d,r}}function i(e){var n=e.tagName,r=e.unarySlash;u&&("p"===s&&xi(n)&&o("",s),Ci(n)&&s===n&&o("",n));for(var i=l(n)||"html"===n&&"head"===s||!!r,a=e.attrs.length,d=new Array(a),p=0;p<a;p++){var v=e.attrs[p];Ao&&v[0].indexOf('""')===-1&&(""===v[3]&&delete v[3],
""===v[4]&&delete v[4],""===v[5]&&delete v[5]);var h=v[3]||v[4]||v[5]||"";d[p]={name:v[1],value:f?Gt(h,t.shouldDecodeTags,t.shouldDecodeNewlines):h}}i||(c.push({tag:n,attrs:d}),s=n,r=""),t.start&&t.start(n,d,i,e.start,e.end)}function o(e,n,r,i){var o;if(null==r&&(r=d),null==i&&(i=d),n){var a=n.toLowerCase();for(o=c.length-1;o>=0&&c[o].tag.toLowerCase()!==a;o--);}else o=0;if(o>=0){for(var u=c.length-1;u>=o;u--)t.end&&t.end(c[u].tag,r,i);c.length=o,s=o&&c[o-1].tag}else"br"===n.toLowerCase()?t.start&&t.start(n,[],!0,r,i):"p"===n.toLowerCase()&&(t.start&&t.start(n,[],!1,r,i),t.end&&t.end(n,r,i))}for(var a,s,c=[],u=t.expectHTML,l=t.isUnaryTag||Cr,f=t.isFromDOM,d=0;e;){if(a=e,s&&Vo(s)){var p=s.toLowerCase(),v=Jo[p]||(Jo[p]=new RegExp("([\\s\\S]*?)(</"+p+"[^>]*>)","i")),h=0,m=e.replace(v,function(e,n,r){return h=r.length,"script"!==p&&"style"!==p&&"noscript"!==p&&(n=n.replace(/<!--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)\]\]>/g,"$1")),t.chars&&t.chars(n),""});d+=e.length-m.length,e=m,o("</"+p+">",p,d-h,d)}else{var g=e.indexOf("<");if(0===g){if(/^<!--/.test(e)){var y=e.indexOf("-->");if(y>=0){n(y+3);continue}}if(/^<!\[/.test(e)){var _=e.indexOf("]>");if(_>=0){n(_+2);continue}}var b=e.match(ko);if(b){n(b[0].length);continue}var $=e.match(xo);if($){var w=d;n($[0].length),o($[0],$[1],w,d);continue}var C=r();if(C){i(C);continue}}var x=void 0;g>=0?(x=e.substring(0,g),n(g)):(x=e,e=""),t.chars&&t.chars(x)}if(e===a)throw new Error("Error parsing template:\n\n"+e)}o()}function Qt(e){function t(){(a||(a=[])).push(e.slice(d,i).trim()),d=i+1}var n,r,i,o,a,s=!1,c=!1,u=0,l=0,f=0,d=0;for(i=0;i<e.length;i++)if(r=n,n=e.charCodeAt(i),s)39===n&&92!==r&&(s=!s);else if(c)34===n&&92!==r&&(c=!c);else if(124!==n||124===e.charCodeAt(i+1)||124===e.charCodeAt(i-1)||u||l||f)switch(n){case 34:c=!0;break;case 39:s=!0;break;case 40:f++;break;case 41:f--;break;case 91:l++;break;case 93:l--;break;case 123:u++;break;case 125:u--}else void 0===o?(d=i+1,o=e.slice(0,i).trim()):t();if(void 0===o?o=e.slice(0,i).trim():0!==d&&t(),a)for(i=0;i<a.length;i++)o=Xt(o,a[i]);return o}function Xt(e,t){var n=t.indexOf("(");if(n<0)return'_f("'+t+'")('+e+")";var r=t.slice(0,n),i=t.slice(n+1);return'_f("'+r+'")('+e+","+i}function en(e,t){var n=t?Xo(t):Yo;if(n.test(e)){for(var r,i,o=[],a=n.lastIndex=0;r=n.exec(e);){i=r.index,i>a&&o.push(JSON.stringify(e.slice(a,i)));var s=Qt(r[1].trim());o.push("_s("+s+")"),a=i+r[0].length}return a<e.length&&o.push(JSON.stringify(e.slice(a))),o.join("+")}}function tn(e){console.error("[Vue parser]: "+e)}function nn(e,t){return e?e.map(function(e){return e[t]}).filter(function(e){return e}):[]}function rn(e,t,n){(e.props||(e.props=[])).push({name:t,value:n})}function on(e,t,n){(e.attrs||(e.attrs=[])).push({name:t,value:n})}function an(e,t,n,r,i){(e.directives||(e.directives=[])).push({name:t,value:n,arg:r,modifiers:i})}function sn(e,t,n,r,i){r&&r.capture&&(delete r.capture,t="!"+t);var o;r&&r.native?(delete r.native,o=e.nativeEvents||(e.nativeEvents={})):o=e.events||(e.events={});var a={value:n,modifiers:r},s=o[t];Array.isArray(s)?i?s.unshift(a):s.push(a):s?o[t]=i?[a,s]:[s,a]:o[t]=a}function cn(e,t,n){var r=un(e,":"+t)||un(e,"v-bind:"+t);if(null!=r)return r;if(n!==!1){var i=un(e,t);if(null!=i)return JSON.stringify(i)}}function un(e,t){var n;if(null!=(n=e.attrsMap[t]))for(var r=e.attrsList,i=0,o=r.length;i<o;i++)if(r[i].name===t){r.splice(i,1);break}return n}function ln(e,t){Oo=t.warn||tn,To=t.getTagNamespace||Cr,So=t.mustUseProp||Cr,Eo=t.isPreTag||Cr,jo=nn(t.modules,"preTransformNode"),Lo=nn(t.modules,"transformNode"),Do=nn(t.modules,"postTransformNode"),No=t.delimiters;var n,r,i=[],o=t.preserveWhitespace!==!1,a=!1,s=!1;return Yt(e,{expectHTML:t.expectHTML,isUnaryTag:t.isUnaryTag,isFromDOM:t.isFromDOM,shouldDecodeTags:t.shouldDecodeTags,shouldDecodeNewlines:t.shouldDecodeNewlines,start:function(e,o,c){function u(e){}var l=r&&r.ns||To(e);t.isIE&&"svg"===l&&(o=On(o));var f={type:1,tag:e,attrsList:o,attrsMap:xn(o),parent:r,children:[]};l&&(f.ns=l),An(f)&&(f.forbidden=!0);for(var d=0;d<jo.length;d++)jo[d](f,t);if(a||(fn(f),f.pre&&(a=!0)),Eo(f.tag)&&(s=!0),a)dn(f);else{hn(f),mn(f),yn(f),pn(f),f.plain=!f.key&&!o.length,vn(f),_n(f),bn(f);for(var p=0;p<Lo.length;p++)Lo[p](f,t);$n(f)}n||(n=f,u(n)),r&&!f.forbidden&&(f.else?gn(f,r):(r.children.push(f),f.parent=r)),c||(r=f,i.push(f));for(var v=0;v<Do.length;v++)Do[v](f,t)},end:function(){var e=i[i.length-1],t=e.children[e.children.length-1];t&&3===t.type&&" "===t.text&&e.children.pop(),i.length-=1,r=i[i.length-1],e.pre&&(a=!1),Eo(e.tag)&&(s=!1)},chars:function(e){if(r&&(e=s||e.trim()?sa(e):o&&r.children.length?" ":"")){var t;!a&&" "!==e&&(t=en(e,No))?r.children.push({type:2,expression:t,text:e}):r.children.push({type:3,text:e})}}}),n}function fn(e){null!=un(e,"v-pre")&&(e.pre=!0)}function dn(e){var t=e.attrsList.length;if(t)for(var n=e.attrs=new Array(t),r=0;r<t;r++)n[r]={name:e.attrsList[r].name,value:JSON.stringify(e.attrsList[r].value)};else e.pre||(e.plain=!0)}function pn(e){var t=cn(e,"key");t&&(e.key=t)}function vn(e){var t=cn(e,"ref");t&&(e.ref=t,e.refInFor=wn(e))}function hn(e){var t;if(t=un(e,"v-for")){var n=t.match(ta);if(!n)return;e.for=n[2].trim();var r=n[1].trim(),i=r.match(na);i?(e.alias=i[1].trim(),e.iterator1=i[2].trim(),i[3]&&(e.iterator2=i[3].trim())):e.alias=r}}function mn(e){var t=un(e,"v-if");t&&(e.if=t),null!=un(e,"v-else")&&(e.else=!0)}function gn(e,t){var n=kn(t.children);n&&n.if&&(n.elseBlock=e)}function yn(e){var t=un(e,"v-once");null!=t&&(e.once=!0)}function _n(e){if("slot"===e.tag)e.slotName=cn(e,"name");else{var t=cn(e,"slot");t&&(e.slotTarget=t)}}function bn(e){var t;(t=cn(e,"is"))&&(e.component=t),null!=un(e,"inline-template")&&(e.inlineTemplate=!0)}function $n(e){var t,n,r,i,o,a,s,c=e.attrsList;for(t=0,n=c.length;t<n;t++)if(r=c[t].name,i=c[t].value,ea.test(r))if(e.hasBindings=!0,a=Cn(r),a&&(r=r.replace(aa,"")),ra.test(r))r=r.replace(ra,""),a&&a.prop&&(s=!0,r=gr(r),"innerHtml"===r&&(r="innerHTML")),s||So(r)?rn(e,r,i):on(e,r,i);else if(ia.test(r))r=r.replace(ia,""),sn(e,r,i,a);else{r=r.replace(ea,"");var u=r.match(oa);u&&(o=u[1])&&(r=r.slice(0,-(o.length+1))),an(e,r,i,o,a)}else on(e,r,JSON.stringify(i))}function wn(e){for(var t=e;t;){if(void 0!==t.for)return!0;t=t.parent}return!1}function Cn(e){var t=e.match(aa);if(t){var n={};return t.forEach(function(e){n[e.slice(1)]=!0}),n}}function xn(e){for(var t={},n=0,r=e.length;n<r;n++)t[e[n].name]=e[n].value;return t}function kn(e){for(var t=e.length;t--;)if(e[t].tag)return e[t]}function An(e){return"style"===e.tag||"script"===e.tag&&(!e.attrsMap.type||"text/javascript"===e.attrsMap.type)}function On(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];ca.test(r.name)||(r.name=r.name.replace(ua,""),t.push(r))}return t}function Tn(e,t){e&&(Mo=la(t.staticKeys||""),Po=t.isReservedTag||function(){return!1},En(e),jn(e,!1))}function Sn(e){return n("type,tag,attrsList,attrsMap,plain,parent,children,attrs"+(e?","+e:""))}function En(e){if(e.static=Ln(e),1===e.type)for(var t=0,n=e.children.length;t<n;t++){var r=e.children[t];En(r),r.static||(e.static=!1)}}function jn(e,t){if(1===e.type){if(e.once||e.static)return e.staticRoot=!0,void(e.staticInFor=t);if(e.children)for(var n=0,r=e.children.length;n<r;n++)jn(e.children[n],!!e.for)}}function Ln(e){return 2!==e.type&&(3===e.type||!(!e.pre&&(e.hasBindings||e.if||e.for||vr(e.tag)||!Po(e.tag)||!Object.keys(e).every(Mo))))}function Dn(e,t){var n=t?"nativeOn:{":"on:{";for(var r in e)n+='"'+r+'":'+Nn(e[r])+",";return n.slice(0,-1)+"}"}function Nn(e){if(e){if(Array.isArray(e))return"["+e.map(Nn).join(",")+"]";if(e.modifiers){var t="",n=[];for(var r in e.modifiers)pa[r]?t+=pa[r]:n.push(r);n.length&&(t=Mn(n)+t);var i=fa.test(e.value)?e.value+"($event)":e.value;return"function($event){"+t+i+"}"}return fa.test(e.value)?e.value:"function($event){"+e.value+"}"}return"function(){}"}function Mn(e){var t=1===e.length?Pn(e[0]):Array.prototype.concat.apply([],e.map(Pn));return Array.isArray(t)?"if("+t.map(function(e){return"$event.keyCode!=="+e}).join("&&")+")return;":"if($event.keyCode!=="+t+")return;"}function Pn(e){return parseInt(e,10)||da[e]||"_k("+JSON.stringify(e)+")"}function Rn(e,t){e.wrapData=function(e){return"_b("+e+","+t.value+(t.modifiers&&t.modifiers.prop?",true":"")+")"}}function In(e,t){var n=Ho,r=Ho=[];Uo=t,Ro=t.warn||tn,Io=nn(t.modules,"transformCode"),Fo=nn(t.modules,"genData"),Bo=t.directives||{};var i=e?Fn(e):'_h("div")';return Ho=n,{render:"with(this){return "+i+"}",staticRenderFns:r}}function Fn(e){if(e.staticRoot&&!e.staticProcessed)return e.staticProcessed=!0,Ho.push("with(this){return "+Fn(e)+"}"),"_m("+(Ho.length-1)+(e.staticInFor?",true":"")+")";if(e.for&&!e.forProcessed)return Un(e);if(e.if&&!e.ifProcessed)return Bn(e);if("template"!==e.tag||e.slotTarget){if("slot"===e.tag)return Wn(e);var t;if(e.component)t=Zn(e);else{var n=zn(e),r=e.inlineTemplate?null:Jn(e);t="_h('"+e.tag+"'"+(n?","+n:"")+(r?","+r:"")+")"}for(var i=0;i<Io.length;i++)t=Io[i](e,t);return t}return Jn(e)||"void 0"}function Bn(e){var t=e.if;return e.ifProcessed=!0,"("+t+")?"+Fn(e)+":"+Hn(e)}function Hn(e){return e.elseBlock?Fn(e.elseBlock):"_e()"}function Un(e){var t=e.for,n=e.alias,r=e.iterator1?","+e.iterator1:"",i=e.iterator2?","+e.iterator2:"";return e.forProcessed=!0,"_l(("+t+"),function("+n+r+i+"){return "+Fn(e)+"})"}function zn(e){if(!e.plain){var t="{",n=Vn(e);n&&(t+=n+","),e.key&&(t+="key:"+e.key+","),e.ref&&(t+="ref:"+e.ref+","),e.refInFor&&(t+="refInFor:true,"),e.component&&(t+='tag:"'+e.tag+'",'),e.slotTarget&&(t+="slot:"+e.slotTarget+",");for(var r=0;r<Fo.length;r++)t+=Fo[r](e);if(e.attrs&&(t+="attrs:{"+Gn(e.attrs)+"},"),e.props&&(t+="domProps:{"+Gn(e.props)+"},"),e.events&&(t+=Dn(e.events)+","),e.nativeEvents&&(t+=Dn(e.nativeEvents,!0)+","),e.inlineTemplate){var i=e.children[0];if(1===i.type){var o=In(i,Uo);t+="inlineTemplate:{render:function(){"+o.render+"},staticRenderFns:["+o.staticRenderFns.map(function(e){return"function(){"+e+"}"}).join(",")+"]}"}}return t=t.replace(/,$/,"")+"}",e.wrapData&&(t=e.wrapData(t)),t}}function Vn(e){var t=e.directives;if(t){var n,r,i,o,a="directives:[",s=!1;for(n=0,r=t.length;n<r;n++){i=t[n],o=!0;var c=Bo[i.name]||va[i.name];c&&(o=!!c(e,i,Ro)),o&&(s=!0,a+='{name:"'+i.name+'"'+(i.value?",value:("+i.value+"),expression:"+JSON.stringify(i.value):"")+(i.arg?',arg:"'+i.arg+'"':"")+(i.modifiers?",modifiers:"+JSON.stringify(i.modifiers):"")+"},")}return s?a.slice(0,-1)+"]":void 0}}function Jn(e){if(e.children.length)return"["+e.children.map(qn).join(",")+"]"}function qn(e){return 1===e.type?Fn(e):Kn(e)}function Kn(e){return 2===e.type?e.expression:JSON.stringify(e.text)}function Wn(e){var t=e.slotName||'"default"',n=Jn(e);return n?"_t("+t+","+n+")":"_t("+t+")"}function Zn(e){var t=Jn(e);return"_h("+e.component+","+zn(e)+(t?","+t:"")+")"}function Gn(e){for(var t="",n=0;n<e.length;n++){var r=e[n];t+='"'+r.name+'":'+r.value+","}return t.slice(0,-1)}function Yn(e,t){var n=ln(e.trim(),t);Tn(n,t);var r=In(n,t);return{ast:n,render:r.render,staticRenderFns:r.staticRenderFns}}function Qn(e,t){var n=(t.warn||tn,un(e,"class"));n&&(e.staticClass=JSON.stringify(n));var r=cn(e,"class",!1);r&&(e.classBinding=r)}function Xn(e){var t="";return e.staticClass&&(t+="staticClass:"+e.staticClass+","),e.classBinding&&(t+="class:"+e.classBinding+","),t}function er(e){var t=cn(e,"style",!1);t&&(e.styleBinding=t)}function tr(e){return e.styleBinding?"style:("+e.styleBinding+"),":""}function nr(e,t,n){zo=n;var r=t.value,i=t.modifiers,o=e.tag,a=e.attrsMap.type;if("select"===o)return ar(e,r);if("input"===o&&"checkbox"===a)rr(e,r);else{if("input"!==o||"radio"!==a)return or(e,r,i);ir(e,r)}}function rr(e,t){var n=cn(e,"value")||"null",r=cn(e,"true-value")||"true",i=cn(e,"false-value")||"false";rn(e,"checked","Array.isArray("+t+")?_i("+t+","+n+")>-1:_q("+t+","+r+")"),sn(e,"change","var $$a="+t+",$$el=$event.target,$$c=$$el.checked?("+r+"):("+i+");if(Array.isArray($$a)){var $$v="+n+",$$i=_i($$a,$$v);if($$c){$$i<0&&("+t+"=$$a.concat($$v))}else{$$i>-1&&("+t+"=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{"+t+"=$$c}",null,!0)}function ir(e,t){var n=cn(e,"value")||"null";rn(e,"checked","_q("+t+","+n+")"),sn(e,"change",t+"="+n,null,!0)}function or(e,t,n){var r=e.attrsMap.type,i=n||{},o=i.lazy,a=i.number,s=i.trim,c=o||Sr&&"range"===r?"change":"input",u=!o&&"range"!==r,l="input"===e.tag||"textarea"===e.tag,f=l?"$event.target.value"+(s?".trim()":""):"$event",d=a||"number"===r?t+"=_n("+f+")":t+"="+f;if(l&&u&&(d="if($event.target.composing)return;"+d),rn(e,"value",l?"_s("+t+")":"("+t+")"),sn(e,c,d,null,!0),u)return!0}function ar(e,t){var n=t+'=Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){return "_value" in o ? o._value : o.value})'+(null==e.attrsMap.multiple?"[0]":"");return sn(e,"change",n,null,!0),!0}function sr(e,t){t.value&&rn(e,"textContent","_s("+t.value+")")}function cr(e,t){t.value&&rn(e,"innerHTML","_s("+t.value+")")}function ur(e,t){return t=t?u(u({},ba),t):ba,Yn(e,t)}function lr(e,t,n){var r=(t&&t.warn||ai,t&&t.delimiters?String(t.delimiters)+e:e);if(_a[r])return _a[r];var i={},o=ur(e,t);i.render=fr(o.render);var a=o.staticRenderFns.length;i.staticRenderFns=new Array(a);for(var s=0;s<a;s++)i.staticRenderFns[s]=fr(o.staticRenderFns[s]);return _a[r]=i}function fr(e){try{return new Function(e)}catch(e){return p}}function dr(e){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}var pr,vr=n("slot,component",!0),hr=Object.prototype.hasOwnProperty,mr=/-(\w)/g,gr=a(function(e){return e.replace(mr,function(e,t){return t?t.toUpperCase():""})}),yr=a(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}),_r=/([^-])([A-Z])/g,br=a(function(e){return e.replace(_r,"$1-$2").replace(_r,"$1-$2").toLowerCase()}),$r=Object.prototype.toString,wr="[object Object]",Cr=function(){return!1},xr={optionMergeStrategies:Object.create(null),silent:!1,devtools:!1,errorHandler:null,ignoredElements:null,keyCodes:Object.create(null),isReservedTag:Cr,isUnknownElement:Cr,getTagNamespace:p,mustUseProp:Cr,_assetTypes:["component","directive","filter"],_lifecycleHooks:["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated"],_maxUpdateCount:100,_isServer:!1},kr=/[^\w\.\$]/,Ar="__proto__"in{},Or="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),Tr=Or&&window.navigator.userAgent.toLowerCase(),Sr=Tr&&/msie|trident/.test(Tr),Er=Tr&&Tr.indexOf("msie 9.0")>0,jr=Tr&&Tr.indexOf("edge/")>0,Lr=Tr&&Tr.indexOf("android")>0,Dr=Tr&&/iphone|ipad|ipod|ios/.test(Tr),Nr=Or&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,Mr=function(){function e(){r=!1;var e=n.slice(0);n.length=0;for(var t=0;t<e.length;t++)e[t]()}var t,n=[],r=!1;if("undefined"!=typeof Promise&&b(Promise)){var i=Promise.resolve();t=function(){i.then(e),Dr&&setTimeout(p)}}else if("undefined"==typeof MutationObserver||!b(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())t=setTimeout;else{var o=1,a=new MutationObserver(e),s=document.createTextNode(String(o));a.observe(s,{characterData:!0}),t=function(){o=(o+1)%2,s.data=String(o)}}return function(i,o){var a=o?function(){i.call(o)}:i;n.push(a),r||(r=!0,t(e,0))}}();pr="undefined"!=typeof Set&&b(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return void 0!==this.set[e]},e.prototype.add=function(e){this.set[e]=1},e.prototype.clear=function(){this.set=Object.create(null)},e}();var Pr=0,Rr=function(){this.id=Pr++,this.subs=[]};Rr.prototype.addSub=function(e){this.subs.push(e)},Rr.prototype.removeSub=function(e){r(this.subs,e)},Rr.prototype.depend=function(){Rr.target&&Rr.target.addDep(this)},Rr.prototype.notify=function(){for(var e=this.subs.slice(),t=0,n=e.length;t<n;t++)e[t].update()},Rr.target=null;var Ir=[],Fr=[],Br={},Hr=!1,Ur=!1,zr=0,Vr=0,Jr=function(e,t,n,r){void 0===r&&(r={}),this.vm=e,e._watchers.push(this),this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.expression=t.toString(),this.cb=n,this.id=++Vr,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new pr,this.newDepIds=new pr,"function"==typeof t?this.getter=t:(this.getter=_(t),this.getter||(this.getter=function(){})),this.value=this.lazy?void 0:this.get()};Jr.prototype.get=function(){$(this);var e=this.getter.call(this.vm,this.vm);return this.deep&&A(e),w(),this.cleanupDeps(),e},Jr.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},Jr.prototype.cleanupDeps=function(){for(var e=this,t=this.deps.length;t--;){var n=e.deps[t];e.newDepIds.has(n.id)||n.removeSub(e)}var r=this.depIds;this.depIds=this.newDepIds,this.newDepIds=r,this.newDepIds.clear(),r=this.deps,this.deps=this.newDeps,this.newDeps=r,this.newDeps.length=0},Jr.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():k(this)},Jr.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||l(e)||this.deep){var t=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,t)}catch(e){if(!xr.errorHandler)throw e;xr.errorHandler.call(null,e,this.vm)}else this.cb.call(this.vm,e,t)}}},Jr.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},Jr.prototype.depend=function(){for(var e=this,t=this.deps.length;t--;)e.deps[t].depend()},Jr.prototype.teardown=function(){var e=this;if(this.active){this.vm._isBeingDestroyed||this.vm._vForRemoving||r(this.vm._watchers,this);for(var t=this.deps.length;t--;)e.deps[t].removeSub(e);this.active=!1}};var qr=new pr,Kr=Array.prototype,Wr=Object.create(Kr);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(e){var t=Kr[e];y(Wr,e,function(){for(var n=arguments,r=arguments.length,i=new Array(r);r--;)i[r]=n[r];var o,a=t.apply(this,i),s=this.__ob__;switch(e){case"push":o=i;break;case"unshift":o=i;break;case"splice":o=i.slice(2)}return o&&s.observeArray(o),s.dep.notify(),a})});var Zr=Object.getOwnPropertyNames(Wr),Gr={shouldConvert:!0,isSettingProps:!1},Yr=function(e){if(this.value=e,this.dep=new Rr,this.vmCount=0,y(e,"__ob__",this),Array.isArray(e)){var t=Ar?O:T;t(e,Wr,Zr),this.observeArray(e)}else this.walk(e)};Yr.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)E(e,t[n],e[t[n]])},Yr.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)S(e[t])};var Qr={enumerable:!0,configurable:!0,get:p,set:p},Xr=function(e,t,n,r,i,o,a,s){this.tag=e,this.data=t,this.children=n,this.text=r,this.elm=i,this.ns=o,this.context=a,this.key=t&&t.key,this.componentOptions=s,this.child=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1},ei=function(){var e=new Xr;return e.text="",e.isComment=!0,e},ti=null,ni={init:oe,prepatch:ae,insert:se,destroy:ce},ri=Object.keys(ni),ii=0;$e(we),H(we),be(we),ee(we),ge(we);var oi,ai=p,si=xr.optionMergeStrategies;si.data=function(e,t,n){return n?e||t?function(){var r="function"==typeof t?t.call(n):t,i="function"==typeof e?e.call(n):void 0;return r?Ce(r,i):i}:void 0:t?"function"!=typeof t?e:e?function(){return Ce(t.call(this),e.call(this))}:t:e},xr._lifecycleHooks.forEach(function(e){si[e]=xe}),xr._assetTypes.forEach(function(e){si[e+"s"]=ke}),si.watch=function(e,t){if(!t)return e;if(!e)return t;var n={};u(n,e);for(var r in t){var i=n[r],o=t[r];i&&!Array.isArray(i)&&(i=[i]),n[r]=i?i.concat(o):[o]}return n},si.props=si.methods=si.computed=function(e,t){if(!t)return e;if(!e)return t;var n=Object.create(null);return u(n,e),u(n,t),n};var ci=function(e,t){return void 0===t?e:t},ui=Object.freeze({defineReactive:E,_toString:e,toNumber:t,makeMap:n,isBuiltInTag:vr,remove:r,hasOwn:i,isPrimitive:o,cached:a,camelize:gr,capitalize:yr,hyphenate:br,bind:s,toArray:c,extend:u,isObject:l,isPlainObject:f,toObject:d,noop:p,no:Cr,genStaticKeys:v,looseEqual:h,looseIndexOf:m,isReserved:g,def:y,parsePath:_,hasProto:Ar,inBrowser:Or,UA:Tr,isIE:Sr,isIE9:Er,isEdge:jr,isAndroid:Lr,isIOS:Dr,devtools:Nr,nextTick:Mr,get _Set(){return pr},mergeOptions:Se,resolveAsset:Ee,warn:ai,formatComponentName:oi,validateProp:je}),li={name:"keep-alive",abstract:!0,created:function(){this.cache=Object.create(null)},render:function(){var e=W(this.$slots.default);if(e&&e.componentOptions){var t=e.componentOptions,n=null==e.key?t.Ctor.cid+"::"+t.tag:e.key;this.cache[n]?e.child=this.cache[n].child:this.cache[n]=e,e.data.keepAlive=!0}return e},destroyed:function(){var e=this;for(var t in this.cache){var n=e.cache[t];te(n.child,"deactivated"),n.child.$destroy()}}},fi={KeepAlive:li};Ie(we),Object.defineProperty(we.prototype,"$isServer",{get:function(){return xr._isServer}}),we.version="2.0.1";var di,pi=n("value,selected,checked,muted"),vi=n("contenteditable,draggable,spellcheck"),hi=n("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),mi="http://www.w3.org/1999/xlink",gi=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},yi=function(e){return gi(e)?e.slice(6,e.length):""},_i=function(e){return null==e||e===!1},bi={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},$i=n("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template"),wi=n("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr",!0),Ci=n("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source",!0),xi=n("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track",!0),ki=n("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font,font-face,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Ai=function(e){return"pre"===e},Oi=function(e){return $i(e)||ki(e)},Ti=Object.create(null),Si=Object.freeze({createElement:Ke,createElementNS:We,createTextNode:Ze,createComment:Ge,insertBefore:Ye,removeChild:Qe,appendChild:Xe,parentNode:et,nextSibling:tt,tagName:nt,setTextContent:rt,childNodes:it,setAttribute:ot}),Ei={create:function(e,t){at(t)},update:function(e,t){e.data.ref!==t.data.ref&&(at(e,!0),at(t))},destroy:function(e){at(e,!0)}},ji={},Li=new Xr("",ji,[]),Di=["create","update","postpatch","remove","destroy"],Ni={create:function(e,t){var n=!1;dt(e,t,function(r,i){vt(r,i,"bind",t,e),r.inserted&&(n=!0)}),n&&Z(t.data.hook||(t.data.hook={}),"insert",function(){pt(e,t,"inserted")})},update:function(e,t){pt(e,t,"update"),e.data.directives&&!t.data.directives&&pt(e,e,"unbind")},postpatch:function(e,t){pt(e,t,"componentUpdated")},destroy:function(e){pt(e,e,"unbind")}},Mi=Object.create(null),Pi=[Ei,Ni],Ri={create:ht,update:ht},Ii={create:gt,update:gt},Fi={create:yt,update:yt},Bi={create:_t,update:_t},Hi=["Webkit","Moz","ms"],Ui=a(function(e){if(di=di||document.createElement("div"),e=gr(e),"filter"!==e&&e in di.style)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<Hi.length;n++){var r=Hi[n]+t;if(r in di.style)return r}}),zi={create:bt,update:bt},Vi=Or&&!Er,Ji="transition",qi="animation",Ki="transition",Wi="transitionend",Zi="animation",Gi="animationend";Vi&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Ki="WebkitTransition",Wi="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Zi="WebkitAnimation",Gi="webkitAnimationEnd"));var Yi=Or&&window.requestAnimationFrame||setTimeout,Qi=/\b(transform|all)(,|$)/,Xi=a(function(e){return{enterClass:e+"-enter",leaveClass:e+"-leave",appearClass:e+"-enter",enterActiveClass:e+"-enter-active",leaveActiveClass:e+"-leave-active",appearActiveClass:e+"-enter-active"}}),eo=Or?{create:function(e,t){t.data.show||Et(t)},remove:function(e,t){e.data.show?t():jt(e,t)}}:{},to=[Ri,Ii,Fi,Bi,zi,eo],no=to.concat(Pi),ro=ft({nodeOps:Si,modules:no});Er&&document.addEventListener("selectionchange",function(){var e=document.activeElement;e&&e.vmodel&&Ft(e,"input")});var io={bind:function(e,t,n){if("select"===n.tag){if(Nt(e,t,n.context),Sr||jr){var r=function(){Nt(e,t,n.context)};Mr(r),setTimeout(r,0)}}else"textarea"!==n.tag&&"text"!==e.type||(Lr||(e.addEventListener("compositionstart",Rt),e.addEventListener("compositionend",It)),Er&&(e.vmodel=!0))},componentUpdated:function(e,t,n){if("select"===n.tag){Nt(e,t,n.context);var r=e.multiple?t.value.some(function(t){return Mt(t,e.options)}):Mt(t.value,e.options);r&&Ft(e,"change")}}},oo={bind:function(e,t,n){var r=t.value;n=Bt(n);var i=n.data&&n.data.transition;r&&i&&!Er&&Et(n);var o="none"===e.style.display?"":e.style.display;e.style.display=r?o:"none",e.__vOriginalDisplay=o},update:function(e,t,n){var r=t.value,i=t.oldValue;if(r!==i){n=Bt(n);var o=n.data&&n.data.transition;o&&!Er?r?(Et(n),e.style.display=e.__vOriginalDisplay):jt(n,function(){e.style.display="none"}):e.style.display=r?e.__vOriginalDisplay:"none"}}},ao={model:io,show:oo},so={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String},co={name:"transition",props:so,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(function(e){return e.tag}),n.length)){var r=this.mode,i=n[0];if(Vt(this.$vnode))return i;var o=Ht(i);if(!o)return i;if(this._leaving)return zt(e,i);o.key=null==o.key||o.isStatic?"__v"+(o.tag+this._uid)+"__":o.key;var a=(o.data||(o.data={})).transition=Ut(this),s=this._vnode,c=Ht(s);if(o.data.directives&&o.data.directives.some(function(e){return"show"===e.name})&&(o.data.show=!0),c&&c.data&&c.key!==o.key){var l=c.data.transition=u({},a);if("out-in"===r)return this._leaving=!0,Z(l,"afterLeave",function(){t._leaving=!1,t.$forceUpdate()}),zt(e,i);if("in-out"===r){var f,d=function(){f()};Z(a,"afterEnter",d),Z(a,"enterCancelled",d),Z(l,"delayLeave",function(e){f=e})}}return i}}},uo=u({tag:String,moveClass:String},so);delete uo.mode;var lo={props:uo,render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],o=this.children=[],a=Ut(this),s=0;s<i.length;s++){var c=i[s];c.tag&&null!=c.key&&0!==String(c.key).indexOf("__vlist")&&(o.push(c),n[c.key]=c,(c.data||(c.data={})).transition=a)}if(r){for(var u=[],l=[],f=0;f<r.length;f++){var d=r[f];d.data.transition=a,d.data.pos=d.elm.getBoundingClientRect(),n[d.key]?u.push(d):l.push(d)}this.kept=e(t,null,u),this.removed=l}return e(t,null,o)},beforeUpdate:function(){this.__patch__(this._vnode,this.kept,!1,!0),this._vnode=this.kept},updated:function(){var e=this.prevChildren,t=this.moveClass||this.name+"-move";if(e.length&&this.hasMove(e[0].elm,t)){e.forEach(Jt),e.forEach(qt),e.forEach(Kt);document.body.offsetHeight;e.forEach(function(e){if(e.data.moved){var n=e.elm,r=n.style;xt(n,t),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(Wi,n._moveCb=function e(r){r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(Wi,e),n._moveCb=null,kt(n,t))})}})}},methods:{hasMove:function(e,t){if(!Vi)return!1;if(null!=this._hasMove)return this._hasMove;xt(e,t);var n=Ot(e);return kt(e,t),this._hasMove=n.hasTransform}}},fo={Transition:co,TransitionGroup:lo};we.config.isUnknownElement=Je,we.config.isReservedTag=Oi,we.config.getTagNamespace=Ve,we.config.mustUseProp=pi,u(we.options.directives,ao),u(we.options.components,fo),we.prototype.__patch__=xr._isServer?p:ro,we.prototype.$mount=function(e,t){return e=e&&!xr._isServer?qe(e):void 0,this._mount(e,t)},setTimeout(function(){xr.devtools&&Nr&&Nr.emit("init",we)},0);var po=!!Or&&Wt(">","&gt;"),vo=!!Or&&Wt("\n","&#10;"),ho=document.createElement("div"),mo=/([^\s"'<>\/=]+)/,go=/(?:=)/,yo=[/"([^"]*)"+/.source,/'([^']*)'+/.source,/([^\s"'=<>`]+)/.source],_o=new RegExp("^\\s*"+mo.source+"(?:\\s*("+go.source+")\\s*(?:"+yo.join("|")+"))?"),bo="[a-zA-Z_][\\w\\-\\.]*",$o="((?:"+bo+"\\:)?"+bo+")",wo=new RegExp("^<"+$o),Co=/^\s*(\/?)>/,xo=new RegExp("^<\\/"+$o+"[^>]*>"),ko=/^<!DOCTYPE [^>]+>/i,Ao=!1;"x".replace(/x(.)?/g,function(e,t){Ao=""===t});var Oo,To,So,Eo,jo,Lo,Do,No,Mo,Po,Ro,Io,Fo,Bo,Ho,Uo,zo,Vo=n("script,style",!0),Jo={},qo=/&lt;/g,Ko=/&gt;/g,Wo=/&#10;/g,Zo=/&amp;/g,Go=/&quot;/g,Yo=/\{\{((?:.|\n)+?)\}\}/g,Qo=/[-.*+?^${}()|[\]\/\\]/g,Xo=a(function(e){var t=e[0].replace(Qo,"\\$&"),n=e[1].replace(Qo,"\\$&");return new RegExp(t+"((?:.|\\n)+?)"+n,"g")}),ea=/^v-|^@|^:/,ta=/(.*)\s+(?:in|of)\s+(.*)/,na=/\(([^,]*),([^,]*)(?:,([^,]*))?\)/,ra=/^:|^v-bind:/,ia=/^@|^v-on:/,oa=/:(.*)$/,aa=/\.[^\.]+/g,sa=a(Zt),ca=/^xmlns:NS\d+/,ua=/^NS\d+:/,la=a(Sn),fa=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\]|\[\d+\]|\[[A-Za-z_$][\w$]*\])*$/,da={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},pa={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:"if($event.target !== $event.currentTarget)return;"},va={bind:Rn,cloak:p},ha=(new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b"),{staticKeys:["staticClass"],transformNode:Qn,genData:Xn}),ma={transformNode:er,genData:tr},ga=[ha,ma],ya={model:nr,text:sr,html:cr},_a=Object.create(null),ba={isIE:Sr,expectHTML:!0,modules:ga,staticKeys:v(ga),directives:ya,isReservedTag:Oi,isUnaryTag:wi,mustUseProp:pi,getTagNamespace:Ve,isPreTag:Ai},$a=a(function(e){var t=qe(e);return t&&t.innerHTML}),wa=we.prototype.$mount;return we.prototype.$mount=function(e,t){if(e=e&&qe(e),e===document.body||e===document.documentElement)return this;var n=this.$options;if(!n.render){var r=n.template,i=!1;if(r)if("string"==typeof r)"#"===r.charAt(0)&&(i=!0,r=$a(r));else{if(!r.nodeType)return this;i=!0,r=r.innerHTML}else e&&(i=!0,r=dr(e));if(r){var o=lr(r,{warn:ai,isFromDOM:i,shouldDecodeTags:po,shouldDecodeNewlines:vo,delimiters:n.delimiters},this),a=o.render,s=o.staticRenderFns;n.render=a,n.staticRenderFns=s}}return wa.call(this,e,t)},we.compile=lr,we});/*!
 * vue-resource v1.0.3
 * https://github.com/vuejs/vue-resource
 * Released under the MIT License.
 */

!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.VueResource=n()}(this,function(){"use strict";function t(t){this.state=it,this.value=void 0,this.deferred=[];var n=this;try{t(function(t){n.resolve(t)},function(t){n.reject(t)})}catch(t){n.reject(t)}}function n(t,n){t instanceof Promise?this.promise=t:this.promise=new Promise(t.bind(n)),this.context=n}function e(t){at=t.util,ct=t.config.debug||!t.config.silent}function o(t){"undefined"!=typeof console&&ct&&console.warn("[VueResource warn]: "+t)}function r(t){"undefined"!=typeof console&&console.error(t)}function i(t,n){return at.nextTick(t,n)}function u(t){return t.replace(/^\s*|\s*$/g,"")}function s(t){return t?t.toLowerCase():""}function c(t){return t?t.toUpperCase():""}function a(t){return"string"==typeof t}function f(t){return t===!0||t===!1}function h(t){return"function"==typeof t}function p(t){return null!==t&&"object"==typeof t}function l(t){return p(t)&&Object.getPrototypeOf(t)==Object.prototype}function d(t){return"undefined"!=typeof Blob&&t instanceof Blob}function m(t){return"undefined"!=typeof FormData&&t instanceof FormData}function y(t,e,o){var r=n.resolve(t);return arguments.length<2?r:r.then(e,o)}function v(t,n,e){return e=e||{},h(e)&&(e=e.call(n)),g(t.bind({$vm:n,$options:e}),t,{$options:e})}function b(t,n){var e,o;if(t&&"number"==typeof t.length)for(e=0;e<t.length;e++)n.call(t[e],t[e],e);else if(p(t))for(o in t)t.hasOwnProperty(o)&&n.call(t[o],t[o],o);return t}function g(t){var n=ft.call(arguments,1);return n.forEach(function(n){x(t,n,!0)}),t}function w(t){var n=ft.call(arguments,1);return n.forEach(function(n){for(var e in n)void 0===t[e]&&(t[e]=n[e])}),t}function T(t){var n=ft.call(arguments,1);return n.forEach(function(n){x(t,n)}),t}function x(t,n,e){for(var o in n)e&&(l(n[o])||ht(n[o]))?(l(n[o])&&!l(t[o])&&(t[o]={}),ht(n[o])&&!ht(t[o])&&(t[o]=[]),x(t[o],n[o],e)):void 0!==n[o]&&(t[o]=n[o])}function j(t,n){var e=n(t);return a(t.root)&&!e.match(/^(https?:)?\//)&&(e=t.root+"/"+e),e}function E(t,n){var e=Object.keys(k.options.params),o={},r=n(t);return b(t.params,function(t,n){e.indexOf(n)===-1&&(o[n]=t)}),o=k.params(o),o&&(r+=(r.indexOf("?")==-1?"?":"&")+o),r}function O(t,n,e){var o=P(t),r=o.expand(n);return e&&e.push.apply(e,o.vars),r}function P(t){var n=["+","#",".","/",";","?","&"],e=[];return{vars:e,expand:function(o){return t.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(t,r,i){if(r){var u=null,s=[];if(n.indexOf(r.charAt(0))!==-1&&(u=r.charAt(0),r=r.substr(1)),r.split(/,/g).forEach(function(t){var n=/([^:\*]*)(?::(\d+)|(\*))?/.exec(t);s.push.apply(s,C(o,u,n[1],n[2]||n[3])),e.push(n[1])}),u&&"+"!==u){var c=",";return"?"===u?c="&":"#"!==u&&(c=u),(0!==s.length?u:"")+s.join(c)}return s.join(",")}return U(i)})}}}function C(t,n,e,o){var r=t[e],i=[];if($(r)&&""!==r)if("string"==typeof r||"number"==typeof r||"boolean"==typeof r)r=r.toString(),o&&"*"!==o&&(r=r.substring(0,parseInt(o,10))),i.push(R(n,r,A(n)?e:null));else if("*"===o)Array.isArray(r)?r.filter($).forEach(function(t){i.push(R(n,t,A(n)?e:null))}):Object.keys(r).forEach(function(t){$(r[t])&&i.push(R(n,r[t],t))});else{var u=[];Array.isArray(r)?r.filter($).forEach(function(t){u.push(R(n,t))}):Object.keys(r).forEach(function(t){$(r[t])&&(u.push(encodeURIComponent(t)),u.push(R(n,r[t].toString())))}),A(n)?i.push(encodeURIComponent(e)+"="+u.join(",")):0!==u.length&&i.push(u.join(","))}else";"===n?i.push(encodeURIComponent(e)):""!==r||"&"!==n&&"?"!==n?""===r&&i.push(""):i.push(encodeURIComponent(e)+"=");return i}function $(t){return void 0!==t&&null!==t}function A(t){return";"===t||"&"===t||"?"===t}function R(t,n,e){return n="+"===t||"#"===t?U(n):encodeURIComponent(n),e?encodeURIComponent(e)+"="+n:n}function U(t){return t.split(/(%[0-9A-Fa-f]{2})/g).map(function(t){return/%[0-9A-Fa-f]/.test(t)||(t=encodeURI(t)),t}).join("")}function S(t){var n=[],e=O(t.url,t.params,n);return n.forEach(function(n){delete t.params[n]}),e}function k(t,n){var e,o=this||{},r=t;return a(t)&&(r={url:t,params:n}),r=g({},k.options,o.$options,r),k.transforms.forEach(function(t){e=I(t,e,o.$vm)}),e(r)}function I(t,n,e){return function(o){return t.call(e,o,n)}}function H(t,n,e){var o,r=ht(n),i=l(n);b(n,function(n,u){o=p(n)||ht(n),e&&(u=e+"["+(i||o?u:"")+"]"),!e&&r?t.add(n.name,n.value):o?H(t,n,u):t.add(u,n)})}function L(t){return new n(function(n){var e=new XDomainRequest,o=function(o){var r=o.type,i=0;"load"===r?i=200:"error"===r&&(i=500),n(t.respondWith(e.responseText,{status:i}))};t.abort=function(){return e.abort()},e.open(t.method,t.getUrl()),e.timeout=0,e.onload=o,e.onerror=o,e.ontimeout=o,e.onprogress=function(){},e.send(t.getBody())})}function N(t,n){!f(t.crossOrigin)&&q(t)&&(t.crossOrigin=!0),t.crossOrigin&&(yt||(t.client=L),delete t.emulateHTTP),n()}function q(t){var n=k.parse(k(t));return n.protocol!==mt.protocol||n.host!==mt.host}function B(t,n){m(t.body)?t.headers.delete("Content-Type"):(p(t.body)||ht(t.body))&&(t.emulateJSON?(t.body=k.params(t.body),t.headers.set("Content-Type","application/x-www-form-urlencoded")):t.body=JSON.stringify(t.body)),n(function(t){return Object.defineProperty(t,"data",{get:function(){return this.body},set:function(t){this.body=t}}),t.bodyText?y(t.text(),function(n){var e=t.headers.get("Content-Type");if(a(e)&&0===e.indexOf("application/json"))try{t.body=JSON.parse(n)}catch(n){t.body=null}else t.body=n;return t}):t})}function J(t){return new n(function(n){var e,o,r=t.jsonp||"callback",i="_jsonp"+Math.random().toString(36).substr(2),u=null;e=function(e){var r=e.type,s=0;"load"===r&&null!==u?s=200:"error"===r&&(s=500),n(t.respondWith(u,{status:s})),delete window[i],document.body.removeChild(o)},t.params[r]=i,window[i]=function(t){u=JSON.stringify(t)},o=document.createElement("script"),o.src=t.getUrl(),o.type="text/javascript",o.async=!0,o.onload=e,o.onerror=e,document.body.appendChild(o)})}function D(t,n){"JSONP"==t.method&&(t.client=J),n(function(n){if("JSONP"==t.method)return y(n.json(),function(t){return n.body=t,n})})}function M(t,n){h(t.before)&&t.before.call(this,t),n()}function X(t,n){t.emulateHTTP&&/^(PUT|PATCH|DELETE)$/i.test(t.method)&&(t.headers.set("X-HTTP-Method-Override",t.method),t.method="POST"),n()}function F(t,n){var e=pt({},Z.headers.common,t.crossOrigin?{}:Z.headers.custom,Z.headers[s(t.method)]);b(e,function(n,e){t.headers.has(e)||t.headers.set(e,n)}),n()}function W(t,n){var e;t.timeout&&(e=setTimeout(function(){t.abort()},t.timeout)),n(function(t){clearTimeout(e)})}function G(t){return new n(function(n){var e=new XMLHttpRequest,o=function(o){var r=t.respondWith("response"in e?e.response:e.responseText,{status:1223===e.status?204:e.status,statusText:1223===e.status?"No Content":u(e.statusText)});b(u(e.getAllResponseHeaders()).split("\n"),function(t){r.headers.append(t.slice(0,t.indexOf(":")),t.slice(t.indexOf(":")+1))}),n(r)};t.abort=function(){return e.abort()},t.progress&&("GET"===t.method?e.addEventListener("progress",t.progress):/^(POST|PUT)$/i.test(t.method)&&e.upload.addEventListener("progress",t.progress)),e.open(t.method,t.getUrl(),!0),"responseType"in e&&(e.responseType="blob"),t.credentials===!0&&(e.withCredentials=!0),t.headers.forEach(function(t,n){e.setRequestHeader(n,t)}),e.timeout=0,e.onload=o,e.onerror=o,e.send(t.getBody())})}function V(t){function e(e){return new n(function(n){function s(){r=i.pop(),h(r)?r.call(t,e,c):(o("Invalid interceptor of type "+typeof r+", must be a function"),c())}function c(e){if(h(e))u.unshift(e);else if(p(e))return u.forEach(function(n){e=y(e,function(e){return n.call(t,e)||e})}),void y(e,n);s()}s()},t)}var r,i=[_],u=[];return p(t)||(t=null),e.use=function(t){i.push(t)},e}function _(t,n){var e=t.client||G;n(e(t))}function z(t,n){return Object.keys(t).reduce(function(t,e){return s(n)===s(e)?e:t},null)}function K(t){if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return u(t)}function Q(t){return new n(function(n){var e=new FileReader;e.readAsText(t),e.onload=function(){n(e.result)}})}function Y(t){return 0===t.type.indexOf("text")||t.type.indexOf("json")!==-1}function Z(t){var e=this||{},o=V(e.$vm);return w(t||{},e.$options,Z.options),Z.interceptors.forEach(function(t){o.use(t)}),o(new wt(t)).then(function(t){return t.ok?t:n.reject(t)},function(t){return t instanceof Error&&r(t),n.reject(t)})}function tt(t,n,e,o){var r=this||{},i={};return e=pt({},tt.actions,e),b(e,function(e,u){e=g({url:t,params:pt({},n)},o,e),i[u]=function(){return(r.$http||Z)(nt(e,arguments))}}),i}function nt(t,n){var e,o=pt({},t),r={};switch(n.length){case 2:r=n[0],e=n[1];break;case 1:/^(POST|PUT|PATCH)$/i.test(o.method)?e=n[0]:r=n[0];break;case 0:break;default:throw"Expected up to 4 arguments [params, body], got "+n.length+" arguments"}return o.body=e,o.params=pt({},o.params,r),o}function et(t){et.installed||(e(t),t.url=k,t.http=Z,t.resource=tt,t.Promise=n,Object.defineProperties(t.prototype,{$url:{get:function(){return v(t.url,this,this.$options.url)}},$http:{get:function(){return v(t.http,this,this.$options.http)}},$resource:{get:function(){return t.resource.bind(this)}},$promise:{get:function(){var n=this;return function(e){return new t.Promise(e,n)}}}}))}var ot=0,rt=1,it=2;t.reject=function(n){return new t(function(t,e){e(n)})},t.resolve=function(n){return new t(function(t,e){t(n)})},t.all=function(n){return new t(function(e,o){function r(t){return function(o){u[t]=o,i+=1,i===n.length&&e(u)}}var i=0,u=[];0===n.length&&e(u);for(var s=0;s<n.length;s+=1)t.resolve(n[s]).then(r(s),o)})},t.race=function(n){return new t(function(e,o){for(var r=0;r<n.length;r+=1)t.resolve(n[r]).then(e,o)})};var ut=t.prototype;ut.resolve=function(t){var n=this;if(n.state===it){if(t===n)throw new TypeError("Promise settled with itself.");var e=!1;try{var o=t&&t.then;if(null!==t&&"object"==typeof t&&"function"==typeof o)return void o.call(t,function(t){e||n.resolve(t),e=!0},function(t){e||n.reject(t),e=!0})}catch(t){return void(e||n.reject(t))}n.state=ot,n.value=t,n.notify()}},ut.reject=function(t){var n=this;if(n.state===it){if(t===n)throw new TypeError("Promise settled with itself.");n.state=rt,n.value=t,n.notify()}},ut.notify=function(){var t=this;i(function(){if(t.state!==it)for(;t.deferred.length;){var n=t.deferred.shift(),e=n[0],o=n[1],r=n[2],i=n[3];try{t.state===ot?r("function"==typeof e?e.call(void 0,t.value):t.value):t.state===rt&&("function"==typeof o?r(o.call(void 0,t.value)):i(t.value))}catch(t){i(t)}}})},ut.then=function(n,e){var o=this;return new t(function(t,r){o.deferred.push([n,e,t,r]),o.notify()})},ut.catch=function(t){return this.then(void 0,t)},"undefined"==typeof Promise&&(window.Promise=t),n.all=function(t,e){return new n(Promise.all(t),e)},n.resolve=function(t,e){return new n(Promise.resolve(t),e)},n.reject=function(t,e){return new n(Promise.reject(t),e)},n.race=function(t,e){return new n(Promise.race(t),e)};var st=n.prototype;st.bind=function(t){return this.context=t,this},st.then=function(t,e){return t&&t.bind&&this.context&&(t=t.bind(this.context)),e&&e.bind&&this.context&&(e=e.bind(this.context)),new n(this.promise.then(t,e),this.context)},st.catch=function(t){return t&&t.bind&&this.context&&(t=t.bind(this.context)),new n(this.promise.catch(t),this.context)},st.finally=function(t){return this.then(function(n){return t.call(this),n},function(n){return t.call(this),Promise.reject(n)})};var ct=!1,at={},ft=[].slice,ht=Array.isArray,pt=Object.assign||T,lt=document.documentMode,dt=document.createElement("a");k.options={url:"",root:null,params:{}},k.transforms=[S,E,j],k.params=function(t){var n=[],e=encodeURIComponent;return n.add=function(t,n){h(n)&&(n=n()),null===n&&(n=""),this.push(e(t)+"="+e(n))},H(n,t),n.join("&").replace(/%20/g,"+")},k.parse=function(t){return lt&&(dt.href=t,t=dt.href),dt.href=t,{href:dt.href,protocol:dt.protocol?dt.protocol.replace(/:$/,""):"",port:dt.port,host:dt.host,hostname:dt.hostname,pathname:"/"===dt.pathname.charAt(0)?dt.pathname:"/"+dt.pathname,search:dt.search?dt.search.replace(/^\?/,""):"",hash:dt.hash?dt.hash.replace(/^#/,""):""}};var mt=k.parse(location.href),yt="withCredentials"in new XMLHttpRequest,vt=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},bt=function(){function t(n){var e=this;vt(this,t),this.map={},b(n,function(t,n){return e.append(n,t)})}return t.prototype.has=function(t){return null!==z(this.map,t)},t.prototype.get=function(t){var n=this.map[z(this.map,t)];return n?n[0]:null},t.prototype.getAll=function(t){return this.map[z(this.map,t)]||[]},t.prototype.set=function(t,n){this.map[K(z(this.map,t)||t)]=[u(n)]},t.prototype.append=function(t,n){var e=this.getAll(t);e.length?e.push(u(n)):this.set(t,n)},t.prototype.delete=function(t){delete this.map[z(this.map,t)]},t.prototype.forEach=function(t,n){var e=this;b(this.map,function(o,r){b(o,function(o){return t.call(n,o,r,e)})})},t}(),gt=function(){function t(n,e){var o=e.url,r=e.headers,i=e.status,u=e.statusText;vt(this,t),this.url=o,this.ok=i>=200&&i<300,this.status=i||0,this.statusText=u||"",this.headers=new bt(r),this.body=n,a(n)?this.bodyText=n:d(n)&&(this.bodyBlob=n,Y(n)&&(this.bodyText=Q(n)))}return t.prototype.blob=function(){return y(this.bodyBlob)},t.prototype.text=function(){return y(this.bodyText)},t.prototype.json=function(){return y(this.text(),function(t){return JSON.parse(t)})},t}(),wt=function(){function t(n){vt(this,t),this.body=null,this.params={},pt(this,n,{method:c(n.method||"GET")}),this.headers instanceof bt||(this.headers=new bt(this.headers))}return t.prototype.getUrl=function(){return k(this)},t.prototype.getBody=function(){return this.body},t.prototype.respondWith=function(t,n){return new gt(t,pt(n||{},{url:this.getUrl()}))},t}(),Tt={"X-Requested-With":"XMLHttpRequest"},xt={Accept:"application/json, text/plain, */*"},jt={"Content-Type":"application/json;charset=utf-8"};return Z.options={},Z.headers={put:jt,post:jt,patch:jt,delete:jt,custom:Tt,common:xt},Z.interceptors=[M,W,X,B,D,F,N],["get","delete","head","jsonp"].forEach(function(t){Z[t]=function(n,e){return this(pt(e||{},{url:n,method:t}))}}),["post","put","patch"].forEach(function(t){Z[t]=function(n,e,o){return this(pt(o||{},{url:n,method:t,body:e}))}}),tt.actions={get:{method:"GET"},save:{method:"POST"},query:{method:"GET"},update:{method:"PUT"},remove:{method:"DELETE"},delete:{method:"DELETE"}},"undefined"!=typeof window&&window.Vue&&window.Vue.use(et),et});/* matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas, David Knight. Dual MIT/BSD license */
window.matchMedia||(window.matchMedia=function(){var b=(window.styleMedia||window.media);if(!b){var c=document.createElement("style"),a=document.getElementsByTagName("script")[0],d=null;c.type="text/css";c.id="matchmediajs-test";a.parentNode.insertBefore(c,a);d=("getComputedStyle" in window)&&window.getComputedStyle(c,null)||c.currentStyle;b={matchMedium:function(e){var f="@media "+e+"{ #matchmediajs-test { width: 1px; } }";if(c.styleSheet){c.styleSheet.cssText=f}else{c.textContent=f}return d.width==="1px"}}}return function(e){return{matches:b.matchMedium(e||"all"),media:e||"all"}}}());var GV=GV||{};GV.Buttons={};GV.util=(function(){return{getUrlParam:function(b){var a=new RegExp("[\\?&]"+b+"=([^&#]*)").exec(window.location.href);GV.util.log("GV.util.getUrlParam");return a?decodeURIComponent(a[1]):null},getUrlParamFromString:function(a,c){var b=new RegExp("[\\?&]"+c+"=([^&#]*)").exec(a);if(!b){return null}return b[1]||null},log:function(a,d){var b="log";if(!GV.config.debug){return}switch(d){case 0:b="warn";break;case 1:case 2:b="error";break;default:b="info";break}try{console[b](a+" - "+new Date())}catch(c){}},msgBox:function(a){window.alert(a)},getXMLold:function(b,e){var a=b.url,c=b.data,d=b.method;$.ajax({url:a,dataType:(GV.util.isBrowserIE())?"text":"xml",data:c,method:d||"GET"}).done(function(f){try{var g=f;if(GV.util.isBrowserIE()){var j=new ActiveXObject("Microsoft.XMLDOM");j.async="false";j.loadXML(f);g=j}e(g)}catch(h){GV.util.log(h,2)}})},getXML:function(b,d){function a(e){try{var f=e.body;if(GV.util.isBrowserIE()){var h=new ActiveXObject("Microsoft.XMLDOM");h.async="false";h.loadXML(e.body);f=h}else{var j=new DOMParser();f=j.parseFromString(e.body,"text/xml")}d(f)}catch(g){GV.util.log(g,2)}}function c(e){GV.util.log(e,2)}Vue.http.get(b.url,{params:b.data,headers:{Accept:"text/plain"}}).then(a,c)},parseXML:function(c){GV.util.log("GV.util.parseXML");try{var b=null;if(window.DOMParser&&window.XSLTProcessor){var d=new DOMParser();b=d.parseFromString(c,"text/xml")}else{b=new ActiveXObject("Msxml2.DOMDocument.3.0");b.async=false;b.loadXML(c)}return b}catch(a){GV.util.log("GV.util.parseXml: errore parsing xml - "+a.message,1)}},isPointInLig:function(b,f){GV.util.log("GV.util.isPointInLig");if(!b||!f){return false}var a=7.4,e=43.7,d=10.1,c=44.8;return(b>a)&&(b<d)&&(f>e)&&(f<c)},getParamString:function(d,a,b){var e=[];for(var c in d){e.push(encodeURIComponent(b?c.toUpperCase():c)+"="+encodeURIComponent(d[c]))}return((!a||a.indexOf("?")===-1)?"?":"&")+e.join("&")},template:function(b,a){var c=/\{ *([\w_\-]+) *\}/g;return b.replace(c,function(f,d){var e=a[d];if(e===undefined){throw new Error("No value provided for variable "+f)}else{if(typeof e==="function"){e=e(a)}}return e})},getZoomFromScaleDenom:function(a){return _.findIndex(GV.globals.BASE_SCALES,function(b){return a>b})},getScaleLabelsFromZoom:function(a){return GV.globals.BASE_SCALE_LABELS[a]},getScaleFromZoom:function(a){return GV.globals.BASE_SCALES[a]},endsWith:function(b,a){return b.indexOf(a,b.length-a.length)!==-1},isTouch:function(){return window.matchMedia("(pointer: coarse)").matches},isBrowserIE:function(){return navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.indexOf("Trident")>0||navigator.userAgent.indexOf("Edge")>0},setDrag:function(){interact(".draggable").draggable({inertia:true,restrict:{restriction:"parent",endOnly:true,elementRect:{top:0,left:0,bottom:1,right:1}},autoScroll:true,onmove:a,onend:function(c){var b=c.target.querySelector("p");b&&(b.textContent="moved a distance of "+(Math.sqrt(c.dx*c.dx+c.dy*c.dy)|0)+"px")}});function a(c){var d=c.target,b=(parseFloat(d.getAttribute("data-x"))||0)+c.dx,e=(parseFloat(d.getAttribute("data-y"))||0)+c.dy;d.style.webkitTransform=d.style.transform="translate("+b+"px, "+e+"px)";d.setAttribute("data-x",b);d.setAttribute("data-y",e)}window.dragMoveListener=a}}})();GV.globals={DEFAULT_PROXY:"/geoservices/proxy/proxy.jsp?url=",RL_MAP_CONFIG_SERVICE:"http://geoportale.regione.liguria.it/geoservices/REST/config/map/",RL_CREATE_SLD_SERVICE:"http://geoportale.regione.liguria.it/geoservices/REST/config/create_sld/",RL_METADATA_URL:"/geoservices/REST/metadata/scheda_xml/",MAX_BOUNDS:L.latLngBounds(L.latLng(43.4,7.3),L.latLng(44.8,10.5)),INFO_WMS_MAX_FEATURES:10,SMALL_SCREEN:window.matchMedia("(max-width: 700px)").matches,BASE_SCALES:[591657550.5,295828775.3,147914387.6,73957193.82,36978596.91,18489298.45,9244649.227,4622324.614,2311162.307,1155581.153,577790.5767,288895.2884,144447.6442,72223.82209,36111.91104,18055.95552,9027.977761,4513.98888,2256.99444,1128.49722],BASE_SCALE_LABELS:{8:"1:1.600.000",9:"1:800.000",10:"1:400.000",11:"1:200.000",12:"1:100.000",13:"1:50.000",14:"1:25.000",15:"1:12.500",16:"1:6.250",17:"1:3.125",18:"1:1.560",19:"1:800",20:"1:400"}};Vue.component("gv-app",{template:'<div id="gv-container"><gv-map ref="gv-map"></gv-map><gv-legend ref="gv-legend" v-show="showLegend" :showAddMap="showAddMap" :showInfoMap="showInfoMap"></gv-legend><div v-show="showTitle" id="gv-title">{{this.getTitle()}}</div></div>',data:function(){return GV.config},computed:{showTitle:function(){return(GV.config.application.layout.title&&!GV.globals.SMALL_SCREEN)},showLegend:function(){return(GV.config.getButton("legend")&&GV.config.getButtonOption("legend","show"))?true:false},showAddMap:function(){return GV.config.getButtonOption("legend","showAddMap")},showInfoMap:function(){return GV.config.getButtonOption("legend","showInfoMap")}},created:function(){GV.app=this},mounted:function(){GV.util.log("gv-app: mounted");this.addToolbars(GV.config.application.layout.toolbar);if(GV.config.application.mapOptions&&GV.config.application.mapOptions.click){if(GV.config.application.mapOptions.click==="info"&&!GV.util.isTouch()){GV.infoWmsManager.activate()}}if(GV.config.maps.length>0){_.each(GV.config.maps,function(a){GV.app.addMap(a)})}if(GV.config.idMap){this.addRlMap(GV.config.idMap,GV.config.application.callback)}else{if(GV.config.application.callback){GV.config.application.callback(this)}}},methods:{getTitle:function(){if(GV.config.application.layout.title==="{map.title}"){return this.mapTitle}else{return GV.config.application.layout.title}},getMaps:function(){return this.maps},addToolbars:function(){if(GV.config.application.layout.toolbar){var a=GV.config.application.layout.toolbar;_.each(a,function(c){var b=c.position||"topleft";_.each(c.items,function(d){d.options=d.options||{};d.options.position=d.options.position||b;this.addButton(d)},this)},this)}},addButton:function(b){if(GV.Buttons[b.name]){var a=GV.Buttons[b.name](b.options,GV.map);if(a){a.name=b.name;a.addTo(GV.map)}}else{GV.util.log("Bottone "+b.name+" non esistente")}},addRlMap:function(a,b){if(!a||a==="null"){GV.util.log("addRlMap: prametro idMap mancante",2);return}this.$http.get(GV.globals.RL_MAP_CONFIG_SERVICE+a).then(function(c){if(!c.data.success){GV.util.log("Errore Caricamento Configurazione Mappa: "+c.data.message,2);return}GV.config.addMapConfig(c.data.data);GV.app.addMap(c.data.data);if(b){b(GV.app)}},function(c){GV.util.log(c,2)})},addMap:function(a){this.mapTitle=a.name;GV.map.loadLayers(a.layers);if(a.extent_3857){GV.map.setInitialExtent(a.extent_3857)}}}});Vue.component("gv-iframe-panel",{template:'<div v-show="visible" :class="cls"><div class="gv-panel-title gv-bgcolor">{{title}}<button class="gv-close" type="button" @click="closePanel"></button></div><div><div class="gv-html-panel-body"><iframe id="iframe" :src="src" :height="height" :width="width" style="border: none;" ></iframe></div></div></div>',props:["html","src","visible","cls","title","width","height"],methods:{closePanel:function(){this.$el.parentNode.removeChild(this.$el)}},mounted:function(){var a=this;if(a.html){setTimeout(function(){a.$el.querySelector("#iframe").contentDocument.body.innerHTML=a.html},1)}}});Vue.component("gv-legend",{template:'<div id="gv-legend"><div id="gv-legend-title"><div class="gv-panel-title gv-bgcolor"><b>LEGENDA</b><button class="gv-close" type="button" @click="hideLegend"></button><button v-show="showAddMap" class="gv-legend-add ms ms-layers-add" title="Aggiungi Mappa" type="button" @click="addMap"></button></div></div><div id="gv-legend-body"><ul v-for="map in maps" class="gv-list-group"><li class="gv-list-legend-map-item">{{map.name}}<span v-show="showInfoMap" class="gv-legend-map-info ms ms-information" title="Scheda metadati" @click="showMapInfoPanel(map)"></span></li><ul class="gv-list-group"><li v-for="layer in map.layers" :layer="layer" :class="getClass(layer)"><img class="gv-legend-layer-icon" :src="iconUrl(layer)" width="24px" height="24px" @click="showLegendPanel(layer)"><span class="gv-layer-visibility-span"><input type="checkbox" class="gv-layer-visibility-cb" v-model="layer.visible" @click="setLayerVisible(layer, $event)"></span><span class="gv-layer-title-span">{{layer.legend.label}}</span></li></ul></ul></div></div>',props:["showAddMap","showInfoMap"],data:function(){return{maps:GV.config.maps}},computed:{},methods:{hideLegend:function(a){GV.config.setButtonOption("legend","show",false)},showMapInfoPanel:function(a){alert(a.id)},addMap:function(){alert("add map")},iconUrl:function(a){return a.legend.icon},getClass:function(a){return(a.inRange)?"gv-list-legend-layer-item":"gv-list-legend-layer-disabled-item"},setLayerVisible:function(a,b){GV.map.setLayerVisible(a,b.currentTarget.checked)},showLegendPanel:function(e){if(e.inRange&&(e.multiClasse||e.legend.popUpFlag)){var b=null,d=null,g,a;if(e.legend.popUpUrl&&e.legend.popUpFlag){b=e.legend.popUpUrl;g=(GV.util.SMALL_SCREEN)?400:600;a=(GV.util.SMALL_SCREEN)?400:600}else{if(e.multiClasse){if(e.flagGeoserver){b=e.wmsParams.url+"LAYER="+e.name+"&REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&";g=400;a=350}else{var c=e.classes;d="<table width=100% border=0>";_.each(c,function(h){d+="<tr>";d+='<td width=30><img src="'+h.legendIcon+'"></td>';d+="<td >"+h.legendLabel+"</td>";d+="</tr>"});d+="</table>"}}}var f=new Vue({template:'<gv-iframe-panel v-draggable visible="true" :src="src" :html="html" :height="height" :width="width" :cls="cls" :title="title"></gv-iframe-panel>',data:{title:"LEGENDA - "+e.legend.label,src:b,html:d,width:g,height:a,cls:"gv-legend-multi"},mixins:[GV.dynamicAddedComp]})}}}});Vue.component("gv-map",{template:'<div id= "gv-map"></div>',mounted:function(){GV.util.log("gv-map: mounted");GV.map=new GV.Map()}});Vue.component("gv-wms-info-list",{template:'<div v-show="visible" :class="cls"><div class="gv-panel-title gv-bgcolor">Risultato Info<button class="gv-close" type="button" @click="closePanel"></button></div><div class="gv-html-panel-body"><ul class="gv-list-group"><li v-for="item in items" class="gv-info-wms-list-item"><span class="gv-info-wms-list-item-span" @click="featureInfo(item)">{{item.label}} ( {{item.layer.legend.label}} )</span></li></ul></div></div>',props:["cls","items","visible"],methods:{closePanel:function(){this.$el.parentNode.removeChild(this.$el);GV.map.getLayerByName("InfoWmsHilite").clearLayers()},featureInfo:function(a){GV.infoWmsManager.showFeatureInfo(a)}}});Vue.directive("draggable",{inserted:function(a,b,c){a.className+=" draggable"}});GV.Buttons.baselayers=function(a,b){if(GV.globals.SMALL_SCREEN){return null}return L.control.baseLayersSwitcher(b.baseLayers,[],{position:a.position}).addTo(b)};GV.Buttons.fullscreen=function(a,b){return L.control.fullscreen(a)};GV.Buttons.geocoder=function(a,b){return new L.Control.Geocoder(a)};GV.Buttons.legend=function(b,c){if(GV.globals.SMALL_SCREEN){GV.config.setButtonOption("legend","show",false)}var a=_.extend(b,{leafletClasses:true,states:[{stateName:"print",onClick:function(d,e){GV.config.setButtonOption("legend","show",true)},title:"Legenda",icon:"ms ms-layers"}]});return L.easyButton(a)};GV.Buttons.locate=function(a,b){return new L.Control.Locate(a)};GV.Buttons.navbar=function(a,b){if(GV.util.isTouch()){return null}return L.control.navbar(a)};GV.Buttons.print=function(b,c){if(GV.globals.SMALL_SCREEN){return null}var a=_.extend(b,{leafletClasses:true,states:[{stateName:"print",onClick:function(d,e){console.log("print")},title:"Stampa",icon:"fa-print"}]});return L.easyButton(a)};GV.Buttons.search=function(a,c){var b=[];_.each(a.layers,function(d){var e=c.getLayerByName(d);if(e){b.push(e)}});if(b.length===0){GV.util.log("bottone search: layer non trovato.",2);return}a.layer=L.layerGroup(b);return new L.Control.Search(a)};GV.Buttons.zoom=function(a,b){if(GV.util.isTouch()){return null}return L.control.zoom(a)};GV.config=(function(){var a=21;return{debug:false,idMap:null,application:{},baseLayers:[{type:"ESRI_IMAGERY",visible:true}],maps:[],set:function(b){this.debug=b.debug;if(b.application){this.application=b.application}this.application.layout=b.application.layout||{};this.application.proxy=b.application.proxy||GV.globals.DEFAULT_PROXY;if(b.baseLayers){this.baseLayers=b.baseLayers}if(b.maps){b.maps.forEach(function(c){GV.config.addMapConfig(c)})}this.idMap=b.idMap},getAllLayersConfig:function(){var b=[];_.each(this.maps,function(c){_.each(c.layers,function(d){b.push(d)})});return b},setLayerAttribute:function(c,d,e){var b=null;_.each(this.maps,function(g){var f=g.layers;_.each(f,function(h){if(h.name===c){h[d]=e}})})},addMapConfig:function(b){_.each(b.layers,function(c){if(c.minScale===0){c.minScale=591657550}c.zIndex=a++;if(GV.map){c.inRange=GV.map.layerInRange(c)}else{c.inRange=true}});b.layers.reverse();this.maps.unshift(b)},getLayerConfig:function(c){var b=null;_.each(this.maps,function(e){var d=e.layers;b=_.find(d,function(f){return f.name===c})});if(b){return b}},getButton:function(b){var c=null;_.each(this.application.layout.toolbar,function(d){_.each(d.items,function(e){if(e.name===b){c=e}},this)},this);return c},getButtonOption:function(b,c){var d=null;_.each(this.application.layout.toolbar,function(e){_.each(e.items,function(f){if(f.name===b){d=f.options[c]}},this)},this);return d},setButtonOption:function(b,c,e){var d=null;_.each(this.application.layout.toolbar,function(f){_.each(f.items,function(g){if(g.name===b){g.options[c]=e}},this)},this);return d}}}());L.Control.BaseLayersSwitcher=L.Control.extend({options:{collapsed:true,position:"topright",autoZIndex:true,hideSingleBase:false},initialize:function(d,c,a){L.setOptions(this,a);this._layers=[];this._lastZIndex=0;this._handlingClick=false;for(var b in d){this._addLayer(d[b],b)}for(b in c){this._addLayer(c[b],b,true)}},onAdd:function(a){this._initLayout();this._update();this._map=a;a.on("zoomend",this._checkDisabledLayers,this);return this._container},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++){this._layers[a].layer.off("add remove",this._onLayerChange,this)}},addBaseLayer:function(b,a){this._addLayer(b,a);return(this._map)?this._update():this},addOverlay:function(b,a){this._addLayer(b,a,true);return(this._map)?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var b=this._getLayer(L.stamp(a));if(b){this._layers.splice(this._layers.indexOf(b),1)}return(this._map)?this._update():this},expand:function(){L.DomUtil.addClass(this._container,"leaflet-control-layers-expanded");this._form.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);if(a<this._form.clientHeight){L.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar");this._form.style.height=a+"px"}else{L.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar")}this._checkDisabledLayers();return this},collapse:function(){L.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded");return this},_initLayout:function(){var b="leaflet-control-layers",a=this._container=L.DomUtil.create("div",b);a.setAttribute("aria-haspopup",true);L.DomEvent.disableClickPropagation(a);if(!L.Browser.touch){L.DomEvent.disableScrollPropagation(a)}var d=this._form=L.DomUtil.create("form",b+"-list");if(this.options.collapsed){if(!L.Browser.android){L.DomEvent.on(a,{mouseenter:this.expand,mouseleave:this.collapse},this)}var c=this._layersLink=L.DomUtil.create("a","ms ms-globe "+b+"-toggle",a);c.href="#";c.title="Layers";if(L.Browser.touch){L.DomEvent.on(c,"click",L.DomEvent.stop).on(c,"click",this.expand,this)}else{L.DomEvent.on(c,"focus",this.expand,this)}L.DomEvent.on(d,"click",function(){setTimeout(L.bind(this._onInputClick,this),0)},this);this._map.on("click",this.collapse,this)}else{this.expand()}this._baseLayersList=L.DomUtil.create("div",b+"-base",d);this._separator=L.DomUtil.create("div",b+"-separator",d);this._overlaysList=L.DomUtil.create("div",b+"-overlays",d);a.appendChild(d)},_getLayer:function(b){for(var a=0;a<this._layers.length;a++){if(this._layers[a]&&L.stamp(this._layers[a].layer)===b){return this._layers[a]}}},_addLayer:function(c,b,a){c.on("add remove",this._onLayerChange,this);this._layers.push({layer:c,name:b,overlay:a});if(this.options.autoZIndex&&c.setZIndex){this._lastZIndex++;c.setZIndex(this._lastZIndex)}},_update:function(){if(!this._container){return this}L.DomUtil.empty(this._baseLayersList);L.DomUtil.empty(this._overlaysList);var a,d,c,e,b=0;for(c=0;c<this._layers.length;c++){e=this._layers[c];this._addItem(e);d=d||e.overlay;a=a||!e.overlay;b+=!e.overlay?1:0}if(this.options.hideSingleBase){a=a&&b>1;this._baseLayersList.style.display=a?"":"none"}this._separator.style.display=d&&a?"":"none";return this},_onLayerChange:function(c){if(!this._handlingClick){this._update()}var b=this._getLayer(L.stamp(c.target));var a=b.overlay?(c.type==="add"?"overlayadd":"overlayremove"):(c.type==="add"?"baselayerchange":null);if(a){this._map.fire(a,b)}},_createRadioElement:function(a,d){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(d?' checked="checked"':"")+"/>";var b=document.createElement("div");b.innerHTML=c;return b.firstChild},_addItem:function(g){var d=document.createElement("label"),f=this._map.hasLayer(g.layer),b;if(g.overlay){b=document.createElement("input");b.type="checkbox";b.className="leaflet-control-layers-selector";b.defaultChecked=f}else{b=this._createRadioElement("leaflet-base-layers",f)}b.layerId=L.stamp(g.layer);L.DomEvent.on(b,"click",this._onInputClick,this);var c=document.createElement("span");c.innerHTML="&nbsp;&nbsp"+g.name;var e=document.createElement("div");d.appendChild(e);e.appendChild(b);e.appendChild(c);var a=g.overlay?this._overlaysList:this._baseLayersList;a.appendChild(d);this._checkDisabledLayers();return d},_onInputClick:function(){var b=this._form.getElementsByTagName("input"),c,g,a;var e=[],d=[];this._handlingClick=true;for(var f=b.length-1;f>=0;f--){c=b[f];g=this._getLayer(c.layerId).layer;a=this._map.hasLayer(g);if(c.checked&&!a){e.push(g)}else{if(!c.checked&&a){d.push(g)}}}for(f=0;f<d.length;f++){this._map.removeLayer(d[f])}for(f=0;f<e.length;f++){this._map.addLayer(e[f])}this._handlingClick=false;this._refocusOnMap()},_checkDisabledLayers:function(){var a=this._form.getElementsByTagName("input"),b,d,e=this._map.getZoom();for(var c=a.length-1;c>=0;c--){b=a[c];d=this._getLayer(b.layerId).layer;b.disabled=(d.options.minZoom!==undefined&&e<d.options.minZoom)||(d.options.maxZoom!==undefined&&e>d.options.maxZoom)}},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}});L.control.baseLayersSwitcher=function(c,b,a){return new L.Control.BaseLayersSwitcher(c,b,a)};(function(){L.Control.EasyBar=L.Control.extend({options:{position:"topleft",id:null,leafletClasses:true},initialize:function(e,c){if(c){L.Util.setOptions(this,c)}this._buildContainer();this._buttons=[];for(var d=0;d<e.length;d++){e[d]._bar=this;e[d]._container=e[d].button;this._buttons.push(e[d]);this.container.appendChild(e[d].button)}},_buildContainer:function(){this._container=this.container=L.DomUtil.create("div","");this.options.leafletClasses&&L.DomUtil.addClass(this.container,"leaflet-bar easy-button-container leaflet-control");this.options.id&&(this.container.id=this.options.id)},enable:function(){L.DomUtil.addClass(this.container,"enabled");L.DomUtil.removeClass(this.container,"disabled");this.container.setAttribute("aria-hidden","false");return this},disable:function(){L.DomUtil.addClass(this.container,"disabled");L.DomUtil.removeClass(this.container,"enabled");this.container.setAttribute("aria-hidden","true");return this},onAdd:function(){return this.container},addTo:function(f){this._map=f;for(var d=0;d<this._buttons.length;d++){this._buttons[d]._map=f}var c=this._container=this.onAdd(f),g=this.getPosition(),e=f._controlCorners[g];L.DomUtil.addClass(c,"leaflet-control");if(g.indexOf("bottom")!==-1){e.insertBefore(c,e.firstChild)}else{e.appendChild(c)}return this}});L.easyBar=function(){var c=[L.Control.EasyBar];for(var d=0;d<arguments.length;d++){c.push(arguments[d])}return new (Function.prototype.bind.apply(L.Control.EasyBar,c))};L.Control.EasyButton=L.Control.extend({options:{position:"topleft",id:null,type:"replace",states:[],leafletClasses:true,tagName:"button"},initialize:function(d,f,e,g){this.options.states=[];if(g!=null){this.options.id=g}this.storage={};if(typeof arguments[arguments.length-1]==="object"){L.Util.setOptions(this,arguments[arguments.length-1])}if(this.options.states.length===0&&typeof d==="string"&&typeof f==="function"){this.options.states.push({icon:d,onClick:f,title:typeof e==="string"?e:""})}this._states=[];for(var c=0;c<this.options.states.length;c++){this._states.push(new b(this.options.states[c],this))}this._buildButton();this._activateState(this._states[0])},_buildButton:function(){this.button=L.DomUtil.create(this.options.tagName,"");if(this.tagName==="button"){this.button.type="button"}if(this.options.id){this.button.id=this.options.id}if(this.options.leafletClasses){L.DomUtil.addClass(this.button,"leaflet-bar-part leaflet-interactive easy-button gv-bgcolor")}L.DomEvent.addListener(this.button,"dblclick",L.DomEvent.stop);L.DomEvent.addListener(this.button,"mousedown",L.DomEvent.stop);L.DomEvent.addListener(this.button,"click",function(d){L.DomEvent.stop(d);this._currentState.onClick(this,this._map?this._map:null);this._map.getContainer().focus()},this);if(this.options.type=="replace"){this.button.appendChild(this._currentState.icon)}else{for(var c=0;c<this._states.length;c++){this.button.appendChild(this._states[c].icon)}}},_currentState:{stateName:"unnamed",icon:(function(){return document.createElement("span")})()},_states:null,state:function(c){if(typeof c=="string"){this._activateStateNamed(c)}else{if(typeof c=="number"){this._activateState(this._states[c])}}return this},_activateStateNamed:function(d){for(var c=0;c<this._states.length;c++){if(this._states[c].stateName==d){this._activateState(this._states[c])}}},_activateState:function(d){if(d===this._currentState){return}else{if(this.options.type=="replace"){this.button.appendChild(d.icon);this.button.removeChild(this._currentState.icon)}if(d.title){this.button.title=d.title}else{this.button.removeAttribute("title")}for(var c=0;c<this._states.length;c++){L.DomUtil.removeClass(this._states[c].icon,this._currentState.stateName+"-active");L.DomUtil.addClass(this._states[c].icon,d.stateName+"-active")}L.DomUtil.removeClass(this.button,this._currentState.stateName+"-active");L.DomUtil.addClass(this.button,d.stateName+"-active");this._currentState=d}},enable:function(){L.DomUtil.addClass(this.button,"enabled");L.DomUtil.removeClass(this.button,"disabled");this.button.setAttribute("aria-hidden","false");return this},disable:function(){L.DomUtil.addClass(this.button,"disabled");L.DomUtil.removeClass(this.button,"enabled");this.button.setAttribute("aria-hidden","true");return this},removeFrom:function(c){this._container.parentNode.removeChild(this._container);this._map=null;return this},onAdd:function(){var c=L.easyBar([this],{position:this.options.position,leafletClasses:this.options.leafletClasses});this._container=c.container;return this._container}});L.easyButton=function(){var c=Array.prototype.concat.apply([L.Control.EasyButton],arguments);return new (Function.prototype.bind.apply(L.Control.EasyButton,c))};function b(c,d){this.title=c.title;this.stateName=c.stateName?c.stateName:"unnamed-state";this.icon=L.DomUtil.create("span","");L.DomUtil.addClass(this.icon,"button-state state-"+this.stateName.replace(/(^\s*|\s*$)/g,""));this.icon.innerHTML=a(c.icon);this.onClick=L.Util.bind(c.onClick?c.onClick:function(){},d)}function a(d){var c;if(d.match(/[&;=<>"']/)){c=d}else{d=d.replace(/(^\s*|\s*$)/g,"");c=L.DomUtil.create("span","");if(d.indexOf("fa-")===0){L.DomUtil.addClass(c,"fa "+d)}else{if(d.indexOf("glyphicon-")===0){L.DomUtil.addClass(c,"glyphicon "+d)}else{L.DomUtil.addClass(c,d)}}c=c.outerHTML}return c}})();L.Control.Fullscreen=L.Control.extend({options:{position:"topleft",title:{"false":"Schermo intero","true":"Esci da Schermo intero"}},onAdd:function(b){var a=L.DomUtil.create("div","leaflet-control-fullscreen leaflet-bar leaflet-control");this.link=L.DomUtil.create("a","ms ms-max-extent",a);this.link.href="#";this._map=b;this._map.on("fullscreenchange",this._toggleTitle,this);this._toggleTitle();L.DomEvent.on(this.link,"click",this._click,this);return a},_click:function(a){L.DomEvent.stopPropagation(a);L.DomEvent.preventDefault(a);this._map.toggleFullscreen(this.options)},_toggleTitle:function(){this.link.title=this.options.title[this._map.isFullscreen()]}});L.Map.include({isFullscreen:function(){return this._isFullscreen||false},toggleFullscreen:function(b){var a=this.getContainer();if(this.isFullscreen()){if(b&&b.pseudoFullscreen){this._disablePseudoFullscreen(a)}else{if(document.exitFullscreen){document.exitFullscreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitCancelFullScreen){document.webkitCancelFullScreen()}else{if(document.msExitFullscreen){document.msExitFullscreen()}else{this._disablePseudoFullscreen(a)}}}}}}else{if(b&&b.pseudoFullscreen){this._enablePseudoFullscreen(a)}else{if(a.requestFullscreen){a.requestFullscreen()}else{if(a.mozRequestFullScreen){a.mozRequestFullScreen()}else{if(a.webkitRequestFullscreen){a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}else{if(a.msRequestFullscreen){a.msRequestFullscreen()}else{this._enablePseudoFullscreen(a)}}}}}}},_enablePseudoFullscreen:function(a){L.DomUtil.addClass(a,"leaflet-pseudo-fullscreen");this._setFullscreen(true);this.invalidateSize();this.fire("fullscreenchange")},_disablePseudoFullscreen:function(a){L.DomUtil.removeClass(a,"leaflet-pseudo-fullscreen");this._setFullscreen(false);this.invalidateSize();this.fire("fullscreenchange")},_setFullscreen:function(b){this._isFullscreen=b;var a=this.getContainer();if(b){L.DomUtil.addClass(a,"leaflet-fullscreen-on")}else{L.DomUtil.removeClass(a,"leaflet-fullscreen-on")}},_onFullscreenChange:function(b){var a=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;if(a===this.getContainer()&&!this._isFullscreen){this._setFullscreen(true);this.fire("fullscreenchange")}else{if(a!==this.getContainer()&&this._isFullscreen){this._setFullscreen(false);this.fire("fullscreenchange")}}}});L.Map.mergeOptions({fullscreenControl:false});L.Map.addInitHook(function(){if(this.options.fullscreenControl){this.fullscreenControl=new L.Control.Fullscreen(this.options.fullscreenControl);this.addControl(this.fullscreenControl)}var b;if("onfullscreenchange" in document){b="fullscreenchange"}else{if("onmozfullscreenchange" in document){b="mozfullscreenchange"}else{if("onwebkitfullscreenchange" in document){b="webkitfullscreenchange"}else{if("onmsfullscreenchange" in document){b="MSFullscreenChange"}}}}if(b){var a=L.bind(this._onFullscreenChange,this);this.whenReady(function(){L.DomEvent.on(document,b,a)});this.on("unload",function(){L.DomEvent.off(document,b,a)})}});L.control.fullscreen=function(a){return new L.Control.Fullscreen(a)};(function(){L.Control.Geocoder=L.Control.extend({options:{showResultIcons:false,collapsed:true,expand:"click",position:"topright",placeholder:"Ricerca Indirizzo...",errorMessage:"Non trovato."},_callbackId:0,initialize:function(a){L.Util.setOptions(this,a);if(!this.options.geocoder){this.options.geocoder=new L.Control.Geocoder.Nominatim()}},onAdd:function(f){var d="leaflet-control-geocoder",a=L.DomUtil.create("div",d+" leaflet-bar"),c=L.DomUtil.create("a","ms ms-zoom",a),e=this._form=L.DomUtil.create("form",d+"-form",a),b;c.innerHTML="";c.href="javascript:void(0);";this._map=f;this._container=a;b=this._input=L.DomUtil.create("input");b.type="text";b.placeholder=this.options.placeholder;L.DomEvent.addListener(b,"keydown",this._keydown,this);this._errorElement=document.createElement("div");this._errorElement.className=d+"-form-no-error";this._errorElement.innerHTML=this.options.errorMessage;this._alts=L.DomUtil.create("ul",d+"-alternatives leaflet-control-geocoder-alternatives-minimized");e.appendChild(b);this._container.appendChild(this._errorElement);a.appendChild(this._alts);L.DomEvent.addListener(e,"submit",this._geocode,this);if(this.options.collapsed){if(this.options.expand==="click"){L.DomEvent.addListener(c,"click",function(g){if(g.button===0&&g.detail!==2){this._toggle()}},this)}else{L.DomEvent.addListener(c,"mouseover",this._expand,this);L.DomEvent.addListener(c,"mouseout",this._collapse,this);this._map.on("movestart",this._collapse,this)}}else{L.DomEvent.addListener(c,"click",function(g){this._geocode(g)},this);this._expand()}L.DomEvent.disableClickPropagation(a);return a},_geocodeResult:function(b){L.DomUtil.removeClass(this._container,"leaflet-control-geocoder-throbber");if(b.length===1){this._geocodeResultSelected(b[0])}else{if(b.length>0){this._alts.innerHTML="";this._results=b;L.DomUtil.removeClass(this._alts,"leaflet-control-geocoder-alternatives-minimized");for(var a=0;a<b.length;a++){this._alts.appendChild(this._createAlt(b[a],a))}}else{L.DomUtil.addClass(this._errorElement,"leaflet-control-geocoder-error")}}},markGeocode:function(a){this._map.fitBounds(a.bbox);this._map.setZoom(16);if(this._geocodeMarker){this._map.removeLayer(this._geocodeMarker)}this._geocodeMarker=new L.Marker(a.center).bindPopup(a.html||a.name).addTo(this._map).openPopup();return this},_geocode:function(a){L.DomEvent.preventDefault(a);L.DomUtil.addClass(this._container,"leaflet-control-geocoder-throbber");this._clearResults();this.options.geocoder.geocode(this._input.value,this._geocodeResult,this);return false},_geocodeResultSelected:function(a){if(this.options.collapsed){this._collapse()}else{this._clearResults()}this.markGeocode(a)},_toggle:function(){if(this._container.className.indexOf("leaflet-control-geocoder-expanded")>=0){this._collapse()}else{this._expand()}},_expand:function(){L.DomUtil.addClass(this._container,"leaflet-control-geocoder-expanded");this._input.select()},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-geocoder-expanded","");L.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized");L.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error")},_clearResults:function(){L.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized");this._selection=null;L.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error")},_createAlt:function(c,e){var b=L.DomUtil.create("li",""),d=L.DomUtil.create("a","",b),f=this.options.showResultIcons&&c.icon?L.DomUtil.create("img","",d):null,g=c.html?undefined:document.createTextNode(c.name),h=function h(a){L.DomEvent.preventDefault(a);this._geocodeResultSelected(c)};if(f){f.src=c.icon}b.setAttribute("data-result-index",e);if(c.html){d.innerHTML=c.html}else{d.appendChild(g)}L.DomEvent.addListener(b,"click",h,this);return b},_keydown:function(c){var d=this,a=function a(e){if(d._selection){L.DomUtil.removeClass(d._selection,"leaflet-control-geocoder-selected");d._selection=d._selection[e>0?"nextSibling":"previousSibling"]}if(!d._selection){d._selection=d._alts[e>0?"firstChild":"lastChild"]}if(d._selection){L.DomUtil.addClass(d._selection,"leaflet-control-geocoder-selected")}};switch(c.keyCode){case 27:if(this.options.collapsed){this._collapse()}break;case 38:a(-1);L.DomEvent.preventDefault(c);break;case 40:a(1);L.DomEvent.preventDefault(c);break;case 13:if(this._selection){var b=parseInt(this._selection.getAttribute("data-result-index"),10);this._geocodeResultSelected(this._results[b]);this._clearResults();L.DomEvent.preventDefault(c)}}return true}});L.Control.geocoder=function(a){return new L.Control.Geocoder(a)};L.Control.Geocoder.callbackId=0;L.Control.Geocoder.jsonp=function(b,f,g,c,d){var e="_l_geocoder_"+(L.Control.Geocoder.callbackId++);f[d||"callback"]=e;window[e]=L.Util.bind(g,c);var a=document.createElement("script");a.type="text/javascript";a.src=b+L.Util.getParamString(f);a.id=e;document.getElementsByTagName("head")[0].appendChild(a)};L.Control.Geocoder.getJSON=function(b,c,d){var a=new XMLHttpRequest();a.onreadystatechange=function(){if(a.readyState!=4){return}if(a.status!=200&&a.status!=304){d("");return}d(JSON.parse(a.response))};a.open("GET",b+L.Util.getParamString(c),true);a.setRequestHeader("Accept","application/json");a.send(null)};L.Control.Geocoder.template=function(c,a,b){return c.replace(/\{ *([\w_]+) *\}/g,function(f,d){var e=a[d];if(e===undefined){e=""}else{if(typeof e==="function"){e=e(a)}}return L.Control.Geocoder.htmlEscape(e)})};L.Control.Geocoder.htmlEscape=(function(){var d=/[&<>"'`]/g;var b=/[&<>"'`]/;var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};function a(e){return c[e]}return function(e){if(e==null){return""}else{if(!e){return e+""}}e=""+e;if(!b.test(e)){return e}return e.replace(d,a)}})();L.Control.Geocoder.Nominatim=L.Class.extend({options:{serviceUrl:"//nominatim.openstreetmap.org/",geocodingQueryParams:{countrycodes:"it",viewbox:"7.49958,44.791951,10.06312,43.730645",bounded:1},reverseQueryParams:{},htmlTemplate:function(a){var b=a.display_name.replace("Genoa,","").replace("Italia","").replace("Liguria,","");return L.Control.Geocoder.template(b.split(",").join("<br/>"),a.address,true)}},initialize:function(a){L.Util.setOptions(this,a)},geocode:function(c,a,b){L.Control.Geocoder.jsonp(this.options.serviceUrl+"search/",L.extend({q:c+" Liguria",limit:10,format:"json",addressdetails:1},this.options.geocodingQueryParams),function(g){var f=[];for(var e=g.length-1;e>=0;e--){var h=g[e].boundingbox;for(var d=0;d<4;d++){h[d]=parseFloat(h[d])}f[e]={icon:g[e].icon,name:g[e].display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(g[e]):undefined,bbox:L.latLngBounds([h[0],h[2]],[h[1],h[3]]),center:L.latLng(g[e].lat,g[e].lon),properties:g[e]}}a.call(b,f)},this,"json_callback")},reverse:function(b,d,a,c){L.Control.Geocoder.jsonp(this.options.serviceUrl+"reverse/",L.extend({lat:b.lat,lon:b.lng,zoom:Math.round(Math.log(d/256)/Math.log(2)),addressdetails:1,format:"json"},this.options.reverseQueryParams),function(f){var e=[],g;if(f&&f.lat&&f.lon){g=L.latLng(f.lat,f.lon);e.push({name:f.display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(f):undefined,center:g,bounds:L.latLngBounds(g,g),properties:f})}a.call(c,e)},this,"json_callback")}});L.Control.Geocoder.Google=L.Class.extend({options:{service_url:"https://maps.googleapis.com/maps/api/geocode/json"},initialize:function(a){this._key=a},geocode:function(c,a,b){var d={address:c};if(this._key&&this._key.length){d.key=this._key}L.Control.Geocoder.getJSON(this.options.service_url,d,function(h){var f=[],k,g,j;if(h.results&&h.results.length){for(var e=0;e<=h.results.length-1;e++){k=h.results[e];g=L.latLng(k.geometry.location);j=L.latLngBounds(L.latLng(k.geometry.viewport.northeast),L.latLng(k.geometry.viewport.southwest));f[e]={name:k.formatted_address,bbox:j,center:g}}}a.call(b,f)})},reverse:function(b,e,a,c){var d={latlng:encodeURIComponent(b.lat)+","+encodeURIComponent(b.lng)};if(this._key&&this._key.length){d.key=this._key}L.Control.Geocoder.getJSON(this.options.service_url,d,function(j){var g=[],l,h,k;if(j.results&&j.results.length){for(var f=0;f<=j.results.length-1;f++){l=j.results[f];h=L.latLng(l.geometry.location);k=L.latLngBounds(L.latLng(l.geometry.viewport.northeast),L.latLng(l.geometry.viewport.southwest));g[f]={name:l.formatted_address,bbox:k,center:h}}}a.call(c,g)})}});return L.Control.Geocoder})();
/*
 Copyright (c) 2016 Dominik Moritz

 This file is part of the leaflet locate control. It is licensed under the MIT license.
 You can find the project at: https://github.com/domoritz/leaflet-locatecontrol
 */
(function(a,b){if(typeof define==="function"&&define.amd){define(["leaflet"],a)}else{if(typeof exports==="object"){if(typeof b!=="undefined"&&b.L){module.exports=a(L)}else{module.exports=a(require("leaflet"))}}}if(typeof b!=="undefined"&&b.L){b.L.Control.Locate=a(L)}}(function(a){var b=a.Control.extend({options:{position:"topleft",layer:undefined,setView:"untilPan",keepCurrentZoomLevel:false,clickBehavior:{inView:"stop",outOfView:"setView",},drawCircle:true,drawMarker:true,markerClass:a.CircleMarker,circleStyle:{color:"#136AEC",fillColor:"#136AEC",fillOpacity:0.15,weight:2,opacity:0.5},markerStyle:{color:"#136AEC",fillColor:"#2A93EE",fillOpacity:0.7,weight:2,opacity:0.9,radius:5},followCircleStyle:{},followMarkerStyle:{},icon:"fa fa-map-marker",iconLoading:"fa fa-spinner fa-spin",iconElementTag:"span",circlePadding:[0,0],metric:true,onLocationError:function(c,d){alert(c.message)},onLocationOutsideMapBounds:function(c){c.stop();alert(c.options.strings.outsideMapBoundsMsg)},showPopup:true,strings:{title:"Show me where I am",metersUnit:"meters",feetUnit:"feet",popup:"You are within {distance} {unit} from this point",outsideMapBoundsMsg:"You seem located outside the boundaries of the map"},locateOptions:{maxZoom:Infinity,watch:true,setView:false}},initialize:function(c){for(var d in c){if(typeof this.options[d]==="object"){a.extend(this.options[d],c[d])}else{this.options[d]=c[d]}}this.options.followMarkerStyle=a.extend({},this.options.markerStyle,this.options.followMarkerStyle);this.options.followCircleStyle=a.extend({},this.options.circleStyle,this.options.followCircleStyle)},onAdd:function(d){var c=a.DomUtil.create("div","leaflet-control-locate leaflet-bar leaflet-control");this._layer=this.options.layer||new a.LayerGroup();this._layer.addTo(d);this._event=undefined;this._link=a.DomUtil.create("a","leaflet-bar-part leaflet-bar-part-single",c);this._link.href="#";this._link.title=this.options.strings.title;this._icon=a.DomUtil.create(this.options.iconElementTag,this.options.icon,this._link);a.DomEvent.on(this._link,"click",a.DomEvent.stopPropagation).on(this._link,"click",a.DomEvent.preventDefault).on(this._link,"click",this._onClick,this).on(this._link,"dblclick",a.DomEvent.stopPropagation);this._resetVariables();this._map.on("unload",this._unload,this);return c},_onClick:function(){this._justClicked=true;this._userPanned=false;if(this._active&&!this._event){this.stop()}else{if(this._active&&this._event!==undefined){var c=this._map.getBounds().contains(this._event.latlng)?this.options.clickBehavior.inView:this.options.clickBehavior.outOfView;switch(c){case"setView":this.setView();break;case"stop":this.stop();break}}else{this.start()}}this._updateContainerStyle()},start:function(){this._activate();if(this._event){this._drawMarker(this._map);if(this.options.setView){this.setView()}}this._updateContainerStyle()},stop:function(){this._deactivate();this._cleanClasses();this._resetVariables();this._removeMarker()},_activate:function(){if(!this._active){this._map.locate(this.options.locateOptions);this._active=true;this._map.on("locationfound",this._onLocationFound,this);this._map.on("locationerror",this._onLocationError,this);this._map.on("dragstart",this._onDrag,this)}},_deactivate:function(){this._map.stopLocate();this._active=false;this._map.off("locationfound",this._onLocationFound,this);this._map.off("locationerror",this._onLocationError,this);this._map.off("dragstart",this._onDrag,this)},setView:function(){if(this._isOutsideMapBounds()){this.options.onLocationOutsideMapBounds(this)}else{if(this.options.keepCurrentZoomLevel){this._map.panTo([this._event.latitude,this._event.longitude])}else{this._map.fitBounds(this._event.bounds,{padding:this.options.circlePadding,maxZoom:this.options.locateOptions.maxZoom})}}this._drawMarker()},_drawMarker:function(){if(this._event.accuracy===undefined){this._event.accuracy=0}var c=this._event.accuracy;var j=this._event.latlng;if(this.options.drawCircle){var f=this._isFollowing()?this.options.followCircleStyle:this.options.circleStyle;if(!this._circle){this._circle=a.circle(j,c,f).addTo(this._layer)}else{this._circle.setLatLng(j).setRadius(c).setStyle(f)}}var h,g;if(this.options.metric){h=c.toFixed(0);g=this.options.strings.metersUnit}else{h=(c*3.2808399).toFixed(0);g=this.options.strings.feetUnit}if(this.options.drawMarker){var d=this._isFollowing()?this.options.followMarkerStyle:this.options.markerStyle;if(!this._marker){this._marker=new this.options.markerClass(j,d).addTo(this._layer)}else{this._marker.setLatLng(j).setStyle(d)}}var e=this.options.strings.popup;if(this.options.showPopup&&e&&this._marker){this._marker.bindPopup(a.Util.template(e,{distance:h,unit:g}))._popup.setLatLng(j)}},_removeMarker:function(){this._layer.clearLayers();this._marker=undefined;this._circle=undefined},_unload:function(){this.stop();this._map.off("unload",this._unload,this)},_onLocationError:function(c){if(c.code==3&&this.options.locateOptions.watch){return}this.stop();this.options.onLocationError(c,this)},_onLocationFound:function(c){if(this._event&&(this._event.latlng.lat===c.latlng.lat&&this._event.latlng.lng===c.latlng.lng&&this._event.accuracy===c.accuracy)){return}if(!this._active){return}this._event=c;this._drawMarker();this._updateContainerStyle();switch(this.options.setView){case"once":if(this._justClicked){this.setView()}break;case"untilPan":if(!this._userPanned){this.setView()}break;case"always":this.setView();break;case false:break}this._justClicked=false},_onDrag:function(){if(this._event){this._userPanned=true;this._updateContainerStyle();this._drawMarker()}},_isFollowing:function(){if(!this._active){return false}if(this.options.setView==="always"){return true}else{if(this.options.setView==="untilPan"){return !this._userPanned}}},_isOutsideMapBounds:function(){if(this._event===undefined){return false}return this._map.options.maxBounds&&!this._map.options.maxBounds.contains(this._event.latlng)},_updateContainerStyle:function(){if(!this._container){return}if(this._active&&!this._event){this._setClasses("requesting")}else{if(this._isFollowing()){this._setClasses("following")}else{if(this._active){this._setClasses("active")}else{this._cleanClasses()}}}},_setClasses:function(c){if(c=="requesting"){a.DomUtil.removeClasses(this._container,"active following");a.DomUtil.addClasses(this._container,"requesting");a.DomUtil.removeClasses(this._icon,this.options.icon);a.DomUtil.addClasses(this._icon,this.options.iconLoading)}else{if(c=="active"){a.DomUtil.removeClasses(this._container,"requesting following");a.DomUtil.addClasses(this._container,"active");a.DomUtil.removeClasses(this._icon,this.options.iconLoading);a.DomUtil.addClasses(this._icon,this.options.icon)}else{if(c=="following"){a.DomUtil.removeClasses(this._container,"requesting");a.DomUtil.addClasses(this._container,"active following");a.DomUtil.removeClasses(this._icon,this.options.iconLoading);a.DomUtil.addClasses(this._icon,this.options.icon)}}}},_cleanClasses:function(){a.DomUtil.removeClass(this._container,"requesting");a.DomUtil.removeClass(this._container,"active");a.DomUtil.removeClass(this._container,"following");a.DomUtil.removeClasses(this._icon,this.options.iconLoading);a.DomUtil.addClasses(this._icon,this.options.icon)},_resetVariables:function(){this._active=false;this._justClicked=false;this._userPanned=false}});a.control.locate=function(c){return new a.Control.Locate(c)};(function(){var c=function(f,d,e){e=e.split(" ");e.forEach(function(g){a.DomUtil[f].call(this,d,g)})};a.DomUtil.addClasses=function(d,e){c("addClass",d,e)};a.DomUtil.removeClasses=function(d,e){c("removeClass",d,e)}})();return b},window));(function(){L.Control.NavBar=L.Control.extend({options:{position:"topleft",forwardTitle:"Vai avanti",backTitle:"Via indietro",homeTitle:"Vai alla estensione iniziale"},onAdd:function(c){if(!this.options.center){this.options.center=c.getCenter()}if(!this.options.zoom){this.options.zoom=c.getZoom()}options=this.options;var b="leaflet-control-navbar",a=L.DomUtil.create("div",b+" leaflet-bar");this._homeButton=this._createButton(options.homeTitle,"fa fa-home",a,this._goHome);this._fwdButton=this._createButton(options.forwardTitle,"fa fa-caret-right",a,this._goFwd);this._backButton=this._createButton(options.backTitle,"fa fa-caret-left",a,this._goBack);this._viewHistory=[{center:this.options.center,zoom:this.options.zoom}];this._curIndx=0;this._updateDisabled();c.once("moveend",function(){this._map.on("moveend",this._updateHistory,this)},this);c.setView(options.center,options.zoom);return a},onRemove:function(a){a.off("moveend",this._updateHistory,this)},_goHome:function(){if(this.options.bbox){try{this._map.fitBounds(this.options.bbox)}catch(a){this._map.setView(this.options.center,this.options.zoom)}}this._map.setView(this.options.center,this.options.zoom)},_goBack:function(){if(this._curIndx!==0){this._map.off("moveend",this._updateHistory,this);this._map.once("moveend",function(){this._map.on("moveend",this._updateHistory,this)},this);this._curIndx--;this._updateDisabled();var a=this._viewHistory[this._curIndx];this._map.setView(a.center,a.zoom)}},_goFwd:function(){if(this._curIndx!=this._viewHistory.length-1){this._map.off("moveend",this._updateHistory,this);this._map.once("moveend",function(){this._map.on("moveend",this._updateHistory,this)},this);this._curIndx++;this._updateDisabled();var a=this._viewHistory[this._curIndx];this._map.setView(a.center,a.zoom)}},_createButton:function(e,c,a,b){var d=L.DomUtil.create("a",c,a);d.href="#";d.title=e;L.DomEvent.on(d,"mousedown dblclick",L.DomEvent.stopPropagation).on(d,"click",L.DomEvent.stop).on(d,"click",b,this).on(d,"click",this._refocusOnMap,this);return d},_updateHistory:function(){var b={center:this._map.getCenter(),zoom:this._map.getZoom()};var a=this._curIndx+1;this._viewHistory.splice(a,this._viewHistory.length-a,b);this._curIndx++;this._updateDisabled()},_setFwdEnabled:function(b){var a="leaflet-disabled";var c="leaflet-control-navbar-fwd-disabled";if(b===true){L.DomUtil.removeClass(this._fwdButton,c);L.DomUtil.removeClass(this._fwdButton,a)}else{L.DomUtil.addClass(this._fwdButton,c);L.DomUtil.addClass(this._fwdButton,a)}},_setBackEnabled:function(c){var b="leaflet-disabled";var a="leaflet-control-navbar-back-disabled";if(c===true){L.DomUtil.removeClass(this._backButton,a);L.DomUtil.removeClass(this._backButton,b)}else{L.DomUtil.addClass(this._backButton,a);L.DomUtil.addClass(this._backButton,b)}},_updateDisabled:function(){if(this._curIndx==(this._viewHistory.length-1)){this._setFwdEnabled(false)}else{this._setFwdEnabled(true)}if(this._curIndx<=0){this._setBackEnabled(false)}else{this._setBackEnabled(true)}}});L.control.navbar=function(a){return new L.Control.NavBar(a)}})();(function(a){if(typeof define==="function"&&define.amd){define(["leaflet"],a)}else{if(typeof module!=="undefined"){module.exports=a(require("leaflet"))}else{if(typeof window.L==="undefined"){throw"Leaflet must be loaded first"}a(window.L)}}})(function(b){function a(h,k){var g=k.split("."),f=g.pop(),d=g.length,j=g[0],e=1;if(d>0){while((h=h[j])&&e<d){j=g[e++]}}if(h){return h[f]}}function c(d){return Object.prototype.toString.call(d)==="[object Object]"}b.Control.Search=b.Control.extend({includes:b.Mixin.Events,options:{url:"",layer:null,sourceData:null,jsonpParam:null,propertyLoc:"loc",propertyName:"title",formatData:null,filterData:null,moveToLocation:null,buildTip:null,container:"",zoom:null,minLength:1,initial:false,casesensitive:false,autoType:true,delayType:400,tooltipLimit:-1,tipAutoSubmit:true,firstTipSubmit:false,autoResize:true,collapsed:true,autoCollapse:false,autoCollapseTime:1200,textErr:"Non trovato",textCancel:"Cancel",textPlaceholder:"Ricerca...",position:"topleft",hideMarkerOnCollapse:false,marker:{icon:false,animate:true,circle:{radius:10,weight:3,color:"#e70",stroke:true,fillColor:"#e70",fillOpacity:0.4,fill:true}}},initialize:function(d){b.Util.setOptions(this,d||{});this._inputMinSize=this.options.textPlaceholder?this.options.textPlaceholder.length:10;this._layer=this.options.layer||new b.LayerGroup();this._filterData=this.options.filterData||this._defaultFilterData;this._formatData=this.options.formatData||this._defaultFormatData;this._moveToLocation=this.options.moveToLocation||this._defaultMoveToLocation;this._autoTypeTmp=this.options.autoType;this._countertips=0;this._recordsCache={};this._curReq=null},onAdd:function(d){this._map=d;this._container=b.DomUtil.create("div","leaflet-control-search");this._input=this._createInput(this.options.textPlaceholder,"search-input");this._tooltip=this._createTooltip("search-tooltip");this._cancel=this._createCancel(this.options.textCancel,"search-cancel");this._button=this._createButton(this.options.textPlaceholder,"search-button ms ms-zoom");this._alert=this._createAlert("search-alert");if(this.options.collapsed===false){this.expand(this.options.collapsed)}if(this.options.marker){if(this.options.marker instanceof b.Marker||this.options.marker instanceof b.CircleMarker){this._markerSearch=this.options.marker}else{if(c(this.options.marker)){this._markerSearch=new b.Control.Search.Marker([0,0],this.options.marker)}}this._markerSearch._isMarkerSearch=true}this.setLayer(this._layer);d.on({resize:this._handleAutoresize},this);return this._container},addTo:function(d){if(this.options.container){this._container=this.onAdd(d);this._wrapper=b.DomUtil.get(this.options.container);this._wrapper.style.position="relative";this._wrapper.appendChild(this._container)}else{b.Control.prototype.addTo.call(this,d)}return this},onRemove:function(d){this._recordsCache={}},setLayer:function(d){this._layer=d;this._layer.addTo(this._map);return this},showAlert:function(e){e=e||this.options.textErr;this._alert.style.display="block";this._alert.innerHTML=e;clearTimeout(this.timerAlert);var d=this;this.timerAlert=setTimeout(function(){d.hideAlert()},this.options.autoCollapseTime);return this},hideAlert:function(){this._alert.style.display="none";return this},cancel:function(){this._input.value="";this._handleKeypress({keyCode:8});this._input.size=this._inputMinSize;this._input.focus();this._cancel.style.display="none";this._hideTooltip();return this},expand:function(d){d=typeof d==="boolean"?d:true;this._input.style.display="block";b.DomUtil.addClass(this._container,"search-exp");if(d!==false){this._input.focus();this._map.on("dragstart click",this.collapse,this)}this.fire("search:expanded");return this},collapse:function(){this._hideTooltip();this.cancel();this._alert.style.display="none";this._input.blur();if(this.options.collapsed){this._input.style.display="none";this._cancel.style.display="none";b.DomUtil.removeClass(this._container,"search-exp");if(this.options.hideMarkerOnCollapse){this._map.removeLayer(this._markerSearch)}this._map.off("dragstart click",this.collapse,this)}this.fire("search:collapsed");return this},collapseDelayed:function(){if(!this.options.autoCollapse){return this}var d=this;clearTimeout(this.timerCollapse);this.timerCollapse=setTimeout(function(){d.collapse()},this.options.autoCollapseTime);return this},collapseDelayedStop:function(){clearTimeout(this.timerCollapse);return this},_createAlert:function(d){var e=b.DomUtil.create("div",d,this._container);e.style.display="none";b.DomEvent.on(e,"click",b.DomEvent.stop,this).on(e,"click",this.hideAlert,this);return e},_createInput:function(g,f){var e=b.DomUtil.create("label",f,this._container);var d=b.DomUtil.create("input",f,this._container);d.type="text";d.size=this._inputMinSize;d.value="";d.autocomplete="off";d.autocorrect="off";d.autocapitalize="off";d.placeholder=g;d.style.display="none";d.role="search";d.id=d.role+d.type+d.size;e.htmlFor=d.id;e.style.display="none";e.value=g;b.DomEvent.disableClickPropagation(d).on(d,"keydown",this._handleKeypress,this).on(d,"blur",this.collapseDelayed,this).on(d,"focus",this.collapseDelayedStop,this);return d},_createCancel:function(f,d){var e=b.DomUtil.create("a",d,this._container);e.href="#";e.title=f;e.style.display="none";e.innerHTML="<span>&otimes;</span>";b.DomEvent.on(e,"click",b.DomEvent.stop,this).on(e,"click",this.cancel,this);return e},_createButton:function(f,e){var d=b.DomUtil.create("a",e,this._container);d.href="#";d.title=f;b.DomEvent.on(d,"click",b.DomEvent.stop,this).on(d,"click",this._handleSubmit,this).on(d,"focus",this.collapseDelayedStop,this).on(d,"blur",this.collapseDelayed,this);return d},_createTooltip:function(e){var d=b.DomUtil.create("ul",e,this._container);d.style.display="none";var f=this;b.DomEvent.disableClickPropagation(d).on(d,"blur",this.collapseDelayed,this).on(d,"mousewheel",function(g){f.collapseDelayedStop();b.DomEvent.stopPropagation(g)},this).on(d,"mouseover",function(g){f.collapseDelayedStop()},this);return d},_createTip:function(g,f){var e;if(this.options.buildTip){e=this.options.buildTip.call(this,g,f);if(typeof e==="string"){var d=b.DomUtil.create("div");d.innerHTML=e;e=d.firstChild}}else{e=b.DomUtil.create("li","");e.innerHTML=g}b.DomUtil.addClass(e,"search-tip");e._text=g;if(this.options.tipAutoSubmit){b.DomEvent.disableClickPropagation(e).on(e,"click",b.DomEvent.stop,this).on(e,"click",function(h){this._input.value=g;this._handleAutoresize();this._input.focus();this._hideTooltip();this._handleSubmit()},this)}return e},_getUrl:function(d){return(typeof this.options.url==="function")?this.options.url(d):this.options.url},_defaultFilterData:function(k,e){var f,h,d,j={};k=k.replace(/[.*+?^${}()|[\]\\]/g,"");if(k===""){return[]}f=this.options.initial?"^":"";h=!this.options.casesensitive?"i":undefined;d=new RegExp(f+k,h);for(var g in e){if(d.test(g)){j[g]=e[g]}}return j},showTooltip:function(d){var f;this._countertips=0;this._tooltip.innerHTML="";this._tooltip.currentSelection=-1;for(var e in d){if(++this._countertips==this.options.tooltipLimit){break}f=this._createTip(e,d[e]);this._tooltip.appendChild(f)}if(this._countertips>0){this._tooltip.style.display="block";if(this._autoTypeTmp){this._autoType()}this._autoTypeTmp=this.options.autoType}else{this._hideTooltip()}this._tooltip.scrollTop=0;return this._countertips},_hideTooltip:function(){this._tooltip.style.display="none";this._tooltip.innerHTML="";return 0},_defaultFormatData:function(f){var g=this.options.propertyName,d=this.options.propertyLoc,e,h={};if(b.Util.isArray(d)){for(e in f){h[a(f[e],g)]=b.latLng(f[e][d[0]],f[e][d[1]])}}else{for(e in f){h[a(f[e],g)]=b.latLng(a(f[e],d))}}return h},_recordsFromJsonp:function(g,d){b.Control.Search.callJsonp=d;var e=b.DomUtil.create("script","leaflet-search-jsonp",document.getElementsByTagName("body")[0]),f=b.Util.template(this._getUrl(g)+"&"+this.options.jsonpParam+"=L.Control.Search.callJsonp",{s:g});e.type="text/javascript";e.src=f;return{abort:function(){e.parentNode.removeChild(e)}}},_recordsFromAjax:function(j,e){if(window.XMLHttpRequest===undefined){window.XMLHttpRequest=function(){try{return new ActiveXObject("Microsoft.XMLHTTP.6.0")}catch(l){try{return new ActiveXObject("Microsoft.XMLHTTP.3.0")}catch(k){throw new Error("XMLHttpRequest is not supported")}}}}var d=(b.Browser.ie&&!window.atob&&document.querySelector),h=d?new XDomainRequest():new XMLHttpRequest(),f=b.Util.template(this._getUrl(j),{s:j});h.open("GET",f);var g=this;h.onload=function(){e(JSON.parse(h.responseText))};h.onreadystatechange=function(){if(h.readyState===4&&h.status===200){this.onload()}};h.send();return h},_recordsFromLayer:function(){var e=this,d={},f=this.options.propertyName,g;this._layer.eachLayer(function(h){if(h.hasOwnProperty("_isMarkerSearch")){return}if(h instanceof b.Marker||h instanceof b.CircleMarker){try{if(a(h.options,f)){g=h.getLatLng();g.layer=h;d[a(h.options,f)]=g}else{if(a(h.feature.properties,f)){g=h.getLatLng();g.layer=h;d[a(h.feature.properties,f)]=g}else{throw new Error("propertyName '"+f+"' not found in marker")}}}catch(j){if(console){console.warn(j)}}}else{if(h.hasOwnProperty("feature")){try{if(h.feature.properties.hasOwnProperty(f)){g=h.getBounds().getCenter();g.layer=h;d[h.feature.properties[f]]=g}else{throw new Error("propertyName '"+f+"' not found in feature")}}catch(j){if(console){console.warn(j)}}}else{if(h instanceof b.LayerGroup){h.eachLayer(function(k){g=k.getLatLng();g.layer=k;d[k.feature.properties[f]]=g})}}}},this);return d},_autoType:function(){var g=this._input.value.length,f=this._tooltip.firstChild._text,e=f.length;if(f.indexOf(this._input.value)===0){this._input.value=f;this._handleAutoresize();if(this._input.createTextRange){var d=this._input.createTextRange();d.collapse(true);d.moveStart("character",g);d.moveEnd("character",e);d.select()}else{if(this._input.setSelectionRange){this._input.setSelectionRange(g,e)}else{if(this._input.selectionStart){this._input.selectionStart=g;this._input.selectionEnd=e}}}}},_hideAutoType:function(){var e;if((e=this._input.selection)&&e.empty){e.empty()}else{if(this._input.createTextRange){e=this._input.createTextRange();e.collapse(true);var d=this._input.value.length;e.moveStart("character",d);e.moveEnd("character",d);e.select()}else{if(this._input.getSelection){this._input.getSelection().removeAllRanges()}this._input.selectionStart=this._input.selectionEnd}}},_handleKeypress:function(f){switch(f.keyCode){case 27:this.collapse();break;case 13:if(this._countertips==1||(this.options.firstTipSubmit&&this._countertips>0)){this._handleArrowSelect(1)}this._handleSubmit();break;case 38:this._handleArrowSelect(-1);break;case 40:this._handleArrowSelect(1);break;case 8:case 45:case 46:this._autoTypeTmp=false;break;case 37:case 39:case 16:case 17:case 35:case 36:break;default:if(this._input.value.length){this._cancel.style.display="block"}else{this._cancel.style.display="none"}if(this._input.value.length>=this.options.minLength){var d=this;clearTimeout(this.timerKeypress);this.timerKeypress=setTimeout(function(){d._fillRecordsCache()},this.options.delayType)}else{this._hideTooltip()}}this._handleAutoresize()},searchText:function(e){var d=e.charCodeAt(e.length);this._input.value=e;this._input.style.display="block";b.DomUtil.addClass(this._container,"search-exp");this._autoTypeTmp=false;this._handleKeypress({keyCode:d})},_fillRecordsCache:function(){var f=this._input.value,e=this,d;if(this._curReq&&this._curReq.abort){this._curReq.abort()}b.DomUtil.addClass(this._container,"search-load");if(this.options.layer){this._recordsCache=this._recordsFromLayer();d=this._filterData(this._input.value,this._recordsCache);this.showTooltip(d);b.DomUtil.removeClass(this._container,"search-load")}else{if(this.options.sourceData){this._retrieveData=this.options.sourceData}else{if(this.options.url){this._retrieveData=this.options.jsonpParam?this._recordsFromJsonp:this._recordsFromAjax}}this._curReq=this._retrieveData.call(this,f,function(g){e._recordsCache=e._formatData(g);if(e.options.sourceData){d=e._filterData(e._input.value,e._recordsCache)}else{d=e._recordsCache}e.showTooltip(d);b.DomUtil.removeClass(e._container,"search-load")})}},_handleAutoresize:function(){if(this._input.style.maxWidth!=this._map._container.offsetWidth){this._input.style.maxWidth=b.DomUtil.getStyle(this._map._container,"width")}if(this.options.autoResize&&(this._container.offsetWidth+45<this._map._container.offsetWidth)){this._input.size=this._input.value.length<this._inputMinSize?this._inputMinSize:this._input.value.length}},_handleArrowSelect:function(d){var f=this._tooltip.hasChildNodes()?this._tooltip.childNodes:[];for(i=0;i<f.length;i++){b.DomUtil.removeClass(f[i],"search-tip-select")}if((d==1)&&(this._tooltip.currentSelection>=(f.length-1))){b.DomUtil.addClass(f[this._tooltip.currentSelection],"search-tip-select")}else{if((d==-1)&&(this._tooltip.currentSelection<=0)){this._tooltip.currentSelection=-1}else{if(this._tooltip.style.display!="none"){this._tooltip.currentSelection+=d;b.DomUtil.addClass(f[this._tooltip.currentSelection],"search-tip-select");this._input.value=f[this._tooltip.currentSelection]._text;var e=f[this._tooltip.currentSelection].offsetTop;if(e+f[this._tooltip.currentSelection].clientHeight>=this._tooltip.scrollTop+this._tooltip.clientHeight){this._tooltip.scrollTop=e-this._tooltip.clientHeight+f[this._tooltip.currentSelection].clientHeight}else{if(e<=this._tooltip.scrollTop){this._tooltip.scrollTop=e}}}}}},_handleSubmit:function(){this._hideAutoType();this.hideAlert();this._hideTooltip();if(this._input.style.display=="none"){this.expand()}else{if(this._input.value===""){this.collapse()}else{var d=this._getLocation(this._input.value);if(d===false){this.showAlert()}else{this.showLocation(d,this._input.value);this.fire("search:locationfound",{latlng:d,text:this._input.value,layer:d.layer?d.layer:null})}}}},_getLocation:function(d){if(this._recordsCache.hasOwnProperty(d)){return this._recordsCache[d]}else{return false}},_defaultMoveToLocation:function(f,e,d){if(this.options.zoom){this._map.setView(f,this.options.zoom)}else{this._map.panTo(f)}},showLocation:function(f,e){var d=this;d._map.once("moveend zoomend",function(g){if(d._markerSearch){d._markerSearch.addTo(d._map).setLatLng(f)}});d._moveToLocation(f,e,d._map);if(d.options.autoCollapse){d.collapse()}return d}});b.Control.Search.Marker=b.Marker.extend({includes:b.Mixin.Events,options:{icon:new b.Icon.Default(),animate:true,circle:{radius:10,weight:3,color:"#e03",stroke:true,fill:false}},initialize:function(e,d){b.setOptions(this,d);if(d.icon===true){d.icon=new b.Icon.Default()}b.Marker.prototype.initialize.call(this,e,d);if(c(this.options.circle)){this._circleLoc=new b.CircleMarker(e,this.options.circle)}},onAdd:function(d){b.Marker.prototype.onAdd.call(this,d);if(this._circleLoc){d.addLayer(this._circleLoc);if(this.options.animate){this.animate()}}},onRemove:function(d){b.Marker.prototype.onRemove.call(this,d);if(this._circleLoc){d.removeLayer(this._circleLoc)}},setLatLng:function(d){b.Marker.prototype.setLatLng.call(this,d);if(this._circleLoc){this._circleLoc.setLatLng(d)}return this},_initIcon:function(){if(this.options.icon){b.Marker.prototype._initIcon.call(this)}},_removeIcon:function(){if(this.options.icon){b.Marker.prototype._removeIcon.call(this)}},animate:function(){if(this._circleLoc){var j=this._circleLoc,d=200,f=5,e=parseInt(j._radius/f),h=this.options.circle.radius,k=j._radius*2,g=0;j._timerAnimLoc=setInterval(function(){g+=0.5;e+=g;k-=e;j.setRadius(k);if(k<h){clearInterval(j._timerAnimLoc);j.setRadius(h)}},d)}return this}});b.Map.addInitHook(function(){if(this.options.searchControl){this.searchControl=b.control.search(this.options.searchControl);this.addControl(this.searchControl)}});b.control.search=function(d){return new b.Control.Search(d)};return b.Control.Search});GV.infoWmsManager=(function(){var d=0,g=0,e=[];function c(j){GV.util.log("start info request: "+new Date());d=0;g=0;e=[];var h=function(l,p,m){var q=GV.map.latLngToContainerPoint(m,GV.map.getZoom()),s=GV.map.getSize(),k=GV.map.getBounds(),r=GV.map.options.crs.project(k.getSouthWest()),o=GV.map.options.crs.project(k.getNorthEast());var n={request:"GetFeatureInfo",service:"WMS",crs:"EPSG:3857",styles:"",version:"1.1.0",format:"application/json",bbox:r.x+","+r.y+","+o.x+","+o.y,height:s.y,width:s.x,layers:p,query_layers:p,FEATURE_COUNT:100,buffer:10,info_format:"application/json"};_.extend(n,{});n[n.version==="1.3.0"?"i":"x"]=q.x;n[n.version==="1.3.0"?"j":"y"]=q.y;return GV.config.application.proxy+l+GV.util.getParamString(n,l,true)};_.each(GV.config.maps,function(o){var k=null,m=[];_.each(o.layers,function(p){if(p.idMap===o.id&&p.type==="WMS"&&p.queryable&&p.visible&&GV.map.layerInRange(p)){k=p.wmsParams.url;m.push(p.wmsParams.name)}});var n=m.join(",");if(k&&m.length>0){var l=h(k,n,j.latlng);g++;GV.map._container.style.cursor="progress";Vue.http.get(l).then(function(p){b(p.data.features)},function(p){GV.util.log(p,2)})}})}function b(l){d++;_.each(l,function(o){var n=o.id.split(".")[0];o.layerName=n;o.layer=GV.map.getLayerByName(n);o.label=m(n,o.properties);o.infoOptions=o.layer.config.infoOptions});Array.prototype.push.apply(e,l);if(d===g){GV.map._container.style.cursor="default";if(e.length===0){GV.util.log("Nessun elemento trovata");return}var k=new Vue({template:'<gv-wms-info-list v-draggable :cls="cls" visible="true" :items="items"></gv-wms-info-list>',data:{items:e,cls:"gv-info-wms",divId:"gv-info-wms-list"},mixins:[GV.dynamicAddedComp]});if(e.length===1){f(e[0])}GV.util.log("end info request: "+new Date())}function m(p,n){var o,q;o=j(p,"infoLabelAttr");q=j(p,"infoIdAttr");if(o&&n[o]){return n[o]}if(q&&n[q]){return n[q]}return n[h(n)]}function j(o,q){try{var n=GV.map.getLayerByName(o).config;if(n&&n.infoOptions&&n.infoOptions[q]){return n.infoOptions[q]}else{return null}}catch(p){GV.util.log(p,2);return null}}function h(n){for(var o in n){if(n.hasOwnProperty(o)&&typeof(o)!=="function"){return o}}return null}}function f(n){var o=n.infoOptions,m=o.infoUrl;if((m.substr(m.length-4)===".xsl")||(m.substr(m.length-5)===".xslt")){k(o,n)}else{if(!o.infoTarget||o.infoTarget==="panel"){p(m,null,o)}else{h(m,null,o)}}function k(v,u){var t=r(u);var s={url:"/geoservices/REST/config/xsl_info_service?",data:{xslUrl:v.infoUrl,ambiente:null,idLayer:u.layerName.replace("L",""),featureAttributes:u.properties}};GV.util.getXML(s,function(x){Array.prototype.slice.call(x.getElementsByTagName("td")).forEach(function(A,z,y){if(A.id==="Titolo"){A.textContent=u.layer.legend.label;A.text=u.layer.legend.label}});var w=q(t,x);w=w.replace(new RegExp("%0A","g"),"").replace(new RegExp("%09","g"),"").replace(new RegExp("%20","g"),"");if(!v.infoTarget||v.infoTarget==="panel"){p(w,null,v)}else{h(w,null,v)}});function r(H){try{var G='<?xml version="1.0" encoding="ISO-8859-1"?><msGMLOutput xmlns:gml="http://www.opengis.net/gml" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"></msGMLOutput>',F=GV.util.parseXML(G),z=H.layerName+"_layer",A=F.createElement(z),E=H.layerName+"_feature",w=F.createElement(E),y=H.properties;for(var C in y){if(y.hasOwnProperty(C)){var D=null;if(y[C]){D=F.createTextNode(y[C])}else{D=F.createTextNode("")}var B=F.createElement(C);B.appendChild(D);w.appendChild(B)}}A.appendChild(w);F.documentElement.appendChild(A);return F}catch(x){GV.util.log(x,2)}}function q(z,A){try{if(window.XSLTProcessor){var w=new XSLTProcessor();w.importStylesheet(A);var y=w.transformToDocument(z);return(new XMLSerializer()).serializeToString(y)}else{return z.transformNode(A)}}catch(x){GV.util.log(x,2)}}}function j(s,r){var u=r.infoWidth||400,q=r.infoHeight||300;var t=new Vue({template:'<gv-iframe-panel v-draggable visible="true" :src="src" :html="html" :height="height" :width="width" :cls="cls" :title="title"></gv-iframe-panel>',data:{title:"Risultato Info",src:null,html:s,width:u,height:q,cls:"gv-info-wms-html"},mixins:[GV.dynamicAddedComp]})}function p(s,r,q){if(s){j(s,q)}else{}}function h(u,t,s){var v=s.infoWidth||400,q=s.infoHeight||500,r=window.open(t,null,"status=yes, toolbar=yes, menubar=no, width="+v+", height="+q+", resizable=yes, scrollbars=yes");r.document.open();r.document.write(u);r.document.close();r.focus()}var l=a(n);Vue.http.get(l).then(function(q){var r=GV.map.getLayerByName("InfoWmsHilite");if(q.data.features&&q.data.features[0]&&q.data.features[0].geometry){r.clearLayers();r.addData(q.data.features[0].geometry);GV.map.fitBounds(r.getBounds(),{maxZoom:15});GV.map._container.style.cursor="default"}},function(q){GV.util.log(q,2)})}function a(h){var j="M"+h.layer.config.idMap;var l=h.layer.config.wfsParams.url.replace("/"+j,"");var m=h.layer.config.infoOptions.infoIdAttr;var k=GV.globals.DEFAULT_PROXY;k+=l+"service=WFS&version=2.0.0&request=GetFeature&srsName=EPSG%3A4326&outputFormat=application%2Fjson";k+="&typeName="+j+":"+h.layer.config.wfsParams.typeName+"&cql_filter="+m+"="+h.properties[m]+"";return k}return{activate:function(){GV.util.log("GV.app.infoWmsManager.activate");GV.map.loadLayers([{name:"InfoWmsHilite",type:"JSON",style:{color:"#ffcc00",fillOpacity:0,weight:6,opacity:0.6},pointToLayer:function(h,j){return L.circleMarker(j,{radius:8,color:"#ffcc00",fillColor:"#ffcc00",fill:true,fillOpacity:0.6,weight:6,opacity:0.6})},visible:true}]);GV.map.on("click",c)},deactivate:function(){GV.map.off("click")},showFeatureInfo:f}}());GV.init=function(a){GV.config.set(a);GV.util.setDrag();new Vue({el:"#gv-container",template:"<gv-app></gv-app>"})};GV.layerFactory=(function(){var a='<a href="http://www.esri.com/">Esri</a>';return{createPane:function(c,f,d){var b=d.getPane("tilePane");var e=d.createPane(c,b);e.style.zIndex=f;return e},create:function(b,d){if(this[b.type]){var c=this[b.type](b,d);c.legend=b.legend;c.config=b;return c}else{GV.util.log("Layer di tipo "+b.type+" non gestito",2);return null}},BLANK:function(b,c){b.legend={label:"Sfondo Bianco"};return L.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{opacity:0})},OSM:function(b,c){b.legend={label:"OpenStreetMap"};return L.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data  <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'})},STAMEN_TERRAIN:function(b,c){b.legend={label:"Stamen Terrain"};return L.tileLayer("http://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",minZoom:0,maxZoom:18,ext:"png"})},STAMEN_TONER_LIGHT:function(b,c){b.legend={label:"Stamen Toner Light"};return L.tileLayer("http://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"})},CARTODB_POSITRON:function(b,c){b.legend={label:"CartoDb Positron"};return L.tileLayer("http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',subdomains:"abcd",maxZoom:19})},CARTODB_DARKMATTER:function(b,c){b.legend={label:"CartoDb DarkMatter"};return L.tileLayer("http://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',subdomains:"abcd",maxZoom:19})},OPENMAPSURFER_ROADS:function(b,c){b.legend={label:"OpenMapSurfer Roads"};return L.tileLayer("http://korona.geog.uni-heidelberg.de/tiles/roads/x={x}&y={y}&z={z}",{maxZoom:20,attribution:'Imagery from <a href="http://giscience.uni-hd.de/">GIScience Research Group @ University of Heidelberg</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'})},MAPBOX_STREETS:function(b,c){b.legend={label:"Mapbox Streets"};return L.tileLayer("http://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g",{attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",id:"mapbox.streets",accessToken:"pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g"})},MAPBOX_SATELLITE:function(b,c){b.legend={label:"Mapbox Satellite"};return L.tileLayer("http://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g",{attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",id:"mapbox.satellite",accessToken:"pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g"})},MAPBOX_OUTDOOR:function(b,c){b.legend={label:"Mapox Outdoor"};return L.tileLayer("http://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g",{attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",id:"mapbox.outdoors",accessToken:"pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g"})},MAPBOX_LIGHT:function(b,c){b.legend={label:"Mapox Light"};return L.tileLayer("http://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g",{attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",id:"mapbox.light",accessToken:"pk.eyJ1Ijoic3RlZmFub3Bhcm9kaSIsImEiOiJjaXRma2VzeWgwMGVmMnh0bzJzMmVjcGVtIn0.2lTBdEwBI6_2QBzboizE5g"})},HYDDA:function(b,c){b.legend={label:"Hydda"};return L.tileLayer("http://{s}.tile.openstreetmap.se/hydda/full/{z}/{x}/{y}.png",{attribution:'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'})},ESRI_IMAGERY:function(c,d){c.legend={label:"ESRI Imagery"};c.name=c.type;var b="DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community";return L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"&copy; "+a+", "+b,maxZoom:19})},ESRI_STREETS:function(c,d){c.legend={label:"ESRI Streets"};c.name=c.type;var b="USGS, NOAA";return L.tileLayer("http://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"&copy; "+a+", "+b,maxZoom:19})},ESRI_TOPOGRAPHIC:function(c,d){c.legend={label:"ESRI Topographic"};c.name=c.type;var b="USGS, NOAA";return L.tileLayer("http://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"&copy; "+a+", "+b,maxZoom:19})},ESRI_GRAY:function(c,d){c.legend={label:"ESRI Gray"};c.name=c.type;var b="HERE, DeLorme, MapmyIndia, OpenStreetMap contributors";return L.tileLayer("http://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"&copy; "+a+", "+b,maxZoom:16})},ESRI_DARKGRAY:function(c,d){c.legend={label:"ESRI Dark Gray"};c.name=c.type;var b="HERE, DeLorme, MapmyIndia, OpenStreetMap contributors";return L.tileLayer("http://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"&copy; "+a+", "+b,maxZoom:16})},WMS:function(k,c){GV.util.log("GV.layerFactory - Creazione Layer WMS: "+k.name);var j=(k.geomType==="VECTOR")?"image/png8":(k.cacheMinZoomLevel)?"image/jpeg":"image/png",b=(k.minScale)?GV.util.getZoomFromScaleDenom(k.minScale):8,h=(k.maxScale)?GV.util.getZoomFromScaleDenom(k.maxScale):20,d=k.wmsParams.url,e=k.name,g=k.opacity||1;if(!k.flagGeoserver){k.cacheMinZoomLevel=null;j=(k.geomType==="VECTOR")?"image/png":"image/jpeg"}var l={transparent:true,FORMAT_OPTIONS:"antialias:text",layers:e,format:j,opacity:g,minZoom:b,maxZoom:h,bounds:GV.globals.MAX_BOUNDS};var f;if(k.cacheMinZoomLevel){_.extend(l,{tiled:true,TILESORIGIN:"-20037508,-20037508",tileSize:256});f=L.tileLayer.wms(d,l)}else{_.extend(l,{tiled:false,pane:"tilePane"});f=L.nonTiledLayer.wms(d,l)}f.setZIndex(k.zIndex);f.type="WMS";f.name=e;return f},JSON:function(d,q){var s=d.data,h=d.url,t=d.name,c=d.wfsParams,o=d.esParams,p=d.classes,n=d.style,f=d.pointToLayer,g=d.tooltip,b=d.popup,l=d.dataType||"jsonp",m=d.cluster,k=null;var e={};if(p&&p.length>0){if(d.geomSubType==="POINT"){e.pointToLayer=function(u,x){var w;_.each(p,function(y){if(y.filter&&y.filter.key&&y.filter.value){if(u.properties[y.filter.key]===y.filter.value){w=y.style}}else{w=y.style}});if(w.iconUrl){var v;switch(w.iconUrl){case"default":v=L.icon({iconUrl:"http://geoportale.regione.liguria.it/geoviewer2/images/legend/marker-icon.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[0,-41]});break;case"default-small":v=L.icon({iconUrl:"http://geoportale.regione.liguria.it/geoviewer2/images/legend/marker-icon.png",iconSize:[12,20],iconAnchor:[6,10],popupAnchor:[0,-20]});break;default:v=L.icon({iconUrl:w.iconUrl,iconSize:w.iconSize,iconAnchor:w.iconAnchor,popupAnchor:w.popupAnchor})}return L.marker(x,{icon:v})}else{return L.circleMarker(x,w)}}}else{e.style=function(u){var v;_.each(p,function(w){if(w.filter&&w.filter.key&&w.filter.value){if(u.properties[w.filter.key]===w.filter.value){v=w.style}}else{v=w.style}});return v}}e.filter=function(v,u){var w=false;_.each(p,function(x){if(!x.filter){w=true}else{if(x.filter.key&&x.filter.value){if(v.properties[x.filter.key]==x.filter.value){w=true}}}});return w}}if(n){e.style=n}if(f){e.pointToLayer=f}if(g||b){e.onEachFeature=function(v,u){if(g){u.options.title=GV.util.template(g,v.properties)}if(b){u.bindPopup(GV.util.template(b,v.properties))}}}var r=L.geoJson(s,e);r.name=t;r.setFilter=function(u){r.filter=u;if(u){r.eachLayer(function(v){var w=0;_.each(u,function(x){if(v.feature.properties[x.key]==x.value){w=r.config.opacity||1}});v.setOpacity(w)})}else{r.eachLayer(function(v){var w=r.config.opacity||1;v.setOpacity(w)})}};if(c&&c.typeName&&c.url){var j={service:"WFS",version:"2.0.0",request:"GetFeature",srsName:"EPSG:4326",outputFormat:"text/javascript",format_options:"callback: getJson",typeName:c.typeName};h=c.url+GV.util.getParamString(j);l="jsonp"}if(o){var j={};if(o.field){j.q=o.field+":";if(o.query){j.q+=o.query}else{j.q+="*"}}else{if(o.query){j.q=o.query}}j.pretty="true";j.size=100000;h=GV.config.application.proxy+o.url+GV.util.getParamString(j);l="json"}if(h){Vue.http.get(h).then(function(w){var y=w.data;var u=y;if(o){var v=o.geomField||"location";var x=y.hits.hits;u={type:"FeatureCollection",totalFeatures:y.hits.total,features:[],crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4326"}}};_.each(x,function(z){var A=z._source[v];u.features.push({type:"Feature",id:z._id,geometry:{type:"Point",coordinates:A},geometry_name:"GEOMETRY",properties:z._source})})}r.addData(u);if(m){k.addLayer(r)}},function(u){GV.util.log(u,2)})}if(m){var e={showCoverageOnHover:false};if(m.options){_.extend(e,m.options)}k=L.markerClusterGroup(e);return k}return r}}}());GV.Map=L.Map.extend({layers:[],baseLayers:[],initialExtent:[],mapOptions:{zoomControl:false,maxBounds:GV.globals.MAX_BOUNDS,maxBoundsViscosity:1,minZoom:7},initialize:function(){_.extend(this.mapOptions,GV.config.application.mapOptions);L.Map.prototype.initialize.call(this,"gv-map",L.extend(L.Map.prototype.options,this.mapOptions));this.setInitialExtent();this.setLayersInRange();this.setLoading();this.loadBaseLayers();this.loadControls()},setInitialExtent:function(){var b=this.mapOptions.initialExtent||"830036,5402959,1123018,5597635";var d=b.split(",");var c=L.point(d[0],d[1]);var f=L.point(d[2],d[3]);var a=L.Projection.SphericalMercator.unproject(c);var e=L.Projection.SphericalMercator.unproject(f);this.initialExtent=L.latLngBounds(a,e);this.fitBounds(this.initialExtent)},setLayersInRange:function(){this.on("zoom",function(){var a=GV.config.getAllLayersConfig();_.each(a,function(b){GV.config.setLayerAttribute(b.name,"inRange",this.layerInRange(b))},this)})},setLayerVisible:function(a,b){if(b){a.visible=true;this.loadLayers([a])}else{this.removeLayer(this.getLayerByName(a.name))}},layerInRange:function(a){if(!a.minScale&&!a.minScale){return true}return(this.getScale()<a.minScale&&this.getScale()>a.maxScale)},loadControls:function(){if(this.mapOptions.controls){var a;this.controls={};_.each(this.mapOptions.controls,function(b){switch(b.name){case"scale":a=L.control.scale({imperial:false}).addTo(this);this.controls[b]=a;break}},this)}},loadBaseLayers:function(){_.each(GV.config.baseLayers,function(a){var b=GV.layerFactory.create(a,this);this.baseLayers[b.config.legend.label]=b;if(b&&a.visible){b.on("loading",function(){this.loading(true,b)},this);b.on("load",function(){this.loading(false,b)},this);b.addTo(this)}},this)},loadLayers:function(a){_.each(a,function(b){if(!this.getLayerByName(b.name)){var c=GV.layerFactory.create(b,this);if(c&&b.visible){c.on("loading",function(){this.loading(true,c)},this);c.on("load",function(){this.loading(false,c)},this);c.addTo(this)}}},this)},getLayerByName:function(b){var a=null;this.eachLayer(function(c){if(c.config&&c.config.name&&c.config.name===b){a=c}});return a},getScaleLabel:function(){return GV.util.getScaleLabelsFromZoom(this._zoom)},getScale:function(){return GV.util.getScaleFromZoom(this._zoom)},setLoading:function(){this._spinning=0;this.on("layerremove",function(a){if(a.layer.loading){this.loading(false)}if(typeof a.layer.on!="function"){return}a.layer.off("load");a.layer.off("loading")},this)},loading:function(b,a){if(!!b){if(this._spinning===0){GV.util.log("start load: "+a.config.name);this._container.style.cursor="progress"}this._spinning++}else{this._spinning--;if(this._spinning<=0){GV.util.log("end load: "+a.config.name);this._container.style.cursor="default"}}}});(function(b,a,c){L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,spiderfyOnMaxZoom:true,showCoverageOnHover:true,zoomToBoundsOnClick:true,singleMarkerMode:false,disableClusteringAtZoom:null,removeOutsideVisibleBounds:true,animate:true,animateAddingMarkers:false,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:0.5},chunkedLoading:false,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(e){L.Util.setOptions(this,e);if(!this.options.iconCreateFunction){this.options.iconCreateFunction=this._defaultIconCreateFunction}this._featureGroup=L.featureGroup();this._featureGroup.addEventParent(this);this._nonPointGroup=L.featureGroup();this._nonPointGroup.addEventParent(this);this._inZoomAnimation=0;this._needsClustering=[];this._needsRemoving=[];this._currentShownBounds=null;this._queue=[];var d=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,d?this._withAnimation:this._noAnimation);this._markerCluster=d?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(f){if(f instanceof L.LayerGroup){return this.addLayers([f])}if(!f.getLatLng){this._nonPointGroup.addLayer(f);return this}if(!this._map){this._needsClustering.push(f);return this}if(this.hasLayer(f)){return this}if(this._unspiderfy){this._unspiderfy()}this._addLayer(f,this._maxZoom);this._topClusterLevel._recalculateBounds();var d=f,e=this._map.getZoom();if(f.__parent){while(d.__parent._zoom>=e){d=d.__parent}}if(this._currentShownBounds.contains(d.getLatLng())){if(this.options.animateAddingMarkers){this._animationAddLayer(f,d)}else{this._animationAddLayerNonAnimated(f,d)}}return this},removeLayer:function(d){if(d instanceof L.LayerGroup){return this.removeLayers([d])}if(!d.getLatLng){this._nonPointGroup.removeLayer(d);return this}if(!this._map){if(!this._arraySplice(this._needsClustering,d)&&this.hasLayer(d)){this._needsRemoving.push(d)}return this}if(!d.__parent){return this}if(this._unspiderfy){this._unspiderfy();this._unspiderfyLayer(d)}this._removeLayer(d,true);this._topClusterLevel._recalculateBounds();d.off("move",this._childMarkerMoved,this);if(this._featureGroup.hasLayer(d)){this._featureGroup.removeLayer(d);if(d.clusterShow){d.clusterShow()}}return this},addLayers:function(h){if(!L.Util.isArray(h)){return this.addLayer(h)}var e=this._featureGroup,n=this._nonPointGroup,p=this.options.chunkedLoading,o=this.options.chunkInterval,r=this.options.chunkProgress,j=h.length,k=0,q=true,g;if(this._map){var s=(new Date()).getTime();var f=L.bind(function(){var u=(new Date()).getTime();for(;k<j;k++){if(p&&k%200===0){var l=(new Date()).getTime()-u;if(l>o){break}}g=h[k];if(g instanceof L.LayerGroup){if(q){h=h.slice();q=false}this._extractNonGroupLayers(g,h);j=h.length;continue}if(!g.getLatLng){n.addLayer(g);continue}if(this.hasLayer(g)){continue}this._addLayer(g,this._maxZoom);if(g.__parent){if(g.__parent.getChildCount()===2){var t=g.__parent.getAllChildMarkers(),m=t[0]===g?t[1]:t[0];e.removeLayer(m)}}}if(r){r(k,j,(new Date()).getTime()-s)}if(k===j){this._topClusterLevel._recalculateBounds();this._featureGroup.eachLayer(function(v){if(v instanceof L.MarkerCluster&&v._iconNeedsUpdate){v._updateIcon()}});this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)}else{setTimeout(f,this.options.chunkDelay)}},this);f()}else{var d=this._needsClustering;for(;k<j;k++){g=h[k];if(g instanceof L.LayerGroup){if(q){h=h.slice();q=false}this._extractNonGroupLayers(g,h);j=h.length;continue}if(!g.getLatLng){n.addLayer(g);continue}if(this.hasLayer(g)){continue}d.push(g)}}return this},removeLayers:function(g){var j,f,h=g.length,d=this._featureGroup,k=this._nonPointGroup,n=true;if(!this._map){for(j=0;j<h;j++){f=g[j];if(f instanceof L.LayerGroup){if(n){g=g.slice();n=false}this._extractNonGroupLayers(f,g);h=g.length;continue}this._arraySplice(this._needsClustering,f);k.removeLayer(f);if(this.hasLayer(f)){this._needsRemoving.push(f)}}return this}if(this._unspiderfy){this._unspiderfy();var o=g.slice(),e=h;for(j=0;j<e;j++){f=o[j];if(f instanceof L.LayerGroup){this._extractNonGroupLayers(f,o);e=o.length;continue}this._unspiderfyLayer(f)}}for(j=0;j<h;j++){f=g[j];if(f instanceof L.LayerGroup){if(n){g=g.slice();n=false}this._extractNonGroupLayers(f,g);h=g.length;continue}if(!f.__parent){k.removeLayer(f);continue}this._removeLayer(f,true,true);if(d.hasLayer(f)){d.removeLayer(f);if(f.clusterShow){f.clusterShow()}}}this._topClusterLevel._recalculateBounds();this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds);d.eachLayer(function(l){if(l instanceof L.MarkerCluster){l._updateIcon()}});return this},clearLayers:function(){if(!this._map){this._needsClustering=[];delete this._gridClusters;delete this._gridUnclustered}if(this._noanimationUnspiderfy){this._noanimationUnspiderfy()}this._featureGroup.clearLayers();this._nonPointGroup.clearLayers();this.eachLayer(function(d){d.off("move",this._childMarkerMoved,this);delete d.__parent});if(this._map){this._generateInitialClusters()}return this},getBounds:function(){var e=new L.LatLngBounds();if(this._topClusterLevel){e.extend(this._topClusterLevel._bounds)}for(var d=this._needsClustering.length-1;d>=0;d--){e.extend(this._needsClustering[d].getLatLng())}e.extend(this._nonPointGroup.getBounds());return e},eachLayer:function(h,f){var g=this._needsClustering.slice(),d=this._needsRemoving,e;if(this._topClusterLevel){this._topClusterLevel.getAllChildMarkers(g)}for(e=g.length-1;e>=0;e--){if(d.indexOf(g[e])===-1){h.call(f,g[e])}}this._nonPointGroup.eachLayer(h,f)},getLayers:function(){var d=[];this.eachLayer(function(e){d.push(e)});return d},getLayer:function(e){var d=null;e=parseInt(e,10);this.eachLayer(function(f){if(L.stamp(f)===e){d=f}});return d},hasLayer:function(e){if(!e){return false}var d,f=this._needsClustering;for(d=f.length-1;d>=0;d--){if(f[d]===e){return true}}f=this._needsRemoving;for(d=f.length-1;d>=0;d--){if(f[d]===e){return false}}return !!(e.__parent&&e.__parent._group===this)||this._nonPointGroup.hasLayer(e)},zoomToShowLayer:function(e,g){if(typeof g!=="function"){g=function(){}}var f=function(){if((e._icon||e.__parent._icon)&&!this._inZoomAnimation){this._map.off("moveend",f,this);this.off("animationend",f,this);if(e._icon){g()}else{if(e.__parent._icon){this.once("spiderfied",g,this);e.__parent.spiderfy()}}}};if(e._icon&&this._map.getBounds().contains(e.getLatLng())){g()}else{if(e.__parent._zoom<this._map.getZoom()){this._map.on("moveend",f,this);this._map.panTo(e.getLatLng())}else{var d=function(){this._map.off("movestart",d,this);d=null};this._map.on("movestart",d,this);this._map.on("moveend",f,this);this.on("animationend",f,this);e.__parent.zoomToBounds();if(d){f.call(this)}}}},onAdd:function(g){this._map=g;var f,d,e;if(!isFinite(this._map.getMaxZoom())){throw"Map has no maxZoom specified"}this._featureGroup.addTo(g);this._nonPointGroup.addTo(g);if(!this._gridClusters){this._generateInitialClusters()}this._maxLat=g.options.crs.projection.MAX_LATITUDE;for(f=0,d=this._needsRemoving.length;f<d;f++){e=this._needsRemoving[f];this._removeLayer(e,true)}this._needsRemoving=[];this._zoom=this._map.getZoom();this._currentShownBounds=this._getExpandedVisibleBounds();this._map.on("zoomend",this._zoomEnd,this);this._map.on("moveend",this._moveEnd,this);if(this._spiderfierOnAdd){this._spiderfierOnAdd()}this._bindEvents();d=this._needsClustering;this._needsClustering=[];this.addLayers(d)},onRemove:function(d){d.off("zoomend",this._zoomEnd,this);d.off("moveend",this._moveEnd,this);this._unbindEvents();this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","");if(this._spiderfierOnRemove){this._spiderfierOnRemove()}delete this._maxLat;this._hideCoverage();this._featureGroup.remove();this._nonPointGroup.remove();this._featureGroup.clearLayers();this._map=null},getVisibleParent:function(d){var e=d;while(e&&!e._icon){e=e.__parent}return e||null},_arraySplice:function(e,f){for(var d=e.length-1;d>=0;d--){if(e[d]===f){e.splice(d,1);return true}}},_removeFromGridUnclustered:function(d,g){var f=this._map,e=this._gridUnclustered;for(;g>=0;g--){if(!e[g].removeObject(d,f.project(d.getLatLng(),g))){break}}},_childMarkerMoved:function(d){if(!this._ignoreMove){d.target._latlng=d.oldLatLng;this.removeLayer(d.target);d.target._latlng=d.latlng;this.addLayer(d.target)}},_removeLayer:function(k,g,l){var h=this._gridClusters,f=this._gridUnclustered,d=this._featureGroup,e=this._map;if(g){this._removeFromGridUnclustered(k,this._maxZoom)}var m=k.__parent,j=m._markers,n;this._arraySplice(j,k);while(m){m._childCount--;m._boundsNeedUpdate=true;if(m._zoom<0){break}else{if(g&&m._childCount<=1){n=m._markers[0]===k?m._markers[1]:m._markers[0];h[m._zoom].removeObject(m,e.project(m._cLatLng,m._zoom));f[m._zoom].addObject(n,e.project(n.getLatLng(),m._zoom));this._arraySplice(m.__parent._childClusters,m);m.__parent._markers.push(n);n.__parent=m.__parent;if(m._icon){d.removeLayer(m);if(!l){d.addLayer(n)}}}else{if(!l||!m._icon){m._updateIcon()}}}m=m.__parent}delete k.__parent},_isOrIsParent:function(e,d){while(d){if(e===d){return true}d=d.parentNode}return false},fire:function(e,f,d){if(f&&f.layer instanceof L.MarkerCluster){if(f.originalEvent&&this._isOrIsParent(f.layer._icon,f.originalEvent.relatedTarget)){return}e="cluster"+e}L.FeatureGroup.prototype.fire.call(this,e,f,d)},listens:function(e,d){return L.FeatureGroup.prototype.listens.call(this,e,d)||L.FeatureGroup.prototype.listens.call(this,"cluster"+e,d)},_defaultIconCreateFunction:function(d){var e=d.getChildCount();var f=" marker-cluster-";if(e<10){f+="small"}else{if(e<100){f+="medium"}else{f+="large"}}return new L.DivIcon({html:"<div><span>"+e+"</span></div>",className:"marker-cluster"+f,iconSize:new L.Point(40,40)})},_bindEvents:function(){var g=this._map,e=this.options.spiderfyOnMaxZoom,d=this.options.showCoverageOnHover,f=this.options.zoomToBoundsOnClick;if(e||f){this.on("clusterclick",this._zoomOrSpiderfy,this)}if(d){this.on("clustermouseover",this._showCoverage,this);this.on("clustermouseout",this._hideCoverage,this);g.on("zoomend",this._hideCoverage,this)}},_zoomOrSpiderfy:function(g){var d=g.layer,f=d;while(f._childClusters.length===1){f=f._childClusters[0]}if(f._zoom===this._maxZoom&&f._childCount===d._childCount&&this.options.spiderfyOnMaxZoom){d.spiderfy()}else{if(this.options.zoomToBoundsOnClick){d.zoomToBounds()}}if(g.originalEvent&&g.originalEvent.keyCode===13){this._map._container.focus()}},_showCoverage:function(f){var d=this._map;if(this._inZoomAnimation){return}if(this._shownPolygon){d.removeLayer(this._shownPolygon)}if(f.layer.getChildCount()>2&&f.layer!==this._spiderfied){this._shownPolygon=new L.Polygon(f.layer.getConvexHull(),this.options.polygonOptions);d.addLayer(this._shownPolygon)}},_hideCoverage:function(){if(this._shownPolygon){this._map.removeLayer(this._shownPolygon);this._shownPolygon=null}},_unbindEvents:function(){var e=this.options.spiderfyOnMaxZoom,d=this.options.showCoverageOnHover,g=this.options.zoomToBoundsOnClick,f=this._map;if(e||g){this.off("clusterclick",this._zoomOrSpiderfy,this)}if(d){this.off("clustermouseover",this._showCoverage,this);this.off("clustermouseout",this._hideCoverage,this);f.off("zoomend",this._hideCoverage,this)}},_zoomEnd:function(){if(!this._map){return}this._mergeSplitClusters();this._zoom=Math.round(this._map._zoom);this._currentShownBounds=this._getExpandedVisibleBounds()},_moveEnd:function(){if(this._inZoomAnimation){return}var d=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,d);this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),d);this._currentShownBounds=d;return},_generateInitialClusters:function(){var e=this._map.getMaxZoom(),d=this.options.maxClusterRadius,f=d;if(typeof d!=="function"){f=function(){return d}}if(this.options.disableClusteringAtZoom){e=this.options.disableClusteringAtZoom-1}this._maxZoom=e;this._gridClusters={};this._gridUnclustered={};for(var g=e;g>=0;g--){this._gridClusters[g]=new L.DistanceGrid(f(g));this._gridUnclustered[g]=new L.DistanceGrid(f(g))}this._topClusterLevel=new this._markerCluster(this,-1)},_addLayer:function(h,n){var f=this._gridClusters,d=this._gridUnclustered,m,j;if(this.options.singleMarkerMode){this._overrideMarkerIcon(h)}h.on("move",this._childMarkerMoved,this);for(;n>=0;n--){m=this._map.project(h.getLatLng(),n);var e=f[n].getNearObject(m);if(e){e._addChild(h);h.__parent=e;return}e=d[n].getNearObject(m);if(e){var k=e.__parent;if(k){this._removeLayer(e,false)}var l=new this._markerCluster(this,n,e,h);f[n].addObject(l,this._map.project(l._cLatLng,n));e.__parent=l;h.__parent=l;var g=l;for(j=n-1;j>k._zoom;j--){g=new this._markerCluster(this,j,g);f[j].addObject(g,this._map.project(e.getLatLng(),j))}k._addChild(g);this._removeFromGridUnclustered(e,n);return}d[n].addObject(h,m)}this._topClusterLevel._addChild(h);h.__parent=this._topClusterLevel;return},_enqueue:function(d){this._queue.push(d);if(!this._queueTimeout){this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300)}},_processQueue:function(){for(var d=0;d<this._queue.length;d++){this._queue[d].call(this)}this._queue.length=0;clearTimeout(this._queueTimeout);this._queueTimeout=null},_mergeSplitClusters:function(){var d=Math.round(this._map._zoom);this._processQueue();if(this._zoom<d&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())){this._animationStart();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,this._getExpandedVisibleBounds());this._animationZoomIn(this._zoom,d)}else{if(this._zoom>d){this._animationStart();this._animationZoomOut(this._zoom,d)}else{this._moveEnd()}}},_getExpandedVisibleBounds:function(){if(!this.options.removeOutsideVisibleBounds){return this._mapBoundsInfinite}else{if(L.Browser.mobile){return this._checkBoundsMaxLat(this._map.getBounds())}}return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(d){var e=this._maxLat;if(e!==c){if(d.getNorth()>=e){d._northEast.lat=Infinity}if(d.getSouth()<=-e){d._southWest.lat=-Infinity}}return d},_animationAddLayerNonAnimated:function(d,e){if(e===d){this._featureGroup.addLayer(d)}else{if(e._childCount===2){e._addToMap();var f=e.getAllChildMarkers();this._featureGroup.removeLayer(f[0]);this._featureGroup.removeLayer(f[1])}else{e._updateIcon()}}},_extractNonGroupLayers:function(h,d){var g=h.getLayers(),f=0,e;d=d||[];for(;f<g.length;f++){e=g[f];if(e instanceof L.LayerGroup){this._extractNonGroupLayers(e,d);continue}d.push(e)}return d},_overrideMarkerIcon:function(d){var e=d.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[d]}});return e}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-Infinity,-Infinity),new L.LatLng(Infinity,Infinity))});L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(e,d){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,e);this._topClusterLevel._recursivelyAddChildrenToMap(null,d,this._getExpandedVisibleBounds());this.fire("animationend")},_animationZoomOut:function(e,d){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,e);this._topClusterLevel._recursivelyAddChildrenToMap(null,d,this._getExpandedVisibleBounds());this.fire("animationend")},_animationAddLayer:function(d,e){this._animationAddLayerNonAnimated(d,e)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim";this._inZoomAnimation++},_animationZoomIn:function(h,f){var g=this._getExpandedVisibleBounds(),d=this._featureGroup,e;this._ignoreMove=true;this._topClusterLevel._recursively(g,h,0,function(n){var k=n._latlng,l=n._markers,j;if(!g.contains(k)){k=null}if(n._isSingleParent()&&h+1===f){d.removeLayer(n);n._recursivelyAddChildrenToMap(null,f,g)}else{n.clusterHide();n._recursivelyAddChildrenToMap(k,f,g)}for(e=l.length-1;e>=0;e--){j=l[e];if(!g.contains(j._latlng)){d.removeLayer(j)}}});this._forceLayout();this._topClusterLevel._recursivelyBecomeVisible(g,f);d.eachLayer(function(j){if(!(j instanceof L.MarkerCluster)&&j._icon){j.clusterShow()}});this._topClusterLevel._recursively(g,h,f,function(j){j._recursivelyRestoreChildPositions(f)});this._ignoreMove=false;this._enqueue(function(){this._topClusterLevel._recursively(g,h,0,function(j){d.removeLayer(j);j.clusterShow()});this._animationEnd()})},_animationZoomOut:function(e,d){this._animationZoomOutSingle(this._topClusterLevel,e-1,d);this._topClusterLevel._recursivelyAddChildrenToMap(null,d,this._getExpandedVisibleBounds());this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,e,this._getExpandedVisibleBounds())},_animationAddLayer:function(e,g){var f=this,d=this._featureGroup;d.addLayer(e);if(g!==e){if(g._childCount>2){g._updateIcon();this._forceLayout();this._animationStart();e._setPos(this._map.latLngToLayerPoint(g.getLatLng()));e.clusterHide();this._enqueue(function(){d.removeLayer(e);e.clusterShow();f._animationEnd()})}else{this._forceLayout();f._animationStart();f._animationZoomOutSingle(g,this._map.getMaxZoom(),this._map.getZoom())}}}},_animationZoomOutSingle:function(d,h,e){var g=this._getExpandedVisibleBounds();d._recursivelyAnimateChildrenInAndAddSelfToMap(g,h+1,e);var f=this;this._forceLayout();d._recursivelyBecomeVisible(g,e);this._enqueue(function(){if(d._childCount===1){var j=d._markers[0];this._ignoreMove=true;j.setLatLng(j.getLatLng());this._ignoreMove=false;if(j.clusterShow){j.clusterShow()}}else{d._recursively(g,e,0,function(k){k._recursivelyRemoveChildrenFromMap(g,h+1)})}f._animationEnd()})},_animationEnd:function(){if(this._map){this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")}this._inZoomAnimation--;this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(a.body.offsetWidth)}});L.markerClusterGroup=function(d){return new L.MarkerClusterGroup(d)};L.MarkerCluster=L.Marker.extend({initialize:function(g,f,e,d){L.Marker.prototype.initialize.call(this,e?(e._cLatLng||e.getLatLng()):new L.LatLng(0,0),{icon:this});this._group=g;this._zoom=f;this._markers=[];this._childClusters=[];this._childCount=0;this._iconNeedsUpdate=true;this._boundsNeedUpdate=true;this._bounds=new L.LatLngBounds();if(e){this._addChild(e)}if(d){this._addChild(d)}},getAllChildMarkers:function(f){f=f||[];for(var e=this._childClusters.length-1;e>=0;e--){this._childClusters[e].getAllChildMarkers(f)}for(var d=this._markers.length-1;d>=0;d--){f.push(this._markers[d])}return f},getChildCount:function(){return this._childCount},zoomToBounds:function(){var g=this._childClusters.slice(),k=this._group._map,j=k.getBoundsZoom(this._bounds),f=this._zoom+1,h=k.getZoom(),e;while(g.length>0&&j>f){f++;var d=[];for(e=0;e<g.length;e++){d=d.concat(g[e]._childClusters)}g=d}if(j>f){this._group._map.setView(this._latlng,f)}else{if(j<=h){this._group._map.setView(this._latlng,h+1)}else{this._group._map.fitBounds(this._bounds)}}},getBounds:function(){var d=new L.LatLngBounds();d.extend(this._bounds);return d},_updateIcon:function(){this._iconNeedsUpdate=true;if(this._icon){this.setIcon(this)}},createIcon:function(){if(this._iconNeedsUpdate){this._iconObj=this._group.options.iconCreateFunction(this);this._iconNeedsUpdate=false}return this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(d,e){this._iconNeedsUpdate=true;this._boundsNeedUpdate=true;this._setClusterCenter(d);if(d instanceof L.MarkerCluster){if(!e){this._childClusters.push(d);d.__parent=this}this._childCount+=d._childCount}else{if(!e){this._markers.push(d)}this._childCount++}if(this.__parent){this.__parent._addChild(d,true)}},_setClusterCenter:function(d){if(!this._cLatLng){this._cLatLng=d._cLatLng||d._latlng}},_resetBounds:function(){var d=this._bounds;if(d._southWest){d._southWest.lat=Infinity;d._southWest.lng=Infinity}if(d._northEast){d._northEast.lat=-Infinity;d._northEast.lng=-Infinity}},_recalculateBounds:function(){var h=this._markers,l=this._childClusters,d=0,f=0,m=this._childCount,j,e,k,g;if(m===0){return}this._resetBounds();for(j=0;j<h.length;j++){k=h[j]._latlng;this._bounds.extend(k);d+=k.lat;f+=k.lng}for(j=0;j<l.length;j++){e=l[j];if(e._boundsNeedUpdate){e._recalculateBounds()}this._bounds.extend(e._bounds);k=e._wLatLng;g=e._childCount;d+=k.lat*g;f+=k.lng*g}this._latlng=this._wLatLng=new L.LatLng(d/m,f/m);this._boundsNeedUpdate=false},_addToMap:function(d){if(d){this._backupLatlng=this._latlng;this.setLatLng(d)}this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(f,d,e){this._recursively(f,0,e-1,function(k){var j=k._markers,h,g;for(h=j.length-1;h>=0;h--){g=j[h];if(g._icon){g._setPos(d);g.clusterHide()}}},function(l){var k=l._childClusters,h,g;for(h=k.length-1;h>=0;h--){g=k[h];if(g._icon){g._setPos(d);g.clusterHide()}}})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(f,e,d){this._recursively(f,d,0,function(g){g._recursivelyAnimateChildrenIn(f,g._group._map.latLngToLayerPoint(g.getLatLng()).round(),e);if(g._isSingleParent()&&e-1===d){g.clusterShow();g._recursivelyRemoveChildrenFromMap(f,e)}else{g.clusterHide()}g._addToMap()})},_recursivelyBecomeVisible:function(d,e){this._recursively(d,0,e,null,function(f){f.clusterShow()})},_recursivelyAddChildrenToMap:function(d,f,e){this._recursively(e,-1,f,function(j){if(f===j._zoom){return}for(var h=j._markers.length-1;h>=0;h--){var g=j._markers[h];if(!e.contains(g._latlng)){continue}if(d){g._backupLatlng=g.getLatLng();g.setLatLng(d);if(g.clusterHide){g.clusterHide()}}j._group._featureGroup.addLayer(g)}},function(g){g._addToMap(d)})},_recursivelyRestoreChildPositions:function(h){for(var g=this._markers.length-1;g>=0;g--){var d=this._markers[g];if(d._backupLatlng){d.setLatLng(d._backupLatlng);delete d._backupLatlng}}if(h-1===this._zoom){for(var f=this._childClusters.length-1;f>=0;f--){this._childClusters[f]._restorePosition()}}else{for(var e=this._childClusters.length-1;e>=0;e--){this._childClusters[e]._recursivelyRestoreChildPositions(h)}}},_restorePosition:function(){if(this._backupLatlng){this.setLatLng(this._backupLatlng);delete this._backupLatlng}},_recursivelyRemoveChildrenFromMap:function(e,h,g){var d,f;this._recursively(e,-1,h-1,function(j){for(f=j._markers.length-1;f>=0;f--){d=j._markers[f];if(!g||!g.contains(d._latlng)){j._group._featureGroup.removeLayer(d);if(d.clusterShow){d.clusterShow()}}}},function(j){for(f=j._childClusters.length-1;f>=0;f--){d=j._childClusters[f];if(!g||!g.contains(d._latlng)){j._group._featureGroup.removeLayer(d);if(d.clusterShow){d.clusterShow()}}}})},_recursively:function(k,j,f,d,g){var h=this._childClusters,m=this._zoom,e,l;if(j>m){for(e=h.length-1;e>=0;e--){l=h[e];if(k.intersects(l._bounds)){l._recursively(k,j,f,d,g)}}}else{if(d){d(this)}if(g&&this._zoom===f){g(this)}if(f>m){for(e=h.length-1;e>=0;e--){l=h[e];if(k.intersects(l._bounds)){l._recursively(k,j,f,d,g)}}}}},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){this.options.opacityWhenUnclustered=this.options.opacity||1;return this.setOpacity(0)},clusterShow:function(){var d=this.setOpacity(this.options.opacity||this.options.opacityWhenUnclustered);delete this.options.opacityWhenUnclustered;return d}});L.DistanceGrid=function(d){this._cellSize=d;this._sqCellSize=d*d;this._grid={};this._objectPoint={}};L.DistanceGrid.prototype={addObject:function(j,f){var e=this._getCoord(f.x),l=this._getCoord(f.y),h=this._grid,k=h[l]=h[l]||{},d=k[e]=k[e]||[],g=L.Util.stamp(j);this._objectPoint[g]=f;d.push(j)},updateObject:function(e,d){this.removeObject(e);this.addObject(e,d)},removeObject:function(e,k){var j=this._getCoord(k.x),h=this._getCoord(k.y),d=this._grid,m=d[h]=d[h]||{},l=m[j]=m[j]||[],f,g;delete this._objectPoint[L.Util.stamp(e)];for(f=0,g=l.length;f<g;f++){if(l[f]===e){l.splice(f,1);if(g===1){delete m[j]}return true}}},eachObject:function(n,e){var h,g,f,m,p,o,l,d=this._grid;for(h in d){p=d[h];for(g in p){o=p[g];for(f=0,m=o.length;f<m;f++){l=n.call(e,o[f]);if(l){f--;m--}}}}},getNearObject:function(q){var p=this._getCoord(q.x),o=this._getCoord(q.y),h,f,e,t,s,l,g,n,r=this._objectPoint,m=this._sqCellSize,d=null;for(h=o-1;h<=o+1;h++){t=this._grid[h];if(t){for(f=p-1;f<=p+1;f++){s=t[f];if(s){for(e=0,l=s.length;e<l;e++){g=s[e];n=this._sqDist(r[L.Util.stamp(g)],q);if(n<m){m=n;d=g}}}}}}return d},_getCoord:function(d){return Math.floor(d/this._cellSize)},_sqDist:function(g,f){var e=f.x-g.x,d=f.y-g.y;return e*e+d*d}};(function(){L.QuickHull={getDistant:function(f,g){var d=g[1].lat-g[0].lat,e=g[0].lng-g[1].lng;return(e*(f.lat-g[0].lat)+d*(f.lng-g[0].lng))},findMostDistantPointFromBaseLine:function(f,l){var j=0,e=null,h=[],g,k,m;for(g=l.length-1;g>=0;g--){k=l[g];m=this.getDistant(k,f);if(m>0){h.push(k)}else{continue}if(m>j){j=m;e=k}}return{maxPoint:e,newPoints:h}},buildConvexHull:function(d,g){var f=[],e=this.findMostDistantPointFromBaseLine(d,g);if(e.maxPoint){f=f.concat(this.buildConvexHull([d[0],e.maxPoint],e.newPoints));f=f.concat(this.buildConvexHull([e.maxPoint,d[1]],e.newPoints));return f}else{return[d[0]]}},getConvexHull:function(j){var o=false,g=false,p=false,k=false,l=null,q=null,f=null,h=null,n=null,e=null,m;for(m=j.length-1;m>=0;m--){var r=j[m];if(o===false||r.lat>o){l=r;o=r.lat}if(g===false||r.lat<g){q=r;g=r.lat}if(p===false||r.lng>p){f=r;p=r.lng}if(k===false||r.lng<k){h=r;k=r.lng}}if(g!==o){e=q;n=l}else{e=h;n=f}var d=[].concat(this.buildConvexHull([e,n],j),this.buildConvexHull([n,e],j));return d}}}());L.MarkerCluster.include({getConvexHull:function(){var g=this.getAllChildMarkers(),e=[],f,d;for(d=g.length-1;d>=0;d--){f=g[d].getLatLng();e.push(f)}return L.QuickHull.getConvexHull(e)}});L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:Math.PI/6,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied===this||this._group._inZoomAnimation){return}var h=this.getAllChildMarkers(),g=this._group,f=g._map,d=f.latLngToLayerPoint(this._latlng),e;this._group._unspiderfy();this._group._spiderfied=this;if(h.length>=this._circleSpiralSwitchover){e=this._generatePointsSpiral(h.length,d)}else{d.y+=10;e=this._generatePointsCircle(h.length,d)}this._animationSpiderfy(h,e)},unspiderfy:function(d){if(this._group._inZoomAnimation){return}this._animationUnspiderfy(d);this._group._spiderfied=null},_generatePointsCircle:function(h,l){var d=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+h),j=d/this._2PI,g=this._2PI/h,f=[],e,k;f.length=h;for(e=h-1;e>=0;e--){k=this._circleStartAngle+e*g;f[e]=new L.Point(l.x+j*Math.cos(k),l.y+j*Math.sin(k))._round()}return f},_generatePointsSpiral:function(j,d){var m=this._group.options.spiderfyDistanceMultiplier,l=m*this._spiralLengthStart,f=m*this._spiralFootSeparation,g=m*this._spiralLengthFactor*this._2PI,e=0,k=[],h;k.length=j;for(h=j-1;h>=0;h--){e+=f/l+h*0.0005;k[h]=new L.Point(d.x+l*Math.cos(e),d.y+l*Math.sin(e))._round();l+=g/e}return k},_noanimationUnspiderfy:function(){var j=this._group,h=j._map,e=j._featureGroup,g=this.getAllChildMarkers(),d,f;j._ignoreMove=true;this.setOpacity(1);for(f=g.length-1;f>=0;f--){d=g[f];e.removeLayer(d);if(d._preSpiderfyLatlng){d.setLatLng(d._preSpiderfyLatlng);delete d._preSpiderfyLatlng}if(d.setZIndexOffset){d.setZIndexOffset(0)}if(d._spiderLeg){h.removeLayer(d._spiderLeg);delete d._spiderLeg}}j.fire("unspiderfied",{cluster:this,markers:g});j._ignoreMove=false;j._spiderfied=null}});L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(g,k){var o=this._group,e=o._map,d=o._featureGroup,f=this._group.options.spiderLegPolylineOptions,j,h,n,l;o._ignoreMove=true;for(j=0;j<g.length;j++){l=e.layerPointToLatLng(k[j]);h=g[j];n=new L.Polyline([this._latlng,l],f);e.addLayer(n);h._spiderLeg=n;h._preSpiderfyLatlng=h._latlng;h.setLatLng(l);if(h.setZIndexOffset){h.setZIndexOffset(1000000)}d.addLayer(h)}this.setOpacity(0.3);o._ignoreMove=false;o.fire("spiderfied",{cluster:this,markers:g})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}});L.MarkerCluster.include({_animationSpiderfy:function(l,o){var s=this,v=this._group,g=v._map,d=v._featureGroup,j=this._latlng,q=g.latLngToLayerPoint(j),p=L.Path.SVG,f=L.extend({},this._group.options.spiderLegPolylineOptions),h=f.opacity,n,k,u,e,t,r;if(h===c){h=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity}if(p){f.opacity=0;f.className=(f.className||"")+" leaflet-cluster-spider-leg"}else{f.opacity=h}v._ignoreMove=true;for(n=0;n<l.length;n++){k=l[n];r=g.layerPointToLatLng(o[n]);u=new L.Polyline([j,r],f);g.addLayer(u);k._spiderLeg=u;if(p){e=u._path;t=e.getTotalLength()+0.1;e.style.strokeDasharray=t;e.style.strokeDashoffset=t}if(k.setZIndexOffset){k.setZIndexOffset(1000000)}if(k.clusterHide){k.clusterHide()}d.addLayer(k);if(k._setPos){k._setPos(q)}}v._forceLayout();v._animationStart();for(n=l.length-1;n>=0;n--){r=g.layerPointToLatLng(o[n]);k=l[n];k._preSpiderfyLatlng=k._latlng;k.setLatLng(r);if(k.clusterShow){k.clusterShow()}if(p){u=k._spiderLeg;e=u._path;e.style.strokeDashoffset=0;u.setStyle({opacity:h})}}this.setOpacity(0.3);v._ignoreMove=false;setTimeout(function(){v._animationEnd();v.fire("spiderfied",{cluster:s,markers:l})},200)},_animationUnspiderfy:function(s){var o=this,r=this._group,f=r._map,d=r._featureGroup,n=s?f._latLngToNewLayerPoint(this._latlng,s.zoom,s.center):f.latLngToLayerPoint(this._latlng),h=this.getAllChildMarkers(),l=L.Path.SVG,g,k,q,e,p,j;r._ignoreMove=true;r._animationStart();this.setOpacity(1);for(k=h.length-1;k>=0;k--){g=h[k];if(!g._preSpiderfyLatlng){continue}g.setLatLng(g._preSpiderfyLatlng);delete g._preSpiderfyLatlng;j=true;if(g._setPos){g._setPos(n);j=false}if(g.clusterHide){g.clusterHide();j=false}if(j){d.removeLayer(g)}if(l){q=g._spiderLeg;e=q._path;p=e.getTotalLength()+0.1;e.style.strokeDashoffset=p;q.setStyle({opacity:0})}}r._ignoreMove=false;setTimeout(function(){var m=0;for(k=h.length-1;k>=0;k--){g=h[k];if(g._spiderLeg){m++}}for(k=h.length-1;k>=0;k--){g=h[k];if(!g._spiderLeg){continue}if(g.clusterShow){g.clusterShow()}if(g.setZIndexOffset){g.setZIndexOffset(0)}if(m>1){d.removeLayer(g)}f.removeLayer(g._spiderLeg);delete g._spiderLeg}r._animationEnd();r.fire("unspiderfied",{cluster:o,markers:h})},200)}});L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this);if(this._map.options.zoomAnimation){this._map.on("zoomstart",this._unspiderfyZoomStart,this)}this._map.on("zoomend",this._noanimationUnspiderfy,this);if(!L.Browser.touch){this._map.getRenderer(this)}},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this);this._map.off("zoomstart",this._unspiderfyZoomStart,this);this._map.off("zoomanim",this._unspiderfyZoomAnim,this);this._map.off("zoomend",this._noanimationUnspiderfy,this);this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){if(!this._map){return}this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(d){if(L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")){return}this._map.off("zoomanim",this._unspiderfyZoomAnim,this);this._unspiderfy(d)},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(d){if(this._spiderfied){this._spiderfied.unspiderfy(d)}},_noanimationUnspiderfy:function(){if(this._spiderfied){this._spiderfied._noanimationUnspiderfy()}},_unspiderfyLayer:function(d){if(d._spiderLeg){this._featureGroup.removeLayer(d);if(d.clusterShow){d.clusterShow()}if(d.setZIndexOffset){d.setZIndexOffset(0)}this._map.removeLayer(d._spiderLeg);delete d._spiderLeg}}});L.MarkerClusterGroup.include({refreshClusters:function(d){if(!d){d=this._topClusterLevel.getAllChildMarkers()}else{if(d instanceof L.MarkerClusterGroup){d=d._topClusterLevel.getAllChildMarkers()}else{if(d instanceof L.LayerGroup){d=d._layers}else{if(d instanceof L.MarkerCluster){d=d.getAllChildMarkers()}else{if(d instanceof L.Marker){d=[d]}}}}}this._flagParentsIconsNeedUpdate(d);this._refreshClustersIcons();if(this.options.singleMarkerMode){this._refreshSingleMarkerModeMarkers(d)}return this},_flagParentsIconsNeedUpdate:function(e){var f,d;for(f in e){d=e[f].__parent;while(d){d._iconNeedsUpdate=true;d=d.__parent}}},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(d){if(d instanceof L.MarkerCluster&&d._iconNeedsUpdate){d._updateIcon()}})},_refreshSingleMarkerModeMarkers:function(e){var f,d;for(f in e){d=e[f];if(this.hasLayer(d)){d.setIcon(this._overrideMarkerIcon(d))}}}});L.Marker.include({refreshIconOptions:function(e,d){var f=this.options.icon;L.setOptions(f,e);this.setIcon(f);if(d&&this.__parent){this.__parent._group.refreshClusters(this)}return this}})}(window,document));L.NonTiledLayer=L.Layer.extend({includes:L.Mixin.Events,options:{attribution:"",opacity:1,zIndex:undefined,minZoom:0,maxZoom:18,pointerEvents:null,errorImageUrl:"data:image/gif;base64,R0lGODlhAQABAHAAACH5BAUAAAAALAAAAAABAAEAAAICRAEAOw==",bounds:L.latLngBounds([-85.05,-180],[85.05,180])},url:"",initialize:function(a){L.setOptions(this,a)},onAdd:function(a){this._map=a;if(!this._div){this._div=L.DomUtil.create("div","leaflet-image-layer");if(this.options.pointerEvents){this._div.style["pointer-events"]=this.options.pointerEvents}if(this.options.zIndex!==undefined){this._div.style.zIndex=this.options.zIndex}if(this.options.opacity!==undefined){this._div.style.opacity=this.options.opacity}}this.getPane().appendChild(this._div);this._bufferImage=this._initImage();this._currentImage=this._initImage();this._update()},onRemove:function(a){this.getPane().removeChild(this._div);this._div.removeChild(this._bufferImage);this._div.removeChild(this._currentImage)},addTo:function(a){a.addLayer(this);return this},getEvents:function(){var a={moveend:this._update,zoom:this._viewreset};if(this._zoomAnimated){a.zoomanim=this._animateZoom}return a},getElement:function(){return this._div},setOpacity:function(a){this.options.opacity=a;if(this._div){L.DomUtil.setOpacity(this._div,this.options.opacity)}return this},setZIndex:function(a){if(a){this.options.zIndex=a;if(this._div){this._div.style.zIndex=a}}return this},bringToFront:function(){if(this._div){this._pane.appendChild(this._div)}return this},bringToBack:function(){if(this._div){this._pane.insertBefore(this._div,this._pane.firstChild)}return this},getAttribution:function(){return this.options.attribution},_initImage:function(a){var a=L.DomUtil.create("img","leaflet-image-layer");this._div.appendChild(a);if(this._map.options.zoomAnimation&&L.Browser.any3d){L.DomUtil.addClass(a,"leaflet-zoom-animated")}else{L.DomUtil.addClass(a,"leaflet-zoom-hide")}L.extend(a,{galleryimg:"no",onselectstart:L.Util.falseFn,onmousemove:L.Util.falseFn,onload:L.bind(this._onImageLoad,this),onerror:L.bind(this._onImageError,this)});return a},redraw:function(){if(this._map){this._update()}return this},_animateZoom:function(a){if(this._currentImage._bounds){this._animateImage(this._currentImage,a)}if(this._bufferImage._bounds){this._animateImage(this._bufferImage,a)}},_animateImage:function(b,a){var d=this._map.getZoomScale(a.zoom),c=this._map._latLngToNewLayerPoint(b._bounds.getNorthWest(),a.zoom,a.center);L.DomUtil.setTransform(b,c,d)},_resetImage:function(c){var b=new L.Bounds(this._map.latLngToLayerPoint(c._bounds.getNorthWest()),this._map.latLngToLayerPoint(c._bounds.getSouthEast())),a=b.getSize();L.DomUtil.setPosition(c,b.min);c.style.width=a.x+"px";c.style.height=a.y+"px"},_getClippedBounds:function(){var b=this._map.getBounds();var l=b.getSouth();var f=b.getNorth();var j=b.getWest();var d=b.getEast();var c=this.options.bounds.getSouth();var a=this.options.bounds.getNorth();var k=this.options.bounds.getWest();var h=this.options.bounds.getEast();if(l<c){l=c}if(f>a){f=a}if(j<k){j=k}if(d>h){d=h}var g=new L.LatLng(f,j);var e=new L.LatLng(l,d);return new L.LatLngBounds(g,e)},_viewreset:function(){if(this._bufferImage._bounds){this._resetImage(this._bufferImage)}if(this._currentImage._bounds){this._resetImage(this._currentImage)}},_update:function(){if(this._map.getZoom()<this.options.minZoom||this._map.getZoom()>this.options.maxZoom){this._div.style.visibility="hidden";return}else{this._div.style.visibility="visible"}if(this._bufferImage._bounds){this._resetImage(this._bufferImage)}var f=this._getClippedBounds();var e=this._map.latLngToContainerPoint(f.getNorthWest());var d=this._map.latLngToContainerPoint(f.getSouthEast());var c=d.x-e.x;var a=d.y-e.y;if(c<32||a<32){return}this._currentImage._bounds=f;this._resetImage(this._currentImage);var b=this._currentImage;if(this.getImageUrl){b.src=this.getImageUrl(f.getNorthWest(),f.getSouthEast(),c,a)}else{this.getImageUrlAsync(f.getNorthWest(),f.getSouthEast(),c,a,function(h,g){b.src=h;b.tag=g})}this.url=b.src;L.DomUtil.setOpacity(this._currentImage,0)},_onImageError:function(a){this.fire("error",a);L.DomUtil.addClass(a.target,"invalid");if(a.target.src!==this.options.errorImageUrl){a.target.src=this.options.errorImageUrl;this._onImageDone(false,a)}},_onImageLoad:function(a){if(a.target.src!==this.options.errorImageUrl){L.DomUtil.removeClass(a.target,"invalid");if(a.target.src!==this.url){return}this._onImageDone(true,a)}},_onImageDone:function(c,b){L.DomUtil.setOpacity(this._currentImage,1);L.DomUtil.setOpacity(this._bufferImage,0);if(this._addInteraction){this._addInteraction(this._currentImage.tag)}var a=this._bufferImage;this._bufferImage=this._currentImage;this._currentImage=a;this.fire("load",b)}});L.nonTiledLayer=function(){return new L.NonTiledLayer()};L.NonTiledLayer.WMS=L.NonTiledLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:false},options:{crs:null,uppercase:false},initialize:function(c,b){this._wmsUrl=c;var a=L.extend({},this.defaultWmsParams);for(var d in b){if(!L.NonTiledLayer.prototype.options.hasOwnProperty(d)&&!L.Layer.prototype.options.hasOwnProperty(d)){a[d]=b[d]}}this.wmsParams=a;L.setOptions(this,b)},onAdd:function(a){this._crs=this.options.crs||a.options.crs;this._wmsVersion=parseFloat(this.wmsParams.version);var b=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[b]=this._crs.code;L.NonTiledLayer.prototype.onAdd.call(this,a)},getImageUrl:function(f,e,b,j){var g=this.wmsParams;g.width=b;g.height=j;var c=this._crs.project(f);var d=this._crs.project(e);var a=this._wmsUrl;var h=h=(this._wmsVersion>=1.3&&this._crs===L.CRS.EPSG4326?[d.y,c.x,c.y,d.x]:[c.x,d.y,d.x,c.y]).join(",");return a+L.Util.getParamString(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+h},setParams:function(b,a){L.extend(this.wmsParams,b);if(!a){this.redraw()}return this}});L.nonTiledLayer.wms=function(b,a){return new L.NonTiledLayer.WMS(b,a)};(function(ah){function av(n,p){var r=n.x-p.x,q=n.y-p.y;return r*r+q*q}function m(n){var p=n.length;if(16>p){return !1}var v,u=Infinity,r=-Infinity,t=Infinity,q=-Infinity;for(v=0;v<p-1;v+=2){u=Math.min(u,n[v]),r=Math.max(r,n[v]),t=Math.min(t,n[v+1]),q=Math.max(q,n[v+1])}v=r-u;q-=t;r=v/q;if(0.85>r||1.15<r){return !1}u={x:u+v/2,y:t+q/2};v=(v+q)/4;t=v*v;for(v=0;v<p-1;v+=2){if(q=av({x:n[v],y:n[v+1]},u),0.8>q/t||1.2<q/t){return !1}}return !0}function h(n,p){var t={};n/=au;p/=au;var r=f,q;q=0>=p?90:1<=p?-90:(2*a(a0(aN*(1-2*p)))-aE)/aN*180;t[r]=q;t[aS]=360*(1===n?1:(n%1+1)%1)-180;return t}function g(n,p){var q=at(1,aD(0,0.5-a2(c(aV+aE*n/180))/aN/2));return{x:(p/360+0.5)*au<<0,y:q*au<<0}}function ar(n){for(var p=aL+af,t=aQ+ag,r=0,q=n.length-3;r<q;r+=2){if(n[r]>af&&n[r]<p&&n[r+1]>ag&&n[r+1]<t){return !0}}return !1}function aH(){aY||(aY=setInterval(function(){for(var n=aK.items,p=!1,r=0,q=n.length;r<q;r++){1>n[r].scale&&(n[r].scale+=0.1,1<n[r].scale&&(n[r].scale=1),p=!0)}C.render();p||(clearInterval(aY),aY=null)},33))}function b(n){aC=aq+n.x;aB=aQ+n.y;C.render(!0)}function a3(n){aL=n.width;aQ=n.height;aq=aL/2<<0;a1=aQ/2<<0;aC=aq;aB=aQ;C.setSize(aL,aQ);aU=ae-50}function aW(n){s=n;au=aj<<s;n=h(af+aq,ag+a1);var p=g(n.latitude,0);aM=g(n.latitude,1).x-p.x;aP=ak(0.95,s-aJ);aF=""+aI.alpha(aP);aT=""+az.alpha(aP);ap=""+aA.alpha(aP)}var ab=Math,a0=ab.exp,a2=ab.log,j=ab.sin,d=ab.cos,c=ab.tan,a=ab.atan,ay=ab.atan2,at=ab.min,aD=ab.max,k=ab.sqrt,e=ab.ceil,ak=ab.pow,a5=a5||Array,aZ=aZ||Array,ab=/iP(ad|hone|od)/g.test(navigator.userAgent),ac=!!~navigator.userAgent.indexOf("Trident"),a4=!ah.requestAnimationFrame||ab||ac?function(n){n()}:ah.requestAnimationFrame,aG=function(n){function p(u,t,v){0>v&&(v+=1);1<v&&(v-=1);return v<1/6?u+6*(t-u)*v:0.5>v?t:v<2/3?u+(t-u)*(2/3-v)*6:u}var r={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",grey:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#ffa500",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},q=function(u,t,w,v){this.H=u;this.S=t;this.L=w;this.A=v};q.parse=function(v){var u=0,z=0,x=0,w=1,t;v=(""+v).toLowerCase();v=r[v]||v;if(t=v.match(/^#(\w{2})(\w{2})(\w{2})$/)){u=parseInt(t[1],16),z=parseInt(t[2],16),x=parseInt(t[3],16)}else{if(t=v.match(/rgba?\((\d+)\D+(\d+)\D+(\d+)(\D+([\d.]+))?\)/)){u=parseInt(t[1],10),z=parseInt(t[2],10),x=parseInt(t[3],10),w=t[4]?parseFloat(t[5]):1}else{return}}return this.fromRGBA(u,z,x,w)};q.fromRGBA=function(B,A,x,w){"object"===typeof B?(A=B.g/255,x=B.b/255,w=B.a,B=B.r/255):(B/=255,A/=255,x/=255);var v=Math.max(B,A,x),t=Math.min(B,A,x),u,z=(v+t)/2,D=v-t;if(D){t=0.5<z?D/(2-v-t):D/(v+t);switch(v){case B:u=(A-x)/D+(A<x?6:0);break;case A:u=(x-B)/D+2;break;case x:u=(B-A)/D+4}u*=60}else{u=t=0}return new q(u,t,z,w)};q.prototype={toRGBA:function(){var u=Math.min(360,Math.max(0,this.H)),z=Math.min(1,Math.max(0,this.S)),x=Math.min(1,Math.max(0,this.L)),w=Math.min(1,Math.max(0,this.A)),v;if(0===z){u=v=z=x}else{var t=0.5>x?x*(1+z):x+z-x*z,x=2*x-t,u=u/360,z=p(x,t,u+1/3);v=p(x,t,u);u=p(x,t,u-1/3)}return{r:Math.round(255*z),g:Math.round(255*v),b:Math.round(255*u),a:w}},toString:function(){var t=this.toRGBA();return 1===t.a?"#"+(16777216+(t.r<<16)+(t.g<<8)+t.b).toString(16).slice(1,7):"rgba("+[t.r,t.g,t.b,t.a.toFixed(2)].join()+")"},hue:function(t){return new q(this.H*t,this.S,this.L,this.A)},saturation:function(t){return new q(this.H,this.S*t,this.L,this.A)},lightness:function(t){return new q(this.H,this.S,this.L*t,this.A)},alpha:function(t){return new q(this.H,this.S,this.L,this.A*t)}};return q}(this),aX=function(){var w=Math,x=w.PI,v=w.sin,u=w.cos,r=w.tan,t=w.asin,q=w.atan2,p=x/180,n=23.4397*p;return function(z,A,E){E=p*-E;A*=p;z=z.valueOf()/86400000-0.5+2440588-2451545;var B=p*(357.5291+0.98560028*z),D;D=p*(1.9148*v(B)+0.02*v(2*B)+0.0003*v(3*B));D=B+D+102.9372*p+x;B=t(v(0)*u(n)+u(0)*v(n)*v(D));D=q(v(D)*u(n)-r(0)*v(n),u(D));z=p*(280.16+360.9856235*z)-E-D;E=t(v(A)*v(B)+u(A)*u(B)*u(z));A=q(v(z),u(z)*v(A)-r(B)*u(A));return{altitude:E,azimuth:A-x/2}}}(),al=function(){function n(w){w=w.toLowerCase();return"#"===w[0]?w:u[r[w]||w]||null}function p(F,E){var D,B,A,G,w=0,x,z;x=0;for(z=F.length-3;x<z;x+=2){D=F[x],B=F[x+1],A=F[x+2],G=F[x+3],w+=D*G-A*B}if((0<w/2?t:q)===E){return F}D=[];for(B=F.length-2;0<=B;B-=2){D.push(F[B],F[B+1])}return D}function v(w){var D,A,x=[],F;switch(w.type){case"GeometryCollection":x=[];D=0;for(A=w.geometries.length;D<A;D++){(F=v(w.geometries[D]))&&x.push.apply(x,F)}return x;case"MultiPolygon":x=[];D=0;for(A=w.coordinates.length;D<A;D++){(F=v({type:"Polygon",coordinates:w.coordinates[D]}))&&x.push.apply(x,F)}return x;case"Polygon":w=w.coordinates;break;default:return[]}var z,B=[],E=[];z=w[0];D=0;for(A=z.length;D<A;D++){B.push(z[D][1],z[D][0])}B=p(B,t);D=0;for(A=w.length-1;D<A;D++){z=w[D+1];E[D]=[];x=0;for(F=z.length;x<F;x++){E[D].push(z[x][1],z[x][0])}E[D]=p(E[D],q)}return[{outer:B,inner:E.length?E:null}]}var u={brick:"#cc7755",bronze:"#ffeecc",canvas:"#fff8f0",concrete:"#999999",copper:"#a0e0d0",glass:"#e8f8f8",gold:"#ffcc00",plants:"#009933",metal:"#aaaaaa",panel:"#fff8f0",plaster:"#999999",roof_tiles:"#f08060",silver:"#cccccc",slate:"#666666",stone:"#996666",tar_paper:"#333333",wood:"#deb887"},r={asphalt:"tar_paper",bitumen:"tar_paper",block:"stone",bricks:"brick",glas:"glass",glassfront:"glass",grass:"plants",masonry:"stone",granite:"stone",panels:"panel",paving_stones:"stone",plastered:"plaster",rooftiles:"roof_tiles",roofingfelt:"tar_paper",sandstone:"stone",sheet:"canvas",sheets:"canvas",shingle:"tar_paper",shingles:"tar_paper",slates:"slate",steel:"metal",tar:"tar_paper",tent:"canvas",thatch:"plants",tile:"roof_tiles",tiles:"roof_tiles"},t="CW",q="CCW";return{read:function(O){if(!O||"FeatureCollection"!==O.type){return[]}O=O.features;var K,I,J,H,E=[],G,D,S,B;K=0;for(I=O.length;K<I;K++){if(G=O[K],"Feature"===G.type&&!1!==aR(G)){J=G.properties;H={};J=J||{};H.height=J.height||(J.levels?3*J.levels:aO);H.minHeight=J.minHeight||(J.minLevel?3*J.minLevel:0);if(D=J.material?n(J.material):J.wallColor||J.color){H.wallColor=D}if(D=J.roofMaterial?n(J.roofMaterial):J.roofColor){H.roofColor=D}switch(J.shape){case"cylinder":case"cone":case"dome":case"sphere":H.shape=J.shape;H.isRotational=!0;break;case"pyramid":H.shape=J.shape}switch(J.roofShape){case"cone":case"dome":H.roofShape=J.roofShape;H.isRotational=!0;break;case"pyramid":H.roofShape=J.roofShape}H.roofShape&&J.roofHeight?(H.roofHeight=J.roofHeight,H.height=aD(0,H.height-H.roofHeight)):H.roofHeight=0;S=H;D=v(G.geometry);J=0;for(H=D.length;J<H;J++){B=S;var P={},R=void 0;for(R in B){B.hasOwnProperty(R)&&(P[R]=B[R])}B=P;B.footprint=D[J].outer;if(B.isRotational){for(var P=B,R=B.footprint,N=180,M=-180,Q=0,F=R.length;Q<F;Q+=2){N=at(N,R[Q+1]),M=aD(M,R[Q+1])}P.radius=(M-N)/2}D[J].inner&&(B.holes=D[J].inner);if(G.id||G.properties.id){B.id=G.id||G.properties.id}G.properties.relationId&&(B.relationId=G.properties.relationId);E.push(B)}}}return E}}}(),aN=Math.PI,aE=aN/2,aV=aN/4,aj=256,s,au,aJ=15,f="latitude",aS="longitude",aL=0,aQ=0,aq=0,a1=0,af=0,ag=0,aI=aG.parse("rgba(200, 190, 180)"),az=aI.lightness(0.8),aA=aI.lightness(1.2),aF=""+aI,aT=""+az,ap=""+aA,aM=0,aP=1,aU,aO=5,aC,aB,ae=450,ax,l=function(){function n(u,w){if(p[u]){w&&w(p[u])}else{var v=new XMLHttpRequest;v.onreadystatechange=function(){if(4===v.readyState&&v.status&&!(200>v.status||299<v.status)&&w&&v.responseText){var x=v.responseText;p[u]=x;t.push({url:u,size:x.length});r+=x.length;for(w(x);r>q;){x=t.shift(),r-=x.size,delete p[x.url]}}};v.open("GET",u);v.send(null);return v}}var p={},t=[],r=0,q=5242880;return{loadJSON:function(u,v){return n(u,function(x){var w;try{w=JSON.parse(x)}catch(z){}v(w)})}}}(),aK={loadedItems:{},items:[],getPixelFootprint:function(T){for(var U=new a5(T.length),S,R=0,P=T.length-1;R<P;R+=2){S=g(T[R],T[R+1]),U[R]=S.x,U[R+1]=S.y}T=U;U=T.length/2;S=new aZ(U);var R=0,P=U-1,Q,O,N,M,J=[],K=[],I=[];for(S[R]=S[P]=1;P;){O=0;for(Q=R+1;Q<P;Q++){N=T[2*Q];var H=T[2*Q+1],G=T[2*R],F=T[2*R+1],D=T[2*P],A=T[2*P+1],E=D-G,B=A-F,z=void 0;if(0!==E||0!==B){z=((N-G)*E+(H-F)*B)/(E*E+B*B),1<z?(G=D,F=A):0<z&&(G+=E*z,F+=B*z)}E=N-G;B=H-F;N=E*E+B*B;N>O&&(M=Q,O=N)}2<O&&(S[M]=1,J.push(R),K.push(M),J.push(M),K.push(P));R=J.pop();P=K.pop()}for(Q=0;Q<U;Q++){S[Q]&&I.push(T[2*Q],T[2*Q+1])}U=I;if(!(8>U.length)){return U}},resetItems:function(){this.items=[];this.loadedItems={};ao.reset()},addRenderItems:function(n,p){for(var w,v,t,u=al.read(n),r=0,q=u.length;r<q;r++){w=u[r],t=w.id||[w.footprint[0],w.footprint[1],w.height,w.minHeight].join(),!this.loadedItems[t]&&(v=this.scale(w))&&(v.scale=p?0:1,this.items.push(v),this.loadedItems[t]=1)}aH()},scale:function(B){var D={},A=6/ak(2,s-aJ);B.id&&(D.id=B.id);D.height=at(B.height/A,aU);D.minHeight=isNaN(B.minHeight)?0:B.minHeight/A;if(!(D.minHeight>aU)&&(D.footprint=this.getPixelFootprint(B.footprint),D.footprint)){for(var z=D.footprint,w=Infinity,x=-Infinity,v=Infinity,u=-Infinity,t=0,q=z.length-3;t<q;t+=2){w=at(w,z[t]),x=aD(x,z[t]),v=at(v,z[t+1]),u=aD(u,z[t+1])}D.center={x:w+(x-w)/2<<0,y:v+(u-v)/2<<0};B.radius&&(D.radius=B.radius*aM);B.shape&&(D.shape=B.shape);B.roofShape&&(D.roofShape=B.roofShape);"cone"!==D.roofShape&&"dome"!==D.roofShape||D.shape||!m(D.footprint)||(D.shape="cylinder");if(B.holes){D.holes=[];for(var r,z=0,w=B.holes.length;z<w;z++){(r=this.getPixelFootprint(B.holes[z]))&&D.holes.push(r)}}var p;B.wallColor&&(p=aG.parse(B.wallColor))&&(p=p.alpha(aP),D.altColor=""+p.lightness(0.8),D.wallColor=""+p);B.roofColor&&(p=aG.parse(B.roofColor))&&(D.roofColor=""+p.alpha(aP));B.relationId&&(D.relationId=B.relationId);D.hitColor=ao.idToColor(B.relationId||B.id);D.roofHeight=isNaN(B.roofHeight)?0:B.roofHeight/A;if(!(D.height+D.roofHeight<=D.minHeight)){return D}}},set:function(n){this.isStatic=!0;this.resetItems();this._staticData=n;this.addRenderItems(this._staticData,!0)},load:function(n,p){this.src=n||"http://{s}.data.osmbuildings.org/0.2/{k}/tile/{z}/{x}/{y}.json".replace("{k}",p||"anonymous");this.update()},update:function(){function n(w){q.addRenderItems(w)}this.resetItems();if(!(s<aJ)){if(this.isStatic&&this._staticData){this.addRenderItems(this._staticData)}else{if(this.src){var p=16<s?256<<s-16:256>>16-s,v=af/p<<0,u=ag/p<<0,r=e((af+aL)/p),p=e((ag+aQ)/p),t,q=this;for(t=u;t<=p;t++){for(u=v;u<=r;u++){this.loadTile(u,t,16,n)}}}}}},loadTile:function(n,p,r,q){n=this.src.replace("{s}","abcd"[(n+p)%4]).replace("{x}",n).replace("{y}",p).replace("{z}",r);return l.loadJSON(n,q)}},an={draw:function(z,A,x,w,u,v,t,r){var q,n=this._extrude(z,A,w,u,v,t),p=[];if(x){for(A=0,q=x.length;A<q;A++){p[A]=this._extrude(z,x[A],w,u,v,t)}}z.fillStyle=r;z.beginPath();this._ring(z,n);if(x){for(A=0,q=p.length;A<q;A++){this._ring(z,p[A])}}z.closePath();z.stroke();z.fill()},_extrude:function(B,D,z,x,v,w){z=ae/(ae-z);for(var u=ae/(ae-x),r={x:0,y:0},q={x:0,y:0},n,p,A=[],F=0,E=D.length-3;F<E;F+=2){r.x=D[F]-af,r.y=D[F+1]-ag,q.x=D[F+2]-af,q.y=D[F+3]-ag,n=ad.project(r,z),p=ad.project(q,z),x&&(r=ad.project(r,u),q=ad.project(q,u)),(q.x-r.x)*(n.y-r.y)>(n.x-r.x)*(q.y-r.y)&&(B.fillStyle=r.x<q.x&&r.y<q.y||r.x>q.x&&r.y>q.y?w:v,B.beginPath(),this._ring(B,[q.x,q.y,r.x,r.y,n.x,n.y,p.x,p.y]),B.closePath(),B.fill()),A[F]=n.x,A[F+1]=n.y}return A},_ring:function(n,p){n.moveTo(p[0],p[1]);for(var r=2,q=p.length-1;r<q;r+=2){n.lineTo(p[r],p[r+1])}},simplified:function(n,p,r){n.beginPath();this._ringAbs(n,p);if(r){p=0;for(var q=r.length;p<q;p++){this._ringAbs(n,r[p])}}n.closePath();n.stroke();n.fill()},_ringAbs:function(n,p){n.moveTo(p[0]-af,p[1]-ag);for(var r=2,q=p.length-1;r<q;r+=2){n.lineTo(p[r]-af,p[r+1]-ag)}},shadow:function(B,D,A,z,w){for(var x=null,v={x:0,y:0},u={x:0,y:0},t,p,r=0,n=D.length-3;r<n;r+=2){v.x=D[r]-af,v.y=D[r+1]-ag,u.x=D[r+2]-af,u.y=D[r+3]-ag,t=o.project(v,z),p=o.project(u,z),w&&(v=o.project(v,w),u=o.project(u,w)),(u.x-v.x)*(t.y-v.y)>(t.x-v.x)*(u.y-v.y)?(1===x&&B.lineTo(v.x,v.y),x=0,r||B.moveTo(v.x,v.y),B.lineTo(u.x,u.y)):(0===x&&B.lineTo(t.x,t.y),x=1,r||B.moveTo(t.x,t.y),B.lineTo(p.x,p.y))}if(A){for(r=0,n=A.length;r<n;r++){this._ringAbs(B,A[r])}}},shadowMask:function(n,p,r){this._ringAbs(n,p);if(r){p=0;for(var q=r.length;p<q;p++){this._ringAbs(n,r[p])}}},hitArea:function(A,B,z,x,v,w){z=null;var u={x:0,y:0},r={x:0,y:0};x=ae/(ae-x);var q=ae/(ae-v),n;A.fillStyle=w;A.beginPath();for(var p=0,D=B.length-3;p<D;p+=2){u.x=B[p]-af,u.y=B[p+1]-ag,r.x=B[p+2]-af,r.y=B[p+3]-ag,w=ad.project(u,x),n=ad.project(r,x),v&&(u=ad.project(u,q),r=ad.project(r,q)),(r.x-u.x)*(w.y-u.y)>(w.x-u.x)*(r.y-u.y)?(1===z&&A.lineTo(u.x,u.y),z=0,p||A.moveTo(u.x,u.y),A.lineTo(r.x,r.y)):(0===z&&A.lineTo(w.x,w.y),z=1,p||A.moveTo(w.x,w.y),A.lineTo(n.x,n.y))}A.closePath();A.fill()}},y={draw:function(z,A,x,w,u,v,t,r,q){A={x:A.x-af,y:A.y-ag};var n=ae/(ae-u),p=ae/(ae-v);u=ad.project(A,n);w*=n;v&&(A=ad.project(A,p),x*=p);(n=this._tangents(A,x,u,w))?(v=ay(n[0].y1-A.y,n[0].x1-A.x),n=ay(n[1].y1-A.y,n[1].x1-A.x)):(v=1.5*aN,n=1.5*aN);z.fillStyle=t;z.beginPath();z.arc(u.x,u.y,w,aE,v,!0);z.arc(A.x,A.y,x,v,aE);z.closePath();z.fill();z.fillStyle=r;z.beginPath();z.arc(u.x,u.y,w,n,aE,!0);z.arc(A.x,A.y,x,aE,n);z.closePath();z.fill();z.fillStyle=q;this._circle(z,u,w)},simplified:function(n,p,q){this._circle(n,{x:p.x-af,y:p.y-ag},q)},shadow:function(n,p,w,v,t,u){p={x:p.x-af,y:p.y-ag};t=o.project(p,t);var r;u&&(p=o.project(p,u));var q=this._tangents(p,w,t,v);q?(u=ay(q[0].y1-p.y,q[0].x1-p.x),r=ay(q[1].y1-p.y,q[1].x1-p.x),n.moveTo(q[1].x2,q[1].y2),n.arc(t.x,t.y,v,r,u),n.arc(p.x,p.y,w,u,r)):(n.moveTo(p.x+w,p.y),n.arc(p.x,p.y,w,0,2*aN))},shadowMask:function(n,p,r){var q=p.x-af;p=p.y-ag;n.moveTo(q+r,p);n.arc(q,p,r,0,2*aN)},hitArea:function(w,x,v,u,r,t,q){x={x:x.x-af,y:x.y-ag};var p=ae/(ae-r),n=ae/(ae-t);r=ad.project(x,p);u*=p;t&&(x=ad.project(x,n),v*=n);t=this._tangents(x,v,r,u);w.fillStyle=q;w.beginPath();t?(q=ay(t[0].y1-x.y,t[0].x1-x.x),p=ay(t[1].y1-x.y,t[1].x1-x.x),w.moveTo(t[1].x2,t[1].y2),w.arc(r.x,r.y,u,p,q),w.arc(x.x,x.y,v,q,p)):(w.moveTo(x.x+v,x.y),w.arc(x.x,x.y,v,0,2*aN));w.closePath();w.fill()},_circle:function(n,p,q){n.beginPath();n.arc(p.x,p.y,q,0,2*aN);n.stroke();n.fill()},_tangents:function(B,D,A,z){var w=B.x-A.x,x=B.y-A.y,v=D-z,u=w*w+x*x;if(!(u<=v*v)){var u=k(u),w=-w/u,x=-x/u,v=v/u,u=[],t,q,r;t=k(aD(0,1-v*v));for(var p=1;-1<=p;p-=2){q=w*v-p*t*x,r=x*v+p*t*w,u.push({x1:B.x+D*q<<0,y1:B.y+D*r<<0,x2:A.x+z*q<<0,y2:A.y+z*r<<0})}return u}}},aw={draw:function(z,A,x,w,u,v,t){var r=ae/(ae-u);x=ad.project({x:x.x-af,y:x.y-ag},ae/(ae-w));w={x:0,y:0};for(var q={x:0,y:0},n=0,p=A.length-3;n<p;n+=2){w.x=A[n]-af,w.y=A[n+1]-ag,q.x=A[n+2]-af,q.y=A[n+3]-ag,u&&(w=ad.project(w,r),q=ad.project(q,r)),(q.x-w.x)*(x.y-w.y)>(x.x-w.x)*(q.y-w.y)&&(z.fillStyle=w.x<q.x&&w.y<q.y||w.x>q.x&&w.y>q.y?t:v,z.beginPath(),this._triangle(z,w,q,x),z.closePath(),z.fill())}},_triangle:function(n,p,r,q){n.moveTo(p.x,p.y);n.lineTo(r.x,r.y);n.lineTo(q.x,q.y)},_ring:function(n,p){n.moveTo(p[0]-af,p[1]-ag);for(var r=2,q=p.length-1;r<q;r+=2){n.lineTo(p[r]-af,p[r+1]-ag)}},shadow:function(n,p,w,v,t){var u={x:0,y:0},r={x:0,y:0};w=o.project({x:w.x-af,y:w.y-ag},v);v=0;for(var q=p.length-3;v<q;v+=2){u.x=p[v]-af,u.y=p[v+1]-ag,r.x=p[v+2]-af,r.y=p[v+3]-ag,t&&(u=o.project(u,t),r=o.project(r,t)),(r.x-u.x)*(w.y-u.y)>(w.x-u.x)*(r.y-u.y)&&this._triangle(n,u,r,w)}},shadowMask:function(n,p){this._ring(n,p)},hitArea:function(w,x,v,u,r,t){var q=ae/(ae-r);v=ad.project({x:v.x-af,y:v.y-ag},ae/(ae-u));u={x:0,y:0};var p={x:0,y:0};w.fillStyle=t;w.beginPath();t=0;for(var n=x.length-3;t<n;t+=2){u.x=x[t]-af,u.y=x[t+1]-ag,p.x=x[t+2]-af,p.y=x[t+3]-ag,r&&(u=ad.project(u,q),p=ad.project(p,q)),(p.x-u.x)*(v.y-u.y)>(v.x-u.x)*(p.y-u.y)&&this._triangle(w,u,p,v)}w.closePath();w.fill()}},ad={project:function(n,p){return{x:(n.x-aC)*p+aC<<0,y:(n.y-aB)*p+aB<<0}},render:function(){var B=this.context;B.clearRect(0,0,aL,aQ);if(!(s<aJ||ax)){var D,A,z,w={x:aC+af,y:aB+ag},x,v,u,t,p=aK.items;p.sort(function(E,q){return E.minHeight-q.minHeight||av(q.center,w)-av(E.center,w)||q.height-E.height});for(var r=0,n=p.length;r<n;r++){if(D=p[r],!ai.isSimple(D)&&(x=D.footprint,ar(x))){A=1>D.scale?D.height*D.scale:D.height;z=0;D.minHeight&&(z=1>D.scale?D.minHeight*D.scale:D.minHeight);v=D.wallColor||aF;u=D.altColor||aT;t=D.roofColor||ap;B.strokeStyle=u;switch(D.shape){case"cylinder":y.draw(B,D.center,D.radius,D.radius,A,z,v,u,t);break;case"cone":y.draw(B,D.center,D.radius,0,A,z,v,u);break;case"dome":y.draw(B,D.center,D.radius,D.radius/2,A,z,v,u);break;case"sphere":y.draw(B,D.center,D.radius,D.radius,A,z,v,u,t);break;case"pyramid":aw.draw(B,x,D.center,A,z,v,u);break;default:an.draw(B,x,D.holes,A,z,v,u,t)}switch(D.roofShape){case"cone":y.draw(B,D.center,D.radius,0,A+D.roofHeight,A,t,""+aG.parse(t).lightness(0.9));break;case"dome":y.draw(B,D.center,D.radius,D.radius/2,A+D.roofHeight,A,t,""+aG.parse(t).lightness(0.9));break;case"pyramid":aw.draw(B,x,D.center,A+D.roofHeight,A,t,aG.parse(t).lightness(0.9))}}}}}},ai={maxZoom:aJ+2,maxHeight:5,isSimple:function(n){return s<=this.maxZoom&&n.height+n.roofHeight<this.maxHeight},render:function(){var n=this.context;n.clearRect(0,0,aL,aQ);if(!(s<aJ||ax||s>this.maxZoom)){for(var p,u,t=aK.items,q=0,r=t.length;q<r;q++){if(p=t[q],!(p.height>=this.maxHeight)&&(u=p.footprint,ar(u))){switch(n.strokeStyle=p.altColor||aT,n.fillStyle=p.roofColor||ap,p.shape){case"cylinder":case"cone":case"dome":case"sphere":y.simplified(n,p.center,p.radius);break;default:an.simplified(n,u,p.holes)}}}}}},o={enabled:!0,color:"#666666",blurColor:"#000000",blurSize:15,date:new Date,direction:{x:0,y:0},project:function(n,p){return{x:n.x+this.direction.x*p,y:n.y+this.direction.y*p}},render:function(){var n=this.context,p,w,v;n.clearRect(0,0,aL,aQ);if(!(!this.enabled||s<aJ||ax||(p=h(aq+af,a1+ag),p=aX(this.date,p.latitude,p.longitude),0>=p.altitude))){w=1/c(p.altitude);v=5>w?0.75:1/w*5;this.direction.x=d(p.azimuth)*w;this.direction.y=j(p.azimuth)*w;var t,u,r,q;p=aK.items;n.canvas.style.opacity=v/(2*aP);n.shadowColor=this.blurColor;n.shadowBlur=aP/2*this.blurSize;n.fillStyle=this.color;n.beginPath();v=0;for(w=p.length;v<w;v++){if(t=p[v],q=t.footprint,ar(q)){u=1>t.scale?t.height*t.scale:t.height;r=0;t.minHeight&&(r=1>t.scale?t.minHeight*t.scale:t.minHeight);switch(t.shape){case"cylinder":y.shadow(n,t.center,t.radius,t.radius,u,r);break;case"cone":y.shadow(n,t.center,t.radius,0,u,r);break;case"dome":y.shadow(n,t.center,t.radius,t.radius/2,u,r);break;case"sphere":y.shadow(n,t.center,t.radius,t.radius,u,r);break;case"pyramid":aw.shadow(n,q,t.center,u,r);break;default:an.shadow(n,q,t.holes,u,r)}switch(t.roofShape){case"cone":y.shadow(n,t.center,t.radius,0,u+t.roofHeight,u);break;case"dome":y.shadow(n,t.center,t.radius,t.radius/2,u+t.roofHeight,u);break;case"pyramid":aw.shadow(n,q,t.center,u+t.roofHeight,u)}}}n.closePath();n.fill();n.shadowBlur=null;n.globalCompositeOperation="destination-out";n.beginPath();v=0;for(w=p.length;v<w;v++){if(t=p[v],q=t.footprint,ar(q)&&!t.minHeight){switch(t.shape){case"cylinder":case"cone":case"dome":y.shadowMask(n,t.center,t.radius);break;default:an.shadowMask(n,q,t.holes)}}}n.fillStyle="#00ff00";n.fill();n.globalCompositeOperation="source-over"}}},ao={_idMapping:[null],reset:function(){this._idMapping=[null]},render:function(){if(!this._timer){var n=this;this._timer=setTimeout(function(){n._timer=null;n._render()},500)}},_render:function(){var x=this.context;x.clearRect(0,0,aL,aQ);if(!(s<aJ||ax)){var z,w,v,t={x:aC+af,y:aB+ag},u,r,q=aK.items;q.sort(function(B,A){return B.minHeight-A.minHeight||av(A.center,t)-av(B.center,t)||A.height-B.height});for(var p=0,n=q.length;p<n;p++){if(z=q[p],r=z.hitColor){if(u=z.footprint,ar(u)){w=z.height;v=0;z.minHeight&&(v=z.minHeight);switch(z.shape){case"cylinder":y.hitArea(x,z.center,z.radius,z.radius,w,v,r);break;case"cone":y.hitArea(x,z.center,z.radius,0,w,v,r);break;case"dome":y.hitArea(x,z.center,z.radius,z.radius/2,w,v,r);break;case"sphere":y.hitArea(x,z.center,z.radius,z.radius,w,v,r);break;case"pyramid":aw.hitArea(x,u,z.center,w,v,r);break;default:an.hitArea(x,u,z.holes,w,v,r)}switch(z.roofShape){case"cone":y.hitArea(x,z.center,z.radius,0,w+z.roofHeight,w,r);break;case"dome":y.hitArea(x,z.center,z.radius,z.radius/2,w+z.roofHeight,w,r);break;case"pyramid":aw.hitArea(x,u,z.center,w+z.roofHeight,w,r)}}}}this._imageData=this.context.getImageData(0,0,aL,aQ).data}},getIdFromXY:function(n,p){var r=this._imageData;if(r){var q=4*((p|0)*aL+(n|0));return this._idMapping[r[q]|r[q+1]<<8|r[q+2]<<16]}},idToColor:function(n){var p=this._idMapping.indexOf(n);-1===p&&(this._idMapping.push(n),p=this._idMapping.length-1);return"rgb("+[p&255,p>>8&255,p>>16&255].join()+")"}},aY,C={container:document.createElement("DIV"),items:[],init:function(){this.container.style.pointerEvents="none";this.container.style.position="absolute";this.container.style.left=0;this.container.style.top=0;o.context=this.createContext(this.container);ai.context=this.createContext(this.container);ad.context=this.createContext(this.container);ao.context=this.createContext()},render:function(n){a4(function(){n||(o.render(),ai.render(),ao.render());ad.render()})},createContext:function(n){var p=document.createElement("CANVAS");p.style.transform="translate3d(0, 0, 0)";p.style.imageRendering="optimizeSpeed";p.style.position="absolute";p.style.left=0;p.style.top=0;var q=p.getContext("2d");q.lineCap="round";q.lineJoin="round";q.lineWidth=1;q.imageSmoothingEnabled=!1;this.items.push(p);n&&n.appendChild(p);return q},appendTo:function(n){n.appendChild(this.container)},remove:function(){this.container.parentNode.removeChild(this.container)},setSize:function(n,p){for(var r=0,q=this.items.length;r<q;r++){this.items[r].width=n,this.items[r].height=p}},setPosition:function(n,p){this.container.style.left=n+"px";this.container.style.top=p+"px"}};C.init();ab=function(n){this.offset={x:0,y:0};n&&n.addLayer(this)};ac=ab.prototype=L.Layer?new L.Layer:{};ac.addTo=function(n){n.addLayer(this);return this};ac.onAdd=function(n){this.map=n;C.appendTo(n._panes.overlayPane);var p=this.getOffset(),r=n.getPixelOrigin();a3({width:n._size.x,height:n._size.y});var q=r.y-p.y;af=r.x-p.x;ag=q;aW(n._zoom);C.setPosition(-p.x,-p.y);n.on({move:this.onMove,moveend:this.onMoveEnd,zoomstart:this.onZoomStart,zoomend:this.onZoomEnd,resize:this.onResize,viewreset:this.onViewReset,click:this.onClick},this);if(n.options.zoomAnimation){n.on("zoomanim",this.onZoom,this)}n.attributionControl&&n.attributionControl.addAttribution('&copy; <a href="http://osmbuildings.org">OSM Buildings</a>');aK.update()};ac.onRemove=function(){var n=this.map;n.attributionControl&&n.attributionControl.removeAttribution('&copy; <a href="http://osmbuildings.org">OSM Buildings</a>');n.off({move:this.onMove,moveend:this.onMoveEnd,zoomstart:this.onZoomStart,zoomend:this.onZoomEnd,resize:this.onResize,viewreset:this.onViewReset,click:this.onClick},this);n.options.zoomAnimation&&n.off("zoomanim",this.onZoom,this);C.remove()};ac.onMove=function(n){n=this.getOffset();b({x:this.offset.x-n.x,y:this.offset.y-n.y})};ac.onMoveEnd=function(n){if(this.noMoveEnd){this.noMoveEnd=!1}else{var p=this.map;n=this.getOffset();var q=p.getPixelOrigin();this.offset=n;C.setPosition(-n.x,-n.y);b({x:0,y:0});a3({width:p._size.x,height:p._size.y});p=q.y-n.y;af=q.x-n.x;ag=p;C.render();aK.update()}};ac.onZoomStart=function(n){ax=!0;C.render()};ac.onZoom=function(n){};ac.onZoomEnd=function(n){n=this.map;var p=this.getOffset(),r=n.getPixelOrigin(),q=r.y-p.y;af=r.x-p.x;ag=q;n=n._zoom;ax=!1;aW(n);aK.update();C.render();this.noMoveEnd=!0};ac.onResize=function(){};ac.onViewReset=function(){var n=this.getOffset();this.offset=n;C.setPosition(-n.x,-n.y);b({x:0,y:0})};ac.onClick=function(n){var p=ao.getIdFromXY(n.containerPoint.x,n.containerPoint.y);p&&am({feature:p,lat:n.latlng.lat,lon:n.latlng.lng})};ac.getOffset=function(){return L.DomUtil.getPosition(this.map._mapPane)};ac.style=function(n){n=n||{};var p;if(p=n.color||n.wallColor){aI=aG.parse(p),aF=""+aI.alpha(aP),az=aI.lightness(0.8),aT=""+az.alpha(aP),aA=aI.lightness(1.2),ap=""+aA.alpha(aP)}n.roofColor&&(aA=aG.parse(n.roofColor),ap=""+aA.alpha(aP));void 0!==n.shadows&&(o.enabled=!!n.shadows);C.render();return this};ac.date=function(n){o.date=n;o.render();return this};ac.load=function(n){aK.load(n);return this};ac.set=function(n){aK.set(n);return this};var aR=function(){};ac.each=function(n){aR=function(p){return n(p)};return this};var am=function(){};ac.click=function(n){am=function(p){return n(p)};return this};ab.VERSION="0.2.2b";ab.ATTRIBUTION='&copy; <a href="http://osmbuildings.org">OSM Buildings</a>';ah.OSMBuildings=ab})(this);GV.dynamicAddedComp={created:function(){var a=document.getElementById("gv-container");var b=document.createElement("div");b.id=this.divId;a.appendChild(b);this.$mount("#"+this.divId)}};