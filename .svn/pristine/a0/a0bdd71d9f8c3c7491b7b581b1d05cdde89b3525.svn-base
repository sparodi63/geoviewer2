import axios from 'axios'
import globals from '../globals'

export default function getConfig(idMap, app = 'generico') {
  if (!idMap || idMap === 'null') {
    throw new Error('Parametro idMap mancante')
  }

  let url = idMap.startsWith('D') ? `${globals.RL_DYN_MAP_CONFIG_SERVICE}${idMap}?app=${app}` : `${globals.RL_MAP_CONFIG_SERVICE}${idMap}?app=${app}`

  let params = {}

  if (GV.config.geoserverUrl) {
    params.geoserverUrl = GV.config.geoserverUrl
  }

  return axios.get(url, {
    params: params,
  })
}
