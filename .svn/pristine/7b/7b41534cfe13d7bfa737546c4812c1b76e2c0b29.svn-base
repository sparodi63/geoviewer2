
GV.Models.RlMap = Backbone.Model.extend({
/*    defaults: {
        id: 0,
        name: '',
        extent: '',
        type: '',
        layers: []
    },*/

    urlRoot: '/geoservices/REST/config/map/',

    initialize: function() {
        var layers = new GV.Models.RlLayers(this.get('layers'));

        layers.models = layers.models.reverse();
        this.set('layers', layers);
        this.get('layers').on('change', this.layersChanged, this);
        this.set('type', 'map');
    },

    layersChanged: function(model) {
        // trigger new event.
        this.trigger('layer:change', model);
    },

    parse: function(response) {
        //console.log(response);
        return response.data;
    },

    toJSON: function() {
        var data = Backbone.Model.prototype.toJSON.call(this);
        if (data.layers && data.layers.toJSON) {
            data.layers = data.layers.toJSON();
        }
        return data;
    }
});
