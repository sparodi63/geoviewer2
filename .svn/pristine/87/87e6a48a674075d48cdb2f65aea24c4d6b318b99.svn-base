var ol2d = new ol.Map({
  controls: [new ol.control.Attribution({collapsible: false})],
  target: 'map',
  view: new ol.View()
});

// imposto extent
var extentStr = "830036,5402959,1123018,5597635";
var extArray = extentStr.split(',');
extArray[0] = parseFloat(extArray[0]);
extArray[1] = parseFloat(extArray[1]);
extArray[2] = parseFloat(extArray[2]);
extArray[3] = parseFloat(extArray[3]);
ol2d.getView().fit(extArray, ol2d.getSize());

// base layer
var attribution = new ol.Attribution({
    html: 'Tiles &copy; <a href="http://services.arcgisonline.com/ArcGIS/' +
    'rest/services/World_Topo_Map/MapServer">ArcGIS</a>'
});
var baseLayer = new ol.layer.Tile({
    source: new ol.source.XYZ({
        attributions: [attribution],
        url: 'http://server.arcgisonline.com/ArcGIS/rest/services/' +
        'World_Imagery/MapServer/tile/{z}/{y}/{x}'
    })
});
ol2d.addLayer(baseLayer);


var wmsLayer = new ol.layer.Tile({
    //extent: [830036,5402959,1123018,5597635],
    source: new ol.source.TileWMS({
        url: 'http://geoservizi.regione.liguria.it/geoserver/M735/wms?',
        params: {'LAYERS': 'L1429', 'TILED': true, 'TILESORIGIN': '-20037508,-20037508', 'FORMAT_OPTIONS': 'antialias:text', 'FORMAT': 'image/png8'},
        serverType: 'geoserver'
    })
});
ol2d.addLayer(wmsLayer);

var untiledWms = new ol.layer.Image({
    extent: [830036,5402959,1123018,5597635],
    source: new ol.source.ImageWMS({
        url: 'http://geoservizi.regione.liguria.it/geoserver/M735/wms?',
        params: {'LAYERS': 'L1429'},
        serverType: 'geoserver'
    })
});
//ol2d.addLayer(untiledWms);

var ol3d = new olcs.OLCesium({map: ol2d});
var scene = ol3d.getCesiumScene();
var terrainProvider = new Cesium.CesiumTerrainProvider({
    url : '//assets.agi.com/stk-terrain/world'
});
scene.terrainProvider = terrainProvider;

