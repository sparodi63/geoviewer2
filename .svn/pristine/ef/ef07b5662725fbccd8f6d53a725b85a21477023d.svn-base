<template>
    <div class="gv-info-wms gv-inverted-color-scheme" id="gv-info-wms-list">
    <vue-draggable-resizable :w="width" :resizable="false">
        <gv-title title="Risultato Info - Lista":divId="'gv-info-wms-list'"></gv-title>
        <div class="gv-info-wms-body gv-inverted-color-scheme">
          <el-select @change="onChange" value='' size="mini" placeholder="Lista Risultati" style="width: 250px;">
              <el-option v-for="item in items" :label="item.label" :value="item" :key="item.id" :value-key="item.id">
                          <span class="gv-info-wms-list-item-span">{{item.label}} ( {{item.layer.legend.label}} )</span>
              </el-option>
          </el-select>
        </div>
    </vue-draggable-resizable> 
    </div>
</template>

<script>
import InfoWmsManager from './InfoWmsManager'

import Vue from 'vue'
import { Select, Option } from 'element-ui'
Vue.use(Select)
Vue.use(Option)

Vue.component('vue-draggable-resizable', () => import('vue-draggable-resizable'))
Vue.component('gv-title', () => import('./Title.vue'))

export default {
  name: 'gv-info-wms-list',
  props: ['items', 'visible'],
  data() {
    return {
      width: 260,
      value: ''
    }
  },
  methods: {
    closePanel: function() {
      this.$el.parentNode.removeChild(this.$el)
      GV.app.map.getLayerByName('InfoWmsHilite').clearLayers()
    },
    onChange: function(item) {
      InfoWmsManager.methods.showFeatureInfo(item)
    },
  },
}
</script>

<style scoped>
.gv-info-wms {
  position: absolute;
  left: 0px;
  top: 0px;
  margin-left: 10px;
  margin-top: 50px;
  width: 260px;
  z-index: 800;
  max-height: 430px;
}

.gv-info-wms-body {
  position: absolute;
  padding: 5px;
  overflow-y: auto;
  width: 250px;
  height: 30px;
  max-height: 200px;
}

.gv-info-wms-list-item-span {
  font-size: 12px;
  white-space: nowrap;
  overflow: hidden;
  max-width: 245px;
}

</style>